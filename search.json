[{"title":"hexoæ­å»ºåšå®¢","url":"/2020/10/25/hexo%E5%8D%9A%E5%AE%A2/","content":"<p>æ­å»ºä¸€ä¸ªåšå®¢ä¸éš¾ï¼Œä½†æ˜¯ç½‘ä¸Šèµ„æ–™å¥½å¤šå‘ã€‚æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªåˆšå…¥é—¨å°ç™½ï¼Œå¯èƒ½æœ‰äº›ä¼šå†™é”™ï¼Œè¯·åœ¨è¯„è®ºæŒ‡å‡ºã€‚ä½†æ˜¯æœ‰ç»è¿‡å®æˆ˜æµ‹è¯•çš„ã€‚ æˆ‘ç”¨çš„åšå®¢æ¡†æ¶æ˜¯ hexoï¼Œé‡‡ç”¨ NexT ä¸»é¢˜ ï¼Œä½¿ç”¨ Github æ‰˜ç®¡é¡µé¢ã€‚</p>\n<a id=\"more\"></a>\n\n<h1 id=\"ä¸€ã€åŸºç¡€é…ç½®\"><a href=\"#ä¸€ã€åŸºç¡€é…ç½®\" class=\"headerlink\" title=\"ä¸€ã€åŸºç¡€é…ç½®\"></a>ä¸€ã€åŸºç¡€é…ç½®</h1><h2 id=\"1-1-æœ¬åœ°å®‰è£…hexo\"><a href=\"#1-1-æœ¬åœ°å®‰è£…hexo\" class=\"headerlink\" title=\"1.1.æœ¬åœ°å®‰è£…hexo\"></a>1.1.æœ¬åœ°å®‰è£…hexo</h2><p>é¦–å…ˆä¿è¯ä½ ç”µè„‘ä¸Šæœ‰nodeç¯å¢ƒï¼Œè¿™ä¸ªä¸æ‡‚çš„å¯ä»¥è‡ªå®šç™¾åº¦ã€‚</p>\n<p>æ§åˆ¶å°è¾“å…¥node -vå‡ºç°ç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>\n<p>æœ‰äº†nodeå°±å¯ä»¥å®‰è£…hexoäº†ï¼Œæ§åˆ¶å°è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i -g hexo</span><br></pre></td></tr></table></figure>\n\n<p>åŒæ ·æ§åˆ¶å°è¾“å…¥hexo -vå‡ºç°ç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>\n<p>ç„¶åå¼€å§‹åˆå§‹åŒ–é¡¹ç›®ï¼Œæ§åˆ¶å°è¾“å…¥ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo init</span><br></pre></td></tr></table></figure>\n\n<p>ç”Ÿæˆçš„ç›®å½•ï¼š</p>\n<blockquote>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">node_modulesï¼šæ˜¯ä¾èµ–åŒ…</span><br><span class=\"line\">publicï¼šå­˜æ”¾çš„æ˜¯ç”Ÿæˆçš„é¡µé¢</span><br><span class=\"line\">scaffoldsï¼šå‘½ä»¤ç”Ÿæˆæ–‡ç« ç­‰çš„æ¨¡æ¿</span><br><span class=\"line\">sourceï¼šç”¨å‘½ä»¤åˆ›å»ºçš„å„ç§æ–‡ç« </span><br><span class=\"line\">themesï¼šä¸»é¢˜</span><br><span class=\"line\">_config.ymlï¼šæ•´ä¸ªåšå®¢çš„é…ç½®</span><br><span class=\"line\">db.jsonï¼šsourceè§£ææ‰€å¾—åˆ°çš„</span><br><span class=\"line\">package.jsonï¼šé¡¹ç›®æ‰€éœ€æ¨¡å—é¡¹ç›®çš„é…ç½®ä¿¡æ¯</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h2 id=\"1-2-æœ¬åœ°è¿è¡Œ\"><a href=\"#1-2-æœ¬åœ°è¿è¡Œ\" class=\"headerlink\" title=\"1.2.æœ¬åœ°è¿è¡Œ\"></a>1.2.æœ¬åœ°è¿è¡Œ</h2><p>é¦–å…ˆåœ¨æœ¬åœ°è·‘èµ·æ¥ä½ çš„ä»£ç </p>\n<p>æ§åˆ¶å°å®‰è£…hexo-server</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm i hexo-server</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åè¿è¡Œ hexo-server</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo server</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<a href=\"http://localhost:4000/\">http://localhost:4000</a>  å°±å¯ä»¥çœ‹åˆ°ä½ æœ¬å®šè¿è¡Œçš„é¡µé¢äº†</p>\n<p>è¿™æ—¶ä½ å¯ä»¥åœ¨æœ¬åœ°è°ƒè¯•ä¸€ä¸‹ä½ çš„blogã€‚</p>\n<h2 id=\"1-3-githubé…ç½®\"><a href=\"#1-3-githubé…ç½®\" class=\"headerlink\" title=\"1.3.githubé…ç½®\"></a>1.3.githubé…ç½®</h2><p>é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªgithubè´¦å·</p>\n<p>å¹¶é…ç½®å¥½ssh</p>\n<p>è¿™äº›ä¸æ‡‚çš„å¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚</p>\n<p>åˆ›å»ºä¸€ä¸ªrepoï¼Œåç§°ä¸ºyourname.github.io, å…¶ä¸­ yourname æ˜¯ä½ çš„githubåç§°ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™åˆ›å»ºgithub pageæ‰ä¼šç”Ÿæ•ˆã€‚</p>\n<p>ä¿®æ”¹_config.ymlä¸­çš„gité…ç½®</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">  type: git</span><br><span class=\"line\">  repo:  https:<span class=\"comment\">//github.com/yourname/yourname.github.io.git</span></span><br><span class=\"line\">  branch: master</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"1-4-éƒ¨ç½²ä¸Šä¼ \"><a href=\"#1-4-éƒ¨ç½²ä¸Šä¼ \" class=\"headerlink\" title=\"1.4.éƒ¨ç½²ä¸Šä¼ \"></a>1.4.éƒ¨ç½²ä¸Šä¼ </h2><p>åœ¨æœ¬åœ°å®‰è£…ä¸Šä¼ å·¥å…·</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<p>ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">hexo clean     //åˆ é™¤ä¸Šæ¬¡æ‰“åŒ…</span><br><span class=\"line\">hexo generate   //æ‰“åŒ…</span><br><span class=\"line\">hexo deploy    /ä¸Šä¼ </span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œæˆ‘å•ç‹¬å†™äº†shæ‰§è¡Œè¿™ä¸‰æ®µè„šæœ¬ï¼Œè¿™æ ·æ¯æ¬¡åªéœ€è¦æ‰§è¡Œè¿™ä¸ªshå³å¯ã€‚</p>\n<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href=\"https://yourname.github.io/\">https://yourname.github.io/</a> å°±å¯ä»¥çœ‹åˆ°ä½ çš„ä¸ªäººåšå®¢äº†ï¼</p>\n<h2 id=\"1-5-README-mdé…ç½®\"><a href=\"#1-5-README-mdé…ç½®\" class=\"headerlink\" title=\"1.5 README.mdé…ç½®\"></a>1.5 README.mdé…ç½®</h2><p>1.é¦–å…ˆåœ¨sourceæ–‡ä»¶å¤¹ä¸‹å»ºç«‹ä¸€ä¸ªREADME.md</p>\n<p>2.ä¿®æ”¹_config.yml</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">skip_render: README.md</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"äºŒã€ç»‘å®šäºŒäººåŸŸå\"><a href=\"#äºŒã€ç»‘å®šäºŒäººåŸŸå\" class=\"headerlink\" title=\"äºŒã€ç»‘å®šäºŒäººåŸŸå\"></a>äºŒã€ç»‘å®šäºŒäººåŸŸå</h1><h2 id=\"2-1è´­ä¹°ä¸€ä¸ªåŸŸå\"><a href=\"#2-1è´­ä¹°ä¸€ä¸ªåŸŸå\" class=\"headerlink\" title=\"2.1è´­ä¹°ä¸€ä¸ªåŸŸå\"></a>2.1è´­ä¹°ä¸€ä¸ªåŸŸå</h2><p>è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯é˜¿é‡Œäº‘ï¼ŒæŒ‘é€‰ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„åŸŸåè´­ä¹°ã€‚</p>\n<h2 id=\"2-2åŸŸåè§£æ\"><a href=\"#2-2åŸŸåè§£æ\" class=\"headerlink\" title=\"2.2åŸŸåè§£æ\"></a>2.2åŸŸåè§£æ</h2><p>è¿›å…¥æ§åˆ¶å°æ·»åŠ åŸŸåè§£æã€‚</p>\n<p>æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æ·»åŠ ä¸¤æ¡è®°å½•ã€‚</p>\n<p>è§£æå¥½çš„åŸŸå404ï¼Œè¯´æ˜åŸŸåè§£ææ²¡æœ‰é—®é¢˜ï¼Œæ¥ä¸‹æ¥è¿›å…¥githubè¿›è¡Œé…ç½®</p>\n<h2 id=\"2-3-hexoé…ç½®\"><a href=\"#2-3-hexoé…ç½®\" class=\"headerlink\" title=\"2.3 hexoé…ç½®\"></a>2.3 hexoé…ç½®</h2><p>åœ¨æœ¬åœ°çš„åšå®¢ç›®å½•ä¸­æ‰¾åˆ°sourceæ–‡ä»¶å¤¹ã€‚</p>\n<p>æ–°å»ºä¸€ä¸ªæ²¡æœ‰åç¼€åçš„æ–‡ä»¶CNAME</p>\n<p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„åŸŸåï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">lisq.xyz</span><br></pre></td></tr></table></figure>\n\n<p>ä¿å­˜åé‡æ–°ç”Ÿæˆï¼Œå¹¶æäº¤ä½ çš„åšå®¢ã€‚</p>\n<h2 id=\"2-4-githubé…ç½®\"><a href=\"#2-4-githubé…ç½®\" class=\"headerlink\" title=\"2.4 githubé…ç½®\"></a>2.4 githubé…ç½®</h2><p>åœ¨githubä¸­æ‰¾åˆ°ä½ çš„åšå®¢ä»“åº“ã€‚</p>\n<p>ç‚¹å‡»<code>Setting</code></p>\n<p>æ‰¾åˆ°<code>Custom domain</code></p>\n<p>è¾“å…¥ä½ çš„åŸŸåç‚¹å‡»save</p>\n<p>ç„¶åä½ å°±å¯ä»¥åœ¨æµè§ˆå™¨ç”¨ä½ çš„åŸŸåæ„‰å¿«çš„è®¿é—®å•¦ï¼</p>\n","categories":["webå‰ç«¯"],"tags":["Github","åšå®¢","hexo"]},{"title":"vueé¡¹ç›®éƒ¨ç½²åˆ°gitee pages","url":"/2021/03/11/vue%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0gitee%20pages/","content":"<p>ä½¿ç”¨Gitee Pageå®ç°é™æ€é¡µé¢ï¼ˆ<a href=\"https://hxy1997.gitee.io/music_player/%E6%A8%A1%E6%9D%BF\">æ‚¦å¬æ’­æ”¾å™¨</a> ï¼‰éƒ¨ç½²å ï¼Œæˆ‘å°è¯•ç€å°†è‡ªå·±å­¦ä¹ æ­å»ºçš„Vueç”µå•†é¡¹ç›®æ‰˜ç®¡è‡³Gitee Pageï¼Œå®ç°é¡¹ç›®çš„æ­£å¼ä¸Šçº¿ <a href=\"https://hxy1997.gitee.io/vue_shops/\">Vueç”µå•†é¡¹ç›®</a></p>\n<a id=\"more\"></a>\n\n<h1 id=\"ä¸€ã€ç®€å•çš„éŸ³ä¹æ’­æ”¾å™¨é™æ€é¡µé¢\"><a href=\"#ä¸€ã€ç®€å•çš„éŸ³ä¹æ’­æ”¾å™¨é™æ€é¡µé¢\" class=\"headerlink\" title=\"ä¸€ã€ç®€å•çš„éŸ³ä¹æ’­æ”¾å™¨é™æ€é¡µé¢\"></a>ä¸€ã€ç®€å•çš„éŸ³ä¹æ’­æ”¾å™¨é™æ€é¡µé¢</h1><h2 id=\"1-1-å°†é¡¹ç›®æäº¤è‡³gitee\"><a href=\"#1-1-å°†é¡¹ç›®æäº¤è‡³gitee\" class=\"headerlink\" title=\"1.1 å°†é¡¹ç›®æäº¤è‡³gitee\"></a>1.1 å°†é¡¹ç›®æäº¤è‡³gitee</h2><p>åˆ°Giteeä¸Šæ–°å»ºä»“åº“ï¼Œå†™ä»“åº“åç§° é€‰æ‹©æ˜¯å¦å¼€æº </p>\n<p>ä½¿ç”¨git remote add origin <a href=\"https://gitee.com/%E7%A0%81%E4%BA%91%E7%94%A8%E6%88%B7%E5%90%8D/%E9%A1%B9%E7%9B%AE%E5%90%8D\">https://gitee.com/ç äº‘ç”¨æˆ·å/é¡¹ç›®å</a> / æ·»åŠ è¿œç¨‹ä»“åº“ã€‚</p>\n<p>git pull origin master å‘½ä»¤ï¼Œå°†ç äº‘ä¸Šçš„ä»“åº“pullåˆ°å…ˆå‰åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­ï¼ŒæœŸé—´éœ€è¦è¾“å…¥giteeä¸Šé¢çš„è´¦å·å’Œå¯†ç ï¼Œè¾“å…¥å®Œæˆå¯†ç ä¹‹åç‚¹å‡» OKã€‚<br>å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æç¤ºé—®é¢˜ï¼š</p>\n<p>è¿™æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®æäº¤æ—¶çš„ç”¨æˆ·åå’Œé‚®ç®±çš„åŸå› ï¼Œä½ å¯ä»¥ç›´æ¥æ‰§è¡Œï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global user.name &quot;Your Name&quot;</span><br><span class=\"line\">git config --global user.email &quot;you@example.com&quot;</span><br></pre></td></tr></table></figure>\n\n<p>å®Œæ¯•ä¹‹åå†æŠŠå°†è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå…¨éƒ¨æ·»åŠ åˆ°ä¹‹å‰åœ¨æ¡Œé¢åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­å¹¶ä½¿ç”¨git add .ï¼ˆ. è¡¨ç¤ºæ‰€æœ‰çš„ï¼‰æˆ–è€… git add æ–‡ä»¶å // å°†æ–‡ä»¶ä¿å­˜åˆ°ç¼“å­˜åŒº<br>ç„¶åä½¿ç”¨git commit -m â€˜è¿™é‡Œå†™æ–°æ¨é€çš„æ–‡ä»¶æè¿°â€™ //æ·»åŠ æ–‡ä»¶æè¿°<br>ä½¿ç”¨git push origin master ï¼Œå°†æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œä¹‹åå»åˆ·æ–°giteeå°±èƒ½çœ‹åˆ°æ¨é€ä¸Šå»çš„é¡¹ç›®äº†ã€‚</p>\n<h2 id=\"1-2-é…ç½®Gitee-Page\"><a href=\"#1-2-é…ç½®Gitee-Page\" class=\"headerlink\" title=\"1.2 é…ç½®Gitee Page\"></a>1.2 é…ç½®Gitee Page</h2><p><img data-src=\"https://www.pianshen.com/images/787/f15acfa42d77a529ca3163842b954a93.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<p>ç‚¹å‡»é¡¹ç›®å¯¼èˆªæ ä¸­çš„<code>æœåŠ¡ --&gt; Gitee Pages</code></p>\n<h2 id=\"1-3-è®¿é—®ç½‘ç«™\"><a href=\"#1-3-è®¿é—®ç½‘ç«™\" class=\"headerlink\" title=\"1.3 è®¿é—®ç½‘ç«™\"></a>1.3 è®¿é—®ç½‘ç«™</h2><p>æ‰“å¼€ç½‘ç«™ https://ç äº‘ç”¨æˆ·å.gitee.io/é¡¹ç›®å/å…¥å£æ–‡ä»¶ å³å¯è®¿é—®ï¼Œæ³¨æ„å…¥å£æ–‡ä»¶ä¸ºindex.htmlå¯çœç•¥ï¼Œæˆ‘çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸æ˜¯ï¼Œæ‰€ä»¥éœ€è¦ï¼Œæ‰“å¼€<a href=\"https://hxy1997.gitee.io/music_player/%E6%A8%A1%E6%9D%BF\">æ‚¦å¬æ’­æ”¾å™¨</a> å¯ä»¥äº«ç”¨éŸ³ä¹äº†</p>\n<h1 id=\"äºŒã€ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºçš„é¡µé¢\"><a href=\"#äºŒã€ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºçš„é¡µé¢\" class=\"headerlink\" title=\"äºŒã€ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºçš„é¡µé¢\"></a>äºŒã€ä½¿ç”¨vue-cliè„šæ‰‹æ¶åˆ›å»ºçš„é¡µé¢</h1><h2 id=\"2-1-è°ƒæ•´æœ¬åœ°é¡¹ç›®\"><a href=\"#2-1-è°ƒæ•´æœ¬åœ°é¡¹ç›®\" class=\"headerlink\" title=\"2.1 è°ƒæ•´æœ¬åœ°é¡¹ç›®\"></a>2.1 è°ƒæ•´æœ¬åœ°é¡¹ç›®</h2><h3 id=\"åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ -spaæ–‡ä»¶\"><a href=\"#åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ -spaæ–‡ä»¶\" class=\"headerlink\" title=\"åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ .spaæ–‡ä»¶\"></a>åœ¨æ ¹ç›®å½•ä¸‹å¢åŠ .spaæ–‡ä»¶</h3><p>é¦–å…ˆï¼Œæ ¹æ®<a href=\"https://gitee.com/help/articles/4237\">å®˜æ–¹æŒ‡ç¤º</a></p>\n<p><img data-src=\"https://www.pianshen.com/images/763/d160e86218b36d31956264b83badf383.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<p>åœ¨é¡¹ç›®è·¯å¾„ä¸­æ·»åŠ <code>.spa</code>æ–‡ä»¶</p>\n<p><img data-src=\"https://www.pianshen.com/images/47/56f6b7fcdf231191cb0eee073e26c65f.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<p>åŸç†ï¼Œæˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œåº”è¯¥æ˜¯ç»™Nginxåšä¸€ä¸ª<code>æ ‡è¯†</code>ä½œç”¨å§ã€‚</p>\n<h3 id=\"é…ç½®productionç‰ˆæœ¬è·¯å¾„åç§°\"><a href=\"#é…ç½®productionç‰ˆæœ¬è·¯å¾„åç§°\" class=\"headerlink\" title=\"é…ç½®productionç‰ˆæœ¬è·¯å¾„åç§°\"></a>é…ç½®productionç‰ˆæœ¬è·¯å¾„åç§°</h3><p>æ ¹ç›®å½•ä¸‹çš„vue.config.jsæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ç®­å¤´é‚£ä¸ªè¦æ”¹ä¸ºé¡¹ç›®æ–‡ä»¶åç§°</p>\n<p><img data-src=\"https://img2018.cnblogs.com/common/475401/202002/475401-20200208003141513-937920345.png\" alt=\"img\"></p>\n<p>åœ¨æœ¬åœ°è¿è¡Œ<code>npm run build</code>ï¼Œå¾—åˆ°/dist</p>\n<p><img data-src=\"https://www.pianshen.com/images/168/5518c17f01e39d7a0984962b7276a2e0.png\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\">`</p>\n<h3 id=\"é…ç½®-gitignoreæ–‡ä»¶\"><a href=\"#é…ç½®-gitignoreæ–‡ä»¶\" class=\"headerlink\" title=\"é…ç½®.gitignoreæ–‡ä»¶\"></a>é…ç½®.gitignoreæ–‡ä»¶</h3><p>é¦–å…ˆè¦åœ¨.gitignoreæ–‡ä»¶å»æ‰/distï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æ˜¯ä¸ä¸Šä¼ çš„ï¼Œä½†æ˜¯æ‰§è¡Œæ‰“åŒ…bulidçš„æ—¶å€™ä¼šç”Ÿæˆdistæ–‡ä»¶ï¼Œè€Œçº¿ä¸Šè®¿é—®çš„æ˜¯æ‰“åŒ…ä¹‹åçš„distæ–‡ä»¶ï¼›</p>\n<p><img data-src=\"https://img2018.cnblogs.com/common/475401/202002/475401-20200208002522081-1246305362.png\" alt=\"img\"></p>\n<h2 id=\"2-2-å°†é¡¹ç›®æäº¤è‡³gitee\"><a href=\"#2-2-å°†é¡¹ç›®æäº¤è‡³gitee\" class=\"headerlink\" title=\"2.2 å°†é¡¹ç›®æäº¤è‡³gitee\"></a>2.2 å°†é¡¹ç›®æäº¤è‡³gitee</h2><p>å‚è€ƒ1.2èŠ‚çš„åšæ³•ï¼Œæ­¤æ­¥ä¸å†èµ˜è¿°</p>\n<h2 id=\"2-3-é…ç½®Gitee-Page\"><a href=\"#2-3-é…ç½®Gitee-Page\" class=\"headerlink\" title=\"2.3 é…ç½®Gitee Page\"></a>2.3 é…ç½®Gitee Page</h2><p>ç”¨ä¸Šæ¬¡åŒæ ·çš„æ–¹æ³•ç‚¹è¿›Gitee Pages</p>\n<p><img data-src=\"https://img2018.cnblogs.com/i-beta/475401/202002/475401-20200208002750052-1156032907.png\" alt=\"img\"></p>\n<p>è¿™ä¸€æ¬¡éƒ¨ç½²ç›®å½•è¦å¡«å†™dist</p>\n<p><img data-src=\"https://img2018.cnblogs.com/common/475401/202002/475401-20200208003016869-817429112.png\" alt=\"img\"></p>\n<h2 id=\"2-4-è®¿é—®ç½‘ç«™\"><a href=\"#2-4-è®¿é—®ç½‘ç«™\" class=\"headerlink\" title=\"2.4 è®¿é—®ç½‘ç«™\"></a>2.4 è®¿é—®ç½‘ç«™</h2><p>æ‰“å¼€ç½‘ç«™ https://ç äº‘ç”¨æˆ·å.gitee.io/é¡¹ç›®å/å…¥å£æ–‡ä»¶ å³å¯è®¿é—®ï¼Œæ³¨æ„å…¥å£æ–‡ä»¶ä¸ºindex.htmlå¯çœç•¥ï¼Œè¿™æ¬¡vue-cliåˆ›å»ºçš„é¡¹ç›®ä¸éœ€è¦ï¼Œæ‰“å¼€çº¿ <a href=\"https://hxy1997.gitee.io/vue_shops/\">Vueç”µå•†é¡¹ç›®</a> å°±å¯ä»¥ä½“éªŒç”µå•†é¡¹ç›®äº†</p>\n","categories":["webå‰ç«¯"],"tags":["vue","gitee page","å®æˆ˜"]},{"title":"JSåŸºç¡€","url":"/2020/10/26/JS%E5%9F%BA%E7%A1%80/","content":"<p>è¿™ä¸ªéƒ¨åˆ†ç”¨æ¥ä»‹ç»JSåŸºç¡€çŸ¥è¯†ä¸­ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œæ‰‹å†™callå‡½æ•°ï¼ŒåŠ æ·±å¯¹JSåŠES6çš„ç†è§£å’Œåº”ç”¨ã€‚</p>\n<a id=\"more\"></a>\n\n<h2 id=\"1-å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°let\"><a href=\"#1-å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°let\" class=\"headerlink\" title=\"1. å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°let\"></a>1. å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°let</h2><blockquote>\n<p>è¿™ä¸ªé—®é¢˜å®è´¨ä¸Šæ˜¯åœ¨å›ç­”<code>let</code>å’Œ<code>var</code>æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹<code>babel</code>è½¬æ¢å‰åçš„ç»“æœï¼Œçœ‹ä¸€ä¸‹åœ¨å¾ªç¯ä¸­é€šè¿‡<code>let</code>å®šä¹‰çš„å˜é‡æ˜¯å¦‚ä½•è§£å†³å˜é‡æå‡çš„é—®é¢˜</p>\n</blockquote>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/4/5/1714616e2fd53bf8?imageslim\" alt=\"img\"></p>\n<p>babelåœ¨letå®šä¹‰çš„å˜é‡å‰åŠ äº†é“ä¸‹åˆ’çº¿ï¼Œé¿å…åœ¨å—çº§ä½œç”¨åŸŸå¤–è®¿é—®åˆ°è¯¥å˜é‡ï¼Œé™¤äº†å¯¹å˜é‡åçš„è½¬æ¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è‡ªæ‰§è¡Œå‡½æ•°ï¼ˆé—­åŒ…ï¼‰æ¥æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">(function()&#123;</span><br><span class=\"line\">  for(var i &#x3D; 0; i &lt; 5; i ++)&#123;</span><br><span class=\"line\">    console.log(i)  &#x2F;&#x2F; 0 1 2 3 4</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(i)      &#x2F;&#x2F; Uncaught ReferenceError: i is not defined</span><br></pre></td></tr></table></figure>\n\n<p>ä¸è¿‡è¿™ä¸ªé—®é¢˜å¹¶æ²¡æœ‰ç»“æŸï¼Œæˆ‘ä»¬å›åˆ°<code>var</code>å’Œ<code>let/const</code>çš„åŒºåˆ«ä¸Šï¼š</p>\n<ul>\n<li><code>var</code>å£°æ˜çš„å˜é‡ä¼šæŒ‚åˆ°windowä¸Šï¼Œè€Œ<code>let</code>å’Œ<code>const</code>ä¸ä¼š</li>\n<li><code>var</code>å£°æ˜çš„å˜é‡å­˜åœ¨å˜é‡æå‡ï¼Œè€Œ<code>let</code>å’Œ<code>const</code>ä¸ä¼š</li>\n<li><code>let</code>å’Œ<code>const</code>å£°æ˜å½¢æˆå—ä½œç”¨åŸŸï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸èƒ½è·¨å—è®¿é—®ï¼Œä¹Ÿä¸èƒ½è·¨å‡½æ•°è®¿é—®</li>\n<li>åŒä¸€ä½œç”¨åŸŸä¸‹<code>let</code>å’Œ<code>const</code>ä¸èƒ½å£°æ˜åŒåå˜é‡ï¼Œè€Œ<code>var</code>å¯ä»¥</li>\n<li>æš‚æ—¶æ€§æ­»åŒºï¼Œ<code>let</code>å’Œ<code>const</code>å£°æ˜çš„å˜é‡ä¸èƒ½åœ¨å£°æ˜å‰è¢«ä½¿ç”¨</li>\n</ul>\n<p>babelçš„è½¬åŒ–ï¼Œå…¶å®åªå®ç°äº†ç¬¬2ã€3ã€5ç‚¹</p>\n<h2 id=\"2-å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°const\"><a href=\"#2-å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°const\" class=\"headerlink\" title=\"2. å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°const\"></a>2. å¦‚ä½•åœ¨ES5ç¯å¢ƒä¸‹å®ç°const</h2><p>å®ç°constçš„å…³é”®åœ¨äº<code>Object.defineProperty()</code>è¿™ä¸ªAPIï¼Œè¿™ä¸ªAPIç”¨äºåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå¢åŠ æˆ–ä¿®æ”¹å±æ€§ã€‚é€šè¿‡é…ç½®å±æ€§æè¿°ç¬¦ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶å±æ€§è¡Œä¸ºã€‚<code>Object.defineProperty()</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>\n<blockquote>\n<p>Object.defineProperty(obj, prop, desc)</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">å‚æ•°</th>\n<th align=\"center\">è¯´æ˜</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">obj</td>\n<td align=\"center\">è¦åœ¨å…¶ä¸Šå®šä¹‰å±æ€§çš„å¯¹è±¡</td>\n</tr>\n<tr>\n<td align=\"center\">prop</td>\n<td align=\"center\">è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°</td>\n</tr>\n<tr>\n<td align=\"center\">descriptor</td>\n<td align=\"center\">å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦</td>\n</tr>\n</tbody></table>\n<table>\n<thead>\n<tr>\n<th align=\"center\">å±æ€§æè¿°ç¬¦</th>\n<th align=\"left\">è¯´æ˜</th>\n<th align=\"center\">é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">value</td>\n<td align=\"left\">è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JavaScript å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefined</td>\n<td align=\"center\">undefined</td>\n</tr>\n<tr>\n<td align=\"center\">get</td>\n<td align=\"left\">ä¸€ä¸ªç»™å±æ€§æä¾› getter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ getter åˆ™ä¸º undefined</td>\n<td align=\"center\">undefined</td>\n</tr>\n<tr>\n<td align=\"center\">set</td>\n<td align=\"left\">ä¸€ä¸ªç»™å±æ€§æä¾› setter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚å½“å±æ€§å€¼ä¿®æ”¹æ—¶ï¼Œè§¦å‘æ‰§è¡Œè¯¥æ–¹æ³•</td>\n<td align=\"center\">undefined</td>\n</tr>\n<tr>\n<td align=\"center\">writable</td>\n<td align=\"left\">å½“ä¸”ä»…å½“è¯¥å±æ€§çš„writableä¸ºtrueæ—¶ï¼Œvalueæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º false</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">enumerable</td>\n<td align=\"left\">enumerableå®šä¹‰äº†å¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥åœ¨ forâ€¦in å¾ªç¯å’Œ Object.keys() ä¸­è¢«æšä¸¾</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">Configurable</td>\n<td align=\"left\">configurableç‰¹æ€§è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œä»¥åŠé™¤valueå’Œwritableç‰¹æ€§å¤–çš„å…¶ä»–ç‰¹æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹</td>\n<td align=\"center\">false</td>\n</tr>\n</tbody></table>\n<p>å¯¹äºconstä¸å¯ä¿®æ”¹çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬é€šè¿‡è®¾ç½®writableå±æ€§æ¥å®ç°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var __const &#x3D; function __const (data, value) &#123;</span><br><span class=\"line\">    window.data &#x3D; value &#x2F;&#x2F; æŠŠè¦å®šä¹‰çš„dataæŒ‚è½½åˆ°windowä¸‹ï¼Œå¹¶èµ‹å€¼value</span><br><span class=\"line\">    Object.defineProperty(window, data, &#123; &#x2F;&#x2F; åˆ©ç”¨Object.definePropertyçš„èƒ½åŠ›åŠ«æŒå½“å‰å¯¹è±¡ï¼Œå¹¶ä¿®æ”¹å…¶å±æ€§æè¿°ç¬¦</span><br><span class=\"line\">        enumerable: false,</span><br><span class=\"line\">        configurable: false,</span><br><span class=\"line\">        get: function () &#123;</span><br><span class=\"line\">        \treturn value</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        set: function (data) &#123;</span><br><span class=\"line\">            if (data !&#x3D;&#x3D; value) &#123; &#x2F;&#x2F; å½“è¦å¯¹å½“å‰å±æ€§è¿›è¡Œèµ‹å€¼æ—¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ï¼</span><br><span class=\"line\">            \tthrow new TypeError(&#39;Assignment to constant variable.&#39;)</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">            \treturn value</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">_const(&#39;obj&#39;, &#123;a: 1&#125;)   &#x2F;&#x2F; å®šä¹‰obj</span><br><span class=\"line\">obj.b &#x3D; 2               &#x2F;&#x2F; å¯ä»¥æ­£å¸¸ç»™objçš„å±æ€§èµ‹å€¼</span><br><span class=\"line\">obj &#x3D; &#123;&#125;                &#x2F;&#x2F; æ— æ³•èµ‹å€¼æ–°å¯¹è±¡ æŠ¥é”™</span><br></pre></td></tr></table></figure>\n\n<p>å‚è€ƒèµ„æ–™ï¼š<a href=\"https://juejin.im/post/6844903848008482824\">å¦‚ä½•åœ¨ ES5 ç¯å¢ƒä¸‹å®ç°ä¸€ä¸ªconst ï¼Ÿ</a></p>\n<h2 id=\"3-æ¨¡æ‹Ÿå®ç°call\"><a href=\"#3-æ¨¡æ‹Ÿå®ç°call\" class=\"headerlink\" title=\"3. æ¨¡æ‹Ÿå®ç°call\"></a>3. æ¨¡æ‹Ÿå®ç°call</h2><blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">call() æ–¹æ³•&#96;ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œå•ç‹¬ç»™å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°</span><br><span class=\"line\"> è¯­æ³•ï¼š&#96;function.call(thisArg, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><code>call()</code>çš„åŸç†æ¯”è¾ƒç®€å•ï¼Œç”±äºå‡½æ•°çš„thisæŒ‡å‘å®ƒçš„ç›´æ¥è°ƒç”¨è€…ï¼Œæˆ‘ä»¬å˜æ›´è°ƒç”¨è€…å³å®ŒæˆthisæŒ‡å‘çš„å˜æ›´ï¼š</p>\n<p>1.åˆ¤æ–­å½“å‰<code>this</code>æ˜¯å¦ä¸ºå‡½æ•°ï¼Œé˜²æ­¢<code>Function.prototype.myCall()</code> ç›´æ¥è°ƒç”¨</p>\n<p>2.<code>context</code> ä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ çš„è¯é»˜è®¤ä¸Šä¸‹æ–‡ä¸º <code>window</code></p>\n<p>3.ä¸º<code>context</code> åˆ›å»ºä¸€ä¸ª <code>Symbol</code>ï¼ˆä¿è¯ä¸ä¼šé‡åï¼‰å±æ€§ï¼Œå°†å½“å‰å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå±æ€§</p>\n<p>4.å¤„ç†å‚æ•°ï¼Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°åçš„å…¶ä½™å‚æ•°</p>\n<p>5.è°ƒç”¨å‡½æ•°åå³åˆ é™¤è¯¥<code>Symbol</code>å±æ€§</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myCall = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, ...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ç”¨äºé˜²æ­¢ Function.prototype.myCall() ç›´æ¥è°ƒç”¨</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"comment\">// è‹¥æ²¡æœ‰ä¼ å…¥this, é»˜è®¤ç»‘å®šwindowå¯¹è±¡</span></span><br><span class=\"line\">\t<span class=\"comment\">// context = context || window;</span></span><br><span class=\"line\">    <span class=\"comment\">// å£°æ˜ä¸€ä¸ªç‹¬æœ‰çš„Symbolå±æ€§, é˜²æ­¢fnè¦†ç›–å·²æœ‰å±æ€§</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> fn = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\">    <span class=\"comment\">// thisæŒ‡å‘è°ƒç”¨callçš„å¯¹è±¡,å³æˆ‘ä»¬è¦æ”¹å˜thisæŒ‡å‘çš„å‡½æ•°</span></span><br><span class=\"line\">\tcontext[fn] = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ‰§è¡Œå½“å‰å‡½æ•°</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result = context[fn](...args);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤æˆ‘ä»¬å£°æ˜çš„fnå±æ€§</span></span><br><span class=\"line\">\t<span class=\"keyword\">delete</span> context[fn];</span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"4-æ¨¡æ‹Ÿå®ç°apply\"><a href=\"#4-æ¨¡æ‹Ÿå®ç°apply\" class=\"headerlink\" title=\"4. æ¨¡æ‹Ÿå®ç°apply\"></a>4. æ¨¡æ‹Ÿå®ç°apply</h2><blockquote>\n<p>apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå…·æœ‰ç»™å®šthiså€¼çš„å‡½æ•°ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„å¯¹è±¡ï¼‰æä¾›çš„å‚æ•°ã€‚<br> è¯­æ³•ï¼šfunc.apply(thisArg, [argsArray])</p>\n</blockquote>\n<p><code>apply()</code>å’Œ<code>call()</code>ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºcall()æ¥æ”¶å‚æ•°åˆ—è¡¨ï¼Œè€Œapply()æ¥æ”¶ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨call()çš„å®ç°ä¸Šç®€å•æ”¹ä¸€ä¸‹å…¥å‚å½¢å¼å³å¯</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myApply = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ç”¨äºé˜²æ­¢ Function.prototype.myApply() ç›´æ¥è°ƒç”¨</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"comment\">// è‹¥æ²¡æœ‰ä¼ å…¥this, é»˜è®¤ç»‘å®šwindowå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"comment\">// context = context || window;</span></span><br><span class=\"line\">    <span class=\"comment\">// å£°æ˜ä¸€ä¸ªç‹¬æœ‰çš„Symbolå±æ€§, é˜²æ­¢fnè¦†ç›–å·²æœ‰å±æ€§</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fn = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\">    <span class=\"comment\">// thisæŒ‡å‘è°ƒç”¨callçš„å¯¹è±¡,å³æˆ‘ä»¬è¦æ”¹å˜thisæŒ‡å‘çš„å‡½æ•°</span></span><br><span class=\"line\">    context[fn] = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// é‡ç‚¹ä»£ç ï¼Œåˆ©ç”¨thisæŒ‡å‘ï¼Œç›¸å½“äºcontext.caller(...args)ï¼ˆæ­¤å¤„è¯´æ˜ä¸€ä¸‹ï¼šè™½ç„¶apply()æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨è°ƒç”¨åŸå‡½æ•°æ—¶ï¼Œä¾ç„¶è¦å±•å¼€å‚æ•°æ•°ç»„ã€‚å¯ä»¥å¯¹ç…§åŸç”Ÿapply()ï¼ŒåŸå‡½æ•°æ¥æ”¶åˆ°å±•å¼€çš„å‚æ•°æ•°ç»„ï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = context[fn](...args);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤æˆ‘ä»¬å£°æ˜çš„fnå±æ€§</span></span><br><span class=\"line\">    <span class=\"keyword\">delete</span> context[fn];</span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"5-æ¨¡æ‹Ÿå®ç°bind\"><a href=\"#5-æ¨¡æ‹Ÿå®ç°bind\" class=\"headerlink\" title=\"5. æ¨¡æ‹Ÿå®ç°bind\"></a>5. æ¨¡æ‹Ÿå®ç°bind</h2><blockquote>\n<p><code>bind()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ bind() è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ this è¢«æŒ‡å®šä¸º bind() çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚<br> è¯­æ³•: function.bind(thisArg, arg1, arg2, â€¦)</p>\n</blockquote>\n<p>ä»ç”¨æ³•ä¸Šçœ‹ï¼Œä¼¼ä¹ç»™call/applyåŒ…ä¸€å±‚functionå°±å®ç°äº†bind()ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.prototype.myBind &#x3D; function(context &#x3D; window, ...args) &#123;</span><br><span class=\"line\">    return () &#x3D;&gt; &#123;</span><br><span class=\"line\">    \tthis.apply(context, args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n<p>ä½†æˆ‘ä»¬å¿½ç•¥äº†ä¸‰ç‚¹ï¼š</p>\n<ol>\n<li><p>bind()é™¤äº†thisè¿˜æ¥æ”¶å…¶ä»–å‚æ•°ï¼Œbind()è¿”å›çš„å‡½æ•°ä¹Ÿæ¥æ”¶å‚æ•°ï¼Œè¿™ä¸¤éƒ¨åˆ†çš„å‚æ•°éƒ½è¦ä¼ ç»™è¿”å›çš„å‡½æ•°</p>\n</li>\n<li><p>newä¼šæ”¹å˜thisæŒ‡å‘ï¼šå¦‚æœbindç»‘å®šåçš„å‡½æ•°è¢«newäº†ï¼Œé‚£ä¹ˆthisæŒ‡å‘ä¼šå‘ç”Ÿæ”¹å˜ï¼ŒæŒ‡å‘å½“å‰å‡½æ•°çš„å®ä¾‹</p>\n</li>\n<li><p>æ²¡æœ‰ä¿ç•™åŸå‡½æ•°åœ¨åŸå‹é“¾ä¸Šçš„å±æ€§å’Œæ–¹æ³•</p>\n</li>\n</ol>\n<p>1.å¤„ç†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªé—­åŒ…</p>\n<p>2.åˆ¤æ–­æ˜¯å¦ä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œå¦‚æœæ˜¯åˆ™ä½¿ç”¨<code>new</code>è°ƒç”¨å½“å‰å‡½æ•°</p>\n<p>3.å¦‚æœä¸æ˜¯ï¼Œä½¿ç”¨<code>apply</code>ï¼Œå°†<code>context</code>å’Œå¤„ç†å¥½çš„å‚æ•°ä¼ å…¥</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myBind = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, ...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> _this = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\">...<span class=\"built_in\">arguments</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ new F()ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> <span class=\"keyword\">instanceof</span> F) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _this(...args, ...arguments)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _this.apply(context, args.concat(...arguments))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-æ‰‹å†™ä¸€ä¸ªé˜²æŠ–å‡½æ•°-debounce\"><a href=\"#6-æ‰‹å†™ä¸€ä¸ªé˜²æŠ–å‡½æ•°-debounce\" class=\"headerlink\" title=\"6. æ‰‹å†™ä¸€ä¸ªé˜²æŠ–å‡½æ•°(debounce)\"></a>6. æ‰‹å†™ä¸€ä¸ªé˜²æŠ–å‡½æ•°(debounce)</h2><p>é˜²æŠ–å’ŒèŠ‚æµçš„æ¦‚å¿µéƒ½æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸åœ¨â€œé˜²æŠ–èŠ‚æµæ˜¯ä»€ä¹ˆâ€è¿™ä¸ªé—®é¢˜ä¸Šæµªè´¹è¿‡å¤šç¯‡å¹…äº†ï¼Œç®€å•ç‚¹ä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>é˜²æŠ–ï¼Œå³<code>çŸ­æ—¶é—´å†…å¤§é‡è§¦å‘åŒä¸€äº‹ä»¶ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡å‡½æ•°</code>ï¼Œå®ç°åŸç†ä¸º<code>è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œçº¦å®šåœ¨xxæ¯«ç§’åå†è§¦å‘äº‹ä»¶å¤„ç†ï¼Œæ¯æ¬¡è§¦å‘äº‹ä»¶éƒ½ä¼šé‡æ–°è®¾ç½®è®¡æ—¶å™¨ï¼Œç›´åˆ°xxæ¯«ç§’å†…æ— ç¬¬äºŒæ¬¡æ“ä½œ</code>ï¼Œé˜²æŠ–å¸¸ç”¨äºæœç´¢æ¡†/æ»šåŠ¨æ¡çš„ç›‘å¬äº‹ä»¶å¤„ç†ï¼Œå¦‚æœä¸åšé˜²æŠ–ï¼Œæ¯è¾“å…¥ä¸€ä¸ªå­—/æ»šåŠ¨å±å¹•ï¼Œéƒ½ä¼šè§¦å‘äº‹ä»¶å¤„ç†ï¼Œé€ æˆæ€§èƒ½æµªè´¹ã€‚</p>\n<p>ä¸ç®¡äº‹ä»¶è§¦å‘é¢‘ç‡å¤šé«˜ï¼Œä¸€å®šåœ¨äº‹ä»¶è§¦å‘<code>n</code>ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ <code>n</code> ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œ<code>n</code>ç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œè§¦å‘å®Œäº‹ä»¶ <code>n</code> ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œ<code>n</code>ç§’åå†æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span><br><span class=\"line\">&#x2F;&#x2F; waitæ˜¯ç­‰å¾…æ—¶é—´</span><br><span class=\"line\">function debounce (func, wait &#x3D; 50) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨id</span><br><span class=\"line\">    let timer &#x3D; null</span><br><span class=\"line\">    &#x2F;&#x2F; è¿™é‡Œè¿”å›çš„å‡½æ•°æ˜¯æ¯æ¬¡ç”¨æˆ·å®é™…è°ƒç”¨çš„é˜²æŠ–å‡½æ•°</span><br><span class=\"line\">    &#x2F;&#x2F; å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨äº†å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span><br><span class=\"line\">    &#x2F;&#x2F; å¼€å§‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•</span><br><span class=\"line\">    return function(...args) &#123;</span><br><span class=\"line\">    \tif (timer) clearTimeout(timer)</span><br><span class=\"line\">    \ttimer &#x3D; setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">    \t\tfunc.apply(this, args)</span><br><span class=\"line\">    \t&#125;, wait)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-æ‰‹å†™ä¸€ä¸ªèŠ‚æµå‡½æ•°-throttle\"><a href=\"#7-æ‰‹å†™ä¸€ä¸ªèŠ‚æµå‡½æ•°-throttle\" class=\"headerlink\" title=\"7. æ‰‹å†™ä¸€ä¸ªèŠ‚æµå‡½æ•°(throttle)\"></a>7. æ‰‹å†™ä¸€ä¸ªèŠ‚æµå‡½æ•°(throttle)</h2><blockquote>\n<p>é˜²æŠ–æ˜¯<code>å»¶è¿Ÿæ‰§è¡Œ</code>ï¼Œè€ŒèŠ‚æµæ˜¯<code>é—´éš”æ‰§è¡Œ</code>ï¼Œå‡½æ•°èŠ‚æµå³<code>æ¯éš”ä¸€æ®µæ—¶é—´å°±æ‰§è¡Œä¸€æ¬¡</code>ï¼Œå®ç°åŸç†ä¸º<code>è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œçº¦å®šxxæ¯«ç§’åæ‰§è¡Œäº‹ä»¶ï¼Œå¦‚æœæ—¶é—´åˆ°äº†ï¼Œé‚£ä¹ˆæ‰§è¡Œå‡½æ•°å¹¶é‡ç½®å®šæ—¶å™¨</code>ï¼Œå’Œé˜²æŠ–çš„åŒºåˆ«åœ¨äºï¼Œé˜²æŠ–æ¯æ¬¡è§¦å‘äº‹ä»¶éƒ½é‡ç½®å®šæ—¶å™¨ï¼Œè€ŒèŠ‚æµåœ¨å®šæ—¶å™¨åˆ°æ—¶é—´åå†æ¸…ç©ºå®šæ—¶å™¨ã€‚è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span><br><span class=\"line\">&#x2F;&#x2F; waitæ˜¯ç­‰å¾…æ—¶é—´</span><br><span class=\"line\">function throttle(func, wait &#x3D; 50) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¸Šä¸€æ¬¡æ‰§è¡Œè¯¥å‡½æ•°çš„æ—¶é—´</span><br><span class=\"line\">    let lastTime &#x3D; null;</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        let context &#x3D; this</span><br><span class=\"line\">        let args &#x3D; arguments</span><br><span class=\"line\">        if (!lastTime) &#123;</span><br><span class=\"line\">            timeout &#x3D; setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">                lastTime &#x3D; null</span><br><span class=\"line\">                func.apply(context, args)</span><br><span class=\"line\">            &#125;, wait)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨æ–¹æ³•ï¼šå®šæ—¶å™¨</span><br><span class=\"line\">setInterval(</span><br><span class=\"line\">    throttle(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        console.log(1)</span><br><span class=\"line\">    &#125;, 500),</span><br><span class=\"line\">    1</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ç°æ–¹å¼2ï¼šä½¿ç”¨ä¸¤ä¸ªæ—¶é—´æˆ³<code>prevæ—§æ—¶é—´æˆ³</code>å’Œ<code>nowæ–°æ—¶é—´æˆ³</code>ï¼Œæ¯æ¬¡è§¦å‘äº‹ä»¶éƒ½åˆ¤æ–­äºŒè€…çš„æ—¶é—´å·®ï¼Œå¦‚æœåˆ°è¾¾è§„å®šæ—¶é—´ï¼Œæ‰§è¡Œå‡½æ•°å¹¶é‡ç½®æ—§æ—¶é—´æˆ³</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span><br><span class=\"line\">&#x2F;&#x2F; waitæ˜¯ç­‰å¾…æ—¶é—´</span><br><span class=\"line\">function throttle (func, wait &#x3D; 50) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¸Šä¸€æ¬¡æ‰§è¡Œè¯¥å‡½æ•°çš„æ—¶é—´</span><br><span class=\"line\">    let lastTime &#x3D; 0;</span><br><span class=\"line\">    return function (...args) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å½“å‰æ—¶é—´</span><br><span class=\"line\">        let now &#x3D; +new Date()</span><br><span class=\"line\">        &#x2F;&#x2F; å°†å½“å‰æ—¶é—´å’Œä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶é—´å¯¹æ¯”</span><br><span class=\"line\">        &#x2F;&#x2F; å¦‚æœå·®å€¼å¤§äºè®¾ç½®çš„ç­‰å¾…æ—¶é—´å°±æ‰§è¡Œå‡½æ•°</span><br><span class=\"line\">        if (now - lastTime &gt; wait) &#123;</span><br><span class=\"line\">            lastTime &#x3D; now</span><br><span class=\"line\">            func.apply(this, args)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨æ–¹æ³•ï¼šå®šæ—¶å™¨</span><br><span class=\"line\">setInterval(</span><br><span class=\"line\">    throttle(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        console.log(1)</span><br><span class=\"line\">    &#125;, 500),</span><br><span class=\"line\">    1</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-æ•°ç»„æ‰å¹³åŒ–\"><a href=\"#8-æ•°ç»„æ‰å¹³åŒ–\" class=\"headerlink\" title=\"8. æ•°ç»„æ‰å¹³åŒ–\"></a>8. æ•°ç»„æ‰å¹³åŒ–</h2><blockquote>\n<p>å¯¹äº<code>[1, [1,2], [1,2,3]]</code>è¿™æ ·å¤šå±‚åµŒå¥—çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¦‚ä½•å°†å…¶æ‰å¹³åŒ–ä¸º<code>[1, 1, 2, 1, 2, 3]</code>è¿™æ ·çš„ä¸€ç»´æ•°ç»„å‘¢ï¼š</p>\n</blockquote>\n<p><strong>1.ç›´æ¥è°ƒç”¨ES6çš„flat()</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const arr &#x3D; [1, [1,2], [1,2,3]]</span><br><span class=\"line\">arr.flat(Infinity)  &#x2F;&#x2F; [1, 1, 2, 1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n<p><strong>2.åºåˆ—åŒ–åæ­£åˆ™</strong></p>\n<p>æŠŠæ‰€æœ‰<code>[</code>å’Œ<code>]</code>å»æ‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const arr &#x3D; [1, [1,2], [1,2,3]]</span><br><span class=\"line\">const str &#x3D; &#96;[$&#123;JSON.stringify(arr).replace(&#x2F;(\\[|\\])&#x2F;g, &#39;&#39;)&#125;]&#96;</span><br><span class=\"line\">JSON.parse(str)   &#x2F;&#x2F; [1, 1, 2, 1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n<p><strong>3.é€’å½’</strong><br> å¯¹äºæ ‘çŠ¶ç»“æ„çš„æ•°æ®ï¼Œæœ€ç›´æ¥çš„å¤„ç†æ–¹å¼å°±æ˜¯é€’å½’</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const arr &#x3D; [1, [1,2], [1,2,3]]</span><br><span class=\"line\">function flat (array) &#123;</span><br><span class=\"line\">    let result &#x3D; [];</span><br><span class=\"line\">    for (let i &#x3D; 0; i &lt; array.length; i++) &#123;</span><br><span class=\"line\">        if (Array.isArray(array[i])) &#123;</span><br><span class=\"line\">        \tresult &#x3D; result.concat(flat(array[i]));</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">        \tresult.push(array[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">flat(arr) &#x2F;&#x2F; [1, 1, 2, 1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n<p><strong>4.reduce()é€’å½’</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const arr &#x3D; [1, [1,2], [1,2,3]]</span><br><span class=\"line\">function flat(arr) &#123;</span><br><span class=\"line\">    return arr.reduce((prev, cur) &#x3D;&gt; &#123;</span><br><span class=\"line\">    \treturn prev.concat(cur instanceof Array ? flat(cur) : cur)</span><br><span class=\"line\">    &#125;, [])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">flat(arr)  &#x2F;&#x2F; [1, 1, 2, 1, 2, 3]</span><br></pre></td></tr></table></figure>\n\n<p><strong>5.è¿­ä»£+å±•å¼€è¿ç®—ç¬¦</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ¯æ¬¡whileéƒ½ä¼šåˆå¹¶ä¸€å±‚çš„å…ƒç´ ï¼Œè¿™é‡Œç¬¬ä¸€æ¬¡åˆå¹¶ç»“æœä¸º[1, 1, 2, 1, 2, 3, [4,4,4]]</span><br><span class=\"line\">&#x2F;&#x2F; ç„¶åarr.someåˆ¤å®šæ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æ•°ç»„ï¼Œå› ä¸ºå­˜åœ¨[4,4,4]ï¼Œç»§ç»­è¿›å…¥ç¬¬äºŒæ¬¡å¾ªç¯è¿›è¡Œåˆå¹¶</span><br><span class=\"line\">let arr &#x3D; [1, [1,2], [1,2,3,[4,4,4]]]</span><br><span class=\"line\">while (arr.some(Array.isArray)) &#123;</span><br><span class=\"line\">  \tarr &#x3D; [].concat(...arr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(arr)  &#x2F;&#x2F; [1, 1, 2, 1, 2, 3, 4, 4, 4]</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"9-æ‰‹å†™ä¸€ä¸ªPromise\"><a href=\"#9-æ‰‹å†™ä¸€ä¸ªPromise\" class=\"headerlink\" title=\"9. æ‰‹å†™ä¸€ä¸ªPromise\"></a>9. æ‰‹å†™ä¸€ä¸ªPromise</h2><p>ä¸ºä»€ä¹ˆç”¨Promiseï¼Ÿåœ¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœå¼‚æ­¥ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡å±‚å±‚åµŒå¥—å›è°ƒæ¥æ»¡è¶³è¿™ç§ä¾èµ–ï¼Œå¦‚æœåµŒå¥—å±‚æ•°è¿‡å¤šï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§éƒ½å˜å¾—å¾ˆå·®ï¼Œäº§ç”Ÿæ‰€è°“â€œå›è°ƒåœ°ç‹±â€ï¼Œè€ŒPromiseå°†å›è°ƒåµŒå¥—æ”¹ä¸ºé“¾å¼è°ƒç”¨ï¼Œå¢åŠ å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>\n<p>Promiseæœ‰ä¸‰ç§çŠ¶æ€.ï¼ŒPromiseä¸€æ—¦æ–°å»ºå°±ç«‹åˆ»æ‰§è¡Œ, æ­¤æ—¶çš„çŠ¶æ€æ˜¯Pending(è¿›è¡Œä¸­),å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°.<br> resolveå‡½æ•°çš„ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€™æœªå®Œæˆâ€™å˜ä¸ºâ€™æˆåŠŸâ€™(ç”±Pendingå˜ä¸ºResolved), åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶,å°†æ“ä½œç»“æœä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»;<br> rejectå‡½æ•°çš„ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€™æœªå®Œæˆâ€™å˜ä¸ºå¤±è´¥(ç”±Pendingå˜ä¸ºRejected),åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨,å¹¶å°†å¼‚æ­¥æ“ä½œçš„é”™è¯¯ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå».</p>\n<h3 id=\"ç®€å•ä½¿ç”¨\"><a href=\"#ç®€å•ä½¿ç”¨\" class=\"headerlink\" title=\"ç®€å•ä½¿ç”¨\"></a>ç®€å•ä½¿ç”¨</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨</span><br><span class=\"line\">var promise &#x3D; new Promise((resolve,reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    if (æ“ä½œæˆåŠŸ) &#123;</span><br><span class=\"line\">        resolve(value)</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        reject(error)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.then(function (value) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; success</span><br><span class=\"line\">&#125;,function (value) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; failure</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŸºç¡€ç‰ˆæœ¬\"><a href=\"#åŸºç¡€ç‰ˆæœ¬\" class=\"headerlink\" title=\"åŸºç¡€ç‰ˆæœ¬\"></a>åŸºç¡€ç‰ˆæœ¬</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myPromise</span>(<span class=\"params\">constructor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    self.status = <span class=\"string\">&quot;pending&quot;</span>   <span class=\"comment\">// å®šä¹‰çŠ¶æ€æ”¹å˜å‰çš„åˆå§‹çŠ¶æ€</span></span><br><span class=\"line\">    self.value = <span class=\"literal\">undefined</span>;   <span class=\"comment\">// å®šä¹‰çŠ¶æ€ä¸ºresolvedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class=\"line\">    self.reason = <span class=\"literal\">undefined</span>;  <span class=\"comment\">// å®šä¹‰çŠ¶æ€ä¸ºrejectedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">resolve</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">self.status === <span class=\"string\">&quot;pending&quot;</span></span>)</span> &#123;</span><br><span class=\"line\">            self.value = value;</span><br><span class=\"line\">            self.status = <span class=\"string\">&quot;resolved&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reject</span>(<span class=\"params\">reason</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">self.status === <span class=\"string\">&quot;pending&quot;</span></span>)</span> &#123;</span><br><span class=\"line\">            self.reason = reason;</span><br><span class=\"line\">            self.status = <span class=\"string\">&quot;rejected&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ•è·æ„é€ å¼‚å¸¸</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    \t<span class=\"title\">constructor</span>(<span class=\"params\">resolve, reject</span>);</span><br><span class=\"line\">    &#125; <span class=\"function\"><span class=\"title\">catch</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    \treject(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"thenæ–¹æ³•\"><a href=\"#thenæ–¹æ³•\" class=\"headerlink\" title=\"thenæ–¹æ³•\"></a>thenæ–¹æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ·»åŠ  then æ–¹æ³•</span><br><span class=\"line\">myPromise.prototype.then &#x3D; function(onFullfilled, onRejected) &#123;</span><br><span class=\"line\">   let self &#x3D; this;</span><br><span class=\"line\">   switch(self.status) &#123;</span><br><span class=\"line\">      case &quot;resolved&quot;:</span><br><span class=\"line\">        onFullfilled(self.value);</span><br><span class=\"line\">        break;</span><br><span class=\"line\">      case &quot;rejected&quot;:</span><br><span class=\"line\">        onRejected(self.reason);</span><br><span class=\"line\">        break;</span><br><span class=\"line\">      default:       </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var p &#x3D; new myPromise(function(resolve,reject) &#123;</span><br><span class=\"line\">    resolve(1)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">p.then(function(x) &#123;</span><br><span class=\"line\">    console.log(x) &#x2F;&#x2F; 1</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"catchæ–¹æ³•\"><a href=\"#catchæ–¹æ³•\" class=\"headerlink\" title=\"catchæ–¹æ³•\"></a>catchæ–¹æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MyPromise.prototype.catch &#x3D; function(onRejected) &#123;</span><br><span class=\"line\">\treturn this.then(null, onRejected);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"finallyæ–¹æ³•\"><a href=\"#finallyæ–¹æ³•\" class=\"headerlink\" title=\"finallyæ–¹æ³•\"></a>finallyæ–¹æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MyPromise.prototype.finally &#x3D; function(fn) &#123;</span><br><span class=\"line\">    return this.then(value &#x3D;&gt; &#123;</span><br><span class=\"line\">       fn();</span><br><span class=\"line\">       return value;</span><br><span class=\"line\">    &#125;, reason &#x3D;&gt; &#123;</span><br><span class=\"line\">        fn();</span><br><span class=\"line\">        throw reason;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>å®ç°ä¸€ä¸ªç¬¦åˆè§„èŒƒçš„Promiseç¯‡å¹…æ¯”è¾ƒé•¿ï¼Œå»ºè®®é˜…è¯»æ–‡ç« ï¼š<a href=\"https://juejin.im/post/6844904096525189128\">å¼‚æ­¥ç¼–ç¨‹äºŒä¸‰äº‹ | Promise/async/Generatorå®ç°åŸç†è§£æ | 9kå­—</a></p>\n","categories":["webå‰ç«¯"],"tags":["javascript","ES6"]},{"title":"Weppacké¢è¯•é¢˜æ•´ç†","url":"/2020/10/20/Webpack%E9%9D%A2%E8%AF%95%E9%A2%98/","content":"<p>è¿™ä¸€å—çŸ¥è¯†æ˜¯æˆ‘çš„ç›²åŒºï¼ˆè¯è¯´æˆ‘çš„ç›²åŒºä¹Ÿå¤ªå¤šäº†å§ï¼Œæ ¹æœ¬å°±æ˜¯çœ¼çğŸ˜­ï¼‰ç›´æ¥å¤åˆ¶äººå®¶æ•´ç†å¥½çš„å§ <a href=\"https://juejin.cn/post/6844904094281236487\">ã€Œåè¡€æ•´ç†ã€å†æ¥ä¸€æ‰“Webpacké¢è¯•é¢˜</a>ï¼Œæ„Ÿè§‰è‡ªå·±å•¥ä¹Ÿä¸ä¼šï¼Œå°±çŸ¥é“å®ƒæ˜¯ç”¨æ¥æ‰“åŒ…çš„å·¥å…·</p>\n<a id=\"more\"></a>\n\n<p>æœ¬æ–‡å·²æ”¶å½•åœ¨<code>Github</code> <a href=\"https://github.com/Geekhyt/front-end-canteen/\">github.com/Geekhyt</a>ï¼Œæ¬¢è¿Starã€‚</p>\n<p>ä»å¤´å‘çš„æµ“å¯†ç¨‹åº¦å’Œå¹²ç»ƒçš„èµ°è·¯å§¿åŠ¿æˆ‘å¯Ÿè§‰åˆ°ï¼Œé¢å‰åç€çš„è¿™ä½é¢è¯•å®˜ä¹Ÿæ˜¯ä¸€æŠŠå¥½æ‰‹ã€‚æˆ‘åƒä»¥å¾€ä¸€æ ·ï¼Œå‡†å¤‡èŠ±3åˆ†é’Ÿçš„æ—¶é—´è¿›è¡Œè‡ªæˆ‘ä»‹ç»ã€‚åœ¨æ­¤æœŸé—´ï¼Œæˆ‘çš„ç›®å…‰è¢«16å¯¸çš„MacBook Proæ‰€å¸å¼•ï¼Œè¿™æ¬¡çš„è‡ªæˆ‘ä»‹ç»æˆ‘åšè¶³äº†å‡†å¤‡ï¼Œå¾ˆæœ‰ä¿¡å¿ƒå¾æœé¢è¯•å®˜ã€‚ä¸å‡ºæˆ‘æ‰€æ–™ï¼Œé¢è¯•å®˜è¢«æˆ‘å¼•å…¥äº†æˆ‘æ“…é•¿çš„é¢†åŸŸã€‚</p>\n<blockquote>\n<p>â</p>\n<p>çœ‹æ¥ä½ å¯¹Webpackå¾ˆç†Ÿæ‚‰ï¼Œé‚£æˆ‘æ¥è€ƒè€ƒä½ </p>\n<p>â</p>\n</blockquote>\n<h1 id=\"0-æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä½ ç”¨è¿‡å“ªäº›Loaderï¼Ÿ\"><a href=\"#0-æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä½ ç”¨è¿‡å“ªäº›Loaderï¼Ÿ\" class=\"headerlink\" title=\"0.æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä½ ç”¨è¿‡å“ªäº›Loaderï¼Ÿ\"></a>0.æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä½ ç”¨è¿‡å“ªäº›Loaderï¼Ÿ</h1><p>(æˆ‘å¼€å§‹ç†Ÿæ‚‰çš„æŠ¥èµ·äº†èœå)</p>\n<ul>\n<li><code>raw-loader</code>ï¼šåŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰</li>\n<li><code>file-loader</code>ï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li>\n<li><code>url-loader</code>ï¼šä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™ file-loader å¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li>\n<li><code>source-map-loader</code>ï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•</li>\n<li><code>svg-inline-loader</code>ï¼šå°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­</li>\n<li><code>image-loader</code>ï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶</li>\n<li><code>json-loader</code> åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰</li>\n<li><code>handlebars-loader</code>: å°† Handlebars æ¨¡ç‰ˆç¼–è¯‘æˆå‡½æ•°å¹¶è¿”å›</li>\n<li><code>babel-loader</code>ï¼šæŠŠ ES6 è½¬æ¢æˆ ES5</li>\n<li><code>ts-loader</code>: å°† TypeScript è½¬æ¢æˆ JavaScript</li>\n<li><code>awesome-typescript-loader</code>ï¼šå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader</li>\n<li><code>sass-loader</code>ï¼šå°†SCSS/SASSä»£ç è½¬æ¢æˆCSS</li>\n<li><code>css-loader</code>ï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§</li>\n<li><code>style-loader</code>ï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS</li>\n<li><code>postcss-loader</code>ï¼šæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œå¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€</li>\n<li><code>eslint-loader</code>ï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </li>\n<li><code>tslint-loader</code>ï¼šé€šè¿‡ TSLintæ£€æŸ¥ TypeScript ä»£ç </li>\n<li><code>mocha-loader</code>ï¼šåŠ è½½ Mocha æµ‹è¯•ç”¨ä¾‹çš„ä»£ç </li>\n<li><code>coverjs-loader</code>ï¼šè®¡ç®—æµ‹è¯•çš„è¦†ç›–ç‡</li>\n<li><code>vue-loader</code>ï¼šåŠ è½½ Vue.js å•æ–‡ä»¶ç»„ä»¶</li>\n<li><code>i18n-loader</code>: å›½é™…åŒ–</li>\n<li><code>cache-loader</code>: å¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ</li>\n</ul>\n<p>æ›´å¤š Loader è¯·å‚è€ƒ<a href=\"https://webpack.docschina.org/loaders/\">å®˜ç½‘</a></p>\n<p>(é¢è¯•å®˜ï¼šæŒºå¥½ï¼ŒçŸ¥é“çš„è¿˜æŒºå¤š)</p>\n<h1 id=\"1-æœ‰å“ªäº›å¸¸è§çš„Pluginï¼Ÿä½ ç”¨è¿‡å“ªäº›Pluginï¼Ÿ\"><a href=\"#1-æœ‰å“ªäº›å¸¸è§çš„Pluginï¼Ÿä½ ç”¨è¿‡å“ªäº›Pluginï¼Ÿ\" class=\"headerlink\" title=\"1.æœ‰å“ªäº›å¸¸è§çš„Pluginï¼Ÿä½ ç”¨è¿‡å“ªäº›Pluginï¼Ÿ\"></a>1.æœ‰å“ªäº›å¸¸è§çš„Pluginï¼Ÿä½ ç”¨è¿‡å“ªäº›Pluginï¼Ÿ</h1><p>(è¿™å¤§å…„å¼Ÿå¥½åƒå¬ä¸Šç˜¾äº†ï¼Œç»§ç»­å¼€å¯å¸¸è§„æ“ä½œ)</p>\n<ul>\n<li><code>define-plugin</code>ï¼šå®šä¹‰ç¯å¢ƒå˜é‡ (Webpack4 ä¹‹åæŒ‡å®š mode ä¼šè‡ªåŠ¨é…ç½®)</li>\n<li><code>ignore-plugin</code>ï¼šå¿½ç•¥éƒ¨åˆ†æ–‡ä»¶</li>\n<li><code>html-webpack-plugin</code>ï¼šç®€åŒ– HTML æ–‡ä»¶åˆ›å»º (ä¾èµ–äº html-loader)</li>\n<li><code>web-webpack-plugin</code>ï¼šå¯æ–¹ä¾¿åœ°ä¸ºå•é¡µåº”ç”¨è¾“å‡º HTMLï¼Œæ¯” html-webpack-plugin å¥½ç”¨</li>\n<li><code>uglifyjs-webpack-plugin</code>ï¼šä¸æ”¯æŒ ES6 å‹ç¼© (Webpack4 ä»¥å‰)</li>\n<li><code>terser-webpack-plugin</code>: æ”¯æŒå‹ç¼© ES6 (Webpack4)</li>\n<li><code>webpack-parallel-uglify-plugin</code>: å¤šè¿›ç¨‹æ‰§è¡Œä»£ç å‹ç¼©ï¼Œæå‡æ„å»ºé€Ÿåº¦</li>\n<li><code>mini-css-extract-plugin</code>: åˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ (æ›¿ä»£extract-text-webpack-plugin)</li>\n<li><code>serviceworker-webpack-plugin</code>ï¼šä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½</li>\n<li><code>clean-webpack-plugin</code>: ç›®å½•æ¸…ç†</li>\n<li><code>ModuleConcatenationPlugin</code>: å¼€å¯ Scope Hoisting</li>\n<li><code>speed-measure-webpack-plugin</code>: å¯ä»¥çœ‹åˆ°æ¯ä¸ª Loader å’Œ Plugin æ‰§è¡Œè€—æ—¶ (æ•´ä¸ªæ‰“åŒ…è€—æ—¶ã€æ¯ä¸ª Plugin å’Œ Loader è€—æ—¶)</li>\n<li><code>webpack-bundle-analyzer</code>: å¯è§†åŒ– Webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ (ä¸šåŠ¡ç»„ä»¶ã€ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å—)</li>\n</ul>\n<p>æ›´å¤š Plugin è¯·å‚è€ƒ<a href=\"https://webpack.docschina.org/plugins/\">å®˜ç½‘</a></p>\n<p>(Double Kill)</p>\n<h1 id=\"2-é‚£ä½ å†è¯´ä¸€è¯´Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ\"><a href=\"#2-é‚£ä½ å†è¯´ä¸€è¯´Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ\" class=\"headerlink\" title=\"2.é‚£ä½ å†è¯´ä¸€è¯´Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ\"></a>2.é‚£ä½ å†è¯´ä¸€è¯´Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ</h1><p>(å°±çŸ¥é“ä½ ä¼šé—®è¿™ä¸ªï¼Œæˆ‘ç”¨æ‰‹æ©ç›–ç€å˜´è§’çš„å¾®ç¬‘)</p>\n<p><code>Loader</code> æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚ å› ä¸º Webpack åªè®¤è¯† JavaScriptï¼Œæ‰€ä»¥ Loader å°±æˆäº†ç¿»è¯‘å®˜ï¼Œå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚</p>\n<p><code>Plugin</code> å°±æ˜¯æ’ä»¶ï¼ŒåŸºäºäº‹ä»¶æµæ¡†æ¶ <code>Tapable</code>ï¼Œæ’ä»¶å¯ä»¥æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œåœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p>\n<p><code>Loader</code> åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª Objectï¼Œå†…éƒ¨åŒ…å«äº† test(ç±»å‹æ–‡ä»¶)ã€loaderã€options (å‚æ•°)ç­‰å±æ€§ã€‚</p>\n<p><code>Plugin</code> åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª Plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</p>\n<h1 id=\"3-Webpackæ„å»ºæµç¨‹ç®€å•è¯´ä¸€ä¸‹\"><a href=\"#3-Webpackæ„å»ºæµç¨‹ç®€å•è¯´ä¸€ä¸‹\" class=\"headerlink\" title=\"3.Webpackæ„å»ºæµç¨‹ç®€å•è¯´ä¸€ä¸‹\"></a>3.Webpackæ„å»ºæµç¨‹ç®€å•è¯´ä¸€ä¸‹</h1><p>Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p>\n<ul>\n<li><code>åˆå§‹åŒ–å‚æ•°</code>ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</li>\n<li><code>å¼€å§‹ç¼–è¯‘</code>ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘</li>\n<li><code>ç¡®å®šå…¥å£</code>ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶</li>\n<li><code>ç¼–è¯‘æ¨¡å—</code>ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li>\n<li><code>å®Œæˆæ¨¡å—ç¼–è¯‘</code>ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>\n<li><code>è¾“å‡ºèµ„æº</code>ï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li>\n<li><code>è¾“å‡ºå®Œæˆ</code>ï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</li>\n</ul>\n<p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œ<code>Webpack</code> ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚</p>\n<p>ç®€å•è¯´</p>\n<ul>\n<li>åˆå§‹åŒ–ï¼šå¯åŠ¨æ„å»ºï¼Œè¯»å–ä¸åˆå¹¶é…ç½®å‚æ•°ï¼ŒåŠ è½½ Pluginï¼Œå®ä¾‹åŒ– Compiler</li>\n<li>ç¼–è¯‘ï¼šä» Entry å‡ºå‘ï¼Œé’ˆå¯¹æ¯ä¸ª Module ä¸²è¡Œè°ƒç”¨å¯¹åº”çš„ Loader å»ç¿»è¯‘æ–‡ä»¶çš„å†…å®¹ï¼Œå†æ‰¾åˆ°è¯¥ Module ä¾èµ–çš„ Moduleï¼Œé€’å½’åœ°è¿›è¡Œç¼–è¯‘å¤„ç†</li>\n<li>è¾“å‡ºï¼šå°†ç¼–è¯‘åçš„ Module ç»„åˆæˆ Chunkï¼Œå°† Chunk è½¬æ¢æˆæ–‡ä»¶ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­</li>\n</ul>\n<p>å¯¹æºç æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç§»æ­¥æˆ‘çš„å¦ä¸€ç¯‡ä¸“æ <a href=\"https://juejin.im/post/6844904046294204429\">ä»æºç çª¥æ¢Webpack4.xåŸç†</a></p>\n<h1 id=\"4-ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œä½ ç”¨è¿‡å“ªäº›å¯ä»¥æé«˜æ•ˆç‡çš„æ’ä»¶ï¼Ÿ\"><a href=\"#4-ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œä½ ç”¨è¿‡å“ªäº›å¯ä»¥æé«˜æ•ˆç‡çš„æ’ä»¶ï¼Ÿ\" class=\"headerlink\" title=\"4.ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œä½ ç”¨è¿‡å“ªäº›å¯ä»¥æé«˜æ•ˆç‡çš„æ’ä»¶ï¼Ÿ\"></a>4.ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œä½ ç”¨è¿‡å“ªäº›å¯ä»¥æé«˜æ•ˆç‡çš„æ’ä»¶ï¼Ÿ</h1><p>(è¿™é“é¢˜è¿˜è›®æ³¨é‡å®é™…ï¼Œç”¨æˆ·çš„ä½“éªŒè¿˜æ˜¯è¦ä»å°æŠ“èµ·çš„)</p>\n<ul>\n<li><code>webpack-dashboard</code>ï¼šå¯ä»¥æ›´å‹å¥½çš„å±•ç¤ºç›¸å…³æ‰“åŒ…ä¿¡æ¯ã€‚</li>\n<li><code>webpack-merge</code>ï¼šæå–å…¬å…±é…ç½®ï¼Œå‡å°‘é‡å¤é…ç½®ä»£ç </li>\n<li><code>speed-measure-webpack-plugin</code>ï¼šç®€ç§° SMPï¼Œåˆ†æå‡º Webpack æ‰“åŒ…è¿‡ç¨‹ä¸­ Loader å’Œ Plugin çš„è€—æ—¶ï¼Œæœ‰åŠ©äºæ‰¾åˆ°æ„å»ºè¿‡ç¨‹ä¸­çš„æ€§èƒ½ç“¶é¢ˆã€‚</li>\n<li><code>size-plugin</code>ï¼šç›‘æ§èµ„æºä½“ç§¯å˜åŒ–ï¼Œå°½æ—©å‘ç°é—®é¢˜</li>\n<li><code>HotModuleReplacementPlugin</code>ï¼šæ¨¡å—çƒ­æ›¿æ¢</li>\n</ul>\n<h1 id=\"5-source-mapæ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#5-source-mapæ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"5.source mapæ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ\"></a>5.source mapæ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ</h1><p><code>source map</code> æ˜¯å°†ç¼–è¯‘ã€æ‰“åŒ…ã€å‹ç¼©åçš„ä»£ç æ˜ å°„å›æºä»£ç çš„è¿‡ç¨‹ã€‚æ‰“åŒ…å‹ç¼©åçš„ä»£ç ä¸å…·å¤‡è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæƒ³è¦è°ƒè¯•æºç å°±éœ€è¦ soucre mapã€‚</p>\n<p>mapæ–‡ä»¶åªè¦ä¸æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šåŠ è½½çš„ã€‚</p>\n<p>çº¿ä¸Šç¯å¢ƒä¸€èˆ¬æœ‰ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼š</p>\n<ul>\n<li><code>hidden-source-map</code>ï¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹é”™è¯¯ç›‘æ§å¹³å° Sentry ä½¿ç”¨</li>\n<li><code>nosources-source-map</code>ï¼šåªä¼šæ˜¾ç¤ºå…·ä½“è¡Œæ•°ä»¥åŠæŸ¥çœ‹æºä»£ç çš„é”™è¯¯æ ˆã€‚å®‰å…¨æ€§æ¯” sourcemap é«˜</li>\n<li><code>sourcemap</code>ï¼šé€šè¿‡ nginx è®¾ç½®å°† .map æ–‡ä»¶åªå¯¹ç™½åå•å¼€æ”¾(å…¬å¸å†…ç½‘)</li>\n</ul>\n<p>æ³¨æ„ï¼šé¿å…åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ <code>inline-</code> å’Œ <code>eval-</code>ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¢åŠ  bundle ä½“ç§¯å¤§å°ï¼Œå¹¶é™ä½æ•´ä½“æ€§èƒ½ã€‚</p>\n<h1 id=\"6-æ¨¡å—æ‰“åŒ…åŸç†çŸ¥é“å—ï¼Ÿ\"><a href=\"#6-æ¨¡å—æ‰“åŒ…åŸç†çŸ¥é“å—ï¼Ÿ\" class=\"headerlink\" title=\"6.æ¨¡å—æ‰“åŒ…åŸç†çŸ¥é“å—ï¼Ÿ\"></a>6.æ¨¡å—æ‰“åŒ…åŸç†çŸ¥é“å—ï¼Ÿ</h1><p>Webpack å®é™…ä¸Šä¸ºæ¯ä¸ªæ¨¡å—åˆ›é€ äº†ä¸€ä¸ªå¯ä»¥å¯¼å‡ºå’Œå¯¼å…¥çš„ç¯å¢ƒï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ä¿®æ”¹ ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œä»£ç æ‰§è¡Œé¡ºåºä¸æ¨¡å—åŠ è½½é¡ºåºä¹Ÿå®Œå…¨ä¸€è‡´ã€‚</p>\n<h1 id=\"7-æ–‡ä»¶ç›‘å¬åŸç†å‘¢ï¼Ÿ\"><a href=\"#7-æ–‡ä»¶ç›‘å¬åŸç†å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"7.æ–‡ä»¶ç›‘å¬åŸç†å‘¢ï¼Ÿ\"></a>7.æ–‡ä»¶ç›‘å¬åŸç†å‘¢ï¼Ÿ</h1><p>åœ¨å‘ç°æºç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºå‡ºæ–°çš„è¾“å‡ºæ–‡ä»¶ã€‚</p>\n<p>Webpackå¼€å¯ç›‘å¬æ¨¡å¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>å¯åŠ¨ webpack å‘½ä»¤æ—¶ï¼Œå¸¦ä¸Š â€“watch å‚æ•°</li>\n<li>åœ¨é…ç½® webpack.config.js ä¸­è®¾ç½® watch:true</li>\n</ul>\n<p>ç¼ºç‚¹ï¼šæ¯æ¬¡éœ€è¦æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨</p>\n<p>åŸç†ï¼šè½®è¯¢åˆ¤æ–­æ–‡ä»¶çš„æœ€åç¼–è¾‘æ—¶é—´æ˜¯å¦å˜åŒ–ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶ä¸ä¼šç«‹åˆ»å‘Šè¯‰ç›‘å¬è€…ï¼Œè€Œæ˜¯å…ˆç¼“å­˜èµ·æ¥ï¼Œç­‰ <code>aggregateTimeout</code> åå†æ‰§è¡Œã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">module.export &#x3D; &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; é»˜è®¤false,ä¹Ÿå°±æ˜¯ä¸å¼€å¯</span><br><span class=\"line\">    watch: true,</span><br><span class=\"line\">    &#x2F;&#x2F; åªæœ‰å¼€å¯ç›‘å¬æ¨¡å¼æ—¶ï¼ŒwatchOptionsæ‰æœ‰æ„ä¹‰</span><br><span class=\"line\">    watchOptions: &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; é»˜è®¤ä¸ºç©ºï¼Œä¸ç›‘å¬çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…</span><br><span class=\"line\">        ignored: &#x2F;node_modules&#x2F;,</span><br><span class=\"line\">        &#x2F;&#x2F; ç›‘å¬åˆ°å˜åŒ–å‘ç”Ÿåä¼šç­‰300mså†å»æ‰§è¡Œï¼Œé»˜è®¤300ms</span><br><span class=\"line\">        aggregateTimeout:300,</span><br><span class=\"line\">        &#x2F;&#x2F; åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŒ–æ˜¯é€šè¿‡ä¸åœè¯¢é—®ç³»ç»ŸæŒ‡å®šæ–‡ä»¶æœ‰æ²¡æœ‰å˜åŒ–å®ç°çš„ï¼Œé»˜è®¤æ¯ç§’é—®1000æ¬¡</span><br><span class=\"line\">        poll:1000</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"8-è¯´ä¸€ä¸‹-Webpack-çš„çƒ­æ›´æ–°åŸç†å§\"><a href=\"#8-è¯´ä¸€ä¸‹-Webpack-çš„çƒ­æ›´æ–°åŸç†å§\" class=\"headerlink\" title=\"8.è¯´ä¸€ä¸‹ Webpack çš„çƒ­æ›´æ–°åŸç†å§\"></a>8.è¯´ä¸€ä¸‹ Webpack çš„çƒ­æ›´æ–°åŸç†å§</h1><p>(æ•²é»‘æ¿ï¼Œè¿™é“é¢˜å¿…è€ƒ)</p>\n<p><code>Webpack</code> çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆ<code>Hot Module Replacement</code>ï¼‰ï¼Œç¼©å†™ä¸º <code>HMR</code>ã€‚ è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚</p>\n<p>HMRçš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ chunk diff (chunk éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š WDS ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª <code>Websocket</code>ï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒWDS ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ WDS å‘èµ· <code>Ajax</code> è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€hash)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ WDS å‘èµ· <code>jsonp</code> è¯·æ±‚è·å–è¯¥chunkçš„å¢é‡æ›´æ–°ã€‚</p>\n<p>åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± <code>HotModulePlugin</code> æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒ<code>react-hot-loader</code> å’Œ <code>vue-loader</code> éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚</p>\n<p>ç»†èŠ‚è¯·å‚è€ƒ<a href=\"https://zhuanlan.zhihu.com/p/30669007\">Webpack HMR åŸç†è§£æ</a></p>\n<p>(é¢è¯•å®˜ï¼šä¸é”™ä¸é”™ï¼Œå°ä¼™å­è¡¨è¾¾èƒ½åŠ›ä¸é”™)</p>\n<p>(åŸºæ“ï¼Œå‹¿6)</p>\n<h1 id=\"9-å¦‚ä½•å¯¹bundleä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Ÿ\"><a href=\"#9-å¦‚ä½•å¯¹bundleä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Ÿ\" class=\"headerlink\" title=\"9.å¦‚ä½•å¯¹bundleä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Ÿ\"></a>9.å¦‚ä½•å¯¹bundleä½“ç§¯è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Ÿ</h1><p><code>VSCode</code> ä¸­æœ‰ä¸€ä¸ªæ’ä»¶ <code>Import Cost</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯¹å¼•å…¥æ¨¡å—çš„å¤§å°è¿›è¡Œå®æ—¶ç›‘æµ‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>webpack-bundle-analyzer</code> ç”Ÿæˆ <code>bundle</code> çš„æ¨¡å—ç»„æˆå›¾ï¼Œæ˜¾ç¤ºæ‰€å ä½“ç§¯ã€‚</p>\n<p><code>bundlesize</code> å·¥å…·åŒ…å¯ä»¥è¿›è¡Œè‡ªåŠ¨åŒ–èµ„æºä½“ç§¯ç›‘æ§ã€‚</p>\n<h1 id=\"10-æ–‡ä»¶æŒ‡çº¹æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#10-æ–‡ä»¶æŒ‡çº¹æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"10.æ–‡ä»¶æŒ‡çº¹æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ\"></a>10.æ–‡ä»¶æŒ‡çº¹æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ</h1><p>æ–‡ä»¶æŒ‡çº¹æ˜¯æ‰“åŒ…åè¾“å‡ºçš„æ–‡ä»¶åçš„åç¼€ã€‚</p>\n<ul>\n<li><code>Hash</code>ï¼šå’Œæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„ hash å€¼å°±ä¼šæ›´æ”¹</li>\n<li><code>Chunkhash</code>ï¼šå’Œ Webpack æ‰“åŒ…çš„ chunk æœ‰å…³ï¼Œä¸åŒçš„ entry ä¼šç”Ÿå‡ºä¸åŒçš„ chunkhash</li>\n<li><code>Contenthash</code>ï¼šæ ¹æ®æ–‡ä»¶å†…å®¹æ¥å®šä¹‰ hashï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œåˆ™ contenthash ä¸å˜</li>\n</ul>\n<h2 id=\"JSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"><a href=\"#JSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\" class=\"headerlink\" title=\"JSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"></a>JSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®</h2><p>è®¾ç½® output çš„ filenameï¼Œç”¨ chunkhashã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">module.exports &#x3D; &#123;</span><br><span class=\"line\">    entry: &#123;</span><br><span class=\"line\">        app: &#39;.&#x2F;scr&#x2F;app.js&#39;,</span><br><span class=\"line\">        search: &#39;.&#x2F;src&#x2F;search.js&#39;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        filename: &#39;[name][chunkhash:8].js&#39;,</span><br><span class=\"line\">        path:__dirname + &#39;&#x2F;dist&#39;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"CSSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"><a href=\"#CSSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\" class=\"headerlink\" title=\"CSSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"></a>CSSçš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®</h2><p>è®¾ç½® MiniCssExtractPlugin çš„ filenameï¼Œä½¿ç”¨ contenthashã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">module.exports &#x3D; &#123;</span><br><span class=\"line\">    entry: &#123;</span><br><span class=\"line\">        app: &#39;.&#x2F;scr&#x2F;app.js&#39;,</span><br><span class=\"line\">        search: &#39;.&#x2F;src&#x2F;search.js&#39;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        filename: &#39;[name][chunkhash:8].js&#39;,</span><br><span class=\"line\">        path:__dirname + &#39;&#x2F;dist&#39;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    plugins:[</span><br><span class=\"line\">        new MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">            filename: &#96;[name][contenthash:8].css&#96;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"><a href=\"#å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\" class=\"headerlink\" title=\"å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®\"></a>å›¾ç‰‡çš„æ–‡ä»¶æŒ‡çº¹è®¾ç½®</h2><p>è®¾ç½®file-loaderçš„nameï¼Œä½¿ç”¨hashã€‚</p>\n<p>å ä½ç¬¦åç§°åŠå«ä¹‰</p>\n<ul>\n<li>ext èµ„æºåç¼€å</li>\n<li>name æ–‡ä»¶åç§°</li>\n<li>path æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</li>\n<li>folder æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹</li>\n<li>contenthash æ–‡ä»¶çš„å†…å®¹hashï¼Œé»˜è®¤æ˜¯md5ç”Ÿæˆ</li>\n<li>hash æ–‡ä»¶å†…å®¹çš„hashï¼Œé»˜è®¤æ˜¯md5ç”Ÿæˆ</li>\n<li>emoji ä¸€ä¸ªéšæœºçš„æŒ‡ä»£æ–‡ä»¶å†…å®¹çš„emoj</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const path &#x3D; require(&#39;path&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports &#x3D; &#123;</span><br><span class=\"line\">    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,</span><br><span class=\"line\">    output: &#123;</span><br><span class=\"line\">        filename:&#39;bundle.js&#39;,</span><br><span class=\"line\">        path:path.resolve(__dirname, &#39;dist&#39;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    module:&#123;</span><br><span class=\"line\">        rules:[&#123;</span><br><span class=\"line\">            test:&#x2F;\\.(png|svg|jpg|gif)$&#x2F;,</span><br><span class=\"line\">            use:[&#123;</span><br><span class=\"line\">                loader:&#39;file-loader&#39;,</span><br><span class=\"line\">                options:&#123;</span><br><span class=\"line\">                    name:&#39;img&#x2F;[name][hash:8].[ext]&#39;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"11-åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸Šç™¾è¡Œä¹ƒæ˜¯å¸¸äº‹ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªloaderæŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œï¼Ÿ\"><a href=\"#11-åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸Šç™¾è¡Œä¹ƒæ˜¯å¸¸äº‹ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªloaderæŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œï¼Ÿ\" class=\"headerlink\" title=\"11.åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸Šç™¾è¡Œä¹ƒæ˜¯å¸¸äº‹ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªloaderæŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œï¼Ÿ\"></a>11.åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸Šç™¾è¡Œä¹ƒæ˜¯å¸¸äº‹ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªloaderæŒ‰ç…§é¢„æƒ³æ–¹å¼å·¥ä½œï¼Ÿ</h1><p>å¯ä»¥ä½¿ç”¨ <code>enforce</code> å¼ºåˆ¶æ‰§è¡Œ <code>loader</code> çš„ä½œç”¨é¡ºåºï¼Œ<code>pre</code> ä»£è¡¨åœ¨æ‰€æœ‰æ­£å¸¸ loader ä¹‹å‰æ‰§è¡Œï¼Œ<code>post</code> æ˜¯æ‰€æœ‰ loader ä¹‹åæ‰§è¡Œã€‚(inline å®˜æ–¹ä¸æ¨èä½¿ç”¨)</p>\n<h1 id=\"12-å¦‚ä½•ä¼˜åŒ–-Webpack-çš„æ„å»ºé€Ÿåº¦ï¼Ÿ\"><a href=\"#12-å¦‚ä½•ä¼˜åŒ–-Webpack-çš„æ„å»ºé€Ÿåº¦ï¼Ÿ\" class=\"headerlink\" title=\"12.å¦‚ä½•ä¼˜åŒ– Webpack çš„æ„å»ºé€Ÿåº¦ï¼Ÿ\"></a>12.å¦‚ä½•ä¼˜åŒ– Webpack çš„æ„å»ºé€Ÿåº¦ï¼Ÿ</h1><p>(è¿™ä¸ªé—®é¢˜å°±åƒèƒ½ä¸èƒ½è¯´ä¸€è¯´<strong>ã€Œä»URLè¾“å…¥åˆ°é¡µé¢æ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆã€</strong>ä¸€æ ·ï¼‰</p>\n<p>(æˆ‘åªæƒ³è¯´ï¼šæ‚¨å¸Œæœ›æˆ‘è®²å¤šé•¿æ—¶é—´å‘¢ï¼Ÿ)</p>\n<p>(é¢è¯•å®˜ï¼šã€‚ã€‚ã€‚)</p>\n<ul>\n<li>ä½¿ç”¨<code>é«˜ç‰ˆæœ¬</code>çš„ Webpack å’Œ Node.js</li>\n<li><code>å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º</code>ï¼šHappyPack(ä¸ç»´æŠ¤äº†)ã€thread-loader</li>\n<li><code>å‹ç¼©ä»£ç </code><ul>\n<li>å¤šè¿›ç¨‹å¹¶è¡Œå‹ç¼©<ul>\n<li>webpack-paralle-uglify-plugin</li>\n<li>uglifyjs-webpack-plugin å¼€å¯ parallel å‚æ•° (ä¸æ”¯æŒES6)</li>\n<li>terser-webpack-plugin å¼€å¯ parallel å‚æ•°</li>\n</ul>\n</li>\n<li>é€šè¿‡ mini-css-extract-plugin æå– Chunk ä¸­çš„ CSS ä»£ç åˆ°å•ç‹¬æ–‡ä»¶ï¼Œé€šè¿‡ css-loader çš„ minimize é€‰é¡¹å¼€å¯ cssnano å‹ç¼© CSSã€‚</li>\n</ul>\n</li>\n<li><code>å›¾ç‰‡å‹ç¼©</code><ul>\n<li>ä½¿ç”¨åŸºäº Node åº“çš„ imagemin (å¾ˆå¤šå®šåˆ¶é€‰é¡¹ã€å¯ä»¥å¤„ç†å¤šç§å›¾ç‰‡æ ¼å¼)</li>\n<li>é…ç½® image-webpack-loader</li>\n</ul>\n</li>\n<li><code>ç¼©å°æ‰“åŒ…ä½œç”¨åŸŸ</code>ï¼š<ul>\n<li>exclude/include (ç¡®å®š loader è§„åˆ™èŒƒå›´)</li>\n<li>resolve.modules æŒ‡æ˜ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»å¯¹è·¯å¾„ (å‡å°‘ä¸å¿…è¦çš„æŸ¥æ‰¾)</li>\n<li>resolve.mainFields åªé‡‡ç”¨ main å­—æ®µä½œä¸ºå…¥å£æ–‡ä»¶æè¿°å­—æ®µ (å‡å°‘æœç´¢æ­¥éª¤ï¼Œéœ€è¦è€ƒè™‘åˆ°æ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å—çš„å…¥å£æ–‡ä»¶æè¿°å­—æ®µ)</li>\n<li>resolve.extensions å°½å¯èƒ½å‡å°‘åç¼€å°è¯•çš„å¯èƒ½æ€§</li>\n<li>noParse å¯¹å®Œå…¨ä¸éœ€è¦è§£æçš„åº“è¿›è¡Œå¿½ç•¥ (ä¸å»è§£æä½†ä»ä¼šæ‰“åŒ…åˆ° bundle ä¸­ï¼Œæ³¨æ„è¢«å¿½ç•¥æ‰çš„æ–‡ä»¶é‡Œä¸åº”è¯¥åŒ…å« importã€requireã€define ç­‰æ¨¡å—åŒ–è¯­å¥)</li>\n<li>IgnorePlugin (å®Œå…¨æ’é™¤æ¨¡å—)</li>\n<li>åˆç†ä½¿ç”¨alias</li>\n</ul>\n</li>\n<li><code>æå–é¡µé¢å…¬å…±èµ„æº</code>ï¼š<ul>\n<li>åŸºç¡€åŒ…åˆ†ç¦»ï¼š<ul>\n<li>ä½¿ç”¨ html-webpack-externals-pluginï¼Œå°†åŸºç¡€åŒ…é€šè¿‡ CDN å¼•å…¥ï¼Œä¸æ‰“å…¥ bundle ä¸­</li>\n<li>ä½¿ç”¨ SplitChunksPlugin è¿›è¡Œ(å…¬å…±è„šæœ¬ã€åŸºç¡€åŒ…ã€é¡µé¢å…¬å…±æ–‡ä»¶)åˆ†ç¦»(Webpack4å†…ç½®) ï¼Œæ›¿ä»£äº† CommonsChunkPlugin æ’ä»¶</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>DLL</code>ï¼š<ul>\n<li>ä½¿ç”¨ DllPlugin è¿›è¡Œåˆ†åŒ…ï¼Œä½¿ç”¨ DllReferencePlugin(ç´¢å¼•é“¾æ¥) å¯¹ manifest.json å¼•ç”¨ï¼Œè®©ä¸€äº›åŸºæœ¬ä¸ä¼šæ”¹åŠ¨çš„ä»£ç å…ˆæ‰“åŒ…æˆé™æ€èµ„æºï¼Œé¿å…åå¤ç¼–è¯‘æµªè´¹æ—¶é—´ã€‚</li>\n<li>HashedModuleIdsPlugin å¯ä»¥è§£å†³æ¨¡å—æ•°å­—idé—®é¢˜</li>\n</ul>\n</li>\n<li><code>å……åˆ†åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦</code>ï¼š<ul>\n<li>babel-loader å¼€å¯ç¼“å­˜</li>\n<li>terser-webpack-plugin å¼€å¯ç¼“å­˜</li>\n<li>ä½¿ç”¨ cache-loader æˆ–è€… hard-source-webpack-plugin</li>\n</ul>\n</li>\n<li><code>Tree shaking</code><ul>\n<li>æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰å¼•ç”¨è¿‡çš„æ¨¡å—å¹¶è¿›è¡Œæ ‡è®°ï¼Œåœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„bundleä¸­å»æ‰(åªèƒ½å¯¹ES6 Modlueç”Ÿæ•ˆ) å¼€å‘ä¸­å°½å¯èƒ½ä½¿ç”¨ES6 Moduleçš„æ¨¡å—ï¼Œæé«˜tree shakingæ•ˆç‡</li>\n<li>ç¦ç”¨ babel-loader çš„æ¨¡å—ä¾èµ–è§£æï¼Œå¦åˆ™ Webpack æ¥æ”¶åˆ°çš„å°±éƒ½æ˜¯è½¬æ¢è¿‡çš„ CommonJS å½¢å¼çš„æ¨¡å—ï¼Œæ— æ³•è¿›è¡Œ tree-shaking</li>\n<li>ä½¿ç”¨ PurifyCSS(ä¸åœ¨ç»´æŠ¤) æˆ–è€… uncss å»é™¤æ— ç”¨ CSS ä»£ç <ul>\n<li>purgecss-webpack-plugin å’Œ mini-css-extract-pluginé…åˆä½¿ç”¨(å»ºè®®)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Scope hoisting</code><ul>\n<li>æ„å»ºåçš„ä»£ç ä¼šå­˜åœ¨å¤§é‡é—­åŒ…ï¼Œé€ æˆä½“ç§¯å¢å¤§ï¼Œè¿è¡Œä»£ç æ—¶åˆ›å»ºçš„å‡½æ•°ä½œç”¨åŸŸå˜å¤šï¼Œå†…å­˜å¼€é”€å˜å¤§ã€‚Scope hoisting å°†æ‰€æœ‰æ¨¡å—çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œï¼Œç„¶åé€‚å½“çš„é‡å‘½åä¸€äº›å˜é‡ä»¥é˜²æ­¢å˜é‡åå†²çª</li>\n<li>å¿…é¡»æ˜¯ES6çš„è¯­æ³•ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä»é‡‡ç”¨ CommonJS è¯­æ³•ï¼Œä¸ºäº†å……åˆ†å‘æŒ¥ Scope hoisting çš„ä½œç”¨ï¼Œéœ€è¦é…ç½® mainFields å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—ä¼˜å…ˆé‡‡ç”¨ jsnext:main ä¸­æŒ‡å‘çš„ES6æ¨¡å—åŒ–è¯­æ³•</li>\n</ul>\n</li>\n<li><code>åŠ¨æ€Polyfill</code><ul>\n<li>å»ºè®®é‡‡ç”¨ polyfill-service åªç»™ç”¨æˆ·è¿”å›éœ€è¦çš„polyfillï¼Œç¤¾åŒºç»´æŠ¤ã€‚ (éƒ¨åˆ†å›½å†…å¥‡è‘©æµè§ˆå™¨UAå¯èƒ½æ— æ³•è¯†åˆ«ï¼Œä½†å¯ä»¥é™çº§è¿”å›æ‰€éœ€å…¨éƒ¨polyfill)</li>\n</ul>\n</li>\n</ul>\n<p>æ›´å¤šä¼˜åŒ–è¯·å‚è€ƒ<a href=\"https://www.webpackjs.com/guides/build-performance/\">å®˜ç½‘-æ„å»ºæ€§èƒ½</a></p>\n<h1 id=\"13-ä½ åˆšæ‰ä¹Ÿæåˆ°äº†ä»£ç åˆ†å‰²ï¼Œé‚£ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\"><a href=\"#13-ä½ åˆšæ‰ä¹Ÿæåˆ°äº†ä»£ç åˆ†å‰²ï¼Œé‚£ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"13.ä½ åˆšæ‰ä¹Ÿæåˆ°äº†ä»£ç åˆ†å‰²ï¼Œé‚£ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\"></a>13.ä½ åˆšæ‰ä¹Ÿæåˆ°äº†ä»£ç åˆ†å‰²ï¼Œé‚£ä»£ç åˆ†å‰²çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</h1><p>ä»£ç åˆ†å‰²çš„æœ¬è´¨å…¶å®å°±æ˜¯åœ¨<code>æºä»£ç ç›´æ¥ä¸Šçº¿</code>å’Œ<code>æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬main.bundle.js</code>è¿™ä¸¤ç§æç«¯æ–¹æ¡ˆä¹‹é—´çš„ä¸€ç§æ›´é€‚åˆå®é™…åœºæ™¯çš„ä¸­é—´çŠ¶æ€ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">é˜¿å¡ä¸½ï¼šè£è€€å‰‘ä¸‹å–ï¼Œå‡è¡¡ä¹±ä¸­æ±‚</span><br></pre></td></tr></table></figure>\n\n<p><strong>ã€Œç”¨å¯æ¥å—çš„æœåŠ¡å™¨æ€§èƒ½å‹åŠ›å¢åŠ æ¥æ¢å–æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ã€</strong></p>\n<p>æºä»£ç ç›´æ¥ä¸Šçº¿ï¼šè™½ç„¶è¿‡ç¨‹å¯æ§ï¼Œä½†æ˜¯httpè¯·æ±‚å¤šï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚</p>\n<p>æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬ï¼šä¸€æŠŠæ¢­å®Œè‡ªå·±çˆ½ï¼ŒæœåŠ¡å™¨å‹åŠ›å°ï¼Œä½†æ˜¯é¡µé¢ç©ºç™½æœŸé•¿ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</p>\n<p>(Easy peezy right)</p>\n<h1 id=\"14-æ˜¯å¦å†™è¿‡Loaderï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™loaderçš„æ€è·¯ï¼Ÿ\"><a href=\"#14-æ˜¯å¦å†™è¿‡Loaderï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™loaderçš„æ€è·¯ï¼Ÿ\" class=\"headerlink\" title=\"14.æ˜¯å¦å†™è¿‡Loaderï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™loaderçš„æ€è·¯ï¼Ÿ\"></a>14.æ˜¯å¦å†™è¿‡Loaderï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™loaderçš„æ€è·¯ï¼Ÿ</h1><p>Loader æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥å¼€å‘ä¸Šéœ€è¦ä¸¥æ ¼éµå¾ªâ€œå•ä¸€èŒè´£â€ï¼Œæ¯ä¸ª Loader åªè´Ÿè´£è‡ªå·±éœ€è¦è´Ÿè´£çš„äº‹æƒ…ã€‚</p>\n<p><a href=\"https://www.webpackjs.com/api/loaders/\">Loaderçš„API</a> å¯ä»¥å»å®˜ç½‘æŸ¥é˜…</p>\n<ul>\n<li>Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ Node.js è‡ªå¸¦çš„ API æˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨</li>\n<li>Webpack ä¼ ç»™ Loader çš„åŸå†…å®¹éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå½“æŸäº›åœºæ™¯ä¸‹ Loader å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ exports.raw = true å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®</li>\n<li>å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥</li>\n<li>Loader æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ Loader ä¸­ä¿ç•™çŠ¶æ€</li>\n<li>ä½¿ç”¨ loader-utils å’Œ schema-utils ä¸ºæˆ‘ä»¬æä¾›çš„å®ç”¨å·¥å…·</li>\n<li>åŠ è½½æœ¬åœ° Loader æ–¹æ³•<ul>\n<li>Npm link</li>\n<li>ResolveLoader</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"15-æ˜¯å¦å†™è¿‡Pluginï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™Pluginçš„æ€è·¯ï¼Ÿ\"><a href=\"#15-æ˜¯å¦å†™è¿‡Pluginï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™Pluginçš„æ€è·¯ï¼Ÿ\" class=\"headerlink\" title=\"15.æ˜¯å¦å†™è¿‡Pluginï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™Pluginçš„æ€è·¯ï¼Ÿ\"></a>15.æ˜¯å¦å†™è¿‡Pluginï¼Ÿç®€å•æè¿°ä¸€ä¸‹ç¼–å†™Pluginçš„æ€è·¯ï¼Ÿ</h1><p>webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨ç‰¹å®šçš„é˜¶æ®µé’©å…¥æƒ³è¦æ·»åŠ çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚Webpack çš„ Tapable äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§è‰¯å¥½ã€‚</p>\n<p><a href=\"https://www.webpackjs.com/api/plugins/\">Pluginçš„API</a> å¯ä»¥å»å®˜ç½‘æŸ¥é˜…</p>\n<ul>\n<li>compiler æš´éœ²äº†å’Œ Webpack æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­</li>\n<li>compilation æš´éœ²äº†ä¸æ¨¡å—å’Œä¾èµ–æœ‰å…³çš„ç²’åº¦æ›´å°çš„äº‹ä»¶é’©å­</li>\n<li>æ’ä»¶éœ€è¦åœ¨å…¶åŸå‹ä¸Šç»‘å®šapplyæ–¹æ³•ï¼Œæ‰èƒ½è®¿é—® compiler å®ä¾‹</li>\n<li>ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ compiler å’Œ compilationå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œè‹¥åœ¨ä¸€ä¸ªæ’ä»¶ä¸­ä¿®æ”¹äº†å®ƒä»¬èº«ä¸Šçš„å±æ€§ï¼Œä¼šå½±å“åé¢çš„æ’ä»¶</li>\n<li>æ‰¾å‡ºåˆé€‚çš„äº‹ä»¶ç‚¹å»å®Œæˆæƒ³è¦çš„åŠŸèƒ½<ul>\n<li>emit äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆè¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶è¿›è¡Œä¿®æ”¹(emit äº‹ä»¶æ˜¯ä¿®æ”¹ Webpack è¾“å‡ºèµ„æºçš„æœ€åæ—¶æœº)</li>\n<li>watch-run å½“ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘</li>\n</ul>\n</li>\n<li>å¼‚æ­¥çš„äº‹ä»¶éœ€è¦åœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ Webpack è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ï¼Œä¸ç„¶ä¼šå¡ä½</li>\n</ul>\n<h1 id=\"16-èŠä¸€èŠBabelåŸç†å§\"><a href=\"#16-èŠä¸€èŠBabelåŸç†å§\" class=\"headerlink\" title=\"16.èŠä¸€èŠBabelåŸç†å§\"></a>16.èŠä¸€èŠBabelåŸç†å§</h1><p>å¤§å¤šæ•°JavaScript Parseréµå¾ª <code>estree</code> è§„èŒƒï¼ŒBabel æœ€åˆåŸºäº <code>acorn</code> é¡¹ç›®(è½»é‡çº§ç°ä»£ JavaScript è§£æå™¨) Babelå¤§æ¦‚åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼š</p>\n<ul>\n<li>è§£æï¼šå°†ä»£ç è½¬æ¢æˆ AST<ul>\n<li>è¯æ³•åˆ†æï¼šå°†ä»£ç (å­—ç¬¦ä¸²)åˆ†å‰²ä¸ºtokenæµï¼Œå³è¯­æ³•å•å…ƒæˆçš„æ•°ç»„</li>\n<li>è¯­æ³•åˆ†æï¼šåˆ†ætokenæµ(ä¸Šé¢ç”Ÿæˆçš„æ•°ç»„)å¹¶ç”Ÿæˆ AST</li>\n</ul>\n</li>\n<li>è½¬æ¢ï¼šè®¿é—® AST çš„èŠ‚ç‚¹è¿›è¡Œå˜æ¢æ“ä½œç”Ÿäº§æ–°çš„ AST<ul>\n<li><a href=\"https://github.com/NervJS/taro/blob/master/packages/taro-transformer-wx/src/index.ts#L15\">Taro</a>å°±æ˜¯åˆ©ç”¨ babel å®Œæˆçš„å°ç¨‹åºè¯­æ³•è½¬æ¢</li>\n</ul>\n</li>\n<li>ç”Ÿæˆï¼šä»¥æ–°çš„ AST ä¸ºåŸºç¡€ç”Ÿæˆä»£ç </li>\n</ul>\n<p>æƒ³äº†è§£å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å®ç°ä¸€ä¸ªç¼–è¯‘å™¨çš„åŒå­¦å¯ä»¥ç§»æ­¥ Babel å®˜ç½‘æ›¾ç»æ¨èçš„å¼€æºé¡¹ç›® <a href=\"https://github.com/jamiebuilds/the-super-tiny-compiler\">the-super-tiny-compiler</a></p>\n<blockquote>\n<p>â</p>\n<p>é¢è¯•å®˜ï¼š(æˆ‘å¬çš„å£æ¸´äº†ï¼Œå’±ä»¬ä¼‘æ¯ä¸€ä¼šï¼Œä¸€ä¼šè¿›è¡Œä¸‹åŠåœº)</p>\n<p>â</p>\n</blockquote>\n<p>é¢è¯•å®˜æ‹¿èµ·æ—è¾¹å·²ç»å‡‰é€çš„é¾™äº•ï¼Œå–äº†ä¸€å£ã€‚</p>\n<p>(è¿™å°ä¼™å­æœ‰ç‚¹ä¸œè¥¿)</p>\n<p><strong>ã€ŒæŒç»­æ›´æ–°â€¦â€¦ã€</strong></p>\n<h1 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h1><ul>\n<li>æ·±å…¥æµ…å‡º Webpack</li>\n<li>Webpack å®æˆ˜</li>\n<li>ç©è½¬ Webpack</li>\n</ul>\n","categories":["webå‰ç«¯"],"tags":["Weppack","é¢è¯•","æ‰“åŒ…"]},{"title":"ä¸€èµ·æ„‰å¿«åˆ·é¢˜","url":"/2021/03/09/%E4%B8%80%E8%B5%B7%E6%84%89%E5%BF%AB%E5%88%B7%E9%A2%98/","content":"<p>æŒ‰ç…§ç®—æ³•å’Œæ•°æ®ç»“æ„è¿›è¡Œåˆ†ç±»ï¼Œä¸€èµ·æ¥åˆ·é¢˜ï¼Œç”¨äºè‡ªå·±åœ¨é¢è¯•å‰æŸ¥æ¼è¡¥ç¼ºã€‚æˆ‘çš„æ„å‘å²—ä½æ˜¯å‰ç«¯ï¼Œé€‰æ‹©ç”¨javascriptæ¥åˆ·é¢˜ï¼Œä¼˜ç‚¹æ˜¯åŠ¨æ€è¯­è¨€ï¼Œè¯­æ³•ç®€å•ï¼Œç¼ºç‚¹æ˜¯é‡è§å¤æ‚æ•°æ®ç»“æ„ä¼šå‡ºç°è¾ƒéš¾çš„å†™æ³•ï¼Œå¦‚å †ã€å¹¶æŸ¥é›†ï¼Œæ¯é¢˜å¯¹åº”leetcodeçš„é¢˜å·</p>\n<a id=\"more\"></a>\n\n<h1 id=\"å‰‘æŒ‡offer\"><a href=\"#å‰‘æŒ‡offer\" class=\"headerlink\" title=\"å‰‘æŒ‡offer\"></a>å‰‘æŒ‡offer</h1><h4 id=\"03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—\"><a href=\"#03-æ•°ç»„ä¸­é‡å¤çš„æ•°å­—\" class=\"headerlink\" title=\"03. æ•°ç»„ä¸­é‡å¤çš„æ•°å­—\"></a>03. <a href=\"https://leetcode-cn.com/problems/shu-zu-zhong-zhong-fu-de-shu-zi-lcof/\">æ•°ç»„ä¸­é‡å¤çš„æ•°å­—</a></h4><p>æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚</p>\n<p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚</p>\n<p>ç¤ºä¾‹ 1ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼š<br>[2, 3, 1, 0, 2, 5, 3]<br>è¾“å‡ºï¼š2 æˆ– 3 </p>\n<p>é™åˆ¶ï¼š</p>\n<p>2 &lt;= n &lt;= 100000</p>\n</blockquote>\n<p>è§£æ³•ä¸€</p>\n<p>å“ˆå¸Œè¡¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;number[]&#125; nums</span><br><span class=\"line\"> * @return &#123;number&#125;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var findRepeatNumber &#x3D; function(nums) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; æ–°å»ºæ— é‡å¤çš„set</span><br><span class=\"line\">    let hash &#x3D; new Set();</span><br><span class=\"line\">    for(let i &#x3D; 0; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">        if (hash.has(nums[i]))&#123;</span><br><span class=\"line\">            return nums[i];</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            hash.add(nums[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return null;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>è§£æ³•äºŒ</p>\n<p>ç½®æ¢</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;number[]&#125; nums</span><br><span class=\"line\"> * @return &#123;number&#125;</span><br><span class=\"line\"> * ç½®æ¢æ³•</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var findRepeatNumber &#x3D; function(nums) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; éå†å…ƒç´ </span><br><span class=\"line\">    for (let i &#x3D; 0; i &lt; nums.length; i++ ) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F;   å½“å‰æ•°å­—</span><br><span class=\"line\">        let cur &#x3D; nums[i];</span><br><span class=\"line\">        &#x2F;&#x2F; å½“å‰ä½ç½®æ˜¯å¦æ˜¯è‡ªèº«å¯èƒ½å·²ç»æ’è¡Œ</span><br><span class=\"line\">        if (cur !&#x3D;&#x3D; i) &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; å½“å‰ä½ç½®çš„æ•°æ”¾åœ¨åŸæ¥çš„ç´¢å¼•çš„ä½ç½®ä¸Š</span><br><span class=\"line\">            if (cur !&#x3D;&#x3D; nums[cur]) &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; æš‚æ—¶å­˜å‚¨</span><br><span class=\"line\">                let temp &#x3D; nums[cur];</span><br><span class=\"line\">                nums[cur] &#x3D; cur;</span><br><span class=\"line\">                cur &#x3D; temp;</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                return cur;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾\"><a href=\"#04-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾\" class=\"headerlink\" title=\"04. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾\"></a>04. <a href=\"https://leetcode-cn.com/problems/er-wei-shu-zu-zhong-de-cha-zhao-lcof/\">äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</a></h4><p>åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚</p>\n<p>ç¤ºä¾‹:</p>\n<p>ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>[<br>  [1,   4,  7, 11, 15],<br>  [2,   5,  8, 12, 19],<br>  [3,   6,  9, 16, 22],<br>  [10, 13, 14, 17, 24],<br>  [18, 21, 23, 26, 30]<br>]</p>\n</blockquote>\n<p>ç»™å®š target = 5ï¼Œè¿”å› trueã€‚</p>\n<p>ç»™å®š target = 20ï¼Œè¿”å› falseã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;number[][]&#125; matrix</span><br><span class=\"line\"> * @param &#123;number&#125; target</span><br><span class=\"line\"> * @return &#123;boolean&#125;&#x2F;**</span><br><span class=\"line\"> * @param &#123;number[][]&#125; matrix</span><br><span class=\"line\"> * @param &#123;number&#125; target</span><br><span class=\"line\"> * @return &#123;boolean&#125;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var findNumberIn2DArray &#x3D; function(matrix, target) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; æ’é™¤é•¿æˆ–å®½ä¸º0</span><br><span class=\"line\">    if (matrix &#x3D;&#x3D; null || matrix.length &#x3D;&#x3D; 0 || matrix[0].length &#x3D;&#x3D; 0) return false;</span><br><span class=\"line\">    &#x2F;&#x2F; é•¿</span><br><span class=\"line\">    let lenX &#x3D; matrix.length;</span><br><span class=\"line\">    &#x2F;&#x2F; å®½</span><br><span class=\"line\">    let lenY &#x3D; matrix[0].length;</span><br><span class=\"line\">    &#x2F;&#x2F; è¡ŒæŒ‡é’ˆå’Œåˆ—æŒ‡é’ˆ</span><br><span class=\"line\">    let x &#x3D; 0, y &#x3D; lenY - 1;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¸è¶Šç•Œ</span><br><span class=\"line\">    while(x &lt; lenX &amp;&amp; y &gt;&#x3D; 0)&#123;</span><br><span class=\"line\">        if (matrix[x][y] &#x3D;&#x3D; target)&#123;</span><br><span class=\"line\">            &#x2F;&#x2F; æ‰¾åˆ°ç›®æ ‡</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        &#125; else if (matrix[x][y] &gt; target)&#123;</span><br><span class=\"line\">            &#x2F;&#x2F; å¤§äºç›®æ ‡åˆ—æŒ‡é’ˆå‡å°</span><br><span class=\"line\">            y--;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; å°äºç›®æ ‡è¡ŒæŒ‡é’ˆå¢åŠ </span><br><span class=\"line\">            x++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; è¶Šç•Œè¯´æ˜æ‰¾ä¸åˆ°</span><br><span class=\"line\">    return false;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"05-æ›¿æ¢ç©ºæ ¼\"><a href=\"#05-æ›¿æ¢ç©ºæ ¼\" class=\"headerlink\" title=\"05. æ›¿æ¢ç©ºæ ¼\"></a><a href=\"https://leetcode-cn.com/problems/ti-huan-kong-ge-lcof/\">05. æ›¿æ¢ç©ºæ ¼</a></h4><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€%20â€ã€‚</p>\n<p>ç¤ºä¾‹ 1ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼šs = â€œWe are happy.â€<br>è¾“å‡ºï¼šâ€We%20are%20happy.â€</p>\n</blockquote>\n<p>é™åˆ¶ï¼š</p>\n<blockquote>\n<p>0 &lt;= s çš„é•¿åº¦ &lt;= 10000</p>\n</blockquote>\n<p>æ­£åˆ™</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;string&#125; s</span><br><span class=\"line\"> * @return &#123;string&#125;</span><br><span class=\"line\"> * æ­£åˆ™è¡¨è¾¾å¼</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var replaceSpace &#x3D; function(s) &#123;</span><br><span class=\"line\">    return s.replace(&#x2F;\\s&#x2F;g, &quot;%20&quot;)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>åº“å‡½æ•°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;string&#125; s</span><br><span class=\"line\"> * @return &#123;string&#125;</span><br><span class=\"line\"> * åº“å‡½æ•°</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var replaceSpace &#x3D; function(s) &#123;</span><br><span class=\"line\">    return s.split(&#39; &#39;).join(&#39;%20&#39;)</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"ä¸“é¢˜éƒ¨åˆ†\"><a href=\"#ä¸“é¢˜éƒ¨åˆ†\" class=\"headerlink\" title=\"ä¸“é¢˜éƒ¨åˆ†\"></a>ä¸“é¢˜éƒ¨åˆ†</h1><h2 id=\"ä¸€ã€è´ªå¿ƒç®—æ³•\"><a href=\"#ä¸€ã€è´ªå¿ƒç®—æ³•\" class=\"headerlink\" title=\"ä¸€ã€è´ªå¿ƒç®—æ³•\"></a>ä¸€ã€è´ªå¿ƒç®—æ³•</h2><p>è´ªå¿ƒæ€æƒ³ä¿è¯æ¯æ¬¡æ“ä½œéƒ½æ˜¯å±€éƒ¨æœ€ä¼˜çš„ï¼Œå¹¶ä¸”æœ€åå¾—åˆ°çš„ç»“æœæ˜¯å…¨å±€æœ€ä¼˜çš„ã€‚</p>\n<h3 id=\"455-åˆ†å‘é¥¼å¹²\"><a href=\"#455-åˆ†å‘é¥¼å¹²\" class=\"headerlink\" title=\"455. åˆ†å‘é¥¼å¹²\"></a><a href=\"https://leetcode-cn.com/problems/assign-cookies/\">455. åˆ†å‘é¥¼å¹²</a></h3><p>é¢˜ç›®æè¿°ï¼šæ¯ä¸ªå­©å­éƒ½æœ‰ä¸€ä¸ªæ»¡è¶³åº¦ï¼Œæ¯ä¸ªé¥¼å¹²éƒ½æœ‰ä¸€ä¸ªå¤§å°ï¼Œåªæœ‰é¥¼å¹²çš„å¤§å°å¤§äºç­‰äºä¸€ä¸ªå­©å­çš„æ»¡è¶³åº¦ï¼Œè¯¥å­©å­æ‰ä¼šè·å¾—æ»¡è¶³ã€‚æ±‚è§£æœ€å¤šå¯ä»¥è·å¾—æ»¡è¶³çš„å­©å­æ•°é‡ã€‚</p>\n<p>å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚</p>\n<p>å¯¹æ¯ä¸ªå­©å­ iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ g[i]ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹² jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ s[j] ã€‚å¦‚æœ s[j] &gt;= g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² j åˆ†é…ç»™å­©å­ i ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³è¶Šå¤šæ•°é‡çš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚</p>\n<p>ç¤ºä¾‹ 1:</p>\n<blockquote>\n<p>è¾“å…¥: g = [1,2,3], s = [1,1]<br>è¾“å‡º: 1<br>è§£é‡Š:<br>ä½ æœ‰ä¸‰ä¸ªå­©å­å’Œä¸¤å—å°é¥¼å¹²ï¼Œ3ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯ï¼š1,2,3ã€‚<br>è™½ç„¶ä½ æœ‰ä¸¤å—å°é¥¼å¹²ï¼Œç”±äºä»–ä»¬çš„å°ºå¯¸éƒ½æ˜¯1ï¼Œä½ åªèƒ½è®©èƒƒå£å€¼æ˜¯1çš„å­©å­æ»¡è¶³ã€‚<br>æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º1ã€‚</p>\n</blockquote>\n<p>ç¤ºä¾‹ 2:</p>\n<blockquote>\n<p>è¾“å…¥: g = [1,2], s = [1,2,3]<br>è¾“å‡º: 2<br>è§£é‡Š:<br>ä½ æœ‰ä¸¤ä¸ªå­©å­å’Œä¸‰å—å°é¥¼å¹²ï¼Œ2ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯1,2ã€‚<br>ä½ æ‹¥æœ‰çš„é¥¼å¹²æ•°é‡å’Œå°ºå¯¸éƒ½è¶³ä»¥è®©æ‰€æœ‰å­©å­æ»¡è¶³ã€‚<br>æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º2.</p>\n</blockquote>\n<p>å› ä¸ºæœ€å°çš„å­©å­æœ€å®¹æ˜“å¾—åˆ°æ»¡è¶³ï¼Œå› æ­¤å…ˆæ»¡è¶³æœ€å°å­©å­ã€‚ç»™ä¸€ä¸ªå­©å­çš„é¥¼å¹²åº”å½“å°½é‡å°åˆèƒ½æ»¡è¶³è¯¥å­©å­ï¼Œè¿™æ ·å¤§é¥¼å¹²å°±èƒ½æ‹¿æ¥ç»™æ»¡è¶³åº¦æ¯”è¾ƒå¤§çš„å­©å­ã€‚å› æ­¤è´ªå¿ƒç­–ç•¥</p>\n<p>è¯æ˜ï¼šå‡è®¾åœ¨æŸæ¬¡é€‰æ‹©ä¸­ï¼Œè´ªå¿ƒç­–ç•¥é€‰æ‹©ç»™å½“å‰æ»¡è¶³åº¦æœ€å°çš„å­©å­åˆ†é…ç¬¬ m ä¸ªé¥¼å¹²ï¼Œç¬¬ m ä¸ªé¥¼å¹²ä¸ºå¯ä»¥æ»¡è¶³è¯¥å­©å­çš„æœ€å°é¥¼å¹²ã€‚å‡è®¾å­˜åœ¨ä¸€ç§æœ€ä¼˜ç­–ç•¥ï¼Œç»™è¯¥å­©å­åˆ†é…ç¬¬ n ä¸ªé¥¼å¹²ï¼Œå¹¶ä¸” m &lt; nã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œç»è¿‡è¿™ä¸€è½®åˆ†é…ï¼Œè´ªå¿ƒç­–ç•¥åˆ†é…åå‰©ä¸‹çš„é¥¼å¹²ä¸€å®šæœ‰ä¸€ä¸ªæ¯”æœ€ä¼˜ç­–ç•¥æ¥å¾—å¤§ã€‚å› æ­¤åœ¨åç»­çš„åˆ†é…ä¸­ï¼Œè´ªå¿ƒç­–ç•¥ä¸€å®šèƒ½æ»¡è¶³æ›´å¤šçš„å­©å­ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸å­˜åœ¨æ¯”è´ªå¿ƒç­–ç•¥æ›´ä¼˜çš„ç­–ç•¥ï¼Œå³è´ªå¿ƒç­–ç•¥å°±æ˜¯æœ€ä¼˜ç­–ç•¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number[]&#125;</span> <span class=\"variable\">g</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number[]&#125;</span> <span class=\"variable\">s</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * è´ªå¿ƒç®—æ³•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> findContentChildren = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">g, s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‰å­©å­è¦æ±‚å…ˆæ’åº</span></span><br><span class=\"line\">    g.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a - b);</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‰é¥¼å¹²å°ºå¯¸å…ˆæ’åº</span></span><br><span class=\"line\">    s.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a - b);</span><br><span class=\"line\">    <span class=\"comment\">// å­©å­ä»å°åˆ°å¤§ç¼–å·</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> child = <span class=\"number\">0</span>, cookie = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ä¿è¯å¾ªç¯</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (child &lt; g.length &amp;&amp; cookie &lt; s.length) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è´ªå¿ƒé€‰æ‹©ç»™å‰©ä½™å­©å­é‡Œæœ€å°é¥¥é¥¿åº¦çš„å­©å­åˆ†é…æœ€å°çš„èƒ½é¥±è…¹çš„é¥¼å¹²</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (g[child] &lt;= s[cookie]) child++;</span><br><span class=\"line\">        <span class=\"comment\">// é¥¼å¹²æ•°+1</span></span><br><span class=\"line\">        cookie++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> child;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"135-åˆ†å‘ç³–æœ\"><a href=\"#135-åˆ†å‘ç³–æœ\" class=\"headerlink\" title=\"135. åˆ†å‘ç³–æœ\"></a><strong><a href=\"https://leetcode-cn.com/problems/candy/\">135. åˆ†å‘ç³–æœ</a></strong></h3><p>æ¯ä¸ªå­©å­æœ‰ä¸€ä¸ªè¯„åˆ†ï¼Œå¦‚æœè¯„åˆ†é«˜äºæ—è¾¹çš„å­©å­ï¼Œåˆ™è¢«åˆ†é…çš„ç³–æœæ•°é‡ä¹Ÿå¿…é¡»æ›´å¤šï¼Œæ±‚æœ€å°‘æ€»ç³–æœæ•°é‡ï¼Œä½¿å¾—æ¯ä¸ªå­©å­éƒ½æœ‰ç³–æœã€‚</p>\n<p>è€å¸ˆæƒ³ç»™å­©å­ä»¬åˆ†å‘ç³–æœï¼Œæœ‰ N ä¸ªå­©å­ç«™æˆäº†ä¸€æ¡ç›´çº¿ï¼Œè€å¸ˆä¼šæ ¹æ®æ¯ä¸ªå­©å­çš„è¡¨ç°ï¼Œé¢„å…ˆç»™ä»–ä»¬è¯„åˆ†ã€‚</p>\n<p>ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œå¸®åŠ©è€å¸ˆç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š</p>\n<p>æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚<br>è¯„åˆ†æ›´é«˜çš„å­©å­å¿…é¡»æ¯”ä»–ä¸¤ä¾§çš„é‚»ä½å­©å­è·å¾—æ›´å¤šçš„ç³–æœã€‚<br>é‚£ä¹ˆè¿™æ ·ä¸‹æ¥ï¼Œè€å¸ˆè‡³å°‘éœ€è¦å‡†å¤‡å¤šå°‘é¢—ç³–æœå‘¢ï¼Ÿ</p>\n<p>ç¤ºä¾‹ 1ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼š[1,0,2]<br>è¾“å‡ºï¼š5<br>è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™è¿™ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚</p>\n</blockquote>\n<p>ç¤ºä¾‹ 2ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼š[1,2,2]<br>è¾“å‡ºï¼š4<br>è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™è¿™ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚<br>     ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™å·²æ»¡è¶³ä¸Šè¿°ä¸¤ä¸ªæ¡ä»¶ã€‚</p>\n</blockquote>\n<p>è´ªå¿ƒç­–ç•¥ï¼Œä»å·¦å¾€å³å’Œä»å³å¾€å·¦å„éå†ä¸€éã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number[]&#125;</span> <span class=\"variable\">ratings</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * è´ªå¿ƒç®—æ³•</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¸¤æ¬¡éå†</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> candy = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ratings</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> len = ratings.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (len &lt; <span class=\"number\">2</span>) <span class=\"keyword\">return</span> len;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>(len).fill(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å…ˆä»å·¦å¾€å³éå†ä¸€éï¼Œå¦‚æœå³è¾¹å­©å­çš„è¯„åˆ†æ¯”å·¦è¾¹çš„é«˜ï¼Œåˆ™å³è¾¹å­©å­çš„ç³–æœæ•°æ›´æ–°ä¸ºå·¦è¾¹å­©å­çš„ç³–æœæ•°åŠ 1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ratings[i] &gt; ratings[i - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            num[i] = num[i - <span class=\"number\">1</span>] + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = len - <span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å†ä»å³å¾€å·¦éå†ä¸€éï¼Œå¦‚æœå·¦è¾¹å­©å­çš„è¯„åˆ†æ¯”å³è¾¹çš„é«˜ï¼Œä¸”å·¦è¾¹å­©å­å½“å‰çš„ç³–æœæ•°ä¸å¤§äºå³è¾¹å­©å­çš„ç³–æœæ•°ï¼Œåˆ™å·¦è¾¹å­©å­çš„ç³–æœæ•°æ›´æ–°ä¸ºå³è¾¹å­©å­çš„ç³–æœæ•°åŠ 1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ratings[i] &lt; ratings[i - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            num[i - <span class=\"number\">1</span>] = <span class=\"built_in\">Math</span>.max(num[i - <span class=\"number\">1</span>], num[i] + <span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ±‚å’Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> num.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"435-æ— é‡å åŒºé—´\"><a href=\"#435-æ— é‡å åŒºé—´\" class=\"headerlink\" title=\"435. æ— é‡å åŒºé—´\"></a><strong><a href=\"https://leetcode-cn.com/problems/non-overlapping-intervals/\">435. æ— é‡å åŒºé—´</a></strong></h3><p>ç»™å®šä¸€ä¸ªåŒºé—´çš„é›†åˆï¼Œæ‰¾åˆ°éœ€è¦ç§»é™¤åŒºé—´çš„æœ€å°æ•°é‡ï¼Œä½¿å‰©ä½™åŒºé—´äº’ä¸é‡å ã€‚</p>\n<p>æ³¨æ„:</p>\n<p>å¯ä»¥è®¤ä¸ºåŒºé—´çš„ç»ˆç‚¹æ€»æ˜¯å¤§äºå®ƒçš„èµ·ç‚¹ã€‚<br>åŒºé—´ [1,2] å’Œ [2,3] çš„è¾¹ç•Œç›¸äº’â€œæ¥è§¦â€ï¼Œä½†æ²¡æœ‰ç›¸äº’é‡å ã€‚<br>ç¤ºä¾‹ 1:</p>\n<blockquote>\n<p>è¾“å…¥: [ [1,2], [2,3], [3,4], [1,3] ]</p>\n<p>è¾“å‡º: 1</p>\n</blockquote>\n<p>è§£é‡Š: ç§»é™¤ [1,3] åï¼Œå‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚<br>ç¤ºä¾‹ 2:</p>\n<blockquote>\n<p>è¾“å…¥: [ [1,2], [1,2], [1,2] ]</p>\n<p>è¾“å‡º: 2</p>\n</blockquote>\n<p>è§£é‡Š: ä½ éœ€è¦ç§»é™¤ä¸¤ä¸ª [1,2] æ¥ä½¿å‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚<br>ç¤ºä¾‹ 3:</p>\n<blockquote>\n<p>è¾“å…¥: [ [1,2], [2,3] ]</p>\n<p>è¾“å‡º: 0</p>\n</blockquote>\n<p>è§£é‡Š: ä½ ä¸éœ€è¦ç§»é™¤ä»»ä½•åŒºé—´ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ˜¯æ— é‡å çš„äº†ã€‚</p>\n<p>é¢˜ç›®æè¿°ï¼šè®¡ç®—è®©ä¸€ç»„åŒºé—´ä¸é‡å æ‰€éœ€è¦ç§»é™¤çš„åŒºé—´ä¸ªæ•°ã€‚</p>\n<p>è®¡ç®—æœ€å¤šèƒ½ç»„æˆçš„ä¸é‡å åŒºé—´ä¸ªæ•°ï¼Œç„¶åç”¨åŒºé—´æ€»ä¸ªæ•°å‡å»ä¸é‡å åŒºé—´çš„ä¸ªæ•°ã€‚</p>\n<p>åœ¨æ¯æ¬¡é€‰æ‹©ä¸­ï¼ŒåŒºé—´çš„ç»“å°¾æœ€ä¸ºé‡è¦ï¼Œé€‰æ‹©çš„åŒºé—´ç»“å°¾è¶Šå°ï¼Œç•™ç»™åé¢çš„åŒºé—´çš„ç©ºé—´è¶Šå¤§ï¼Œé‚£ä¹ˆåé¢èƒ½å¤Ÿé€‰æ‹©çš„åŒºé—´ä¸ªæ•°ä¹Ÿå°±è¶Šå¤§ã€‚</p>\n<p>æŒ‰åŒºé—´çš„ç»“å°¾è¿›è¡Œæ’åºï¼Œæ¯æ¬¡é€‰æ‹©ç»“å°¾æœ€å°ï¼Œå¹¶ä¸”å’Œå‰ä¸€ä¸ªåŒºé—´ä¸é‡å çš„åŒºé—´ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number[][]&#125;</span> <span class=\"variable\">intervals</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * è´ªå¿ƒç®—æ³•</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> eraseOverlapIntervals = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">intervals</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// åºåˆ—é•¿åº¦</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> n = intervals.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">1</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‰ end å‡åºæ’åº</span></span><br><span class=\"line\">    intervals.sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a[<span class=\"number\">1</span>] - b[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"comment\">// åˆå§‹åŒ–åˆ é™¤åŒºé—´æ•°ä¸º0</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ’åºåï¼Œåˆå§‹åŒ–åŒºé—´å°¾ä¸ºæœ€å°å€¼</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> x_end = intervals[<span class=\"number\">0</span>][<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">for</span>(<span class=\"params\"><span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; n; i++</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰å¼€å¤´å°äºç»“å°¾ï¼Œéœ€è¦åˆ é™¤</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (intervals[i][<span class=\"number\">0</span>] &lt; x_end) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// éœ€è¦åˆ é™¤è¯¥é¡¹</span></span><br><span class=\"line\">            count++;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ‰¾åˆ°ä¸‹ä¸€ä¸ªé€‰æ‹©çš„åŒºé—´ç»“å°¾</span></span><br><span class=\"line\">            x_end = intervals[i][<span class=\"number\">1</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> count;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"678-æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²\"><a href=\"#678-æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²\"></a><a href=\"https://leetcode-cn.com/problems/valid-parenthesis-string/\">678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²</a></h3><p>ç»™å®šä¸€ä¸ªåªåŒ…å«ä¸‰ç§å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼šï¼ˆ ï¼Œï¼‰ å’Œ *ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²ã€‚æœ‰æ•ˆå­—ç¬¦ä¸²å…·æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<p>ä»»ä½•å·¦æ‹¬å· ( å¿…é¡»æœ‰ç›¸åº”çš„å³æ‹¬å· )ã€‚<br>ä»»ä½•å³æ‹¬å· ) å¿…é¡»æœ‰ç›¸åº”çš„å·¦æ‹¬å· ( ã€‚<br>å·¦æ‹¬å· ( å¿…é¡»åœ¨å¯¹åº”çš„å³æ‹¬å·ä¹‹å‰ )ã€‚</p>\n<p>å¯ä»¥è¢«è§†ä¸ºå•ä¸ªå³æ‹¬å· ) ï¼Œæˆ–å•ä¸ªå·¦æ‹¬å· ( ï¼Œæˆ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚<br>ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä¹Ÿè¢«è§†ä¸ºæœ‰æ•ˆå­—ç¬¦ä¸²</p>\n<p>ç¤ºä¾‹ 1:</p>\n<blockquote>\n<p>è¾“å…¥: â€œ()â€<br>è¾“å‡º: True</p>\n</blockquote>\n<p>ç¤ºä¾‹ 2:</p>\n<blockquote>\n<p>è¾“å…¥: â€œ(*)â€<br>è¾“å‡º: True</p>\n</blockquote>\n<p>ç¤ºä¾‹ 3:</p>\n<blockquote>\n<p>è¾“å…¥: â€œ(*))â€<br>è¾“å‡º: True</p>\n</blockquote>\n<p>è´ªå¿ƒå°†ï¼ˆå‡ºæ ˆï¼Œä½¿ç”¨æ ˆæ¥å®ç°</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;string&#125; s</span><br><span class=\"line\"> * @return &#123;boolean&#125;</span><br><span class=\"line\"> * æ ˆ</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var checkValidString &#x3D; function(s) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¸¤ä¸ªæ ˆåˆ†åˆ«å­˜æ”¾å·¦æ‹¬å·å’Œ*</span><br><span class=\"line\">    let left &#x3D; [], star &#x3D; [];</span><br><span class=\"line\">    &#x2F;&#x2F; éå†æ•°ç»„</span><br><span class=\"line\">    for(let i &#x3D; 0; i &lt; s.length; i++)&#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å·¦æ‹¬å·ä½ç½®å…¥æ ˆ</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;(&quot;) left.push(i);</span><br><span class=\"line\">        &#x2F;&#x2F; *å·ä½ç½®å…¥æ ˆ</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;*&quot;) star.push(i);</span><br><span class=\"line\">        &#x2F;&#x2F; å³æ‹¬å·</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;)&quot;) &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; ä¼˜å…ˆå‡ºæ ˆ</span><br><span class=\"line\">            if(left.length &#x3D;&#x3D; 0)&#123;</span><br><span class=\"line\">                &#x2F;&#x2F; ä¸¤ä¸ªéƒ½æ²¡æœ‰ï¼Œå‡ºé”™</span><br><span class=\"line\">                if(star.length &#x3D;&#x3D; 0) return false;</span><br><span class=\"line\">                &#x2F;&#x2F; *å·å‡ºæ ˆ</span><br><span class=\"line\">                star.pop();</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; (å·å‡ºæ ˆ</span><br><span class=\"line\">                left.pop();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; *æ•°é‡ä¸è¶³ä»¥æŠµæ¶ˆå·¦æ‹¬å·</span><br><span class=\"line\">    if(left.length &gt; star.length) return false;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¸¤ä¸ªéƒ½æœ‰</span><br><span class=\"line\">    while(left.length &amp;&amp; star.length)&#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å·¦æ‹¬å·åœ¨*å³ä¾§</span><br><span class=\"line\">        if(left.pop() &gt; star.pop()) return false;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>éå†ä¸¤æ¬¡å®ç°æŸå¤±</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;string&#125; s</span><br><span class=\"line\"> * @return &#123;boolean&#125;</span><br><span class=\"line\"> * æ¨¡æ‹Ÿæ ˆ</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var checkValidString &#x3D; function(s) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; åˆ†åˆ«å­˜æ”¾å‰©ä½™å·¦æ‹¬å·å’Œ*æ•°é‡</span><br><span class=\"line\">    let left &#x3D; 0, star &#x3D; 0;</span><br><span class=\"line\">    &#x2F;&#x2F; éå†æ•°ç»„</span><br><span class=\"line\">    for(let i &#x3D; 0; i &lt; s.length; i++)&#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å·¦æ‹¬å·æ•°é‡+1</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;(&quot;) left++;</span><br><span class=\"line\">        &#x2F;&#x2F; *å·æ•°é‡+1</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;*&quot;) star++;</span><br><span class=\"line\">        &#x2F;&#x2F; å³æ‹¬å·</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;)&quot;) &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; ä¼˜å…ˆé€‰æ‹©å·¦æ‹¬å·</span><br><span class=\"line\">            if(left &#x3D;&#x3D; 0)&#123;</span><br><span class=\"line\">                &#x2F;&#x2F; ä¸¤ä¸ªéƒ½æ²¡æœ‰ï¼Œå‡ºé”™</span><br><span class=\"line\">                if(star &lt;&#x3D; 0) return false;</span><br><span class=\"line\">                &#x2F;&#x2F; *å·æ•°é‡-1</span><br><span class=\"line\">                star--;</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; (å·æ•°é‡-1</span><br><span class=\"line\">                left--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; å­˜æ”¾å‰©ä½™å³æ‹¬å·æ•°é‡</span><br><span class=\"line\">    let right &#x3D; 0;</span><br><span class=\"line\">    star &#x3D; 0;</span><br><span class=\"line\">    &#x2F;&#x2F; éå†æ•°ç»„</span><br><span class=\"line\">    for(let i &#x3D; s.length - 1; i &gt;&#x3D; 0; i--)&#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å³æ‹¬å·æ•°é‡-1</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;)&quot;) right++;</span><br><span class=\"line\">        &#x2F;&#x2F; *å·æ•°é‡+1</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;*&quot;) star++;</span><br><span class=\"line\">        &#x2F;&#x2F; å·¦æ‹¬å·</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; &quot;(&quot;) &#123;</span><br><span class=\"line\">            &#x2F;&#x2F; ä¼˜å…ˆé€‰æ‹©å³æ‹¬å·</span><br><span class=\"line\">            if(right &#x3D;&#x3D; 0)&#123;</span><br><span class=\"line\">                &#x2F;&#x2F; ä¸¤ä¸ªéƒ½æ²¡æœ‰ï¼Œå‡ºé”™</span><br><span class=\"line\">                if(star &lt;&#x3D; 0) return false;</span><br><span class=\"line\">                &#x2F;&#x2F; *å·æ•°é‡-1</span><br><span class=\"line\">                star--;</span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; )å·æ•°é‡-1</span><br><span class=\"line\">                right--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"406-æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—\"><a href=\"#406-æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—\" class=\"headerlink\" title=\"406. æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—\"></a><a href=\"https://leetcode-cn.com/problems/queue-reconstruction-by-height/\">406. æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—</a></h3><p>å‡è®¾æœ‰æ‰“ä¹±é¡ºåºçš„ä¸€ç¾¤äººç«™æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ•°ç»„ people è¡¨ç¤ºé˜Ÿåˆ—ä¸­ä¸€äº›äººçš„å±æ€§ï¼ˆä¸ä¸€å®šæŒ‰é¡ºåºï¼‰ã€‚æ¯ä¸ª people[i] = [hi, ki] è¡¨ç¤ºç¬¬ i ä¸ªäººçš„èº«é«˜ä¸º hi ï¼Œå‰é¢ æ­£å¥½ æœ‰ ki ä¸ªèº«é«˜å¤§äºæˆ–ç­‰äº hi çš„äººã€‚</p>\n<p>è¯·ä½ é‡æ–°æ„é€ å¹¶è¿”å›è¾“å…¥æ•°ç»„ people æ‰€è¡¨ç¤ºçš„é˜Ÿåˆ—ã€‚è¿”å›çš„é˜Ÿåˆ—åº”è¯¥æ ¼å¼åŒ–ä¸ºæ•°ç»„ queue ï¼Œå…¶ä¸­ queue[j] = [hj, kj] æ˜¯é˜Ÿåˆ—ä¸­ç¬¬ j ä¸ªäººçš„å±æ€§ï¼ˆqueue[0] æ˜¯æ’åœ¨é˜Ÿåˆ—å‰é¢çš„äººï¼‰ã€‚</p>\n<p>ç¤ºä¾‹ 1ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼špeople = [[7,0],[4,4],[7,1],[5,0],[6,1],[5,2]]<br>è¾“å‡ºï¼š[[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]</p>\n</blockquote>\n<p>è§£é‡Šï¼š<br>ç¼–å·ä¸º 0 çš„äººèº«é«˜ä¸º 5 ï¼Œæ²¡æœ‰èº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ã€‚<br>ç¼–å·ä¸º 1 çš„äººèº«é«˜ä¸º 7 ï¼Œæ²¡æœ‰èº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ã€‚<br>ç¼–å·ä¸º 2 çš„äººèº«é«˜ä¸º 5 ï¼Œæœ‰ 2 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 0 å’Œ 1 çš„äººã€‚<br>ç¼–å·ä¸º 3 çš„äººèº«é«˜ä¸º 6 ï¼Œæœ‰ 1 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 1 çš„äººã€‚<br>ç¼–å·ä¸º 4 çš„äººèº«é«˜ä¸º 4 ï¼Œæœ‰ 4 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 0ã€1ã€2ã€3 çš„äººã€‚<br>ç¼–å·ä¸º 5 çš„äººèº«é«˜ä¸º 7 ï¼Œæœ‰ 1 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 1 çš„äººã€‚<br>å› æ­¤ [[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]] æ˜¯é‡æ–°æ„é€ åçš„é˜Ÿåˆ—ã€‚<br>ç¤ºä¾‹ 2ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼špeople = [[6,0],[5,0],[4,0],[3,2],[2,2],[1,4]]<br>è¾“å‡ºï¼š[[4,0],[5,0],[2,2],[3,2],[1,4],[6,0]]</p>\n</blockquote>\n<p>æç¤ºï¼š</p>\n<p>1 &lt;= people.length &lt;= 2000<br>0 &lt;= hi &lt;= 106<br>0 &lt;= ki &lt; people.length<br>é¢˜ç›®æ•°æ®ç¡®ä¿é˜Ÿåˆ—å¯ä»¥è¢«é‡å»º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;number[][]&#125; people</span><br><span class=\"line\"> * @return &#123;number[][]&#125;</span><br><span class=\"line\"> * è´ªå¿ƒç®—æ³•</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var reconstructQueue &#x3D; function(people) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; é¦–å…ˆæŒ‰ç…§èº«é«˜hé™åºæ’åˆ—ï¼ŒåŒæ—¶å¦‚æœèº«é«˜ç›¸åŒé‚£ä¹ˆæŒ‰ç…§kå¢åºï¼Œä¸ªé«˜çš„äººå¿½ç•¥å‰é¢ä¸ªçŸ®çš„äºº</span><br><span class=\"line\">    people.sort((a, b) &#x3D;&gt; a[0] &#x3D;&#x3D;&#x3D; b[0] ? a[1] - b[1] : b[0] - a[0]);</span><br><span class=\"line\">    &#x2F;&#x2F; ç»“æœæ•°ç»„</span><br><span class=\"line\">    let res &#x3D; [];</span><br><span class=\"line\">    &#x2F;&#x2F; å…ˆå®‰æ’é«˜ä¸ªå­çš„ä½ç½®</span><br><span class=\"line\">    for (let i &#x3D; 0; i &lt; people.length; i++) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; å…ˆå®‰æ’é«˜ä¸ªå­kå°,å†å®‰æ’é«˜ä¸ªå­kå¤§çš„</span><br><span class=\"line\">        res.splice(people[i][1], 0, people[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return res;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","categories":["webå‰ç«¯"],"tags":["javascript","é¢è¯•","æ•°æ®ç»“æ„å’Œç®—æ³•"]},{"title":"jså‡½æ•°æ‰‹å†™","url":"/2020/10/18/js%E5%87%BD%E6%95%B0%E6%89%8B%E5%86%99/","content":"<p>æ‰‹å†™å¸¸è§jså‡½æ•°ï¼Œé¢è¯•å¿…å¤‡ï¼Œå¤šç»ƒå‡ éï¼Œäº‰å–æ‰‹æ’•</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-æ‰‹åŠ¨å®ç°call-apply-bind\"><a href=\"#1-æ‰‹åŠ¨å®ç°call-apply-bind\" class=\"headerlink\" title=\"1.æ‰‹åŠ¨å®ç°call,apply,bind\"></a>1.æ‰‹åŠ¨å®ç°call,apply,bind</h1><h2 id=\"æ¨¡æ‹Ÿå®ç°call\"><a href=\"#æ¨¡æ‹Ÿå®ç°call\" class=\"headerlink\" title=\"æ¨¡æ‹Ÿå®ç°call\"></a>æ¨¡æ‹Ÿå®ç°call</h2><p>1.åˆ¤æ–­å½“å‰<code>this</code>æ˜¯å¦ä¸ºå‡½æ•°ï¼Œé˜²æ­¢<code>Function.prototype.myCall()</code> ç›´æ¥è°ƒç”¨</p>\n<p>2.<code>context</code> ä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ çš„è¯é»˜è®¤ä¸Šä¸‹æ–‡ä¸º <code>window</code></p>\n<p>3.ä¸º<code>context</code> åˆ›å»ºä¸€ä¸ª <code>Symbol</code>ï¼ˆä¿è¯ä¸ä¼šé‡åï¼‰å±æ€§ï¼Œå°†å½“å‰å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå±æ€§</p>\n<p>4.å¤„ç†å‚æ•°ï¼Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°åçš„å…¶ä½™å‚æ•°</p>\n<p>r5.è°ƒç”¨å‡½æ•°åå³åˆ é™¤è¯¥<code>Symbol</code>å±æ€§</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myCall = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, ...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ç”¨äºé˜²æ­¢ Function.prototype.myCall() ç›´æ¥è°ƒç”¨</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// context = context || window;</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> fn = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\">\tcontext[fn] = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> result = context[fn](...args);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤Symbolï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span></span><br><span class=\"line\">\t<span class=\"keyword\">delete</span> context[fn];</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ¨¡æ‹Ÿå®ç°apply\"><a href=\"#æ¨¡æ‹Ÿå®ç°apply\" class=\"headerlink\" title=\"æ¨¡æ‹Ÿå®ç°apply\"></a>æ¨¡æ‹Ÿå®ç°apply</h2><p><code>apply</code>å®ç°ç±»ä¼¼<code>call</code>ï¼Œå‚æ•°ä¸ºæ•°ç»„</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myApply = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// ç”¨äºé˜²æ­¢ Function.prototype.myApply() ç›´æ¥è°ƒç”¨</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"comment\">// context = context || window;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fn = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\">    context[fn] = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">// é‡ç‚¹ä»£ç ï¼Œåˆ©ç”¨thisæŒ‡å‘ï¼Œç›¸å½“äºcontext.caller(...args)</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = context[fn](...args);</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> context[fn];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ¨¡æ‹Ÿå®ç°bind\"><a href=\"#æ¨¡æ‹Ÿå®ç°bind\" class=\"headerlink\" title=\"æ¨¡æ‹Ÿå®ç°bind\"></a>æ¨¡æ‹Ÿå®ç°bind</h2><p>1.å¤„ç†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªé—­åŒ…</p>\n<p>2.åˆ¤æ–­æ˜¯å¦ä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œå¦‚æœæ˜¯åˆ™ä½¿ç”¨<code>new</code>è°ƒç”¨å½“å‰å‡½æ•°</p>\n<p>3.å¦‚æœä¸æ˜¯ï¼Œä½¿ç”¨<code>apply</code>ï¼Œå°†<code>context</code>å’Œå¤„ç†å¥½çš„å‚æ•°ä¼ å…¥</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myBind = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, ...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> === <span class=\"built_in\">Function</span>.prototype) <span class=\"keyword\">return</span> <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> _this = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›ä¸€ä¸ªå‡½æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\">...<span class=\"built_in\">arguments</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ new F()ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span> <span class=\"keyword\">instanceof</span> F) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _this(...args, ...arguments)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _this.apply(context, args.concat(...arguments))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h2><p>è·å–å‡½æ•°ä¸­çš„å‚æ•°ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–argumentå¯¹è±¡ ç±»æ•°ç»„å¯¹è±¡ ä¸èƒ½è°ƒç”¨æ•°ç»„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;è·å–argumentå¯¹è±¡ ç±»æ•°ç»„å¯¹è±¡ ä¸èƒ½è°ƒç”¨æ•°ç»„æ–¹æ³•&#x27;</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·å–å‚æ•°æ•°ç»„  å¯ä»¥è°ƒç”¨æ•°ç»„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test2</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;è·å–å‚æ•°æ•°ç»„  å¯ä»¥è°ƒç”¨æ•°ç»„æ–¹æ³•&#x27;</span>, args);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·å–é™¤ç¬¬ä¸€ä¸ªå‚æ•°çš„å‰©ä½™å‚æ•°æ•°ç»„</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test3</span>(<span class=\"params\">first, ...args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;è·å–argumentå¯¹è±¡ ç±»æ•°ç»„å¯¹è±¡ ä¸èƒ½è°ƒç”¨æ•°ç»„æ–¹æ³•&#x27;</span>, args);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é€ä¼ å‚æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test4</span>(<span class=\"params\">first, ...args</span>) </span>&#123;</span><br><span class=\"line\">    fn(...args);</span><br><span class=\"line\">    fn(...arguments);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;é€ä¼ &#x27;</span>, ...arguments);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test1(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">test2(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">test3(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">test4(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"2-è§‚å¯Ÿè€…æ¨¡å¼\"><a href=\"#2-è§‚å¯Ÿè€…æ¨¡å¼\" class=\"headerlink\" title=\"2.è§‚å¯Ÿè€…æ¨¡å¼\"></a>2.è§‚å¯Ÿè€…æ¨¡å¼</h1><h2 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h2><ul>\n<li>å¯ä»¥å¹¿æ³›åº”ç”¨äºå¼‚æ­¥ç¼–ç¨‹ï¼Œå®ƒå¯ä»¥ä»£æ›¿æˆ‘ä»¬ä¼ ç»Ÿçš„å›è°ƒå‡½æ•°</li>\n<li>æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨å¯¹è±¡åœ¨å¼‚æ­¥æ‰§è¡Œé˜¶æ®µçš„å†…éƒ¨çŠ¶æ€ï¼Œæˆ‘ä»¬åªå…³å¿ƒäº‹ä»¶å®Œæˆçš„æ—¶é—´ç‚¹</li>\n<li>å–ä»£å¯¹è±¡ä¹‹é—´ç¡¬ç¼–ç é€šçŸ¥æœºåˆ¶ï¼Œä¸€ä¸ªå¯¹è±¡ä¸å¿…æ˜¾å¼è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡çš„æ¥å£ï¼Œè€Œæ˜¯æ¾è€¦åˆçš„è”ç³»åœ¨ä¸€èµ· ã€‚</li>\n<li>è™½ç„¶ä¸çŸ¥é“å½¼æ­¤çš„ç»†èŠ‚ï¼Œä½†ä¸å½±å“ç›¸äº’é€šä¿¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚</li>\n</ul>\n<h2 id=\"Nodejsçš„EventEmitter\"><a href=\"#Nodejsçš„EventEmitter\" class=\"headerlink\" title=\"Nodejsçš„EventEmitter\"></a>Nodejsçš„EventEmitter</h2><p><code>Nodejs</code>çš„<code>EventEmitter</code>å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å…¸å‹å®ç°ï¼Œ<code>Nodejs</code>çš„<code>events</code>æ¨¡å—åªæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š <code>events.EventEmitter``ã€‚EventEmitter</code> çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚</p>\n<blockquote>\n<p>Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚</p>\n</blockquote>\n<h2 id=\"Api\"><a href=\"#Api\" class=\"headerlink\" title=\"Api\"></a>Api</h2><p><strong>addListener(event, listener)</strong></p>\n<p>ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œé»˜è®¤æ·»åŠ åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚</p>\n<p><strong>removeListener(event, listener)</strong></p>\n<p>ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯äº‹ä»¶åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°åç§°ã€‚</p>\n<p><strong>setMaxListeners(n)</strong></p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚ setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ã€‚</p>\n<p><strong>once(event, listener)</strong></p>\n<p>ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ã€‚</p>\n<p><strong>emit(event, [arg1], [arg2], [â€¦])</strong></p>\n<p>æŒ‰ç›‘å¬å™¨çš„é¡ºåºæ‰§è¡Œæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p>\n<h2 id=\"åŸºæœ¬ä½¿ç”¨\"><a href=\"#åŸºæœ¬ä½¿ç”¨\" class=\"headerlink\" title=\"åŸºæœ¬ä½¿ç”¨\"></a>åŸºæœ¬ä½¿ç”¨</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> events = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;events&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> eventEmitter = <span class=\"keyword\">new</span> events.EventEmitter();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›‘å¬å™¨ #1</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> listener1 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">listener1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›‘å¬å™¨ #2</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> listener2 = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">listener2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 </span></span><br><span class=\"line\">eventEmitter.addListener(<span class=\"string\">&#x27;connection&#x27;</span>, listener1);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç»‘å®š connection äº‹ä»¶ï¼Œè°ƒç”¨ä¸€æ¬¡ï¼Œå¤„ç†å‡½æ•°ä¸º listener2</span></span><br><span class=\"line\">eventEmitter.once(<span class=\"string\">&#x27;connection&#x27;</span>, listener2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç† connection äº‹ä»¶ </span></span><br><span class=\"line\">eventEmitter.emit(<span class=\"string\">&#x27;connection&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç† connection äº‹ä»¶ </span></span><br><span class=\"line\">eventEmitter.emit(<span class=\"string\">&#x27;connection&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ‰‹åŠ¨å®ç°EventEmitter\"><a href=\"#æ‰‹åŠ¨å®ç°EventEmitter\" class=\"headerlink\" title=\"æ‰‹åŠ¨å®ç°EventEmitter\"></a>æ‰‹åŠ¨å®ç°EventEmitter</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">EventEmitter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._maxListeners = <span class=\"number\">10</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å‘äº‹ä»¶é˜Ÿåˆ—æ·»åŠ äº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">// prependä¸ºtrueè¡¨ç¤ºå‘äº‹ä»¶é˜Ÿåˆ—å¤´éƒ¨æ·»åŠ äº‹ä»¶</span></span><br><span class=\"line\">EventEmitter.prototype.addListener = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type, listener, prepend</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>._events) &#123;</span><br><span class=\"line\">    \t<span class=\"built_in\">this</span>._events = <span class=\"built_in\">Object</span>.create(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>._events[type]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (prepend) &#123;</span><br><span class=\"line\">        \t<span class=\"built_in\">this</span>._events[type].unshift(listener);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._events[type].push(listener);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    \t<span class=\"built_in\">this</span>._events[type] = [listener];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç§»é™¤æŸä¸ªäº‹ä»¶</span></span><br><span class=\"line\">EventEmitter.prototype.removeListener = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type, listener</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">this</span>._events[type])) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!listener) &#123;</span><br><span class=\"line\">        \t<span class=\"keyword\">delete</span> <span class=\"built_in\">this</span>._events[type]</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        \t<span class=\"built_in\">this</span>._events[type] = <span class=\"built_in\">this</span>._events[type].filter(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> e !== listener &amp;&amp; e.origin !== listener)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å‘äº‹ä»¶é˜Ÿåˆ—æ·»åŠ äº‹ä»¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class=\"line\">EventEmitter.prototype.once = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type, listener</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> only = <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        listener.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.removeListener(type, listener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    only.origin = listener;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.addListener(type, only);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ‰§è¡ŒæŸç±»äº‹ä»¶</span></span><br><span class=\"line\">EventEmitter.prototype.emit = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type, ...args</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(<span class=\"built_in\">this</span>._events[type])) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._events[type].forEach(<span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> &#123;</span><br><span class=\"line\">        \tfn.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æœ€å¤§äº‹ä»¶ç›‘å¬ä¸ªæ•°</span></span><br><span class=\"line\">EventEmitter.prototype.setMaxListeners = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">count</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">this</span>.maxListeners = count;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>æµ‹è¯•ä»£ç ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> emitter = <span class=\"keyword\">new</span> EventEmitter();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> onceListener = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æˆ‘åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡&#x27;</span>, args, <span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> listener = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">args</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æˆ‘æ˜¯ä¸€ä¸ªlistener&#x27;</span>, args, <span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">emitter.once(<span class=\"string\">&#x27;click&#x27;</span>, onceListener);</span><br><span class=\"line\">emitter.addListener(<span class=\"string\">&#x27;click&#x27;</span>, listener);</span><br><span class=\"line\"></span><br><span class=\"line\">emitter.emit(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"string\">&#x27;å‚æ•°&#x27;</span>);</span><br><span class=\"line\">emitter.emit(<span class=\"string\">&#x27;click&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">emitter.removeListener(<span class=\"string\">&#x27;click&#x27;</span>, listener);</span><br><span class=\"line\">emitter.emit(<span class=\"string\">&#x27;click&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"JavaScriptè‡ªå®šä¹‰äº‹ä»¶\"><a href=\"#JavaScriptè‡ªå®šä¹‰äº‹ä»¶\" class=\"headerlink\" title=\"JavaScriptè‡ªå®šä¹‰äº‹ä»¶\"></a>JavaScriptè‡ªå®šä¹‰äº‹ä»¶</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//1ã€åˆ›å»ºäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myEvent = <span class=\"keyword\">new</span> Event(<span class=\"string\">&quot;myEvent&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//2ã€æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨</span></span><br><span class=\"line\">elem.addEventListener(<span class=\"string\">&quot;myEvent&quot;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//3ã€è§¦å‘äº‹ä»¶</span></span><br><span class=\"line\">elem.dispatchEvent(myEvent);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-é˜²æŠ–-debounce\"><a href=\"#3-é˜²æŠ–-debounce\" class=\"headerlink\" title=\"3.é˜²æŠ–(debounce)\"></a>3.é˜²æŠ–(debounce)</h1><h2 id=\"åŸç†\"><a href=\"#åŸç†\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><p>ä¸ç®¡äº‹ä»¶è§¦å‘é¢‘ç‡å¤šé«˜ï¼Œä¸€å®šåœ¨äº‹ä»¶è§¦å‘<code>n</code>ç§’åæ‰æ‰§è¡Œï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ <code>n</code> ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œ<code>n</code>ç§’åæ‰æ‰§è¡Œï¼Œæ€»ä¹‹ï¼Œè§¦å‘å®Œäº‹ä»¶ <code>n</code> ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œ<code>n</code>ç§’åå†æ‰§è¡Œã€‚</p>\n<h2 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span></span><br><span class=\"line\"><span class=\"comment\">// waitæ˜¯ç­‰å¾…æ—¶é—´</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait = <span class=\"number\">50</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨id</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> timer = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œè¿”å›çš„å‡½æ•°æ˜¯æ¯æ¬¡ç”¨æˆ·å®é™…è°ƒç”¨çš„é˜²æŠ–å‡½æ•°</span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨äº†å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span></span><br><span class=\"line\">    <span class=\"comment\">// å¼€å§‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (timer) <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">            func.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">        &#125;, wait)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>\n<blockquote>\n<p>æŒ‰é’®æäº¤åœºæ™¯ï¼šé˜²æ­¢å¤šæ¬¡æäº¤æŒ‰é’®ï¼Œåªæ‰§è¡Œæœ€åæäº¤çš„ä¸€æ¬¡ æœåŠ¡ç«¯éªŒè¯åœºæ™¯ï¼šè¡¨å•éªŒè¯éœ€è¦æœåŠ¡ç«¯é…åˆï¼Œåªæ‰§è¡Œä¸€æ®µè¿ç»­çš„è¾“å…¥äº‹ä»¶çš„æœ€åä¸€æ¬¡ï¼Œè¿˜æœ‰æœç´¢è”æƒ³è¯åŠŸèƒ½ç±»ä¼¼</p>\n</blockquote>\n<h1 id=\"4-èŠ‚æµ-throttle\"><a href=\"#4-èŠ‚æµ-throttle\" class=\"headerlink\" title=\"4.èŠ‚æµ(throttle)\"></a>4.èŠ‚æµ(throttle)</h1><h2 id=\"åŸç†-1\"><a href=\"#åŸç†-1\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><p>è§„å®šåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå•ä½æ—¶é—´å†…è§¦å‘å¤šæ¬¡å‡½æ•°ï¼Œåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ</p>\n<h2 id=\"ä»£ç -1\"><a href=\"#ä»£ç -1\" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span></span><br><span class=\"line\"><span class=\"comment\">// waitæ˜¯ç­‰å¾…æ—¶é—´</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, wait = <span class=\"number\">50</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸Šä¸€æ¬¡æ‰§è¡Œè¯¥å‡½æ•°çš„æ—¶é—´</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> lastTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰æ—¶é—´</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> now = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">        <span class=\"comment\">// å°†å½“å‰æ—¶é—´å’Œä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶é—´å¯¹æ¯”</span></span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœå·®å€¼å¤§äºè®¾ç½®çš„ç­‰å¾…æ—¶é—´å°±æ‰§è¡Œå‡½æ•°</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (now - lastTime &gt; wait) &#123;</span><br><span class=\"line\">            lastTime = now;</span><br><span class=\"line\">            func.apply(<span class=\"built_in\">this</span>, args)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ–¹æ³•ï¼šå®šæ—¶å™¨</span></span><br><span class=\"line\"><span class=\"built_in\">setInterval</span>(</span><br><span class=\"line\">    throttle(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;, <span class=\"number\">500</span>),</span><br><span class=\"line\">    <span class=\"number\">1</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>\n<blockquote>\n<ul>\n<li>æ‹–æ‹½åœºæ™¯ï¼šå›ºå®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ï¼Œé˜²æ­¢è¶…é«˜é¢‘æ¬¡è§¦å‘ä½ç½®å˜åŠ¨</li>\n<li>ç¼©æ”¾åœºæ™¯ï¼šç›‘æ§æµè§ˆå™¨<code>resize</code></li>\n<li>åŠ¨ç”»åœºæ™¯ï¼šé¿å…çŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘åŠ¨ç”»å¼•èµ·æ€§èƒ½é—®é¢˜</li>\n</ul>\n</blockquote>\n<h1 id=\"5-æµ…æ‹·è´å’Œæ·±æ‹·è´\"><a href=\"#5-æµ…æ‹·è´å’Œæ·±æ‹·è´\" class=\"headerlink\" title=\"5.æµ…æ‹·è´å’Œæ·±æ‹·è´\"></a>5.æµ…æ‹·è´å’Œæ·±æ‹·è´</h1><h2 id=\"æµ…æ‹·è´\"><a href=\"#æµ…æ‹·è´\" class=\"headerlink\" title=\"æµ…æ‹·è´\"></a>æµ…æ‹·è´</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">arr.slice();</span><br><span class=\"line\">arr.concat();</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ·±æ‹·è´\"><a href=\"#æ·±æ‹·è´\" class=\"headerlink\" title=\"æ·±æ‹·è´\"></a>æ·±æ‹·è´</h2><h3 id=\"ç®€å•ç‰ˆï¼š\"><a href=\"#ç®€å•ç‰ˆï¼š\" class=\"headerlink\" title=\"ç®€å•ç‰ˆï¼š\"></a>ç®€å•ç‰ˆï¼š</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">JSON.parse(JSON.stringify(obj))</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å±€é™æ€§ï¼š\"><a href=\"#å±€é™æ€§ï¼š\" class=\"headerlink\" title=\"å±€é™æ€§ï¼š\"></a><strong>å±€é™æ€§ï¼š</strong></h3><ul>\n<li>ä»–æ— æ³•å®ç°å¯¹å‡½æ•° ã€RegExpç­‰ç‰¹æ®Šå¯¹è±¡çš„å…‹éš†</li>\n<li>ä¼šæŠ›å¼ƒå¯¹è±¡çš„constructor,æ‰€æœ‰çš„æ„é€ å‡½æ•°ä¼šæŒ‡å‘Object</li>\n<li>å¯¹è±¡æœ‰å¾ªç¯å¼•ç”¨,ä¼šæŠ¥é”™</li>\n</ul>\n<h3 id=\"é¢è¯•ç‰ˆ-é€’å½’\"><a href=\"#é¢è¯•ç‰ˆ-é€’å½’\" class=\"headerlink\" title=\"é¢è¯•ç‰ˆ:é€’å½’\"></a>é¢è¯•ç‰ˆ:é€’å½’</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function deepCopy(obj) &#123;</span><br><span class=\"line\">\tlet res </span><br><span class=\"line\">\t&#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦æ˜¯ç®€å•æ•°æ®ç±»å‹</span><br><span class=\"line\">\tif (typeof obj &#x3D;&#x3D; &quot;object&quot;) &#123;</span><br><span class=\"line\">\t\t&#x2F;&#x2F; å¤æ‚æ•°æ®ç±»å‹</span><br><span class=\"line\">\t\tres &#x3D; object.constructor &#x3D;&#x3D; Array ? [] : &#123;&#125;;</span><br><span class=\"line\">\t\tfor (let i in obj) &#123;</span><br><span class=\"line\">\t\t\tres[i] &#x3D; typeof obj[i] &#x3D;&#x3D; &quot;object&quot; ? deepCopy(obj[i]) : obj[i]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125; else &#123;</span><br><span class=\"line\">\t\t&#x2F;&#x2F; ç®€å•æ•°æ®ç±»å‹ ç›´æ¥ &#x3D;&#x3D; èµ‹å€¼</span><br><span class=\"line\">\t\tres &#x3D; obj;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\treturn res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"6-æ•°ç»„å»é‡ã€æ‰å¹³ã€æœ€å€¼\"><a href=\"#6-æ•°ç»„å»é‡ã€æ‰å¹³ã€æœ€å€¼\" class=\"headerlink\" title=\"6.æ•°ç»„å»é‡ã€æ‰å¹³ã€æœ€å€¼\"></a>6.æ•°ç»„å»é‡ã€æ‰å¹³ã€æœ€å€¼</h1><h2 id=\"å»é‡\"><a href=\"#å»é‡\" class=\"headerlink\" title=\"å»é‡\"></a>å»é‡</h2><h3 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function unique (array) &#123;</span><br><span class=\"line\">    let container &#x3D; &#123;&#125;;</span><br><span class=\"line\">    return array.filter((item, index) &#x3D;&gt;  container.hasOwnProperty(item) ? false : (container[item] &#x3D; true));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"indexOf-filter\"><a href=\"#indexOf-filter\" class=\"headerlink\" title=\"indexOf + filter\"></a>indexOf + filter</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function unique (arr) &#123;</span><br><span class=\"line\">\treturn arr.filter((e,i) &#x3D;&gt; arr.indexOf(e) &#x3D;&#x3D;&#x3D; i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function unique (arr) &#123;</span><br><span class=\"line\">\treturn  [...new Set(arr)];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ‰å¹³\"><a href=\"#æ‰å¹³\" class=\"headerlink\" title=\"æ‰å¹³\"></a>æ‰å¹³</h2><h3 id=\"åŸºæœ¬å®ç°\"><a href=\"#åŸºæœ¬å®ç°\" class=\"headerlink\" title=\"åŸºæœ¬å®ç°\"></a>åŸºæœ¬å®ç°</h3><p>é€’å½’è°ƒç”¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function flat (array) &#123;</span><br><span class=\"line\">    let result &#x3D; [];</span><br><span class=\"line\">    for (let i &#x3D; 0; i &lt; array.length; i++) &#123;</span><br><span class=\"line\">        if (Array.isArray(array[i])) &#123;</span><br><span class=\"line\">        \tresult &#x3D; result.concat(flat(array[i]));</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">        \tresult.push(array[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨reduceç®€åŒ–\"><a href=\"#ä½¿ç”¨reduceç®€åŒ–\" class=\"headerlink\" title=\"ä½¿ç”¨reduceç®€åŒ–\"></a>ä½¿ç”¨reduceç®€åŒ–</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">flatten</span>(<span class=\"params\">array</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array.reduce(</span><br><span class=\"line\">        (target, current) =&gt; <span class=\"built_in\">Array</span>.isArray(current) ? target.concat(flatten(current)) : target.concat(current)</span><br><span class=\"line\">    , [])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç›´æ¥è°ƒç”¨\"><a href=\"#ç›´æ¥è°ƒç”¨\" class=\"headerlink\" title=\"ç›´æ¥è°ƒç”¨\"></a>ç›´æ¥è°ƒç”¨</h3><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">arr_flat = arr.flat(<span class=\"literal\">Infinity</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a href=\"#æ­£åˆ™è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ­£åˆ™è¡¨è¾¾å¼\"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ary &#x3D; arr.toSting()).replace(&#x2F;(\\[|\\])&#x2F;g, &#39;&#39;).split(&#39;,&#39;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æœ€å€¼\"><a href=\"#æœ€å€¼\" class=\"headerlink\" title=\"æœ€å€¼\"></a>æœ€å€¼</h2><h3 id=\"reduce\"><a href=\"#reduce\" class=\"headerlink\" title=\"reduce\"></a>reduce</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">array.reduce((c,n) &#x3D;&gt; Math.max(c,n));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Math-max\"><a href=\"#Math-max\" class=\"headerlink\" title=\"Math.max\"></a>Math.max</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const array &#x3D; [3,2,1,4,5];</span><br><span class=\"line\">Math.max.apply(null, array);</span><br><span class=\"line\">Math.max(...array);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä½¿ç”¨reduceå®ç°map\"><a href=\"#ä½¿ç”¨reduceå®ç°map\" class=\"headerlink\" title=\"ä½¿ç”¨reduceå®ç°map\"></a>ä½¿ç”¨reduceå®ç°map</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.reduceToMap = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">handler</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">target, current, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        target.push(handler.call(<span class=\"built_in\">this</span>, current, index))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">    &#125;, [])</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä½¿ç”¨reduceå®ç°filter\"><a href=\"#ä½¿ç”¨reduceå®ç°filter\" class=\"headerlink\" title=\"ä½¿ç”¨reduceå®ç°filter\"></a>ä½¿ç”¨reduceå®ç°filter</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.reduceToFilter = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">handler</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">target, current, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (handler.call(<span class=\"built_in\">this</span>, current, index)) &#123;</span><br><span class=\"line\">        \ttarget.push(current);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> target;</span><br><span class=\"line\">    &#125;, [])</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"7-æ•°ç»„ä¹±åº-æ´—ç‰Œç®—æ³•\"><a href=\"#7-æ•°ç»„ä¹±åº-æ´—ç‰Œç®—æ³•\" class=\"headerlink\" title=\"7.æ•°ç»„ä¹±åº-æ´—ç‰Œç®—æ³•\"></a>7.æ•°ç»„ä¹±åº-æ´—ç‰Œç®—æ³•</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">disorder</span>(<span class=\"params\">array</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> length = array.length;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> current = length - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> random;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (current &gt; -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        random = <span class=\"built_in\">Math</span>.floor(length * <span class=\"built_in\">Math</span>.random());</span><br><span class=\"line\">        [array[current], array[random]] = [array[random], array[current]];</span><br><span class=\"line\">        current--;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> array;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"8-å‡½æ•°æŸ¯é‡ŒåŒ–\"><a href=\"#8-å‡½æ•°æŸ¯é‡ŒåŒ–\" class=\"headerlink\" title=\"8.å‡½æ•°æŸ¯é‡ŒåŒ–\"></a>8.å‡½æ•°æŸ¯é‡ŒåŒ–</h1><h2 id=\"å®šä¹‰\"><a href=\"#å®šä¹‰\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯</p>\n<p>é€šä¿—æ˜“æ‡‚çš„è§£é‡Šï¼šç”¨é—­åŒ…æŠŠå‚æ•°ä¿å­˜èµ·æ¥ï¼Œå½“å‚æ•°çš„æ•°é‡è¶³å¤Ÿæ‰§è¡Œå‡½æ•°äº†ï¼Œå°±å¼€å§‹æ‰§è¡Œå‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function curry(fn, args &#x3D; []) &#123;</span><br><span class=\"line\">    let length &#x3D; fn.length;</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        newArgs &#x3D; args.concat(Array.prototype.slice.call(arguments));</span><br><span class=\"line\">        if (newArgs.length &lt; length) &#123;</span><br><span class=\"line\">            return curry.call(this, fn, newArgs);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            return fn.apply(this, newArgs);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function multiFn(a, b, c) &#123;</span><br><span class=\"line\">    return a * b * c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var multi &#x3D; curry(multiFn);</span><br><span class=\"line\"></span><br><span class=\"line\">multi(2)(3)(4);</span><br><span class=\"line\">multi(2,3,4);</span><br><span class=\"line\">multi(2)(3,4);</span><br><span class=\"line\">multi(2,3)(4)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ES6å†™æ³•\"><a href=\"#ES6å†™æ³•\" class=\"headerlink\" title=\"ES6å†™æ³•\"></a>ES6å†™æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const curry &#x3D; (fn, arr &#x3D; []) &#x3D;&gt; (...args) &#x3D;&gt; (</span><br><span class=\"line\">  arg &#x3D;&gt; arg.length &#x3D;&#x3D;&#x3D; fn.length ? fn(...arg) : curry(fn, arg)</span><br><span class=\"line\">)([...arr, ...args])</span><br><span class=\"line\"></span><br><span class=\"line\">let curryTest&#x3D;curry((a,b,c,d) &#x3D;&gt; a + b + c + d)</span><br><span class=\"line\">curryTest(1,2,3)(4) &#x2F;&#x2F; è¿”å›10</span><br><span class=\"line\">curryTest(1,2)(4)(3) &#x2F;&#x2F; è¿”å›10</span><br><span class=\"line\">curryTest(1,2)(3,4) &#x2F;&#x2F; è¿”å›10</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç®€å•å†™æ³•ç‰ˆ\"><a href=\"#ç®€å•å†™æ³•ç‰ˆ\" class=\"headerlink\" title=\"ç®€å•å†™æ³•ç‰ˆ\"></a>ç®€å•å†™æ³•ç‰ˆ</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function currying(fn, ...args) &#123;</span><br><span class=\"line\">    if (args.length &gt;&#x3D; fn.length) &#123;</span><br><span class=\"line\">    \t&#x2F;&#x2F; åˆ¤æ–­å½“å‰å‡½æ•°ä¼ å…¥çš„å‚æ•°æ˜¯å¦å¤§äºæˆ–ç­‰äºfnéœ€è¦å‚æ•°çš„æ•°é‡ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥æ‰§è¡Œfn</span><br><span class=\"line\">    \treturn fn(...args);</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">    \t&#x2F;&#x2F; å¦‚æœä¼ å…¥å‚æ•°æ•°é‡ä¸å¤Ÿï¼Œè¿”å›ä¸€ä¸ªé—­åŒ…ï¼Œæš‚å­˜ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶é‡æ–°è¿”å›curryingå‡½æ•°</span><br><span class=\"line\">    \treturn (...args2) &#x3D;&gt; currying(fn, ...args, ...args2);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"9-æ‰‹åŠ¨å®ç°JSONP\"><a href=\"#9-æ‰‹åŠ¨å®ç°JSONP\" class=\"headerlink\" title=\"9.æ‰‹åŠ¨å®ç°JSONP\"></a>9.æ‰‹åŠ¨å®ç°JSONP</h1><h2 id=\"åŸç†-2\"><a href=\"#åŸç†-2\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><p><code>JSONP</code> çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code>æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®å½“éœ€è¦é€šè®¯æ—¶</p>\n<ul>\n<li>1.å°†ä¼ å…¥çš„dataæ•°æ®è½¬åŒ–ä¸ºurlå­—ç¬¦ä¸²å½¢å¼</li>\n<li>2.å¤„ç†urlä¸­çš„å›è°ƒå‡½æ•°</li>\n<li>3.åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾å¹¶æ’å…¥åˆ°é¡µé¢ä¸­</li>\n<li>4.æŒ‚è½½å›è°ƒå‡½æ•°</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">(function (window,document) &#123;</span><br><span class=\"line\">    &quot;use strict&quot;;</span><br><span class=\"line\">    var jsonp &#x3D; function (url, data, callback) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; 1.å°†ä¼ å…¥çš„dataæ•°æ®è½¬åŒ–ä¸ºurlå­—ç¬¦ä¸²å½¢å¼</span><br><span class=\"line\">        &#x2F;&#x2F; ä¾‹å­&#123;id:1,name:&#39;jack&#39;&#125; &#x3D;&gt; id&#x3D;1&amp;name&#x3D;jack</span><br><span class=\"line\">        var dataString &#x3D; url.indexof(&#39;?&#39;) &#x3D;&#x3D; -1? &#39;?&#39;: &#39;&amp;&#39;;</span><br><span class=\"line\">        for(var key in data)&#123;</span><br><span class=\"line\">            dataString +&#x3D; key + &#39;&#x3D;&#39; + data[key] + &#39;&amp;&#39;;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; 2 å¤„ç†urlä¸­çš„å›è°ƒå‡½æ•°</span><br><span class=\"line\">        &#x2F;&#x2F; cbFuncNameå›è°ƒå‡½æ•°çš„åå­— ï¼šmy_json_cb_åå­—çš„å‰ç¼€ + éšæœºæ•°ï¼ˆæŠŠå°æ•°ç‚¹å»æ‰ï¼‰</span><br><span class=\"line\">        var cbFuncName &#x3D; &#39;my_json_cb_&#39; + Math.random().toString().replace(&#39;.&#39;,&#39;&#39;);</span><br><span class=\"line\">        dataString +&#x3D; &#39;callback&#x3D;&#39; + cbFuncName;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; 3.åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾å¹¶æ’å…¥åˆ°é¡µé¢ä¸­</span><br><span class=\"line\">        var scriptEle &#x3D; document.createElement(&#39;script&#39;);</span><br><span class=\"line\">        scriptEle.src &#x3D; url + dataString;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; 4.æŒ‚è½½å›è°ƒå‡½æ•°</span><br><span class=\"line\">        window[cbFuncName] &#x3D; function (data) &#123;</span><br><span class=\"line\">            callback(data);</span><br><span class=\"line\">            &#x2F;&#x2F; å¤„ç†å®Œå›è°ƒå‡½æ•°çš„æ•°æ®ä¹‹åï¼Œåˆ é™¤jsonpçš„scriptæ ‡ç­¾</span><br><span class=\"line\">            document.body.removeChild(scriptEle);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        document.body.appendChild(scriptEle);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    window.$jsonp &#x3D; jsonp;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)(window,document)</span><br></pre></td></tr></table></figure>\n\n<p>ç®€å•å®ç°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">jsonp</span>(<span class=\"params\">url, jsonpCallback, success</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ©ç”¨scriptå±æ€§</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;script&#x27;</span>)</span><br><span class=\"line\">    script.src = url</span><br><span class=\"line\">    script.async = <span class=\"literal\">true</span></span><br><span class=\"line\">    script.type = <span class=\"string\">&#x27;text/javascript&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">window</span>[jsonpCallback] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">    \tsuccess &amp;&amp; success(data)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.appendChild(script)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">jsonp(<span class=\"string\">&#x27;http://xxx&#x27;</span>, <span class=\"string\">&#x27;callback&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(value)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"10-æ¨¡æ‹Ÿå®ç°promise\"><a href=\"#10-æ¨¡æ‹Ÿå®ç°promise\" class=\"headerlink\" title=\"10.æ¨¡æ‹Ÿå®ç°promise\"></a>10.æ¨¡æ‹Ÿå®ç°promise</h1><p>ä¸ºä»€ä¹ˆç”¨Promiseï¼Ÿåœ¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœå¼‚æ­¥ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡å±‚å±‚åµŒå¥—å›è°ƒæ¥æ»¡è¶³è¿™ç§ä¾èµ–ï¼Œå¦‚æœåµŒå¥—å±‚æ•°è¿‡å¤šï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§éƒ½å˜å¾—å¾ˆå·®ï¼Œäº§ç”Ÿæ‰€è°“â€œå›è°ƒåœ°ç‹±â€ï¼Œè€ŒPromiseå°†å›è°ƒåµŒå¥—æ”¹ä¸ºé“¾å¼è°ƒç”¨ï¼Œå¢åŠ å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>\n<p>Promiseæœ‰ä¸‰ç§çŠ¶æ€.ï¼ŒPromiseä¸€æ—¦æ–°å»ºå°±ç«‹åˆ»æ‰§è¡Œ, æ­¤æ—¶çš„çŠ¶æ€æ˜¯Pending(è¿›è¡Œä¸­),å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°.<br> resolveå‡½æ•°çš„ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€™æœªå®Œæˆâ€™å˜ä¸ºâ€™æˆåŠŸâ€™(ç”±Pendingå˜ä¸ºResolved), åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶,å°†æ“ä½œç»“æœä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»;<br> rejectå‡½æ•°çš„ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€™æœªå®Œæˆâ€™å˜ä¸ºå¤±è´¥(ç”±Pendingå˜ä¸ºRejected),åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨,å¹¶å°†å¼‚æ­¥æ“ä½œçš„é”™è¯¯ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå».</p>\n<h2 id=\"ç®€å•ä½¿ç”¨\"><a href=\"#ç®€å•ä½¿ç”¨\" class=\"headerlink\" title=\"ç®€å•ä½¿ç”¨\"></a>ç®€å•ä½¿ç”¨</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨</span><br><span class=\"line\">var promise &#x3D; new Promise((resolve,reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    if (æ“ä½œæˆåŠŸ) &#123;</span><br><span class=\"line\">        resolve(value)</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        reject(error)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">promise.then(function (value) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; success</span><br><span class=\"line\">&#125;,function (value) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; failure</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åŸºç¡€ç‰ˆæœ¬\"><a href=\"#åŸºç¡€ç‰ˆæœ¬\" class=\"headerlink\" title=\"åŸºç¡€ç‰ˆæœ¬\"></a>åŸºç¡€ç‰ˆæœ¬</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myPromise</span>(<span class=\"params\">constructor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    self.status = <span class=\"string\">&quot;pending&quot;</span>   <span class=\"comment\">// å®šä¹‰çŠ¶æ€æ”¹å˜å‰çš„åˆå§‹çŠ¶æ€</span></span><br><span class=\"line\">    self.value = <span class=\"literal\">undefined</span>;   <span class=\"comment\">// å®šä¹‰çŠ¶æ€ä¸ºresolvedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class=\"line\">    self.reason = <span class=\"literal\">undefined</span>;  <span class=\"comment\">// å®šä¹‰çŠ¶æ€ä¸ºrejectedçš„æ—¶å€™çš„çŠ¶æ€</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">resolve</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">self.status === <span class=\"string\">&quot;pending&quot;</span></span>)</span> &#123;</span><br><span class=\"line\">            self.value = value;</span><br><span class=\"line\">            self.status = <span class=\"string\">&quot;resolved&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reject</span>(<span class=\"params\">reason</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">self.status === <span class=\"string\">&quot;pending&quot;</span></span>)</span> &#123;</span><br><span class=\"line\">            self.reason = reason;</span><br><span class=\"line\">            self.status = <span class=\"string\">&quot;rejected&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ•è·æ„é€ å¼‚å¸¸</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    \t<span class=\"title\">constructor</span>(<span class=\"params\">resolve, reject</span>);</span><br><span class=\"line\">    &#125; <span class=\"function\"><span class=\"title\">catch</span>(<span class=\"params\">e</span>)</span> &#123;</span><br><span class=\"line\">    \treject(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"thenæ–¹æ³•\"><a href=\"#thenæ–¹æ³•\" class=\"headerlink\" title=\"thenæ–¹æ³•\"></a>thenæ–¹æ³•</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ·»åŠ  then æ–¹æ³•</span><br><span class=\"line\">myPromise.prototype.then &#x3D; function(onFullfilled, onRejected) &#123;</span><br><span class=\"line\">   let self &#x3D; this;</span><br><span class=\"line\">   switch(self.status) &#123;</span><br><span class=\"line\">      case &quot;resolved&quot;:</span><br><span class=\"line\">        onFullfilled(self.value);</span><br><span class=\"line\">        break;</span><br><span class=\"line\">      case &quot;rejected&quot;:</span><br><span class=\"line\">        onRejected(self.reason);</span><br><span class=\"line\">        break;</span><br><span class=\"line\">      default:       </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var p &#x3D; new myPromise(function(resolve,reject) &#123;</span><br><span class=\"line\">    resolve(1)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">p.then(function(x) &#123;</span><br><span class=\"line\">    console.log(x) &#x2F;&#x2F; 1</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"catchæ–¹æ³•\"><a href=\"#catchæ–¹æ³•\" class=\"headerlink\" title=\"catchæ–¹æ³•\"></a>catchæ–¹æ³•</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MyPromise.prototype.catch &#x3D; function(onRejected) &#123;</span><br><span class=\"line\">\treturn this.then(null, onRejected);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"finallyæ–¹æ³•\"><a href=\"#finallyæ–¹æ³•\" class=\"headerlink\" title=\"finallyæ–¹æ³•\"></a>finallyæ–¹æ³•</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">MyPromise.prototype.finally &#x3D; function(fn) &#123;</span><br><span class=\"line\">    return this.then(value &#x3D;&gt; &#123;</span><br><span class=\"line\">       fn();</span><br><span class=\"line\">       return value;</span><br><span class=\"line\">    &#125;, reason &#x3D;&gt; &#123;</span><br><span class=\"line\">        fn();</span><br><span class=\"line\">        throw reason;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"11-æ‰‹åŠ¨å®ç°ES5ç»§æ‰¿\"><a href=\"#11-æ‰‹åŠ¨å®ç°ES5ç»§æ‰¿\" class=\"headerlink\" title=\"11.æ‰‹åŠ¨å®ç°ES5ç»§æ‰¿\"></a>11.æ‰‹åŠ¨å®ç°ES5ç»§æ‰¿</h1><p>Childç»§æ‰¿Parent</p>\n<h2 id=\"åŸå‹ç»§æ‰¿\"><a href=\"#åŸå‹ç»§æ‰¿\" class=\"headerlink\" title=\"åŸå‹ç»§æ‰¿\"></a>åŸå‹ç»§æ‰¿</h2><blockquote>\n<p>å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šåŸå‹æ˜¯æ‰€æœ‰å­ç±»å®ä¾‹å…±äº«çš„ï¼Œæ”¹å˜ä¸€ä¸ªå…¶ä»–ä¹Ÿä¼šæ”¹å˜ã€‚</p>\n<h2 id=\"æ„é€ ç»§æ‰¿\"><a href=\"#æ„é€ ç»§æ‰¿\" class=\"headerlink\" title=\"æ„é€ ç»§æ‰¿\"></a>æ„é€ ç»§æ‰¿</h2><blockquote>\n<p>åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    Parent.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šä¸èƒ½ç»§æ‰¿çˆ¶ç±»åŸå‹ï¼Œå‡½æ•°åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ¯ä¸ªå­ç±»å®ä¾‹ä¸èƒ½å…±äº«å‡½æ•°ï¼Œæµªè´¹å†…å­˜ã€‚</p>\n<h2 id=\"ç»„åˆç»§æ‰¿\"><a href=\"#ç»„åˆç»§æ‰¿\" class=\"headerlink\" title=\"ç»„åˆç»§æ‰¿\"></a>ç»„åˆç»§æ‰¿</h2><blockquote>\n<p>ä½¿ç”¨æ„é€ ç»§æ‰¿ç»§æ‰¿çˆ¶ç±»å‚æ•°ï¼Œä½¿ç”¨åŸå‹ç»§æ‰¿ç»§æ‰¿çˆ¶ç±»å‡½æ•°</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    Parent.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Child.prototype = <span class=\"keyword\">new</span> Parent();</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šParentçš„æ„é€ å‡½æ•°ä¼šå¤šæ‰§è¡Œäº†ä¸€æ¬¡</p>\n<h2 id=\"å¯„ç”Ÿç»„åˆç»§æ‰¿\"><a href=\"#å¯„ç”Ÿç»„åˆç»§æ‰¿\" class=\"headerlink\" title=\"å¯„ç”Ÿç»„åˆç»§æ‰¿\"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h2><blockquote>\n<p>å°†çˆ¶ç±»åŸå‹å¯¹è±¡ç›´æ¥ç»™åˆ°å­ç±»ï¼Œçˆ¶ç±»æ„é€ å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸”çˆ¶ç±»å±æ€§å’Œæ–¹æ³•å‡èƒ½è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    Parent.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Child.prototype = Parent.prototype;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¯„ç”Ÿç»„åˆç»§æ‰¿ä¼˜åŒ–\"><a href=\"#å¯„ç”Ÿç»„åˆç»§æ‰¿ä¼˜åŒ–\" class=\"headerlink\" title=\"å¯„ç”Ÿç»„åˆç»§æ‰¿ä¼˜åŒ–\"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿ä¼˜åŒ–</h2><p>çˆ¶ç±»åŸå‹å’Œå­ç±»åŸå‹æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ— æ³•åŒºåˆ†å­ç±»çœŸæ­£æ˜¯ç”±è°æ„é€ ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    Parent.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype = <span class=\"built_in\">Object</span>.create(Parent.prototype);</span><br><span class=\"line\">Child.prototype.constructor = Child;</span><br></pre></td></tr></table></figure>\n\n<p>æœ€æ¨èçš„ä¸€ç§æ–¹å¼ï¼Œæ¥è¿‘å®Œç¾çš„ç»§æ‰¿ã€‚</p>\n<h1 id=\"12-æ‰‹åŠ¨å®ç°instanceof\"><a href=\"#12-æ‰‹åŠ¨å®ç°instanceof\" class=\"headerlink\" title=\"12.æ‰‹åŠ¨å®ç°instanceof\"></a>12.æ‰‹åŠ¨å®ç°instanceof</h1><h2 id=\"åŸç†-3\"><a href=\"#åŸç†-3\" class=\"headerlink\" title=\"åŸç†\"></a>åŸç†</h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">a <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span></span><br></pre></td></tr></table></figure>\n\n<p>åˆ¤æ–­<code>Object</code>çš„prototypeæ˜¯å¦åœ¨<code>a</code>çš„åŸå‹é“¾ä¸Šã€‚</p>\n<h2 id=\"ä»£ç å®ç°\"><a href=\"#ä»£ç å®ç°\" class=\"headerlink\" title=\"ä»£ç å®ç°\"></a>ä»£ç å®ç°</h2><p>æŒ‰ç…§targetåŸå‹é“¾çš„å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ° origin æˆ– null</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myInstanceof</span>(<span class=\"params\">target, origin</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> proto = target.__proto__;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (proto) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (origin.prototype == proto) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> myInstanceof(proto, origin)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ”¹ç”¨å¾ªç¯è€Œä¸æ˜¯é€’å½’  </p>\n<pre><code>// target instanceof origin\n// å˜é‡originçš„åŸå‹ å­˜åœ¨äºå˜é‡targetçš„åŸå‹é“¾ä¸Š\nfunction myInstanceof(target, origin)&#123;    \n    // éªŒè¯å¦‚æœä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå°±ç›´æ¥è¿”å›false\n    const baseType = [&#39;string&#39;, &#39;number&#39;,&#39;boolean&#39;,&#39;undefined&#39;,&#39;symbol&#39;]\n    if(baseType.includes(typeof(target))) return false;\n    let oP  = origin.prototype;  // å– origin çš„æ˜¾ç¤ºåŸå‹\n    proto = target.__proto__;       // å– target çš„éšå¼åŸå‹\n    while(true)&#123;           // æ— çº¿å¾ªç¯çš„å†™æ³•ï¼ˆä¹Ÿå¯ä»¥ä½¿ for(;;) ï¼‰\n        if(proto === null)&#123;    // æ‰¾åˆ°æœ€é¡¶å±‚\n            return false;\n        &#125;\n        if(proto === oP)&#123;       // ä¸¥æ ¼ç›¸ç­‰\n            return true;\n        &#125;\n        proto = proto.__proto__;  //æ²¡æ‰¾åˆ°ç»§ç»­å‘ä¸Šä¸€å±‚åŸå‹é“¾æŸ¥æ‰¾\n    &#125;\n&#125;</code></pre>\n<h1 id=\"13-åŸºäºPromiseçš„ajaxå°è£…\"><a href=\"#13-åŸºäºPromiseçš„ajaxå°è£…\" class=\"headerlink\" title=\"13.åŸºäºPromiseçš„ajaxå°è£…\"></a>13.åŸºäºPromiseçš„ajaxå°è£…</h1><p>åŸºäºæŠŠåŸç”Ÿ<code>ajax</code>å°è£…ä¸º<code>Promise</code>å½¢å¼</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">url, method = <span class=\"string\">&#x27;get&#x27;</span>, param = &#123;&#125;</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">        <span class=\"keyword\">const</span> paramString = getStringParam(param);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (method === <span class=\"string\">&#x27;get&#x27;</span> &amp;&amp; paramString) &#123;</span><br><span class=\"line\">        \turl.indexOf(<span class=\"string\">&#x27;?&#x27;</span>) &gt; -<span class=\"number\">1</span> ? url += paramString : url += <span class=\"string\">`?<span class=\"subst\">$&#123;paramString&#125;</span>`</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        xhr.open(method, url);</span><br><span class=\"line\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> result = &#123;</span><br><span class=\"line\">                status: xhr.status,</span><br><span class=\"line\">                statusText: xhr.statusText,</span><br><span class=\"line\">                headers: xhr.getAllResponseHeaders(),</span><br><span class=\"line\">                data: xhr.response || xhr.responseText</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((xhr.status &gt;= <span class=\"number\">200</span> &amp;&amp; xhr.status &lt; <span class=\"number\">300</span>) || xhr.status == <span class=\"number\">304</span>) &#123;</span><br><span class=\"line\">            \tresolve(result);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            \treject(result);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&quot;Content-type&quot;</span>, <span class=\"string\">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// è·¨åŸŸæºå¸¦cookie</span></span><br><span class=\"line\">        xhr.withCredentials = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">        xhr.onerror = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        \treject(<span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">&#x27;è¯·æ±‚å‡ºé”™&#x27;</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        xhr.timeout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        \treject(<span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">&#x27;è¯·æ±‚è¶…æ—¶&#x27;</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        xhr.onabort = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        \treject(<span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">&#x27;è¯·æ±‚è¢«ç»ˆæ­¢&#x27;</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (method === <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        \txhr.send(paramString);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        \txhr.send();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getStringParam</span>(<span class=\"params\">param</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> dataString = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> key <span class=\"keyword\">in</span> param) &#123;</span><br><span class=\"line\">    \tdataString += <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>=<span class=\"subst\">$&#123;param[key]&#125;</span>&amp;`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dataString;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"14-å•ä¾‹æ¨¡å¼\"><a href=\"#14-å•ä¾‹æ¨¡å¼\" class=\"headerlink\" title=\"14.å•ä¾‹æ¨¡å¼\"></a>14.å•ä¾‹æ¨¡å¼</h1><p>åœ¨åˆé€‚çš„æ—¶å€™æ‰åˆ›å»ºå¯¹åƒï¼Œå¹¶ä¸”åªåˆ›å»ºå”¯ä¸€çš„ä¸€ä¸ªã€‚åˆ›å»ºå¯¹è±¡å’Œç®¡ç†å•ä¾‹çš„èŒè´£è¢«åˆ†å¸ƒåœ¨ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ç»„åˆèµ·æ¥æ‰å…·æœ‰å•ä¾‹æ¨¡å¼çš„å¨åŠ›ã€‚ä½¿ç”¨é—­åŒ…å®ç°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Singleton (name) &#123;</span><br><span class=\"line\">\tthis.name &#x3D; name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Single.getInstance &#x3D; (function(name) &#123;</span><br><span class=\"line\">\tlet instance;</span><br><span class=\"line\">\treturn function(name) &#123;</span><br><span class=\"line\">\t\tif (!instance) &#123;</span><br><span class=\"line\">\t\t\tinstance &#x3D; new Singleton(name);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\treturn instance;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\">var a &#x3D; Singleton.getInstance(&#39;ConardLi&#39;);</span><br><span class=\"line\">var b &#x3D; Singleton.getInstance(&#39;ConardLi2&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a &#x3D;&#x3D;&#x3D; b);   &#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦ä¸€ç§å®ç°æ–¹å¼ï¼Œæ ¸å¿ƒè¦ç‚¹: ç”¨é—­åŒ…å’ŒProxyå±æ€§æ‹¦æˆª</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxy</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> instance;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> handler = &#123;</span><br><span class=\"line\">      \t<span class=\"title\">constructor</span> (<span class=\"params\">target, args</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!instance) &#123;</span><br><span class=\"line\">                instance = <span class=\"built_in\">Reflect</span>.constructor(fun, args);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> instance;</span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Proxy</span>(func, handler);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"15-å¼‚æ­¥å¾ªç¯æ‰“å°\"><a href=\"#15-å¼‚æ­¥å¾ªç¯æ‰“å°\" class=\"headerlink\" title=\"15.å¼‚æ­¥å¾ªç¯æ‰“å°\"></a>15.å¼‚æ­¥å¾ªç¯æ‰“å°</h1><p>ä½¿ç”¨<code>promise + async await</code>å®ç°å¼‚æ­¥å¾ªç¯æ‰“å°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> sleep = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">time, i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            resolve(i);</span><br><span class=\"line\">        &#125;, time);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> start = <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">6</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = <span class=\"keyword\">await</span> sleep(<span class=\"number\">1000</span>, i);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">start();</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"16-å›¾ç‰‡æ‡’åŠ è½½\"><a href=\"#16-å›¾ç‰‡æ‡’åŠ è½½\" class=\"headerlink\" title=\"16.å›¾ç‰‡æ‡’åŠ è½½\"></a>16.å›¾ç‰‡æ‡’åŠ è½½</h1><h2 id=\"ç›‘å¬å›¾ç‰‡é«˜åº¦\"><a href=\"#ç›‘å¬å›¾ç‰‡é«˜åº¦\" class=\"headerlink\" title=\"ç›‘å¬å›¾ç‰‡é«˜åº¦\"></a>ç›‘å¬å›¾ç‰‡é«˜åº¦</h2><p>å›¾ç‰‡ï¼Œç”¨ä¸€ä¸ªå…¶ä»–å±æ€§å­˜å‚¨çœŸæ­£çš„å›¾ç‰‡åœ°å€ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;loading.gif&quot;</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;https://cdn.pixabay.com/photo/2015/09/09/16/05/forest-931706_1280.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;loading.gif&quot;</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;https://cdn.pixabay.com/photo/2014/08/01/00/08/pier-407252_1280.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;loading.gif&quot;</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;https://cdn.pixabay.com/photo/2014/12/15/17/16/pier-569314_1280.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;loading.gif&quot;</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;https://cdn.pixabay.com/photo/2010/12/13/10/09/abstract-2384_1280.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;loading.gif&quot;</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;https://cdn.pixabay.com/photo/2015/10/24/11/09/drop-of-water-1004250_1280.jpg&quot;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡å›¾ç‰‡<code>offsetTop</code>å’Œ<code>window</code>çš„<code>innerHeight</code>ï¼Œ<code>scrollTop</code>åˆ¤æ–­å›¾ç‰‡æ˜¯å¦ä½äºå¯è§†åŒºåŸŸã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> img = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&quot;img&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> n = <span class=\"number\">0</span>; <span class=\"comment\">//å­˜å‚¨å›¾ç‰‡åŠ è½½åˆ°çš„ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹éå†</span></span><br><span class=\"line\">lazyload(); <span class=\"comment\">//é¡µé¢è½½å…¥å®Œæ¯•åŠ è½½å¯æ˜¯åŒºåŸŸå†…çš„å›¾ç‰‡</span></span><br><span class=\"line\"><span class=\"comment\">// èŠ‚æµå‡½æ•°ï¼Œä¿è¯æ¯200msè§¦å‘ä¸€æ¬¡</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">event, time</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">            timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                event.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">            &#125;, time);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;scroll&#x27;</span>, throttle(lazyload, <span class=\"number\">200</span>))</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">lazyload</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">//ç›‘å¬é¡µé¢æ»šåŠ¨äº‹ä»¶</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> seeHeight = <span class=\"built_in\">window</span>.innerHeight; <span class=\"comment\">//å¯è§åŒºåŸŸé«˜åº¦</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> scrollTop = <span class=\"built_in\">document</span>.documentElement.scrollTop || <span class=\"built_in\">document</span>.body.scrollTop; <span class=\"comment\">//æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨é«˜åº¦</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = n; i &lt; img.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(img[i].offsetTop, seeHeight, scrollTop);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (img[i].offsetTop &lt; seeHeight + scrollTop) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (img[i].getAttribute(<span class=\"string\">&quot;src&quot;</span>) == <span class=\"string\">&quot;loading.gif&quot;</span>) &#123;</span><br><span class=\"line\">                img[i].src = img[i].getAttribute(<span class=\"string\">&quot;data-src&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            n = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"IntersectionObserver\"><a href=\"#IntersectionObserver\" class=\"headerlink\" title=\"IntersectionObserver\"></a>IntersectionObserver</h2><blockquote>\n<p>IntersectionObserveræ¥å£ (ä»å±äºIntersection Observer API) æä¾›äº†ä¸€ç§å¼‚æ­¥è§‚å¯Ÿç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆå…ƒç´ æˆ–é¡¶çº§æ–‡æ¡£è§†çª—(viewport)äº¤å‰çŠ¶æ€çš„æ–¹æ³•ã€‚ç¥–å…ˆå…ƒç´ ä¸è§†çª—(viewport)è¢«ç§°ä¸ºæ ¹(root)ã€‚</p>\n</blockquote>\n<p><code>Intersection Observer</code>å¯ä»¥ä¸ç”¨ç›‘å¬<code>scroll</code>äº‹ä»¶ï¼Œåšåˆ°å…ƒç´ ä¸€å¯è§ä¾¿è°ƒç”¨å›è°ƒï¼Œåœ¨å›è°ƒé‡Œé¢æˆ‘ä»¬æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (IntersectionObserver) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> lazyImageObserver = <span class=\"keyword\">new</span> IntersectionObserver(<span class=\"function\">(<span class=\"params\">entries, observer</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        entries.forEach(<span class=\"function\">(<span class=\"params\">entry, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> lazyImage = entry.target;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœå…ƒç´ å¯è§            </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (entry.intersectionRatio &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (lazyImage.getAttribute(<span class=\"string\">&quot;src&quot;</span>) == <span class=\"string\">&quot;loading.gif&quot;</span>) &#123;</span><br><span class=\"line\">                    lazyImage.src = lazyImage.getAttribute(<span class=\"string\">&quot;data-src&quot;</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                lazyImageObserver.unobserve(lazyImage)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; img.length; i++) &#123;</span><br><span class=\"line\">        lazyImageObserver.observe(img[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"17-æ¨¡æ‹ŸObject-create\"><a href=\"#17-æ¨¡æ‹ŸObject-create\" class=\"headerlink\" title=\"17.æ¨¡æ‹ŸObject.create\"></a>17.æ¨¡æ‹ŸObject.create</h1><blockquote>\n<p>Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„<strong>proto</strong></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¨¡æ‹Ÿ Object.create</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">create</span> (<span class=\"params\">proto</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">    F.prototype = proto;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"18-å®ç°ä¸€ä¸ªJSON-stringify\"><a href=\"#18-å®ç°ä¸€ä¸ªJSON-stringify\" class=\"headerlink\" title=\"18.å®ç°ä¸€ä¸ªJSON.stringify\"></a>18.å®ç°ä¸€ä¸ªJSON.stringify</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">jsonStringify</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> type = <span class=\"keyword\">typeof</span> obj;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type !== <span class=\"string\">&quot;object&quot;</span>) &#123;</span><br><span class=\"line\">    \t<span class=\"comment\">// ä¸æ˜¯å­—ç¬¦ä¸² undefined å’Œ function ç±»å‹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"regexp\">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class=\"line\">            obj = <span class=\"string\">&#x27;&quot;&#x27;</span> + obj + <span class=\"string\">&#x27;&quot;&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">String</span>(obj);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    \t<span class=\"comment\">// JSONä¸ºç©ºæ•°ç»„</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> json = []</span><br><span class=\"line\">        <span class=\"comment\">// æ˜¯å¦ä¸ºæ•°ç»„</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> arr = <span class=\"built_in\">Array</span>.isArray(obj)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> v = obj[k];</span><br><span class=\"line\">            <span class=\"keyword\">let</span> type = <span class=\"keyword\">typeof</span> v;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"regexp\">/string|undefined|function/</span>.test(type)) &#123;</span><br><span class=\"line\">                v = <span class=\"string\">&#x27;&quot;&#x27;</span> + v + <span class=\"string\">&#x27;&quot;&#x27;</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type === <span class=\"string\">&quot;object&quot;</span>) &#123;</span><br><span class=\"line\">                v = jsonStringify(v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            json.push((arr ? <span class=\"string\">&quot;&quot;</span> : <span class=\"string\">&#x27;&quot;&#x27;</span> + k + <span class=\"string\">&#x27;&quot;:&#x27;</span>) + <span class=\"built_in\">String</span>(v));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (arr ? <span class=\"string\">&quot;[&quot;</span> : <span class=\"string\">&quot;&#123;&quot;</span>) + <span class=\"built_in\">String</span>(json) + (arr ? <span class=\"string\">&quot;]&quot;</span> : <span class=\"string\">&quot;&#125;&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">jsonStringify(&#123;<span class=\"attr\">x</span> : <span class=\"number\">5</span>&#125;) <span class=\"comment\">// &quot;&#123;&quot;x&quot;:5&#125;&quot;</span></span><br><span class=\"line\">jsonStringify([<span class=\"number\">1</span>, <span class=\"string\">&quot;false&quot;</span>, <span class=\"literal\">false</span>]) <span class=\"comment\">// &quot;[1,&quot;false&quot;,false]&quot;</span></span><br><span class=\"line\">jsonStringify(&#123;<span class=\"attr\">b</span>: <span class=\"literal\">undefined</span>&#125;) <span class=\"comment\">// &quot;&#123;&quot;b&quot;:&quot;undefined&quot;&#125;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"19-å®ç°ä¸€ä¸ªJSON-parse\"><a href=\"#19-å®ç°ä¸€ä¸ªJSON-parse\" class=\"headerlink\" title=\"19.å®ç°ä¸€ä¸ªJSON.parse\"></a>19.å®ç°ä¸€ä¸ªJSON.parse</h1><figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">JSON.parse(text[, reviver])</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨æ¥è§£æJSONå­—ç¬¦ä¸²ï¼Œæ„é€ ç”±å­—ç¬¦ä¸²æè¿°çš„JavaScriptå€¼æˆ–å¯¹è±¡ã€‚æä¾›å¯é€‰çš„reviverå‡½æ•°ç”¨ä»¥åœ¨è¿”å›ä¹‹å‰å¯¹æ‰€å¾—åˆ°çš„å¯¹è±¡æ‰§è¡Œå˜æ¢(æ“ä½œ)</p>\n</blockquote>\n<h2 id=\"æ–¹æ³•1ï¼šç›´æ¥è°ƒç”¨-eval\"><a href=\"#æ–¹æ³•1ï¼šç›´æ¥è°ƒç”¨-eval\" class=\"headerlink\" title=\"æ–¹æ³•1ï¼šç›´æ¥è°ƒç”¨ eval\"></a>æ–¹æ³•1ï¼šç›´æ¥è°ƒç”¨ eval</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function jsonParse(opt) &#123;</span><br><span class=\"line\">    return eval(&#39;(&#39; + opt + &#39;)&#39;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">jsonParse(jsonStringify(&#123;x : 5&#125;))</span><br><span class=\"line\">&#x2F;&#x2F; Object &#123; x: 5&#125;</span><br><span class=\"line\">jsonParse(jsonStringify([1, &quot;false&quot;, false]))</span><br><span class=\"line\">&#x2F;&#x2F; [1, &quot;false&quot;, falsr]</span><br><span class=\"line\">jsonParse(jsonStringify(&#123;b: undefined&#125;))</span><br><span class=\"line\">&#x2F;&#x2F; Object &#123; b: &quot;undefined&quot;&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é¿å…åœ¨ä¸å¿…è¦çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>eval</code>ï¼Œ<code>eval()</code> æ˜¯ä¸€ä¸ªå±é™©çš„å‡½æ•°ï¼Œä»–æ‰§è¡Œçš„ä»£ç æ‹¥æœ‰ç€æ‰§è¡Œè€…çš„æƒåˆ©ã€‚å¦‚æœä½ ç”¨<code>eval()</code>è¿è¡Œçš„å­—ç¬¦ä¸²ä»£ç è¢«æ¶æ„æ–¹ï¼ˆä¸æ€€å¥½æ„çš„äººï¼‰æ“æ§ä¿®æ”¹ï¼Œæ‚¨æœ€ç»ˆå¯èƒ½ä¼šåœ¨æ‚¨çš„ç½‘é¡µ/æ‰©å±•ç¨‹åºçš„æƒé™ä¸‹ï¼Œåœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šè¿è¡Œæ¶æ„ä»£ç ã€‚å®ƒä¼šæ‰§è¡ŒJSä»£ç ï¼Œæœ‰XSSæ¼æ´ã€‚</p>\n</blockquote>\n<p>å¦‚æœä½ åªæƒ³è®°è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¾—å¯¹å‚æ•°jsonåšæ ¡éªŒã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> rx_one = <span class=\"regexp\">/^[\\],:&#123;&#125;\\s]*$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> rx_two = <span class=\"regexp\">/\\\\(?:[&quot;\\\\\\/bfnrt]|u[0-9a-fA-F]&#123;4&#125;)/g</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> rx_three = <span class=\"regexp\">/&quot;[^&quot;\\\\\\n\\r]*&quot;|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> rx_four = <span class=\"regexp\">/(?:^|:|,)(?:\\s*\\[)+/g</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (</span><br><span class=\"line\">    rx_one.test(</span><br><span class=\"line\">        json</span><br><span class=\"line\">            .replace(rx_two, <span class=\"string\">&quot;@&quot;</span>)</span><br><span class=\"line\">            .replace(rx_three, <span class=\"string\">&quot;]&quot;</span>)</span><br><span class=\"line\">            .replace(rx_four, <span class=\"string\">&quot;&quot;</span>)</span><br><span class=\"line\">    )</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"built_in\">eval</span>(<span class=\"string\">&quot;(&quot;</span> +json + <span class=\"string\">&quot;)&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ–¹æ³•2ï¼šFunction\"><a href=\"#æ–¹æ³•2ï¼šFunction\" class=\"headerlink\" title=\"æ–¹æ³•2ï¼šFunction\"></a>æ–¹æ³•2ï¼šFunction</h2><blockquote>\n<p>æ ¸å¿ƒï¼šFunctionä¸evalæœ‰ç›¸åŒçš„å­—ç¬¦ä¸²å‚æ•°ç‰¹æ€§</p>\n</blockquote>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">var func = new Function(arg1, arg2, ..., functionBody);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è½¬æ¢JSONçš„å®é™…åº”ç”¨ä¸­ï¼Œåªéœ€è¦è¿™ä¹ˆåš</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> jsonStr = <span class=\"string\">&#x27;&#123; &quot;age&quot;: 20, &quot;name&quot;: &quot;jack&quot; &#125;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> json = (<span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>(<span class=\"string\">&#x27;return &#x27;</span> + jsonStr))();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>eval</code> ä¸ <code>Function</code>éƒ½æœ‰ç€åŠ¨æ€ç¼–è¯‘jsä»£ç çš„ä½œç”¨ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç¼–ç¨‹ä¸­å¹¶ä¸æ¨èä½¿ç”¨</p>\n</blockquote>\n<h1 id=\"20-è§£æ-URL-Params-ä¸ºå¯¹è±¡\"><a href=\"#20-è§£æ-URL-Params-ä¸ºå¯¹è±¡\" class=\"headerlink\" title=\"20.è§£æ URL Params ä¸ºå¯¹è±¡\"></a>20.è§£æ URL Params ä¸ºå¯¹è±¡</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> url = <span class=\"string\">&#x27;http://www.domain.com/?user=anonymous&amp;id=123&amp;id=456&amp;city=%E5%8C%97%E4%BA%AC&amp;enabled&#x27;</span>;</span><br><span class=\"line\">parseParam(url)</span><br><span class=\"line\"><span class=\"comment\">/* ç»“æœ</span></span><br><span class=\"line\"><span class=\"comment\">&#123; user: &#x27;anonymous&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">  id: [ 123, 456 ], // é‡å¤å‡ºç°çš„ key è¦ç»„è£…æˆæ•°ç»„ï¼Œèƒ½è¢«è½¬æˆæ•°å­—çš„å°±è½¬æˆæ•°å­—ç±»å‹</span></span><br><span class=\"line\"><span class=\"comment\">  city: &#x27;åŒ—äº¬&#x27;, // ä¸­æ–‡éœ€è§£ç </span></span><br><span class=\"line\"><span class=\"comment\">  enabled: true, // æœªæŒ‡å®šå€¼å¾— key çº¦å®šä¸º true</span></span><br><span class=\"line\"><span class=\"comment\">&#125;</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseParam</span>(<span class=\"params\">url</span>) </span>&#123;</span><br><span class=\"line\"> \t<span class=\"comment\">// å°† ? åé¢çš„å­—ç¬¦ä¸²å–å‡ºæ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> paramsStr = <span class=\"regexp\">/.+\\?(.+)$/</span>.exec(url)[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"comment\">// å°†å­—ç¬¦ä¸²ä»¥ &amp; åˆ†å‰²åå­˜åˆ°æ•°ç»„ä¸­</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> paramsArr = paramsStr.split(<span class=\"string\">&#x27;&amp;&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> paramsObj = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"comment\">// å°† params å­˜åˆ°å¯¹è±¡ä¸­</span></span><br><span class=\"line\">    paramsArr.forEach(<span class=\"function\"><span class=\"params\">param</span> =&gt;</span> &#123;</span><br><span class=\"line\">     \t<span class=\"comment\">// å¤„ç†æœ‰ value çš„å‚æ•°</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"regexp\">/=/</span>.test(param)) &#123;</span><br><span class=\"line\">        \t<span class=\"comment\">// åˆ†å‰² key å’Œ value</span></span><br><span class=\"line\">        \t<span class=\"keyword\">let</span> [key, val] = param.split(<span class=\"string\">&#x27;=&#x27;</span>);</span><br><span class=\"line\">        \t<span class=\"comment\">// é€’å½’è°ƒç”¨è§£ç </span></span><br><span class=\"line\">        \tval = <span class=\"built_in\">decodeURIComponent</span>(val);</span><br><span class=\"line\">        \t<span class=\"comment\">// åˆ¤æ–­æ˜¯å¦è½¬ä¸ºæ•°å­—</span></span><br><span class=\"line\">        \tval = <span class=\"regexp\">/^\\d+$/</span>.test(val) ? <span class=\"built_in\">parseFloat</span>(val) : val; </span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">// å¦‚æœå¯¹è±¡æœ‰ keyï¼Œåˆ™æ·»åŠ ä¸€ä¸ªå€¼</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (paramsObj.hasOwnProperty(key)) &#123;</span><br><span class=\"line\">            \tparamsObj[key] = [].concat(paramsObj[key], val);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            \t<span class=\"comment\">// å¦‚æœå¯¹è±¡æ²¡æœ‰è¿™ä¸ª keyï¼Œåˆ›å»º key å¹¶è®¾ç½®å€¼</span></span><br><span class=\"line\">            \tparamsObj[key] = val;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        \t<span class=\"comment\">// å¤„ç†æ²¡æœ‰ value çš„å‚æ•°</span></span><br><span class=\"line\">        \tparamsObj[param] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> paramsObj;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"21-æ¨¡æ¿å¼•æ“å®ç°\"><a href=\"#21-æ¨¡æ¿å¼•æ“å®ç°\" class=\"headerlink\" title=\"21.æ¨¡æ¿å¼•æ“å®ç°\"></a>21.æ¨¡æ¿å¼•æ“å®ç°</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let template &#x3D; &#39;æˆ‘æ˜¯&#123;&#123;name&#125;&#125;ï¼Œå¹´é¾„&#123;&#123;age&#125;&#125;ï¼Œæ€§åˆ«&#123;&#123;sex&#125;&#125;&#39;;</span><br><span class=\"line\">let data &#x3D; &#123;</span><br><span class=\"line\">    name: &#39;å§“å&#39;,</span><br><span class=\"line\">    age: 18</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">render(template, data); &#x2F;&#x2F; æˆ‘æ˜¯å§“åï¼Œå¹´é¾„18ï¼Œæ€§åˆ«undefined</span><br></pre></td></tr></table></figure>\n\n<p>ä»£ç </p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span>(<span class=\"params\">template, data</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æ¨¡æ¿å­—ç¬¦ä¸²æ­£åˆ™</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> reg = <span class=\"regexp\">/\\&#123;\\&#123;(\\w+)\\&#125;\\&#125;/</span>;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­æ¨¡æ¿é‡Œæ˜¯å¦æœ‰æ¨¡æ¿å­—ç¬¦ä¸²</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (reg.test(template)) &#123;</span><br><span class=\"line\">     \t<span class=\"comment\">// æŸ¥æ‰¾å½“å‰æ¨¡æ¿é‡Œç¬¬ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²çš„å­—æ®µ</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> name = reg.exec(template)[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"comment\">// å°†ç¬¬ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²æ¸²æŸ“</span></span><br><span class=\"line\">        template = template.replace(reg, data[name]);</span><br><span class=\"line\">        <span class=\"comment\">// é€’å½’çš„æ¸²æŸ“å¹¶è¿”å›æ¸²æŸ“åçš„ç»“æ„</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> render(template, data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ¨¡æ¿æ²¡æœ‰æ¨¡æ¿å­—ç¬¦ä¸²ç›´æ¥è¿”å›</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> template;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"22-è½¬åŒ–ä¸ºé©¼å³°å‘½å\"><a href=\"#22-è½¬åŒ–ä¸ºé©¼å³°å‘½å\" class=\"headerlink\" title=\"22.è½¬åŒ–ä¸ºé©¼å³°å‘½å\"></a>22.è½¬åŒ–ä¸ºé©¼å³°å‘½å</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> s1 = <span class=\"string\">&quot;get-element-by-id&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// è½¬åŒ–ä¸º getElementById</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŠŠ-åé¢çš„å­—æ¯æ›¿æ¢ä¸ºå¤§å†™å­—æ¯</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> f = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.replace(<span class=\"regexp\">/-\\w/g</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// é¦–å­—æ¯å¤§å†™</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> x.slice(<span class=\"number\">1</span>).toUpperCase();</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"23-æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°\"><a href=\"#23-æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°\" class=\"headerlink\" title=\"23.æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°\"></a>23.æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">&quot;abcabcabcbbccccc&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> char = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// è‡ªå·±ç”¨å“ˆå¸Œè¡¨</span></span><br><span class=\"line\"><span class=\"comment\">// ä½¿å…¶æŒ‰ç…§ä¸€å®šçš„æ¬¡åºæ’åˆ—</span></span><br><span class=\"line\">str = str.split(<span class=\"string\">&#x27;&#x27;</span>).sort().join(<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// &quot;aaabbbbbcccccccc&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> re = <span class=\"regexp\">/(\\w)\\1+/g</span>;</span><br><span class=\"line\">str.replace(re, <span class=\"function\">(<span class=\"params\">$<span class=\"number\">0</span>, $<span class=\"number\">1</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">num &lt; $<span class=\"number\">0.</span>length</span>)</span>&#123;</span><br><span class=\"line\">        num = $<span class=\"number\">0.</span>length;</span><br><span class=\"line\">        char = $<span class=\"number\">1</span>;        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`å­—ç¬¦æœ€å¤šçš„æ˜¯<span class=\"subst\">$&#123;char&#125;</span>ï¼Œå‡ºç°äº†<span class=\"subst\">$&#123;num&#125;</span>æ¬¡`</span>);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"24-å­—ç¬¦ä¸²æŸ¥æ‰¾\"><a href=\"#24-å­—ç¬¦ä¸²æŸ¥æ‰¾\" class=\"headerlink\" title=\"24.å­—ç¬¦ä¸²æŸ¥æ‰¾\"></a>24.å­—ç¬¦ä¸²æŸ¥æ‰¾</h1><blockquote>\n<p>è¯·ä½¿ç”¨æœ€åŸºæœ¬çš„éå†æ¥å®ç°åˆ¤æ–­å­—ç¬¦ä¸² a æ˜¯å¦è¢«åŒ…å«åœ¨å­—ç¬¦ä¸² b ä¸­ï¼Œå¹¶è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆæ‰¾ä¸åˆ°è¿”å› -1ï¼‰ã€‚</p>\n</blockquote>\n<p>æš´åŠ›è§£</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var strStr &#x3D; function(haystack, needle) &#123;</span><br><span class=\"line\">    let m &#x3D;  haystack.length;</span><br><span class=\"line\">    let n &#x3D; needle.length;</span><br><span class=\"line\">    for (let i &#x3D; 0; i &lt;&#x3D; m - n; i++) &#123;</span><br><span class=\"line\">        let j;</span><br><span class=\"line\">        for (j &#x3D; 0; j &lt; n; j++) &#123;</span><br><span class=\"line\">            if (needle[j] !&#x3D;&#x3D; haystack[i + j]) break;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#x2F;&#x2F; needleå­ä¸²å…¨éƒ½åŒ¹é…äº†</span><br><span class=\"line\">        if (j &#x3D;&#x3D;&#x3D; n) return i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; haystackä¸­ä¸å­˜åœ¨needle</span><br><span class=\"line\">    return -1;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>KMP</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> strStr = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">haystack, needle</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> k = -<span class=\"number\">1</span>, n = haystack.length, p = needle.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// -1è¡¨ç¤ºä¸å­˜åœ¨ç›¸åŒçš„æœ€å¤§å‰ç¼€å’Œåç¼€</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> next = <span class=\"built_in\">Array</span>(p).fill(-<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"comment\">// è®¡ç®—nextæ•°ç»„</span></span><br><span class=\"line\">    calNext(needle, next);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (k &gt; -<span class=\"number\">1</span> &amp;&amp; needle[k + <span class=\"number\">1</span>] != haystack[i]) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æœ‰éƒ¨åˆ†åŒ¹é…ï¼Œå¾€å‰å›æº¯</span></span><br><span class=\"line\">            k = next[k];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (needle[k + <span class=\"number\">1</span>] == haystack[i]) &#123;</span><br><span class=\"line\">            k++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (k == p - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// è¯´æ˜kç§»åŠ¨åˆ°needleçš„æœ€æœ«ç«¯ï¼Œè¿”å›ç›¸åº”çš„ä½ç½®</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> i - p + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾…å‡½æ•°- è®¡ç®—nextæ•°ç»„</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calNext</span>(<span class=\"params\">needle, next</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">1</span>, p = -<span class=\"number\">1</span>; j &lt; needle.length; j++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (p &gt; -<span class=\"number\">1</span> &amp;&amp; needle[p + <span class=\"number\">1</span>] != needle[j]) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœä¸‹ä¸€ä½ä¸åŒï¼Œå¾€å‰å›æº¯</span></span><br><span class=\"line\">            p = next[p];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (needle[p + <span class=\"number\">1</span>] == needle[j]) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœä¸‹ä¸€ä½ç›¸åŒï¼Œæ›´æ–°ç›¸åŒçš„æœ€å¤§å‰ç¼€å’Œæœ€å¤§åç¼€é•¿</span></span><br><span class=\"line\">            p++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// ä½ç½®jå¤„æ›´æ–°æœ€é•¿å‰ç¼€</span></span><br><span class=\"line\">        next[j] = p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é©¬æ‹‰è½¦æ°´å¹³ä¸å¤Ÿ</p>\n<h1 id=\"25-å®ç°åƒä½åˆ†éš”ç¬¦\"><a href=\"#25-å®ç°åƒä½åˆ†éš”ç¬¦\" class=\"headerlink\" title=\"25.å®ç°åƒä½åˆ†éš”ç¬¦\"></a>25.å®ç°åƒä½åˆ†éš”ç¬¦</h1><p>æ­£åˆ™è¡¨è¾¾å¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var thousandSeparator &#x3D; function(n) &#123;</span><br><span class=\"line\">    return (n + &#39;&#39;).replace(&#x2F;(?!^)(?&#x3D;(\\d&#123;3&#125;)+$)&#x2F;g, &#39;.&#39;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>æ ¹æ®å®šä¹‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var thousandSeparator &#x3D; function(n) &#123;</span><br><span class=\"line\">    let count &#x3D; 0;</span><br><span class=\"line\">    let ans &#x3D; &quot;&quot;;</span><br><span class=\"line\">    do &#123;</span><br><span class=\"line\">        let cur &#x3D; n % 10;</span><br><span class=\"line\">        n &#x3D; Math.floor(n &#x2F; 10);</span><br><span class=\"line\">        ans +&#x3D; cur;</span><br><span class=\"line\">        count++;</span><br><span class=\"line\">        if (count % 3 &#x3D;&#x3D; 0 &amp;&amp; n) &#123;</span><br><span class=\"line\">            ans +&#x3D; &quot;.&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; while (n);</span><br><span class=\"line\">    return ans.split(&#39;&#39;).reverse().join(&#39;&#39;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"26-åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯å·ç \"><a href=\"#26-åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯å·ç \" class=\"headerlink\" title=\"26.åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯å·ç \"></a>26.åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯å·ç </h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function isPhone(tel) &#123;</span><br><span class=\"line\">    var regx &#x3D; &#x2F;^1[34578]\\d&#123;9&#125;$&#x2F;;</span><br><span class=\"line\">    return regx.test(tel);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"27-éªŒè¯æ˜¯å¦æ˜¯é‚®ç®±\"><a href=\"#27-éªŒè¯æ˜¯å¦æ˜¯é‚®ç®±\" class=\"headerlink\" title=\"27.éªŒè¯æ˜¯å¦æ˜¯é‚®ç®±\"></a>27.éªŒè¯æ˜¯å¦æ˜¯é‚®ç®±</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function isEmail(email) &#123;</span><br><span class=\"line\">    var regx &#x3D; &#x2F;^([a-zA-Z0-9_\\-]+@([a-zA-Z0-9_\\-]+)+$&#x2F;;</span><br><span class=\"line\">    return regx.test(email);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"28-ç”¨ES5å®ç°æ•°ç»„çš„mapæ–¹æ³•\"><a href=\"#28-ç”¨ES5å®ç°æ•°ç»„çš„mapæ–¹æ³•\" class=\"headerlink\" title=\"28.ç”¨ES5å®ç°æ•°ç»„çš„mapæ–¹æ³•\"></a>28.ç”¨ES5å®ç°æ•°ç»„çš„mapæ–¹æ³•</h1><ul>\n<li>å›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å“ªäº›ï¼Œè¿”å›å€¼å¦‚ä½•å¤„ç†</li>\n<li>ä¸ä¿®æ”¹åŸæ¥çš„æ•°ç»„</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.MyMap = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">fn, context</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç”±äºæ˜¯ES5æ‰€ä»¥å°±ä¸ç”¨...å±•å¼€ç¬¦äº†</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> arr = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mappedArr = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">        mappedArr.push(fn.call(context, arr[i], i, <span class=\"built_in\">this</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> mappedArr;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"29-ç”¨ES5å®ç°æ•°ç»„çš„reduceæ–¹æ³•\"><a href=\"#29-ç”¨ES5å®ç°æ•°ç»„çš„reduceæ–¹æ³•\" class=\"headerlink\" title=\"29.ç”¨ES5å®ç°æ•°ç»„çš„reduceæ–¹æ³•\"></a>29.ç”¨ES5å®ç°æ•°ç»„çš„reduceæ–¹æ³•</h1><ul>\n<li>åˆå§‹å€¼ä¸ä¼ æ€ä¹ˆå¤„ç†</li>\n<li>å›è°ƒå‡½æ•°çš„å‚æ•°æœ‰å“ªäº›ï¼Œè¿”å›å€¼å¦‚ä½•å¤„ç†ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Array.prototype.myReduce &#x3D; function(fn, initialValue) &#123;</span><br><span class=\"line\">    let arr &#x3D; Array.prototpye.slice.call(this);</span><br><span class=\"line\">    let res, startIndex;</span><br><span class=\"line\">    res &#x3D; initialValue ? initialValue : arr[0];</span><br><span class=\"line\">    startIndex &#x3D; initialValue ? 0 : 1;</span><br><span class=\"line\">    for (let i &#x3D; startIndex; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">    \tres &#x3D; fn.call(null, res, arr[i], i, this);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯¹äºæ™®é€šå‡½æ•°ï¼Œç»‘å®šthisæŒ‡å‘</li>\n<li>å¯¹äºæ„é€ å‡½æ•°ï¼Œè¦ä¿è¯åŸå‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ä¸èƒ½ä¸¢å¤±</li>\n</ul>\n<h1 id=\"30-è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½\"><a href=\"#30-è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½\" class=\"headerlink\" title=\"30.è¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½\"></a>30.è¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">add(<span class=\"number\">1</span>); \t\t\t<span class=\"comment\">// 1</span></span><br><span class=\"line\">add(<span class=\"number\">1</span>)(<span class=\"number\">2</span>);  \t<span class=\"comment\">// 3</span></span><br><span class=\"line\">add(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)(<span class=\"number\">3</span>)ï¼›<span class=\"comment\">// 6</span></span><br><span class=\"line\">add(<span class=\"number\">1</span>)(<span class=\"number\">2</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\">add(<span class=\"number\">1</span>, <span class=\"number\">2</span>)(<span class=\"number\">3</span>); <span class=\"comment\">// 6</span></span><br><span class=\"line\">add(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 6</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> args = [].slice.call(<span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> fn = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">let</span> fn_args = [].slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> add.apply(<span class=\"literal\">null</span>, args.concat(fn_args))</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tfn.toString = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t\treturm args.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> fn</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"31-å®ç°ä¸€ä¸ª-sleep-å‡½æ•°ï¼Œæ¯”å¦‚-sleep-1000-æ„å‘³ç€ç­‰å¾…1000æ¯«ç§’\"><a href=\"#31-å®ç°ä¸€ä¸ª-sleep-å‡½æ•°ï¼Œæ¯”å¦‚-sleep-1000-æ„å‘³ç€ç­‰å¾…1000æ¯«ç§’\" class=\"headerlink\" title=\"31.å®ç°ä¸€ä¸ª sleep å‡½æ•°ï¼Œæ¯”å¦‚ sleep(1000) æ„å‘³ç€ç­‰å¾…1000æ¯«ç§’\"></a>31.å®ç°ä¸€ä¸ª sleep å‡½æ•°ï¼Œæ¯”å¦‚ sleep(1000) æ„å‘³ç€ç­‰å¾…1000æ¯«ç§’</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const sleep &#x3D; (time) &#x3D;&gt; &#123;</span><br><span class=\"line\">\treturn new Promise(resolve &#x3D;&gt; setTimeout(resolve, time))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">sleep(1000).then(() &#x3D;&gt; &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; è¿™é‡Œå†™ä½ çš„å‡½æ•°</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"32-å®ç°-5-add-3-minus-2-åŠŸèƒ½\"><a href=\"#32-å®ç°-5-add-3-minus-2-åŠŸèƒ½\" class=\"headerlink\" title=\"32.å®ç° (5).add(3).minus(2) åŠŸèƒ½\"></a>32.å®ç° (5).add(3).minus(2) åŠŸèƒ½</h1><blockquote>\n<p>ä¾‹ï¼š 5 + 3 - 2ï¼Œç»“æœä¸º 6</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Number</span>.prototype.add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.valueOf() + n;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Number</span>.prototype.minus = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.valueOf() - n;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"33-å®ç°ä¸€ä¸ªåŒå‘ç»‘å®š\"><a href=\"#33-å®ç°ä¸€ä¸ªåŒå‘ç»‘å®š\" class=\"headerlink\" title=\"33.å®ç°ä¸€ä¸ªåŒå‘ç»‘å®š\"></a>33.å®ç°ä¸€ä¸ªåŒå‘ç»‘å®š</h1><p><strong>defineProperty ç‰ˆæœ¬</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ•°æ®</span><br><span class=\"line\">const data &#x3D; &#123;</span><br><span class=\"line\">\ttext: &#39;default&#39;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">const input  &#x3D; document.getElementById(&#39;input&#39;);</span><br><span class=\"line\">const span  &#x3D; document.getElementById(&#39;span&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; æ•°æ®åŠ«æŒ</span><br><span class=\"line\">Object.defineProperty(data, &#39;text&#39;, &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; æ•°æ®å˜åŒ– --&gt; ä¿®æ”¹è§†å›¾</span><br><span class=\"line\">\tset(newVal) &#123;</span><br><span class=\"line\">\t\tinput.value &#x3D; newVal;</span><br><span class=\"line\">\t\tspan.innerHTML &#x3D; newVal;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&#x2F;&#x2F; æ•°æ®å˜åŒ– --&gt; ä¿®æ”¹è§†å›¾</span><br><span class=\"line\">input.addEventLisener(&#39;keyup&#39;, function(e) &#123;</span><br><span class=\"line\">\tdata.text &#x3D; e.target.value;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong>proxy ç‰ˆæœ¬</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ•°æ®</span><br><span class=\"line\">const data &#x3D; &#123;</span><br><span class=\"line\">\ttext: &#39;default&#39;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">const input  &#x3D; document.getElementById(&#39;input&#39;);</span><br><span class=\"line\">const span  &#x3D; document.getElementById(&#39;span&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; æ•°æ®åŠ«æŒ</span><br><span class=\"line\">const handler &#x3D; &#123;</span><br><span class=\"line\">\tset(target, key, value) &#123;</span><br><span class=\"line\">\t\ttarget[key] &#x3D; value;</span><br><span class=\"line\">\t\t&#x2F;&#x2F; æ•°æ®å˜åŒ– --&gt; ä¿®æ”¹è§†å›¾</span><br><span class=\"line\">\t\tinput.value &#x3D; newVal;</span><br><span class=\"line\">\t\tspan.innerHTML &#x3D; newVal;</span><br><span class=\"line\">\t\treturn value;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">const proxy &#x3D; new Proxy(data, handler);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è§†å›¾æ›´æ”¹ --&gt; æ•°æ®å˜åŒ–</span><br><span class=\"line\">input.addEventLisener(&#39;keyup&#39;, function(e) &#123;</span><br><span class=\"line\">\tproxy.text &#x3D; e.target.value;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"34-Array-isArray-å®ç°\"><a href=\"#34-Array-isArray-å®ç°\" class=\"headerlink\" title=\"34.Array.isArray å®ç°\"></a>34.Array.isArray å®ç°</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Array.myIsArray &#x3D; function(o) &#123;</span><br><span class=\"line\">\treturn Object.prototype.toString.call(Object(o)) &#x3D;&#x3D;&#x3D; &#39;[object Array]&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(Array.myIsArray([])); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"35-å®ç°ä¸€ä¸ªå‡½æ•°åˆ¤æ–­æ•°æ®ç±»å‹\"><a href=\"#35-å®ç°ä¸€ä¸ªå‡½æ•°åˆ¤æ–­æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"35.å®ç°ä¸€ä¸ªå‡½æ•°åˆ¤æ–­æ•°æ®ç±»å‹\"></a>35.å®ç°ä¸€ä¸ªå‡½æ•°åˆ¤æ–­æ•°æ®ç±»å‹</h1><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getType</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (obj === <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">String</span>(obj);</span><br><span class=\"line\">    <span class=\"comment\">// å¯¹è±¡ç±»å‹ &quot;[object XXX]&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> obj === <span class=\"string\">&#x27;object&#x27;</span> ? <span class=\"built_in\">Object</span>.prototype.toString.call(obj).replace(<span class=\"string\">&#x27;[object &#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>).replace(<span class=\"string\">&#x27;]&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>).toLowerCase() : <span class=\"keyword\">typeof</span> obj;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨</span></span><br><span class=\"line\">getType(<span class=\"literal\">null</span>); <span class=\"comment\">// -&gt; null</span></span><br><span class=\"line\">getType(<span class=\"literal\">undefined</span>); <span class=\"comment\">// -&gt; undefined</span></span><br><span class=\"line\">getType(&#123;&#125;); <span class=\"comment\">// -&gt; object</span></span><br><span class=\"line\">getType([]); <span class=\"comment\">// -&gt; array</span></span><br><span class=\"line\">getType(<span class=\"number\">123</span>); <span class=\"comment\">// -&gt; number</span></span><br><span class=\"line\">getType(<span class=\"literal\">true</span>); <span class=\"comment\">// -&gt; boolean</span></span><br><span class=\"line\">getType(<span class=\"string\">&#x27;123&#x27;</span>); <span class=\"comment\">// -&gt; string</span></span><br><span class=\"line\">getType(<span class=\"regexp\">/123/</span>); <span class=\"comment\">// -&gt; regexp</span></span><br><span class=\"line\">getType(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()); <span class=\"comment\">// -&gt; date</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"36-å®ç°Event-event-bus\"><a href=\"#36-å®ç°Event-event-bus\" class=\"headerlink\" title=\"36. å®ç°Event(event bus)\"></a>36. å®ç°Event(event bus)</h2><blockquote>\n<p>event busæ—¢æ˜¯nodeä¸­å„ä¸ªæ¨¡å—çš„åŸºçŸ³ï¼Œåˆæ˜¯å‰ç«¯ç»„ä»¶é€šä¿¡çš„ä¾èµ–æ‰‹æ®µä¹‹ä¸€ï¼ŒåŒæ—¶æ¶‰åŠäº†è®¢é˜…-å‘å¸ƒè®¾è®¡æ¨¡å¼ï¼Œæ˜¯éå¸¸é‡è¦çš„åŸºç¡€</p>\n</blockquote>\n<p><strong>ç®€å•ç‰ˆï¼š</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EventEmeitter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events = <span class=\"built_in\">this</span>._events || <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>(); <span class=\"comment\">// å‚¨å­˜äº‹ä»¶/å›è°ƒé”®å€¼å¯¹</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>._maxListeners = <span class=\"built_in\">this</span>._maxListeners || <span class=\"number\">10</span>; <span class=\"comment\">// è®¾ç«‹ç›‘å¬ä¸Šé™</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è§¦å‘åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.emit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, ...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ä»å‚¨å­˜äº‹ä»¶é”®å€¼å¯¹çš„this._eventsä¸­è·å–å¯¹åº”äº‹ä»¶å›è°ƒå‡½æ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> handler = <span class=\"built_in\">this</span>._events.get(type);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (args.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    handler.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    handler.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›‘å¬åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.addListener = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, fn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å°†typeäº‹ä»¶ä»¥åŠå¯¹åº”çš„fnå‡½æ•°æ”¾å…¥this._eventsä¸­å‚¨å­˜</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>._events.get(type)) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events.set(type, fn);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p><strong>é¢è¯•ç‰ˆï¼š</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EventEmeitter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events = <span class=\"built_in\">this</span>._events || <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>(); <span class=\"comment\">// å‚¨å­˜äº‹ä»¶/å›è°ƒé”®å€¼å¯¹</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>._maxListeners = <span class=\"built_in\">this</span>._maxListeners || <span class=\"number\">10</span>; <span class=\"comment\">// è®¾ç«‹ç›‘å¬ä¸Šé™</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è§¦å‘åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.emit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, ...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> handler;</span><br><span class=\"line\">  <span class=\"comment\">// ä»å‚¨å­˜äº‹ä»¶é”®å€¼å¯¹çš„this._eventsä¸­è·å–å¯¹åº”äº‹ä»¶å›è°ƒå‡½æ•°</span></span><br><span class=\"line\">  handler = <span class=\"built_in\">this</span>._events.get(type);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (args.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    handler.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    handler.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›‘å¬åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.addListener = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, fn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å°†typeäº‹ä»¶ä»¥åŠå¯¹åº”çš„fnå‡½æ•°æ”¾å…¥this._eventsä¸­å‚¨å­˜</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>._events.get(type)) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events.set(type, fn);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è§¦å‘åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.emit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, ...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> handler;</span><br><span class=\"line\">  handler = <span class=\"built_in\">this</span>._events.get(type);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(handler)) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„è¯´æ˜æœ‰å¤šä¸ªç›‘å¬è€…,éœ€è¦ä¾æ¬¡æ­¤è§¦å‘é‡Œé¢çš„å‡½æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (args.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        handler[i].apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        handler[i].call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å•ä¸ªå‡½æ•°çš„æƒ…å†µæˆ‘ä»¬ç›´æ¥è§¦å‘å³å¯</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (args.length &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      handler.apply(<span class=\"built_in\">this</span>, args);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      handler.call(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›‘å¬åä¸ºtypeçš„äº‹ä»¶</span></span><br><span class=\"line\">EventEmeitter.prototype.addListener = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, fn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handler = <span class=\"built_in\">this</span>._events.get(type); <span class=\"comment\">// è·å–å¯¹åº”äº‹ä»¶åç§°çš„å‡½æ•°æ¸…å•</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!handler) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events.set(type, fn);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (handler &amp;&amp; <span class=\"keyword\">typeof</span> handler === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœhandleræ˜¯å‡½æ•°è¯´æ˜åªæœ‰ä¸€ä¸ªç›‘å¬è€…</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events.set(type, [handler, fn]); <span class=\"comment\">// å¤šä¸ªç›‘å¬è€…æˆ‘ä»¬éœ€è¦ç”¨æ•°ç»„å‚¨å­˜</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    handler.push(fn); <span class=\"comment\">// å·²ç»æœ‰å¤šä¸ªç›‘å¬è€…,é‚£ä¹ˆç›´æ¥å¾€æ•°ç»„é‡Œpushå‡½æ•°å³å¯</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">EventEmeitter.prototype.removeListener = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, fn</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handler = <span class=\"built_in\">this</span>._events.get(type); <span class=\"comment\">// è·å–å¯¹åº”äº‹ä»¶åç§°çš„å‡½æ•°æ¸…å•</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœæ˜¯å‡½æ•°,è¯´æ˜åªè¢«ç›‘å¬äº†ä¸€æ¬¡</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (handler &amp;&amp; <span class=\"keyword\">typeof</span> handler === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._events.delete(type, fn);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> postion;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœhandleræ˜¯æ•°ç»„,è¯´æ˜è¢«ç›‘å¬å¤šæ¬¡è¦æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (handler[i] === fn) &#123;</span><br><span class=\"line\">        postion = i;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        postion = -<span class=\"number\">1</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ‰¾åˆ°åŒ¹é…çš„å‡½æ•°,ä»æ•°ç»„ä¸­æ¸…é™¤</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (postion !== -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// æ‰¾åˆ°æ•°ç»„å¯¹åº”çš„ä½ç½®,ç›´æ¥æ¸…é™¤æ­¤å›è°ƒ</span></span><br><span class=\"line\">      handler.splice(postion, <span class=\"number\">1</span>);</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœæ¸…é™¤ååªæœ‰ä¸€ä¸ªå‡½æ•°,é‚£ä¹ˆå–æ¶ˆæ•°ç»„,ä»¥å‡½æ•°å½¢å¼ä¿å­˜</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (handler.length === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._events.set(type, handler[<span class=\"number\">0</span>]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","categories":["webå‰ç«¯"],"tags":["javascript","ES6"]},{"title":"Promise async Generatorå®ç°åŸç†è§£æ","url":"/2020/10/30/Promise%20async%20Generator%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/","content":"<p>è½¬è‡ª <a href=\"https://juejin.im/post/6844904096525189128\">https://juejin.im/post/6844904096525189128</a> </p>\n<p>ç¬”è€…åˆšæ¥è§¦<code>async/await</code>æ—¶ï¼Œå°±è¢«å…¶æš‚åœæ‰§è¡Œçš„ç‰¹æ€§å¸å¼•äº†ï¼Œå¿ƒæƒ³åœ¨æ²¡æœ‰åŸç”ŸAPIæ”¯æŒçš„æƒ…å†µä¸‹ï¼Œawaitå±…ç„¶èƒ½æŒ‚èµ·å½“å‰æ–¹æ³•ï¼Œå®ç°æš‚åœæ‰§è¡Œï¼Œæˆ‘æ„Ÿåˆ°ååˆ†å¥½å¥‡ã€‚å¥½å¥‡å¿ƒé©±ä½¿æˆ‘ä¸€å±‚ä¸€å±‚å‰¥å¼€æœ‰å…³JSå¼‚æ­¥ç¼–ç¨‹çš„ä¸€åˆ‡ã€‚é˜…è¯»å®Œæœ¬æ–‡ï¼Œè¯»è€…åº”è¯¥èƒ½å¤Ÿäº†è§£ï¼š</p>\n<ol>\n<li><p><code>Promise</code>çš„å®ç°åŸç†</p>\n</li>\n<li><p><code>async/await</code>çš„å®ç°åŸç†</p>\n</li>\n<li><p><code>Generator</code>çš„å®ç°åŸç†</p>\n</li>\n</ol>\n<a id=\"more\"></a>\n\n<h1 id=\"Promiseå®ç°\"><a href=\"#Promiseå®ç°\" class=\"headerlink\" title=\"Promiseå®ç°\"></a>Promiseå®ç°</h1><p>åœ¨æˆæ–‡è¿‡ç¨‹ä¸­ï¼Œç¬”è€…æŸ¥é˜…äº†å¾ˆå¤šè®²è§£Promiseå®ç°çš„æ–‡ç« ï¼Œä½†æ„Ÿè§‰å¤§å¤šæ–‡ç« éƒ½å¾ˆéš¾ç§°å¾—ä¸Šæ¡ç†æ¸…æ™°ï¼Œæœ‰çš„ä¸Šæ¥å°±æ”¾å¤§æ®µPromiseè§„èŒƒç¿»è¯‘ï¼Œæœ‰çš„åœ¨PromiseåŸºç¡€ä½¿ç”¨ä¸Šæµªè´¹ç¯‡å¹…ï¼Œåˆæˆ–è€…æŠŠä¸€ä¸ªç®€å•çš„ä¸œè¥¿é•¿ç¯‡å¤§è®ºï¼Œè¿‡åº¦è®²è§£ï¼Œæˆ‘æ¨èå¤´é“çš„åŒå­¦ç›´æ¥æ‹‰åˆ°æœ¬ç« å°ç»“çœ‹æœ€ç»ˆå®ç°ï¼Œç»“åˆç€æ³¨é‡Šç›´æ¥å•ƒä»£ç ä¹Ÿèƒ½ç†è§£åä¹‹å…«ä¹</p>\n<p>å›å½’æ­£é¢˜ï¼Œæ–‡ç« å¼€å¤´æˆ‘ä»¬å…ˆç‚¹ä¸€ä¸‹Promiseä¸ºæˆ‘ä»¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼šåœ¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœå¼‚æ­¥ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å°±éœ€è¦é€šè¿‡å±‚å±‚åµŒå¥—å›è°ƒæ¥æ»¡è¶³è¿™ç§ä¾èµ–ï¼Œå¦‚æœåµŒå¥—å±‚æ•°è¿‡å¤šï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§éƒ½å˜å¾—å¾ˆå·®ï¼Œäº§ç”Ÿæ‰€è°“â€œå›è°ƒåœ°ç‹±â€ï¼Œè€ŒPromiseå°†å›è°ƒåµŒå¥—æ”¹ä¸ºé“¾å¼è°ƒç”¨ï¼Œå¢åŠ å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ­¥æ­¥å®ç°ä¸€ä¸ªPromiseï¼š</p>\n<h2 id=\"1-è§‚å¯Ÿè€…æ¨¡å¼\"><a href=\"#1-è§‚å¯Ÿè€…æ¨¡å¼\" class=\"headerlink\" title=\"1. è§‚å¯Ÿè€…æ¨¡å¼\"></a>1. è§‚å¯Ÿè€…æ¨¡å¼</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„Promiseä½¿ç”¨ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–°å»ºä¸€ä¸ªPromiseå®ä¾‹</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\tresolve(<span class=\"string\">&#x27;result&#x27;</span>);</span><br><span class=\"line\">\t&#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¼ å…¥resolve, rejectå‡½æ•°å‚æ•°</span></span><br><span class=\"line\">p1.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res), <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err))</span><br></pre></td></tr></table></figure>\n\n<p>è§‚å¯Ÿè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ†æPromiseçš„è°ƒç”¨æµç¨‹ï¼š</p>\n<ul>\n<li><code>Promise</code>çš„æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ª<code>executor()</code>ï¼Œåœ¨<code>new Promise()</code>æ—¶å°±ç«‹åˆ»æ‰§è¡Œè¿™ä¸ªexecutorå›è°ƒ</li>\n<li><code>executor()</code>å†…éƒ¨çš„å¼‚æ­¥ä»»åŠ¡è¢«æ”¾å…¥å®/å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…æ‰§è¡Œ</li>\n<li><code>then()</code>è¢«æ‰§è¡Œï¼Œæ”¶é›†æˆåŠŸ/å¤±è´¥å›è°ƒï¼Œæ”¾å…¥æˆåŠŸ/å¤±è´¥é˜Ÿåˆ—</li>\n<li><code>executor()</code>çš„å¼‚æ­¥ä»»åŠ¡è¢«æ‰§è¡Œï¼Œè§¦å‘<code>resolve/reject</code>ï¼Œä»æˆåŠŸ/å¤±è´¥é˜Ÿåˆ—ä¸­å–å‡ºå›è°ƒä¾æ¬¡æ‰§è¡Œ</li>\n</ul>\n<p>å…¶å®ç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œå¾ˆå®¹æ˜“å°±èƒ½æ„è¯†åˆ°è¿™æ˜¯ä¸ª<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼Œè¿™ç§<code>æ”¶é›†ä¾èµ– -&gt; è§¦å‘é€šçŸ¥ -&gt; å–å‡ºä¾èµ–æ‰§è¡Œ</code> çš„æ–¹å¼ï¼Œè¢«å¹¿æ³›è¿ç”¨äºè§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼Œåœ¨Promiseé‡Œï¼Œæ‰§è¡Œé¡ºåºæ˜¯<code>thenæ”¶é›†ä¾èµ– -&gt; å¼‚æ­¥è§¦å‘resolve -&gt; resolveæ‰§è¡Œä¾èµ–</code>ã€‚ä¾æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‹¾å‹’å‡ºPromiseçš„å¤§è‡´å½¢çŠ¶ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyPromise</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">executor</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue = []    <span class=\"comment\">// thenæ”¶é›†çš„æ‰§è¡ŒæˆåŠŸçš„å›è°ƒé˜Ÿåˆ—</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue = []     <span class=\"comment\">// thenæ”¶é›†çš„æ‰§è¡Œå¤±è´¥çš„å›è°ƒé˜Ÿåˆ—</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ç”±äºresolve/rejectæ˜¯åœ¨executorå†…éƒ¨è¢«è°ƒç”¨, å› æ­¤éœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°å›ºå®šthisæŒ‡å‘, å¦åˆ™æ‰¾ä¸åˆ°this._resolveQueue</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _resolve = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ä»æˆåŠŸé˜Ÿåˆ—é‡Œå–å‡ºå›è°ƒä¾æ¬¡æ‰§è¡Œ</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">while</span>(<span class=\"params\"><span class=\"built_in\">this</span>._resolveQueue.length</span>)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._resolveQueue.shift()</span><br><span class=\"line\">                callback(val)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// å®ç°åŒresolve</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _reject = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">while</span>(<span class=\"params\"><span class=\"built_in\">this</span>._rejectQueue.length</span>)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._rejectQueue.shift()</span><br><span class=\"line\">                callback(val)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor,å¹¶ä¼ å…¥resolveå’Œreject</span></span><br><span class=\"line\">        executor(_resolve, _reject)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒï¼Œå¹¶pushè¿›å¯¹åº”é˜Ÿåˆ—</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">then</span>(<span class=\"params\">resolveFn, rejectFn</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue.push(resolveFn)</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue.push(rejectFn)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å†™å®Œä»£ç æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    \tresolve(<span class=\"string\">&#x27;result&#x27;</span>)</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">p1.then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> <span class=\"built_in\">console</span>.log(res))</span><br><span class=\"line\"><span class=\"comment\">// ä¸€ç§’åè¾“å‡ºresult</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬è¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ç®€å•çš„å®ç°äº†ä¸€ä¸‹<code>then</code>å’Œ<code>resolve</code>ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨thenæ–¹æ³•çš„å›è°ƒé‡Œå–å¾—å¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ï¼Œä½†æˆ‘ä»¬è¿™ä¸ªPromiseç¦»æœ€ç»ˆå®ç°è¿˜æœ‰å¾ˆé•¿çš„è·ç¦»ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥è¡¥å……è¿™ä¸ªPromiseï¼š</p>\n<h2 id=\"2-Promise-A-è§„èŒƒ\"><a href=\"#2-Promise-A-è§„èŒƒ\" class=\"headerlink\" title=\"2. Promise A+è§„èŒƒ\"></a>2. Promise A+è§„èŒƒ</h2><p>ä¸Šé¢æˆ‘ä»¬å·²ç»ç®€å•åœ°å®ç°äº†ä¸€ä¸ªè¶…ä½é…ç‰ˆPromiseï¼Œä½†æˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤šæ–‡ç« å’Œæˆ‘ä»¬å†™çš„ä¸ä¸€æ ·ï¼Œä»–ä»¬çš„Promiseå®ç°ä¸­è¿˜å¼•å…¥äº†å„ç§çŠ¶æ€æ§åˆ¶ï¼Œè¿™æ˜¯ç”±äºES6çš„Promiseå®ç°éœ€è¦éµå¾ª<a href=\"https://promisesaplus.com/\">Promise/A+è§„èŒƒ</a>ï¼Œæ˜¯è§„èŒƒå¯¹Promiseçš„çŠ¶æ€æ§åˆ¶åšäº†è¦æ±‚ã€‚Promise/A+çš„è§„èŒƒæ¯”è¾ƒé•¿ï¼Œè¿™é‡Œåªæ€»ç»“ä¸¤æ¡æ ¸å¿ƒè§„åˆ™ï¼š</p>\n<blockquote>\n<ol>\n<li>Promiseæœ¬è´¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œä¸”çŠ¶æ€åªèƒ½ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š<code>Pendingï¼ˆç­‰å¾…æ€ï¼‰</code>ã€<code>Fulfilledï¼ˆæ‰§è¡Œæ€ï¼‰</code>ã€<code>Rejectedï¼ˆæ‹’ç»æ€ï¼‰</code>ï¼ŒçŠ¶æ€çš„å˜æ›´æ˜¯å•å‘çš„ï¼Œåªèƒ½ä»Pending -&gt; Fulfilled æˆ– Pending -&gt; Rejectedï¼ŒçŠ¶æ€å˜æ›´ä¸å¯é€†</li>\n<li><code>thenæ–¹æ³•</code>æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œåˆ†åˆ«å¯¹åº”çŠ¶æ€æ”¹å˜æ—¶è§¦å‘çš„å›è°ƒã€‚thenæ–¹æ³•è¿”å›ä¸€ä¸ªpromiseã€‚then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ã€‚</li>\n</ol>\n</blockquote>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/2/26/161d2454e68ff07b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>æ ¹æ®è§„èŒƒï¼Œæˆ‘ä»¬è¡¥å……ä¸€ä¸‹Promiseçš„ä»£ç ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Promise/A+è§„èŒƒçš„ä¸‰ç§çŠ¶æ€</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> PENDING = <span class=\"string\">&#x27;pending&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> FULFILLED = <span class=\"string\">&#x27;fulfilled&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> REJECTED = <span class=\"string\">&#x27;rejected&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyPromise</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">executor</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._status = PENDING     <span class=\"comment\">// PromiseçŠ¶æ€</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue = []    <span class=\"comment\">// æˆåŠŸé˜Ÿåˆ—, resolveæ—¶è§¦å‘</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue = []     <span class=\"comment\">// å¤±è´¥é˜Ÿåˆ—, rejectæ—¶è§¦å‘</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ç”±äºresolve/rejectæ˜¯åœ¨executorå†…éƒ¨è¢«è°ƒç”¨, å› æ­¤éœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°å›ºå®šthisæŒ‡å‘, å¦åˆ™æ‰¾ä¸åˆ°this._resolveQueue</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _resolve = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>._status !== PENDING) <span class=\"keyword\">return</span>   <span class=\"comment\">// å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">this</span>._status = FULFILLED              <span class=\"comment\">// å˜æ›´çŠ¶æ€</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// è¿™é‡Œä¹‹æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,æ˜¯ä¸ºäº†å®ç°è§„èŒƒè¦æ±‚çš„ &quot;then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡&quot;</span></span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœä½¿ç”¨ä¸€ä¸ªå˜é‡è€Œéé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,é‚£ä¹ˆå³ä½¿å¤šæ¬¡p1.then()ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒ</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">while</span>(<span class=\"params\"><span class=\"built_in\">this</span>._resolveQueue.length</span>)</span> &#123;    </span><br><span class=\"line\">                <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._resolveQueue.shift()</span><br><span class=\"line\">                callback(val)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// å®ç°åŒresolve</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _reject = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>._status !== PENDING) <span class=\"keyword\">return</span>   <span class=\"comment\">// å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span></span><br><span class=\"line\">            <span class=\"built_in\">this</span>._status = REJECTED               <span class=\"comment\">// å˜æ›´çŠ¶æ€</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">while</span>(<span class=\"params\"><span class=\"built_in\">this</span>._rejectQueue.length</span>)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._rejectQueue.shift()</span><br><span class=\"line\">                callback(val)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor,å¹¶ä¼ å…¥resolveå’Œreject</span></span><br><span class=\"line\">        executor(_resolve, _reject)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">then</span>(<span class=\"params\">resolveFn, rejectFn</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue.push(resolveFn)</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue.push(rejectFn)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-thençš„é“¾å¼è°ƒç”¨\"><a href=\"#3-thençš„é“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"3. thençš„é“¾å¼è°ƒç”¨\"></a>3. thençš„é“¾å¼è°ƒç”¨</h2><p>è¡¥å……å®Œè§„èŒƒï¼Œæˆ‘ä»¬æ¥ç€æ¥å®ç°é“¾å¼è°ƒç”¨ï¼Œè¿™æ˜¯Promiseå®ç°çš„é‡ç‚¹å’Œéš¾ç‚¹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹thenæ˜¯å¦‚ä½•é“¾å¼è°ƒç”¨çš„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const p1 &#x3D; new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">  \tresolve(1)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">p1.then(res &#x3D;&gt; &#123;</span><br><span class=\"line\">        console.log(res)</span><br><span class=\"line\">        &#x2F;&#x2F;thenå›è°ƒä¸­å¯ä»¥returnä¸€ä¸ªPromise</span><br><span class=\"line\">        return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">            setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">            \tresolve(2)</span><br><span class=\"line\">            &#125;, 1000)</span><br><span class=\"line\">     \t&#125;)</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">    .then(res &#x3D;&gt; &#123;</span><br><span class=\"line\">        console.log(res)</span><br><span class=\"line\">        &#x2F;&#x2F;thenå›è°ƒä¸­ä¹Ÿå¯ä»¥returnä¸€ä¸ªå€¼</span><br><span class=\"line\">        return 3</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(res &#x3D;&gt; &#123;</span><br><span class=\"line\">    \tconsole.log(res)</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡º</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬æ€è€ƒä¸€ä¸‹å¦‚ä½•å®ç°è¿™ç§é“¾å¼è°ƒç”¨ï¼š</p>\n<ol>\n<li>æ˜¾ç„¶<code>.then()</code>éœ€è¦è¿”å›ä¸€ä¸ªPromiseï¼Œè¿™æ ·æ‰èƒ½æ‰¾åˆ°thenæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæŠŠthenæ–¹æ³•çš„è¿”å›å€¼åŒ…è£…æˆPromiseã€‚</li>\n<li><code>.then()</code>çš„å›è°ƒéœ€è¦æ‹¿åˆ°ä¸Šä¸€ä¸ª<code>.then()</code>çš„è¿”å›å€¼</li>\n<li><code>.then()</code>çš„å›è°ƒéœ€è¦é¡ºåºæ‰§è¡Œï¼Œä»¥ä¸Šé¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œè™½ç„¶ä¸­é—´returnäº†ä¸€ä¸ªPromiseï¼Œä½†æ‰§è¡Œé¡ºåºä»è¦ä¿è¯æ˜¯1-&gt;2-&gt;3ã€‚æˆ‘ä»¬è¦ç­‰å¾…å½“å‰PromiseçŠ¶æ€å˜æ›´åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªthenæ”¶é›†çš„å›è°ƒï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬å¯¹thençš„è¿”å›å€¼åˆ†ç±»è®¨è®º</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// thenæ–¹æ³•æ”¹è¿›</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">then</span>(<span class=\"params\">resolveFn, rejectFn</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// returnä¸€ä¸ªæ–°çš„promise</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// æŠŠresolveFné‡æ–°åŒ…è£…ä¸€ä¸‹,å†pushè¿›resolveæ‰§è¡Œé˜Ÿåˆ—,è¿™æ˜¯ä¸ºäº†èƒ½å¤Ÿè·å–å›è°ƒçš„è¿”å›å€¼è¿›è¡Œåˆ†ç±»è®¨è®º</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> fulfilledFn = <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//æ‰§è¡Œç¬¬ä¸€ä¸ª(å½“å‰çš„)Promiseçš„æˆåŠŸå›è°ƒ,å¹¶è·å–è¿”å›å€¼</span></span><br><span class=\"line\">                <span class=\"keyword\">let</span> x = resolveFn(value)</span><br><span class=\"line\">                <span class=\"comment\">//åˆ†ç±»è®¨è®ºè¿”å›å€¼,å¦‚æœæ˜¯Promise,é‚£ä¹ˆç­‰å¾…PromiseçŠ¶æ€å˜æ›´,å¦åˆ™ç›´æ¥resolve</span></span><br><span class=\"line\">                <span class=\"comment\">//è¿™é‡Œresolveä¹‹åï¼Œå°±èƒ½è¢«ä¸‹ä¸€ä¸ª.then()çš„å›è°ƒè·å–åˆ°è¿”å›å€¼ï¼Œä»è€Œå®ç°é“¾å¼è°ƒç”¨</span></span><br><span class=\"line\">                x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                reject(error)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//æŠŠåç»­thenæ”¶é›†çš„ä¾èµ–éƒ½pushè¿›å½“å‰Promiseçš„æˆåŠŸå›è°ƒé˜Ÿåˆ—ä¸­(_rejectQueue), è¿™æ˜¯ä¸ºäº†ä¿è¯é¡ºåºè°ƒç”¨</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue.push(fulfilledFn)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// rejectåŒç†</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> rejectedFn  = <span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">let</span> x = rejectFn(error)</span><br><span class=\"line\">                x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                reject(error)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue.push(rejectedFn)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å°±èƒ½æµ‹è¯•ä¸€ä¸‹é“¾å¼è°ƒç”¨ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        \tresolve(<span class=\"number\">1</span>)</span><br><span class=\"line\">      &#125;, <span class=\"number\">500</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">p1</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    \t<span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º 1 2 3</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"4-å€¼ç©¿é€-amp-çŠ¶æ€å·²å˜æ›´çš„æƒ…å†µ\"><a href=\"#4-å€¼ç©¿é€-amp-çŠ¶æ€å·²å˜æ›´çš„æƒ…å†µ\" class=\"headerlink\" title=\"4.å€¼ç©¿é€ &amp; çŠ¶æ€å·²å˜æ›´çš„æƒ…å†µ\"></a>4.å€¼ç©¿é€ &amp; çŠ¶æ€å·²å˜æ›´çš„æƒ…å†µ</h2><p>æˆ‘ä»¬å·²ç»åˆæ­¥å®Œæˆäº†é“¾å¼è°ƒç”¨ï¼Œä½†æ˜¯å¯¹äº then() æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜è¦ä¸¤ä¸ªç»†èŠ‚éœ€è¦å¤„ç†ä¸€ä¸‹</p>\n<ol>\n<li><strong>å€¼ç©¿é€</strong>ï¼šæ ¹æ®è§„èŒƒï¼Œå¦‚æœ then() æ¥æ”¶çš„å‚æ•°ä¸æ˜¯functionï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¿½ç•¥å®ƒã€‚å¦‚æœæ²¡æœ‰å¿½ç•¥ï¼Œå½“then()å›è°ƒä¸ä¸ºfunctionæ—¶å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´é“¾å¼è°ƒç”¨ä¸­æ–­</li>\n<li><strong>å¤„ç†çŠ¶æ€ä¸ºresolve/rejectçš„æƒ…å†µ</strong>ï¼šå…¶å®æˆ‘ä»¬ä¸Šè¾¹ then() çš„å†™æ³•æ˜¯å¯¹åº”çŠ¶æ€ä¸º<code>padding</code>çš„æƒ…å†µï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œresolve/reject åœ¨ then() ä¹‹å‰å°±è¢«æ‰§è¡Œï¼ˆæ¯”å¦‚<code>Promise.resolve().then()</code>ï¼‰ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™è¿˜æŠŠthen()å›è°ƒpushè¿›resolve/rejectçš„æ‰§è¡Œé˜Ÿåˆ—é‡Œï¼Œé‚£ä¹ˆå›è°ƒå°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› æ­¤å¯¹äºçŠ¶æ€å·²ç»å˜ä¸º<code>fulfilled</code>æˆ–<code>rejected</code>çš„æƒ…å†µï¼Œæˆ‘ä»¬ç›´æ¥æ‰§è¡Œthenå›è°ƒï¼š</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">then</span>(<span class=\"params\">resolveFn, rejectFn</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®è§„èŒƒï¼Œå¦‚æœthençš„å‚æ•°ä¸æ˜¯functionï¼Œåˆ™æˆ‘ä»¬éœ€è¦å¿½ç•¥å®ƒ, è®©é“¾å¼è°ƒç”¨ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class=\"line\">    <span class=\"keyword\">typeof</span> resolveFn !== <span class=\"string\">&#x27;function&#x27;</span> ? resolveFn = <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> value : <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">typeof</span> rejectFn !== <span class=\"string\">&#x27;function&#x27;</span> ? rejectFn = <span class=\"function\"><span class=\"params\">reason</span> =&gt;</span> &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(reason <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Error</span>? reason.message:reason);</span><br><span class=\"line\">    &#125; : <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// returnä¸€ä¸ªæ–°çš„promise</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// æŠŠresolveFné‡æ–°åŒ…è£…ä¸€ä¸‹,å†pushè¿›resolveæ‰§è¡Œé˜Ÿåˆ—,è¿™æ˜¯ä¸ºäº†èƒ½å¤Ÿè·å–å›è°ƒçš„è¿”å›å€¼è¿›è¡Œåˆ†ç±»è®¨è®º</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> fulfilledFn = <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ‰§è¡Œç¬¬ä¸€ä¸ª(å½“å‰çš„)Promiseçš„æˆåŠŸå›è°ƒ,å¹¶è·å–è¿”å›å€¼</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> x = resolveFn(value)</span><br><span class=\"line\">            <span class=\"comment\">// åˆ†ç±»è®¨è®ºè¿”å›å€¼,å¦‚æœæ˜¯Promise,é‚£ä¹ˆç­‰å¾…PromiseçŠ¶æ€å˜æ›´,å¦åˆ™ç›´æ¥resolve</span></span><br><span class=\"line\">            x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">        \treject(error)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// rejectåŒç†</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> rejectedFn  = <span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> x = rejectFn(error)</span><br><span class=\"line\">            x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">        \treject(error)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (<span class=\"built_in\">this</span>._status) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½“çŠ¶æ€ä¸ºpendingæ—¶,æŠŠthenå›è°ƒpushè¿›resolve/rejectæ‰§è¡Œé˜Ÿåˆ—,ç­‰å¾…æ‰§è¡Œ</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> PENDING:</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._resolveQueue.push(fulfilledFn)</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._rejectQueue.push(rejectedFn)</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"comment\">// å½“çŠ¶æ€å·²ç»å˜ä¸ºresolve/rejectæ—¶,ç›´æ¥æ‰§è¡Œthenå›è°ƒ</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> FULFILLED:</span><br><span class=\"line\">            fulfilledFn(<span class=\"built_in\">this</span>._value)    <span class=\"comment\">// this._valueæ˜¯ä¸Šä¸€ä¸ªthenå›è°ƒreturnçš„å€¼(è§å®Œæ•´ç‰ˆä»£ç )</span></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> REJECTED:</span><br><span class=\"line\">            rejectedFn(<span class=\"built_in\">this</span>._value)</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"5-å…¼å®¹åŒæ­¥ä»»åŠ¡\"><a href=\"#5-å…¼å®¹åŒæ­¥ä»»åŠ¡\" class=\"headerlink\" title=\"5.å…¼å®¹åŒæ­¥ä»»åŠ¡\"></a>5.å…¼å®¹åŒæ­¥ä»»åŠ¡</h2><p>å®Œæˆäº†thençš„é“¾å¼è°ƒç”¨ä»¥åï¼Œæˆ‘ä»¬å†å¤„ç†ä¸€ä¸ªå‰è¾¹çš„ç»†èŠ‚ï¼Œç„¶åæ”¾å‡ºå®Œæ•´ä»£ç ã€‚ä¸Šæ–‡æˆ‘ä»¬è¯´è¿‡ï¼ŒPromiseçš„æ‰§è¡Œé¡ºåºæ˜¯<code>new Promise -&gt; then()æ”¶é›†å›è°ƒ -&gt; resolve/rejectæ‰§è¡Œå›è°ƒ</code>ï¼Œè¿™ä¸€é¡ºåºæ˜¯å»ºç«‹åœ¨<strong>executoræ˜¯å¼‚æ­¥ä»»åŠ¡</strong>çš„å‰æä¸Šçš„ï¼Œå¦‚æœexecutoræ˜¯ä¸€ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆé¡ºåºå°±ä¼šå˜æˆ<code>new Promise -&gt; resolve/rejectæ‰§è¡Œå›è°ƒ -&gt; then()æ”¶é›†å›è°ƒ</code>ï¼Œresolveçš„æ‰§è¡Œè·‘åˆ°thenä¹‹å‰å»äº†ï¼Œä¸ºäº†å…¼å®¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ç»™<code>resolve/reject</code>æ‰§è¡Œå›è°ƒçš„æ“ä½œåŒ…ä¸€ä¸ªsetTimeoutï¼Œè®©å®ƒå¼‚æ­¥æ‰§è¡Œã€‚</p>\n<blockquote>\n<p>è¿™é‡Œæ’ä¸€å¥ï¼Œæœ‰å…³è¿™ä¸ªsetTimeoutï¼Œå…¶å®è¿˜æœ‰ä¸€ç•ªå­¦é—®ã€‚è™½ç„¶è§„èŒƒæ²¡æœ‰è¦æ±‚å›è°ƒåº”è¯¥è¢«æ”¾è¿›å®ä»»åŠ¡é˜Ÿåˆ—è¿˜æ˜¯å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½†å…¶å®Promiseçš„é»˜è®¤å®ç°æ˜¯æ”¾è¿›äº†å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæˆ‘ä»¬çš„å®ç°ï¼ˆåŒ…æ‹¬å¤§å¤šæ•°Promiseæ‰‹åŠ¨å®ç°å’Œpolyfillçš„è½¬åŒ–ï¼‰éƒ½æ˜¯ä½¿ç”¨setTimeoutæ”¾å…¥äº†å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨MutationObserveræ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼‰</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Promise&#x2F;A+è§„å®šçš„ä¸‰ç§çŠ¶æ€</span><br><span class=\"line\">const PENDING &#x3D; &#39;pending&#39;</span><br><span class=\"line\">const FULFILLED &#x3D; &#39;fulfilled&#39;</span><br><span class=\"line\">const REJECTED &#x3D; &#39;rejected&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">class MyPromise &#123;</span><br><span class=\"line\">  \t&#x2F;&#x2F; æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒ</span><br><span class=\"line\">    constructor(executor) &#123;</span><br><span class=\"line\">        this._status &#x3D; PENDING     &#x2F;&#x2F; PromiseçŠ¶æ€</span><br><span class=\"line\">        this._value &#x3D; undefined    &#x2F;&#x2F; å‚¨å­˜thenå›è°ƒreturnçš„å€¼</span><br><span class=\"line\">        this._resolveQueue &#x3D; []    &#x2F;&#x2F; æˆåŠŸé˜Ÿåˆ—, resolveæ—¶è§¦å‘</span><br><span class=\"line\">        this._rejectQueue &#x3D; []     &#x2F;&#x2F; å¤±è´¥é˜Ÿåˆ—, rejectæ—¶è§¦å‘</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; ç”±äºresolve&#x2F;rejectæ˜¯åœ¨executorå†…éƒ¨è¢«è°ƒç”¨, å› æ­¤éœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°å›ºå®šthisæŒ‡å‘, å¦åˆ™æ‰¾ä¸åˆ°this._resolveQueue</span><br><span class=\"line\">        let _resolve &#x3D; (val) &#x3D;&gt; &#123;</span><br><span class=\"line\">            &#x2F;&#x2F;æŠŠresolveæ‰§è¡Œå›è°ƒçš„æ“ä½œå°è£…æˆä¸€ä¸ªå‡½æ•°,æ”¾è¿›setTimeouté‡Œ,ä»¥å…¼å®¹executoræ˜¯åŒæ­¥ä»£ç çš„æƒ…å†µ</span><br><span class=\"line\">            const run &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">                if(this._status !&#x3D;&#x3D; PENDING) return   &#x2F;&#x2F; å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span><br><span class=\"line\">                this._status &#x3D; FULFILLED              &#x2F;&#x2F; å˜æ›´çŠ¶æ€</span><br><span class=\"line\">                this._value &#x3D; val                     &#x2F;&#x2F; å‚¨å­˜å½“å‰value</span><br><span class=\"line\"></span><br><span class=\"line\">                &#x2F;&#x2F; è¿™é‡Œä¹‹æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,æ˜¯ä¸ºäº†å®ç°è§„èŒƒè¦æ±‚çš„ &quot;then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡&quot;</span><br><span class=\"line\">                &#x2F;&#x2F; å¦‚æœä½¿ç”¨ä¸€ä¸ªå˜é‡è€Œéé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,é‚£ä¹ˆå³ä½¿å¤šæ¬¡p1.then()ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒ</span><br><span class=\"line\">                while(this._resolveQueue.length) &#123;    </span><br><span class=\"line\">                    const callback &#x3D; this._resolveQueue.shift()</span><br><span class=\"line\">                    callback(val)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            setTimeout(run)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#x2F;&#x2F; å®ç°åŒresolve</span><br><span class=\"line\">        let _reject &#x3D; (val) &#x3D;&gt; &#123;</span><br><span class=\"line\">            const run &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">                if(this._status !&#x3D;&#x3D; PENDING) return   &#x2F;&#x2F; å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span><br><span class=\"line\">                this._status &#x3D; REJECTED               &#x2F;&#x2F; å˜æ›´çŠ¶æ€</span><br><span class=\"line\">                this._value &#x3D; val                     &#x2F;&#x2F; å‚¨å­˜å½“å‰value</span><br><span class=\"line\">                while(this._rejectQueue.length) &#123;</span><br><span class=\"line\">                    const callback &#x3D; this._rejectQueue.shift()</span><br><span class=\"line\">                    callback(val)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            setTimeout(run)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#x2F;&#x2F; new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor,å¹¶ä¼ å…¥resolveå’Œreject</span><br><span class=\"line\">        executor(_resolve, _reject)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#x2F;&#x2F; thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒ</span><br><span class=\"line\">    then(resolveFn, rejectFn) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; æ ¹æ®è§„èŒƒï¼Œå¦‚æœthençš„å‚æ•°ä¸æ˜¯functionï¼Œåˆ™æˆ‘ä»¬éœ€è¦å¿½ç•¥å®ƒ, è®©é“¾å¼è°ƒç”¨ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span><br><span class=\"line\">        typeof resolveFn !&#x3D;&#x3D; &#39;function&#39; ? resolveFn &#x3D; value &#x3D;&gt; value : null</span><br><span class=\"line\">        typeof rejectFn !&#x3D;&#x3D; &#39;function&#39; ? rejectFn &#x3D; reason &#x3D;&gt; &#123;</span><br><span class=\"line\">        \tthrow new Error(reason instanceof Error? reason.message:reason);</span><br><span class=\"line\">        &#125; : null</span><br><span class=\"line\"></span><br><span class=\"line\">        &#x2F;&#x2F; returnä¸€ä¸ªæ–°çš„promise</span><br><span class=\"line\">        return new MyPromise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; æŠŠresolveFné‡æ–°åŒ…è£…ä¸€ä¸‹,å†pushè¿›resolveæ‰§è¡Œé˜Ÿåˆ—,è¿™æ˜¯ä¸ºäº†èƒ½å¤Ÿè·å–å›è°ƒçš„è¿”å›å€¼è¿›è¡Œåˆ†ç±»è®¨è®º</span><br><span class=\"line\">        const fulfilledFn &#x3D; value &#x3D;&gt; &#123;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; æ‰§è¡Œç¬¬ä¸€ä¸ª(å½“å‰çš„)Promiseçš„æˆåŠŸå›è°ƒ,å¹¶è·å–è¿”å›å€¼</span><br><span class=\"line\">                let x &#x3D; resolveFn(value)</span><br><span class=\"line\">                &#x2F;&#x2F; åˆ†ç±»è®¨è®ºè¿”å›å€¼,å¦‚æœæ˜¯Promise,é‚£ä¹ˆç­‰å¾…PromiseçŠ¶æ€å˜æ›´,å¦åˆ™ç›´æ¥resolve</span><br><span class=\"line\">                x instanceof MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">            &#125; catch (error) &#123;</span><br><span class=\"line\">            \treject(error)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#x2F;&#x2F; rejectåŒç†</span><br><span class=\"line\">            const rejectedFn  &#x3D; error &#x3D;&gt; &#123;</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    let x &#x3D; rejectFn(error)</span><br><span class=\"line\">                    x instanceof MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">                &#125; catch (error) &#123;</span><br><span class=\"line\">                \treject(error)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            switch (this._status) &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; å½“çŠ¶æ€ä¸ºpendingæ—¶,æŠŠthenå›è°ƒpushè¿›resolve&#x2F;rejectæ‰§è¡Œé˜Ÿåˆ—,ç­‰å¾…æ‰§è¡Œ</span><br><span class=\"line\">                case PENDING:</span><br><span class=\"line\">                    this._resolveQueue.push(fulfilledFn)</span><br><span class=\"line\">                    this._rejectQueue.push(rejectedFn)</span><br><span class=\"line\">                    break;</span><br><span class=\"line\">                &#x2F;&#x2F; å½“çŠ¶æ€å·²ç»å˜ä¸ºresolve&#x2F;rejectæ—¶,ç›´æ¥æ‰§è¡Œthenå›è°ƒ</span><br><span class=\"line\">                case FULFILLED:</span><br><span class=\"line\">                    fulfilledFn(this._value)    &#x2F;&#x2F; this._valueæ˜¯ä¸Šä¸€ä¸ªthenå›è°ƒreturnçš„å€¼(è§å®Œæ•´ç‰ˆä»£ç )</span><br><span class=\"line\">                    break;</span><br><span class=\"line\">                case REJECTED:</span><br><span class=\"line\">                    rejectedFn(this._value)</span><br><span class=\"line\">                    break;</span><br><span class=\"line\">        \t&#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªPromiseï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> p1 = <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"number\">1</span>)          <span class=\"comment\">//åŒæ­¥executoræµ‹è¯•</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">p1</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span>          <span class=\"comment\">//é“¾å¼è°ƒç”¨æµ‹è¯•</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then()             <span class=\"comment\">//å€¼ç©¿é€æµ‹è¯•</span></span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            resolve(<span class=\"number\">3</span>)      <span class=\"comment\">//è¿”å›Promiseæµ‹è¯•</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(res)</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;rejectæµ‹è¯•&#x27;</span>)   <span class=\"comment\">//rejectæµ‹è¯•</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\">() =&gt;</span> &#123;&#125;, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º </span></span><br><span class=\"line\"><span class=\"comment\">// 1 </span></span><br><span class=\"line\"><span class=\"comment\">// 2 </span></span><br><span class=\"line\"><span class=\"comment\">// 3 </span></span><br><span class=\"line\"><span class=\"comment\">// Error: rejectæµ‹è¯•</span></span><br></pre></td></tr></table></figure>\n\n<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†Promiseçš„ä¸»è¦åŠŸèƒ½<code>(ï½€âˆ€Â´)Î¨</code>å‰©ä¸‹çš„å‡ ä¸ªæ–¹æ³•éƒ½éå¸¸ç®€å•ï¼Œæˆ‘ä»¬é¡ºæ‰‹æ”¶æ‹¾æ‰ï¼š</p>\n<h2 id=\"Promise-prototype-catch\"><a href=\"#Promise-prototype-catch\" class=\"headerlink\" title=\"Promise.prototype.catch()\"></a>Promise.prototype.catch()</h2><blockquote>\n<p><code>catch()æ–¹æ³•</code>è¿”å›ä¸€ä¸ªPromiseï¼Œå¹¶ä¸”å¤„ç†æ‹’ç»çš„æƒ…å†µã€‚å®ƒçš„è¡Œä¸ºä¸è°ƒç”¨Promise.prototype.then(undefined, onRejected) ç›¸åŒã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// catchæ–¹æ³•å…¶å®å°±æ˜¯æ‰§è¡Œä¸€ä¸‹thençš„ç¬¬äºŒä¸ªå›è°ƒ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">catch</span>(<span class=\"params\">rejectFn</span>)</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.then(<span class=\"literal\">undefined</span>, rejectFn)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Promise-prototype-finally\"><a href=\"#Promise-prototype-finally\" class=\"headerlink\" title=\"Promise.prototype.finally()\"></a>Promise.prototype.finally()</h2><blockquote>\n<p><code>finally()æ–¹æ³•</code>è¿”å›ä¸€ä¸ªPromiseã€‚åœ¨promiseç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯fulfilledæˆ–è€…æ˜¯rejectedï¼Œéƒ½ä¼šæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚åœ¨finallyä¹‹åï¼Œè¿˜å¯ä»¥ç»§ç»­thenã€‚å¹¶ä¸”ä¼šå°†å€¼åŸå°ä¸åŠ¨çš„ä¼ é€’ç»™åé¢çš„then</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; finallyæ–¹æ³•</span><br><span class=\"line\">finally(callback) &#123;</span><br><span class=\"line\">    return this.then(</span><br><span class=\"line\">        value &#x3D;&gt; MyPromise.resolve(callback()).then(() &#x3D;&gt; value),             &#x2F;&#x2F; MyPromise.resolveæ‰§è¡Œå›è°ƒ,å¹¶åœ¨thenä¸­returnç»“æœä¼ é€’ç»™åé¢çš„Promise</span><br><span class=\"line\">        reason &#x3D;&gt; MyPromise.resolve(callback()).then(() &#x3D;&gt; &#123; throw reason &#125;)  &#x2F;&#x2F; rejectåŒç†</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>PS. æœ‰åŒå­¦é—®æˆ‘<code>MyPromise.resolve(callback())</code>çš„æ„ä¹‰ï¼Œè¿™é‡Œè¡¥å……è§£é‡Šä¸€ä¸‹ï¼šè¿™ä¸ªå†™æ³•å…¶å®æ¶‰åŠåˆ°ä¸€ä¸ª<code>finally()</code>çš„ä½¿ç”¨ç»†èŠ‚ï¼Œ<strong>finally()å¦‚æœreturnäº†ä¸€ä¸ªrejectçŠ¶æ€çš„Promiseï¼Œå°†ä¼šæ”¹å˜å½“å‰Promiseçš„çŠ¶æ€</strong>ï¼Œè¿™ä¸ª<code>MyPromise.resolve</code>å°±ç”¨äºæ”¹å˜PromiseçŠ¶æ€ï¼Œåœ¨finally()æ²¡æœ‰è¿”å›rejectæ€Promiseæˆ–throwé”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå»æ‰<code>MyPromise.resolve</code>ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ˆæ¬¢è¿å¤§å®¶å‘æˆ‘æé—®ï¼Œå‹˜è¯¯çš„è¿‡ç¨‹ä¸­ä¹Ÿèƒ½å¾ˆå¥½åœ°åŠ æ·±è‡ªå·±å¯¹Promiseçš„ç†è§£ï¼Œå¤§å®¶å¯ä»¥åœ¨å„ä¸ªäº¤æµç¾¤é‡Œç›´æ¥@æˆ‘ï¼‰</p>\n<blockquote>\n<p>å‚è€ƒèµ„æ–™ï¼š<a href=\"https://www.jianshu.com/p/f0b94daf9bf7\">å¯¹ Promise.prototype.finally() çš„ç²—æµ…ç†è§£</a></p>\n</blockquote>\n<h2 id=\"Promise-resolve\"><a href=\"#Promise-resolve\" class=\"headerlink\" title=\"Promise.resolve()\"></a>Promise.resolve()</h2><blockquote>\n<p><code>Promise.resolve(value)</code>æ–¹æ³•è¿”å›ä¸€ä¸ªä»¥ç»™å®šå€¼è§£æåçš„Promise å¯¹è±¡ã€‚å¦‚æœè¯¥å€¼ä¸ºpromiseï¼Œè¿”å›è¿™ä¸ªpromiseï¼›å¦‚æœè¿™ä¸ªå€¼æ˜¯thenableï¼ˆå³å¸¦æœ‰â€thenâ€ æ–¹æ³•)ï¼‰ï¼Œè¿”å›çš„promiseä¼šâ€œè·Ÿéšâ€è¿™ä¸ªthenableçš„å¯¹è±¡ï¼Œé‡‡ç”¨å®ƒçš„æœ€ç»ˆçŠ¶æ€ï¼›å¦åˆ™è¿”å›çš„promiseå°†ä»¥æ­¤å€¼å®Œæˆã€‚æ­¤å‡½æ•°å°†ç±»promiseå¯¹è±¡çš„å¤šå±‚åµŒå¥—å±•å¹³ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é™æ€çš„resolveæ–¹æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">resolve</span>(<span class=\"params\">value</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®è§„èŒƒ, å¦‚æœå‚æ•°æ˜¯Promiseå®ä¾‹, ç›´æ¥returnè¿™ä¸ªå®ä¾‹</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(value <span class=\"keyword\">instanceof</span> MyPromise) <span class=\"keyword\">return</span> value </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> resolve(value))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Promise-reject\"><a href=\"#Promise-reject\" class=\"headerlink\" title=\"Promise.reject()\"></a>Promise.reject()</h2><blockquote>\n<p><code>Promise.reject()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸¦æœ‰æ‹’ç»åŸå› çš„Promiseå¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é™æ€çš„rejectæ–¹æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">reject</span>(<span class=\"params\">reason</span>)</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> reject(reason))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all()\"></a>Promise.all()</h2><blockquote>\n<p><code>Promise.all(iterable)</code>æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥åŸå› çš„æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é™æ€çš„allæ–¹æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">all</span>(<span class=\"params\">promiseArr</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = []</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        promiseArr.forEach(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Promise.resolve(p)ç”¨äºå¤„ç†ä¼ å…¥å€¼ä¸ä¸ºPromiseçš„æƒ…å†µ</span></span><br><span class=\"line\">            MyPromise.resolve(p).then(</span><br><span class=\"line\">                val =&gt; &#123;</span><br><span class=\"line\">                    index++</span><br><span class=\"line\">                    result[i] = val</span><br><span class=\"line\">                    <span class=\"comment\">// æ‰€æœ‰thenæ‰§è¡Œå, resolveç»“æœ</span></span><br><span class=\"line\">                    <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">index === promiseArr.length</span>)</span> &#123;</span><br><span class=\"line\">                        resolve(result)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                err =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// æœ‰ä¸€ä¸ªPromiseè¢«rejectæ—¶ï¼ŒMyPromiseçš„çŠ¶æ€å˜ä¸ºreject</span></span><br><span class=\"line\">                    reject(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            )</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race()\"></a>Promise.race()</h2><blockquote>\n<p><code>Promise.race(iterable)</code>æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">race</span>(<span class=\"params\">promiseArr</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// åŒæ—¶æ‰§è¡ŒPromise,å¦‚æœæœ‰ä¸€ä¸ªPromiseçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜,å°±å˜æ›´æ–°MyPromiseçš„çŠ¶æ€</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">of</span> promiseArr) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Promise.resolve(p)ç”¨äºå¤„ç†ä¼ å…¥å€¼ä¸ä¸ºPromiseçš„æƒ…å†µ</span></span><br><span class=\"line\">            MyPromise.resolve(p).then(</span><br><span class=\"line\">                value =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// æ³¨æ„è¿™ä¸ªresolveæ˜¯ä¸Šè¾¹new MyPromiseçš„</span></span><br><span class=\"line\">                    resolve(value)</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                err =&gt; &#123;</span><br><span class=\"line\">                    reject(err)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            )</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h2><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Promise/A+è§„å®šçš„ä¸‰ç§çŠ¶æ€</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> PENDING = <span class=\"string\">&#x27;pending&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> FULFILLED = <span class=\"string\">&#x27;fulfilled&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> REJECTED = <span class=\"string\">&#x27;rejected&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyPromise</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ„é€ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">executor</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>._status = PENDING     <span class=\"comment\">// PromiseçŠ¶æ€</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._value = <span class=\"literal\">undefined</span>    <span class=\"comment\">// å‚¨å­˜thenå›è°ƒreturnçš„å€¼</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._resolveQueue = []    <span class=\"comment\">// æˆåŠŸé˜Ÿåˆ—, resolveæ—¶è§¦å‘</span></span><br><span class=\"line\">        <span class=\"built_in\">this</span>._rejectQueue = []     <span class=\"comment\">// å¤±è´¥é˜Ÿåˆ—, rejectæ—¶è§¦å‘</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ç”±äºresolve/rejectæ˜¯åœ¨executorå†…éƒ¨è¢«è°ƒç”¨, å› æ­¤éœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°å›ºå®šthisæŒ‡å‘, å¦åˆ™æ‰¾ä¸åˆ°this._resolveQueue</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _resolve = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//æŠŠresolveæ‰§è¡Œå›è°ƒçš„æ“ä½œå°è£…æˆä¸€ä¸ªå‡½æ•°,æ”¾è¿›setTimeouté‡Œ,ä»¥å…¼å®¹executoræ˜¯åŒæ­¥ä»£ç çš„æƒ…å†µ</span></span><br><span class=\"line\">            <span class=\"keyword\">const</span> run = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>._status !== PENDING) <span class=\"keyword\">return</span>   <span class=\"comment\">// å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span></span><br><span class=\"line\">                <span class=\"built_in\">this</span>._status = FULFILLED              <span class=\"comment\">// å˜æ›´çŠ¶æ€</span></span><br><span class=\"line\">                <span class=\"built_in\">this</span>._value = val                     <span class=\"comment\">// å‚¨å­˜å½“å‰value</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// è¿™é‡Œä¹‹æ‰€ä»¥ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,æ˜¯ä¸ºäº†å®ç°è§„èŒƒè¦æ±‚çš„ &quot;then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡&quot;</span></span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœä½¿ç”¨ä¸€ä¸ªå˜é‡è€Œéé˜Ÿåˆ—æ¥å‚¨å­˜å›è°ƒ,é‚£ä¹ˆå³ä½¿å¤šæ¬¡p1.then()ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒ</span></span><br><span class=\"line\">                <span class=\"keyword\">while</span> (<span class=\"built_in\">this</span>._resolveQueue.length) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._resolveQueue.shift()</span><br><span class=\"line\">                    callback(val)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(run)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// å®ç°åŒresolve</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> _reject = <span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> run = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>._status !== PENDING) <span class=\"keyword\">return</span>   <span class=\"comment\">// å¯¹åº”è§„èŒƒä¸­çš„&quot;çŠ¶æ€åªèƒ½ç”±pendingåˆ°fulfilledæˆ–rejected&quot;</span></span><br><span class=\"line\">                <span class=\"built_in\">this</span>._status = REJECTED               <span class=\"comment\">// å˜æ›´çŠ¶æ€</span></span><br><span class=\"line\">                <span class=\"built_in\">this</span>._value = val                     <span class=\"comment\">// å‚¨å­˜å½“å‰value</span></span><br><span class=\"line\">                <span class=\"keyword\">while</span> (<span class=\"built_in\">this</span>._rejectQueue.length) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">const</span> callback = <span class=\"built_in\">this</span>._rejectQueue.shift()</span><br><span class=\"line\">                    callback(val)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(run)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// new Promise()æ—¶ç«‹å³æ‰§è¡Œexecutor,å¹¶ä¼ å…¥resolveå’Œreject</span></span><br><span class=\"line\">        executor(_resolve, _reject)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// thenæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå’Œä¸€ä¸ªå¤±è´¥çš„å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">then</span>(<span class=\"params\">resolveFn, rejectFn</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®è§„èŒƒï¼Œå¦‚æœthençš„å‚æ•°ä¸æ˜¯functionï¼Œåˆ™æˆ‘ä»¬éœ€è¦å¿½ç•¥å®ƒ, è®©é“¾å¼è°ƒç”¨ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class=\"line\">        <span class=\"keyword\">typeof</span> resolveFn !== <span class=\"string\">&#x27;function&#x27;</span> ? resolveFn = <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> value : <span class=\"literal\">null</span></span><br><span class=\"line\">        <span class=\"keyword\">typeof</span> rejectFn !== <span class=\"string\">&#x27;function&#x27;</span> ? rejectFn = <span class=\"function\"><span class=\"params\">reason</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(reason <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Error</span> ? reason.message : reason);</span><br><span class=\"line\">        &#125; : <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// returnä¸€ä¸ªæ–°çš„promise</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æŠŠresolveFné‡æ–°åŒ…è£…ä¸€ä¸‹,å†pushè¿›resolveæ‰§è¡Œé˜Ÿåˆ—,è¿™æ˜¯ä¸ºäº†èƒ½å¤Ÿè·å–å›è°ƒçš„è¿”å›å€¼è¿›è¡Œåˆ†ç±»è®¨è®º</span></span><br><span class=\"line\">            <span class=\"keyword\">const</span> fulfilledFn = <span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// æ‰§è¡Œç¬¬ä¸€ä¸ª(å½“å‰çš„)Promiseçš„æˆåŠŸå›è°ƒ,å¹¶è·å–è¿”å›å€¼</span></span><br><span class=\"line\">                    <span class=\"keyword\">let</span> x = resolveFn(value)</span><br><span class=\"line\">                    <span class=\"comment\">// åˆ†ç±»è®¨è®ºè¿”å›å€¼,å¦‚æœæ˜¯Promise,é‚£ä¹ˆç­‰å¾…PromiseçŠ¶æ€å˜æ›´,å¦åˆ™ç›´æ¥resolve</span></span><br><span class=\"line\">                    x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                    reject(error)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// rejectåŒç†</span></span><br><span class=\"line\">            <span class=\"keyword\">const</span> rejectedFn = <span class=\"function\"><span class=\"params\">error</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">let</span> x = rejectFn(error)</span><br><span class=\"line\">                    x <span class=\"keyword\">instanceof</span> MyPromise ? x.then(resolve, reject) : resolve(x)</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                    reject(error)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (<span class=\"built_in\">this</span>._status) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å½“çŠ¶æ€ä¸ºpendingæ—¶,æŠŠthenå›è°ƒpushè¿›resolve/rejectæ‰§è¡Œé˜Ÿåˆ—,ç­‰å¾…æ‰§è¡Œ</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> PENDING:</span><br><span class=\"line\">                    <span class=\"built_in\">this</span>._resolveQueue.push(fulfilledFn)</span><br><span class=\"line\">                    <span class=\"built_in\">this</span>._rejectQueue.push(rejectedFn)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"comment\">// å½“çŠ¶æ€å·²ç»å˜ä¸ºresolve/rejectæ—¶,ç›´æ¥æ‰§è¡Œthenå›è°ƒ</span></span><br><span class=\"line\">                <span class=\"keyword\">case</span> FULFILLED:</span><br><span class=\"line\">                    fulfilledFn(<span class=\"built_in\">this</span>._value)    <span class=\"comment\">// this._valueæ˜¯ä¸Šä¸€ä¸ªthenå›è°ƒreturnçš„å€¼(è§å®Œæ•´ç‰ˆä»£ç )</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> REJECTED:</span><br><span class=\"line\">                    rejectedFn(<span class=\"built_in\">this</span>._value)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//catchæ–¹æ³•å…¶å®å°±æ˜¯æ‰§è¡Œä¸€ä¸‹thençš„ç¬¬äºŒä¸ªå›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">catch</span>(<span class=\"params\">rejectFn</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.then(<span class=\"literal\">undefined</span>, rejectFn)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//finallyæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">finally</span>(<span class=\"params\">callback</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.then(</span><br><span class=\"line\">            value =&gt; MyPromise.resolve(callback()).then(<span class=\"function\">() =&gt;</span> value),             <span class=\"comment\">//æ‰§è¡Œå›è°ƒ,å¹¶returnvalueä¼ é€’ç»™åé¢çš„then</span></span><br><span class=\"line\">            reason =&gt; MyPromise.resolve(callback()).then(<span class=\"function\">() =&gt;</span> &#123; <span class=\"keyword\">throw</span> reason &#125;)  <span class=\"comment\">//rejectåŒç†</span></span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//é™æ€çš„resolveæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">resolve</span>(<span class=\"params\">value</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> MyPromise) <span class=\"keyword\">return</span> value <span class=\"comment\">//æ ¹æ®è§„èŒƒ, å¦‚æœå‚æ•°æ˜¯Promiseå®ä¾‹, ç›´æ¥returnè¿™ä¸ªå®ä¾‹</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> resolve(value))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//é™æ€çš„rejectæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">reject</span>(<span class=\"params\">reason</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> reject(reason))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//é™æ€çš„allæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">all</span>(<span class=\"params\">promiseArr</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> index = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> result = []</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            promiseArr.forEach(<span class=\"function\">(<span class=\"params\">p, i</span>) =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//Promise.resolve(p)ç”¨äºå¤„ç†ä¼ å…¥å€¼ä¸ä¸ºPromiseçš„æƒ…å†µ</span></span><br><span class=\"line\">                MyPromise.resolve(p).then(</span><br><span class=\"line\">                    val =&gt; &#123;</span><br><span class=\"line\">                        index++</span><br><span class=\"line\">                        result[i] = val</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> (index === promiseArr.length) &#123;</span><br><span class=\"line\">                            resolve(result)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    err =&gt; &#123;</span><br><span class=\"line\">                        reject(err)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                )</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//é™æ€çš„raceæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">race</span>(<span class=\"params\">promiseArr</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyPromise(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//åŒæ—¶æ‰§è¡ŒPromise,å¦‚æœæœ‰ä¸€ä¸ªPromiseçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜,å°±å˜æ›´æ–°MyPromiseçš„çŠ¶æ€</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> p <span class=\"keyword\">of</span> promiseArr) &#123;</span><br><span class=\"line\">                MyPromise.resolve(p).then(  <span class=\"comment\">//Promise.resolve(p)ç”¨äºå¤„ç†ä¼ å…¥å€¼ä¸ä¸ºPromiseçš„æƒ…å†µ</span></span><br><span class=\"line\">                    value =&gt; &#123;</span><br><span class=\"line\">                        resolve(value)        <span class=\"comment\">//æ³¨æ„è¿™ä¸ªresolveæ˜¯ä¸Šè¾¹new MyPromiseçš„</span></span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    err =&gt; &#123;</span><br><span class=\"line\">                        reject(err)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                )</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ´‹æ´‹æ´’æ´’150å¤šè¡Œçš„ä»£ç ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥ç»™Promiseçš„å®ç°åšä¸€ä¸ªç»“å°¾äº†ã€‚æˆ‘ä»¬ä»ä¸€ä¸ªæœ€ç®€å•çš„Promiseä½¿ç”¨å®ä¾‹å¼€å§‹ï¼Œé€šè¿‡å¯¹è°ƒç”¨æµç¨‹çš„åˆ†æï¼Œæ ¹æ®è§‚å¯Ÿè€…æ¨¡å¼å®ç°äº†Promiseçš„å¤§è‡´éª¨æ¶ï¼Œç„¶åä¾æ®Promise/A+è§„èŒƒå¡«å……ä»£ç ï¼Œé‡ç‚¹å®ç°äº†then çš„é“¾å¼è°ƒç”¨ï¼Œæœ€åå®Œæˆäº†Promiseçš„é™æ€/å®ä¾‹æ–¹æ³•ã€‚å…¶å®Promiseå®ç°åœ¨æ•´ä½“ä¸Šå¹¶æ²¡æœ‰å¤ªå¤æ‚çš„æ€æƒ³ï¼Œä½†æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„æ—¶å€™å¾€å¾€å¿½ç•¥äº†å¾ˆå¤šPromiseç»†èŠ‚ï¼Œå› è€Œå¾ˆéš¾å†™å‡ºä¸€ä¸ªç¬¦åˆè§„èŒƒçš„Promiseå®ç°ï¼Œæºç çš„å®ç°è¿‡ç¨‹ï¼Œå…¶å®ä¹Ÿæ˜¯å¯¹Promiseä½¿ç”¨ç»†èŠ‚é‡æ–°å­¦ä¹ çš„è¿‡ç¨‹ã€‚</p>\n<h1 id=\"async-awaitå®ç°\"><a href=\"#async-awaitå®ç°\" class=\"headerlink\" title=\"async/awaitå®ç°\"></a>async/awaitå®ç°</h1><p>è™½ç„¶å‰è¾¹èŠ±äº†è¿™ä¹ˆå¤šç¯‡å¹…è®²Promiseçš„å®ç°ï¼Œä¸è¿‡æ¢ç´¢<code>async/await</code>æš‚åœæ‰§è¡Œçš„æœºåˆ¶æ‰æ˜¯æˆ‘ä»¬çš„åˆè¡·ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¿›å…¥è¿™ä¸€å—çš„å†…å®¹ã€‚åŒæ ·åœ°ï¼Œå¼€å¤´æˆ‘ä»¬ç‚¹ä¸€ä¸‹async/awaitçš„ä½¿ç”¨æ„ä¹‰ã€‚ åœ¨å¤šä¸ªå›è°ƒä¾èµ–çš„åœºæ™¯ä¸­ï¼Œå°½ç®¡Promiseé€šè¿‡é“¾å¼è°ƒç”¨å–ä»£äº†å›è°ƒåµŒå¥—ï¼Œä½†è¿‡å¤šçš„é“¾å¼è°ƒç”¨å¯è¯»æ€§ä»ç„¶ä¸ä½³ï¼Œæµç¨‹æ§åˆ¶ä¹Ÿä¸æ–¹ä¾¿ï¼ŒES7 æå‡ºçš„async å‡½æ•°ï¼Œç»ˆäºè®© JS å¯¹äºå¼‚æ­¥æ“ä½œæœ‰äº†ç»ˆæè§£å†³æ–¹æ¡ˆï¼Œç®€æ´ä¼˜ç¾åœ°è§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚</p>\n<blockquote>\n<p>è®¾æƒ³ä¸€ä¸ªè¿™æ ·çš„åœºæ™¯ï¼Œå¼‚æ­¥ä»»åŠ¡a-&gt;b-&gt;cä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡thené“¾å¼è°ƒç”¨æ¥å¤„ç†è¿™äº›å…³ç³»ï¼Œå¯è¯»æ€§å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å…¶ä¸­æŸä¸ªè¿‡ç¨‹ï¼Œæ¯”å¦‚åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œbä¸å¾€ä¸‹æ‰§è¡Œåˆ°cï¼Œé‚£ä¹ˆä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿æ§åˆ¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve(a)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">b</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// do something</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">c</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// do something</span></span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯å¦‚æœé€šè¿‡async/awaitæ¥å®ç°è¿™ä¸ªåœºæ™¯ï¼Œå¯è¯»æ€§å’Œæµç¨‹æ§åˆ¶éƒ½ä¼šæ–¹ä¾¿ä¸å°‘ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> a = <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(a);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> b = <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(b);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> c = <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.resolve(c);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>é‚£ä¹ˆæˆ‘ä»¬è¦å¦‚ä½•å®ç°ä¸€ä¸ªasync/awaitå‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œ<strong>async/awaitå®é™…ä¸Šæ˜¯å¯¹Generatorï¼ˆç”Ÿæˆå™¨ï¼‰çš„å°è£…</strong>ï¼Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚ç”±äºGeneratorå‡ºç°ä¸ä¹…å°±è¢«async/awaitå–ä»£äº†ï¼Œå¾ˆå¤šåŒå­¦å¯¹Generatoræ¯”è¾ƒé™Œç”Ÿï¼Œå› æ­¤æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Generatorçš„ç”¨æ³•ï¼š</p>\n<blockquote>\n<p>ES6 æ–°å¼•å…¥äº† Generator å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ yield å…³é”®å­—ï¼ŒæŠŠå‡½æ•°çš„æ‰§è¡ŒæµæŒ‚èµ·ï¼Œé€šè¿‡next()æ–¹æ³•å¯ä»¥åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä¸ºæ”¹å˜æ‰§è¡Œæµç¨‹æä¾›äº†å¯èƒ½ï¼Œä»è€Œä¸ºå¼‚æ­¥ç¼–ç¨‹æä¾›è§£å†³æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"string\">&#x27;2&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = myGenerator();  <span class=\"comment\">// è·å–è¿­ä»£å™¨</span></span><br><span class=\"line\">gen.next()  <span class=\"comment\">// &#123;value: &quot;1&quot;, done: false&#125;</span></span><br><span class=\"line\">gen.next()  <span class=\"comment\">// &#123;value: &quot;2&quot;, done: false&#125;</span></span><br><span class=\"line\">gen.next()  <span class=\"comment\">// &#123;value: &quot;3&quot;, done: true&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥é€šè¿‡ç»™<code>next()</code>ä¼ å‚, è®©yieldå…·æœ‰è¿”å›å€¼</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"string\">&#x27;1&#x27;</span>)  <span class=\"comment\">// è¾“å‡ºtest1</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"string\">&#x27;2&#x27;</span>)  <span class=\"comment\">// è¾“å‡ºtest2</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"string\">&#x27;3&#x27;</span>)  <span class=\"comment\">// è¾“å‡ºtest3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·å–è¿­ä»£å™¨</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = myGenerator();</span><br><span class=\"line\"></span><br><span class=\"line\">gen.next()</span><br><span class=\"line\">gen.next(<span class=\"string\">&#x27;test1&#x27;</span>)</span><br><span class=\"line\">gen.next(<span class=\"string\">&#x27;test2&#x27;</span>)</span><br><span class=\"line\">gen.next(<span class=\"string\">&#x27;test3&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬çœ‹åˆ°Generatorçš„ç”¨æ³•ï¼Œåº”è¯¥ï¸ä¼šæ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ï¼Œ<code>*/yield</code>å’Œ<code>async/await</code>çœ‹èµ·æ¥å…¶å®å·²ç»å¾ˆç›¸ä¼¼äº†ï¼Œå®ƒä»¬éƒ½æä¾›äº†æš‚åœæ‰§è¡Œçš„åŠŸèƒ½ï¼Œä½†äºŒè€…åˆæœ‰ä¸‰ç‚¹ä¸åŒï¼š</p>\n<ul>\n<li><code>async/await</code>è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨next()å°±èƒ½è‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€æ­¥</li>\n<li><code>async</code>å‡½æ•°è¿”å›å€¼æ˜¯Promiseå¯¹è±¡ï¼Œè€ŒGeneratorè¿”å›çš„æ˜¯ç”Ÿæˆå™¨å¯¹è±¡</li>\n<li><code>await</code>èƒ½å¤Ÿè¿”å›Promiseçš„resolve/rejectçš„å€¼</li>\n</ul>\n<p><strong>æˆ‘ä»¬å¯¹async/awaitçš„å®ç°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å¯¹åº”ä»¥ä¸Šä¸‰ç‚¹å°è£…Generator</strong></p>\n<h2 id=\"1-è‡ªåŠ¨æ‰§è¡Œ\"><a href=\"#1-è‡ªåŠ¨æ‰§è¡Œ\" class=\"headerlink\" title=\"1.è‡ªåŠ¨æ‰§è¡Œ\"></a>1.è‡ªåŠ¨æ‰§è¡Œ</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œå¯¹äºè¿™æ ·ä¸€ä¸ªGeneratorï¼Œæ‰‹åŠ¨æ‰§è¡Œæ˜¯æ€æ ·ä¸€ä¸ªæµç¨‹</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ‰‹åŠ¨æ‰§è¡Œè¿­ä»£å™¨</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = myGenerator()</span><br><span class=\"line\">gen.next().value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(val)</span><br><span class=\"line\">    gen.next().value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(val)</span><br><span class=\"line\">        gen.next().value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(val)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º1 2 3</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»™<code>gen.next()</code>ä¼ å€¼çš„æ–¹å¼ï¼Œè®©yieldèƒ½è¿”å›resolveçš„å€¼</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>))   <span class=\"comment\">// 1</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">2</span>))   <span class=\"comment\">// 2</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))   <span class=\"comment\">// 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ‰‹åŠ¨æ‰§è¡Œè¿­ä»£å™¨</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = myGenerator()</span><br><span class=\"line\">gen.next().value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(val)</span></span><br><span class=\"line\">    gen.next(val).value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// console.log(val)</span></span><br><span class=\"line\">        gen.next(val).value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// console.log(val)</span></span><br><span class=\"line\">            gen.next(val)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>æ˜¾ç„¶ï¼Œæ‰‹åŠ¨æ‰§è¡Œçš„å†™æ³•çœ‹èµ·æ¥æ—¢ç¬¨æ‹™åˆä¸‘é™‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç”Ÿæˆå™¨å‡½æ•°èƒ½è‡ªåŠ¨å¾€ä¸‹æ‰§è¡Œï¼Œä¸”yieldèƒ½è¿”å›resolveçš„å€¼ï¼ŒåŸºäºè¿™ä¸¤ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªåŸºæœ¬çš„å°è£…ï¼Œè¿™é‡Œ<code>async/await</code>æ˜¯å…³é”®å­—ï¼Œä¸èƒ½é‡å†™ï¼Œæˆ‘ä»¬ç”¨å‡½æ•°æ¥æ¨¡æ‹Ÿï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\">gen</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> g = gen()                     <span class=\"comment\">// ç”±äºæ¯æ¬¡gen()è·å–åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„è¿­ä»£å™¨,å› æ­¤è·å–è¿­ä»£å™¨æ“ä½œè¦æ”¾åœ¨_next()ä¹‹å‰,å¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_next</span>(<span class=\"params\">val</span>) </span>&#123;             <span class=\"comment\">// å°è£…ä¸€ä¸ªæ–¹æ³•, é€’å½’æ‰§è¡Œg.next()</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> res = g.next(val)           <span class=\"comment\">// è·å–è¿­ä»£å™¨å¯¹è±¡ï¼Œå¹¶è¿”å›resolveçš„å€¼</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(res.done) <span class=\"keyword\">return</span> res.value   <span class=\"comment\">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span></span><br><span class=\"line\">            res.value.then(<span class=\"function\"><span class=\"params\">val</span> =&gt;</span> &#123;         <span class=\"comment\">// Promiseçš„thenæ–¹æ³•æ˜¯å®ç°è‡ªåŠ¨è¿­ä»£çš„å‰æ</span></span><br><span class=\"line\">            _next(val)                    <span class=\"comment\">// ç­‰å¾…Promiseå®Œæˆå°±è‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€ä¸ªnextï¼Œå¹¶ä¼ å…¥resolveçš„å€¼</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    _next()  <span class=\"comment\">//ç¬¬ä¸€æ¬¡æ‰§è¡Œ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹äºæˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°±èƒ½è¿™æ ·æ‰§è¡Œï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>))   <span class=\"comment\">// 1</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">2</span>))   <span class=\"comment\">// 2</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">3</span>))   <span class=\"comment\">// 3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">run(myGenerator)</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·æˆ‘ä»¬å°±åˆæ­¥å®ç°äº†ä¸€ä¸ª<code>async/await</code>ã€‚ä¸Šè¾¹çš„ä»£ç åªæœ‰äº”å…­è¡Œï¼Œä½†å¹¶ä¸æ˜¯ä¸€ä¸‹å°±èƒ½çœ‹æ˜ç™½çš„ï¼Œæˆ‘ä»¬ä¹‹å‰ç”¨äº†å››ä¸ªä¾‹å­æ¥åšé“ºå«ï¼Œä¹Ÿæ˜¯ä¸ºäº†è®©è¯»è€…æ›´å¥½åœ°ç†è§£è¿™æ®µä»£ç ã€‚ ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å°è£…äº†ä¸€ä¸ªrunæ–¹æ³•ï¼Œrunæ–¹æ³•é‡Œæˆ‘ä»¬æŠŠæ‰§è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œå°è£…æˆ<code>_next()</code>ï¼Œæ¯æ¬¡Promise.then()çš„æ—¶å€™éƒ½å»æ‰§è¡Œ<code>_next()</code>ï¼Œå®ç°è‡ªåŠ¨è¿­ä»£çš„æ•ˆæœã€‚åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜æŠŠresolveçš„å€¼ä¼ å…¥<code>gen.next()</code>ï¼Œä½¿å¾—yieldå¾—ä»¥è¿”å›Promiseçš„resolveçš„å€¼</p>\n<blockquote>\n<p>è¿™é‡Œæ’ä¸€å¥ï¼Œæ˜¯ä¸æ˜¯åªæœ‰<code>.thenæ–¹æ³•</code>è¿™æ ·çš„å½¢å¼æ‰èƒ½å®Œæˆæˆ‘ä»¬è‡ªåŠ¨æ‰§è¡Œçš„åŠŸèƒ½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œyieldåè¾¹é™¤äº†æ¥Promiseï¼Œè¿˜å¯ä»¥æ¥<code>thunkå‡½æ•°</code>ï¼Œthunkå‡½æ•°ä¸æ˜¯ä¸€ä¸ªæ–°ä¸œè¥¿ï¼Œæ‰€è°“thunkå‡½æ•°ï¼Œå°±æ˜¯<strong>å•å‚çš„åªæ¥å—å›è°ƒçš„å‡½æ•°</strong>ï¼Œè¯¦ç»†ä»‹ç»å¯ä»¥çœ‹<a href=\"https://user-gold-cdn.xitu.io/2020/3/15/170dc5e88df6c208\">é˜®ä¸€å³°Thunk å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•</a>ï¼Œæ— è®ºæ˜¯Promiseè¿˜æ˜¯thunkå‡½æ•°ï¼Œå…¶æ ¸å¿ƒéƒ½æ˜¯é€šè¿‡<strong>ä¼ å…¥å›è°ƒ</strong>çš„æ–¹å¼æ¥å®ç°Generatorçš„è‡ªåŠ¨æ‰§è¡Œã€‚thunkå‡½æ•°åªä½œä¸ºä¸€ä¸ªæ‹“å±•çŸ¥è¯†ï¼Œç†è§£æœ‰å›°éš¾çš„åŒå­¦ä¹Ÿå¯ä»¥è·³è¿‡è¿™é‡Œï¼Œå¹¶ä¸å½±å“åç»­ç†è§£ã€‚</p>\n</blockquote>\n<h2 id=\"2-è¿”å›Promise-amp-å¼‚å¸¸å¤„ç†\"><a href=\"#2-è¿”å›Promise-amp-å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"2.è¿”å›Promise &amp; å¼‚å¸¸å¤„ç†\"></a>2.è¿”å›Promise &amp; å¼‚å¸¸å¤„ç†</h2><p>è™½ç„¶æˆ‘ä»¬å®ç°äº†Generatorçš„è‡ªåŠ¨æ‰§è¡Œä»¥åŠè®©yieldè¿”å›resolveçš„å€¼ï¼Œä½†ä¸Šè¾¹çš„ä»£ç è¿˜å­˜åœ¨ç€å‡ ç‚¹é—®é¢˜ï¼š</p>\n<ol>\n<li><strong>éœ€è¦å…¼å®¹åŸºæœ¬ç±»å‹</strong>ï¼šè¿™æ®µä»£ç èƒ½è‡ªåŠ¨æ‰§è¡Œçš„å‰ææ˜¯<code>yield</code>åé¢è·ŸPromiseï¼Œä¸ºäº†å…¼å®¹åé¢è·Ÿç€åŸºæœ¬ç±»å‹å€¼çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æŠŠyieldè·Ÿçš„å†…å®¹(<code>gen().next.value</code>)éƒ½ç”¨<code>Promise.resolve()</code>è½¬åŒ–ä¸€é</li>\n<li><strong>ç¼ºå°‘é”™è¯¯å¤„ç†</strong>ï¼šä¸Šè¾¹ä»£ç é‡Œçš„Promiseå¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´åç»­æ‰§è¡Œç›´æ¥ä¸­æ–­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è°ƒç”¨<code>Generator.prototype.throw()</code>ï¼ŒæŠŠé”™è¯¯æŠ›å‡ºæ¥ï¼Œæ‰èƒ½è¢«å¤–å±‚çš„try-catchæ•è·åˆ°</li>\n<li><strong>è¿”å›å€¼æ˜¯Promise</strong>ï¼š<code>async/await</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿéœ€è¦ä¿æŒä¸€è‡´ï¼Œç»™è¿”å›å€¼åŒ…ä¸€ä¸ªPromise</li>\n</ol>\n<p>æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹runæ–¹æ³•ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">run</span>(<span class=\"params\">gen</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŠŠè¿”å›å€¼åŒ…è£…æˆpromise</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> g = gen()</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_next</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> res = g.next(val) </span><br><span class=\"line\">                &#125; <span class=\"function\"><span class=\"title\">catch</span>(<span class=\"params\">err</span>)</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> reject(err); </span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"title\">if</span>(<span class=\"params\">res.done</span>)</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> resolve(res.value);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// res.valueåŒ…è£…ä¸ºpromiseï¼Œä»¥å…¼å®¹yieldåé¢è·ŸåŸºæœ¬ç±»å‹çš„æƒ…å†µ</span></span><br><span class=\"line\">            <span class=\"built_in\">Promise</span>.resolve(res.value).then(</span><br><span class=\"line\">                val =&gt; &#123;</span><br><span class=\"line\">                    _next(val);</span><br><span class=\"line\">                &#125;, </span><br><span class=\"line\">                err =&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// æŠ›å‡ºé”™è¯¯</span></span><br><span class=\"line\">                    g.throw(err)</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        _next();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">myGenerator</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>)) </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"number\">2</span>)   <span class=\"comment\">// 2</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">&#x27;error&#x27;</span>))</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> result = run(myGenerator)     <span class=\"comment\">// resultæ˜¯ä¸€ä¸ªPromise</span></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º 1 2 error</span></span><br></pre></td></tr></table></figure>\n\n<p>åˆ°è¿™é‡Œï¼Œä¸€ä¸ª<code>async/await</code>çš„å®ç°åŸºæœ¬å®Œæˆäº†ã€‚æœ€åæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹babelå¯¹async/awaitçš„è½¬æ¢ç»“æœï¼Œå…¶å®æ•´ä½“çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å†™æ³•ç¨æœ‰ä¸åŒï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç›¸å½“äºæˆ‘ä»¬çš„run()</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_asyncToGenerator</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// returnä¸€ä¸ªfunctionï¼Œå’Œasyncä¿æŒä¸€è‡´ã€‚æˆ‘ä»¬çš„runç›´æ¥æ‰§è¡Œäº†Generatorï¼Œå…¶å®æ˜¯ä¸å¤ªè§„èŒƒçš„</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> self = <span class=\"built_in\">this</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> gen = fn.apply(self, args);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// ç›¸å½“äºæˆ‘ä»¬çš„_next()</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_next</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">                asyncGeneratorStep(gen, resolve, reject, _next, _throw, <span class=\"string\">&#x27;next&#x27;</span>, value);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// å¤„ç†å¼‚å¸¸</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_throw</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">                asyncGeneratorStep(gen, resolve, reject, _next, _throw, <span class=\"string\">&#x27;throw&#x27;</span>, err);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            _next(<span class=\"literal\">undefined</span>);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncGeneratorStep</span>(<span class=\"params\">gen, resolve, reject, _next, _throw, key, arg</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> info = gen[key](arg);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> value = info.value;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">        reject(error);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (info.done) &#123;</span><br><span class=\"line\">        resolve(value);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">Promise</span>.resolve(value).then(_next, _throw);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> foo = _asyncToGenerator(<span class=\"function\"><span class=\"keyword\">function</span>* (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"number\">1</span>))   <span class=\"comment\">// 1</span></span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">yield</span> <span class=\"number\">2</span>)                    <span class=\"comment\">// 2</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    \t<span class=\"built_in\">console</span>.log(error)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">foo().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res)                          <span class=\"comment\">// 3</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>æœ‰å…³<code>async/await</code>çš„å®ç°ï¼Œåˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½äº†ã€‚ä½†æ˜¯ç›´åˆ°ç»“å°¾ï¼Œæˆ‘ä»¬ä¹Ÿä¸çŸ¥é“awaitåˆ°åº•æ˜¯å¦‚ä½•æš‚åœæ‰§è¡Œçš„ï¼Œæœ‰å…³awaitæš‚åœæ‰§è¡Œçš„ç§˜å¯†ï¼Œæˆ‘ä»¬è¿˜è¦åˆ°Generatorçš„å®ç°ä¸­å»å¯»æ‰¾ç­”æ¡ˆ</p>\n<h1 id=\"Generatorå®ç°\"><a href=\"#Generatorå®ç°\" class=\"headerlink\" title=\"Generatorå®ç°\"></a>Generatorå®ç°</h1><p>æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„Generatorä½¿ç”¨å®ä¾‹å¼€å§‹ï¼Œä¸€æ­¥æ­¥æ¢ç©¶Generatorçš„å®ç°åŸç†ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"string\">&#x27;result1&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"string\">&#x27;result2&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">yield</span> <span class=\"string\">&#x27;result3&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">const</span> gen = foo()</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value)</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¯ä»¥åœ¨<a href=\"https://babeljs.io/repl/#?browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=GYVwdgxgLglg9mAVAAmHOAKAlMg3gKGWQE8YBTAGwBNkByAJzIGcQKoBGWwk86uxlmwBMXIqUo0GzVlADMXAL7d8EBEyjIA5mTDIAvKnTYVauBTIA6CnE0ZtYC2DIAPKNgsA3AIYUQZLCZgTGaW1rb2ji5uWJ4-fgGqQSFWNnY6ka7u3r7-QA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=es2015%2Creact%2Cstage-2&prettier=false&targets=&version=7.5.5&externalPlugins=\">babelå®˜ç½‘</a>ä¸Šåœ¨çº¿è½¬åŒ–è¿™æ®µä»£ç ï¼Œçœ‹çœ‹ES5ç¯å¢ƒä¸‹æ˜¯å¦‚ä½•å®ç°Generatorçš„ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&quot;use strict&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> _marked =</span><br><span class=\"line\"><span class=\"comment\">/*#__PURE__*/</span></span><br><span class=\"line\">regeneratorRuntime.mark(foo);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> regeneratorRuntime.wrap(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo$</span>(<span class=\"params\">_context</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">switch</span> (_context.prev = _context.next) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">                    _context.next = <span class=\"number\">2</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result1&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                    _context.next = <span class=\"number\">4</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result2&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">                    _context.next = <span class=\"number\">6</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result3&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;end&quot;</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> _context.stop();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, _marked);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> gen = foo();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gen.next().value);</span><br></pre></td></tr></table></figure>\n\n<p>ä»£ç å’‹ä¸€çœ‹ä¸é•¿ï¼Œä½†å¦‚æœä»”ç»†è§‚å¯Ÿä¼šå‘ç°æœ‰ä¸¤ä¸ªä¸è®¤è¯†çš„ä¸œè¥¿ â€”â€” <code>regeneratorRuntime.mark</code>å’Œ<code>regeneratorRuntime.wrap</code>ï¼Œè¿™ä¸¤è€…å…¶å®æ˜¯ regenerator-runtime æ¨¡å—é‡Œçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œregenerator-runtime æ¨¡å—æ¥è‡ªfacebookçš„ regenerator æ¨¡å—ï¼Œå®Œæ•´ä»£ç åœ¨<a href=\"https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js\">runtime.js</a>ï¼Œè¿™ä¸ªruntimeæœ‰700å¤šè¡Œâ€¦-_-||ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½å…¨è®²ï¼Œä¸å¤ªé‡è¦çš„éƒ¨åˆ†æˆ‘ä»¬å°±ç®€å•åœ°è¿‡ä¸€ä¸‹ï¼Œé‡ç‚¹è®²è§£æš‚åœæ‰§è¡Œç›¸å…³éƒ¨åˆ†ä»£ç </p>\n<blockquote>\n<p>ä¸ªäººè§‰å¾—å•ƒæºç çš„æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œå»ºè®®è¯»è€…æ‹‰åˆ°æœ«å°¾å…ˆçœ‹ç»“è®ºå’Œç®€ç•¥ç‰ˆå®ç°ï¼Œæºç ä½œä¸ºä¸€ä¸ªè¡¥å……ç†è§£</p>\n</blockquote>\n<h2 id=\"regeneratorRuntime-mark\"><a href=\"#regeneratorRuntime-mark\" class=\"headerlink\" title=\"regeneratorRuntime.mark()\"></a>regeneratorRuntime.mark()</h2><p><code>regeneratorRuntime.mark(foo)</code>è¿™ä¸ªæ–¹æ³•åœ¨ç¬¬ä¸€è¡Œè¢«è°ƒç”¨ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹runtimeé‡Œmark()æ–¹æ³•çš„å®šä¹‰</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// runtime.jsé‡Œçš„å®šä¹‰ç¨æœ‰ä¸åŒï¼Œå¤šäº†ä¸€äº›åˆ¤æ–­ï¼Œä»¥ä¸‹æ˜¯ç¼–è¯‘åçš„ä»£ç </span></span><br><span class=\"line\">runtime.mark = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">genFun</span>) </span>&#123;</span><br><span class=\"line\">    genFun.__proto__ = GeneratorFunctionPrototype;</span><br><span class=\"line\">    genFun.prototype = <span class=\"built_in\">Object</span>.create(Gp);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> genFun;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œè¾¹<code>GeneratorFunctionPrototype</code>å’Œ<code>Gp</code>æˆ‘ä»¬éƒ½ä¸è®¤è¯†ï¼Œä»–ä»¬è¢«å®šä¹‰åœ¨runtimeé‡Œï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“<code>mark()æ–¹æ³•</code>ä¸ºç”Ÿæˆå™¨å‡½æ•°ï¼ˆfooï¼‰ç»‘å®šäº†ä¸€ç³»åˆ—åŸå‹å°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ç®€å•åœ°è¿‡äº†</p>\n<h2 id=\"regeneratorRuntime-wrap\"><a href=\"#regeneratorRuntime-wrap\" class=\"headerlink\" title=\"regeneratorRuntime.wrap()\"></a>regeneratorRuntime.wrap()</h2><p>ä»ä¸Šé¢babelè½¬åŒ–çš„ä»£ç æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œæ‰§è¡Œ<code>foo()</code>ï¼Œå…¶å®å°±æ˜¯æ‰§è¡Œ<code>wrap()</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•èµ·åˆ°ä»€ä¹ˆä½œç”¨å‘¢ï¼Œä»–æƒ³åŒ…è£…ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹wrapæ–¹æ³•çš„å®šä¹‰ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//runtime.jsé‡Œçš„å®šä¹‰ç¨æœ‰ä¸åŒï¼Œå¤šäº†ä¸€äº›åˆ¤æ–­ï¼Œä»¥ä¸‹æ˜¯ç¼–è¯‘åçš„ä»£ç </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrap</span>(<span class=\"params\">innerFn, outerFn, self</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> generator = <span class=\"built_in\">Object</span>.create(outerFn.prototype);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"keyword\">new</span> Context([]);</span><br><span class=\"line\">    generator._invoke = makeInvokeMethod(innerFn, self, context);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> generator;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>wrapæ–¹æ³•å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªgeneratorï¼Œå¹¶ç»§æ‰¿<code>outerFn.prototype</code>ï¼›ç„¶ånewäº†ä¸€ä¸ª<code>contextå¯¹è±¡</code>ï¼›<code>makeInvokeMethodæ–¹æ³•</code>æ¥æ”¶<code>innerFn(å¯¹åº”foo$)</code>ã€<code>context</code>å’Œ<code>this</code>ï¼Œå¹¶æŠŠè¿”å›å€¼æŒ‚åˆ°<code>generator._invoke</code>ä¸Šï¼›æœ€åreturnäº†generatorã€‚<strong>å…¶å®wrap()ç›¸å½“äºæ˜¯ç»™generatorå¢åŠ äº†ä¸€ä¸ª_invokeæ–¹æ³•</strong></p>\n<p>è¿™æ®µä»£ç è‚¯å®šè®©äººäº§ç”Ÿå¾ˆå¤šç–‘é—®ï¼ŒouterFn.prototypeæ˜¯ä»€ä¹ˆï¼ŒContextåˆæ˜¯ä»€ä¹ˆï¼ŒmakeInvokeMethodåˆåšäº†å“ªäº›æ“ä½œã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€ä¸€è§£ç­”ï¼š</p>\n<blockquote>\n<p><code>outerFn.prototype</code>å…¶å®å°±æ˜¯<code>genFun.prototype</code>ï¼Œ</p>\n</blockquote>\n<p>è¿™ä¸ªæˆ‘ä»¬ç»“åˆä¸€ä¸‹ä¸Šé¢çš„ä»£ç å°±èƒ½çŸ¥é“</p>\n<blockquote>\n<p><code>context</code>å¯ä»¥ç›´æ¥ç†è§£ä¸ºè¿™æ ·ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç”¨äºå‚¨å­˜å„ç§çŠ¶æ€å’Œä¸Šä¸‹æ–‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> ContinueSentinel = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> context = &#123;</span><br><span class=\"line\">    done: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    method: <span class=\"string\">&quot;next&quot;</span>,</span><br><span class=\"line\">    next: <span class=\"number\">0</span>,</span><br><span class=\"line\">    prev: <span class=\"number\">0</span>,</span><br><span class=\"line\">    abrupt: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> record = &#123;&#125;;</span><br><span class=\"line\">        record.type = type;</span><br><span class=\"line\">        record.arg = arg;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.complete(record);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    complete: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">record, afterLoc</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (record.type === <span class=\"string\">&quot;return&quot;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.rval = <span class=\"built_in\">this</span>.arg = record.arg;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.method = <span class=\"string\">&quot;return&quot;</span>;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.next = <span class=\"string\">&quot;end&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ContinueSentinel;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    stop: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.done = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.rval;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>makeInvokeMethod<code>çš„å®šä¹‰å¦‚ä¸‹ï¼Œå®ƒreturnäº†ä¸€ä¸ª</code>invokeæ–¹æ³•<code>ï¼Œinvokeç”¨äºåˆ¤æ–­å½“å‰çŠ¶æ€å’Œæ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬è°ƒç”¨çš„</code>next()</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä»¥ä¸‹æ˜¯ç¼–è¯‘åçš„ä»£ç </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeInvokeMethod</span>(<span class=\"params\">innerFn, context</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å°†çŠ¶æ€ç½®ä¸ºstart</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> state = <span class=\"string\">&quot;start&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">invoke</span>(<span class=\"params\">method, arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å·²å®Œæˆ</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (state === <span class=\"string\">&quot;completed&quot;</span>) &#123;</span><br><span class=\"line\">        \t<span class=\"keyword\">return</span> &#123; <span class=\"attr\">value</span>: <span class=\"literal\">undefined</span>, <span class=\"attr\">done</span>: <span class=\"literal\">true</span> &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        context.method = method;</span><br><span class=\"line\">        context.arg = arg;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æ‰§è¡Œä¸­</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">            state = <span class=\"string\">&quot;executing&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">var</span> record = &#123;</span><br><span class=\"line\">                type: <span class=\"string\">&quot;normal&quot;</span>,</span><br><span class=\"line\">                arg: innerFn.call(self, context)    <span class=\"comment\">// æ‰§è¡Œä¸‹ä¸€æ­¥,å¹¶è·å–çŠ¶æ€(å…¶å®å°±æ˜¯switché‡Œè¾¹returnçš„å€¼)</span></span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (record.type === <span class=\"string\">&quot;normal&quot;</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦å·²ç»æ‰§è¡Œå®Œæˆ</span></span><br><span class=\"line\">                state = context.done ? <span class=\"string\">&quot;completed&quot;</span> : <span class=\"string\">&quot;yield&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"comment\">// ContinueSentinelå…¶å®æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡,record.arg === &#123;&#125;åˆ™è·³è¿‡returnè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯</span></span><br><span class=\"line\">                <span class=\"comment\">// ä»€ä¹ˆæ—¶å€™record.argä¼šä¸ºç©ºå¯¹è±¡å‘¢, ç­”æ¡ˆæ˜¯æ²¡æœ‰åç»­yieldè¯­å¥æˆ–å·²ç»returnçš„æ—¶å€™,ä¹Ÿå°±æ˜¯switchè¿”å›äº†ç©ºå€¼çš„æƒ…å†µ(è·Ÿç€ä¸Šé¢çš„switchèµ°ä¸€ä¸‹å°±çŸ¥é“äº†)</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (record.arg === ContinueSentinel) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// next()çš„è¿”å›å€¼</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                    value: record.arg,</span><br><span class=\"line\">                    done: context.done</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºä»€ä¹ˆ<code>generator._invoke</code>å®é™…ä¸Šå°±æ˜¯<code>gen.next</code>å‘¢ï¼Œå› ä¸ºåœ¨runtimeå¯¹äºnext()çš„å®šä¹‰ä¸­ï¼Œnext()å…¶å®å°±returnäº†_invokeæ–¹æ³•</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Helper for defining the .next, .throw, and .return methods of the</span></span><br><span class=\"line\"><span class=\"comment\">// Iterator interface in terms of a single ._invoke method.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">defineIteratorMethods</span>(<span class=\"params\">prototype</span>) </span>&#123;</span><br><span class=\"line\">    [<span class=\"string\">&quot;next&quot;</span>, <span class=\"string\">&quot;throw&quot;</span>, <span class=\"string\">&quot;return&quot;</span>].forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">method</span>) </span>&#123;</span><br><span class=\"line\">        prototype[method] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg</span>) </span>&#123;</span><br><span class=\"line\">        \t<span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._invoke(method, arg);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">defineIteratorMethods(Gp);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä½é…å®ç°-amp-è°ƒç”¨æµç¨‹åˆ†æ\"><a href=\"#ä½é…å®ç°-amp-è°ƒç”¨æµç¨‹åˆ†æ\" class=\"headerlink\" title=\"ä½é…å®ç° &amp; è°ƒç”¨æµç¨‹åˆ†æ\"></a>ä½é…å®ç° &amp; è°ƒç”¨æµç¨‹åˆ†æ</h2><p>è¿™ä¹ˆä¸€éæºç ä¸‹æ¥ï¼Œä¼°è®¡å¾ˆå¤šè¯»è€…è¿˜æ˜¯æ‡µé€¼çš„ï¼Œæ¯•ç«Ÿæºç ä¸­çº é›†äº†å¾ˆå¤šæ¦‚å¿µå’Œå°è£…ï¼Œä¸€æ—¶åŠä¼šä¸å¥½å®Œå…¨ç†è§£ï¼Œè®©æˆ‘ä»¬è·³å‡ºæºç ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„Generatorï¼Œç„¶åå†å›è¿‡å¤´çœ‹æºç ï¼Œä¼šå¾—åˆ°æ›´æ¸…æ™°çš„è®¤è¯†</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆå™¨å‡½æ•°æ ¹æ®yieldè¯­å¥å°†ä»£ç åˆ†å‰²ä¸ºswitch-caseå—ï¼Œåç»­é€šè¿‡åˆ‡æ¢_context.prevå’Œ_context.nextæ¥åˆ†åˆ«æ‰§è¡Œå„ä¸ªcase</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">gen$</span>(<span class=\"params\">_context</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (_context.prev = _context.next) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">                _context.next = <span class=\"number\">2</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result1&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                _context.next = <span class=\"number\">4</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result2&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">                _context.next = <span class=\"number\">6</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">&#x27;result3&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&quot;end&quot;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> _context.stop();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½é…ç‰ˆcontext  </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> context = &#123;</span><br><span class=\"line\">    next:<span class=\"number\">0</span>,</span><br><span class=\"line\">    prev: <span class=\"number\">0</span>,</span><br><span class=\"line\">    done: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    stop: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stop</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    \t<span class=\"built_in\">this</span>.done = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½é…ç‰ˆinvoke</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> gen = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        next: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            value = context.done ? <span class=\"literal\">undefined</span>: gen$(context)</span><br><span class=\"line\">            done = context.done</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                value,</span><br><span class=\"line\">                done</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµ‹è¯•ä½¿ç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> g = gen() </span><br><span class=\"line\">g.next()  <span class=\"comment\">// &#123;value: &quot;result1&quot;, done: false&#125;</span></span><br><span class=\"line\">g.next()  <span class=\"comment\">// &#123;value: &quot;result2&quot;, done: false&#125;</span></span><br><span class=\"line\">g.next()  <span class=\"comment\">// &#123;value: &quot;result3&quot;, done: false&#125;</span></span><br><span class=\"line\">g.next()  <span class=\"comment\">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ®µä»£ç å¹¶ä¸éš¾ç†è§£ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹è°ƒç”¨æµç¨‹ï¼š</p>\n<ol>\n<li>æˆ‘ä»¬å®šä¹‰çš„<code>function*</code>ç”Ÿæˆå™¨å‡½æ•°è¢«è½¬åŒ–ä¸ºä»¥ä¸Šä»£ç </li>\n<li>è½¬åŒ–åçš„ä»£ç åˆ†ä¸ºä¸‰å¤§å—ï¼š<ul>\n<li><code>gen$(_context)</code>ç”±yieldåˆ†å‰²ç”Ÿæˆå™¨å‡½æ•°ä»£ç è€Œæ¥</li>\n<li><code>contextå¯¹è±¡</code>ç”¨äºå‚¨å­˜å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li>\n<li><code>invoke()æ–¹æ³•</code>å®šä¹‰next()ï¼Œç”¨äºæ‰§è¡Œgen$(_context)æ¥è·³åˆ°ä¸‹ä¸€æ­¥</li>\n</ul>\n</li>\n<li>å½“æˆ‘ä»¬è°ƒç”¨<code>g.next()</code>ï¼Œå°±ç›¸å½“äºè°ƒç”¨<code>invoke()æ–¹æ³•</code>ï¼Œæ‰§è¡Œ<code>gen$(_context)</code>ï¼Œè¿›å…¥switchè¯­å¥ï¼Œswitchæ ¹æ®contextçš„æ ‡è¯†ï¼Œæ‰§è¡Œå¯¹åº”çš„caseå—ï¼Œreturnå¯¹åº”ç»“æœ</li>\n<li>å½“ç”Ÿæˆå™¨å‡½æ•°è¿è¡Œåˆ°æœ«å°¾ï¼ˆæ²¡æœ‰ä¸‹ä¸€ä¸ªyieldæˆ–å·²ç»returnï¼‰ï¼ŒswitchåŒ¹é…ä¸åˆ°å¯¹åº”ä»£ç å—ï¼Œå°±ä¼šreturnç©ºå€¼ï¼Œè¿™æ—¶<code>g.next()</code>è¿”å›<code>&#123;value: undefined, done: true&#125;</code></li>\n</ol>\n<p>ä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<strong>Generatorå®ç°çš„æ ¸å¿ƒåœ¨äº<code>ä¸Šä¸‹æ–‡çš„ä¿å­˜</code>ï¼Œå‡½æ•°å¹¶æ²¡æœ‰çœŸçš„è¢«æŒ‚èµ·ï¼Œæ¯ä¸€æ¬¡yieldï¼Œå…¶å®éƒ½æ‰§è¡Œäº†ä¸€éä¼ å…¥çš„ç”Ÿæˆå™¨å‡½æ•°ï¼Œåªæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é—´ç”¨äº†ä¸€ä¸ªcontextå¯¹è±¡å‚¨å­˜ä¸Šä¸‹æ–‡ï¼Œä½¿å¾—æ¯æ¬¡æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥ä»ä¸Šä¸€ä¸ªæ‰§è¡Œç»“æœå¼€å§‹æ‰§è¡Œï¼Œçœ‹èµ·æ¥å°±åƒå‡½æ•°è¢«æŒ‚èµ·äº†ä¸€æ ·</strong></p>\n<h1 id=\"æ€»ç»“-amp-è‡´è°¢\"><a href=\"#æ€»ç»“-amp-è‡´è°¢\" class=\"headerlink\" title=\"æ€»ç»“ &amp; è‡´è°¢\"></a>æ€»ç»“ &amp; è‡´è°¢</h1><p>æœ‰å…³Promiseã€async/awaitã€Generatorçš„åŸç†å°±å®ç°åˆ°è¿™é‡Œäº†ï¼Œæ„Ÿè°¢å¤§å®¶èƒ½å¤Ÿè·Ÿæˆ‘ä¸€èµ·èµ°å®Œå…¨ç¨‹ï¼Œä¸çŸ¥ä¸è§‰ï¼Œæˆ‘ä»¬èŠ±äº†è¿‘9åƒå­—æ¥è®²è¿°æœ‰å…³å¼‚æ­¥ç¼–ç¨‹çš„æ•…äº‹ï¼Œå¼‚æ­¥ç¼–ç¨‹çš„ä¸–ç•Œç¯ç¯ç›¸æ‰£ï¼Œä¸€å¼€å§‹ï¼Œç¬”è€…åªæ˜¯å‡ºäºå¯¹awaitæŒ‚èµ·æœºåˆ¶çš„å¥½å¥‡ï¼Œåæ¥ï¼Œä»ä¸€ä¸ª â€œawaitæ˜¯å¦‚ä½•å®ç°æš‚åœæ‰§è¡Œâ€ çš„å°é—®é¢˜ï¼Œå¼•å‡ºäº†å¯¹å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç³»åˆ—æ€è€ƒå’Œå®ç°åŸç†ã€‚ä¸‰è€…çš„å®ç°ï¼Œå…¶å®ä¹Ÿæ˜¯å‰ç«¯å¼‚æ­¥ç¼–ç¨‹ä¸€æ­¥æ­¥æ¼”åŒ–æ¨è¿›çš„è¿‡ç¨‹ã€‚</p>\n<p>æˆæ–‡è¿‡ç¨‹ä¸­å¾—åˆ°å¾ˆå¤šå¤§ä½¬çš„å¸®åŠ©ï¼Œè¿™å››ç¯‡å‚è€ƒæ–‡ç« éƒ½æ˜¯æˆ‘é˜…è¯»äº†å¾ˆå¤šç›¸å…³æ–‡ç« åç²¾é€‰çš„å››ç¯‡ï¼Œå»ºè®®å¤§å®¶ç»“åˆé˜…è¯»ï¼Œå¤§ä½¬ä»¬å†™çš„æ¯”æˆ‘å¥½å¾ˆå¤šï¼Œå¦å¤–æ„Ÿè°¢å†´ç¾½å¤§ä½¬åœ¨Generatoræœºåˆ¶ä¸Šç»™äºˆçš„è§£æƒ‘~</p>\n<blockquote>\n<p>å‰ç«¯æŠ€åŒ ï¼š<a href=\"https://juejin.im/post/6844903989083897870\">å„ç§æºç å®ç°ï¼Œä½ æƒ³è¦çš„è¿™é‡Œéƒ½æœ‰</a><br> ç¥ä¸‰å…ƒï¼š<a href=\"https://juejin.im/post/6844903702457925640\">æˆ‘å¦‚ä½•å®ç°Promise</a><br> wintyï¼š<a href=\"https://juejin.im/post/6844903988584775693#heading-0\">async/await åŸç†åŠæ‰§è¡Œé¡ºåºåˆ†æ</a><br> å†´ç¾½ï¼š<a href=\"https://juejin.im/post/6844903701908291592\">ES6 ç³»åˆ—ä¹‹ Babel å°† Generator   ç¼–è¯‘æˆäº†ä»€ä¹ˆæ ·å­</a></p>\n</blockquote>\n","categories":["webå‰ç«¯"],"tags":["Promise","async","Generator"]},{"title":"å‰ç«¯æ€§èƒ½","url":"/2021/02/25/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/","content":"<p>å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ç›¸å…³å†…å®¹ï¼Œå¥½å¥½æŒæ¡æ¶ˆåŒ–ï¼Œå…¶å®è¿™ä¸€éƒ¨åˆ†å®ç”¨æ€§è¿œé«˜äºåº”è¯•æ€§ï¼Œå¾ˆè€ƒéªŒå„ä½å‰ç«¯ä»”çš„å®æˆ˜æ°´å¹³çš„</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-RAILæ¨¡å‹\"><a href=\"#1-RAILæ¨¡å‹\" class=\"headerlink\" title=\"1.RAILæ¨¡å‹\"></a>1.RAILæ¨¡å‹</h1><p>RAILæ˜¯ä¸€ä¸ªä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æ¨¡å‹ï¼Œå®ƒæŠŠç”¨æˆ·çš„ä½“éªŒæ‹†åˆ†æˆå‡ ä¸ªå…³é”®ç‚¹ï¼ˆä¾‹å¦‚ï¼Œtapï¼Œscrollï¼Œloadï¼‰ï¼Œå¹¶ä¸”å¸®ä½ å®šä¹‰å¥½äº†æ¯ä¸€ä¸ªçš„æ€§èƒ½æŒ‡æ ‡ã€‚</p>\n<p>æœ‰ä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š</p>\n<ul>\n<li>Response</li>\n<li>Animation</li>\n<li>Idle</li>\n<li>Load</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/7/13/1734894ee7aaf2b6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"RAILç¤ºæ„å›¾\"></p>\n<h2 id=\"èšç„¦ç”¨æˆ·\"><a href=\"#èšç„¦ç”¨æˆ·\" class=\"headerlink\" title=\"èšç„¦ç”¨æˆ·\"></a>èšç„¦ç”¨æˆ·</h2><p>ä»¥ä¸‹æ˜¯ç”¨æˆ·å¯¹æ€§èƒ½å»¶è¿Ÿçš„æ„ŸçŸ¥ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å»¶è¿Ÿæ—¶é—´</th>\n<th>ç”¨æˆ·æ„ŸçŸ¥</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0-16ms</td>\n<td>å¾ˆæµç•…</td>\n</tr>\n<tr>\n<td>0-100ms</td>\n<td>åŸºæœ¬æµç•…</td>\n</tr>\n<tr>\n<td>100-1000ms</td>\n<td>æ„Ÿè§‰åˆ°ç½‘ç«™ä¸Šæœ‰ä¸€äº›åŠ è½½ä»»åŠ¡</td>\n</tr>\n<tr>\n<td>1000ms or more</td>\n<td>å¤±å»è€å¿ƒäº†</td>\n</tr>\n<tr>\n<td>10000ms or more</td>\n<td>ç›´æ¥ç¦»å¼€ï¼Œä¸ä¼šå†è®¿é—®äº†</td>\n</tr>\n</tbody></table>\n<h2 id=\"Response-äº‹ä»¶å¤„ç†æœ€å¥½åœ¨50mså†…å®Œæˆ\"><a href=\"#Response-äº‹ä»¶å¤„ç†æœ€å¥½åœ¨50mså†…å®Œæˆ\" class=\"headerlink\" title=\"Response: äº‹ä»¶å¤„ç†æœ€å¥½åœ¨50mså†…å®Œæˆ\"></a>Response: äº‹ä»¶å¤„ç†æœ€å¥½åœ¨50mså†…å®Œæˆ</h2><h3 id=\"ç›®æ ‡\"><a href=\"#ç›®æ ‡\" class=\"headerlink\" title=\"ç›®æ ‡\"></a>ç›®æ ‡</h3><ul>\n<li>ç”¨æˆ·çš„è¾“å…¥åˆ°å“åº”çš„æ—¶é—´ä¸è¶…è¿‡100msï¼Œç»™ç”¨æˆ·çš„æ„Ÿå—æ˜¯ç¬é—´å°±å®Œæˆäº†ã€‚</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–æ–¹æ¡ˆ\"><a href=\"#ä¼˜åŒ–æ–¹æ¡ˆ\" class=\"headerlink\" title=\"ä¼˜åŒ–æ–¹æ¡ˆ\"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h3><ul>\n<li>äº‹ä»¶å¤„ç†å‡½æ•°åœ¨50mså†…å®Œæˆï¼Œè€ƒè™‘åˆ°idle taskçš„æƒ…å†µï¼Œäº‹ä»¶ä¼šæ’é˜Ÿï¼Œç­‰å¾…æ—¶é—´å¤§æ¦‚åœ¨50msã€‚é€‚ç”¨äºclickï¼Œtoggleï¼Œstarting animationsç­‰ï¼Œä¸é€‚ç”¨äºdragå’Œscrollã€‚</li>\n<li>å¤æ‚çš„jsè®¡ç®—å°½å¯èƒ½æ”¾åœ¨åå°ï¼Œå¦‚web workerï¼Œé¿å…å¯¹ç”¨æˆ·è¾“å…¥é€ æˆé˜»å¡</li>\n<li>è¶…è¿‡50msçš„å“åº”ï¼Œä¸€å®šè¦æä¾›åé¦ˆï¼Œæ¯”å¦‚å€’è®¡æ—¶ï¼Œè¿›åº¦ç™¾åˆ†æ¯”ç­‰ã€‚</li>\n</ul>\n<blockquote>\n<p>idle taskï¼šé™¤äº†è¦å¤„ç†è¾“å…¥äº‹ä»¶ï¼Œæµè§ˆå™¨è¿˜æœ‰å…¶å®ƒä»»åŠ¡è¦åšï¼Œè¿™äº›ä»»åŠ¡ä¼šå ç”¨éƒ¨åˆ†æ—¶é—´ï¼Œä¸€èˆ¬æƒ…å†µä¼šèŠ±è´¹50msçš„æ—¶é—´ï¼Œè¾“å…¥äº‹ä»¶çš„å“åº”åˆ™æ’åœ¨å…¶åã€‚</p>\n</blockquote>\n<p>ä¸‹å›¾æ˜¯idle taskå¯¹input responseçš„å½±å“ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/7/13/173489db13875e5b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"Idle Taskç¤ºæ„å›¾\"></p>\n<h2 id=\"Animation-åœ¨10mså†…äº§ç”Ÿä¸€å¸§\"><a href=\"#Animation-åœ¨10mså†…äº§ç”Ÿä¸€å¸§\" class=\"headerlink\" title=\"Animation: åœ¨10mså†…äº§ç”Ÿä¸€å¸§\"></a>Animation: åœ¨10mså†…äº§ç”Ÿä¸€å¸§</h2><h3 id=\"ç›®æ ‡-1\"><a href=\"#ç›®æ ‡-1\" class=\"headerlink\" title=\"ç›®æ ‡\"></a>ç›®æ ‡</h3><ul>\n<li>äº§ç”Ÿæ¯ä¸€å¸§çš„æ—¶é—´ä¸è¦è¶…è¿‡10msï¼Œä¸ºäº†ä¿è¯æµè§ˆå™¨60å¸§ï¼Œæ¯ä¸€å¸§çš„æ—¶é—´åœ¨16mså·¦å³ï¼Œä½†æµè§ˆå™¨éœ€è¦ç”¨6msæ¥æ¸²æŸ“æ¯ä¸€å¸§ã€‚</li>\n<li>æ—¨åœ¨è§†è§‰ä¸Šçš„å¹³æ»‘ã€‚ç”¨æˆ·å¯¹å¸§ç‡å˜åŒ–æ„ŸçŸ¥å¾ˆæ•æ„Ÿã€‚</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–æ–¹æ¡ˆ-1\"><a href=\"#ä¼˜åŒ–æ–¹æ¡ˆ-1\" class=\"headerlink\" title=\"ä¼˜åŒ–æ–¹æ¡ˆ\"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h3><ul>\n<li>åœ¨ä¸€äº›é«˜å‹ç‚¹ä¸Šï¼Œæ¯”å¦‚åŠ¨ç”»ï¼Œä¸è¦å»æŒ‘æˆ˜cpuï¼Œå°½å¯èƒ½åœ°å°‘åšäº‹ï¼Œå¦‚ï¼šå–offsetï¼Œè®¾ç½®styleç­‰æ“ä½œã€‚å°½å¯èƒ½åœ°ä¿è¯60å¸§çš„ä½“éªŒã€‚</li>\n<li>åœ¨æ¸²æŸ“æ€§èƒ½ä¸Šï¼Œé’ˆå¯¹ä¸åŒçš„åŠ¨ç”»åšä¸€äº›ç‰¹å®šä¼˜åŒ–</li>\n</ul>\n<blockquote>\n<p>åŠ¨ç”»ä¸åªæ˜¯UIçš„è§†è§‰æ•ˆæœï¼Œä»¥ä¸‹è¡Œä¸ºéƒ½å±äº</p>\n<ul>\n<li>è§†è§‰åŠ¨ç”»ï¼Œå¦‚æ¸éšæ¸æ˜¾ï¼Œtweensï¼Œloadingç­‰</li>\n<li>æ»šåŠ¨ï¼ŒåŒ…å«å¼¹æ€§æ»šåŠ¨ï¼Œæ¾å¼€æ‰‹æŒ‡åï¼Œæ»šåŠ¨ä¼šæŒç»­ä¸€æ®µè·ç¦»</li>\n<li>æ‹–æ‹½ï¼Œç¼©æ”¾ï¼Œç»å¸¸ä¼´éšç€ç”¨æˆ·è¡Œä¸º</li>\n</ul>\n</blockquote>\n<h2 id=\"Idle-æœ€å¤§åŒ–ç©ºé—²æ—¶é—´\"><a href=\"#Idle-æœ€å¤§åŒ–ç©ºé—²æ—¶é—´\" class=\"headerlink\" title=\"Idle: æœ€å¤§åŒ–ç©ºé—²æ—¶é—´\"></a>Idle: æœ€å¤§åŒ–ç©ºé—²æ—¶é—´</h2><h3 id=\"ç›®æ ‡-2\"><a href=\"#ç›®æ ‡-2\" class=\"headerlink\" title=\"ç›®æ ‡\"></a>ç›®æ ‡</h3><ul>\n<li>æœ€å¤§åŒ–ç©ºé—²æ—¶é—´ï¼Œä»¥å¢å¤§50mså†…å“åº”ç”¨æˆ·è¾“å…¥çš„å‡ ç‡</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–æ–¹æ¡ˆ-2\"><a href=\"#ä¼˜åŒ–æ–¹æ¡ˆ-2\" class=\"headerlink\" title=\"ä¼˜åŒ–æ–¹æ¡ˆ\"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h3><ul>\n<li>ç”¨ç©ºé—²æ—¶é—´æ¥å®Œæˆä¸€äº›å»¶åçš„å·¥ä½œï¼Œå¦‚å…ˆåŠ è½½é¡µé¢å¯è§çš„éƒ¨åˆ†ï¼Œç„¶ååˆ©ç”¨ç©ºé—²æ—¶é—´åŠ è½½å‰©ä½™éƒ¨åˆ†ï¼Œæ­¤å¤„å¯ä»¥ä½¿ç”¨ <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback\">requestIdleCallback API</a></li>\n<li>åœ¨ç©ºé—²æ—¶é—´å†…æ‰§è¡Œçš„ä»»åŠ¡å°½é‡æ§åˆ¶åœ¨50msä»¥å†…ï¼Œå¦‚æœæ›´é•¿çš„è¯ï¼Œä¼šå½±å“input handleçš„pendingæ—¶é—´</li>\n<li>å¦‚æœç”¨æˆ·åœ¨ç©ºé—²æ—¶é—´ä»»åŠ¡è¿›è¡Œæ—¶è¿›è¡Œäº¤äº’ï¼Œå¿…é¡»ä»¥æ­¤ä¸ºæœ€é«˜ä¼˜å…ˆçº§ï¼Œå¹¶æš‚åœç©ºé—²æ—¶é—´çš„ä»»åŠ¡</li>\n</ul>\n<h2 id=\"Load-ä¼ è¾“å†…å®¹åˆ°é¡µé¢å¯äº¤äº’çš„æ—¶é—´ä¸è¶…è¿‡5ç§’\"><a href=\"#Load-ä¼ è¾“å†…å®¹åˆ°é¡µé¢å¯äº¤äº’çš„æ—¶é—´ä¸è¶…è¿‡5ç§’\" class=\"headerlink\" title=\"Load: ä¼ è¾“å†…å®¹åˆ°é¡µé¢å¯äº¤äº’çš„æ—¶é—´ä¸è¶…è¿‡5ç§’\"></a>Load: ä¼ è¾“å†…å®¹åˆ°é¡µé¢å¯äº¤äº’çš„æ—¶é—´ä¸è¶…è¿‡5ç§’</h2><p>å¦‚æœé¡µé¢åŠ è½½æ¯”è¾ƒæ…¢ï¼Œç”¨æˆ·çš„äº¤ç‚¹å¯èƒ½ä¼šç¦»å¼€ã€‚åŠ è½½å¾ˆå¿«çš„é¡µé¢ï¼Œç”¨æˆ·å¹³å‡åœç•™æ—¶é—´ä¼šå˜é•¿ï¼Œè·³å‡ºç‡ä¼šæ›´ä½ï¼Œä¹Ÿå°±æœ‰æ›´é«˜çš„å¹¿å‘ŠæŸ¥çœ‹ç‡</p>\n<h3 id=\"ç›®æ ‡-3\"><a href=\"#ç›®æ ‡-3\" class=\"headerlink\" title=\"ç›®æ ‡\"></a>ç›®æ ‡</h3><ul>\n<li>ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼Œå¯ä»¥æ ¹æ®è®¾å¤‡ã€ç½‘ç»œç­‰æ¡ä»¶ã€‚ç›®å‰ï¼Œæ¯”è¾ƒå¥½çš„ä¸€ä¸ªæ–¹å¼æ˜¯ï¼Œè®©ä½ çš„é¡µé¢åœ¨ä¸€ä¸ªä¸­é…çš„3Gç½‘ç»œæ‰‹æœºä¸Šæ‰“å¼€æ—¶é—´ä¸è¶…è¿‡5ç§’</li>\n<li>å¯¹äºç¬¬äºŒæ¬¡æ‰“å¼€ï¼Œå°½é‡ä¸è¶…è¿‡2ç§’</li>\n</ul>\n<h3 id=\"ä¼˜åŒ–æ–¹æ¡ˆ-3\"><a href=\"#ä¼˜åŒ–æ–¹æ¡ˆ-3\" class=\"headerlink\" title=\"ä¼˜åŒ–æ–¹æ¡ˆ\"></a>ä¼˜åŒ–æ–¹æ¡ˆ</h3><ul>\n<li>åœ¨æ‰‹æœºè®¾å¤‡ä¸Šæµ‹è¯•åŠ è½½æ€§èƒ½ï¼Œé€‰ç”¨ä¸­é…çš„3Gç½‘ç»œï¼ˆ400kb/sï¼Œ400ms RTTï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <a href=\"https://www.webpagetest.org/easy\">WebPageTest</a> æ¥æµ‹è¯•</li>\n<li>è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿ç”¨æˆ·çš„ç½‘ç»œæ˜¯4Gï¼Œä½†å› ä¸ºä¸¢åŒ…æˆ–è€…ç½‘ç»œæ³¢åŠ¨ï¼Œå¯èƒ½ä¼šæ¯”é¢„æœŸçš„æ›´æ…¢</li>\n<li><a href=\"https://web.dev/render-blocking-resources/\">ç¦ç”¨æ¸²æŸ“é˜»å¡çš„èµ„æºï¼Œå»¶ååŠ è½½</a></li>\n<li>å¯ä»¥é‡‡ç”¨ <a href=\"https://web.dev/native-lazy-loading/\">lazy load</a>ï¼Œ<a href=\"https://web.dev/reduce-javascript-payloads-with-code-splitting/\">code-splitting</a> ç­‰ <a href=\"https://web.dev/fast/\">å…¶ä»–ä¼˜åŒ–</a> æ‰‹æ®µï¼Œè®©ç¬¬ä¸€æ¬¡åŠ è½½çš„èµ„æºæ›´å°‘</li>\n</ul>\n<h2 id=\"åˆ†æRAILç”¨çš„å·¥å…·\"><a href=\"#åˆ†æRAILç”¨çš„å·¥å…·\" class=\"headerlink\" title=\"åˆ†æRAILç”¨çš„å·¥å…·\"></a>åˆ†æRAILç”¨çš„å·¥å…·</h2><ul>\n<li><a href=\"https://developers.google.com/web/tools/chrome-devtools\">Chrome DevTools</a></li>\n<li><a href=\"https://web.dev/measure/\">Lighthouse</a></li>\n<li><a href=\"https://webpagetest.org/easy\">WebPageTest</a></li>\n</ul>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>RAILæ˜¯ä¸€ä¸ªæ—…ç¨‹ï¼Œä¸ºäº†æå‡ç”¨æˆ·åœ¨ç½‘ç«™çš„äº¤äº’ä½“éªŒè€Œä¸æ–­æ¢ç´¢ã€‚ä½ éœ€è¦å»ç†è§£ç”¨æˆ·å¦‚ä½•æ„ŸçŸ¥ä½ çš„ç«™ç‚¹ï¼Œè¿™æ ·æ‰èƒ½è®¾ç½®æœ€ä½³çš„æ€§èƒ½ç›®æ ‡</p>\n<ul>\n<li>èšç„¦ç”¨æˆ·</li>\n<li>100mså†…å“åº”ç”¨æˆ·çš„è¾“å…¥</li>\n<li>10mså†…äº§ç”Ÿ1å¸§ï¼Œåœ¨æ»šåŠ¨æˆ–è€…åŠ¨ç”»æ‰§è¡Œæ—¶</li>\n<li>æœ€å¤§åŒ–ä¸»çº¿ç¨‹çš„ç©ºé—²æ—¶é—´</li>\n<li>5så†…è®©ç½‘é¡µå˜å¾—å¯äº¤äº’</li>\n</ul>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><p><a href=\"https://web.dev/rail/\">web.dev/rail/</a></p>\n<h1 id=\"2-å‰ç«¯æ€§èƒ½ä¼˜åŒ–\"><a href=\"#2-å‰ç«¯æ€§èƒ½ä¼˜åŒ–\" class=\"headerlink\" title=\"2.å‰ç«¯æ€§èƒ½ä¼˜åŒ–\"></a>2.å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h1><h1 id=\"ä¸€ã€ç¼“å­˜\"><a href=\"#ä¸€ã€ç¼“å­˜\" class=\"headerlink\" title=\"ä¸€ã€ç¼“å­˜\"></a>ä¸€ã€ç¼“å­˜</h1><p>å½“æµè§ˆå™¨æƒ³è¦è·å–è¿œç¨‹çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬çš„æ€§èƒ½ä¹‹æ—…å°±å¼€å§‹äº†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç«‹å³åŠ¨èº«ï¼ˆå‘é€è¯·æ±‚ï¼‰ã€‚åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå¾ˆå¤šæ€§èƒ½é—®é¢˜éƒ½ä¼šé€šè¿‡å¢åŠ ç¼“å­˜æ¥è§£å†³ï¼Œå‰ç«¯ä¹Ÿä¸ä¾‹å¤–ã€‚å’Œè®¸å¤šåç«¯æœåŠ¡ä¸€æ ·ï¼Œå‰ç«¯ç¼“å­˜ä¹Ÿæ˜¯å¤šçº§çš„ã€‚ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¥å…·ä½“çœ‹ä¸€çœ‹ã€‚</p>\n<h2 id=\"1-æœ¬åœ°æ•°æ®å­˜å‚¨\"><a href=\"#1-æœ¬åœ°æ•°æ®å­˜å‚¨\" class=\"headerlink\" title=\"1. æœ¬åœ°æ•°æ®å­˜å‚¨\"></a>1. æœ¬åœ°æ•°æ®å­˜å‚¨</h2><p>é€šè¿‡ç»“åˆæœ¬åœ°å­˜å‚¨ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡ä»£ç ä¾§å®ç°ç¼“å­˜ã€‚</p>\n<p>å¯¹äºä¸€äº›è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¾§è¿›è¡Œç¼“å­˜å¤„ç†ã€‚ç¼“å­˜æ–¹å¼åŒ…æ‹¬ <code>localStorage</code>ã€<code>sessionStorage</code>ã€<code>indexedDB</code>ã€‚æŠŠè¿™å—åŠ å…¥ç¼“å­˜çš„è®¨è®ºä¹Ÿè®¸ä¼šæœ‰äº‰è®®ï¼Œä½†åˆ©ç”¨å¥½å®ƒç¡®å®èƒ½åœ¨ç¨‹åºä¾§è¾¾åˆ°ä¸€äº›ç±»ä¼¼ç¼“å­˜çš„èƒ½åŠ›ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæ—¥æ›´æ–°çš„æ¦œå•ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå½“æ—¥ç¼“å­˜ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å½“ç”¨æˆ·åŠ è½½ç«™ç‚¹ä¸­çš„æ¦œå•ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–¹æ³•è·å–æ¦œå•æ•°æ®</span><br><span class=\"line\">async function readListData() &#123;</span><br><span class=\"line\">    const info &#x3D; JSON.parse(localStorage.getItem(&#39;listInfo&#39;));</span><br><span class=\"line\">    if (isExpired(info.time, +(new Date))) &#123;</span><br><span class=\"line\">        const list &#x3D; await fetchList();</span><br><span class=\"line\">        localStorage.setItem(&#39;listInfo&#39;, JSON.stringify(&#123;</span><br><span class=\"line\">            time: +(new Date),</span><br><span class=\"line\">            list: list</span><br><span class=\"line\">        &#125;));</span><br><span class=\"line\">        return list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return info.list;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>localStorage</code> å¤§å®¶éƒ½æ¯”è¾ƒäº†è§£äº†ï¼Œ<code>indexedDB</code> å¯èƒ½ä¼šäº†è§£çš„æ›´å°‘ä¸€äº›ã€‚æƒ³å¿«é€Ÿäº†è§£ <code>indexedDB</code> ä½¿ç”¨æ–¹å¼å¯ä»¥çœ‹<a href=\"https://medium.com/free-code-camp/a-quick-but-complete-guide-to-indexeddb-25f030425501\">è¿™ç¯‡æ–‡ç« </a>[1]ã€‚</p>\n<p>ä»å‰ç«¯è§†è§’çœ‹ï¼Œè¿™æ˜¯ä¸€ç§æœ¬åœ°å­˜å‚¨ï¼›ä½†å¦‚æœä»æ•´ä¸ªç³»ç»Ÿçš„ç»´åº¦æ¥çœ‹ï¼Œå¾ˆå¤šæ—¶å€™å…¶å®ä¹Ÿæ˜¯ç¼“å­˜é“¾æ¡ä¸­çš„ä¸€ç¯ã€‚å¯¹äºä¸€äº›ç‰¹æ®Šçš„ã€è½»é‡çº§çš„ä¸šåŠ¡æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æœ¬åœ°å­˜å‚¨ä½œä¸ºç¼“å­˜ã€‚</p>\n<h2 id=\"2-å†…å­˜ç¼“å­˜ï¼ˆMemoryï¼‰\"><a href=\"#2-å†…å­˜ç¼“å­˜ï¼ˆMemoryï¼‰\" class=\"headerlink\" title=\"2. å†…å­˜ç¼“å­˜ï¼ˆMemoryï¼‰\"></a>2. å†…å­˜ç¼“å­˜ï¼ˆMemoryï¼‰</h2><p>å½“ä½ è®¿é—®ä¸€ä¸ªé¡µé¢åŠå…¶å­èµ„æºæ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°ä¸€ä¸ªèµ„æºè¢«ä½¿ç”¨å¤šæ¬¡ï¼Œä¾‹å¦‚å›¾æ ‡ã€‚ç”±äºè¯¥èµ„æºå·²ç»å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå†å»è¯·æ±‚åè€Œå¤šæ­¤ä¸€ä¸¾ï¼Œæµè§ˆå™¨å†…å­˜åˆ™æ˜¯æœ€è¿‘ã€æœ€å¿«çš„å“åº”åœºæ‰€ã€‚</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/1-cache/img/memcache.png\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/1-cache/img/memcache.png\" alt=\"memory cache\"></a></p>\n<p>å†…å­˜ç¼“å­˜å¹¶æ— æ˜ç¡®çš„æ ‡å‡†è§„å®šï¼Œå®ƒä¸ HTTP è¯­ä¹‰ä¸‹çš„ç¼“å­˜å…³è”æ€§ä¸å¤§ï¼Œç®—æ˜¯æµè§ˆå™¨å¸®æˆ‘ä»¬å®ç°çš„ä¼˜åŒ–ï¼Œå¾ˆå¤šæ—¶å€™å…¶å®æˆ‘ä»¬æ„è¯†ä¸åˆ°ã€‚</p>\n<p>å¯¹å†…å­˜ç¼“å­˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨<a href=\"https://calendar.perfplanet.com/2016/a-tale-of-four-caches/\">è¿™ç¯‡æ–‡ç« </a>[2]çš„ Memory Cache éƒ¨åˆ†è¿›ä¸€æ­¥äº†è§£ã€‚</p>\n<h2 id=\"3-Cache-API\"><a href=\"#3-Cache-API\" class=\"headerlink\" title=\"3. Cache API\"></a>3. Cache API</h2><p>å½“æˆ‘ä»¬æ²¡æœ‰å‘½ä¸­å†…å­˜ç¼“å­˜æ—¶ï¼Œæ˜¯å¦å°±å¼€å§‹å‘é€è¯·æ±‚äº†å‘¢ï¼Ÿå…¶å®ä¸ä¸€å®šã€‚</p>\n<p>åœ¨è¿™æ—¶æˆ‘ä»¬è¿˜å¯èƒ½ä¼šç¢°åˆ° Cache API é‡Œçš„ç¼“å­˜ï¼Œæåˆ°å®ƒå°±ä¸å¾—ä¸æä¸€ä¸‹ Service Worker äº†ã€‚å®ƒä»¬é€šå¸¸éƒ½æ˜¯é…åˆä½¿ç”¨çš„ã€‚</p>\n<p>é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œè¿™å±‚çš„ç¼“å­˜æ²¡æœ‰è§„å®šè¯´è¯¥ç¼“å­˜ä»€ä¹ˆã€ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç¼“å­˜ï¼Œå®ƒåªæ˜¯æä¾›ç»™äº†å®¢æˆ·ç«¯æ„å»ºè¯·æ±‚ç¼“å­˜æœºåˆ¶çš„èƒ½åŠ›ã€‚å¦‚æœä½ å¯¹ PWA æˆ–è€… Service Worker å¾ˆäº†è§£ï¼Œåº”è¯¥éå¸¸æ¸…æ¥šæ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚å¦‚æœä¸äº†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çœ‹ä¸€ä¸‹ï¼š</p>\n<p>é¦–å…ˆï¼ŒService Worker æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­å¯ç”¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; index.js</span><br><span class=\"line\">if (&#39;serviceWorker&#39; in navigator) &#123;</span><br><span class=\"line\">    navigator.serviceWorker.register(&#39;.&#x2F;sw.js&#39;).then(function () &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; æ³¨å†ŒæˆåŠŸ</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹‹åéœ€è¦å¤„ç†ä¸€äº› Service Worker çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè€Œå…¶ä¸­ä¸è¿™é‡Œæåˆ°çš„ç¼“å­˜åŠŸèƒ½ç›´æ¥ç›¸å…³çš„åˆ™æ˜¯è¯·æ±‚æ‹¦æˆªï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; sw.js</span><br><span class=\"line\">self.addEventListener(&#39;fetch&#39;, function (e) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; å¦‚æœæœ‰cacheåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™é€šè¿‡fetchè¯·æ±‚</span><br><span class=\"line\">    e.respondWith(</span><br><span class=\"line\">        caches.match(e.request).then(function (cache) &#123;</span><br><span class=\"line\">            return cache || fetch(e.request);</span><br><span class=\"line\">        &#125;).catch(function (err) &#123;</span><br><span class=\"line\">            console.log(err);</span><br><span class=\"line\">            return fetch(e.request);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ä¸Šä»£ç ä¼šæ‹¦æˆªæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç¼“å­˜çš„è¯·æ±‚å†…å®¹ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ç¼“å­˜ï¼Œå¦åˆ™ä¼šç»§ç»­å‘é€è¯·æ±‚ã€‚ä¸å†…å­˜ç¼“å­˜ä¸åŒï¼ŒCache API æä¾›çš„ç¼“å­˜å¯ä»¥è®¤ä¸ºæ˜¯â€œæ°¸ä¹…æ€§â€çš„ï¼Œå…³é—­æµè§ˆå™¨æˆ–ç¦»å¼€é¡µé¢ä¹‹åï¼Œä¸‹æ¬¡å†è®¿é—®ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚</p>\n<p>Service Worker ä¸ Cache API å…¶å®æ˜¯ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„ç»„åˆï¼Œèƒ½å¤Ÿå®ç°å †ä¸šåŠ¡çš„é€æ˜ï¼Œåœ¨[å…¼å®¹æ€§](<a href=\"https://caniuse.com/#feat=serviceworkers&amp;search=service\">https://caniuse.com/#feat=serviceworkers&amp;search=service</a> worker)ä¸Šä¹Ÿå¯ä»¥åšæˆæ¸è¿›æ”¯æŒã€‚è¿˜æ˜¯éå¸¸æ¨èåœ¨ä¸šåŠ¡ä¸­å°è¯•çš„ã€‚å½“ç„¶ä¸Šé¢ä»£ç ç®€ç•¥äº†å¾ˆå¤šï¼Œæƒ³è¦è¿›ä¸€æ­¥äº†è§£ Service Worker å’Œ Cache API çš„ä½¿ç”¨å¯ä»¥çœ‹<a href=\"https://juejin.im/post/5aca14b6f265da237c692e6f\">è¿™ç¯‡æ–‡ç« </a>[3]ã€‚åŒæ—¶æ¨èä½¿ç”¨ Google çš„ <a href=\"https://developers.google.com/web/tools/workbox/\">Workbox</a>ã€‚</p>\n<h2 id=\"4-HTTP-ç¼“å­˜\"><a href=\"#4-HTTP-ç¼“å­˜\" class=\"headerlink\" title=\"4. HTTP ç¼“å­˜\"></a>4. HTTP ç¼“å­˜</h2><p>å¦‚æœ Service Worker ä¸­ä¹Ÿæ²¡æœ‰ç¼“å­˜çš„è¯·æ±‚ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¼šçœŸæ­£åˆ° HTTP request çš„é˜¶æ®µäº†ã€‚è¿™ä¸ªæ—¶å€™å‡ºç°çš„å°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ HTTP ç¼“å­˜è§„èŒƒã€‚</p>\n<p>HTTP æœ‰ä¸€ç³»åˆ—çš„è§„èŒƒæ¥è§„å®šå“ªäº›æƒ…å†µä¸‹éœ€è¦ç¼“å­˜è¯·æ±‚ä¿¡æ¯ã€ç¼“å­˜å¤šä¹…ï¼Œè€Œå“ªäº›æƒ…å†µä¸‹ä¸èƒ½è¿›è¡Œä¿¡æ¯çš„ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸å…³çš„ HTTP è¯·æ±‚å¤´æ¥å®ç°ç¼“å­˜ã€‚</p>\n<p>HTTP ç¼“å­˜å¤§è‡´å¯ä»¥åˆ†ä¸ºå¼ºç¼“å­˜ä¸åå•†ç¼“å­˜ã€‚</p>\n<h3 id=\"4-1-å¼ºç¼“å­˜\"><a href=\"#4-1-å¼ºç¼“å­˜\" class=\"headerlink\" title=\"4.1. å¼ºç¼“å­˜\"></a>4.1. å¼ºç¼“å­˜</h3><p>åœ¨å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­è¯»å–å†…å®¹ï¼Œè¿™ä¸ªâ€œæœ¬åœ°â€ä¸€èˆ¬å°±æ˜¯æ¥æºäºç¡¬ç›˜ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ Chrome DevTools ä¸Šç»å¸¸çœ‹åˆ°çš„ã€Œdisk cacheã€ã€‚</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/1-cache/img/diskcache.png\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/1-cache/img/diskcache.png\" alt=\"disk cache\"></a></p>\n<p>ä¸å…¶ç›¸å…³çš„å“åº”å¤´åˆ™æ˜¯ <code>Expires</code> å’Œ <code>Cache-Control</code>ã€‚åœ¨ <code>Expires</code> ä¸Šå¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œæµè§ˆå™¨é€šè¿‡å°†å…¶ä¸å½“å‰æœ¬åœ°æ—¶é—´å¯¹æ¯”ï¼Œåˆ¤æ–­èµ„æºæ˜¯å¦è¿‡æœŸï¼Œæœªè¿‡æœŸåˆ™ç›´æ¥ä»æœ¬åœ°å–å³å¯ã€‚è€Œ <code>Cache-Control</code> åˆ™å¯ä»¥é€šè¿‡ç»™å®ƒè®¾ç½®ä¸€ä¸ª <code>max-age</code>ï¼Œæ¥æ§åˆ¶è¿‡æœŸæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œ<code>max-age=300</code> å°±æ˜¯è¡¨ç¤ºåœ¨å“åº”æˆåŠŸå 300 ç§’å†…ï¼Œèµ„æºè¯·æ±‚ä¼šèµ°å¼ºç¼“å­˜ã€‚</p>\n<h3 id=\"4-2-åå•†ç¼“å­˜\"><a href=\"#4-2-åå•†ç¼“å­˜\" class=\"headerlink\" title=\"4.2. åå•†ç¼“å­˜\"></a>4.2. åå•†ç¼“å­˜</h3><p>ä½ å¯èƒ½ä¹Ÿæ„Ÿè§‰åˆ°äº†ï¼Œå¼ºç¼“å­˜ä¸æ˜¯é‚£ä¹ˆçµæ´»ã€‚å¦‚æœæˆ‘åœ¨ 300 ç§’å†…æ›´æ–°äº†èµ„æºï¼Œéœ€è¦æ€ä¹ˆé€šçŸ¥å®¢æˆ·ç«¯å‘¢ï¼Ÿå¸¸ç”¨çš„æ–¹å¼å°±æ˜¯é€šè¿‡åå•†ç¼“å­˜ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œè¿œç¨‹è¯·æ±‚æ…¢çš„ä¸€å¤§åŸå› å°±æ˜¯æŠ¥æ–‡ä½“ç§¯è¾ƒå¤§ã€‚åå•†ç¼“å­˜å°±æ˜¯å¸Œæœ›èƒ½é€šè¿‡å…ˆâ€œé—®ä¸€é—®â€æœåŠ¡å™¨èµ„æºåˆ°åº•æœ‰æ²¡æœ‰è¿‡æœŸï¼Œæ¥é¿å…æ— è°“çš„èµ„æºä¸‹è½½ã€‚è¿™ä¼´éšçš„å¾€å¾€ä¼šæ˜¯ HTTP è¯·æ±‚ä¸­çš„ 304 å“åº”ç ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹å®ç°åå•†ç¼“å­˜çš„ä¸¤ç§æ–¹å¼ï¼š</p>\n<p>ä¸€ç§åé˜²ç¼“å­˜çš„æ–¹å¼æ˜¯ï¼šæœåŠ¡å™¨ç¬¬ä¸€æ¬¡å“åº”æ—¶è¿”å› <code>Last-Modified</code>ï¼Œè€Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚æ—¶å¸¦ä¸Šå…¶å€¼ä½œä¸º <code>If-Modified-Since</code>ï¼Œç›¸å½“äºé—®æœåŠ¡ç«¯ï¼šXX æ—¶é—´ç‚¹ä¹‹åï¼Œè¿™ä¸ªèµ„æºæ›´æ–°äº†ä¹ˆï¼ŸæœåŠ¡å™¨æ ¹æ®å®é™…æƒ…å†µå›ç­”å³å¯ï¼šæ›´æ–°äº†ï¼ˆçŠ¶æ€ç  200ï¼‰æˆ–æ²¡æ›´æ–°ï¼ˆçŠ¶æ€ç  304ï¼‰ã€‚</p>\n<p>ä¸Šé¢æ˜¯é€šè¿‡æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦æ›´æ–°ï¼Œå¦‚æœæ›´æ–°æ—¶é—´é—´éš”è¿‡çŸ­ï¼Œä¾‹å¦‚ 1s ä¸€ä¸‹ï¼Œé‚£ä¹ˆä½¿ç”¨æ›´æ–°æ—¶é—´çš„æ–¹å¼ç²¾åº¦å°±ä¸å¤Ÿäº†ã€‚æ‰€ä»¥è¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡æ ‡è¯† â€”â€” <code>ETag</code>ã€‚æœåŠ¡å™¨ç¬¬ä¸€æ¬¡å“åº”æ—¶è¿”å› <code>ETag</code>ï¼Œè€Œæµè§ˆå™¨åœ¨åç»­è¯·æ±‚æ—¶å¸¦ä¸Šå…¶å€¼ä½œä¸º <code>If-None-Match</code>ã€‚ä¸€èˆ¬ä¼šç”¨æ–‡ä»¶çš„ MD5 ä½œä¸º <code>ETag</code>ã€‚</p>\n<p>ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸€å®šè¦å–„äºåº”ç”¨ HTTP ç¼“å­˜ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šå…³äº HTTP ç¼“å­˜çš„å†…å®¹ï¼Œå¯ä»¥é˜…è¯»<a href=\"https://github.com/amandakelake/blog/issues/41\">è¿™ç¯‡æ–‡ç« </a>[4]ã€‚</p>\n<blockquote>\n<p>ä¸Šé¢è¿™äº›çš„å„çº§ç¼“å­˜çš„åŒ¹é…æœºåˆ¶é‡Œï¼Œéƒ½æ˜¯åŒ…å«èµ„æºçš„ uri çš„åŒ¹é…ï¼Œå³ uri æ›´æ”¹åä¸ä¼šå‘½ä¸­ç¼“å­˜ã€‚ä¹Ÿæ­£æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬ç›®å‰åœ¨å‰ç«¯å®è·µä¸­éƒ½ä¼šæŠŠæ–‡ä»¶ HASH åŠ å…¥åˆ°æ–‡ä»¶åä¸­ï¼Œé¿å…åŒåæ–‡ä»¶å‘½ä¸­ç¼“å­˜çš„æ—§èµ„æºã€‚</p>\n</blockquote>\n<h2 id=\"5-Push-Cache\"><a href=\"#5-Push-Cache\" class=\"headerlink\" title=\"5. Push Cache\"></a>5. Push Cache</h2><p>å‡å¦‚å¾ˆä¸å¹¸ï¼Œä»¥ä¸Šè¿™äº›ç¼“å­˜ä½ éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œé‚£ä¹ˆä½ å°†ä¼šç¢°åˆ°æœ€åä¸€ä¸ªç¼“å­˜æ£€æŸ¥ â€”â€” Push Cacheã€‚</p>\n<p>Push Cache å…¶å®æ˜¯ HTTP/2 çš„ Push åŠŸèƒ½æ‰€å¸¦æ¥çš„ã€‚ç®€è¨€ä¹‹ï¼Œè¿‡å»ä¸€ä¸ª HTTP çš„è¯·æ±‚è¿æ¥åªèƒ½ä¼ è¾“ä¸€ä¸ªèµ„æºï¼Œè€Œç°åœ¨ä½ åœ¨è¯·æ±‚ä¸€ä¸ªèµ„æºçš„åŒæ—¶ï¼ŒæœåŠ¡ç«¯å¯ä»¥ä¸ºä½ â€œæ¨é€â€ä¸€äº›å…¶ä»–èµ„æº â€”â€” ä½ å¯èƒ½åœ¨åœ¨ä¸ä¹…çš„å°†æ¥å°±ä¼šç”¨åˆ°ä¸€äº›èµ„æºã€‚ä¾‹å¦‚ï¼Œä½ åœ¨è¯·æ±‚ <a href=\"http://www.sample.com/\">www.sample.com</a> æ—¶ï¼ŒæœåŠ¡ç«¯ä¸ä»…å‘é€äº†é¡µé¢æ–‡æ¡£ï¼Œè¿˜ä¸€èµ·æ¨é€äº† å…³é”® CSS æ ·å¼è¡¨ã€‚è¿™ä¹Ÿå°±é¿å…äº†æµè§ˆå™¨æ”¶åˆ°å“åº”ã€è§£æåˆ°ç›¸åº”ä½ç½®æ—¶æ‰ä¼šè¯·æ±‚æ‰€å¸¦æ¥çš„å»¶åã€‚</p>\n<p>ä¸è¿‡ HTTP/2 Push Cache æ˜¯ä¸€ä¸ªæ¯”è¾ƒåº•å±‚çš„ç½‘ç»œç‰¹æ€§ï¼Œä¸å…¶ä»–çš„ç¼“å­˜æœ‰å¾ˆå¤šä¸åŒï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>å½“åŒ¹é…ä¸Šæ—¶ï¼Œå¹¶ä¸ä¼šåœ¨é¢å¤–æ£€æŸ¥èµ„æºæ˜¯å¦è¿‡æœŸï¼›</li>\n<li>å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œç”šè‡³çŸ­è¿‡å†…å­˜ç¼“å­˜ï¼ˆä¾‹å¦‚æœ‰æ–‡ç« æåˆ°ï¼ŒChrome ä¸­ä¸º 5min å·¦å³ï¼‰ï¼›</li>\n<li>åªä¼šè¢«ä½¿ç”¨ä¸€æ¬¡ï¼›</li>\n<li>HTTP/2 è¿æ¥æ–­å¼€å°†å¯¼è‡´ç¼“å­˜ç›´æ¥å¤±æ•ˆï¼›</li>\n<li>â€¦â€¦</li>\n</ul>\n<p>å¦‚æœå¯¹ HTTP/2 Push æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹<a href=\"https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/\">è¿™ç¯‡æ–‡ç« </a>[5]ã€‚</p>\n<hr>\n<p>å¥½äº†ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æ²¡æœ‰å‘å‡ºä¸€ä¸ªçœŸæ­£çš„è¯·æ±‚ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåœ¨ç¼“å­˜æ£€æŸ¥é˜¶æ®µæˆ‘ä»¬å°±ä¼šæœ‰å¾ˆå¤šæœºä¼šå°†åç»­çš„æ€§èƒ½é—®é¢˜æ‰¼æ€åœ¨æ‘‡ç¯®ä¹‹ä¸­ â€”â€” å¦‚æœè¿œç¨‹è¯·æ±‚éƒ½ä¸å¿…å‘å‡ºï¼Œåˆä½•é¡»ä¼˜åŒ–åŠ è½½æ€§èƒ½å‘¢ï¼Ÿ</p>\n<p>æ‰€ä»¥ï¼Œå®¡è§†ä¸€ä¸‹æˆ‘ä»¬çš„åº”ç”¨ã€ä¸šåŠ¡ï¼Œçœ‹çœ‹å“ªäº›æ€§èƒ½é—®é¢˜æ˜¯å¯ä»¥åœ¨æºå¤´ä¸Šè§£å†³çš„ã€‚</p>\n<h1 id=\"äºŒã€å‘é€è¯·æ±‚\"><a href=\"#äºŒã€å‘é€è¯·æ±‚\" class=\"headerlink\" title=\"äºŒã€å‘é€è¯·æ±‚\"></a>äºŒã€å‘é€è¯·æ±‚</h1><p>åœ¨å‰ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä»‹ç»äº†æµè§ˆå™¨ç¼“å­˜ã€‚å½“ä¸€ä¸ªè¯·æ±‚èµ°è¿‡äº†å„çº§å‰ç«¯ç¼“å­˜åï¼Œå°±ä¼šéœ€è¦å®é™…å‘é€ä¸€ä¸ªè¯·æ±‚äº†ã€‚</p>\n<blockquote>\n<p>åœ¨ HTTP ç¼“å­˜ä¸­ï¼Œæˆ‘ä»¬å…¶å®ä¹Ÿæœ‰å‘é€è¯·æ±‚ï¼›æˆ–è€…æ˜¯åœ¨ HTTP/2 Push ä¸‹ï¼Œä½¿ç”¨äº†ä¹‹å‰è¿æ¥ä¸­æ¨é€çš„èµ„æºã€‚ä¸è¿‡ä¸ºäº†ä¿è¯æ€è·¯çš„è¿è´¯ï¼Œæˆ‘è¿˜æ˜¯æŠŠã€Œå‘é€è¯·æ±‚ã€è¿™ä¸ªç« èŠ‚æ•´ä½“æ”¾åœ¨ã€Œç¼“å­˜ã€ä¹‹åäº†ã€‚</p>\n</blockquote>\n<h2 id=\"1-é¿å…å¤šä½™é‡å®šå‘\"><a href=\"#1-é¿å…å¤šä½™é‡å®šå‘\" class=\"headerlink\" title=\"1. é¿å…å¤šä½™é‡å®šå‘\"></a>1. é¿å…å¤šä½™é‡å®šå‘</h2><p>é‡å®šå‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½è¿›è¡Œäº†æœåŠ¡è¿ç§»ï¼Œä¿®æ”¹äº†åŸæœ‰çš„ uriã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨é‡å®šå‘ï¼ŒæŠŠè®¿é—®åŸç½‘å€çš„ç”¨æˆ·é‡å®šå‘åˆ°æ–°çš„ uriã€‚è¿˜æœ‰æ˜¯åœ¨ä¸€äº›ç™»å½•åœºæ™¯ä¸‹ï¼Œä¼šä½¿ç”¨åˆ°é‡å®šå‘æŠ€æœ¯ã€‚</p>\n<p>é‡å®šå‘åˆ†ä¸º 301 çš„æ°¸ä¹…é‡å®šå‘å’Œ 302 çš„ä¸´æ—¶é‡å®šå‘ã€‚å»ºè®®è´´åˆè¯­ä¹‰ï¼Œä¾‹å¦‚æœåŠ¡è¿ç§»çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ 301 é‡å®šå‘ã€‚å¯¹ SEO ä¹Ÿä¼šæ›´å‹å¥½ã€‚</p>\n<p>åŒæ—¶ä¹Ÿä¸è¦æ»¥ç”¨é‡å®šå‘ã€‚æ›¾ä»Šä¹Ÿè§è¿‡æœ‰ä¸šåŠ¡åœ¨è®¿é—®åé‡å®šå‘ 3 æ¬¡çš„æƒ…å†µï¼Œå…¶å®é‡Œé¢æœ‰äº›æ˜¯ä¸å¿…è¦çš„ã€‚æ¯æ¬¡é‡å®šå‘éƒ½æ˜¯æœ‰è¯·æ±‚è€—æ—¶çš„ï¼Œå»ºè®®é¿å…è¿‡å¤šçš„é‡å®šå‘ã€‚</p>\n<h2 id=\"2-DNS-é¢„è§£æ\"><a href=\"#2-DNS-é¢„è§£æ\" class=\"headerlink\" title=\"2. DNS é¢„è§£æ\"></a>2. DNS é¢„è§£æ</h2><p>åŸºæœ¬æˆ‘ä»¬è®¿é—®è¿œç¨‹æœåŠ¡çš„æ—¶å€™ï¼Œä¸ä¼šç›´æ¥ä½¿ç”¨æœåŠ¡çš„å‡ºå£ IPï¼Œè€Œæ˜¯ä½¿ç”¨åŸŸåã€‚æ‰€ä»¥è¯·æ±‚çš„ä¸€ä¸ªé‡è¦ç¯èŠ‚å°±æ˜¯åŸŸåè§£æã€‚</p>\n<p>DNS æœåŠ¡æœ¬èº«æ˜¯ä¸€ä¸ªæ ‘çŠ¶å±‚çº§ç»“æ„ï¼Œå…¶è§£ææ˜¯ä¸€ä¸ªé€’å½’ä¸è¿­ä»£çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ github.com çš„å¤§è‡´è§£ææµç¨‹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å…ˆæ£€æŸ¥æœ¬åœ° hosts æ–‡ä»¶ä¸­æ˜¯å¦æœ‰æ˜ å°„ï¼Œæœ‰åˆ™ä½¿ç”¨ï¼›</li>\n<li>æŸ¥æ‰¾æœ¬åœ° DNS ç¼“å­˜ï¼Œæœ‰åˆ™è¿”å›ï¼›</li>\n<li>æ ¹æ®é…ç½®åœ¨ TCP/IP å‚æ•°ä¸­è®¾ç½® DNS æŸ¥è¯¢æœåŠ¡å™¨ï¼Œå¹¶å‘å…¶è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™é‡Œå…ˆç§°ä¸ºæœ¬åœ° DNSï¼›</li>\n<li>å¦‚æœè¯¥æœåŠ¡å™¨æ— æ³•è§£æåŸŸåï¼ˆæ²¡æœ‰ç¼“å­˜ï¼‰ï¼Œä¸”ä¸éœ€è¦è½¬å‘ï¼Œåˆ™ä¼šå‘æ ¹æœåŠ¡å™¨è¯·æ±‚ï¼›</li>\n<li>æ ¹æœåŠ¡å™¨æ ¹æ®åŸŸåç±»å‹åˆ¤æ–­å¯¹åº”çš„é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼ˆ.comï¼‰ï¼Œè¿”å›ç»™æœ¬åœ° DNSï¼Œç„¶åé‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥åŸŸåï¼›</li>\n<li>å½“ç„¶ï¼Œå¦‚æœè®¾ç½®äº†è½¬å‘ï¼Œæœ¬åœ° DNS ä¼šå°†è¯·æ±‚é€çº§è½¬å‘ï¼Œç›´åˆ°è½¬å‘æœåŠ¡å™¨è¿”å›æˆ–è€…ä¹Ÿä¸èƒ½è§£æã€‚</li>\n</ol>\n<p>æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥çœ‹<a href=\"https://www.zhihu.com/question/23042131\">è¿™ç¯‡æ–‡ç« </a>[1]ã€‚</p>\n<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦äº†è§£çš„æ˜¯ï¼š</p>\n<ul>\n<li>é¦–å…ˆï¼ŒDNS è§£ææµç¨‹å¯èƒ½ä¼šå¾ˆé•¿ï¼Œè€—æ—¶å¾ˆé«˜ï¼Œæ‰€ä»¥æ•´ä¸ª DNS æœåŠ¡ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯éƒ½ä¼šæœ‰ç¼“å­˜æœºåˆ¶ï¼Œè¿™ä¸ªä½œä¸ºå‰ç«¯ä¸å¥½æ¶‰å…¥ï¼›</li>\n<li>å…¶æ¬¡ï¼Œåœ¨ DNS è§£æä¸Šï¼Œå‰ç«¯è¿˜æ˜¯å¯ä»¥é€šè¿‡æµè§ˆå™¨æä¾›çš„å…¶ä»–æ‰‹æ®µæ¥â€œåŠ é€Ÿâ€çš„ã€‚</li>\n</ul>\n<p><a href=\"https://www.w3.org/TR/resource-hints/#dns-prefetch\">DNS Prefetch</a>[2] å°±æ˜¯æµè§ˆå™¨æä¾›ç»™æˆ‘ä»¬çš„ä¸€ä¸ª APIã€‚å®ƒæ˜¯ Resource Hint çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå¯ä»¥å‘Šè¯‰æµè§ˆå™¨ï¼šè¿‡ä¼šæˆ‘å°±å¯èƒ½è¦å» yourwebsite.com ä¸Šä¸‹è½½ä¸€ä¸ªèµ„æºå•¦ï¼Œå¸®æˆ‘å…ˆè§£æä¸€ä¸‹åŸŸåå§ã€‚è¿™æ ·ä¹‹åç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼Œè§¦å‘äº† yourwebsite.com åŸŸåä¸‹çš„è¿œç¨‹è¯·æ±‚æ—¶ï¼Œå°±ç•¥å»äº† DNS è§£æçš„æ­¥éª¤ã€‚ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;link rel&#x3D;&quot;dns-prefetch&quot; href&#x3D;&quot;&#x2F;&#x2F;yourwebsite.com&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼Œæµè§ˆå™¨å¹¶ä¸ä¿è¯ä¸€å®šä¼šå»è§£æåŸŸåï¼Œå¯èƒ½ä¼šæ ¹æ®å½“å‰çš„ç½‘ç»œã€è´Ÿè½½ç­‰çŠ¶å†µåšå†³å®šã€‚æ ‡å‡†é‡Œä¹Ÿæ˜ç¡®å†™äº†ğŸ‘‡</p>\n<blockquote>\n<p>user agent SHOULD resolve as early as possible</p>\n</blockquote>\n<h2 id=\"3-é¢„å…ˆå»ºç«‹è¿æ¥\"><a href=\"#3-é¢„å…ˆå»ºç«‹è¿æ¥\" class=\"headerlink\" title=\"3. é¢„å…ˆå»ºç«‹è¿æ¥\"></a>3. é¢„å…ˆå»ºç«‹è¿æ¥</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œå»ºç«‹è¿æ¥ä¸ä»…éœ€è¦ DNS æŸ¥è¯¢ï¼Œè¿˜éœ€è¦è¿›è¡Œ TCP åè®®æ¡æ‰‹ï¼Œæœ‰äº›è¿˜ä¼šæœ‰ TLS/SSL åè®®ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´è¿æ¥çš„è€—æ—¶ã€‚ä½¿ç”¨ <a href=\"https://www.w3.org/TR/resource-hints/#preconnect\">Preconnect</a>[3] å¯ä»¥å¸®åŠ©ä½ å‘Šè¯‰æµè§ˆå™¨ï¼šâ€œæˆ‘æœ‰ä¸€äº›èµ„æºä¼šç”¨åˆ°æŸä¸ªæºï¼ˆoriginï¼‰ï¼Œä½ å¯ä»¥å¸®æˆ‘é¢„å…ˆå»ºç«‹è¿æ¥ã€‚â€</p>\n<p>æ ¹æ®è§„èŒƒï¼Œå½“ä½ ä½¿ç”¨ Preconnect æ—¶ï¼Œæµè§ˆå™¨å¤§è‡´åšäº†å¦‚ä¸‹å¤„ç†ï¼š</p>\n<ul>\n<li>é¦–å…ˆï¼Œè§£æ Preconnect çš„ urlï¼›</li>\n<li>å…¶æ¬¡ï¼Œæ ¹æ®å½“å‰ link å…ƒç´ ä¸­çš„å±æ€§è¿›è¡Œ cors çš„è®¾ç½®ï¼›</li>\n<li>ç„¶åï¼Œé»˜è®¤å…ˆå°† credential è®¾ä¸º <code>true</code>ï¼Œå¦‚æœ cors ä¸º <code>Anonymous</code> å¹¶ä¸”å­˜åœ¨è·¨åŸŸï¼Œåˆ™å°† credential ç½®ä¸º <code>false</code>ï¼›</li>\n<li>æœ€åï¼Œè¿›è¡Œè¿æ¥ã€‚</li>\n</ul>\n<p>ä½¿ç”¨ Preconnect åªéœ€è¦å°† <code>rel</code> å±æ€§è®¾ä¸º <code>preconnect</code> å³å¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;link rel&#x3D;&quot;preconnect&quot; href&#x3D;&quot;&#x2F;&#x2F;sample.com&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½® CORSï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;link rel&#x3D;&quot;preconnect&quot; href&#x3D;&quot;&#x2F;&#x2F;sample.com&quot; crossorigin&gt;</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ ‡å‡†å¹¶æ²¡æœ‰ç¡¬æ€§è§„å®šæµè§ˆå™¨ä¸€å®šè¦ï¼ˆè€Œæ˜¯ SHOULDï¼‰å®Œæˆæ•´ä¸ªè¿æ¥è¿‡ç¨‹ï¼Œä¸ DNS Prefetch ç±»ä¼¼ï¼Œæµè§ˆå™¨å¯ä»¥è§†æƒ…å†µå®Œæˆéƒ¨åˆ†å·¥ä½œã€‚</p>\n<h2 id=\"4-ä½¿ç”¨-CDN\"><a href=\"#4-ä½¿ç”¨-CDN\" class=\"headerlink\" title=\"4. ä½¿ç”¨ CDN\"></a>4. ä½¿ç”¨ CDN</h2><p>å½“æˆ‘ä»¬å®é™…æŠŠç½‘ç»œåŒ…å‘å‘æˆ‘ä»¬çš„ç›®æ ‡åœ°å€æ—¶ï¼Œè‚¯å®šå¸Œæœ›è¶Šå¿«åˆ°è¾¾ç›®çš„åœ°è¶Šå¥½ï¼ˆå¯¹åº”çš„ï¼Œä¹Ÿä¼šå¸Œæœ›è¶Šå¿«è·å¾—å“åº”ï¼‰ã€‚è€Œç½‘ç»œä¼ è¾“æ˜¯æœ‰æé™çš„ï¼ŒåŒæ ·ä¸€ä¸ªåŒ—äº¬çš„ç”¨æˆ·ï¼Œè®¿é—®åŒ—äº¬çš„æœåŠ¡å™¨æ˜¾ç„¶è¦æ¯”å¹¿å·å¿«å¾ˆå¤šã€‚åŒæ—¶ï¼ŒæœåŠ¡çš„è´Ÿè½½ä¹Ÿä¼šå½±å“å“åº”çš„é€Ÿåº¦ã€‚</p>\n<p>å¯¹äºé™æ€èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡ CDN æ¥é™ä½æ—¶å»¶ã€‚</p>\n<p>å¯¹äºä½¿ç”¨ CDN çš„èµ„æºï¼ŒDNS è§£æä¼šå°† CDN èµ„æºçš„åŸŸåè§£æåˆ° CDN æœåŠ¡çš„è´Ÿè½½å‡è¡¡å™¨ä¸Šï¼Œè´Ÿè½½å‡è¡¡å™¨å¯ä»¥é€šè¿‡è¯·æ±‚çš„ä¿¡æ¯è·å–ç”¨æˆ·å¯¹åº”çš„åœ°ç†åŒºåŸŸï¼Œä»è€Œé€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåœ¨èƒŒåçš„è¯¸å¤šæœåŠ¡å™¨ä¸­ï¼Œç»¼åˆé€‰æ‹©ä¸€å°åœ°ç†ä½ç½®è¿‘ã€è´Ÿè½½ä½çš„æœºå™¨æ¥æä¾›æœåŠ¡ã€‚ä¾‹å¦‚ä¸ºåŒ—äº¬è”é€šç”¨æˆ·è§£æåŒ—äº¬çš„æœåŠ¡å™¨ IPã€‚è¿™æ ·ï¼Œç”¨æˆ·åœ¨ä¹‹åè®¿é—® CDN èµ„æºæ—¶éƒ½æ˜¯è®¿é—®åŒ—äº¬æœåŠ¡å™¨ï¼Œè·ç¦»è¿‘ï¼Œé€Ÿåº¦å¿«ã€‚</p>\n<p>æƒ³äº†è§£æ›´å¤š CDN çš„å·¥ä½œæ–¹å¼å¯ä»¥é˜…è¯»<a href=\"https://yq.aliyun.com/articles/577708\">è¿™ç¯‡æ–‡ç« </a>[4]ã€‚</p>\n<hr>\n<p>ä¸‹å›¾æ˜¯è¯·æ±‚å£°æ˜å‘¨æœŸä¸­å„ä¸ªé˜¶æ®µçš„ç¤ºæ„å›¾ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£å‘é€è¯·æ±‚ï¼ˆä»¥åŠæ¥æ”¶å“åº”ï¼‰çš„æµç¨‹ã€‚</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/2-request/img/resourcetiming.png\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/2-request/img/resourcetiming.png\" alt=\"resource timing line\"></a></p>\n<hr>\n<p>åœ¨ç¼“å­˜æ²¡æ³•æ»¡è¶³æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå°±è¦å¼€å§‹çœŸæ­£å‘é€è¯·æ±‚äº†ã€‚ä»å‰ç«¯æ€§èƒ½ä¼˜åŒ–è§†è§’ï¼Œæˆ‘ä»¬ä¼šå…³æ³¨é‡å®šå‘ã€DNS è§£æç­‰é—®é¢˜ï¼Œä»è€ŒåŠ é€Ÿè¯·æ±‚ã€‚ä½†è¿™å—è¿˜é¢„ç•™äº†ä¸€å°éƒ¨åˆ† â€”â€” æœåŠ¡ç«¯çš„å¤„ç†ä¸å“åº”ã€‚</p>\n<p>è¿‡å»ï¼Œæˆ‘ä»¬ä¼šå°†å‰ç«¯å±€é™åœ¨æµè§ˆå™¨ä¸­ï¼Œä½†æ˜¯éšç€ NodeJS çš„å…´èµ·ï¼Œå¾ˆå¤šä¸šåŠ¡éƒ½å¼•å…¥äº†åŸºäº NodeJS çš„ BFF æ¥ä¸ºå‰ç«¯ï¼ˆå®¢æˆ·ç«¯ç«¯ï¼‰æä¾›æœåŠ¡ã€‚æ‰€ä»¥å’±ä»¬è¿™æ¬¡çš„æ—…ç¨‹ä¹Ÿä¼šç®€å•èŠä¸€ä¸‹ï¼Œåœ¨è¿™ä¸€é˜¶æ®µå¯ä»¥åšçš„ä¸€äº›ä¼˜åŒ–ã€‚</p>\n<h3 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h3><ol>\n<li><a href=\"https://www.zhihu.com/question/23042131\">DNS çš„è§£æè¿‡ç¨‹</a></li>\n<li><a href=\"https://www.w3.org/TR/resource-hints/#dns-prefetch\">Resource Hints - DNS Prefetch</a></li>\n<li><a href=\"https://www.w3.org/TR/resource-hints/#preconnect\">Resource Hints - Preconnect</a></li>\n<li><a href=\"https://yq.aliyun.com/articles/577708\">CDN ä¹‹æˆ‘è§ï¼šåŸç†ç¯‡</a></li>\n<li><a href=\"https://developers.google.com/web/tools/chrome-devtools/network/understanding-resource-timing\">Understanding Resource Timing</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/tcp-3-way-handshake-process/\">TCP 3-Way Handshake Process</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/tcp-connection-termination/\">TCP 4 wave hands</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/3NKOCOeIUF2SGJnY7II9hA\">å›¾æ–‡è¿˜åŸHTTPSåŸç†</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/URL_redirection\">URL redirection (wikipedia)</a></li>\n</ol>\n<h1 id=\"ä¸‰ã€æœåŠ¡ç«¯å“åº”\"><a href=\"#ä¸‰ã€æœåŠ¡ç«¯å“åº”\" class=\"headerlink\" title=\"ä¸‰ã€æœåŠ¡ç«¯å“åº”\"></a>ä¸‰ã€æœåŠ¡ç«¯å“åº”</h1><p>æŠŠè¿™ä¸€éƒ¨åˆ†æ”¾è¿›å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¹¶ä¸æ˜¯å¾ˆä¸¥è°¨ï¼š</p>\n<ul>\n<li>å…¶ä¸€ï¼ŒæœåŠ¡ç«¯æœ‰ç€æœåŠ¡ç«¯çš„é€šç”¨æŠ€æœ¯æ‰‹æ®µï¼Œè¿™å—æ·±å…¥å»ç ”ç©¶ï¼Œä¼šæ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„é¢†åŸŸï¼›</li>\n<li>å…¶äºŒï¼Œæˆ‘ä»¬æ—¢ç„¶åœ¨è®¨è®ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œè¿™éƒ¨åˆ†ä¸»è¦è¿˜æ˜¯æŒ‡ NodeJSï¼Œä½†ä¸æ˜¯æ‰€æœ‰ä¸šåŠ¡éƒ½ä½¿ç”¨ NodeJSã€‚</li>\n</ul>\n<p>æ‰€ä»¥è¿™é‡Œåªä¼šæä¸€äº›å®è·µä¸­ç¢°åˆ°çš„å°ç‚¹ï¼Œè¾…ä»¥ä¸€äº›æ‹“å±•é˜…è¯»ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æŠ›ç –å¼•ç‰ï¼Œå¼€æ‹“æ€ç»´ã€‚</p>\n<h2 id=\"1-ä½¿ç”¨æµè¿›è¡Œå“åº”\"><a href=\"#1-ä½¿ç”¨æµè¿›è¡Œå“åº”\" class=\"headerlink\" title=\"1. ä½¿ç”¨æµè¿›è¡Œå“åº”\"></a>1. ä½¿ç”¨æµè¿›è¡Œå“åº”</h2><p>ç›®å‰ï¼Œç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒæ ¹æ®æµçš„è¿”å›å½¢å¼æ¥é€æ­¥è¿›è¡Œé¡µé¢å†…å®¹çš„è§£æã€å¤„ç†ã€‚è¿™å°±æ„å‘³ç€ï¼Œå³ä½¿è¯·æ±‚çš„å“åº”æ²¡æœ‰å®Œå…¨ç»“æŸï¼Œæµè§ˆå™¨ä¹Ÿå¯ä»¥ä»æ‰‹é‡Œå·²æœ‰çš„å“åº”ç»“æœä¸­è¿›è¡Œé¡µé¢çš„è§£æä¸æ¸²æŸ“ã€‚</p>\n<p>ä¾‹å¦‚ <a href=\"https://github.com/alienzhou/css-only-chat-node\">css-only-chat-node</a> å°±åˆ©ç”¨äº†è¿™ä¸ªç‰¹ç‚¹æ¥å®ç°æ— åˆ·æ–°ã€æ—  JavaScript çš„é¡µé¢æ›´æ–°ã€‚</p>\n<h2 id=\"2-ä¸šåŠ¡èšåˆ\"><a href=\"#2-ä¸šåŠ¡èšåˆ\" class=\"headerlink\" title=\"2. ä¸šåŠ¡èšåˆ\"></a>2. ä¸šåŠ¡èšåˆ</h2><p>BFF éå¸¸åˆé€‚åšçš„ä¸€ä»¶äº‹å°±æ˜¯åç«¯æœåŠ¡çš„èšåˆã€‚</p>\n<p>å¦‚æœä½ æœ‰ä¸€ä¸ªä¸¤ä¸ªæ¥å£æœåŠ¡ï¼šç¬¬ä¸€ä¸ªæœåŠ¡æ˜¯å…ˆè·å–äº§å“ä¿¡æ¯ï¼Œå†æ ¹æ®äº§å“ä¿¡æ¯ä¸­çš„ä¸Šæ¶æ—¶é—´é€šè¿‡ç¬¬äºŒä¸ªæœåŠ¡è·å–è¯¥æ—¶é—´åçš„äº§å“åˆ—è¡¨ã€‚è¿™ä¸ªä¸šåŠ¡é€»è¾‘å¦‚æœæ”¾åœ¨å‰ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å¤„ç†å°†ä¼šä¸²è¡Œå‘é€ä¸¤ä¸ªè¯·æ±‚ã€‚å‡è®¾æ¯ä¸ªè¯·æ±‚ 200msï¼Œé‚£ä¹ˆå°±éœ€è¦ç­‰å¾… 400msã€‚å¦‚æœå¼•å…¥ NodeJSï¼Œè¿™ä¸€å±‚å¯ä»¥æ”¾åœ¨ NodeJS ä¸­å®ç°ã€‚NodeJS éƒ¨ç½²çš„ä½ç½®ä¸€èˆ¬ç¦»å…¶ä»–åç«¯æœåŠ¡â€œæ›´è¿‘â€ï¼Œä¾‹å¦‚åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚è¿™ç±»æœåŠ¡é—´çš„è¯·æ±‚è€—æ—¶æ˜¾ç„¶æ›´ä½ï¼Œå¯èƒ½åªéœ€è¦ 200(æµè§ˆå™¨) + 30(NodeJS) * 2 = 260msã€‚</p>\n<p>æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªä¸šåŠ¡éœ€è¦åœ¨å‰ç«¯å¹¶å‘ä¸‰ã€å››ä¸ªè¯·æ±‚æ¥è·å–å®Œæ•´æ•°æ®ï¼Œé‚£ä¹ˆæ”¾åœ¨ NodeJS çš„ BFF å±‚ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>\n<h2 id=\"3-é¿å…ä»£ç é—®é¢˜\"><a href=\"#3-é¿å…ä»£ç é—®é¢˜\" class=\"headerlink\" title=\"3. é¿å…ä»£ç é—®é¢˜\"></a>3. é¿å…ä»£ç é—®é¢˜</h2><p>ä»£ç é—®é¢˜å…¶å®å°±éå¸¸ç»†èŠ‚äº†ã€‚ç®€å•åˆ—ä¸¾ä¸€äº›å¸¸è§çš„é—®é¢˜ï¼š</p>\n<ul>\n<li><code>async</code> <code>await</code> çš„ä¸å½“ä½¿ç”¨å¯¼è‡´å¹¶è¡Œè¯·æ±‚è¢«ä¸²è¡ŒåŒ–äº†ï¼›</li>\n<li>é¢‘ç¹åœ° <code>JSON.parse</code> å’Œ <code>JSON.stringify</code> å¤§å¯¹è±¡ï¼›</li>\n<li>æ­£åˆ™è¡¨è¾¾å¼çš„ç¾éš¾æ€§å›æº¯ï¼›</li>\n<li>é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼›</li>\n<li>CPU å¯†é›†å‹ä»»åŠ¡å¯¼è‡´äº‹ä»¶å¾ªç¯ delay ä¸¥é‡ï¼›</li>\n<li>æœªæ•è·çš„å¼‚å¸¸å¯¼è‡´è¿›ç¨‹é¢‘ç¹é€€å‡ºï¼Œå®ˆæŠ¤è¿›ç¨‹ï¼ˆpm2/supervisorï¼‰åˆå°†è¿›ç¨‹é‡å¯ï¼Œè¿™ç§é¢‘ç¹çš„å¯åœä¹Ÿä¼šæ¯”è¾ƒæ¶ˆè€—èµ„æºï¼›</li>\n<li>â€¦â€¦</li>\n</ul>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/4-parse/README.md\">https://github.com/alienzhou/fe-performance-journey/blob/master/4-parse/README.md</a>)</p>\n<hr>\n<h2 id=\"å‚è€ƒèµ„æ–™-1\"><a href=\"#å‚è€ƒèµ„æ–™-1\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ol>\n<li><a href=\"https://www.yuque.com/office/yuque/0/2019/pdf/168578/1547529466557-357032b6-12fb-4e02-9682-076f498c1f42.pdf\">ä½ ä¸çŸ¥é“çš„ Node.js æ€§èƒ½ä¼˜åŒ–</a></li>\n<li><a href=\"https://www.smashingmagazine.com/2018/06/nodejs-tools-techniques-performance-servers/?utm_source=mybridge&utm_medium=blog&utm_campaign=read_more\">Keeping Node.js Fast: Tools, Techniques, And Tips For Making High-Performance Node.js Servers</a></li>\n<li><a href=\"https://hackernoon.com/frontend-in-the-backend-a-pattern-for-cleaner-code-b497c92d0b49\">Backend-in-the-frontend: a pattern for cleaner code</a></li>\n<li><a href=\"https://github.com/aliyun-node/Node.js-Troubleshooting-Guide\">Node.js åº”ç”¨æ•…éšœæ’æŸ¥æ‰‹å†Œ</a></li>\n<li><a href=\"https://github.com/goldbergyoni/nodebestpractices\">Node.js Best Practices</a></li>\n</ol>\n<h1 id=\"å››ã€é¡µé¢è§£æä¸å¤„ç†\"><a href=\"#å››ã€é¡µé¢è§£æä¸å¤„ç†\" class=\"headerlink\" title=\"å››ã€é¡µé¢è§£æä¸å¤„ç†\"></a>å››ã€é¡µé¢è§£æä¸å¤„ç†</h1><h2 id=\"ä¸»è¦å·¥ä½œ\"><a href=\"#ä¸»è¦å·¥ä½œ\" class=\"headerlink\" title=\"ä¸»è¦å·¥ä½œ\"></a>ä¸»è¦å·¥ä½œ</h2><p>è¿™ä¸€é˜¶æ®µæµè§ˆå™¨éœ€è¦å¤„ç†çš„ä¸œè¥¿å¾ˆå¤šï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬ä¸»è¦å°†å…¶åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼š</p>\n<ul>\n<li>é¡µé¢ DOM çš„è§£æï¼›</li>\n<li>é¡µé¢é™æ€èµ„æºçš„åŠ è½½ï¼ŒåŒ…æ‹¬äº†é¡µé¢å¼•ç”¨çš„ JavaScript/CSS/å›¾ç‰‡/å­—ä½“ç­‰ï¼›</li>\n<li>é™æ€èµ„æºçš„è§£æä¸å¤„ç†ï¼Œåƒæ˜¯ JavaScript çš„æ‰§è¡Œã€CSSOM çš„æ„å»ºä¸æ ·å¼åˆæˆç­‰ï¼›</li>\n</ul>\n<p>å¤§è‡´è¿‡ç¨‹å°±æ˜¯è§£æé¡µé¢ DOM ç»“æ„ï¼Œé‡åˆ°å¤–éƒ¨èµ„æºå°±åŠ è½½ï¼ŒåŠ è½½å¥½äº†å°±ä½¿ç”¨ã€‚ä½†æ˜¯ç”±äºè¿™éƒ¨åˆ†çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åœ¨è¿™ä¸€èŠ‚é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨é¡µé¢çš„è§£æï¼ˆå…¶ä»–éƒ¨åˆ†åœ¨å†™ä¸€èŠ‚ä¸­ä»‹ç»ï¼‰ã€‚</p>\n<h2 id=\"1-æ³¨æ„èµ„æºåœ¨é¡µé¢æ–‡æ¡£ä¸­çš„ä½ç½®\"><a href=\"#1-æ³¨æ„èµ„æºåœ¨é¡µé¢æ–‡æ¡£ä¸­çš„ä½ç½®\" class=\"headerlink\" title=\"1. æ³¨æ„èµ„æºåœ¨é¡µé¢æ–‡æ¡£ä¸­çš„ä½ç½®\"></a>1. æ³¨æ„èµ„æºåœ¨é¡µé¢æ–‡æ¡£ä¸­çš„ä½ç½®</h2><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ”¶åˆ°å†…å®¹å°±å°½å¿«è§£æå¤„ç†ï¼Œé¡µé¢æœ‰ä¾èµ–çš„èµ„æºå°±å°½å¿«å‘é€è¯·æ±‚ï¼Œæ”¶åˆ°å“åº”åˆ™å°½å¿«å¤„ç†ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç¾å¥½çš„ç›®æ ‡ä¹Ÿæœ‰å¯èƒ½ä¼šè¢«æˆ‘ä»¬ä¸å°å¿ƒç ´åã€‚</p>\n<p>JavaScript è„šæœ¬å’Œ CSS æ ·å¼è¡¨åœ¨å…³äº DOM å…ƒç´ çš„å±æ€§ï¼Œå°¤å…¶æ˜¯æ ·å¼å±æ€§ä¸Šéƒ½æœ‰æ“ä½œçš„æƒåˆ©ã€‚è¿™å°±åƒæ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹é—®é¢˜ã€‚æœåŠ¡ç«¯å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ç»å¸¸é€šè¿‡é”æ¥ä¿è¯çº¿ç¨‹é—´çš„äº’æ–¥ã€‚å›åˆ°å’±ä»¬çš„å‰ç«¯ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸¤æ–¹åœ¨ç«äº‰åŒä¸€ä¸ªèµ„æºï¼Œæ˜¾ç„¶ä¹Ÿæ˜¯ä¼šæœ‰äº’æ–¥çš„é—®é¢˜ã€‚è¿™å°±å¸¦æ¥äº† DOM è§£æã€JavaScript åŠ è½½ä¸æ‰§è¡Œã€CSS åŠ è½½ä¸ä½¿ç”¨ä¹‹é—´çš„ä¸€äº›äº’æ–¥å…³ç³»ã€‚</p>\n<p>ä»…ä»…çœ‹ DOM ä¸ CSS çš„å…³ç³»ï¼Œåˆ™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/4-parse/img/pipeline1.png\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/4-parse/img/pipeline1.png\" alt=\"pipeline for dom and css\"></a></p>\n<p>HTML è§£æä¸º DOM Treeï¼ŒCSS è§£æä¸º CSSOMï¼Œä¸¤è€…å†åˆæˆ Render Treeï¼Œå¹¶è¡Œæ‰§è¡Œï¼Œéå¸¸å®Œç¾ã€‚ç„¶è€Œï¼Œå½“ JavaScript å…¥åœºä¹‹åï¼Œå±€é¢å°±å˜äº†ï¼š</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/4-parse/img/pipeline2.png\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/4-parse/img/pipeline2.png\" alt=\"pipeline for dom and css with js\"></a></p>\n<p>æ ¹æ®æ ‡å‡†è§„èŒƒï¼Œåœ¨ JavaScript ä¸­å¯ä»¥è®¿é—® DOMã€‚å› æ­¤å½“é‡åˆ° JavaScript åä¼šé˜»å¡ DOM çš„è§£æã€‚äºæ­¤åŒæ—¶ï¼Œä¸ºé¿å… CSS ä¸ JavaScript ä¹‹é—´çš„ç«æ€ï¼ŒCSSOM çš„æ„å»ºä¼šé˜»å¡ JavaScript çš„è„šæœ¬æ‰§è¡Œã€‚æ€»ç»“èµ·æ¥å°±æ˜¯ â€”â€”</p>\n<blockquote>\n<p>JavaScript ä¼šé˜»å¡ DOM æ„å»ºï¼Œè€Œ CSSOM çš„æ„å»ºåˆå›é˜»å¡ JavaScript çš„æ‰§è¡Œã€‚</p>\n</blockquote>\n<p>æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä¼˜åŒ–çš„æœ€ä½³å®è·µä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬éƒ½æ¨èæŠŠ CSS æ ·å¼è¡¨æ”¾åœ¨ <code>&lt;head&gt;</code> ä¹‹ä¸­ï¼ˆå³é¡µé¢çš„å¤´éƒ¨ï¼‰ï¼ŒæŠŠ JavaScript è„šæœ¬æ”¾åœ¨ <code>&lt;body&gt;</code> çš„æœ€åï¼ˆå³é¡µé¢çš„å°¾éƒ¨ï¼‰ã€‚</p>\n<p>å…³äºè¿™éƒ¨åˆ†çš„ä¸€äº›è§£é‡Šå¯ä»¥çœ‹<a href=\"https://calendar.perfplanet.com/2012/deciphering-the-critical-rendering-path/\">è¿™ç¯‡æ–‡ç« </a>[1]ã€‚</p>\n<h2 id=\"2-ä½¿ç”¨-defer-å’Œ-async\"><a href=\"#2-ä½¿ç”¨-defer-å’Œ-async\" class=\"headerlink\" title=\"2. ä½¿ç”¨ defer å’Œ async\"></a>2. ä½¿ç”¨ defer å’Œ async</h2><p>ä¸Šé¢æåˆ°äº†ï¼Œå½“ DOM è§£æé‡åˆ° JavaScript è„šæœ¬æ—¶ï¼Œä¼šåœæ­¢è§£æï¼Œå¼€å§‹ä¸‹è½½è„šæœ¬å¹¶æ‰§è¡Œï¼Œå†æ¢å¤è§£æï¼Œç›¸å½“äºæ˜¯é˜»å¡äº† DOM æ„å»ºã€‚</p>\n<p>é‚£é™¤äº†å°†è„šæœ¬æ”¾åœ¨ <code>body</code> çš„æœ€åï¼Œè¿˜æœ‰ä»€ä¹ˆä¼˜åŒ–æ–¹æ³•ä¹ˆï¼Ÿæ˜¯æœ‰çš„ã€‚</p>\n<p>å¯ä»¥ä½¿ç”¨ <code>defer</code> æˆ– <code>async</code> å±æ€§ã€‚ä¸¤è€…éƒ½ä¼šé˜²æ­¢ JavaScript è„šæœ¬çš„ä¸‹è½½é˜»å¡ DOM æ„å»ºã€‚ä½†æ˜¯ä¸¤è€…ä¹Ÿæœ‰åŒºåˆ«ï¼Œæœ€ç›´è§‚çš„è¡¨ç°å¦‚ä¸‹ï¼š</p>\n<p><a href=\"https://github.com/alienzhou/fe-performance-journey/blob/master/4-parse/img/async-defer.jpeg\"><img data-src=\"https://github.com/alienzhou/fe-performance-journey/raw/master/4-parse/img/async-defer.jpeg\" alt=\"async defer\"></a></p>\n<p><code>defer</code> ä¼šåœ¨ HTML è§£æå®Œæˆåï¼ŒæŒ‰ç…§è„šæœ¬å‡ºç°çš„æ¬¡åºå†é¡ºåºæ‰§è¡Œï¼›è€Œ <code>async</code> åˆ™æ˜¯ä¸‹è½½å®Œæˆå°±ç«‹å³å¼€å§‹æ‰§è¡Œï¼ŒåŒæ—¶é˜»å¡é¡µé¢è§£æï¼Œä¸ä¿è¯è„šæœ¬é—´çš„æ‰§è¡Œé¡ºåºã€‚</p>\n<p>æ ¹æ®å®ƒä»¬çš„ç‰¹ç‚¹ï¼Œæ¨èåœ¨ä¸€äº›ä¸ä¸»ä¸šåŠ¡æ— å…³çš„ JavaScript è„šæœ¬ä¸Šä½¿ç”¨ asyncã€‚ä¾‹å¦‚ç»Ÿè®¡è„šæœ¬ã€ç›‘æ§è„šæœ¬ã€å¹¿å‘Šè„šæœ¬ç­‰ã€‚è¿™äº›è„šæœ¬ä¸€èˆ¬éƒ½æ˜¯ä¸€ä»½ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œä¸éœ€è¦è®¿é—® DOMï¼Œä¹Ÿä¸éœ€è¦æœ‰ä¸¥æ ¼çš„æ‰§è¡Œæ—¶æœºé™åˆ¶ã€‚åœ¨è¿™äº›è„šæœ¬ä¸Šä½¿ç”¨ <code>async</code> å¯ä»¥æœ‰æ•ˆé¿å…è¿™äº›éæ ¸å¿ƒåŠŸèƒ½çš„åŠ è½½å½±å“é¡µé¢è§£æé€Ÿåº¦ã€‚</p>\n<h2 id=\"3-é¡µé¢æ–‡æ¡£å‹ç¼©\"><a href=\"#3-é¡µé¢æ–‡æ¡£å‹ç¼©\" class=\"headerlink\" title=\"3. é¡µé¢æ–‡æ¡£å‹ç¼©\"></a>3. é¡µé¢æ–‡æ¡£å‹ç¼©</h2><p>HTML çš„æ–‡æ¡£å¤§å°ä¹Ÿä¼šæå¤§å½±å“å“åº”ä½“ä¸‹è½½çš„æ—¶é—´ã€‚ä¸€èˆ¬ä¼šè¿›è¡Œ HTML å†…å®¹å‹ç¼©ï¼ˆuglifyï¼‰çš„åŒæ—¶ï¼Œä½¿ç”¨æ–‡æœ¬å‹ç¼©ç®—æ³•ï¼ˆä¾‹å¦‚ gzipï¼‰è¿›è¡Œæ–‡æœ¬çš„å‹ç¼©ã€‚å…³äºèµ„æºå‹ç¼©è¿™ä¸€å—ï¼Œåœ¨ä¸‹ä¸€èŠ‚çš„å†…å®¹ä¸­è¿˜ä¼šå†è¯¦ç»†è¿›è¡Œä»‹ç»ã€‚</p>\n<hr>\n<p>è¯´ä¸€å¥é¢˜å¤–è¯ï¼Œä½ çŸ¥é“ä¸é¡µé¢è§£æå¯†åˆ‡ç›¸å…³çš„ DOMContentLoaded äº‹ä»¶ä½•æ—¶è§¦å‘ä¹ˆï¼Ÿinteractive/complete ç­‰ readyState å…·ä½“ä»£è¡¨ä»€ä¹ˆä¹ˆï¼Ÿå¦‚æœä¸å¤ªäº†è§£å¯ä»¥ä»<a href=\"https://html.spec.whatwg.org/multipage/dom.html#current-document-readiness\">HTML spec</a>[2]é‡Œçœ‹ã€‚</p>\n<p>ç”¨åŸè¯æ¥è¯´å°±æ˜¯ï¼š</p>\n<blockquote>\n<p>Returns â€œloadingâ€ while the Document is loading, â€œinteractiveâ€ once it is finished parsing but still loading subresources, and â€œcompleteâ€ once it has loaded.</p>\n</blockquote>\n<blockquote>\n<p>The readystatechange event fires on the Document object when this value changes.</p>\n</blockquote>\n<blockquote>\n<p>The DOMContentLoaded event fires after the transition to â€œinteractiveâ€ but before the transition to â€œcompleteâ€, at the point where all subresources apart from async script elements have loaded.</p>\n</blockquote>\n<hr>\n<p>å¥½äº†ï¼Œåœ¨è¿™ä¸€ç«™æˆ‘ä»¬åˆäº†è§£äº†é¡µé¢çš„è§£æè¿‡ç¨‹åŠå…¶æ€§èƒ½ä¼˜åŒ–ã€‚</p>\n<h1 id=\"äº”ã€é¡µé¢é™æ€èµ„æº\"><a href=\"#äº”ã€é¡µé¢é™æ€èµ„æº\" class=\"headerlink\" title=\"äº”ã€é¡µé¢é™æ€èµ„æº\"></a>äº”ã€é¡µé¢é™æ€èµ„æº</h1><p>é¦–å…ˆè¿˜æ˜¯ä»å®è§‚ä¸Šæ¥äº†è§£ä¸€ä¸‹ï¼š</p>\n<h2 id=\"1-æ€»ä½“åŸåˆ™\"><a href=\"#1-æ€»ä½“åŸåˆ™\" class=\"headerlink\" title=\"#1. æ€»ä½“åŸåˆ™\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_1-%E6%80%BB%E4%BD%93%E5%8E%9F%E5%88%99\">#</a>1. æ€»ä½“åŸåˆ™</h2><p>è¿™ä¸€éƒ¨åˆ†ä¼šæ¶‰åŠåˆ°å„ç±»å¸¸è§çš„é™æ€èµ„æºï¼šJavaScript è„šæœ¬ã€CSS æ ·å¼è¡¨ã€å›¾ç‰‡ã€å­—ä½“ç­‰ã€‚ä¸åŒèµ„æºçš„ä¼˜åŒ–æªæ–½æ—¢æœ‰è”ç³»åˆæœ‰å·®åˆ«ï¼Œåç»­ä¼šä»¥å„ç±»èµ„æºä¸ºç»´åº¦ï¼Œé’ˆå¯¹æ€§ä»‹ç»å…¶ä¼˜åŒ–çš„å…³æ³¨ç‚¹å’Œæ‰‹æ®µã€‚</p>\n<p>ä½†å’±ä»¬è¿˜æ˜¯è¦å…ˆä»æ•´ä½“ç»´åº¦ä¸Šè¿›è¡Œä¸€äº›åˆ†æã€‚å…¶å®åœ¨æ€»ä½“åŸåˆ™ä¸Šï¼Œå„ç±»èµ„æºçš„ä¼˜åŒ–æ€è·¯éƒ½æ˜¯å¤§ä½“ç±»ä¼¼çš„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>\n<ul>\n<li>å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚</li>\n<li>å‡å°‘åŒ…ä½“å¤§å°</li>\n<li>é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€—</li>\n<li>åˆ©ç”¨ç¼“å­˜</li>\n</ul>\n<p>ä¸ºäº†å¤§å®¶èƒ½æ›´å¥½ç†è§£å„ç±»ä¼˜åŒ–å®æ–½ç­–ç•¥ä»ä½•è€Œæ¥ï¼Œå…ˆåˆæ­¥æ‰©å±•ä¸€ä¸‹ä»¥ä¸Šçš„æ€è·¯ã€‚</p>\n<h3 id=\"1-1-å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚\"><a href=\"#1-1-å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚\" class=\"headerlink\" title=\"#1.1. å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_1-1-%E5%87%8F%E5%B0%91%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E8%AF%B7%E6%B1%82\">#</a>1.1. å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚</h3><p>æ ¸å¿ƒæ˜¯å¸Œæœ›èƒ½å¤Ÿå‡å°‘è¯·æ±‚çš„æ•°é‡ï¼Œå› ä¸ºæµè§ˆå™¨å¯¹åŒæºè¯·æ±‚æœ‰å¹¶å‘ä¸Šé™çš„é™åˆ¶ï¼ˆä¾‹å¦‚ Chrome æ˜¯6ï¼‰ï¼Œæ‰€ä»¥åœ¨ HTTP/1.1 ä¸‹ï¼Œè¯·æ±‚è¿‡å¤šå¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚è¢«æ’é˜Ÿäº†ã€‚ä¸€ä¸ªå…¸å‹åœºæ™¯å°±æ˜¯ä¸€äº›å›¾åº“ç±»å‹çš„ç½‘ç«™ï¼Œé¡µé¢åŠ è½½åå¯èƒ½éœ€è¦è¯·æ±‚åæ•°å¼ å›¾ç‰‡ã€‚</p>\n<p>åŒæ—¶ï¼ŒTCP/IP çš„æ‹¥å¡æ§åˆ¶ä¹Ÿä½¿å…¶ä¼ è¾“æœ‰æ…¢å¯åŠ¨ï¼ˆslow startï¼‰çš„ç‰¹ç‚¹ï¼Œè¿æ¥åˆšå»ºç«‹æ—¶åŒ…ä½“ä¼ è¾“é€Ÿç‡è¾ƒä½ï¼Œåç»­ä¼šæ¸æ¸æé€Ÿã€‚å› æ­¤ï¼Œå‘é€è¿‡å¤šçš„â€œå°â€è¯·æ±‚å¯èƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ã€‚</p>\n<p>å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ä¸»è¦åˆ†ä¸ºå‡ ä¸ªç»´åº¦ï¼š</p>\n<ul>\n<li>å¯¹äºä¸éœ€è¦ä½¿ç”¨çš„å†…å®¹ï¼Œå…¶å®ä¸éœ€è¦è¯·æ±‚ï¼Œå¦åˆ™ç›¸å½“äºåšäº†æ— ç”¨åŠŸï¼›</li>\n<li>å¯¹äºå¯ä»¥å»¶è¿ŸåŠ è½½çš„å†…å®¹ï¼Œä¸å¿…è¦ç°åœ¨å°±ç«‹åˆ»åŠ è½½ï¼Œæœ€å¥½å°±åœ¨éœ€è¦ä½¿ç”¨ä¹‹å‰å†åŠ è½½ï¼›</li>\n<li>å¯¹äºå¯ä»¥åˆå¹¶çš„èµ„æºï¼Œè¿›è¡Œèµ„æºåˆå¹¶ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚</li>\n</ul>\n<h3 id=\"1-2-å‡å°‘åŒ…ä½“å¤§å°\"><a href=\"#1-2-å‡å°‘åŒ…ä½“å¤§å°\" class=\"headerlink\" title=\"#1.2. å‡å°‘åŒ…ä½“å¤§å°\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_1-2-%E5%87%8F%E5%B0%91%E5%8C%85%E4%BD%93%E5%A4%A7%E5%B0%8F\">#</a>1.2. å‡å°‘åŒ…ä½“å¤§å°</h3><p>åŒ…ä½“å¤§å°å¯¹æ€§èƒ½ä¹Ÿæ˜¯æœ‰ç›´æ¥å½±å“çš„ã€‚æ˜¾ç„¶åŒæ ·é€Ÿç‡ä¸‹ï¼ŒåŒ…ä½“è¶Šå°ï¼Œä¼ è¾“è€—æ—¶è¶Šä½ï¼Œæ•´ä½“é¡µé¢åŠ è½½ä¸æ¸²æŸ“çš„æ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚</p>\n<p>å‡å°‘åŒ…ä½“å¤§å°å¸¸ç”¨çš„æ–¹å¼åŒ…æ‹¬äº†ï¼š</p>\n<ul>\n<li>ä½¿ç”¨é€‚åˆå½“å‰èµ„æºçš„å‹ç¼©æŠ€æœ¯ï¼›</li>\n<li>é¿å…å†å“åº”åŒ…ä½“é‡Œâ€œå¡å…¥â€ä¸€äº›ä¸éœ€è¦çš„å†…å®¹ã€‚</li>\n</ul>\n<h3 id=\"1-3-é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€—\"><a href=\"#1-3-é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€—\" class=\"headerlink\" title=\"#1.3. é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€—\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_1-3-%E9%99%8D%E4%BD%8E%E5%BA%94%E7%94%A8%E8%B5%84%E6%BA%90%E6%97%B6%E7%9A%84%E6%B6%88%E8%80%97\">#</a>1.3. é™ä½åº”ç”¨èµ„æºæ—¶çš„æ¶ˆè€—</h3><p>ä»¥ä¸Šä¸»è¦çš„å…³æ³¨ç‚¹éƒ½åœ¨é¡µé¢èµ„æºåŠ è½½çš„æ•ˆç‡ï¼Œå…¶å®æœ‰äº›æ—¶å€™ï¼Œæµè§ˆå™¨å»æ‰§è¡Œæˆ–ä½¿ç”¨èµ„æºçš„ä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ã€‚ä¾‹å¦‚åœ¨ JavaScript æ‰§è¡Œäº†ä¸€æ®µ CPU å¯†é›†çš„è®¡ç®—ï¼Œæˆ–è€…è¿›è¡Œé¢‘ç¹çš„ DOM æ“ä½œï¼Œè¿™äº›éƒ½ä¼šè®© JavaScript çš„æ‰§è¡Œå˜æˆå½±å“æ€§èƒ½çš„ä¸€å¤§é—®é¢˜ã€‚è™½ç„¶ä»Šå¤©çš„åƒ V8 è¿™æ ·çš„å¼•æ“å·²ç»å¾ˆå¿«äº†ï¼Œä½†æ˜¯ä¸€äº›ä¸å½“çš„æ“ä½œä»ç„¶ä¼šå¸¦æ¥æ€§èƒ½çš„æŸè€—ã€‚</p>\n<p>æ­¤å¤–ï¼Œåƒæ˜¯ CSS é€‰æ‹©å™¨åŒ¹é…ã€å›¾ç‰‡çš„è§£æä¸å¤„ç†ç­‰ï¼Œéƒ½æ˜¯è¦æ¶ˆè€— CPU å’Œå†…å­˜çš„ã€‚ä¹Ÿè®¸è¿™äº›ä¸å¤ªå¸¸æˆä¸ºæ€§èƒ½æ€æ‰‹ï¼Œä½†æ˜¯æŸäº›ç‰¹æ€§åœºåˆä¸‹ï¼Œäº†è§£å®ƒä»¬ä¹Ÿè®¸ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>\n<h3 id=\"1-4-åˆ©ç”¨ç¼“å­˜\"><a href=\"#1-4-åˆ©ç”¨ç¼“å­˜\" class=\"headerlink\" title=\"#1.4. åˆ©ç”¨ç¼“å­˜\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_1-4-%E5%88%A9%E7%94%A8%E7%BC%93%E5%AD%98\">#</a>1.4. åˆ©ç”¨ç¼“å­˜</h3><p>è¿˜è®°å¾—å’±ä»¬è¿™è¶Ÿæ—…ç¨‹ä»å“ªå‡ºå‘çš„ä¹ˆï¼Ÿæ²¡é”™ï¼Œç¼“å­˜ã€‚</p>\n<p>åœ¨æ—…ç¨‹çš„ç¬¬ä¸€ç«™ï¼Œæˆ‘ä»¬ä»‹ç»äº†æµè§ˆå™¨è®¿é—®ä¸€ä¸ª url æ—¶çš„å¤šçº§ç¼“å­˜ç­–ç•¥ã€‚åƒä¸‡ä¸è¦å¿˜äº†ï¼Œè¿™äº›é™æ€å­èµ„æºä¹Ÿæ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå®ƒä»¬ä»ç„¶å¯ä»¥åˆ©ç”¨ä¹‹å‰ä»‹ç»çš„å®Œæ•´ç¼“å­˜æµç¨‹ã€‚ç¼“å­˜åœ¨å¾ˆå¤šæ—¶å€™ä¼šæ˜¯ä¸€ä¸ªå¸®ä½ è§£å†³æ€§èƒ½é—®é¢˜çš„éå¸¸æœ‰æ•ˆçš„æ‰‹æ®µã€‚</p>\n<p>ç”±äºç¬¬ä¸€ç«™å·²ç»å¯¹ç¼“å­˜è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ï¼Œæ‰€ä»¥ç¼“å­˜è¿™éƒ¨åˆ†ï¼Œåœ¨è¿™ä¸€ç«™é‡Œåªä¼šåœ¨é’ˆå¯¹èµ„æºç±»å‹å†è¡¥å……ä¸€äº›å†…å®¹ã€‚</p>\n<h2 id=\"2-é’ˆå¯¹å„ç±»èµ„æºçš„æ€§èƒ½ä¼˜åŒ–-ğŸš€\"><a href=\"#2-é’ˆå¯¹å„ç±»èµ„æºçš„æ€§èƒ½ä¼˜åŒ–-ğŸš€\" class=\"headerlink\" title=\"#2. é’ˆå¯¹å„ç±»èµ„æºçš„æ€§èƒ½ä¼˜åŒ– ğŸš€\"></a><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/#_2-%E9%92%88%E5%AF%B9%E5%90%84%E7%B1%BB%E8%B5%84%E6%BA%90%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%F0%9F%9A%80\">#</a>2. é’ˆå¯¹å„ç±»èµ„æºçš„æ€§èƒ½ä¼˜åŒ– ğŸš€</h2><p>ä»¥ä¸Šçš„åŸåˆ™å¯ä»¥æŒ‡å¯¼æˆ‘ä»¬é’ˆå¯¹æ€§åœ°ä¼˜åŒ–å„ç±»èµ„æºã€‚ä¸‹é¢æˆ‘å°±ä»¥èµ„æºç±»å‹ä¸ºç»´åº¦ï¼Œè¯¦ç»†ä»‹ç»å…¶ä¸­æ¶‰åŠåˆ°çš„ä¼˜åŒ–ç‚¹ä¸ä¼˜åŒ–æªæ–½ã€‚</p>\n<blockquote>\n<p>å¦‚æœä½ ä¸€å£æ°”è¯»åˆ°è¿™é‡Œï¼Œå¯èƒ½æœ‰äº›ç´¯äº†ã€‚ä¸å¦‚å…ˆä¼¸ä¸ªæ‡’è…°æ”¾æ¾ä¸‹ï¼Œæ•´ç†å›å¿†ä¸€ä¸‹ä¹‹å‰çš„å†…å®¹ã€‚</p>\n</blockquote>\n<p>å¦‚æœå‡†å¤‡å¥½äº†ï¼Œå’±ä»¬å°±ç»§ç»­å‡ºå‘å§ğŸ‘‡</p>\n<ul>\n<li><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/javascript.html\">JavaScript ä¼˜åŒ–</a></li>\n<li><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/css.html\">CSS ä¼˜åŒ–</a></li>\n<li><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/image.html\">å›¾ç‰‡ä¼˜åŒ–</a></li>\n<li><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/font.html\">å­—ä½“ä¼˜åŒ–</a></li>\n<li><a href=\"https://alienzhou.com/projects/fe-performance-journey/5-subresources/video.html\">è§†é¢‘ä¼˜åŒ–</a></li>\n</ul>\n<h1 id=\"3-é‡æ’-reflow-å’Œé‡ç»˜-repaint\"><a href=\"#3-é‡æ’-reflow-å’Œé‡ç»˜-repaint\" class=\"headerlink\" title=\"3.é‡æ’(reflow)å’Œé‡ç»˜(repaint)\"></a>3.é‡æ’(reflow)å’Œé‡ç»˜(repaint)</h1><h2 id=\"é¡µé¢ç”Ÿæˆçš„è¿‡ç¨‹ï¼š\"><a href=\"#é¡µé¢ç”Ÿæˆçš„è¿‡ç¨‹ï¼š\" class=\"headerlink\" title=\"é¡µé¢ç”Ÿæˆçš„è¿‡ç¨‹ï¼š\"></a>é¡µé¢ç”Ÿæˆçš„è¿‡ç¨‹ï¼š</h2><p>1.HTML è¢« HTML è§£æå™¨è§£ææˆ DOM æ ‘ï¼›</p>\n<p>2.CSS è¢« CSS è§£æå™¨è§£ææˆ CSSOM æ ‘ï¼›</p>\n<p>3.ç»“åˆ DOM æ ‘å’Œ CSSOM æ ‘ï¼Œç”Ÿæˆä¸€æ£µæ¸²æŸ“æ ‘(Render Tree)ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸º Attachmentï¼›</p>\n<p>4.ç”Ÿæˆå¸ƒå±€(flow)ï¼Œæµè§ˆå™¨åœ¨å±å¹•ä¸Šâ€œç”»â€å‡ºæ¸²æŸ“æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼›</p>\n<p>5.å°†å¸ƒå±€ç»˜åˆ¶(paint)åœ¨å±å¹•ä¸Šï¼Œæ˜¾ç¤ºå‡ºæ•´ä¸ªé¡µé¢ã€‚</p>\n<p>ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥æ˜¯æœ€è€—æ—¶çš„éƒ¨åˆ†ï¼Œè¿™ä¸¤æ­¥åˆèµ·æ¥ï¼Œå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„æ¸²æŸ“ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/3/6/170af501e710ce67?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"image\"></p>\n<h2 id=\"æ¸²æŸ“ï¼š\"><a href=\"#æ¸²æŸ“ï¼š\" class=\"headerlink\" title=\"æ¸²æŸ“ï¼š\"></a>æ¸²æŸ“ï¼š</h2><p>åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ**ç½‘é¡µç”Ÿæˆçš„æ—¶å€™ï¼Œè‡³å°‘ä¼šæ¸²æŸ“ä¸€æ¬¡ã€‚åœ¨ç”¨æˆ·è®¿é—®çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šä¸æ–­è§¦å‘é‡æ’(reflow)å’Œé‡ç»˜(repaint)**ï¼Œä¸ç®¡é¡µé¢å‘ç”Ÿäº†é‡ç»˜è¿˜æ˜¯é‡æ’ï¼Œéƒ½ä¼šå½±å“æ€§èƒ½ï¼Œæœ€å¯æ€•çš„æ˜¯é‡æ’ï¼Œä¼šä½¿æˆ‘ä»¬ä»˜å‡ºé«˜é¢çš„æ€§èƒ½ä»£ä»·ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å°½é‡é¿å…ã€‚</p>\n<h2 id=\"é‡æ’æ¯”é‡ç»˜å¤§ï¼š\"><a href=\"#é‡æ’æ¯”é‡ç»˜å¤§ï¼š\" class=\"headerlink\" title=\"é‡æ’æ¯”é‡ç»˜å¤§ï¼š\"></a>é‡æ’æ¯”é‡ç»˜å¤§ï¼š</h2><p>å¤§ï¼Œåœ¨è¿™ä¸ªè¯­å¢ƒé‡Œçš„æ„æ€æ˜¯ï¼šè°èƒ½å½±å“è°ï¼Ÿ</p>\n<ul>\n<li>é‡ç»˜ï¼šæŸäº›å…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜ï¼Œä¾‹å¦‚ï¼šå…ƒç´ çš„å¡«å……é¢œè‰²</li>\n<li>é‡æ’ï¼šé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ ã€‚</li>\n</ul>\n<p>å°±å¦‚ä¸Šé¢çš„æ¦‚å¿µä¸€æ ·ï¼Œå•å•æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼Œè‚¯å®šä¸ä¼šå¼•èµ·ç½‘é¡µé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œä½†å½“æµè§ˆå™¨å®Œæˆé‡æ’ä¹‹åï¼Œå°†ä¼šé‡æ–°ç»˜åˆ¶å—åˆ°æ­¤æ¬¡é‡æ’å½±å“çš„éƒ¨åˆ†ã€‚æ¯”å¦‚æ”¹å˜å…ƒç´ é«˜åº¦ï¼Œè¿™ä¸ªå…ƒç´ ä¹ƒè‡³å‘¨è¾¹doméƒ½éœ€è¦é‡æ–°ç»˜åˆ¶ã€‚</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>é‡ç»˜ä¸ä¸€å®šå¯¼è‡´é‡æ’ï¼Œä½†é‡æ’ä¸€å®šä¼šå¯¼è‡´é‡ç»˜</strong>ã€‚</p>\n<h2 id=\"é‡æ’-reflow-ï¼š\"><a href=\"#é‡æ’-reflow-ï¼š\" class=\"headerlink\" title=\"é‡æ’(reflow)ï¼š\"></a>é‡æ’(reflow)ï¼š</h2><h3 id=\"æ¦‚å¿µï¼š\"><a href=\"#æ¦‚å¿µï¼š\" class=\"headerlink\" title=\"æ¦‚å¿µï¼š\"></a>æ¦‚å¿µï¼š</h3><p>å½“DOMçš„å˜åŒ–å½±å“äº†å…ƒç´ çš„å‡ ä½•ä¿¡æ¯(å…ƒç´ çš„çš„ä½ç½®å’Œå°ºå¯¸å¤§å°)ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œå°†å…¶å®‰æ”¾åœ¨ç•Œé¢ä¸­çš„æ­£ç¡®ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšé‡æ’ã€‚</p>\n<p>é‡æ’ä¹Ÿå«å›æµï¼Œç®€å•çš„è¯´å°±æ˜¯é‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ ã€‚</p>\n<h3 id=\"ä¸‹é¢æƒ…å†µä¼šå‘ç”Ÿé‡æ’ï¼š\"><a href=\"#ä¸‹é¢æƒ…å†µä¼šå‘ç”Ÿé‡æ’ï¼š\" class=\"headerlink\" title=\"ä¸‹é¢æƒ…å†µä¼šå‘ç”Ÿé‡æ’ï¼š\"></a>ä¸‹é¢æƒ…å†µä¼šå‘ç”Ÿé‡æ’ï¼š</h3><ul>\n<li>é¡µé¢åˆå§‹æ¸²æŸ“ï¼Œè¿™æ˜¯å¼€é”€æœ€å¤§çš„ä¸€æ¬¡é‡æ’</li>\n<li>æ·»åŠ /åˆ é™¤å¯è§çš„DOMå…ƒç´ </li>\n<li>æ”¹å˜å…ƒç´ ä½ç½®</li>\n<li>æ”¹å˜å…ƒç´ å°ºå¯¸ï¼Œæ¯”å¦‚è¾¹è·ã€å¡«å……ã€è¾¹æ¡†ã€å®½åº¦å’Œé«˜åº¦ç­‰</li>\n<li>æ”¹å˜å…ƒç´ å†…å®¹ï¼Œæ¯”å¦‚æ–‡å­—æ•°é‡ï¼Œå›¾ç‰‡å¤§å°ç­‰</li>\n<li>æ”¹å˜å…ƒç´ å­—ä½“å¤§å°</li>\n<li>æ”¹å˜æµè§ˆå™¨çª—å£å°ºå¯¸ï¼Œæ¯”å¦‚resizeäº‹ä»¶å‘ç”Ÿæ—¶</li>\n<li>æ¿€æ´»CSSä¼ªç±»ï¼ˆä¾‹å¦‚ï¼š<code>:hover</code>ï¼‰</li>\n<li>è®¾ç½® style å±æ€§çš„å€¼ï¼Œå› ä¸ºé€šè¿‡è®¾ç½®styleå±æ€§æ”¹å˜ç»“ç‚¹æ ·å¼çš„è¯ï¼Œæ¯ä¸€æ¬¡è®¾ç½®éƒ½ä¼šè§¦å‘ä¸€æ¬¡reflow</li>\n<li>æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æŸäº›è®¡ç®—æ–¹æ³•ï¼šoffsetWidthã€offsetHeightç­‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>getComputedStyle</code>æ–¹æ³•ï¼Œæˆ–è€…IEé‡Œçš„ <code>currentStyle</code> æ—¶ï¼Œä¹Ÿä¼šè§¦å‘é‡æ’ï¼ŒåŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¸ºæ±‚ä¸€ä¸ªâ€œå³æ—¶æ€§â€å’Œâ€œå‡†ç¡®æ€§â€ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>å¸¸è§å¼•èµ·é‡æ’å±æ€§å’Œæ–¹æ³•</th>\n<th>â€“</th>\n<th>â€“</th>\n<th>â€“</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>width</td>\n<td>height</td>\n<td>margin</td>\n<td>padding</td>\n</tr>\n<tr>\n<td>display</td>\n<td>border-width</td>\n<td>border</td>\n<td>position</td>\n</tr>\n<tr>\n<td>overflow</td>\n<td>font-size</td>\n<td>vertical-align</td>\n<td>min-height</td>\n</tr>\n<tr>\n<td>clientWidth</td>\n<td>clientHeight</td>\n<td>clientTop</td>\n<td>clientLeft</td>\n</tr>\n<tr>\n<td>offsetWudth</td>\n<td>offsetHeight</td>\n<td>offsetTop</td>\n<td>offsetLeft</td>\n</tr>\n<tr>\n<td>scrollWidth</td>\n<td>scrollHeight</td>\n<td>scrollTop</td>\n<td>scrollLeft</td>\n</tr>\n<tr>\n<td>scrollIntoView()</td>\n<td>scrollTo()</td>\n<td>getComputedStyle()</td>\n<td></td>\n</tr>\n<tr>\n<td>getBoundingClientRect()</td>\n<td>scrollIntoViewIfNeeded()</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"é‡æ’å½±å“çš„èŒƒå›´ï¼š\"><a href=\"#é‡æ’å½±å“çš„èŒƒå›´ï¼š\" class=\"headerlink\" title=\"é‡æ’å½±å“çš„èŒƒå›´ï¼š\"></a>é‡æ’å½±å“çš„èŒƒå›´ï¼š</h3><p>ç”±äºæµè§ˆå™¨æ¸²æŸ“ç•Œé¢æ˜¯åŸºäºæµå¤±å¸ƒå±€æ¨¡å‹çš„ï¼Œæ‰€ä»¥è§¦å‘é‡æ’æ—¶ä¼šå¯¹å‘¨å›´DOMé‡æ–°æ’åˆ—ï¼Œå½±å“çš„èŒƒå›´æœ‰ä¸¤ç§ï¼š</p>\n<ul>\n<li>å…¨å±€èŒƒå›´ï¼šä»æ ¹èŠ‚ç‚¹htmlå¼€å§‹å¯¹æ•´ä¸ªæ¸²æŸ“æ ‘è¿›è¡Œé‡æ–°å¸ƒå±€ã€‚</li>\n<li>å±€éƒ¨èŒƒå›´ï¼šå¯¹æ¸²æŸ“æ ‘çš„æŸéƒ¨åˆ†æˆ–æŸä¸€ä¸ªæ¸²æŸ“å¯¹è±¡è¿›è¡Œé‡æ–°å¸ƒå±€</li>\n</ul>\n<p><strong>å…¨å±€èŒƒå›´é‡æ’ï¼š</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;hello&quot;&gt;</span><br><span class=\"line\">    &lt;h4&gt;hello&lt;&#x2F;h4&gt;</span><br><span class=\"line\">    &lt;p&gt;&lt;strong&gt;Name:&lt;&#x2F;strong&gt;BDing&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;h5&gt;male&lt;&#x2F;h5&gt;</span><br><span class=\"line\">    &lt;ol&gt;</span><br><span class=\"line\">      &lt;li&gt;coding&lt;&#x2F;li&gt;</span><br><span class=\"line\">      &lt;li&gt;loving&lt;&#x2F;li&gt;</span><br><span class=\"line\">    &lt;&#x2F;ol&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure>\n\n<p>å½“pèŠ‚ç‚¹ä¸Šå‘ç”Ÿreflowæ—¶ï¼Œhelloå’Œbodyä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œç”šè‡³h5å’Œoléƒ½ä¼šæ”¶åˆ°å½±å“ã€‚</p>\n<p><strong>å±€éƒ¨èŒƒå›´é‡æ’ï¼š</strong></p>\n<p>ç”¨å±€éƒ¨å¸ƒå±€æ¥è§£é‡Šè¿™ç§ç°è±¡ï¼šæŠŠä¸€ä¸ªdomçš„å®½é«˜ä¹‹ç±»çš„å‡ ä½•ä¿¡æ¯å®šæ­»ï¼Œç„¶ååœ¨domå†…éƒ¨è§¦å‘é‡æ’ï¼Œå°±åªä¼šé‡æ–°æ¸²æŸ“è¯¥domå†…éƒ¨çš„å…ƒç´ ï¼Œè€Œä¸ä¼šå½±å“åˆ°å¤–ç•Œã€‚</p>\n<h2 id=\"é‡ç»˜-Repaints\"><a href=\"#é‡ç»˜-Repaints\" class=\"headerlink\" title=\"é‡ç»˜(Repaints):\"></a>é‡ç»˜(Repaints):</h2><h3 id=\"æ¦‚å¿µï¼š-1\"><a href=\"#æ¦‚å¿µï¼š-1\" class=\"headerlink\" title=\"æ¦‚å¿µï¼š\"></a>æ¦‚å¿µï¼š</h3><p>å½“ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚å‘ç”Ÿæ”¹å˜ï¼Œä½†æ²¡æœ‰æ”¹å˜å¸ƒå±€,é‡æ–°æŠŠå…ƒç´ å¤–è§‚ç»˜åˆ¶å‡ºæ¥çš„è¿‡ç¨‹ï¼Œå«åšé‡ç»˜ã€‚</p>\n<h3 id=\"å¸¸è§çš„å¼•èµ·é‡ç»˜çš„å±æ€§ï¼š\"><a href=\"#å¸¸è§çš„å¼•èµ·é‡ç»˜çš„å±æ€§ï¼š\" class=\"headerlink\" title=\"å¸¸è§çš„å¼•èµ·é‡ç»˜çš„å±æ€§ï¼š\"></a>å¸¸è§çš„å¼•èµ·é‡ç»˜çš„å±æ€§ï¼š</h3><table>\n<thead>\n<tr>\n<th>å±æ€§ï¼š</th>\n<th>â€“</th>\n<th>â€“</th>\n<th>â€“</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>color</td>\n<td>border-style</td>\n<td>visibility</td>\n<td>background</td>\n</tr>\n<tr>\n<td>text-decoration</td>\n<td>background-image</td>\n<td>background-position</td>\n<td>background-repeat</td>\n</tr>\n<tr>\n<td>outline-color</td>\n<td>outline</td>\n<td>outline-style</td>\n<td>border-radius</td>\n</tr>\n<tr>\n<td>outline-width</td>\n<td>box-shadow</td>\n<td>background-size</td>\n<td></td>\n</tr>\n</tbody></table>\n<h2 id=\"é‡æ’ä¼˜åŒ–å»ºè®®ï¼š\"><a href=\"#é‡æ’ä¼˜åŒ–å»ºè®®ï¼š\" class=\"headerlink\" title=\"é‡æ’ä¼˜åŒ–å»ºè®®ï¼š\"></a>é‡æ’ä¼˜åŒ–å»ºè®®ï¼š</h2><p>é‡æ’çš„ä»£ä»·æ˜¯é«˜æ˜‚çš„ï¼Œä¼šç ´åç”¨æˆ·ä½“éªŒï¼Œå¹¶ä¸”è®©UIå±•ç¤ºéå¸¸è¿Ÿç¼“ã€‚é€šè¿‡å‡å°‘é‡æ’çš„è´Ÿé¢å½±å“æ¥æé«˜ç”¨æˆ·ä½“éªŒçš„æœ€ç®€å•æ–¹å¼å°±æ˜¯å°½å¯èƒ½çš„å‡å°‘é‡æ’æ¬¡æ•°ï¼Œé‡æ’èŒƒå›´ã€‚ä¸‹é¢æ˜¯ä¸€äº›è¡Œä¹‹æœ‰æ•ˆçš„å»ºè®®ï¼Œå¤§å®¶å¯ä»¥ç”¨æ¥å‚è€ƒã€‚</p>\n<h3 id=\"å‡å°‘é‡æ’èŒƒå›´\"><a href=\"#å‡å°‘é‡æ’èŒƒå›´\" class=\"headerlink\" title=\"å‡å°‘é‡æ’èŒƒå›´\"></a>å‡å°‘é‡æ’èŒƒå›´</h3><p>æˆ‘ä»¬åº”è¯¥å°½é‡ä»¥å±€éƒ¨å¸ƒå±€çš„å½¢å¼ç»„ç»‡htmlç»“æ„ï¼Œå°½å¯èƒ½å°çš„å½±å“é‡æ’çš„èŒƒå›´ã€‚</p>\n<ul>\n<li>å°½å¯èƒ½åœ¨ä½å±‚çº§çš„DOMèŠ‚ç‚¹ä¸Šï¼Œè€Œä¸æ˜¯åƒä¸Šè¿°å…¨å±€èŒƒå›´çš„ç¤ºä¾‹ä»£ç ä¸€æ ·ï¼Œå¦‚æœä½ è¦æ”¹å˜pçš„æ ·å¼ï¼Œclasså°±ä¸è¦åŠ åœ¨divä¸Šï¼Œé€šè¿‡çˆ¶å…ƒç´ å»å½±å“å­å…ƒç´ ä¸å¥½ã€‚</li>\n<li>ä¸è¦ä½¿ç”¨ table å¸ƒå±€ï¼Œå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª table çš„é‡æ–°å¸ƒå±€ã€‚é‚£ä¹ˆåœ¨ä¸å¾—å·²ä½¿ç”¨tableçš„åœºåˆï¼Œå¯ä»¥è®¾ç½®table-layout:auto;æˆ–è€…æ˜¯table-layout:fixedè¿™æ ·å¯ä»¥è®©tableä¸€è¡Œä¸€è¡Œçš„æ¸²æŸ“ï¼Œè¿™ç§åšæ³•ä¹Ÿæ˜¯ä¸ºäº†é™åˆ¶reflowçš„å½±å“èŒƒå›´ã€‚</li>\n</ul>\n<h3 id=\"å‡å°‘é‡æ’æ¬¡æ•°\"><a href=\"#å‡å°‘é‡æ’æ¬¡æ•°\" class=\"headerlink\" title=\"å‡å°‘é‡æ’æ¬¡æ•°\"></a>å‡å°‘é‡æ’æ¬¡æ•°</h3><h4 id=\"1-æ ·å¼é›†ä¸­æ”¹å˜\"><a href=\"#1-æ ·å¼é›†ä¸­æ”¹å˜\" class=\"headerlink\" title=\"1.æ ·å¼é›†ä¸­æ”¹å˜\"></a>1.æ ·å¼é›†ä¸­æ”¹å˜</h4><p>ä¸è¦é¢‘ç¹çš„æ“ä½œæ ·å¼ï¼Œå¯¹äºä¸€ä¸ªé™æ€é¡µé¢æ¥è¯´ï¼Œæ˜æ™ºä¸”å¯ç»´æŠ¤çš„åšæ³•æ˜¯æ›´æ”¹ç±»åè€Œä¸æ˜¯ä¿®æ”¹æ ·å¼ï¼Œå¯¹äºåŠ¨æ€æ”¹å˜çš„æ ·å¼æ¥è¯´ï¼Œç›¸è¾ƒæ¯æ¬¡å¾®å°ä¿®æ”¹éƒ½ç›´æ¥è§¦åŠå…ƒç´ ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ç»Ÿä¸€åœ¨ <code>cssText</code> å˜é‡ä¸­ç¼–è¾‘ã€‚è™½ç„¶ç°åœ¨å¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨éƒ½ä¼šæœ‰ <code>Flush</code> é˜Ÿåˆ—è¿›è¡Œæ¸²æŸ“é˜Ÿåˆ—ä¼˜åŒ–ï¼Œä½†æ˜¯æœ‰äº›è€ç‰ˆæœ¬çš„æµè§ˆå™¨æ¯”å¦‚IE6çš„æ•ˆç‡ä¾ç„¶ä½ä¸‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; bad</span><br><span class=\"line\">var left &#x3D; 10;</span><br><span class=\"line\">var top &#x3D; 10;</span><br><span class=\"line\">el.style.left &#x3D; left + &quot;px&quot;;</span><br><span class=\"line\">el.style.top &#x3D; top + &quot;px&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å½“topå’Œleftçš„å€¼æ˜¯åŠ¨æ€è®¡ç®—è€Œæˆæ—¶...</span><br><span class=\"line\">&#x2F;&#x2F; better </span><br><span class=\"line\">el.style.cssText +&#x3D; &quot;; left: &quot; + left + &quot;px; top: &quot; + top + &quot;px;&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; better</span><br><span class=\"line\">el.className +&#x3D; &quot; className&quot;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-åˆ†ç¦»è¯»å†™æ“ä½œ\"><a href=\"#2-åˆ†ç¦»è¯»å†™æ“ä½œ\" class=\"headerlink\" title=\"2.åˆ†ç¦»è¯»å†™æ“ä½œ\"></a>2.åˆ†ç¦»è¯»å†™æ“ä½œ</h4><p>DOM çš„å¤šä¸ªè¯»æ“ä½œï¼ˆæˆ–å¤šä¸ªå†™æ“ä½œï¼‰ï¼Œåº”è¯¥æ”¾åœ¨ä¸€èµ·ã€‚ä¸è¦ä¸¤ä¸ªè¯»æ“ä½œä¹‹é—´ï¼ŒåŠ å…¥ä¸€ä¸ªå†™æ“ä½œã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; bad å¼ºåˆ¶åˆ·æ–° è§¦å‘å››æ¬¡é‡æ’+é‡ç»˜</span><br><span class=\"line\">div.style.left &#x3D; div.offsetLeft + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.top &#x3D; div.offsetTop + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.right &#x3D; div.offsetRight + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.bottom &#x3D; div.offsetBottom + 1 + &#39;px&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; good ç¼“å­˜å¸ƒå±€ä¿¡æ¯ ç›¸å½“äºè¯»å†™åˆ†ç¦» è§¦å‘ä¸€æ¬¡é‡æ’+é‡ç»˜</span><br><span class=\"line\">var curLeft &#x3D; div.offsetLeft;</span><br><span class=\"line\">var curTop &#x3D; div.offsetTop;</span><br><span class=\"line\">var curRight &#x3D; div.offsetRight;</span><br><span class=\"line\">var curBottom &#x3D; div.offsetBottom;</span><br><span class=\"line\"></span><br><span class=\"line\">div.style.left &#x3D; curLeft + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.top &#x3D; curTop + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.right &#x3D; curRight + 1 + &#39;px&#39;;</span><br><span class=\"line\">div.style.bottom &#x3D; curBottom + 1 + &#39;px&#39;;</span><br></pre></td></tr></table></figure>\n\n<p>åŸæ¥çš„æ“ä½œä¼šå¯¼è‡´å››æ¬¡é‡æ’ï¼Œè¯»å†™åˆ†ç¦»ä¹‹åå®é™…ä¸Šåªè§¦å‘äº†ä¸€æ¬¡é‡æ’ï¼Œè¿™éƒ½å¾—ç›Šäºæµè§ˆå™¨çš„æ¸²æŸ“é˜Ÿåˆ—æœºåˆ¶ï¼š</p>\n<blockquote>\n<p>å½“æˆ‘ä»¬ä¿®æ”¹äº†å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œå¯¼è‡´æµè§ˆå™¨è§¦å‘é‡æ’æˆ–é‡ç»˜æ—¶ã€‚å®ƒä¼šæŠŠè¯¥æ“ä½œæ”¾è¿›æ¸²æŸ“é˜Ÿåˆ—ï¼Œç­‰åˆ°é˜Ÿåˆ—ä¸­çš„æ“ä½œåˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šæ‰¹é‡æ‰§è¡Œè¿™äº›æ“ä½œã€‚</p>\n</blockquote>\n<h4 id=\"3-å°†-DOM-ç¦»çº¿\"><a href=\"#3-å°†-DOM-ç¦»çº¿\" class=\"headerlink\" title=\"3.å°† DOM ç¦»çº¿\"></a>3.å°† DOM ç¦»çº¿</h4><p>â€œç¦»çº¿â€æ„å‘³ç€ä¸åœ¨å½“å‰çš„ DOM æ ‘ä¸­åšä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<ul>\n<li><p>ä½¿ç”¨ display:none</p>\n<p>ä¸€æ—¦æˆ‘ä»¬ç»™å…ƒç´ è®¾ç½® <code>display:none</code> æ—¶ï¼ˆåªæœ‰ä¸€æ¬¡é‡æ’é‡ç»˜ï¼‰ï¼Œå…ƒç´ ä¾¿ä¸ä¼šå†å­˜åœ¨åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œç›¸å½“äºå°†å…¶ä»é¡µé¢ä¸Šâ€œæ‹¿æ‰â€ï¼Œæˆ‘ä»¬ä¹‹åçš„æ“ä½œå°†ä¸ä¼šè§¦å‘é‡æ’å’Œé‡ç»˜ï¼Œæ·»åŠ è¶³å¤Ÿå¤šçš„å˜æ›´åï¼Œé€šè¿‡ <code>display</code>å±æ€§æ˜¾ç¤ºï¼ˆå¦ä¸€æ¬¡é‡æ’é‡ç»˜ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼å³ä½¿å¤§é‡å˜æ›´ä¹Ÿåªè§¦å‘ä¸¤æ¬¡é‡æ’ã€‚å¦å¤–ï¼Œ<code>visibility : hidden</code> çš„å…ƒç´ åªå¯¹é‡ç»˜æœ‰å½±å“ï¼Œä¸å½±å“é‡æ’ã€‚</p>\n</li>\n<li><p>é€šè¿‡ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentFragment\">documentFragment</a> åˆ›å»ºä¸€ä¸ª <code>dom</code> ç¢ç‰‡,åœ¨å®ƒä¸Šé¢æ‰¹é‡æ“ä½œ <code>dom</code>ï¼Œæ“ä½œå®Œæˆä¹‹åï¼Œå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œè¿™æ ·åªä¼šè§¦å‘ä¸€æ¬¡é‡æ’ã€‚</p>\n</li>\n<li><p>å¤åˆ¶èŠ‚ç‚¹ï¼Œåœ¨å‰¯æœ¬ä¸Šå·¥ä½œï¼Œç„¶åæ›¿æ¢å®ƒï¼</p>\n</li>\n</ul>\n<h4 id=\"4-ä½¿ç”¨-absolute-æˆ–-fixed-è„±ç¦»æ–‡æ¡£æµ\"><a href=\"#4-ä½¿ç”¨-absolute-æˆ–-fixed-è„±ç¦»æ–‡æ¡£æµ\" class=\"headerlink\" title=\"4.ä½¿ç”¨ absolute æˆ– fixed è„±ç¦»æ–‡æ¡£æµ\"></a>4.ä½¿ç”¨ absolute æˆ– fixed è„±ç¦»æ–‡æ¡£æµ</h4><p>ä½¿ç”¨ç»å¯¹å®šä½ä¼šä½¿çš„è¯¥å…ƒç´ å•ç‹¬æˆä¸ºæ¸²æŸ“æ ‘ä¸­ <code>body</code> çš„ä¸€ä¸ªå­å…ƒç´ ï¼Œé‡æ’å¼€é”€æ¯”è¾ƒå°ï¼Œä¸ä¼šå¯¹å…¶å®ƒèŠ‚ç‚¹é€ æˆå¤ªå¤šå½±å“ã€‚å½“ä½ åœ¨è¿™äº›èŠ‚ç‚¹ä¸Šæ”¾ç½®è¿™ä¸ªå…ƒç´ æ—¶ï¼Œä¸€äº›å…¶å®ƒåœ¨è¿™ä¸ªåŒºåŸŸå†…çš„èŠ‚ç‚¹å¯èƒ½éœ€è¦é‡ç»˜ï¼Œä½†æ˜¯ä¸éœ€è¦é‡æ’ã€‚</p>\n<h4 id=\"5-ä¼˜åŒ–åŠ¨ç”»\"><a href=\"#5-ä¼˜åŒ–åŠ¨ç”»\" class=\"headerlink\" title=\"5.ä¼˜åŒ–åŠ¨ç”»\"></a>5.ä¼˜åŒ–åŠ¨ç”»</h4><ul>\n<li><p>å¯ä»¥æŠŠåŠ¨ç”»æ•ˆæœåº”ç”¨åˆ° <code>position</code>å±æ€§ä¸º <code>absolute</code> æˆ– <code>fixed</code> çš„å…ƒç´ ä¸Šï¼Œè¿™æ ·å¯¹å…¶ä»–å…ƒç´ å½±å“è¾ƒå°ã€‚</p>\n<p>åŠ¨ç”»æ•ˆæœè¿˜åº”ç‰ºç‰²ä¸€äº›å¹³æ»‘ï¼Œæ¥æ¢å–é€Ÿåº¦ï¼Œè¿™ä¸­é—´çš„åº¦è‡ªå·±è¡¡é‡ï¼š æ¯”å¦‚å®ç°ä¸€ä¸ªåŠ¨ç”»ï¼Œä»¥1ä¸ªåƒç´ ä¸ºå•ä½ç§»åŠ¨è¿™æ ·æœ€å¹³æ»‘ï¼Œä½†æ˜¯Layoutå°±ä¼šè¿‡äºé¢‘ç¹ï¼Œå¤§é‡æ¶ˆè€—CPUèµ„æºï¼Œå¦‚æœä»¥3ä¸ªåƒç´ ä¸ºå•ä½ç§»åŠ¨åˆ™ä¼šå¥½å¾ˆå¤š</p>\n</li>\n<li><p>å¯ç”¨GPUåŠ é€Ÿ <code>GPU</code> ç¡¬ä»¶åŠ é€Ÿæ˜¯æŒ‡åº”ç”¨ <code>GPU</code> çš„å›¾å½¢æ€§èƒ½å¯¹æµè§ˆå™¨ä¸­çš„ä¸€äº›å›¾å½¢æ“ä½œäº¤ç»™ <code>GPU</code> æ¥å®Œæˆï¼Œå› ä¸º <code>GPU</code> æ˜¯ä¸“é—¨ä¸ºå¤„ç†å›¾å½¢è€Œè®¾è®¡ï¼Œæ‰€ä»¥å®ƒåœ¨é€Ÿåº¦å’Œèƒ½è€—ä¸Šæ›´æœ‰æ•ˆç‡ã€‚</p>\n<p><code>GPU</code> åŠ é€Ÿé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼šCanvas2Dï¼Œå¸ƒå±€åˆæˆ, CSS3è½¬æ¢ï¼ˆtransitionsï¼‰ï¼ŒCSS3 3Då˜æ¢ï¼ˆtransformsï¼‰ï¼ŒWebGLå’Œè§†é¢‘(video)ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*</span><br><span class=\"line\">* æ ¹æ®ä¸Šé¢çš„ç»“è®º</span><br><span class=\"line\">* å°† 2d transform æ¢æˆ 3d</span><br><span class=\"line\">* å°±å¯ä»¥å¼ºåˆ¶å¼€å¯ GPU åŠ é€Ÿ</span><br><span class=\"line\">* æé«˜åŠ¨ç”»æ€§èƒ½</span><br><span class=\"line\">*&#x2F;</span><br><span class=\"line\">div &#123;</span><br><span class=\"line\">  transform: translate3d(10px, 10px, 0);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢æ¸²æŸ“æ—¶é—´\"><a href=\"#å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢æ¸²æŸ“æ—¶é—´\" class=\"headerlink\" title=\"å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢æ¸²æŸ“æ—¶é—´\"></a>å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹é¡µé¢æ¸²æŸ“æ—¶é—´</h2><p>1.æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼šç‚¹å‡» Performance å·¦ä¾§æœ‰ä¸ªå°åœ†ç‚¹ ç‚¹å‡»åˆ·æ–°é¡µé¢ä¼šå½•åˆ¶æ•´ä¸ªé¡µé¢åŠ è½½å‡ºæ¥ æ—¶é—´çš„åˆ†é…æƒ…å†µã€‚å¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/3/6/170af50e460d9a23?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"image\"></p>\n<ul>\n<li>è“è‰²: ç½‘ç»œé€šä¿¡å’ŒHTMLè§£æ</li>\n<li>é»„è‰²: JavaScriptæ‰§è¡Œ</li>\n<li>ç´«è‰²: æ ·å¼è®¡ç®—å’Œå¸ƒå±€ï¼Œå³é‡æ’</li>\n<li>ç»¿è‰²: é‡ç»˜</li>\n</ul>\n<p>å“ªç§è‰²å—æ¯”è¾ƒå¤šï¼Œå°±è¯´æ˜æ€§èƒ½è€—è´¹åœ¨é‚£é‡Œã€‚è‰²å—è¶Šé•¿ï¼Œé—®é¢˜è¶Šå¤§ã€‚</p>\n<p>2.ç‚¹å‡» Event Logï¼šå•ç‹¬å‹¾é€‰ Loading é¡¹ä¼šæ˜¾ç¤º html å’Œ css åŠ è½½æ—¶é—´ã€‚å¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2020/3/6/170af5139b7ba71b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"image\"></p>\n<p>3.è§£æå®Œ DOM+CSSOM ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªæ¸²æŸ“æ ‘ Render Treeï¼Œå°±æ˜¯ DOM å’Œ CSSOM çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p>\n<p>4.é€šè¿‡æ¸²æŸ“æ ‘ä¸­åœ¨å±å¹•ä¸Šâ€œç”»â€å‡ºçš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œç§°ä¸ºæ¸²æŸ“ã€‚</p>\n<h3 id=\"å°ç»“ï¼š\"><a href=\"#å°ç»“ï¼š\" class=\"headerlink\" title=\"å°ç»“ï¼š\"></a>å°ç»“ï¼š</h3><ul>\n<li>æ¸²æŸ“çš„ä¸‰ä¸ªé˜¶æ®µ Layoutï¼ŒPaintï¼ŒComposite Layersã€‚ Layoutï¼šé‡æ’ï¼Œåˆå«å›æµã€‚ Paint:é‡ç»˜ï¼Œé‡æ’é‡ç»˜è¿™äº›æ­¥éª¤éƒ½æ˜¯åœ¨ CPU ä¸­å‘ç”Ÿçš„ã€‚ Compostite Layersï¼šCPU æŠŠç”Ÿæˆçš„ BitMapï¼ˆä½å›¾ï¼‰ä¼ è¾“åˆ° GPUï¼Œæ¸²æŸ“åˆ°å±å¹•ã€‚</li>\n<li>CSS3 å°±æ˜¯åœ¨ GPU å‘ç”Ÿçš„ï¼šTransform Opacityã€‚åœ¨ GPU å‘ç”Ÿçš„å±æ€§æ¯”è¾ƒé«˜æ•ˆã€‚æ‰€ä»¥ CSS3 æ€§èƒ½æ¯”è¾ƒé«˜ã€‚</li>\n</ul>\n<h2 id=\"ç»“è¯­\"><a href=\"#ç»“è¯­\" class=\"headerlink\" title=\"ç»“è¯­\"></a>ç»“è¯­</h2><p>éå¸¸æ„Ÿè°¢ä½ çœ‹å®Œäº†è¿™ç¯‡å¾ˆé•¿çš„æ–‡ç« ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶èƒ½é‡è§†é‡æ’çš„è¿™äº›é—®é¢˜ï¼Œåœ¨æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œä¹Ÿéœ€è¦æœ‰æ„è¯†çš„è§„é¿è¿™äº›é—®é¢˜ï¼Œæ‰èƒ½è®©æˆ‘ä»¬å†™å‡ºæ¥çš„ä»£ç æ›´è§„èŒƒï¼</p>\n<h2 id=\"å‚è€ƒæ–‡æ¡£\"><a href=\"#å‚è€ƒæ–‡æ¡£\" class=\"headerlink\" title=\"å‚è€ƒæ–‡æ¡£\"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href=\"https://segmentfault.com/a/1190000017491520\">æŒæ¡æµè§ˆå™¨é‡ç»˜(repaint)é‡æ’(reflow))-å‰ç«¯è¿›é˜¶</a></p>\n<p><a href=\"https://csstriggers.com/\">csstriggers</a></p>\n<p><a href=\"https://efe.baidu.com/blog/hardware-accelerated-css-the-nice-vs-the-naughty/\">CSSç¡¬ä»¶åŠ é€Ÿçš„å¥½ä¸å</a></p>\n<h1 id=\"4-ç™½å±æ—¶é—´\"><a href=\"#4-ç™½å±æ—¶é—´\" class=\"headerlink\" title=\"4.ç™½å±æ—¶é—´\"></a>4.ç™½å±æ—¶é—´</h1><h2 id=\"ä¸€ã€æ¦‚å¿µ\"><a href=\"#ä¸€ã€æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸€ã€æ¦‚å¿µ\"></a>ä¸€ã€æ¦‚å¿µ</h2><p>ç™½å±æ—¶é—´ï¼šå³ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–æ‰“å¼€æµè§ˆå™¨è¾“å…¥URLåœ°å€åï¼Œä»å±å¹•ç©ºç™½åˆ°æ˜¾ç¤ºç¬¬ä¸€ä¸ªç”»é¢çš„æ—¶é—´ã€‚</p>\n<blockquote>\n<p>ç™½å±æ—¶é—´çš„é•¿çŸ­å°†ç›´æ¥å½±å“ç”¨æˆ·å¯¹è¯¥ç½‘ç«™çš„ç¬¬ä¸€å°è±¡ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒã€ç™½å±æ—¶é—´çš„é‡è¦æ€§\"><a href=\"#äºŒã€ç™½å±æ—¶é—´çš„é‡è¦æ€§\" class=\"headerlink\" title=\"äºŒã€ç™½å±æ—¶é—´çš„é‡è¦æ€§\"></a>äºŒã€ç™½å±æ—¶é—´çš„é‡è¦æ€§</h2><p>å½“ç”¨æˆ·ç‚¹å¼€ä¸€ä¸ªé“¾æ¥æˆ–è€…æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLå¼€å§‹è¿›è¡Œè®¿é—®æ—¶ï¼Œå°±å¼€å§‹ç­‰å¾…é¡µé¢çš„å±•ç¤ºã€‚é¡µé¢æ¸²æŸ“çš„æ—¶é—´è¶ŠçŸ­ï¼Œç”¨æˆ·ç­‰å¾…çš„æ—¶é—´å°±è¶ŠçŸ­ï¼Œç”¨æˆ·æ„ŸçŸ¥åˆ°é¡µé¢çš„é€Ÿåº¦å°±è¶Šå¿«ã€‚è¿™æ ·å¯ä»¥æå¤§çš„æå‡ç”¨æˆ·çš„ä½“éªŒï¼Œå‡å°‘ç”¨æˆ·çš„è·³å‡ºï¼Œæå‡é¡µé¢çš„ç•™å­˜ç‡ã€‚</p>\n<h2 id=\"ä¸‰ã€ç™½å±æ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿ\"><a href=\"#ä¸‰ã€ç™½å±æ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"ä¸‰ã€ç™½å±æ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿ\"></a>ä¸‰ã€ç™½å±æ˜¯ä¸€ä¸ªæ€æ ·çš„è¿‡ç¨‹å‘¢ï¼Ÿ</h2><blockquote>\n<p>è®©æˆ‘ä»¬ä¸€èµ·æ¥æ­ç§˜ï¼šä»æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œåˆ°é¡µé¢çš„ç”»é¢å±•ç¤ºç»å†äº†æ€æ ·çš„è¿‡ç¨‹ï¼</p>\n</blockquote>\n<h3 id=\"1-DNS-Lookup\"><a href=\"#1-DNS-Lookup\" class=\"headerlink\" title=\"1. DNS Lookup\"></a>1. DNS Lookup</h3><blockquote>\n<p>DNS Lookup å³æµè§ˆå™¨ä»DNSæœåŠ¡å™¨ä¸­è¿›è¡ŒåŸŸåæŸ¥è¯¢ã€‚</p>\n</blockquote>\n<p>æµè§ˆå™¨ä¼šå…ˆå¯¹é¡µé¢è¿›è¡Œ<a href=\"https://cloud.tencent.com/product/cns?from=10680\">åŸŸåè§£æ</a>ï¼Œè·å–åˆ°æœåŠ¡å™¨çš„IPåœ°å€åï¼Œè¿›è€Œå’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚</p>\n<p>Tips: é€šå¸¸åœ¨æ•´ä¸ªåŠ è½½é¡µé¢çš„è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå¤šæ¬¡è¿›è¡ŒDNS Lookupï¼ŒåŒ…æ‹¬é¡µé¢æœ¬èº«çš„åŸŸåæŸ¥è¯¢ä»¥åŠåœ¨è§£æHTMLé¡µé¢æ—¶åŠ è½½çš„JSã€CSSã€Imageã€Videoç­‰èµ„æºäº§ç”Ÿçš„åŸŸåæŸ¥è¯¢ã€‚</p>\n<h3 id=\"2-å»ºç«‹TCPè¯·æ±‚è¿æ¥\"><a href=\"#2-å»ºç«‹TCPè¯·æ±‚è¿æ¥\" class=\"headerlink\" title=\"2. å»ºç«‹TCPè¯·æ±‚è¿æ¥\"></a>2. å»ºç«‹TCPè¯·æ±‚è¿æ¥</h3><p>æµè§ˆå™¨å’ŒæœåŠ¡ç«¯TCPè¯·æ±‚å»ºç«‹çš„è¿‡ç¨‹ï¼Œæ˜¯åŸºäºTCP/IPï¼Œè¯¥åè®®ç”±ç½‘ç»œå±‚çš„IPå’Œä¼ è¾“å±‚çš„TCPç»„æˆã€‚IPæ˜¯æ¯ä¸€å°äº’è”ç½‘è®¾å¤‡åœ¨äº’è”ç½‘ä¸­çš„å”¯ä¸€åœ°å€ã€‚</p>\n<p>TCPé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå¹¶æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚</p>\n<h3 id=\"3-æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å“åº”\"><a href=\"#3-æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å“åº”\" class=\"headerlink\" title=\"3. æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å“åº”\"></a>3. æœåŠ¡ç«¯è¯·æ±‚å¤„ç†å“åº”</h3><p>åœ¨TCPè¿æ¥å»ºç«‹åï¼ŒWebæœåŠ¡å™¨æ¥å—è¯·æ±‚ï¼Œå¼€å§‹è¿›è¡Œå¤„ç†ï¼ŒåŒæ—¶æµè§ˆå™¨ç«¯å¼€å§‹ç­‰å¾…æœåŠ¡å™¨çš„å¤„ç†å“åº”ã€‚</p>\n<p>WebæœåŠ¡å™¨æ ¹æ®è¯·æ±‚ç±»å‹çš„ä¸åŒï¼Œè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚é™æ€èµ„æºå¦‚å›¾ç‰‡ã€CSSæ–‡ä»¶ã€é™æ€HTMLç›´æ¥è¿›è¡Œå“åº”ï¼›å¦‚å…¶ä»–æ³¨å†Œçš„è¯·æ±‚è½¬å‘ç»™ç›¸åº”çš„åº”ç”¨æœåŠ¡å™¨ï¼Œè¿›è¡Œå¦‚æ•°æ®å¤„ç†ã€ç¼“å­˜ä¸­å–æ•°æ®ï¼Œå°†æ•°æ®æŒ‰ç…§çº¦å®šå¥½çš„æ ¼å¼å“åº”ç»™æµè§ˆå™¨ã€‚</p>\n<blockquote>\n<p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¸ºåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ï¼Œåº”ç”¨æœåŠ¡å™¨çš„å¤„ç†æœ‰å¯èƒ½ç»è¿‡å¾ˆå¤šä¸ªç³»ç»Ÿçš„ä¸­é—´ä»¶ï¼Œæœ€ç»ˆè·å–åˆ°éœ€è¦çš„æ•°æ®</p>\n</blockquote>\n<h3 id=\"4-å®¢æˆ·ç«¯ä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºé¡µé¢\"><a href=\"#4-å®¢æˆ·ç«¯ä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºé¡µé¢\" class=\"headerlink\" title=\"4. å®¢æˆ·ç«¯ä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºé¡µé¢\"></a>4. å®¢æˆ·ç«¯ä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºé¡µé¢</h3><p>åœ¨æœåŠ¡å™¨è¿”å›æ•°æ®åï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨æ¥æ”¶æ•°æ®ï¼Œè¿›è¡ŒHTMLä¸‹è½½ã€è§£æã€æ¸²æŸ“æ˜¾ç¤ºã€‚</p>\n<ul>\n<li>a. å¦‚æœæ˜¯GzipåŒ…ï¼Œåˆ™å…ˆè§£å‹ä¸ºHTML</li>\n<li>b. è§£æHTMLçš„å¤´éƒ¨ä»£ç ï¼Œä¸‹è½½å¤´éƒ¨ä»£ç ä¸­çš„æ ·å¼èµ„æºæ–‡ä»¶æˆ–è„šæœ¬èµ„æºæ–‡ä»¶</li>\n<li>c. è§£æHTMLä»£ç å’Œæ ·å¼æ–‡ä»¶ä»£ç ï¼Œæ„å»ºHTMLçš„DOMæ ‘ä»¥åŠä¸CSSç›¸å…³çš„CSSOMæ ‘</li>\n<li>d. é€šè¿‡éå†DOMæ ‘å’ŒCSSOMæ ‘ï¼Œæµè§ˆå™¨ä¾æ¬¡è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ã€åæ ‡ã€é¢œè‰²ç­‰æ ·å¼ï¼Œæ„é€ æ¸²æŸ“æ ‘</li>\n<li>e. æ ¹æ®æ¸²æŸ“æ ‘å®Œæˆç»˜åˆ¶è¿‡ç¨‹</li>\n</ul>\n<p>æµè§ˆå™¨ä¸‹è½½HTMLåï¼Œé¦–å…ˆè§£æå¤´éƒ¨ä»£ç ï¼Œè¿›è¡Œæ ·å¼è¡¨ä¸‹è½½ï¼Œç„¶åç»§ç»­å‘ä¸‹è§£æHTMLä»£ç ï¼Œæ„å»ºDOMæ ‘ï¼ŒåŒæ—¶è¿›è¡Œæ ·å¼ä¸‹è½½ã€‚å½“DOMæ ‘æ„å»ºå®Œæˆåï¼Œç«‹å³å¼€å§‹æ„é€ CSSOMæ ‘ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ ·å¼è¡¨ä¸‹è½½é€Ÿåº¦å¤Ÿå¿«ï¼ŒDOMæ ‘å’ŒCSSOMæ ‘è¿›å…¥ä¸€ä¸ªå¹¶è¡Œçš„è¿‡ç¨‹ï¼Œå½“ä¸¤æ£µæ ‘æ„å»ºå®Œæ¯•ï¼Œæ„å»ºæ¸²æŸ“æ ‘ï¼Œç„¶åè¿›è¡Œç»˜åˆ¶ã€‚</p>\n<p>Tips:æµè§ˆå™¨å®‰å…¨è§£æç­–ç•¥å¯¹è§£æHTMLé€ æˆçš„å½±å“ï¼š</p>\n<ul>\n<li>å½“è§£æHTMLæ—¶é‡åˆ°å†…è”JSä»£ç ï¼Œä¼šé˜»å¡DOMæ ‘çš„æ„å»º</li>\n<li>ç‰¹åˆ«æ‚²æƒ¨çš„æƒ…å†µï¼š å½“CSSæ ·å¼æ–‡ä»¶æ²¡æœ‰ä¸‹è½½å®Œæˆæ—¶ï¼Œæµè§ˆå™¨è§£æHTMLé‡åˆ°äº†å†…è”JSä»£ç ï¼Œæ­¤æ—¶ï¼ï¼ï¼æ ¹æ®æµè§ˆå™¨çš„å®‰å…¨è§£æç­–ç•¥ï¼Œæµè§ˆå™¨æš‚åœJSè„šæœ¬æ‰§è¡Œï¼Œæš‚åœHTMLè§£æã€‚ç›´åˆ°CSSæ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå®ŒæˆCSSOMæ ‘æ„å»ºï¼Œé‡æ–°æ¢å¤åŸæ¥çš„è§£æã€‚ ä¸€å®šè¦åˆç†æ”¾ç½®JSä»£ç ï¼ï¼ï¼</li>\n</ul>\n<h2 id=\"å››ã€ç™½å±-æ€§èƒ½ä¼˜åŒ–\"><a href=\"#å››ã€ç™½å±-æ€§èƒ½ä¼˜åŒ–\" class=\"headerlink\" title=\"å››ã€ç™½å±-æ€§èƒ½ä¼˜åŒ–\"></a>å››ã€ç™½å±-æ€§èƒ½ä¼˜åŒ–</h2><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†ä»æµè§ˆå™¨åœ¨æ‰“å¼€ä¸€ä¸ªé“¾æ¥å¼€å§‹ï¼Œåˆ°å±å¹•å±•ç¤ºçš„è¿‡ç¨‹-ç™½å±æ—¶é—´çš„å†ç¨‹ï¼Œé‚£è¿™å¯¹æ¯ä¸ªç¯èŠ‚ä¸­å‘ç”Ÿçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰é’ˆå¯¹æ€§çš„è¿›è¡Œç›¸å…³çš„ä¼˜åŒ–ã€‚</p>\n<h3 id=\"1-DNSè§£æä¼˜åŒ–\"><a href=\"#1-DNSè§£æä¼˜åŒ–\" class=\"headerlink\" title=\"1. DNSè§£æä¼˜åŒ–\"></a>1. DNSè§£æä¼˜åŒ–</h3><p>é’ˆå¯¹DNS Lookupç¯èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ€§çš„è¿›è¡ŒDNSè§£æä¼˜åŒ–ã€‚</p>\n<ul>\n<li>DNSç¼“å­˜ä¼˜åŒ–</li>\n<li>DNSé¢„åŠ è½½ç­–ç•¥</li>\n<li>ç¨³å®šå¯é çš„DNSæœåŠ¡å™¨</li>\n</ul>\n<h3 id=\"2-TCPç½‘ç»œé“¾è·¯ä¼˜åŒ–\"><a href=\"#2-TCPç½‘ç»œé“¾è·¯ä¼˜åŒ–\" class=\"headerlink\" title=\"2. TCPç½‘ç»œé“¾è·¯ä¼˜åŒ–\"></a>2. TCPç½‘ç»œé“¾è·¯ä¼˜åŒ–</h3><p>é’ˆå¯¹ç½‘ç»œé“¾è·¯çš„ä¼˜åŒ–ï¼Œå¥½åƒé™¤äº†èŠ±é’±æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹å¼ï¼</p>\n<h3 id=\"3-æœåŠ¡ç«¯å¤„ç†ä¼˜åŒ–\"><a href=\"#3-æœåŠ¡ç«¯å¤„ç†ä¼˜åŒ–\" class=\"headerlink\" title=\"3. æœåŠ¡ç«¯å¤„ç†ä¼˜åŒ–\"></a>3. æœåŠ¡ç«¯å¤„ç†ä¼˜åŒ–</h3><p>æœåŠ¡ç«¯çš„å¤„ç†ä¼˜åŒ–ï¼Œæ˜¯ä¸€ä¸ªéå¸¸åºå¤§çš„è¯é¢˜ï¼Œä¼šæ¶‰åŠåˆ°å¦‚<a href=\"https://cloud.tencent.com/product/crs?from=10680\">Redis</a>ç¼“å­˜ã€æ•°æ®åº“å­˜å‚¨ä¼˜åŒ–æˆ–æ˜¯ç³»ç»Ÿå†…çš„å„ç§ä¸­é—´ä»¶ä»¥åŠGzipå‹ç¼©ç­‰â€¦</p>\n<h3 id=\"4-æµè§ˆå™¨ä¸‹è½½ã€è§£æã€æ¸²æŸ“é¡µé¢ä¼˜åŒ–\"><a href=\"#4-æµè§ˆå™¨ä¸‹è½½ã€è§£æã€æ¸²æŸ“é¡µé¢ä¼˜åŒ–\" class=\"headerlink\" title=\"4. æµè§ˆå™¨ä¸‹è½½ã€è§£æã€æ¸²æŸ“é¡µé¢ä¼˜åŒ–\"></a>4. æµè§ˆå™¨ä¸‹è½½ã€è§£æã€æ¸²æŸ“é¡µé¢ä¼˜åŒ–</h3><p>æ ¹æ®æµè§ˆå™¨å¯¹é¡µé¢çš„ä¸‹è½½ã€è§£æã€æ¸²æŸ“è¿‡ç¨‹ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹çš„ä¼˜åŒ–å¤„ç†ï¼š</p>\n<ul>\n<li>å°½å¯èƒ½çš„ç²¾ç®€HTMLçš„ä»£ç å’Œç»“æ„</li>\n<li>å°½å¯èƒ½çš„ä¼˜åŒ–CSSæ–‡ä»¶å’Œç»“æ„</li>\n<li>ä¸€å®šè¦åˆç†çš„æ”¾ç½®JSä»£ç ï¼Œå°½é‡ä¸è¦ä½¿ç”¨å†…è”çš„JSä»£ç </li>\n</ul>\n","categories":["webå‰ç«¯"],"tags":["é¢è¯•","å‰ç«¯æ€§èƒ½","ä¼˜åŒ–"]},{"title":"æ“ä½œç³»ç»Ÿ","url":"/2021/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/","content":"<p>è¿™ä¸ªéƒ¨åˆ†ç”¨æ¥ä»‹ç»æ“ä½œç³»ç»Ÿï¼Œç›®å‰è¿™ä¸€å—çŸ¥è¯†æ˜¯æˆ‘çš„ç›²åŒºï¼Œéœ€è¦æŒæ¡è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œä¸ä»…ä»…æ˜¯åº”ä»˜é¢è¯•ï¼Œä¸ºä»¥åå…¨æ ˆå­¦ä¹ æ‰“å¥½åŸºç¡€ã€‚</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-è¿›ç¨‹ä¸çº¿ç¨‹\"><a href=\"#1-è¿›ç¨‹ä¸çº¿ç¨‹\" class=\"headerlink\" title=\"1. è¿›ç¨‹ä¸çº¿ç¨‹\"></a>1. è¿›ç¨‹ä¸çº¿ç¨‹</h1><h2 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>æœ¬ç« ä¸»è¦ä»‹ç»è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ä¸è”ç³»ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬é¢è¯•è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé—®åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚å¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œèƒ½è®©å¤§å®¶ç†è§£ç›¸å…³çŸ¥è¯†ç‚¹~</p>\n<p>æ¶‰åŠé¢è¯•é¢˜ï¼š</p>\n<ul>\n<li>1.è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>\n<li>2.è¿›ç¨‹ã€çº¿ç¨‹éƒ½å„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</li>\n<li>3.è¿›ç¨‹ä¹‹é—´çš„æ˜¯æ€ä¹ˆè¿›è¡Œäº¤äº’çš„å‘¢ï¼Ÿ</li>\n<li>4.ä»€ä¹ˆæ˜¯ç¼“å†²åŒºæº¢å‡ºï¼Ÿ</li>\n<li>5.è¿›ç¨‹ä¹‹é—´å¦‚ä½•è¿›è¡Œäº¤äº’ï¼Ÿ</li>\n<li>6.çº¿ç¨‹ä¹‹é—´å¦‚ä½•è¿›è¡Œäº¤äº’ï¼Ÿ</li>\n</ul>\n<blockquote>\n<p>ä¸Šé¢çš„é¢è¯•é¢˜å¯ä»¥çœ‹å‡ºï¼Œå…¶å®éƒ½æ˜¯ä¸€å›äº‹ï¼Œåªæ˜¯æ¢äº†ä¸€ç§æé—®æ–¹å¼ï¼Œåªè¦æˆ‘ä»¬èƒ½æŒæ¡æ ¸å¿ƒè¦ç‚¹ï¼Œéšä¾¿é¢è¯•å®˜æ€ä¹ˆæé—®ï¼Œæˆ‘ä»¬éƒ½èƒ½è½»æ¾åº”å¯¹ï¼</p>\n</blockquote>\n<h2 id=\"1-å°ä¾‹å­ï¼š\"><a href=\"#1-å°ä¾‹å­ï¼š\" class=\"headerlink\" title=\"1. å°ä¾‹å­ï¼š\"></a>1. å°ä¾‹å­ï¼š</h2><blockquote>\n<p>æˆ‘ä»¬ç”Ÿæ´»ä¸­æœ‰è®¸è®¸å¤šå¤šå…³äºè¿›ç¨‹ä¸çº¿ç¨‹çš„å°ä¾‹å­ï¼Œæ¯”å¦‚ï¼š1.æˆ‘ä»¬ä½¿ç”¨æ‰“å¼€ä¸€ä¸ªå¾®ä¿¡è½¯ä»¶ï¼Œè¿™ä¸ªæ—¶å€™å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œ<br>å½“æˆ‘ä»¬åœ¨å¾®ä¿¡é‡Œé¢è¿›è¡Œå„ç§æ“ä½œï¼ˆæŸ¥çœ‹æœ‹å‹åœˆï¼Œæ‰«ä¸€æ‰«â€¦ï¼‰ï¼Œè¿™ä¹ˆå¤šçš„æ“ä½œå°±æ˜¯çº¿ç¨‹ã€‚<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´â€œè¿›ç¨‹â€æ˜¯åŒ…å«â€œçº¿ç¨‹â€çš„ï¼Œâ€œçº¿ç¨‹â€æ˜¯â€œè¿›ç¨‹â€çš„ä¸€ä¸ªå­é›†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><strong>æ¥æºç™¾åº¦ç™¾ç§‘ï¼š</strong></p>\n</blockquote>\n<p><strong>è¿›ç¨‹ï¼ˆProcessï¼‰</strong> æ˜¯è®¡ç®—æœºä¸­çš„ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚ åœ¨å½“ä»£é¢å‘çº¿ç¨‹è®¾è®¡çš„è®¡ç®—æœºç»“æ„ä¸­ï¼Œè¿›ç¨‹æ˜¯çº¿ç¨‹çš„å®¹å™¨ã€‚ç¨‹åºæ˜¯æŒ‡ä»¤ã€æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„å®ä½“ã€‚æ˜¯è®¡ç®—æœºä¸­çš„ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚ç¨‹åºæ˜¯æŒ‡ä»¤ã€æ•°æ®åŠå…¶ç»„ç»‡å½¢å¼çš„æè¿°ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„å®ä½“ã€‚</p>\n<p><strong>çº¿ç¨‹ï¼ˆthreadï¼‰</strong> æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚</p>\n<blockquote>\n<p>æˆ‘ä»¬ç®€å•æ€»ç»“ä¸‹ï¼š</p>\n</blockquote>\n<p>è¿›ç¨‹ï¼šæŒ‡åœ¨ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼›ç¨‹åºä¸€æ—¦è¿è¡Œå°±æ˜¯è¿›ç¨‹ï¼›è¿›ç¨‹â€”â€”èµ„æºåˆ†é…çš„æœ€å°å•ä½ã€‚</p>\n<p>çº¿ç¨‹ï¼šç³»ç»Ÿåˆ†é…å¤„ç†å™¨æ—¶é—´èµ„æºçš„åŸºæœ¬å•å…ƒï¼Œæˆ–è€…è¯´è¿›ç¨‹ä¹‹å†…ç‹¬ç«‹æ‰§è¡Œçš„ä¸€ä¸ªå•å…ƒæ‰§è¡Œæµã€‚çº¿ç¨‹â€”â€”ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚</p>\n<h2 id=\"2-æ·±å…¥ç†è§£ï¼š\"><a href=\"#2-æ·±å…¥ç†è§£ï¼š\" class=\"headerlink\" title=\"2. æ·±å…¥ç†è§£ï¼š\"></a>2. æ·±å…¥ç†è§£ï¼š</h2><p><img data-src=\"https://user-gold-cdn.xitu.io/2019/3/21/1699ecde3bb5683b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<h3 id=\"2-1-è¿›ç¨‹-çº¿ç¨‹-å†…å­˜-æ–‡ä»¶-ç½‘ç»œå¥æŸ„\"><a href=\"#2-1-è¿›ç¨‹-çº¿ç¨‹-å†…å­˜-æ–‡ä»¶-ç½‘ç»œå¥æŸ„\" class=\"headerlink\" title=\"2.1 è¿›ç¨‹(çº¿ç¨‹+å†…å­˜+æ–‡ä»¶/ç½‘ç»œå¥æŸ„)\"></a>2.1 è¿›ç¨‹(çº¿ç¨‹+å†…å­˜+æ–‡ä»¶/ç½‘ç»œå¥æŸ„)</h3><p>æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„å›¾ç‰‡è¿›è¡Œè¿›ä¸€æ­¥ç†è§£ï¼š</p>\n<p><strong>â€œå†…å­˜â€ï¼š</strong> æˆ‘ä»¬é€šå¸¸æ‰€ç†è§£çš„å†…å­˜æ˜¯æˆ‘ä»¬æ‰€è§åˆ°çš„(2G/4G/8G/16G)ç‰©ç†å†…å­˜,å®ƒä¸ºä»€ä¹ˆä¼šåœ¨è¿›ç¨‹ä¹‹ä¸­å‘¢ï¼Ÿ å®é™…ä¸Šï¼Œè¿™é‡Œçš„å†…å­˜æ˜¯é€»è¾‘å†…å­˜ã€‚æŒ‡çš„æ˜¯å†…å­˜çš„å¯»å€ç©ºé—´ã€‚æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚ å¦åˆ™çš„è¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬æŠŠæŒ‡é’ˆçš„å€¼æ”¹ä¸€æ”¹å°±æŒ‡å‘å…¶ä»–è¿›ç¨‹çš„å†…å­˜äº†ï¼Œé€šè¿‡è¿™æ ·æˆ‘ä»¬å²‚ä¸æ˜¯å°±å¯ä»¥çœ‹åˆ°å…¶ä»–è¿›ç¨‹ä¸­â€å¾®ä¿¡â€æˆ–è€…æ˜¯â€ç½‘ä¸Šé“¶è¡Œâ€çš„ä¿¡æ¯ï¼Œ è¿™æ ·çš„è¯ï¼Œé‚£æˆ‘ä»¬çš„å¾®ä¿¡èŠå¤©è®°å½•æˆ–è€…æ˜¯é“¶è¡Œè´¦æˆ·çš„ä¿¡æ¯å°±éƒ½è¢«åˆ«äººæ‰¾åˆ°äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå±é™©çš„ä¿¡å·ï¼æ˜¾ç„¶è¿™æ ·æ˜¯ä¸å¯èƒ½çš„ã€‚</p>\n<p><strong>â€œæ–‡ä»¶/ç½‘ç»œå¥æŸ„â€ï¼š</strong> å®ƒä»¬æ˜¯æ‰€æœ‰çš„è¿›ç¨‹æ‰€å…±æœ‰çš„ï¼Œä¾‹å¦‚æ‰“å¼€åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå»æŠ¢åŒä¸€ä¸ªç½‘ç»œçš„ç«¯å£è¿™æ ·çš„æ“ä½œæ˜¯è¢«å…è®¸çš„ã€‚</p>\n<p><strong>â€œçº¿ç¨‹â€ï¼š</strong> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬çš„â€œçº¿ç¨‹â€æœ‰å…³çŸ¥è¯†</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/3/21/1699ecde3ba97f25?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<h3 id=\"2-2-çº¿ç¨‹-æ ˆ-PC-TLS\"><a href=\"#2-2-çº¿ç¨‹-æ ˆ-PC-TLS\" class=\"headerlink\" title=\"2.2 çº¿ç¨‹(æ ˆ+PC+TLS)\"></a>2.2 çº¿ç¨‹(æ ˆ+PC+TLS)</h3><h4 id=\"2-2-1-æ ˆ\"><a href=\"#2-2-1-æ ˆ\" class=\"headerlink\" title=\"2.2.1 æ ˆ:\"></a>2.2.1 æ ˆ:</h4><p>æˆ‘ä»¬é€šå¸¸éƒ½æ˜¯è¯´è°ƒç”¨å †æ ˆï¼Œå…¶å®è¿™é‡Œçš„å †æ˜¯æ²¡æœ‰å«ä¹‰çš„ï¼Œè°ƒç”¨å †æ ˆå°±æ˜¯è°ƒç”¨æ ˆçš„æ„æ€ã€‚ é‚£ä¹ˆæˆ‘ä»¬çš„æ ˆé‡Œé¢æœ‰ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬ä»ä¸»çº¿ç¨‹çš„å…¥å£mainå‡½æ•°ï¼Œä¼šä¸æ–­çš„è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œ æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šæŠŠæ‰€æœ‰çš„å‚æ•°å’Œè¿”å›åœ°å€å‹å…¥åˆ°æ ˆä¸­ã€‚</p>\n<h4 id=\"2-2-2-PCï¼š\"><a href=\"#2-2-2-PCï¼š\" class=\"headerlink\" title=\"2.2.2 PCï¼š\"></a>2.2.2 PCï¼š</h4><p>Program Counter ç¨‹åºè®¡æ•°å™¨ï¼Œæ“ä½œç³»ç»ŸçœŸæ­£è¿è¡Œçš„æ˜¯ä¸€ä¸ªä¸ªçš„çº¿ç¨‹ï¼Œ è€Œæˆ‘ä»¬çš„è¿›ç¨‹åªæ˜¯å®ƒçš„ä¸€ä¸ªå®¹å™¨ã€‚PCå°±æ˜¯æŒ‡å‘å½“å‰çš„æŒ‡ä»¤ï¼Œè€Œè¿™ä¸ªæŒ‡ä»¤æ˜¯æ”¾åœ¨å†…å­˜ä¸­ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸²è‡ªå·±çš„æŒ‡é’ˆï¼Œå»æŒ‡å‘è‡ªå·±å½“å‰æ‰€åœ¨å†…å­˜çš„æŒ‡é’ˆã€‚ è®¡ç®—æœºç»å¤§éƒ¨åˆ†æ˜¯å­˜å‚¨ç¨‹åºæ€§çš„ï¼Œè¯´çš„å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®å’Œç¨‹åºæ˜¯å­˜å‚¨åœ¨åŒä¸€ç‰‡å†…å­˜é‡Œçš„ è¿™ä¸ªå†…å­˜ä¸­æ—¢æœ‰æˆ‘ä»¬çš„æ•°æ®å˜é‡åˆæœ‰æˆ‘ä»¬çš„ç¨‹åºã€‚æ‰€ä»¥æˆ‘ä»¬çš„PCæŒ‡é’ˆå°±æ˜¯æŒ‡å‘æˆ‘ä»¬çš„å†…å­˜çš„ã€‚</p>\n<h5 id=\"2-2-2-1-ç¼“å†²åŒºæº¢å‡º\"><a href=\"#2-2-2-1-ç¼“å†²åŒºæº¢å‡º\" class=\"headerlink\" title=\"2.2.2.1 ç¼“å†²åŒºæº¢å‡º\"></a>2.2.2.1 ç¼“å†²åŒºæº¢å‡º</h5><p>ä¾‹å¦‚æˆ‘ä»¬ç»å¸¸å¬åˆ°ä¸€ä¸ªæ¼æ´ï¼š<strong>ç¼“å†²åŒºæº¢å‡º</strong> è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ ä¾‹å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸ªåœ°æ–¹è¦è¾“å…¥ç”¨æˆ·åï¼Œæœ¬æ¥æ˜¯ç”¨æ¥å­˜æ•°æ®çš„åœ°æ–¹ã€‚ ç„¶åé»‘å®¢æŠŠæ•°æ®è¾“å…¥çš„ç‰¹åˆ«é•¿ã€‚è¿™ä¸ªé•¿åº¦è¶…å‡ºäº†æˆ‘ä»¬ç»™æ•°æ®å­˜å‚¨çš„å†…å­˜åŒºï¼Œè¿™æ—¶å€™è·‘åˆ°äº† æˆ‘ä»¬ç»™ç¨‹åºåˆ†é…çš„ä¸€éƒ¨åˆ†å†…å­˜ä¸­ã€‚é»‘å®¢å°±å¯ä»¥é€šè¿‡è¿™ç§åŠæ³•å°†ä»–æ‰€è¦è¿è¡Œçš„ä»£ç  å†™å…¥åˆ°ç”¨æˆ·åæ¡†ä¸­ï¼Œæ¥æ¤å…¥è¿›æ¥ã€‚æˆ‘ä»¬çš„è§£å†³æ–¹æ³•å°±æ˜¯ï¼Œç”¨ç”¨æˆ·åçš„é•¿åº¦æ¥é™åˆ¶ä¸è¦è¶…è¿‡ ç”¨æˆ·åçš„ç¼“å†²åŒºçš„å¤§å°æ¥è§£å†³ã€‚</p>\n<h4 id=\"2-3-TLS\"><a href=\"#2-3-TLS\" class=\"headerlink\" title=\"2.3 TLS:\"></a>2.3 TLS:</h4><p>å…¨ç§°ï¼šthread local storage ä¹‹å‰æˆ‘ä»¬çœ‹åˆ°æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æƒ³ï¼Œæˆ‘ä»¬çš„çº¿ç¨‹æœ‰æ²¡æœ‰ä¸€å—ç‹¬ç«‹çš„å†…å­˜å‘¢?ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œå°±æ˜¯TLSã€‚ å¯ä»¥ç”¨æ¥å­˜å‚¨æˆ‘ä»¬çº¿ç¨‹æ‰€ç‹¬æœ‰çš„æ•°æ®ã€‚ å¯ä»¥çœ‹åˆ°ï¼šçº¿ç¨‹æ‰æ˜¯æˆ‘ä»¬æ“ä½œç³»ç»Ÿæ‰€çœŸæ­£å»è¿è¡Œçš„ï¼Œè€Œè¿›ç¨‹å‘¢ï¼Œåˆ™æ˜¯åƒå®¹å™¨ä¸€æ ·ä»–æŠŠéœ€è¦çš„ä¸€äº›ä¸œè¥¿æ”¾åœ¨äº†ä¸€èµ·ï¼Œè€ŒæŠŠä¸éœ€è¦çš„ä¸œè¥¿åšäº†ä¸€å±‚éš”ç¦»ï¼Œè¿›è¡Œéš”ç¦»å¼€æ¥ã€‚</p>\n<h3 id=\"3-å°ç»“ï¼š\"><a href=\"#3-å°ç»“ï¼š\" class=\"headerlink\" title=\"3.å°ç»“ï¼š\"></a>3.å°ç»“ï¼š</h3><p>1.è¿›ç¨‹è¦åˆ†é…ä¸€å¤§éƒ¨åˆ†çš„å†…å­˜ï¼Œè€Œçº¿ç¨‹åªéœ€è¦åˆ†é…ä¸€éƒ¨åˆ†æ ˆå°±å¯ä»¥äº†. 2.ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹. 3.è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚ 4.ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¦ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œ.</p>\n<h1 id=\"2-è¿›ç¨‹é—´é€šä¿¡\"><a href=\"#2-è¿›ç¨‹é—´é€šä¿¡\" class=\"headerlink\" title=\"2.è¿›ç¨‹é—´é€šä¿¡\"></a>2.è¿›ç¨‹é—´é€šä¿¡</h1><h2 id=\"ä¸€ã€è¿›ç¨‹é—´é€šä¿¡çš„æ¦‚å¿µ\"><a href=\"#ä¸€ã€è¿›ç¨‹é—´é€šä¿¡çš„æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸€ã€è¿›ç¨‹é—´é€šä¿¡çš„æ¦‚å¿µ\"></a>ä¸€ã€è¿›ç¨‹é—´é€šä¿¡çš„æ¦‚å¿µ</h2><p>æ¯ä¸ªè¿›ç¨‹å„è‡ªæœ‰ä¸åŒçš„ç”¨æˆ·åœ°å€ç©ºé—´ï¼Œä»»ä½•ä¸€ä¸ªè¿›ç¨‹çš„å…¨å±€å˜é‡åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­éƒ½çœ‹ä¸åˆ°ï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´è¦äº¤æ¢æ•°æ®å¿…é¡»é€šè¿‡å†…æ ¸ï¼Œåœ¨å†…æ ¸ä¸­å¼€è¾Ÿä¸€å—ç¼“å†²åŒºï¼Œè¿›ç¨‹1æŠŠæ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹2å†ä»å†…æ ¸ç¼“å†²åŒºæŠŠæ•°æ®è¯»èµ°ï¼Œå†…æ ¸æä¾›çš„è¿™ç§æœºåˆ¶ç§°ä¸º<strong>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼ŒInterProcess Communicationï¼‰</strong></p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-76c95f147203c797.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/222/format/webp\" alt=\"img\"></p>\n<p>è¿›ç¨‹é—´é€šä¿¡æ¨¡å‹</p>\n<h2 id=\"äºŒã€è¿›ç¨‹é—´é€šä¿¡çš„7ç§æ–¹å¼\"><a href=\"#äºŒã€è¿›ç¨‹é—´é€šä¿¡çš„7ç§æ–¹å¼\" class=\"headerlink\" title=\"äºŒã€è¿›ç¨‹é—´é€šä¿¡çš„7ç§æ–¹å¼\"></a>äºŒã€è¿›ç¨‹é—´é€šä¿¡çš„7ç§æ–¹å¼</h2><p><strong>ç¬¬ä¸€ç±»ï¼šä¼ ç»Ÿçš„Unixé€šä¿¡æœºåˆ¶</strong><br> <strong>1. ç®¡é“/åŒ¿åç®¡é“(pipe)</strong></p>\n<ul>\n<li><p>ç®¡é“æ˜¯åŠåŒå·¥çš„ï¼Œæ•°æ®åªèƒ½å‘ä¸€ä¸ªæ–¹å‘æµåŠ¨ï¼›éœ€è¦åŒæ–¹é€šä¿¡æ—¶ï¼Œéœ€è¦å»ºç«‹èµ·ä¸¤ä¸ªç®¡é“ã€‚</p>\n</li>\n<li><p>åªèƒ½ç”¨äºçˆ¶å­è¿›ç¨‹æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´(å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹);</p>\n</li>\n<li><p>å•ç‹¬æ„æˆä¸€ç§ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼šç®¡é“å¯¹äºç®¡é“ä¸¤ç«¯çš„è¿›ç¨‹è€Œè¨€ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†å®ƒä¸æ˜¯æ™®é€šçš„æ–‡ä»¶ï¼Œå®ƒä¸å±äºæŸç§æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯è‡ªç«‹é—¨æˆ·ï¼Œå•ç‹¬æ„æˆä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”åªå­˜åœ¨ä¸å†…å­˜ä¸­ã€‚</p>\n</li>\n<li><p>æ•°æ®çš„è¯»å‡ºå’Œå†™å…¥ï¼šä¸€ä¸ªè¿›ç¨‹å‘ç®¡é“ä¸­å†™çš„å†…å®¹è¢«ç®¡é“å¦ä¸€ç«¯çš„è¿›ç¨‹è¯»å‡ºã€‚å†™å…¥çš„å†…å®¹æ¯æ¬¡éƒ½æ·»åŠ åœ¨ç®¡é“ç¼“å†²åŒºçš„æœ«å°¾ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½æ˜¯ä»ç¼“å†²åŒºçš„å¤´éƒ¨è¯»å‡ºæ•°æ®ã€‚</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-05378521a7b41af4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/228/format/webp\" alt=\"img\"></p>\n<p>è¿›ç¨‹é—´ç®¡é“é€šä¿¡æ¨¡å‹</p>\n</li>\n</ul>\n<p><strong>ç®¡é“çš„å®è´¨ï¼š</strong><br> ç®¡é“çš„å®è´¨æ˜¯ä¸€ä¸ªå†…æ ¸ç¼“å†²åŒºï¼Œè¿›ç¨‹ä»¥å…ˆè¿›å…ˆå‡ºçš„æ–¹å¼ä»ç¼“å†²åŒºå­˜å–æ•°æ®ï¼Œç®¡é“ä¸€ç«¯çš„è¿›ç¨‹é¡ºåºçš„å°†æ•°æ®å†™å…¥ç¼“å†²åŒºï¼Œå¦ä¸€ç«¯çš„è¿›ç¨‹åˆ™é¡ºåºçš„è¯»å‡ºæ•°æ®ã€‚<br> è¯¥ç¼“å†²åŒºå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—ï¼Œè¯»å’Œå†™çš„ä½ç½®éƒ½æ˜¯è‡ªåŠ¨å¢é•¿çš„ï¼Œä¸èƒ½éšæ„æ”¹å˜ï¼Œä¸€ä¸ªæ•°æ®åªèƒ½è¢«è¯»ä¸€æ¬¡ï¼Œè¯»å‡ºæ¥ä»¥ååœ¨ç¼“å†²åŒºå°±ä¸å¤å­˜åœ¨äº†ã€‚<br> å½“ç¼“å†²åŒºè¯»ç©ºæˆ–è€…å†™æ»¡æ—¶ï¼Œæœ‰ä¸€å®šçš„è§„åˆ™æ§åˆ¶ç›¸åº”çš„è¯»è¿›ç¨‹æˆ–è€…å†™è¿›ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå½“ç©ºçš„ç¼“å†²åŒºæœ‰æ–°æ•°æ®å†™å…¥æˆ–è€…æ»¡çš„ç¼“å†²åŒºæœ‰æ•°æ®è¯»å‡ºæ¥æ—¶ï¼Œå°±å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ç»§ç»­è¯»å†™ã€‚</p>\n<p><strong>ç®¡é“çš„å±€é™ï¼š</strong><br> ç®¡é“çš„ä¸»è¦å±€é™æ€§æ­£ä½“ç°åœ¨å®ƒçš„ç‰¹ç‚¹ä¸Šï¼š</p>\n<ul>\n<li>åªæ”¯æŒå•å‘æ•°æ®æµï¼›</li>\n<li>åªèƒ½ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ä¹‹é—´ï¼›</li>\n<li>æ²¡æœ‰åå­—ï¼›</li>\n<li>ç®¡é“çš„ç¼“å†²åŒºæ˜¯æœ‰é™çš„ï¼ˆç®¡é“åˆ¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œåœ¨ç®¡é“åˆ›å»ºæ—¶ï¼Œä¸ºç¼“å†²åŒºåˆ†é…ä¸€ä¸ªé¡µé¢å¤§å°ï¼‰ï¼›</li>\n<li>ç®¡é“æ‰€ä¼ é€çš„æ˜¯æ— æ ¼å¼å­—èŠ‚æµï¼Œè¿™å°±è¦æ±‚ç®¡é“çš„è¯»å‡ºæ–¹å’Œå†™å…¥æ–¹å¿…é¡»äº‹å…ˆçº¦å®šå¥½æ•°æ®çš„æ ¼å¼ï¼Œæ¯”å¦‚å¤šå°‘å­—èŠ‚ç®—ä½œä¸€ä¸ªæ¶ˆæ¯ï¼ˆæˆ–å‘½ä»¤ã€æˆ–è®°å½•ï¼‰ç­‰ç­‰ï¼›</li>\n</ul>\n<p><strong>2. æœ‰åç®¡é“(FIFO)</strong><br> åŒ¿åç®¡é“ï¼Œç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“(FIFO)ã€‚<br> æœ‰åç®¡é“ä¸åŒäºåŒ¿åç®¡é“ä¹‹å¤„åœ¨äºå®ƒæä¾›äº†ä¸€ä¸ªè·¯å¾„åä¸ä¹‹å…³è”ï¼Œ<strong>ä»¥æœ‰åç®¡é“çš„æ–‡ä»¶å½¢å¼å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­</strong>ï¼Œè¿™æ ·ï¼Œ<strong>å³ä½¿ä¸æœ‰åç®¡é“çš„åˆ›å»ºè¿›ç¨‹ä¸å­˜åœ¨äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ï¼Œåªè¦å¯ä»¥è®¿é—®è¯¥è·¯å¾„ï¼Œå°±èƒ½å¤Ÿå½¼æ­¤é€šè¿‡æœ‰åç®¡é“ç›¸äº’é€šä¿¡</strong>ï¼Œå› æ­¤ï¼Œé€šè¿‡æœ‰åç®¡é“ä¸ç›¸å…³çš„è¿›ç¨‹ä¹Ÿèƒ½äº¤æ¢æ•°æ®ã€‚å€¼çš„æ³¨æ„çš„æ˜¯ï¼Œæœ‰åç®¡é“ä¸¥æ ¼éµå¾ª<strong>å…ˆè¿›å…ˆå‡º(first in first out)</strong>,å¯¹åŒ¿åç®¡é“åŠæœ‰åç®¡é“çš„è¯»æ€»æ˜¯ä»å¼€å§‹å¤„è¿”å›æ•°æ®ï¼Œå¯¹å®ƒä»¬çš„å†™åˆ™æŠŠæ•°æ®æ·»åŠ åˆ°æœ«å°¾ã€‚å®ƒä»¬ä¸æ”¯æŒè¯¸å¦‚lseek()ç­‰æ–‡ä»¶å®šä½æ“ä½œã€‚<strong>æœ‰åç®¡é“çš„åå­—å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå†…å®¹å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚</strong></p>\n<blockquote>\n<p><strong>åŒ¿åç®¡é“å’Œæœ‰åç®¡é“æ€»ç»“ï¼š</strong><br> ï¼ˆ1ï¼‰ç®¡é“æ˜¯ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ï¼Œåœ¨æ»¡è¶³å…ˆå…¥å…ˆå‡ºçš„åŸåˆ™æ¡ä»¶ä¸‹å¯ä»¥è¿›è¡Œè¯»å†™ï¼Œä½†ä¸èƒ½è¿›è¡Œå®šä½è¯»å†™ã€‚<br> ï¼ˆ2ï¼‰åŒ¿åç®¡é“æ˜¯å•å‘çš„ï¼Œåªèƒ½åœ¨æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ï¼›æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ã€‚<br> ï¼ˆ3ï¼‰<strong>æ— åç®¡é“é˜»å¡é—®é¢˜ï¼š</strong>æ— åç®¡é“æ— éœ€æ˜¾ç¤ºæ‰“å¼€ï¼Œåˆ›å»ºæ—¶ç›´æ¥è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨è¯»å†™æ—¶éœ€è¦ç¡®å®šå¯¹æ–¹çš„å­˜åœ¨ï¼Œå¦åˆ™å°†é€€å‡ºã€‚å¦‚æœå½“å‰è¿›ç¨‹å‘æ— åç®¡é“çš„ä¸€ç«¯å†™æ•°æ®ï¼Œå¿…é¡»ç¡®å®šå¦ä¸€ç«¯æœ‰æŸä¸€è¿›ç¨‹ã€‚å¦‚æœå†™å…¥æ— åç®¡é“çš„æ•°æ®è¶…è¿‡å…¶æœ€å¤§å€¼ï¼Œå†™æ“ä½œå°†é˜»å¡ï¼Œå¦‚æœç®¡é“ä¸­æ²¡æœ‰æ•°æ®ï¼Œè¯»æ“ä½œå°†é˜»å¡ï¼Œå¦‚æœç®¡é“å‘ç°å¦ä¸€ç«¯æ–­å¼€ï¼Œå°†è‡ªåŠ¨é€€å‡ºã€‚<br> ï¼ˆ4ï¼‰<strong>æœ‰åç®¡é“é˜»å¡é—®é¢˜ï¼š</strong>æœ‰åç®¡é“åœ¨æ‰“å¼€æ—¶éœ€è¦ç¡®å®å¯¹æ–¹çš„å­˜åœ¨ï¼Œå¦åˆ™å°†é˜»å¡ã€‚å³ä»¥è¯»æ–¹å¼æ‰“å¼€æŸç®¡é“ï¼Œåœ¨æ­¤ä¹‹å‰å¿…é¡»ä¸€ä¸ªè¿›ç¨‹ä»¥å†™æ–¹å¼æ‰“å¼€ç®¡é“ï¼Œå¦åˆ™é˜»å¡ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä»¥è¯»å†™ï¼ˆO_RDWRï¼‰æ¨¡å¼æ‰“å¼€æœ‰åç®¡é“ï¼Œå³å½“å‰è¿›ç¨‹è¯»ï¼Œå½“å‰è¿›ç¨‹å†™ï¼Œä¸ä¼šé˜»å¡ã€‚</p>\n</blockquote>\n<p><a href=\"https://link.jianshu.com/?t=http://blog.chinaunix.net/uid-26833883-id-3227144.html\">å»¶ä¼¸é˜…è¯»ï¼šè¯¥åšå®¢æœ‰åŒ¿åç®¡é“å’Œæœ‰åç®¡é“çš„Cè¯­è¨€å®è·µ</a></p>\n<p><strong>3. ä¿¡å·(Signal)</strong></p>\n<ul>\n<li>ä¿¡å·æ˜¯Linuxç³»ç»Ÿä¸­ç”¨äºè¿›ç¨‹é—´äº’ç›¸é€šä¿¡æˆ–è€…æ“ä½œçš„ä¸€ç§æœºåˆ¶ï¼Œä¿¡å·å¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‘ç»™æŸä¸€è¿›ç¨‹ï¼Œè€Œæ— éœ€çŸ¥é“è¯¥è¿›ç¨‹çš„çŠ¶æ€ã€‚</li>\n<li>å¦‚æœè¯¥è¿›ç¨‹å½“å‰å¹¶æœªå¤„äºæ‰§è¡ŒçŠ¶æ€ï¼Œåˆ™è¯¥ä¿¡å·å°±æœ‰å†…æ ¸ä¿å­˜èµ·æ¥ï¼ŒçŸ¥é“è¯¥è¿›ç¨‹å›å¤æ‰§è¡Œå¹¶ä¼ é€’ç»™å®ƒä¸ºæ­¢ã€‚</li>\n<li>å¦‚æœä¸€ä¸ªä¿¡å·è¢«è¿›ç¨‹è®¾ç½®ä¸ºé˜»å¡ï¼Œåˆ™è¯¥ä¿¡å·çš„ä¼ é€’è¢«å»¶è¿Ÿï¼Œç›´åˆ°å…¶é˜»å¡è¢«å–æ¶ˆæ˜¯æ‰è¢«ä¼ é€’ç»™è¿›ç¨‹ã€‚</li>\n</ul>\n<blockquote>\n<p><strong>Linuxç³»ç»Ÿä¸­å¸¸ç”¨ä¿¡å·ï¼š</strong><br> ï¼ˆ1ï¼‰<strong>SIGHUPï¼š</strong>ç”¨æˆ·ä»ç»ˆç«¯æ³¨é”€ï¼Œæ‰€æœ‰å·²å¯åŠ¨è¿›ç¨‹éƒ½å°†æ”¶åˆ°è¯¥è¿›ç¨‹ã€‚ç³»ç»Ÿç¼ºçœçŠ¶æ€ä¸‹å¯¹è¯¥ä¿¡å·çš„å¤„ç†æ˜¯ç»ˆæ­¢è¿›ç¨‹ã€‚<br> ï¼ˆ2ï¼‰<strong>SIGINTï¼š</strong>ç¨‹åºç»ˆæ­¢ä¿¡å·ã€‚ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŒ‰<code>Ctrl+C</code>é”®å°†äº§ç”Ÿè¯¥ä¿¡å·ã€‚<br> ï¼ˆ3ï¼‰<strong>SIGQUITï¼š</strong>ç¨‹åºé€€å‡ºä¿¡å·ã€‚ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŒ‰<code>Ctrl+\\\\</code>é”®å°†äº§ç”Ÿè¯¥ä¿¡å·ã€‚<br> ï¼ˆ4ï¼‰<strong>SIGBUSå’ŒSIGSEGVï¼š</strong>è¿›ç¨‹è®¿é—®éæ³•åœ°å€ã€‚<br> ï¼ˆ5ï¼‰<strong>SIGFPEï¼š</strong>è¿ç®—ä¸­å‡ºç°è‡´å‘½é”™è¯¯ï¼Œå¦‚é™¤é›¶æ“ä½œã€æ•°æ®æº¢å‡ºç­‰ã€‚<br> ï¼ˆ6ï¼‰<strong>SIGKILLï¼š</strong>ç”¨æˆ·ç»ˆæ­¢è¿›ç¨‹æ‰§è¡Œä¿¡å·ã€‚shellä¸‹æ‰§è¡Œ<code>kill -9</code>å‘é€è¯¥ä¿¡å·ã€‚<br> ï¼ˆ7ï¼‰<strong>SIGTERMï¼š</strong>ç»“æŸè¿›ç¨‹ä¿¡å·ã€‚shellä¸‹æ‰§è¡Œ<code>kill è¿›ç¨‹pid</code>å‘é€è¯¥ä¿¡å·ã€‚<br> ï¼ˆ8ï¼‰<strong>SIGALRMï¼š</strong>å®šæ—¶å™¨ä¿¡å·ã€‚<br> ï¼ˆ9ï¼‰<strong>SIGCLDï¼š</strong>å­è¿›ç¨‹é€€å‡ºä¿¡å·ã€‚å¦‚æœå…¶çˆ¶è¿›ç¨‹æ²¡æœ‰å¿½ç•¥è¯¥ä¿¡å·ä¹Ÿæ²¡æœ‰å¤„ç†è¯¥ä¿¡å·ï¼Œåˆ™å­è¿›ç¨‹é€€å‡ºåå°†å½¢æˆåƒµå°¸è¿›ç¨‹ã€‚</p>\n</blockquote>\n<p><strong>ä¿¡å·æ¥æº</strong><br> ä¿¡å·æ˜¯è½¯ä»¶å±‚æ¬¡ä¸Šå¯¹ä¸­æ–­æœºåˆ¶çš„ä¸€ç§æ¨¡æ‹Ÿï¼Œæ˜¯ä¸€ç§å¼‚æ­¥é€šä¿¡æ–¹å¼ï¼Œï¼Œä¿¡å·å¯ä»¥åœ¨ç”¨æˆ·ç©ºé—´è¿›ç¨‹å’Œå†…æ ¸ä¹‹é—´ç›´æ¥äº¤äº’ï¼Œå†…æ ¸å¯ä»¥åˆ©ç”¨ä¿¡å·æ¥é€šçŸ¥ç”¨æˆ·ç©ºé—´çš„è¿›ç¨‹å‘ç”Ÿäº†å“ªäº›ç³»ç»Ÿäº‹ä»¶ï¼Œä¿¡å·äº‹ä»¶ä¸»è¦æœ‰ä¸¤ä¸ªæ¥æºï¼š</p>\n<ul>\n<li>ç¡¬ä»¶æ¥æºï¼šç”¨æˆ·æŒ‰é”®è¾“å…¥<code>Ctrl+C</code>é€€å‡ºã€ç¡¬ä»¶å¼‚å¸¸å¦‚æ— æ•ˆçš„å­˜å‚¨è®¿é—®ç­‰ã€‚</li>\n<li>è½¯ä»¶ç»ˆæ­¢ï¼šç»ˆæ­¢è¿›ç¨‹ä¿¡å·ã€å…¶ä»–è¿›ç¨‹è°ƒç”¨killå‡½æ•°ã€è½¯ä»¶å¼‚å¸¸äº§ç”Ÿä¿¡å·ã€‚</li>\n</ul>\n<p><strong>ä¿¡å·ç”Ÿå‘½å‘¨æœŸå’Œå¤„ç†æµç¨‹</strong><br> ï¼ˆ1ï¼‰ä¿¡å·è¢«æŸä¸ªè¿›ç¨‹äº§ç”Ÿï¼Œå¹¶è®¾ç½®æ­¤ä¿¡å·ä¼ é€’çš„å¯¹è±¡ï¼ˆä¸€èˆ¬ä¸ºå¯¹åº”è¿›ç¨‹çš„pidï¼‰ï¼Œç„¶åä¼ é€’ç»™æ“ä½œç³»ç»Ÿï¼›<br> ï¼ˆ2ï¼‰æ“ä½œç³»ç»Ÿæ ¹æ®æ¥æ”¶è¿›ç¨‹çš„è®¾ç½®ï¼ˆæ˜¯å¦é˜»å¡ï¼‰è€Œé€‰æ‹©æ€§çš„å‘é€ç»™æ¥æ”¶è€…ï¼Œå¦‚æœæ¥æ”¶è€…é˜»å¡è¯¥ä¿¡å·ï¼ˆä¸”è¯¥ä¿¡å·æ˜¯å¯ä»¥é˜»å¡çš„ï¼‰ï¼Œæ“ä½œç³»ç»Ÿå°†æš‚æ—¶ä¿ç•™è¯¥ä¿¡å·ï¼Œè€Œä¸ä¼ é€’ï¼Œç›´åˆ°è¯¥è¿›ç¨‹è§£é™¤äº†å¯¹æ­¤ä¿¡å·çš„é˜»å¡ï¼ˆå¦‚æœå¯¹åº”è¿›ç¨‹å·²ç»é€€å‡ºï¼Œåˆ™ä¸¢å¼ƒæ­¤ä¿¡å·ï¼‰ï¼Œå¦‚æœå¯¹åº”è¿›ç¨‹æ²¡æœ‰é˜»å¡ï¼Œæ“ä½œç³»ç»Ÿå°†ä¼ é€’æ­¤ä¿¡å·ã€‚<br> ï¼ˆ3ï¼‰ç›®çš„è¿›ç¨‹æ¥æ”¶åˆ°æ­¤ä¿¡å·åï¼Œå°†æ ¹æ®å½“å‰è¿›ç¨‹å¯¹æ­¤ä¿¡å·è®¾ç½®çš„é¢„å¤„ç†æ–¹å¼ï¼Œæš‚æ—¶ç»ˆæ­¢å½“å‰ä»£ç çš„æ‰§è¡Œï¼Œä¿æŠ¤ä¸Šä¸‹æ–‡ï¼ˆä¸»è¦åŒ…æ‹¬ä¸´æ—¶å¯„å­˜å™¨æ•°æ®ï¼Œå½“å‰ç¨‹åºä½ç½®ä»¥åŠå½“å‰CPUçš„çŠ¶æ€ï¼‰ã€è½¬è€Œæ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åºï¼Œæ‰§è¡Œå®Œæˆååœ¨å›å¤åˆ°ä¸­æ–­çš„ä½ç½®ã€‚å½“ç„¶ï¼Œå¯¹äºæŠ¢å å¼å†…æ ¸ï¼Œåœ¨ä¸­æ–­è¿”å›æ—¶è¿˜å°†å¼•å‘æ–°çš„è°ƒåº¦ã€‚</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-3eed8cca67aa9f55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/889/format/webp\" alt=\"img\"></p>\n<p>ä¿¡å·çš„ç”Ÿå‘½å‘¨æœŸ</p>\n<p><strong>4. æ¶ˆæ¯(Message)é˜Ÿåˆ—</strong></p>\n<ul>\n<li>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯å­˜æ”¾åœ¨å†…æ ¸ä¸­çš„æ¶ˆæ¯é“¾è¡¨ï¼Œæ¯ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦è¡¨ç¤ºã€‚</li>\n<li>ä¸ç®¡é“ï¼ˆæ— åç®¡é“ï¼šåªå­˜åœ¨äºå†…å­˜ä¸­çš„æ–‡ä»¶ï¼›å‘½åç®¡é“ï¼šå­˜åœ¨äºå®é™…çš„ç£ç›˜ä»‹è´¨æˆ–è€…æ–‡ä»¶ç³»ç»Ÿï¼‰ä¸åŒçš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—å­˜æ”¾åœ¨å†…æ ¸ä¸­ï¼Œåªæœ‰åœ¨å†…æ ¸é‡å¯(å³ï¼Œæ“ä½œç³»ç»Ÿé‡å¯)æˆ–è€…æ˜¾ç¤ºåœ°åˆ é™¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œè¯¥æ¶ˆæ¯é˜Ÿåˆ—æ‰ä¼šè¢«çœŸæ­£çš„åˆ é™¤ã€‚</li>\n<li>å¦å¤–ä¸ç®¡é“ä¸åŒçš„æ˜¯ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åœ¨æŸä¸ªè¿›ç¨‹å¾€ä¸€ä¸ªé˜Ÿåˆ—å†™å…¥æ¶ˆæ¯ä¹‹å‰ï¼Œå¹¶ä¸éœ€è¦å¦å¤–æŸä¸ªè¿›ç¨‹åœ¨è¯¥é˜Ÿåˆ—ä¸Šç­‰å¾…æ¶ˆæ¯çš„åˆ°è¾¾ã€‚<a href=\"https://link.jianshu.com/?t=http://blog.csdn.net/yang_yulei/article/details/19772649\">å»¶ä¼¸é˜…è¯»ï¼šæ¶ˆæ¯é˜Ÿåˆ—Cè¯­è¨€çš„å®è·µ</a></li>\n</ul>\n<blockquote>\n<p><strong>æ¶ˆæ¯é˜Ÿåˆ—ç‰¹ç‚¹æ€»ç»“ï¼š</strong><br> ï¼ˆ1ï¼‰æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨,å…·æœ‰ç‰¹å®šçš„æ ¼å¼,å­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†.<br> ï¼ˆ2ï¼‰æ¶ˆæ¯é˜Ÿåˆ—å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹å‘å®ƒå†™å…¥ä¸è¯»å–æ¶ˆæ¯.<br> ï¼ˆ3ï¼‰ç®¡é“å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„é€šä¿¡æ•°æ®éƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚<br> ï¼ˆ4ï¼‰æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°æ¶ˆæ¯çš„éšæœºæŸ¥è¯¢,æ¶ˆæ¯ä¸ä¸€å®šè¦ä»¥å…ˆè¿›å…ˆå‡ºçš„æ¬¡åºè¯»å–,ä¹Ÿå¯ä»¥æŒ‰æ¶ˆæ¯çš„ç±»å‹è¯»å–.æ¯”FIFOæ›´æœ‰ä¼˜åŠ¿ã€‚<br> ï¼ˆ5ï¼‰æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­— èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºã€‚<br> ï¼ˆ6ï¼‰ç›®å‰ä¸»è¦æœ‰ä¸¤ç§ç±»å‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼šPOSIXæ¶ˆæ¯é˜Ÿåˆ—ä»¥åŠSystem Væ¶ˆæ¯é˜Ÿåˆ—ï¼Œç³»ç»ŸVæ¶ˆæ¯é˜Ÿåˆ—ç›®å‰è¢«å¤§é‡ä½¿ç”¨ã€‚ç³»ç»ŸVæ¶ˆæ¯é˜Ÿåˆ—æ˜¯éšå†…æ ¸æŒç»­çš„ï¼Œåªæœ‰åœ¨å†…æ ¸é‡èµ·æˆ–è€…äººå·¥åˆ é™¤æ—¶ï¼Œè¯¥æ¶ˆæ¯é˜Ÿåˆ—æ‰ä¼šè¢«åˆ é™¤ã€‚</p>\n</blockquote>\n<p><strong>5. å…±äº«å†…å­˜(share memory)</strong></p>\n<ul>\n<li><p>ä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥å¯ä»¥ç›´æ¥è¯»å†™åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ˜¯æœ€å¿«çš„å¯ç”¨IPCå½¢å¼ã€‚æ˜¯é’ˆå¯¹å…¶ä»–é€šä¿¡æœºåˆ¶è¿è¡Œæ•ˆç‡è¾ƒä½è€Œè®¾è®¡çš„ã€‚</p>\n</li>\n<li><p>ä¸ºäº†åœ¨å¤šä¸ªè¿›ç¨‹é—´äº¤æ¢ä¿¡æ¯ï¼Œå†…æ ¸ä¸“é—¨ç•™å‡ºäº†ä¸€å—å†…å­˜åŒºï¼Œå¯ä»¥ç”±éœ€è¦è®¿é—®çš„è¿›ç¨‹å°†å…¶æ˜ å°„åˆ°è‡ªå·±çš„ç§æœ‰åœ°å€ç©ºé—´ã€‚è¿›ç¨‹å°±å¯ä»¥ç›´æ¥è¯»å†™è¿™ä¸€å—å†…å­˜è€Œä¸éœ€è¦è¿›è¡Œæ•°æ®çš„æ‹·è´ï¼Œä»è€Œå¤§å¤§æé«˜æ•ˆç‡ã€‚</p>\n</li>\n<li><p>ç”±äºå¤šä¸ªè¿›ç¨‹å…±äº«ä¸€æ®µå†…å­˜ï¼Œå› æ­¤éœ€è¦ä¾é æŸç§åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡ï¼‰æ¥è¾¾åˆ°è¿›ç¨‹é—´çš„åŒæ­¥åŠäº’æ–¥ã€‚</p>\n<p>å»¶ä¼¸é˜…è¯»ï¼šLinuxæ”¯æŒçš„ä¸»è¦ä¸‰ç§å…±äº«å†…å­˜æ–¹å¼ï¼šmmap()ç³»ç»Ÿè°ƒç”¨ã€Posixå…±äº«å†…å­˜ï¼Œä»¥åŠSystem Vå…±äº«å†…å­˜å®è·µ</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-adfde0d80334c1f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/538/format/webp\" alt=\"img\"></p>\n<p>å…±äº«å†…å­˜åŸç†å›¾</p>\n</li>\n</ul>\n<p><strong>6. ä¿¡å·é‡(semaphore)</strong><br> ä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚<br> ä¸ºäº†è·å¾—å…±äº«èµ„æºï¼Œè¿›ç¨‹éœ€è¦æ‰§è¡Œä¸‹åˆ—æ“ä½œï¼š<br> ï¼ˆ1ï¼‰<strong>åˆ›å»ºä¸€ä¸ªä¿¡å·é‡</strong>ï¼šè¿™è¦æ±‚è°ƒç”¨è€…æŒ‡å®šåˆå§‹å€¼ï¼Œå¯¹äºäºŒå€¼ä¿¡å·é‡æ¥è¯´ï¼Œå®ƒé€šå¸¸æ˜¯1ï¼Œä¹Ÿå¯æ˜¯0ã€‚<br> ï¼ˆ2ï¼‰<strong>ç­‰å¾…ä¸€ä¸ªä¿¡å·é‡</strong>ï¼šè¯¥æ“ä½œä¼šæµ‹è¯•è¿™ä¸ªä¿¡å·é‡çš„å€¼ï¼Œå¦‚æœå°äº0ï¼Œå°±é˜»å¡ã€‚ä¹Ÿç§°ä¸ºPæ“ä½œã€‚<br> ï¼ˆ3ï¼‰<strong>æŒ‚å‡ºä¸€ä¸ªä¿¡å·é‡</strong>ï¼šè¯¥æ“ä½œå°†ä¿¡å·é‡çš„å€¼åŠ 1ï¼Œä¹Ÿç§°ä¸ºVæ“ä½œã€‚</p>\n<p>ä¸ºäº†æ­£ç¡®åœ°å®ç°ä¿¡å·é‡ï¼Œä¿¡å·é‡å€¼çš„æµ‹è¯•åŠå‡1æ“ä½œåº”å½“æ˜¯åŸå­æ“ä½œã€‚ä¸ºæ­¤ï¼Œä¿¡å·é‡é€šå¸¸æ˜¯åœ¨å†…æ ¸ä¸­å®ç°çš„ã€‚Linuxç¯å¢ƒä¸­ï¼Œæœ‰ä¸‰ç§ç±»å‹ï¼š<strong>Posixï¼ˆ<a href=\"https://link.jianshu.com/?t=http://baike.baidu.com/link?url=hYEo6ngm9MlqsQHT3h28baIDxEooeSPX6wr_FdGF-F8mf7wDp2xJWIDtQWGEDxthtPNiJtlsw460g1_N0txJYa\">å¯ç§»æ¤æ€§æ“ä½œç³»ç»Ÿæ¥å£</a>ï¼‰æœ‰åä¿¡å·é‡ï¼ˆä½¿ç”¨Posix IPCåå­—æ ‡è¯†ï¼‰</strong>ã€<strong>PosixåŸºäºå†…å­˜çš„ä¿¡å·é‡ï¼ˆå­˜æ”¾åœ¨å…±äº«å†…å­˜åŒºä¸­ï¼‰</strong>ã€<strong>System Vä¿¡å·é‡ï¼ˆåœ¨å†…æ ¸ä¸­ç»´æŠ¤ï¼‰</strong>ã€‚è¿™ä¸‰ç§ä¿¡å·é‡éƒ½å¯ç”¨äºè¿›ç¨‹é—´æˆ–çº¿ç¨‹é—´çš„åŒæ­¥ã€‚</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-376528c40d03717e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/635/format/webp\" alt=\"img\"></p>\n<p>ä¸¤ä¸ªè¿›ç¨‹ä½¿ç”¨ä¸€ä¸ªäºŒå€¼ä¿¡å·é‡</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-a72c8fbe22340031.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/613/format/webp\" alt=\"img\"></p>\n<p>ä¸¤ä¸ªè¿›ç¨‹æ‰€ä»¥ç”¨ä¸€ä¸ªPosixæœ‰åäºŒå€¼ä¿¡å·é‡</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-a1b276fae9db985d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/284/format/webp\" alt=\"img\"></p>\n<p>ä¸€ä¸ªè¿›ç¨‹ä¸¤ä¸ªçº¿ç¨‹å…±äº«åŸºäºå†…å­˜çš„ä¿¡å·é‡</p>\n<blockquote>\n<p><strong>ä¿¡å·é‡ä¸æ™®é€šæ•´å‹å˜é‡çš„åŒºåˆ«ï¼š</strong><br> ï¼ˆ1ï¼‰ä¿¡å·é‡æ˜¯éè´Ÿæ•´å‹å˜é‡ï¼Œé™¤äº†åˆå§‹åŒ–ä¹‹å¤–ï¼Œå®ƒåªèƒ½é€šè¿‡ä¸¤ä¸ªæ ‡å‡†åŸå­æ“ä½œï¼šwait(semap) , signal(semap) ; æ¥è¿›è¡Œè®¿é—®ï¼›<br> ï¼ˆ2ï¼‰æ“ä½œä¹Ÿè¢«æˆä¸ºPVåŸè¯­ï¼ˆPæ¥æºäºè·å…°è¯­proberenâ€æµ‹è¯•â€ï¼ŒVæ¥æºäºè·å…°è¯­verhogenâ€å¢åŠ â€ï¼ŒPè¡¨ç¤ºé€šè¿‡çš„æ„æ€ï¼ŒVè¡¨ç¤ºé‡Šæ”¾çš„æ„æ€ï¼‰ï¼Œè€Œæ™®é€šæ•´å‹å˜é‡åˆ™å¯ä»¥åœ¨ä»»ä½•è¯­å¥å—ä¸­è¢«è®¿é—®ï¼›</p>\n</blockquote>\n<blockquote>\n<p><strong>ä¿¡å·é‡ä¸äº’æ–¥é‡ä¹‹é—´çš„åŒºåˆ«ï¼š</strong><br> ï¼ˆ1ï¼‰äº’æ–¥é‡ç”¨äºçº¿ç¨‹çš„äº’æ–¥ï¼Œä¿¡å·é‡ç”¨äºçº¿ç¨‹çš„åŒæ­¥ã€‚è¿™æ˜¯äº’æ–¥é‡å’Œä¿¡å·é‡çš„æ ¹æœ¬åŒºåˆ«ï¼Œä¹Ÿå°±æ˜¯äº’æ–¥å’ŒåŒæ­¥ä¹‹é—´çš„åŒºåˆ«ã€‚<br> <strong>äº’æ–¥ï¼š</strong>æ˜¯æŒ‡æŸä¸€èµ„æºåŒæ—¶åªå…è®¸ä¸€ä¸ªè®¿é—®è€…å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œå…·æœ‰å”¯ä¸€æ€§å’Œæ’å®ƒæ€§ã€‚ä½†äº’æ–¥æ— æ³•é™åˆ¶è®¿é—®è€…å¯¹èµ„æºçš„è®¿é—®é¡ºåºï¼Œå³è®¿é—®æ˜¯æ— åºçš„ã€‚<br> <strong>åŒæ­¥ï¼š</strong>æ˜¯æŒ‡åœ¨äº’æ–¥çš„åŸºç¡€ä¸Šï¼ˆå¤§å¤šæ•°æƒ…å†µï¼‰ï¼Œé€šè¿‡å…¶å®ƒæœºåˆ¶å®ç°è®¿é—®è€…å¯¹èµ„æºçš„æœ‰åºè®¿é—®ã€‚<br> åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒæ­¥å·²ç»å®ç°äº†äº’æ–¥ï¼Œç‰¹åˆ«æ˜¯æ‰€æœ‰å†™å…¥èµ„æºçš„æƒ…å†µå¿…å®šæ˜¯äº’æ–¥çš„ã€‚å°‘æ•°æƒ…å†µæ˜¯æŒ‡å¯ä»¥å…è®¸å¤šä¸ªè®¿é—®è€…åŒæ—¶è®¿é—®èµ„æº<br> ï¼ˆ2ï¼‰äº’æ–¥é‡å€¼åªèƒ½ä¸º0/1ï¼Œä¿¡å·é‡å€¼å¯ä»¥ä¸ºéè´Ÿæ•´æ•°ã€‚<br> ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäº’æ–¥é‡åªèƒ½ç”¨äºä¸€ä¸ªèµ„æºçš„äº’æ–¥è®¿é—®ï¼Œå®ƒä¸èƒ½å®ç°å¤šä¸ªèµ„æºçš„å¤šçº¿ç¨‹äº’æ–¥é—®é¢˜ã€‚ä¿¡å·é‡å¯ä»¥å®ç°å¤šä¸ªåŒç±»èµ„æºçš„å¤šçº¿ç¨‹äº’æ–¥å’ŒåŒæ­¥ã€‚å½“ä¿¡å·é‡ä¸ºå•å€¼ä¿¡å·é‡æ˜¯ï¼Œä¹Ÿå¯ä»¥å®Œæˆä¸€ä¸ªèµ„æºçš„äº’æ–¥è®¿é—®ã€‚<br> ï¼ˆ3ï¼‰äº’æ–¥é‡çš„åŠ é”å’Œè§£é”å¿…é¡»ç”±åŒä¸€çº¿ç¨‹åˆ†åˆ«å¯¹åº”ä½¿ç”¨ï¼Œä¿¡å·é‡å¯ä»¥ç”±ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°ã€‚</p>\n</blockquote>\n<p><strong>7. å¥—æ¥å­—(socket)</strong><br> å¥—æ¥å­—æ˜¯ä¸€ç§é€šä¿¡æœºåˆ¶ï¼Œå‡­å€Ÿè¿™ç§æœºåˆ¶ï¼Œå®¢æˆ·/æœåŠ¡å™¨ï¼ˆå³è¦è¿›è¡Œé€šä¿¡çš„è¿›ç¨‹ï¼‰ç³»ç»Ÿçš„å¼€å‘å·¥ä½œæ—¢å¯ä»¥åœ¨æœ¬åœ°å•æœºä¸Šè¿›è¡Œï¼Œä¹Ÿå¯ä»¥è·¨ç½‘ç»œè¿›è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è®©ä¸åœ¨åŒä¸€å°è®¡ç®—æœºä½†é€šè¿‡ç½‘ç»œè¿æ¥è®¡ç®—æœºä¸Šçš„è¿›ç¨‹è¿›è¡Œé€šä¿¡ã€‚</p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-2db1deb0115ec4f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/319/format/webp\" alt=\"img\"></p>\n<p>Socketæ˜¯åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´çš„æ¡¥æ¢</p>\n<p>å¥—æ¥å­—æ˜¯æ”¯æŒTCP/IPçš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚</p>\n<p><strong>å¥—æ¥å­—ç‰¹æ€§</strong><br> å¥—æ¥å­—çš„ç‰¹æ€§ç”±3ä¸ªå±æ€§ç¡®å®šï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼šåŸŸã€ç«¯å£å·ã€åè®®ç±»å‹ã€‚<br> <strong>ï¼ˆ1ï¼‰å¥—æ¥å­—çš„åŸŸ</strong><br> å®ƒæŒ‡å®šå¥—æ¥å­—é€šä¿¡ä¸­ä½¿ç”¨çš„ç½‘ç»œä»‹è´¨ï¼Œæœ€å¸¸è§çš„å¥—æ¥å­—åŸŸæœ‰ä¸¤ç§ï¼š<br> <strong>ä¸€æ˜¯AF_INETï¼Œå®ƒæŒ‡çš„æ˜¯Internetç½‘ç»œã€‚</strong>å½“å®¢æˆ·ä½¿ç”¨å¥—æ¥å­—è¿›è¡Œè·¨ç½‘ç»œçš„è¿æ¥æ—¶ï¼Œå®ƒå°±éœ€è¦ç”¨åˆ°æœåŠ¡å™¨è®¡ç®—æœºçš„IPåœ°å€å’Œç«¯å£æ¥æŒ‡å®šä¸€å°è”ç½‘æœºå™¨ä¸Šçš„æŸä¸ªç‰¹å®šæœåŠ¡ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨socketä½œä¸ºé€šä¿¡çš„ç»ˆç‚¹ï¼ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºå¿…é¡»åœ¨å¼€å§‹é€šä¿¡ä¹‹å‰ç»‘å®šä¸€ä¸ªç«¯å£ï¼ŒæœåŠ¡å™¨åœ¨æŒ‡å®šçš„ç«¯å£ç­‰å¾…å®¢æˆ·çš„è¿æ¥ã€‚<br> <strong>å¦ä¸€ä¸ªåŸŸAF_UNIXï¼Œè¡¨ç¤ºUNIXæ–‡ä»¶ç³»ç»Ÿï¼Œ</strong>å®ƒå°±æ˜¯æ–‡ä»¶è¾“å…¥/è¾“å‡ºï¼Œè€Œå®ƒçš„åœ°å€å°±æ˜¯æ–‡ä»¶åã€‚<br> <strong>ï¼ˆ2ï¼‰å¥—æ¥å­—çš„ç«¯å£å·</strong><br> æ¯ä¸€ä¸ªåŸºäºTCP/IPç½‘ç»œé€šè®¯çš„ç¨‹åº(è¿›ç¨‹)éƒ½è¢«èµ‹äºˆäº†å”¯ä¸€çš„ç«¯å£å’Œç«¯å£å·ï¼Œç«¯å£æ˜¯ä¸€ä¸ªä¿¡æ¯ç¼“å†²åŒºï¼Œç”¨äºä¿ç•™Socketä¸­çš„è¾“å…¥/è¾“å‡ºä¿¡æ¯ï¼Œç«¯å£å·æ˜¯ä¸€ä¸ª16ä½æ— ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´æ˜¯0-65535ï¼Œä»¥åŒºåˆ«ä¸»æœºä¸Šçš„æ¯ä¸€ä¸ªç¨‹åºï¼ˆç«¯å£å·å°±åƒæˆ¿å±‹ä¸­çš„æˆ¿é—´å·ï¼‰ï¼Œä½äº256çš„ç«¯å£å·ä¿ç•™ç»™æ ‡å‡†åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚pop3çš„ç«¯å£å·å°±æ˜¯110ï¼Œæ¯ä¸€ä¸ªå¥—æ¥å­—éƒ½ç»„åˆè¿›äº†IPåœ°å€ã€ç«¯å£ï¼Œè¿™æ ·å½¢æˆçš„æ•´ä½“å°±å¯ä»¥åŒºåˆ«æ¯ä¸€ä¸ªå¥—æ¥å­—ã€‚<br> <strong>ï¼ˆ3ï¼‰å¥—æ¥å­—åè®®ç±»å‹</strong><br> å› ç‰¹ç½‘æä¾›ä¸‰ç§é€šä¿¡æœºåˆ¶ï¼Œ<br> <strong>ä¸€æ˜¯æµå¥—æ¥å­—ï¼Œ</strong>æµå¥—æ¥å­—åœ¨åŸŸä¸­é€šè¿‡TCP/IPè¿æ¥å®ç°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯AF_UNIXä¸­å¸¸ç”¨çš„å¥—æ¥å­—ç±»å‹ã€‚æµå¥—æ¥å­—æä¾›çš„æ˜¯ä¸€ä¸ªæœ‰åºã€å¯é ã€åŒå‘å­—èŠ‚æµçš„è¿æ¥ï¼Œå› æ­¤å‘é€çš„æ•°æ®å¯ä»¥ç¡®ä¿ä¸ä¼šä¸¢å¤±ã€é‡å¤æˆ–ä¹±åºåˆ°è¾¾ï¼Œè€Œä¸”å®ƒè¿˜æœ‰ä¸€å®šçš„å‡ºé”™åé‡æ–°å‘é€çš„æœºåˆ¶ã€‚<br> <strong>äºŒä¸ªæ˜¯æ•°æ®æŠ¥å¥—æ¥å­—ï¼Œ</strong>å®ƒä¸éœ€è¦å»ºç«‹è¿æ¥å’Œç»´æŒä¸€ä¸ªè¿æ¥ï¼Œå®ƒä»¬åœ¨åŸŸä¸­é€šå¸¸æ˜¯é€šè¿‡UDP/IPåè®®å®ç°çš„ã€‚å®ƒå¯¹å¯ä»¥å‘é€çš„æ•°æ®çš„é•¿åº¦æœ‰é™åˆ¶ï¼Œæ•°æ®æŠ¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç½‘ç»œæ¶ˆæ¯è¢«ä¼ è¾“,å®ƒå¯èƒ½ä¼šä¸¢å¤±ã€å¤åˆ¶æˆ–é”™ä¹±åˆ°è¾¾ï¼ŒUDPä¸æ˜¯ä¸€ä¸ªå¯é çš„åè®®ï¼Œä½†æ˜¯å®ƒçš„é€Ÿåº¦æ¯”è¾ƒé«˜ï¼Œå› ä¸ºå®ƒå¹¶ä¸€éœ€è¦æ€»æ˜¯è¦å»ºç«‹å’Œç»´æŒä¸€ä¸ªè¿æ¥ã€‚<br> <strong>ä¸‰æ˜¯åŸå§‹å¥—æ¥å­—ï¼Œ</strong>åŸå§‹å¥—æ¥å­—å…è®¸å¯¹è¾ƒä½å±‚æ¬¡çš„åè®®ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚IPã€ ICMPåè®®ï¼Œå®ƒå¸¸ç”¨äºæ£€éªŒæ–°çš„åè®®å®ç°ï¼Œæˆ–è€…è®¿é—®ç°æœ‰æœåŠ¡ä¸­é…ç½®çš„æ–°è®¾å¤‡ï¼Œå› ä¸ºRAW SOCKETå¯ä»¥è‡ªå¦‚åœ°æ§åˆ¶Windowsä¸‹çš„å¤šç§åè®®ï¼Œèƒ½å¤Ÿå¯¹ç½‘ç»œåº•å±‚çš„ä¼ è¾“æœºåˆ¶è¿›è¡Œæ§åˆ¶ï¼Œæ‰€ä»¥å¯ä»¥åº”ç”¨åŸå§‹å¥—æ¥å­—æ¥æ“çºµç½‘ç»œå±‚å’Œä¼ è¾“å±‚åº”ç”¨ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡RAW SOCKETæ¥æ¥æ”¶å‘å‘æœ¬æœºçš„ICMPã€IGMPåè®®åŒ…ï¼Œæˆ–è€…æ¥æ”¶TCP/IPæ ˆä¸èƒ½å¤Ÿå¤„ç†çš„IPåŒ…ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å‘é€ä¸€äº›è‡ªå®šåŒ…å¤´æˆ–è‡ªå®šåè®®çš„IPåŒ…ã€‚ç½‘ç»œç›‘å¬æŠ€æœ¯å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºSOCKET_RAWã€‚</p>\n<blockquote>\n<p><strong>åŸå§‹å¥—æ¥å­—ä¸æ ‡å‡†å¥—æ¥å­—çš„åŒºåˆ«åœ¨äºï¼š</strong><br> åŸå§‹å¥—æ¥å­—å¯ä»¥è¯»å†™å†…æ ¸æ²¡æœ‰å¤„ç†çš„IPæ•°æ®åŒ…ï¼Œè€Œæµå¥—æ¥å­—åªèƒ½è¯»å–TCPåè®®çš„æ•°æ®ï¼Œæ•°æ®æŠ¥å¥—æ¥å­—åªèƒ½è¯»å–UDPåè®®çš„æ•°æ®ã€‚å› æ­¤ï¼Œå¦‚æœè¦è®¿é—®å…¶ä»–åè®®å‘é€æ•°æ®å¿…é¡»ä½¿ç”¨åŸå§‹å¥—æ¥å­—ã€‚</p>\n</blockquote>\n<p><strong>å¥—æ¥å­—é€šä¿¡çš„å»ºç«‹</strong></p>\n<p><img data-src=\"https://upload-images.jianshu.io/upload_images/1281379-2575b81bbab6b67b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/437/format/webp\" alt=\"img\"></p>\n<p>Socketé€šä¿¡åŸºæœ¬æµç¨‹</p>\n<p>** æœåŠ¡å™¨ç«¯**<br> ï¼ˆ1ï¼‰é¦–å…ˆæœåŠ¡å™¨åº”ç”¨ç¨‹åºç”¨ç³»ç»Ÿè°ƒç”¨socketæ¥åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œå®ƒæ˜¯ç³»ç»Ÿåˆ†é…ç»™è¯¥æœåŠ¡å™¨è¿›ç¨‹çš„ç±»ä¼¼æ–‡ä»¶æè¿°ç¬¦çš„èµ„æºï¼Œå®ƒä¸èƒ½ä¸å…¶ä»–çš„è¿›ç¨‹å…±äº«ã€‚<br> ï¼ˆ2ï¼‰ç„¶åï¼ŒæœåŠ¡å™¨è¿›ç¨‹ä¼šç»™å¥—æ¥å­—èµ·ä¸ªåå­—ï¼Œæˆ‘ä»¬ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨bindæ¥ç»™å¥—æ¥å­—å‘½åã€‚ç„¶åæœåŠ¡å™¨è¿›ç¨‹å°±å¼€å§‹ç­‰å¾…å®¢æˆ·è¿æ¥åˆ°è¿™ä¸ªå¥—æ¥å­—ã€‚<br> ï¼ˆ3ï¼‰æ¥ä¸‹æ¥ï¼Œç³»ç»Ÿè°ƒç”¨listenæ¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—å¹¶å°†å…¶ç”¨äºå­˜æ”¾æ¥è‡ªå®¢æˆ·çš„è¿›å…¥è¿æ¥ã€‚<br> ï¼ˆ4ï¼‰æœ€åï¼ŒæœåŠ¡å™¨é€šè¿‡ç³»ç»Ÿè°ƒç”¨acceptæ¥æ¥å—å®¢æˆ·çš„è¿æ¥ã€‚å®ƒä¼šåˆ›å»ºä¸€ä¸ªä¸åŸæœ‰çš„å‘½åå¥—æ¥ä¸åŒçš„æ–°å¥—æ¥å­—ï¼Œè¿™ä¸ªå¥—æ¥å­—åªç”¨äºä¸è¿™ä¸ªç‰¹å®šå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œè€Œå‘½åå¥—æ¥å­—ï¼ˆå³åŸå…ˆçš„å¥—æ¥å­—ï¼‰åˆ™è¢«ä¿ç•™ä¸‹æ¥ç»§ç»­å¤„ç†æ¥è‡ªå…¶ä»–å®¢æˆ·çš„è¿æ¥ï¼ˆå»ºç«‹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç”¨äºé€šä¿¡çš„æµï¼Œè¿›è¡Œé€šä¿¡ï¼‰ã€‚</p>\n<p><strong>å®¢æˆ·ç«¯</strong><br> ï¼ˆ1ï¼‰å®¢æˆ·åº”ç”¨ç¨‹åºé¦–å…ˆè°ƒç”¨socketæ¥åˆ›å»ºä¸€ä¸ªæœªå‘½åçš„å¥—æ¥å­—ï¼Œç„¶åå°†æœåŠ¡å™¨çš„å‘½åå¥—æ¥å­—ä½œä¸ºä¸€ä¸ªåœ°å€æ¥è°ƒç”¨connectä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚<br> ï¼ˆ2ï¼‰ä¸€æ—¦è¿æ¥å»ºç«‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä½¿ç”¨åº•å±‚çš„æ–‡ä»¶æè¿°ç¬¦é‚£æ ·ç”¨å¥—æ¥å­—æ¥å®ç°åŒå‘æ•°æ®çš„é€šä¿¡ï¼ˆé€šè¿‡æµè¿›è¡Œæ•°æ®ä¼ è¾“ï¼‰ã€‚<br> <a href=\"https://link.jianshu.com/?t=http://developer.51cto.com/art/201509/490775.htm\">å»¶ä¼¸é˜…è¯» ï¼šJava socketç¼–ç¨‹</a></p>\n<h2 id=\"ä¸‰ã€å‚è€ƒå¼•ç”¨\"><a href=\"#ä¸‰ã€å‚è€ƒå¼•ç”¨\" class=\"headerlink\" title=\"ä¸‰ã€å‚è€ƒå¼•ç”¨\"></a>ä¸‰ã€å‚è€ƒå¼•ç”¨</h2><p><a href=\"https://link.jianshu.com/?t=http://blog.chinaunix.net/uid-26833883-id-3227144.html\">1. è¿›ç¨‹é—´é€šä¿¡â€“ç®¡é“ </a><br> <a href=\"https://link.jianshu.com/?t=http://blog.csdn.net/ljianhui/article/details/10253345\">2. Linuxè¿›ç¨‹é—´é€šä¿¡â€”â€”ä½¿ç”¨å…±äº«å†…å­˜</a><br> <a href=\"https://link.jianshu.com/?t=http://blog.chinaunix.net/uid-26833883-id-3230564.html\">3. è¿›ç¨‹é—´é€šä¿¡â€”å…±äº«å†…å­˜</a><br> <a href=\"https://link.jianshu.com/?t=http://www.cnblogs.com/diyingyun/archive/2011/12/04/2275229.html\">4. ä¿¡å·é‡ä¸äº’æ–¥é”</a><br> <a href=\"https://link.jianshu.com/?t=http://blog.chinaunix.net/uid-23193900-id-3194924.html\">5. ä¿¡å·é‡</a></p>\n<h1 id=\"3-è¿›ç¨‹è°ƒåº¦ç­–ç•¥\"><a href=\"#3-è¿›ç¨‹è°ƒåº¦ç­–ç•¥\" class=\"headerlink\" title=\"3.è¿›ç¨‹è°ƒåº¦ç­–ç•¥\"></a>3.è¿›ç¨‹è°ƒåº¦ç­–ç•¥</h1><h2 id=\"1-å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#1-å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"1.å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼š\"></a>1.å…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼š</h2><p>å…ˆæ¥å…ˆæœåŠ¡(FCFS)è°ƒåº¦ç®—æ³•æ˜¯ä¸€ç§æœ€ç®€å•çš„è°ƒåº¦ç®—æ³•ï¼Œè¯¥ç®—æ³•æ—¢å¯ç”¨äºä½œä¸šè°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦ã€‚å½“åœ¨ä½œä¸šè°ƒåº¦ä¸­é‡‡ç”¨è¯¥ç®—æ³•æ—¶ï¼Œæ¯æ¬¡è°ƒåº¦éƒ½æ˜¯ä»åå¤‡ä½œä¸šé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæœ€å…ˆè¿›å…¥è¯¥é˜Ÿåˆ—çš„ä½œä¸šï¼Œå°†å®ƒä»¬è°ƒå…¥å†…å­˜ï¼Œä¸ºå®ƒä»¬åˆ†é…èµ„æºã€åˆ›å»ºè¿›ç¨‹ï¼Œç„¶åæ”¾å…¥å°±ç»ªé˜Ÿåˆ—ã€‚åœ¨è¿›ç¨‹è°ƒåº¦ä¸­é‡‡ç”¨FCFSç®—æ³•æ—¶ï¼Œåˆ™æ¯æ¬¡è°ƒåº¦æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å…ˆè¿›å…¥è¯¥é˜Ÿåˆ—çš„è¿›ç¨‹ï¼Œä¸ºä¹‹åˆ†é…å¤„ç†æœºï¼Œä½¿ä¹‹æŠ•å…¥è¿è¡Œã€‚è¯¥è¿›ç¨‹ä¸€ç›´è¿è¡Œåˆ°å®Œæˆæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œé˜»å¡åæ‰æ”¾å¼ƒå¤„ç†æœºã€‚</p>\n<h2 id=\"2-çŸ­ä½œä¸š-è¿›ç¨‹-ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#2-çŸ­ä½œä¸š-è¿›ç¨‹-ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"2.çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"></a>2.çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š</h2><p>çŸ­ä½œä¸š(è¿›ç¨‹)ä¼˜å…ˆè°ƒåº¦ç®—æ³•SJ(P)Fï¼Œæ˜¯æŒ‡å¯¹çŸ­ä½œä¸šæˆ–çŸ­è¿›ç¨‹ä¼˜å…ˆè°ƒåº¦çš„ç®—æ³•ã€‚å®ƒä»¬å¯ä»¥åˆ†åˆ«ç”¨äºä½œä¸šè°ƒåº¦å’Œè¿›ç¨‹è°ƒåº¦ã€‚çŸ­ä½œä¸šä¼˜å…ˆ(SJF)çš„è°ƒåº¦ç®—æ³•æ˜¯ä»åå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸šï¼Œå°†å®ƒä»¬è°ƒå…¥å†…å­˜è¿è¡Œã€‚è€ŒçŸ­è¿›ç¨‹ä¼˜å…ˆ(SPF)è°ƒåº¦ç®—æ³•åˆ™æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆï¼Œæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå¤„ç†æœºæ—¶å†é‡æ–°è°ƒåº¦ã€‚</p>\n<h2 id=\"3-é«˜ä¼˜å…ˆæƒä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#3-é«˜ä¼˜å…ˆæƒä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"3.é«˜ä¼˜å…ˆæƒä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"></a>3.é«˜ä¼˜å…ˆæƒä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š</h2><p>ä¸ºäº†ç…§é¡¾ç´§è¿«å‹ä½œä¸šï¼Œä½¿ä¹‹åœ¨è¿›å…¥ç³»ç»Ÿåä¾¿è·å¾—ä¼˜å…ˆå¤„ç†ï¼Œå¼•å…¥äº†æœ€é«˜ä¼˜å…ˆæƒä¼˜å…ˆ(FPF)è°ƒåº¦ç®—æ³•ã€‚æ­¤ç®—æ³•å¸¸è¢«ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œä½œä¸ºä½œä¸šè°ƒåº¦ç®—æ³•ï¼Œä¹Ÿä½œä¸ºå¤šç§æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹è°ƒåº¦ç®—æ³•ï¼Œè¿˜å¯ç”¨äºå®æ—¶ç³»ç»Ÿä¸­ã€‚å½“æŠŠè¯¥ç®—æ³•ç”¨äºä½œä¸šè°ƒåº¦æ—¶ï¼Œç³»ç»Ÿå°†ä»åå¤‡é˜Ÿåˆ—ä¸­é€‰æ‹©è‹¥å¹²ä¸ªä¼˜å…ˆæƒæœ€é«˜çš„ä½œä¸šè£…å…¥å†…å­˜ã€‚å½“ç”¨äºè¿›ç¨‹è°ƒåº¦æ—¶ï¼Œè¯¥ç®—æ³•æ˜¯æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ï¼Œè¿™æ—¶ï¼Œåˆå¯è¿›ä¸€æ­¥æŠŠè¯¥ç®—æ³•åˆ†æˆå¦‚ä¸‹ä¸¤ç§ã€‚</p>\n<h3 id=\"3-1-éæŠ¢å å¼ä¼˜å…ˆæƒç®—æ³•ï¼š\"><a href=\"#3-1-éæŠ¢å å¼ä¼˜å…ˆæƒç®—æ³•ï¼š\" class=\"headerlink\" title=\"3.1) éæŠ¢å å¼ä¼˜å…ˆæƒç®—æ³•ï¼š\"></a>3.1) éæŠ¢å å¼ä¼˜å…ˆæƒç®—æ³•ï¼š</h3><p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œç³»ç»Ÿä¸€æ—¦æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹åï¼Œè¯¥è¿›ç¨‹ä¾¿ä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œç›´è‡³å®Œæˆï¼›æˆ–å› å‘ç”ŸæŸäº‹ä»¶ä½¿è¯¥è¿›ç¨‹æ”¾å¼ƒå¤„ç†æœºæ—¶ï¼Œç³»ç»Ÿæ–¹å¯å†å°†å¤„ç†æœºé‡æ–°åˆ†é…ç»™å¦ä¸€ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ã€‚è¿™ç§è°ƒåº¦ç®—æ³•ä¸»è¦ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼›ä¹Ÿå¯ç”¨äºæŸäº›å¯¹å®æ—¶æ€§è¦æ±‚ä¸ä¸¥çš„å®æ—¶ç³»ç»Ÿä¸­ã€‚</p>\n<h3 id=\"3-2-æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#3-2-æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"3.2) æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼š\"></a>3.2) æŠ¢å å¼ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•ï¼š</h3><p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œç³»ç»ŸåŒæ ·æ˜¯æŠŠå¤„ç†æœºåˆ†é…ç»™ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ï¼Œä½¿ä¹‹æ‰§è¡Œã€‚ä½†åœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œåªè¦åˆå‡ºç°äº†å¦ä¸€ä¸ªå…¶ä¼˜å…ˆæƒæ›´é«˜çš„è¿›ç¨‹ï¼Œè¿›ç¨‹è°ƒåº¦ç¨‹åºå°±ç«‹å³åœæ­¢å½“å‰è¿›ç¨‹(åŸä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹)çš„æ‰§è¡Œï¼Œé‡æ–°å°†å¤„ç†æœºåˆ†é…ç»™æ–°åˆ°çš„ä¼˜å…ˆæƒæœ€é«˜çš„è¿›ç¨‹ã€‚å› æ­¤ï¼Œåœ¨é‡‡ç”¨è¿™ç§è°ƒåº¦ç®—æ³•æ—¶ï¼Œæ˜¯æ¯å½“ç³»ç»Ÿä¸­å‡ºç°ä¸€ä¸ªæ–°çš„å°±ç»ªè¿›ç¨‹i æ—¶ï¼Œå°±å°†å…¶ä¼˜å…ˆæƒPiä¸æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹j çš„ä¼˜å…ˆæƒPjè¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœPiâ‰¤Pjï¼ŒåŸè¿›ç¨‹Pjä¾¿ç»§ç»­æ‰§è¡Œï¼›ä½†å¦‚æœæ˜¯Pi&gt;Pjï¼Œåˆ™ç«‹å³åœæ­¢Pjçš„æ‰§è¡Œï¼Œåšè¿›ç¨‹åˆ‡æ¢ï¼Œä½¿i è¿›ç¨‹æŠ•å…¥æ‰§è¡Œã€‚æ˜¾ç„¶ï¼Œè¿™ç§æŠ¢å å¼çš„ä¼˜å…ˆæƒè°ƒåº¦ç®—æ³•èƒ½æ›´å¥½åœ°æ»¡è¶³ç´§è¿«ä½œä¸šçš„è¦æ±‚ï¼Œæ•…è€Œå¸¸ç”¨äºè¦æ±‚æ¯”è¾ƒä¸¥æ ¼çš„å®æ—¶ç³»ç»Ÿä¸­ï¼Œä»¥åŠå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„æ‰¹å¤„ç†å’Œåˆ†æ—¶ç³»ç»Ÿä¸­ã€‚</p>\n<h3 id=\"3-3-å®¹æ˜“å‡ºç°ä¼˜å…ˆçº§å€’ç½®ç°è±¡ï¼š\"><a href=\"#3-3-å®¹æ˜“å‡ºç°ä¼˜å…ˆçº§å€’ç½®ç°è±¡ï¼š\" class=\"headerlink\" title=\"3.3)å®¹æ˜“å‡ºç°ä¼˜å…ˆçº§å€’ç½®ç°è±¡ï¼š\"></a>3.3)å®¹æ˜“å‡ºç°ä¼˜å…ˆçº§å€’ç½®ç°è±¡ï¼š</h3><p>ä¼˜å…ˆçº§åè½¬æ˜¯æŒ‡ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„ä»»åŠ¡æŒæœ‰ä¸€ä¸ªè¢«é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ‰€éœ€è¦çš„å…±äº«èµ„æºã€‚é«˜ä¼˜å…ˆä»»åŠ¡ç”±äºå› èµ„æºç¼ºä¹è€Œå¤„äºå—é˜»çŠ¶æ€ï¼Œä¸€ç›´ç­‰åˆ°ä½ä¼˜å…ˆçº§ä»»åŠ¡é‡Šæ”¾èµ„æºä¸ºæ­¢ã€‚è€Œä½ä¼˜å…ˆçº§è·å¾—çš„CPUæ—¶é—´å°‘ï¼Œå¦‚æœæ­¤æ—¶æœ‰ä¼˜å…ˆçº§å¤„äºä¸¤è€…ä¹‹é—´çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸éœ€è¦é‚£ä¸ªå…±äº«èµ„æºï¼Œåˆ™è¯¥ä¸­ä¼˜å…ˆçº§çš„ä»»åŠ¡åè€Œè¶…è¿‡è¿™ä¸¤ä¸ªä»»åŠ¡è€Œè·å¾—CPUæ—¶é—´ã€‚å¦‚æœé«˜ä¼˜å…ˆçº§ç­‰å¾…èµ„æºæ—¶ä¸æ˜¯é˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯å¿™å¾ªç¯ï¼Œåˆ™å¯èƒ½æ°¸è¿œæ— æ³•è·å¾—èµ„æºï¼Œå› ä¸ºæ­¤æ—¶ä½ä¼˜å…ˆçº§è¿›ç¨‹æ— æ³•ä¸é«˜ä¼˜å…ˆçº§è¿›ç¨‹äº‰å¤ºCPUæ—¶é—´ï¼Œä»è€Œæ— æ³•æ‰§è¡Œï¼Œè¿›è€Œæ— æ³•é‡Šæ”¾èµ„æºï¼Œé€ æˆçš„åæœå°±æ˜¯é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ— æ³•è·å¾—èµ„æºè€Œç»§ç»­æ¨è¿›ã€‚</p>\n<h3 id=\"3-4-ä¼˜å…ˆçº§åè½¬æ¡ˆä¾‹è§£é‡Šï¼š\"><a href=\"#3-4-ä¼˜å…ˆçº§åè½¬æ¡ˆä¾‹è§£é‡Šï¼š\" class=\"headerlink\" title=\"3.4)ä¼˜å…ˆçº§åè½¬æ¡ˆä¾‹è§£é‡Šï¼š\"></a>3.4)ä¼˜å…ˆçº§åè½¬æ¡ˆä¾‹è§£é‡Šï¼š</h3><p>ä¸åŒä¼˜å…ˆçº§çº¿ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®çš„åŒæ­¥æœºåˆ¶ã€‚ä¼˜å…ˆçº§ä¸ºé«˜å’Œä½çš„çº¿ç¨‹tallå’Œçº¿ç¨‹lowéœ€è¦è®¿é—®å…±äº«èµ„æºï¼Œä¼˜å…ˆçº§ä¸ºä¸­ç­‰çš„çº¿ç¨‹midä¸è®¿é—®è¯¥å…±äº«èµ„æºã€‚å½“lowæ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œtallç­‰å¾…è¯¥å…±äº«èµ„æºçš„äº’æ–¥é”ï¼Œä½†æ˜¯æ­¤æ—¶lowè¢«midæŠ¢å…ˆäº†ï¼Œå¯¼è‡´midè¿è¡Œtallé˜»å¡ã€‚å³ä¼˜å…ˆçº§ä½çš„çº¿ç¨‹midè¿è¡Œï¼Œä¼˜å…ˆçº§é«˜çš„tallè¢«é˜»å¡ã€‚</p>\n<h3 id=\"3-5-ä¼˜å…ˆçº§å€’ç½®è§£å†³æ–¹æ¡ˆï¼š\"><a href=\"#3-5-ä¼˜å…ˆçº§å€’ç½®è§£å†³æ–¹æ¡ˆï¼š\" class=\"headerlink\" title=\"3.5)ä¼˜å…ˆçº§å€’ç½®è§£å†³æ–¹æ¡ˆï¼š\"></a>3.5)ä¼˜å…ˆçº§å€’ç½®è§£å†³æ–¹æ¡ˆï¼š</h3><p>â€‹       (3.5.1ï¼‰è®¾ç½®ä¼˜å…ˆçº§ä¸Šé™ï¼Œç»™ä¸´ç•ŒåŒºä¸€ä¸ªé«˜ä¼˜å…ˆçº§ï¼Œè¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹éƒ½å°†è·å¾—è¿™ä¸ªé«˜ä¼˜å…ˆçº§ï¼Œå¦‚æœå…¶ä»–è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹çš„ä¼˜å…ˆçº§éƒ½ä½äºè¿™ä¸ªé«˜ä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆä¼˜å…ˆçº§åè½¬å°±ä¸ä¼šå‘ç”Ÿã€‚<br>â€‹     ï¼ˆ3.5.2ï¼‰ä¼˜å…ˆçº§ç»§æ‰¿ï¼Œå½“ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹ç­‰å¾…ä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹æŒæœ‰çš„èµ„æºæ—¶ï¼Œä½ä¼˜å…ˆçº§è¿›ç¨‹å°†æš‚æ—¶è·å¾—é«˜ä¼˜å…ˆçº§è¿›ç¨‹çš„ä¼˜å…ˆçº§åˆ«ï¼Œåœ¨é‡Šæ”¾å…±äº«èµ„æºåï¼Œä½ä¼˜å…ˆçº§è¿›ç¨‹å›åˆ°åŸæ¥çš„ä¼˜å…ˆçº§åˆ«ã€‚åµŒå…¥å¼ç³»ç»ŸVxWorkså°±æ˜¯é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚<br>â€‹       è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå…«å¦ï¼Œ1997å¹´çš„ç¾å›½çš„ç«æ˜Ÿæ¢æµ‹å™¨ï¼ˆä½¿ç”¨çš„å°±æ˜¯vxworks)å°±é‡åˆ°ä¸€ä¸ªä¼˜å…ˆçº§åè½¬é—®é¢˜å¼•èµ·çš„æ•…éšœã€‚ç®€å•è¯´ä¸‹ï¼Œç«æ˜Ÿæ¢æµ‹å™¨æœ‰ä¸€ä¸ªä¿¡æ¯æ€»çº¿ï¼Œæœ‰ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„æ€»çº¿ä»»åŠ¡è´Ÿè´£æ€»çº¿æ•°æ®çš„å­˜å–ï¼Œè®¿é—®æ€»çº¿éƒ½éœ€è¦é€šè¿‡ä¸€ä¸ªäº’æ–¥é”ï¼ˆå…±äº«èµ„æºå‡ºç°äº†ï¼‰ï¼›è¿˜æœ‰ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„ï¼Œè¿è¡Œä¸æ˜¯å¾ˆé¢‘ç¹çš„æ°”è±¡æœé›†ä»»åŠ¡ï¼Œå®ƒéœ€è¦å¯¹æ€»çº¿å†™æ•°æ®ï¼Œä¹Ÿå°±åŒæ ·éœ€è¦è®¿é—®äº’æ–¥é”ï¼›æœ€åè¿˜æœ‰ä¸€ä¸ªä¸­ä¼˜å…ˆçº§çš„é€šä¿¡ä»»åŠ¡ï¼Œå®ƒçš„è¿è¡Œæ—¶é—´æ¯”è¾ƒé•¿ã€‚å¹³å¸¸è¿™ä¸ªç³»ç»Ÿè¿è¡Œæ¯«æ— é—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¸€å¤©ï¼Œåœ¨æ°”è±¡ä»»åŠ¡è·å¾—äº’æ–¥é”å¾€æ€»çº¿å†™æ•°æ®çš„æ—¶å€™ï¼Œä¸€ä¸ªä¸­æ–­å‘ç”Ÿå¯¼è‡´é€šä¿¡ä»»åŠ¡è¢«è°ƒåº¦å°±ç»ªï¼Œé€šä¿¡ä»»åŠ¡æŠ¢å äº†ä½ä¼˜å…ˆçº§çš„æ°”è±¡ä»»åŠ¡ï¼Œè€Œæ— å·§ä¸æˆä¹¦çš„æ˜¯ï¼Œæ­¤æ—¶é«˜ä¼˜å…ˆçº§çš„æ€»çº¿ä»»åŠ¡æ­£åœ¨ç­‰å¾…æ°”è±¡ä»»åŠ¡å†™å®Œæ•°æ®å½’è¿˜äº’æ–¥é”ï¼Œä½†æ˜¯ç”±äºé€šä¿¡ä»»åŠ¡æŠ¢å äº†CPUå¹¶ä¸”è¿è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œå¯¼è‡´æ°”è±¡ä»»åŠ¡å¾—ä¸åˆ°CPUæ—¶é—´ä¹Ÿæ— æ³•é‡Šæ”¾äº’æ–¥é”ï¼Œæœ¬æ¥æ˜¯é«˜ä¼˜å…ˆçº§çš„æ€»çº¿ä»»åŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼Œæ€»çº¿ä»»åŠ¡æ— æ³•åŠæ—¶æ‰§è¡Œçš„åæœè¢«æ¢è·¯è€…è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸¥é‡é”™è¯¯ï¼Œæœ€åå°±æ˜¯æ•´ä¸ªç³»ç»Ÿè¢«é‡å¯ã€‚Vxworkså…è®¸ä¼˜å…ˆçº§ç»§æ‰¿ï¼Œç„¶è€Œé—æ†¾çš„å·¥ç¨‹å¸ˆä»¬å°†è¿™ä¸ªé€‰é¡¹å…³é—­äº†ã€‚<br>â€‹     ï¼ˆ3.5.3ï¼‰ç¬¬ä¸‰ç§æ–¹æ³•å°±æ˜¯ä¸´ç•ŒåŒºç¦æ­¢ä¸­æ–­ï¼Œé€šè¿‡ç¦æ­¢ä¸­æ–­æ¥ä¿æŠ¤ä¸´ç•ŒåŒºï¼Œé‡‡ç”¨æ­¤ç§ç­–ç•¥çš„ç³»ç»Ÿåªæœ‰ä¸¤ç§ä¼˜å…ˆçº§ï¼šå¯æŠ¢å ä¼˜å…ˆçº§å’Œä¸­æ–­ç¦æ­¢ä¼˜å…ˆçº§ã€‚å‰è€…ä¸ºä¸€èˆ¬è¿›ç¨‹è¿è¡Œæ—¶çš„ä¼˜å…ˆçº§ï¼Œåè€…ä¸ºè¿è¡Œäºä¸´ç•ŒåŒºçš„ä¼˜å…ˆçº§ã€‚ç«æ˜Ÿæ¢è·¯è€…æ­£æ˜¯ç”±äºåœ¨ä¸´ç•ŒåŒºä¸­è¿è¡Œçš„æ°”è±¡ä»»åŠ¡è¢«ä¸­æ–­å‘ç”Ÿçš„é€šä¿¡ä»»åŠ¡æ‰€æŠ¢å æ‰å¯¼è‡´æ•…éšœï¼Œå¦‚æœæœ‰ä¸´ç•ŒåŒºçš„ç¦æ­¢ä¸­æ–­ä¿æŠ¤ï¼Œæ­¤ä¸€é—®é¢˜ä¹Ÿä¸ä¼šå‘ç”Ÿã€‚</p>\n<h2 id=\"4ã€é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#4ã€é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"4ã€é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š\"></a>4ã€é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼š</h2><p>åœ¨æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼ŒçŸ­ä½œä¸šä¼˜å…ˆç®—æ³•æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„ç®—æ³•ï¼Œå…¶ä¸»è¦çš„ä¸è¶³ä¹‹å¤„æ˜¯é•¿ä½œä¸šçš„è¿è¡Œå¾—ä¸åˆ°ä¿è¯ã€‚å¦‚æœæˆ‘ä»¬èƒ½ä¸ºæ¯ä¸ªä½œä¸šå¼•å…¥å‰é¢æ‰€è¿°çš„åŠ¨æ€ä¼˜å…ˆæƒï¼Œå¹¶ä½¿ä½œä¸šçš„ä¼˜å…ˆçº§éšç€ç­‰å¾…æ—¶é—´çš„å¢åŠ è€Œä»¥é€Ÿç‡a æé«˜ï¼Œåˆ™é•¿ä½œä¸šåœ¨ç­‰å¾…ä¸€å®šçš„æ—¶é—´åï¼Œå¿…ç„¶æœ‰æœºä¼šåˆ†é…åˆ°å¤„ç†æœºã€‚è¯¥ä¼˜å…ˆæƒçš„å˜åŒ–è§„å¾‹å¯æè¿°ä¸ºï¼š</p>\n<p><img data-src=\"https://img-blog.csdn.net/20180922085248936?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NjQyMDM2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"img\"></p>\n<p>   åœ¨åˆ©ç”¨è¯¥ç®—æ³•æ—¶ï¼Œæ¯è¦è¿›è¡Œè°ƒåº¦ä¹‹å‰ï¼Œéƒ½é¡»å…ˆåšå“åº”æ¯”çš„è®¡ç®—ï¼Œè¿™ä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚</p>\n<h2 id=\"5ã€æ—¶é—´ç‰‡è½®è½¬æ³•ï¼š\"><a href=\"#5ã€æ—¶é—´ç‰‡è½®è½¬æ³•ï¼š\" class=\"headerlink\" title=\"5ã€æ—¶é—´ç‰‡è½®è½¬æ³•ï¼š\"></a>5ã€æ—¶é—´ç‰‡è½®è½¬æ³•ï¼š</h2><p>åœ¨æ—©æœŸçš„æ—¶é—´ç‰‡è½®è½¬æ³•ä¸­ï¼Œç³»ç»Ÿå°†æ‰€æœ‰çš„å°±ç»ªè¿›ç¨‹æŒ‰å…ˆæ¥å…ˆæœåŠ¡çš„åŸåˆ™æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼ŒæŠŠCPU åˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œå¹¶ä»¤å…¶æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ã€‚æ—¶é—´ç‰‡çš„å¤§å°ä»å‡ ms åˆ°å‡ ç™¾msã€‚å½“æ‰§è¡Œçš„æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œç”±ä¸€ä¸ªè®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­è¯·æ±‚ï¼Œè°ƒåº¦ç¨‹åºä¾¿æ®æ­¤ä¿¡å·æ¥åœæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå¹¶å°†å®ƒé€å¾€å°±ç»ªé˜Ÿåˆ—çš„æœ«å°¾ï¼›ç„¶åï¼Œå†æŠŠå¤„ç†æœºåˆ†é…ç»™å°±ç»ªé˜Ÿåˆ—ä¸­æ–°çš„é˜Ÿé¦–è¿›ç¨‹ï¼ŒåŒæ—¶ä¹Ÿè®©å®ƒæ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯å°±ç»ªé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰è¿›ç¨‹åœ¨ä¸€ç»™å®šçš„æ—¶é—´å†…å‡èƒ½è·å¾—ä¸€æ—¶é—´ç‰‡çš„å¤„ç†æœºæ‰§è¡Œæ—¶é—´ã€‚æ¢è¨€ä¹‹ï¼Œç³»ç»Ÿèƒ½åœ¨ç»™å®šçš„æ—¶é—´å†…å“åº”æ‰€æœ‰ç”¨æˆ·çš„è¯·æ±‚ã€‚</p>\n<h2 id=\"6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼š\"><a href=\"#6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼š\" class=\"headerlink\" title=\"6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼š\"></a>6ã€å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼š</h2><p>å‰é¢ä»‹ç»çš„å„ç§ç”¨ä½œè¿›ç¨‹è°ƒåº¦çš„ç®—æ³•éƒ½æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚å¦‚çŸ­è¿›ç¨‹ä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•ï¼Œä»…ç…§é¡¾äº†çŸ­è¿›ç¨‹è€Œå¿½ç•¥äº†é•¿è¿›ç¨‹ï¼Œè€Œä¸”å¦‚æœå¹¶æœªæŒ‡æ˜è¿›ç¨‹çš„é•¿åº¦ï¼Œåˆ™çŸ­è¿›ç¨‹ä¼˜å…ˆå’ŒåŸºäºè¿›ç¨‹é•¿åº¦çš„æŠ¢å å¼è°ƒåº¦ç®—æ³•éƒ½å°†æ— æ³•ä½¿ç”¨ã€‚è€Œå¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•åˆ™ä¸å¿…äº‹å…ˆçŸ¥é“å„ç§è¿›ç¨‹æ‰€éœ€çš„æ‰§è¡Œæ—¶é—´ï¼Œè€Œä¸”è¿˜å¯ä»¥æ»¡è¶³å„ç§ç±»å‹è¿›ç¨‹çš„éœ€è¦ï¼Œå› è€Œå®ƒæ˜¯ç›®å‰è¢«å…¬è®¤çš„ä¸€ç§è¾ƒå¥½çš„è¿›ç¨‹è°ƒåº¦ç®—æ³•ã€‚åœ¨é‡‡ç”¨å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•çš„ç³»ç»Ÿä¸­ï¼Œè°ƒåº¦ç®—æ³•çš„å®æ–½è¿‡ç¨‹å¦‚ä¸‹æ‰€è¿°ã€‚</p>\n<p>(1) åº”è®¾ç½®å¤šä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå¹¶ä¸ºå„ä¸ªé˜Ÿåˆ—èµ‹äºˆä¸åŒçš„ä¼˜å…ˆçº§ã€‚ç¬¬ä¸€ä¸ªé˜Ÿåˆ—çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œç¬¬äºŒä¸ªé˜Ÿåˆ—æ¬¡ä¹‹ï¼Œå…¶ä½™å„é˜Ÿåˆ—çš„ä¼˜å…ˆæƒé€ä¸ªé™ä½ã€‚è¯¥ç®—æ³•èµ‹äºˆå„ä¸ªé˜Ÿåˆ—ä¸­è¿›ç¨‹æ‰§è¡Œæ—¶é—´ç‰‡çš„å¤§å°ä¹Ÿå„ä¸ç›¸åŒï¼Œåœ¨ä¼˜å…ˆæƒæ„ˆé«˜çš„é˜Ÿåˆ—ä¸­ï¼Œä¸ºæ¯ä¸ªè¿›ç¨‹æ‰€è§„å®šçš„æ‰§è¡Œæ—¶é—´ç‰‡å°±æ„ˆå°ã€‚ä¾‹å¦‚ï¼Œç¬¬äºŒä¸ªé˜Ÿåˆ—çš„æ—¶é—´ç‰‡è¦æ¯”ç¬¬ä¸€ä¸ªé˜Ÿåˆ—çš„æ—¶é—´ç‰‡é•¿ä¸€å€ï¼Œâ€¦â€¦ï¼Œç¬¬i+1ä¸ªé˜Ÿåˆ—çš„æ—¶é—´ç‰‡è¦æ¯”ç¬¬iä¸ªé˜Ÿåˆ—çš„æ—¶é—´ç‰‡é•¿ä¸€å€ã€‚</p>\n<p>(2)å½“ä¸€ä¸ªæ–°è¿›ç¨‹è¿›å…¥å†…å­˜åï¼Œé¦–å…ˆå°†å®ƒæ”¾å…¥ç¬¬ä¸€é˜Ÿåˆ—çš„æœ«å°¾ï¼ŒæŒ‰FCFSåŸåˆ™æ’é˜Ÿç­‰å¾…è°ƒåº¦ã€‚å½“è½®åˆ°è¯¥è¿›ç¨‹æ‰§è¡Œæ—¶ï¼Œå¦‚å®ƒèƒ½åœ¨è¯¥æ—¶é—´ç‰‡å†…å®Œæˆï¼Œä¾¿å¯å‡†å¤‡æ’¤ç¦»ç³»ç»Ÿï¼›å¦‚æœå®ƒåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡ç»“æŸæ—¶å°šæœªå®Œæˆï¼Œè°ƒåº¦ç¨‹åºä¾¿å°†è¯¥è¿›ç¨‹è½¬å…¥ç¬¬äºŒé˜Ÿåˆ—çš„æœ«å°¾ï¼Œå†åŒæ ·åœ°æŒ‰FCFSåŸåˆ™ç­‰å¾…è°ƒåº¦æ‰§è¡Œï¼›å¦‚æœå®ƒåœ¨ç¬¬äºŒé˜Ÿåˆ—ä¸­è¿è¡Œä¸€ä¸ªæ—¶é—´ç‰‡åä»æœªå®Œæˆï¼Œå†ä¾æ¬¡å°†å®ƒæ”¾å…¥ç¬¬ä¸‰é˜Ÿåˆ—ï¼Œâ€¦â€¦ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œå½“ä¸€ä¸ªé•¿ä½œä¸š(è¿›ç¨‹)ä»ç¬¬ä¸€é˜Ÿåˆ—ä¾æ¬¡é™åˆ°ç¬¬né˜Ÿåˆ—åï¼Œåœ¨ç¬¬n é˜Ÿåˆ—ä¾¿é‡‡å–æŒ‰æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼è¿è¡Œã€‚</p>\n<p>(3) ä»…å½“ç¬¬ä¸€é˜Ÿåˆ—ç©ºé—²æ—¶ï¼Œè°ƒåº¦ç¨‹åºæ‰è°ƒåº¦ç¬¬äºŒé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹è¿è¡Œï¼›ä»…å½“ç¬¬1ï½(i-1)é˜Ÿåˆ—å‡ç©ºæ—¶ï¼Œæ‰ä¼šè°ƒåº¦ç¬¬ié˜Ÿåˆ—ä¸­çš„è¿›ç¨‹è¿è¡Œã€‚å¦‚æœå¤„ç†æœºæ­£åœ¨ç¬¬ié˜Ÿåˆ—ä¸­ä¸ºæŸè¿›ç¨‹æœåŠ¡æ—¶ï¼Œåˆæœ‰æ–°è¿›ç¨‹è¿›å…¥ä¼˜å…ˆæƒè¾ƒé«˜çš„é˜Ÿåˆ—(ç¬¬1ï½(i-1)ä¸­çš„ä»»ä½•ä¸€ä¸ªé˜Ÿåˆ—)ï¼Œåˆ™æ­¤æ—¶æ–°è¿›ç¨‹å°†æŠ¢å æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„å¤„ç†æœºï¼Œå³ç”±è°ƒåº¦ç¨‹åºæŠŠæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ”¾å›åˆ°ç¬¬ié˜Ÿåˆ—çš„æœ«å°¾ï¼ŒæŠŠå¤„ç†æœºåˆ†é…ç»™æ–°åˆ°çš„é«˜ä¼˜å…ˆæƒè¿›ç¨‹ã€‚</p>\n<p><img data-src=\"https://img-blog.csdn.net/20180922085249110?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NjQyMDM2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"img\"></p>\n<p>æ‰¹å¤„ç†ç³»ç»Ÿã€åˆ†æ—¶ç³»ç»Ÿå’Œå®æ—¶ç³»ç»Ÿä¸­ï¼Œå„é‡‡ç”¨å“ªå‡ ç§è¿›ç¨‹ï¼ˆä½œä¸šï¼‰è°ƒåº¦ç®—æ³•ï¼Ÿ<br>æ‰¹å¤„ç†ç³»ç»Ÿå¸¸ç”¨è°ƒåº¦ç®—æ³•ï¼š<br>â‘ ã€å…ˆæ¥å…ˆæœåŠ¡ï¼šFCFS<br>â‘¡ã€æœ€çŸ­ä½œä¸šä¼˜å…ˆ<br>â‘¢ã€æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ<br>â‘£ã€å“åº”æ¯”æœ€é«˜è€…ä¼˜å…ˆ</p>\n<p>åˆ†æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•ï¼š<br>â‘ ã€è½®è½¬è°ƒåº¦<br>â‘¡ã€ä¼˜å…ˆçº§è°ƒåº¦<br>â‘¢ã€å¤šçº§é˜Ÿåˆ—è°ƒåº¦<br>â‘£ã€å½©ç¥¨è°ƒåº¦</p>\n<p>å®æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•ï¼š<br>â‘ ã€å•æ¯”ç‡è°ƒåº¦<br>â‘¡ã€é™æœŸè°ƒåº¦<br>â‘¢ã€æœ€å°‘è£•åº¦æ³•</p>\n<h1 id=\"4-æ­»é”\"><a href=\"#4-æ­»é”\" class=\"headerlink\" title=\"4.æ­»é”\"></a>4.æ­»é”</h1><p>æ­»é”æ˜¯ä»€ä¹ˆï¼Œä»¥åŠåœ¨å¹¶å‘ç¨‹åºä¸­å¦‚ä½•é¿å…æ­»é”ä¸€ç›´æ˜¯é¢è¯•å®˜åçˆ±çš„ä¸€ä¸ªé—®é¢˜ã€‚<br> æœ¬æ–‡å°½é‡ä»¥æœ€ç®€æ´çš„ç¤ºä¾‹æ¥å¸®åŠ©ä½ å¿«é€Ÿç†è§£ï¼ŒæŒæ¡æ­»é”å‘ç”Ÿçš„åŸå› åŠå…¶è§£å†³æ–¹æ³•ã€‚åœ¨é˜…è¯»æ¥ä¸‹æ¥çš„å†…å®¹ä¹‹å‰ï¼Œä½ å¿…é¡»å…·å¤‡javaä¸­ç‹¬å é”ä¸çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„åŸºæœ¬çŸ¥è¯†ã€‚</p>\n<p><strong>æ­»é”</strong><br> å½“çº¿ç¨‹AæŒæœ‰ç‹¬å é”aï¼Œå¹¶å°è¯•å»è·å–ç‹¬å é”bçš„åŒæ—¶ï¼Œçº¿ç¨‹BæŒæœ‰ç‹¬å é”bï¼Œå¹¶å°è¯•è·å–ç‹¬å é”açš„æƒ…å†µä¸‹ï¼Œå°±ä¼šå‘ç”ŸABä¸¤ä¸ªçº¿ç¨‹ç”±äºäº’ç›¸æŒæœ‰å¯¹æ–¹éœ€è¦çš„é”ï¼Œè€Œå‘ç”Ÿçš„é˜»å¡ç°è±¡ï¼Œæˆ‘ä»¬ç§°ä¸ºæ­»é”ã€‚</p>\n<p>ä¸‹é¢ç”¨ä¸€ä¸ªéå¸¸ç®€å•çš„æ­»é”ç¤ºä¾‹æ¥å¸®åŠ©ä½ ç†è§£æ­»é”çš„å®šä¹‰ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeadLockDemo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// çº¿ç¨‹a</span></span><br><span class=\"line\">        Thread td1 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                DeadLockDemo.method1();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// çº¿ç¨‹b</span></span><br><span class=\"line\">        Thread td2 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                DeadLockDemo.method2();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        td1.start();</span><br><span class=\"line\">        td2.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">method1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (String.class) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;çº¿ç¨‹aå°è¯•è·å–integer.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (Integer.class) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (Integer.class) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;çº¿ç¨‹bå°è¯•è·å–String.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (String.class) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">----------------</span><br><span class=\"line\">çº¿ç¨‹bå°è¯•è·å–String.class</span><br><span class=\"line\">çº¿ç¨‹aå°è¯•è·å–integer.class</span><br><span class=\"line\">....</span><br><span class=\"line\">...</span><br><span class=\"line\">..</span><br><span class=\"line\">.</span><br><span class=\"line\">æ— é™é˜»å¡ä¸‹å»</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\"><a href=\"#å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•é¿å…æ­»é”ï¼Ÿ\"></a>å¦‚ä½•é¿å…æ­»é”ï¼Ÿ</h2><p>æ•™ç§‘ä¹¦èˆ¬çš„å›ç­”åº”è¯¥æ˜¯ï¼Œç»“åˆâ€œå“²å­¦å®¶å°±é¤[<a href=\"#fn1\">1]</a>â€æ¨¡å‹ï¼Œåˆ†æå¹¶æ€»ç»“å‡ºä»¥ä¸‹æ­»é”çš„åŸå› ï¼Œæœ€åå¾—å‡ºâ€œé¿å…æ­»é”å°±æ˜¯ç ´åé€ æˆæ­»é”çš„ï¼Œè‹¥å¹²æ¡ä»¶ä¸­çš„ä»»æ„ä¸€ä¸ªâ€çš„ç»“è®ºã€‚</p>\n<p>é€ æˆæ­»é”å¿…é¡»è¾¾æˆçš„4ä¸ªæ¡ä»¶ï¼ˆåŸå› ï¼‰ï¼š</p>\n<ol>\n<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚</li>\n<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li>\n<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li>\n<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li>\n</ol>\n<p>ä½†æ˜¯ï¼Œâ€œå“²å­¦å®¶å°±é¤â€å…‰çœ‹åå­—å°±å¾ˆè®¨åŒï¼Œç„¶åä»¥ä¸Šè¿™4ä¸ªæ¡ä»¶çœ‹èµ·æ¥ä¹Ÿå¾ˆç»•å£ï¼Œå†åŠ ä¸Šç¬”è€…åˆæ˜¯ä¸ªæ‡’äººï¼Œæ‰€ä»¥è¦è®©æˆ‘åœ¨é¢è¯•æ—¶æŠŠè¿™äº›â€œèƒŒè¯µâ€å‡ºæ¥å®åœ¨æ˜¯å¤ªéš¾äº†ï¼å¿…é¡»è¦æƒ³åŠæ³•æŠŠè¿™4ä¸ªæ¡ä»¶ç®€åŒ–ä¸€ä¸‹ï¼<br> äºæ˜¯ï¼Œé€šè¿‡å¯¹4ä¸ªé€ æˆæ­»é”çš„æ¡ä»¶è¿›è¡Œé€æ¡åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹4ä¸ªç»“è®ºã€‚</p>\n<ol>\n<li>äº’æ–¥æ¡ä»¶ â€”&gt; ç‹¬å é”çš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚</li>\n<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ â€”&gt; ç‹¬å é”çš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œå°è¯•è·å–é”æ—¶å¹¶ä¸ä¼šé‡Šæ”¾å·²ç»æŒæœ‰çš„é”</li>\n<li>ä¸å‰¥å¤ºæ¡ä»¶ â€”&gt; ç‹¬å é”çš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚</li>\n<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ â€”&gt; å”¯ä¸€éœ€è¦è®°å¿†çš„é€ æˆæ­»é”çš„æ¡ä»¶ã€‚</li>\n</ol>\n<p>ä¸é”™ï¼å¤æ‚çš„æ­»é”æ¡ä»¶ç»è¿‡ç®€åŒ–ï¼Œç°åœ¨éœ€è¦è®°å¿†çš„ä»…åªæœ‰ç‹¬å é”ä¸ç¬¬å››ä¸ªæ¡ä»¶è€Œå·²ã€‚</p>\n<p>æ‰€ä»¥ï¼Œé¢å¯¹å¦‚ä½•é¿å…æ­»é”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™æ ·å›ç­”ï¼<br> :   åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œé¿å…äº†é€»è¾‘ä¸­å‡ºç°å¤æ•°ä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹çº¿ç¨‹æ‰€éœ€è¦çš„ç‹¬å é”çš„çš„æƒ…å†µï¼Œå°±å¯ä»¥é¿å…æ­»é”ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡â€œç ´åâ€ç¬¬å››ä¸ªæ­»é”æ¡ä»¶ï¼Œæ¥è§£å†³ç¬¬ä¸€ä¸ªå°èŠ‚ä¸­çš„æ­»é”ç¤ºä¾‹å¹¶è¯æ˜æˆ‘ä»¬çš„ç»“è®ºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeadLockDemo2</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// çº¿ç¨‹a</span></span><br><span class=\"line\">        Thread td1 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                DeadLockDemo2.method1();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// çº¿ç¨‹b</span></span><br><span class=\"line\">        Thread td2 = <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                DeadLockDemo2.method2();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        td1.start();</span><br><span class=\"line\">        td2.start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">method1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (String.class) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;çº¿ç¨‹aå°è¯•è·å–integer.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (Integer.class) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;çº¿ç¨‹aè·å–åˆ°integer.class&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">method2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å†è·å–çº¿ç¨‹aéœ€è¦çš„Integer.classé”ã€‚</span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (String.class) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">2000</span>);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;çº¿ç¨‹bå°è¯•è·å–Integer.class&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (Integer.class) &#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;çº¿ç¨‹bè·å–åˆ°Integer.class&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">-----------------</span><br><span class=\"line\">çº¿ç¨‹aå°è¯•è·å–integer.class</span><br><span class=\"line\">çº¿ç¨‹aè·å–åˆ°integer.class</span><br><span class=\"line\">çº¿ç¨‹bå°è¯•è·å–Integer.class</span><br><span class=\"line\">çº¿ç¨‹bè·å–åˆ°Integer.class</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äºå·²ç»ä¸å­˜åœ¨çº¿ç¨‹aæŒæœ‰çº¿ç¨‹béœ€è¦çš„é”ï¼Œè€Œçº¿ç¨‹bæŒæœ‰çº¿ç¨‹aéœ€è¦çš„é”çš„é€»è¾‘äº†ï¼Œæ‰€ä»¥Demoé¡ºåˆ©æ‰§è¡Œå®Œæ¯•ã€‚</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>æ˜¯å¦èƒ½å¤Ÿç®€å•æ˜äº†çš„åœ¨é¢è¯•ä¸­é˜è¿°æ¸…æ¥šæ­»é”äº§ç”Ÿçš„åŸå› ï¼Œå¹¶ç»™å‡ºè§£å†³æ­»é”çš„æ–¹æ¡ˆï¼Œå¯ä»¥ä½“ç°ç¨‹åºå‘˜åœ¨é¢å¯¹å¯¹å¹¶å‘é—®é¢˜æ—¶æ€è·¯æ˜¯å¦æ¸…æ™°ï¼Œå¯¹å¹¶å‘çš„åŸºç¡€æŒæ¡æ˜¯å¦ç‰¢å›ºç­‰ç­‰ã€‚<br> è€Œä¸”åœ¨å®é™…é¡¹ç›®ä¸­å¹¶å‘æ¨¡å—çš„é€»è¾‘å¾€å¾€æ¯”æœ¬æ–‡çš„ç¤ºä¾‹å¤æ‚è®¸å¤šï¼Œæ‰€ä»¥å†™å¹¶å‘åº”ç”¨ä¹‹å‰ä¸€å®šè¦å……åˆ†ç†è§£æœ¬æ–‡æ‰€æ€»ç»“çš„è¦ç‚¹ï¼Œå¹¶åˆ‡è®°ï¼Œå¹¶å‘ç¨‹åºç¼–ç¨‹åœ¨ä¸æ˜¾è‘—å½±å“ç¨‹åºæ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸€å®šè¦å°½å¯èƒ½çš„ä¿å®ˆã€‚</p>\n<h1 id=\"5-I-O-å¤šè·¯å¤ç”¨ï¼Œselect-poll-epoll-è¯¦è§£\"><a href=\"#5-I-O-å¤šè·¯å¤ç”¨ï¼Œselect-poll-epoll-è¯¦è§£\" class=\"headerlink\" title=\"5.I/O å¤šè·¯å¤ç”¨ï¼Œselect / poll / epoll è¯¦è§£\"></a>5.I/O å¤šè·¯å¤ç”¨ï¼Œselect / poll / epoll è¯¦è§£</h1><h2 id=\"ä»é˜»å¡-I-O-åˆ°-I-O-å¤šè·¯å¤ç”¨\"><a href=\"#ä»é˜»å¡-I-O-åˆ°-I-O-å¤šè·¯å¤ç”¨\" class=\"headerlink\" title=\"ä»é˜»å¡ I/O åˆ° I/O å¤šè·¯å¤ç”¨\"></a>ä»é˜»å¡ I/O åˆ° I/O å¤šè·¯å¤ç”¨</h2><p>é˜»å¡ I/Oï¼Œæ˜¯æŒ‡è¿›ç¨‹å‘èµ·è°ƒç”¨åï¼Œä¼šè¢«æŒ‚èµ·ï¼ˆé˜»å¡ï¼‰ï¼Œç›´åˆ°æ”¶åˆ°æ•°æ®å†è¿”å›ã€‚å¦‚æœè°ƒç”¨ä¸€ç›´ä¸è¿”å›ï¼Œè¿›ç¨‹å°±ä¼šä¸€ç›´è¢«æŒ‚èµ·ã€‚å› æ­¤ï¼Œå½“ä½¿ç”¨é˜»å¡ I/O æ—¶ï¼Œéœ€è¦ä½¿ç”¨<strong>å¤šçº¿ç¨‹</strong>æ¥å¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p>\n<p>å¤šçº¿ç¨‹åˆ‡æ¢æœ‰ä¸€å®šçš„å¼€é”€ï¼Œå› æ­¤å¼•å…¥éé˜»å¡ I/Oã€‚éé˜»å¡ I/O ä¸ä¼šå°†è¿›ç¨‹æŒ‚èµ·ï¼Œè°ƒç”¨æ—¶ä¼šç«‹å³è¿”å›æˆåŠŸæˆ–é”™è¯¯ï¼Œå› æ­¤å¯ä»¥åœ¨<strong>ä¸€ä¸ªçº¿ç¨‹</strong>é‡Œ<em>è½®è¯¢</em>å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ªã€‚</p>\n<p>ä½†æ˜¯éé˜»å¡ I/O çš„ç¼ºç‚¹æ˜¯ï¼šæ¯æ¬¡å‘èµ·ç³»ç»Ÿè°ƒç”¨ï¼Œåªèƒ½æ£€æŸ¥<strong>ä¸€ä¸ª</strong>æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ªã€‚å½“æ–‡ä»¶æè¿°ç¬¦å¾ˆå¤šæ—¶ï¼Œç³»ç»Ÿè°ƒç”¨çš„æˆæœ¬å¾ˆé«˜ã€‚</p>\n<p>å› æ­¤å¼•å…¥äº† I/O å¤šè·¯å¤ç”¨ï¼Œå¯ä»¥<strong>é€šè¿‡ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ï¼Œæ£€æŸ¥å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€</strong>ã€‚è¿™æ˜¯ I/O å¤šè·¯å¤ç”¨çš„ä¸»è¦ä¼˜ç‚¹ï¼Œç›¸æ¯”äºéé˜»å¡ I/Oï¼Œåœ¨æ–‡ä»¶æè¿°ç¬¦è¾ƒå¤šçš„åœºæ™¯ä¸‹ï¼Œé¿å…äº†é¢‘ç¹çš„ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼Œå‡å°‘äº†ç³»ç»Ÿè°ƒç”¨çš„å¼€é”€ã€‚</p>\n<blockquote>\n<p>I/O å¤šè·¯å¤ç”¨ç›¸å½“äºå°†ã€Œéå†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€é€šè¿‡éé˜»å¡ I/O æŸ¥çœ‹å…¶æ˜¯å¦å°±ç»ªã€çš„è¿‡ç¨‹ä»ç”¨æˆ·çº¿ç¨‹ç§»åˆ°äº†å†…æ ¸ä¸­ï¼Œç”±å†…æ ¸æ¥è´Ÿè´£è½®è¯¢ã€‚</p>\n</blockquote>\n<p>è¿›ç¨‹å¯ä»¥é€šè¿‡ selectã€pollã€epoll å‘èµ· I/O å¤šè·¯å¤ç”¨çš„ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™äº›ç³»ç»Ÿè°ƒç”¨éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼š<strong>å¦‚æœä¼ å…¥çš„å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­ï¼Œæœ‰æè¿°ç¬¦å°±ç»ªï¼Œåˆ™è¿”å›å°±ç»ªçš„æè¿°ç¬¦ï¼›å¦åˆ™å¦‚æœæ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦éƒ½æœªå°±ç»ªï¼Œå°±é˜»å¡è°ƒç”¨è¿›ç¨‹ï¼Œç›´åˆ°æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼Œæˆ–è€…é˜»å¡æ—¶é•¿è¶…è¿‡è®¾ç½®çš„ timeout åï¼Œå†è¿”å›</strong>ã€‚ä½¿ç”¨éé˜»å¡ I/O æ£€æŸ¥æ¯ä¸ªæè¿°ç¬¦çš„å°±ç»ªçŠ¶æ€ã€‚</p>\n<p>å¦‚æœ <code>timeout</code> å‚æ•°è®¾ä¸º NULLï¼Œä¼šæ— é™é˜»å¡ç›´åˆ°æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼›å¦‚æœ <code>timeout</code> å‚æ•°è®¾ä¸º 0ï¼Œä¼šç«‹å³è¿”å›ï¼Œä¸é˜»å¡ã€‚</p>\n<p>I/O å¤šè·¯å¤ç”¨å¼•å…¥äº†ä¸€äº›é¢å¤–çš„æ“ä½œå’Œå¼€é”€ï¼Œæ€§èƒ½æ›´å·®ã€‚ä½†æ˜¯å¥½å¤„æ˜¯ç”¨æˆ·å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å†…åŒæ—¶å¤„ç†å¤šä¸ª I/O è¯·æ±‚ã€‚å¦‚æœä¸é‡‡ç”¨ I/O å¤šè·¯å¤ç”¨ï¼Œåˆ™å¿…é¡»é€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼ï¼Œæ¯ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ª I/O è¯·æ±‚ã€‚åè€…çº¿ç¨‹åˆ‡æ¢ä¹Ÿæ˜¯æœ‰ä¸€å®šçš„å¼€é”€çš„ã€‚è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥æŸ¥çœ‹æœ€ä¸‹æ–‡ <a href=\"https://imageslr.github.io/2020/02/27/select-poll-epoll.html#redis-%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B\">Redis çš„çº¿ç¨‹æ¨¡å‹</a>ã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆ-I-O-å¤šè·¯å¤ç”¨å†…éƒ¨éœ€è¦ä½¿ç”¨éé˜»å¡-I-O\"><a href=\"#ä¸ºä»€ä¹ˆ-I-O-å¤šè·¯å¤ç”¨å†…éƒ¨éœ€è¦ä½¿ç”¨éé˜»å¡-I-O\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆ I/O å¤šè·¯å¤ç”¨å†…éƒ¨éœ€è¦ä½¿ç”¨éé˜»å¡ I/O\"></a>ä¸ºä»€ä¹ˆ I/O å¤šè·¯å¤ç”¨å†…éƒ¨éœ€è¦ä½¿ç”¨éé˜»å¡ I/O</h3><p>I/O å¤šè·¯å¤ç”¨<strong>å†…éƒ¨</strong>ä¼šéå†é›†åˆä¸­çš„æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåˆ¤æ–­å…¶æ˜¯å¦å°±ç»ªï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">for fd in read_set</span><br><span class=\"line\">    ifï¼ˆ readable(fd) ) &#x2F;&#x2F; åˆ¤æ–­ fd æ˜¯å¦å°±ç»ª</span><br><span class=\"line\">        count++</span><br><span class=\"line\">        FDSET(fd, &amp;res_rset) &#x2F;&#x2F; å°† fd æ·»åŠ åˆ°å°±ç»ªé›†åˆä¸­</span><br><span class=\"line\">        break</span><br><span class=\"line\">...</span><br><span class=\"line\">return count</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œçš„ <code>readable(fd)</code> å°±æ˜¯ä¸€ä¸ªéé˜»å¡ I/O è°ƒç”¨ã€‚è¯•æƒ³ï¼Œå¦‚æœè¿™é‡Œä½¿ç”¨é˜»å¡ I/Oï¼Œé‚£ä¹ˆ <code>fd</code> æœªå°±ç»ªæ—¶ï¼Œ<code>select</code> ä¼šé˜»å¡åœ¨è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šï¼Œæ— æ³•æ£€æŸ¥ä¸‹ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p>\n<p>æ³¨æ„ï¼šè¿™é‡Œè¯´çš„æ˜¯ I/O å¤šè·¯å¤ç”¨çš„å†…éƒ¨å®ç°ï¼Œè€Œä¸æ˜¯è¯´ï¼Œä½¿ç”¨ I/O å¤šè·¯å¤ç”¨å°±å¿…é¡»ä½¿ç”¨éé˜»å¡ I/Oï¼Œè§ä¸‹æ–‡<a href=\"https://imageslr.github.io/2020/02/27/select-poll-epoll.html#whynonblock\">ä¸ºä»€ä¹ˆè¾¹ç¼˜è§¦å‘å¿…é¡»ä½¿ç”¨éé˜»å¡ I/O</a>ã€‚</p>\n<h2 id=\"select\"><a href=\"#select\" class=\"headerlink\" title=\"select\"></a>select</h2><h3 id=\"å‡½æ•°ç­¾åä¸å‚æ•°\"><a href=\"#å‡½æ•°ç­¾åä¸å‚æ•°\" class=\"headerlink\" title=\"å‡½æ•°ç­¾åä¸å‚æ•°\"></a>å‡½æ•°ç­¾åä¸å‚æ•°</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int select(int nfds,</span><br><span class=\"line\">            fd_set *restrict readfds,</span><br><span class=\"line\">            fd_set *restrict writefds,</span><br><span class=\"line\">            fd_set *restrict errorfds,</span><br><span class=\"line\">            struct timeval *restrict timeout);</span><br></pre></td></tr></table></figure>\n\n<p><code>readfds</code>ã€<code>writefds</code>ã€<code>errorfds</code> æ˜¯ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚<code>select</code> ä¼šéå†æ¯ä¸ªé›†åˆçš„å‰ <code>nfds</code> ä¸ªæè¿°ç¬¦ï¼Œåˆ†åˆ«æ‰¾åˆ°å¯ä»¥è¯»å–ã€å¯ä»¥å†™å…¥ã€å‘ç”Ÿé”™è¯¯çš„æè¿°ç¬¦ï¼Œç»Ÿç§°ä¸ºâ€œå°±ç»ªâ€çš„æè¿°ç¬¦ã€‚ç„¶åç”¨æ‰¾åˆ°çš„å­é›†æ›¿æ¢å‚æ•°ä¸­çš„å¯¹åº”é›†åˆï¼Œè¿”å›æ‰€æœ‰å°±ç»ªæè¿°ç¬¦çš„æ€»æ•°ã€‚</p>\n<p><code>timeout</code> å‚æ•°è¡¨ç¤ºè°ƒç”¨ <code>select</code> æ—¶çš„é˜»å¡æ—¶é•¿ã€‚å¦‚æœæ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦éƒ½æœªå°±ç»ªï¼Œå°±é˜»å¡è°ƒç”¨è¿›ç¨‹ï¼Œç›´åˆ°æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼Œæˆ–è€…é˜»å¡è¶…è¿‡è®¾ç½®çš„ timeout åï¼Œè¿”å›ã€‚å¦‚æœ <code>timeout</code> å‚æ•°è®¾ä¸º NULLï¼Œä¼šæ— é™é˜»å¡ç›´åˆ°æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼›å¦‚æœ <code>timeout</code> å‚æ•°è®¾ä¸º 0ï¼Œä¼šç«‹å³è¿”å›ï¼Œä¸é˜»å¡ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦-fd\"><a href=\"#ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦-fd\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦ fd\"></a>ä»€ä¹ˆæ˜¯æ–‡ä»¶æè¿°ç¬¦ fd</h3><p>æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorï¼‰æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œä» 0 å¼€å§‹ã€‚è¿›ç¨‹ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦æ¥æ ‡è¯†ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ã€‚</p>\n<p>ç³»ç»Ÿä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹ç»´æŠ¤äº†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œè¡¨ç¤ºè¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ï¼Œè€Œ<strong>æ–‡ä»¶æè¿°ç¬¦å®é™…ä¸Šå°±æ˜¯è¿™å¼ è¡¨çš„ç´¢å¼•</strong>ã€‚å½“è¿›ç¨‹æ‰“å¼€ï¼ˆ<code>open</code>ï¼‰æˆ–è€…æ–°å»ºï¼ˆ<code>create</code>ï¼‰æ–‡ä»¶æ—¶ï¼Œå†…æ ¸ä¼šåœ¨è¯¥è¿›ç¨‹çš„æ–‡ä»¶åˆ—è¡¨ä¸­æ–°å¢ä¸€ä¸ªè¡¨é¡¹ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ â€”â€” ä¹Ÿå°±æ˜¯æ–°å¢è¡¨é¡¹çš„ä¸‹æ ‡ã€‚</p>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªè¿›ç¨‹æœ€å¤šå¯ä»¥æ‰“å¼€ 64 ä¸ªæ–‡ä»¶ï¼Œ<code>fd âˆˆ 0~63</code>ã€‚åœ¨ä¸åŒç³»ç»Ÿä¸Šï¼Œæœ€å¤šå…è®¸æ‰“å¼€çš„æ–‡ä»¶ä¸ªæ•°ä¸åŒï¼ŒLinux 2.4.22 å¼ºåˆ¶è§„å®šæœ€å¤šä¸èƒ½è¶…è¿‡ 1,048,576ã€‚</p>\n<p><a href=\"https://github.com/labuladong/fucking-algorithm/blob/master/%E6%8A%80%E6%9C%AF/linux%E8%BF%9B%E7%A8%8B.md\">è¿™ç¯‡æ–‡ç« </a>ä»¥å›¾ç¤ºçš„æ–¹å¼å¯¹æ–‡ä»¶æè¿°ç¬¦ä½œäº†æ·±å…¥åœ°è®²è§£ï¼Œå¯ä»¥è¿›ä¸€æ­¥é˜…è¯»ã€‚</p>\n<h3 id=\"socket-ä¸-fd-çš„å…³ç³»\"><a href=\"#socket-ä¸-fd-çš„å…³ç³»\" class=\"headerlink\" title=\"socket ä¸ fd çš„å…³ç³»\"></a>socket ä¸ fd çš„å…³ç³»</h3><p>socket æ˜¯ Unix ä¸­çš„æœ¯è¯­ã€‚socket å¯ä»¥ç”¨äºåŒä¸€å°ä¸»æœºçš„ä¸åŒè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œä¹Ÿå¯ä»¥ç”¨äºä¸åŒä¸»æœºé—´çš„é€šä¿¡ã€‚ä¸€ä¸ª socket åŒ…å«åœ°å€ã€ç±»å‹å’Œé€šä¿¡åè®®ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ <code>socket()</code> å‡½æ•°åˆ›å»ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int socket(int domain, int type, int protocol)</span><br></pre></td></tr></table></figure>\n\n<p>è¿”å›çš„å°±æ˜¯è¿™ä¸ª socket å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ <code>fd</code>ã€‚</p>\n<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š<strong>socket æ˜¯è¿›ç¨‹é—´é€šä¿¡è§„åˆ™çš„é«˜å±‚æŠ½è±¡ï¼Œè€Œ fd æä¾›çš„æ˜¯åº•å±‚çš„å…·ä½“å®ç°</strong>ã€‚socket ä¸ fd æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚<strong>é€šè¿‡ socket é€šä¿¡ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ <code>fd</code> è¯»å†™æ–‡ä»¶</strong>ã€‚è¿™ä¹Ÿç¬¦åˆ Unixâ€œä¸€åˆ‡çš†æ–‡ä»¶â€çš„å“²å­¦ã€‚</p>\n<p>åé¢å¯ä»¥å°† socket å’Œ fd è§†ä¸ºåŒä¹‰è¯ã€‚</p>\n<h3 id=\"fd-set-æ–‡ä»¶æè¿°ç¬¦é›†åˆ\"><a href=\"#fd-set-æ–‡ä»¶æè¿°ç¬¦é›†åˆ\" class=\"headerlink\" title=\"fd_set æ–‡ä»¶æè¿°ç¬¦é›†åˆ\"></a>fd_set æ–‡ä»¶æè¿°ç¬¦é›†åˆ</h3><p>å‚æ•°ä¸­çš„ <code>fd_set</code> ç±»å‹è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦çš„é›†åˆã€‚</p>\n<p>ç”±äºæ–‡ä»¶æè¿°ç¬¦ <code>fd</code> æ˜¯ä¸€ä¸ªä» 0 å¼€å§‹çš„æ— ç¬¦å·æ•´æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ <code>fd_set</code> çš„<strong>äºŒè¿›åˆ¶æ¯ä¸€ä½</strong>æ¥è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚æŸä¸€ä½ä¸º 1ï¼Œè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å·²å°±ç»ªã€‚æ¯”å¦‚æ¯”å¦‚è®¾ <code>fd_set</code> é•¿åº¦ä¸º 1 å­—èŠ‚ï¼Œåˆ™ä¸€ä¸ª <code>fd_set</code> å˜é‡æœ€å¤§å¯ä»¥è¡¨ç¤º 8 ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚å½“ <code>select</code> è¿”å› <code>fd_set = 00010011</code> æ—¶ï¼Œè¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦ <code>1</code>ã€<code>2</code>ã€<code>5</code> å·²ç»å°±ç»ªã€‚</p>\n<p><code>fd_set</code> çš„ä½¿ç”¨æ¶‰åŠä»¥ä¸‹å‡ ä¸ª APIï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">#include &lt;sys&#x2F;select.h&gt;   </span><br><span class=\"line\">int FD_ZERO(int fd, fd_set *fdset);  &#x2F;&#x2F; å°† fd_set æ‰€æœ‰ä½ç½® 0</span><br><span class=\"line\">int FD_CLR(int fd, fd_set *fdset);   &#x2F;&#x2F; å°† fd_set æŸä¸€ä½ç½® 0</span><br><span class=\"line\">int FD_SET(int fd, fd_set *fd_set);  &#x2F;&#x2F; å°† fd_set æŸä¸€ä½ç½® 1</span><br><span class=\"line\">int FD_ISSET(int fd, fd_set *fdset); &#x2F;&#x2F; æ£€æµ‹ fd_set æŸä¸€ä½æ˜¯å¦ä¸º 1</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"select-ä½¿ç”¨ç¤ºä¾‹\"><a href=\"#select-ä½¿ç”¨ç¤ºä¾‹\" class=\"headerlink\" title=\"select ä½¿ç”¨ç¤ºä¾‹\"></a>select ä½¿ç”¨ç¤ºä¾‹</h3><p>ä¸‹å›¾çš„ä»£ç è¯´æ˜ï¼š</p>\n<ol>\n<li>å…ˆå£°æ˜ä¸€ä¸ª <code>fd_set</code> ç±»å‹çš„å˜é‡ <code>readFDs</code></li>\n<li>è°ƒç”¨ <code>FD_ZERO</code>ï¼Œå°† <code>readFDs</code> æ‰€æœ‰ä½ç½® 0</li>\n<li>è°ƒç”¨ <code>FD_SET</code>ï¼Œå°† <code>readFDs</code> æ„Ÿå…´è¶£çš„ä½ç½® 1ï¼Œè¡¨ç¤ºè¦ç›‘å¬è¿™å‡ ä¸ªæ–‡ä»¶æè¿°ç¬¦</li>\n<li>å°† <code>readFDs</code> ä¼ ç»™ <code>select</code>ï¼Œè°ƒç”¨ <code>select</code></li>\n<li><code>select</code> ä¼šå°† <code>readFDs</code> ä¸­å°±ç»ªçš„ä½ç½® 1ï¼Œæœªå°±ç»ªçš„ä½ç½® 0ï¼Œè¿”å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡</li>\n<li>å½“ <code>select</code> è¿”å›åï¼Œè°ƒç”¨ <code>FD_ISSET</code> æ£€æµ‹ç»™å®šä½æ˜¯å¦ä¸º 1ï¼Œè¡¨ç¤ºå¯¹åº”æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ª</li>\n</ol>\n<p>æ¯”å¦‚è¿›ç¨‹æƒ³ç›‘å¬ 1ã€2ã€5 è¿™ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå°±å°† <code>readFDs</code> è®¾ç½®ä¸º <code>00010011</code>ï¼Œç„¶åè°ƒç”¨ <code>select</code>ã€‚</p>\n<p>å¦‚æœ <code>fd=1</code>ã€<code>fd=2</code> å°±ç»ªï¼Œè€Œ <code>fd=5</code> æœªå°±ç»ªï¼Œ<code>select</code> ä¼šå°† <code>readFDs</code> è®¾ç½®ä¸º <code>00000011</code> å¹¶è¿”å› 2ã€‚</p>\n<p>å¦‚æœæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦éƒ½æœªå°±ç»ªï¼Œ<code>select</code> ä¼šé˜»å¡ <code>timeout</code> æ—¶é•¿ï¼Œå†è¿”å›ã€‚è¿™æœŸé—´ï¼Œå¦‚æœ <code>readFDs</code> ç›‘å¬çš„æŸä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šå‘ç”Ÿå¯è¯»äº‹ä»¶ï¼Œåˆ™ <code>select</code> ä¼šå°†å¯¹åº”ä½ç½® 1ï¼Œå¹¶ç«‹å³è¿”å›ã€‚</p>\n<p><img data-src=\"https://imageslr.github.io/media/15732186159520.jpg\" alt=\"15732186159520\"></p>\n<h3 id=\"select-çš„ç¼ºç‚¹\"><a href=\"#select-çš„ç¼ºç‚¹\" class=\"headerlink\" title=\"select çš„ç¼ºç‚¹\"></a>select çš„ç¼ºç‚¹</h3><ol>\n<li>æ€§èƒ½å¼€é”€å¤§<ol>\n<li>è°ƒç”¨ <code>select</code> æ—¶ä¼šé™·å…¥å†…æ ¸ï¼Œè¿™æ—¶éœ€è¦å°†å‚æ•°ä¸­çš„ <code>fd_set</code> ä»ç”¨æˆ·ç©ºé—´æ‹·è´åˆ°å†…æ ¸ç©ºé—´</li>\n<li>å†…æ ¸éœ€è¦éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰ <code>fd_set</code> çš„æ¯ä¸€ä½ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦å°±ç»ª</li>\n</ol>\n</li>\n<li>åŒæ—¶èƒ½å¤Ÿç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°‘ã€‚å—é™äº <code>sizeof(fd_set)</code> çš„å¤§å°ï¼Œåœ¨ç¼–è¯‘å†…æ ¸æ—¶å°±ç¡®å®šäº†ä¸”æ— æ³•æ›´æ”¹ã€‚ä¸€èˆ¬æ˜¯ 1024ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿä¸ç›¸åŒ</li>\n</ol>\n<h2 id=\"poll\"><a href=\"#poll\" class=\"headerlink\" title=\"poll\"></a>poll</h2><p>poll å’Œ select å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚poll é‡‡ç”¨é“¾è¡¨çš„æ–¹å¼å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œæ²¡æœ‰æœ€å¤§å­˜å‚¨æ•°é‡çš„é™åˆ¶ã€‚</p>\n<p>ä»æ€§èƒ½å¼€é”€ä¸Šçœ‹ï¼Œpoll å’Œ select çš„å·®åˆ«ä¸å¤§ã€‚</p>\n<h2 id=\"epoll\"><a href=\"#epoll\" class=\"headerlink\" title=\"epoll\"></a>epoll</h2><p>epoll æ˜¯å¯¹ select å’Œ poll çš„æ”¹è¿›ï¼Œé¿å…äº†â€œæ€§èƒ½å¼€é”€å¤§â€å’Œâ€œæ–‡ä»¶æè¿°ç¬¦æ•°é‡å°‘â€ä¸¤ä¸ªç¼ºç‚¹ã€‚</p>\n<p>ç®€è€Œè¨€ä¹‹ï¼Œepoll æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>ä½¿ç”¨<strong>çº¢é»‘æ ‘</strong>å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦é›†åˆ</li>\n<li>ä½¿ç”¨<strong>é˜Ÿåˆ—</strong>å­˜å‚¨å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦</li>\n<li>æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦åªéœ€åœ¨æ·»åŠ æ—¶ä¼ å…¥ä¸€æ¬¡ï¼›é€šè¿‡äº‹ä»¶æ›´æ”¹æ–‡ä»¶æè¿°ç¬¦çŠ¶æ€</li>\n</ul>\n<p>selectã€poll æ¨¡å‹éƒ½åªä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè€Œ epoll æ¨¡å‹ä½¿ç”¨ä¸‰ä¸ªå‡½æ•°ï¼š<code>epoll_create</code>ã€<code>epoll_ctl</code> å’Œ <code>epoll_wait</code>ã€‚</p>\n<h3 id=\"epoll-create\"><a href=\"#epoll-create\" class=\"headerlink\" title=\"epoll_create\"></a>epoll_create</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int epoll_create(int size);</span><br></pre></td></tr></table></figure>\n\n<p><code>epoll_create</code> ä¼šåˆ›å»ºä¸€ä¸ª <code>epoll</code> å®ä¾‹ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªå¼•ç”¨è¯¥å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p>\n<p>è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦ä»…ä»…æŒ‡å‘å¯¹åº”çš„ <code>epoll</code> å®ä¾‹ï¼Œå¹¶ä¸è¡¨ç¤ºçœŸå®çš„ç£ç›˜æ–‡ä»¶èŠ‚ç‚¹ã€‚å…¶ä»– API å¦‚ <code>epoll_ctl</code>ã€<code>epoll_wait</code> ä¼šä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦æ¥æ“ä½œç›¸åº”çš„ <code>epoll</code> å®ä¾‹ã€‚</p>\n<p>å½“åˆ›å»ºå¥½ epoll å¥æŸ„åï¼Œå®ƒä¼šå ç”¨ä¸€ä¸ª fd å€¼ï¼Œåœ¨ linux ä¸‹æŸ¥çœ‹ <code>/proc/è¿›ç¨‹id/fd/</code>ï¼Œå°±èƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ª fdã€‚æ‰€ä»¥åœ¨ä½¿ç”¨å®Œ epoll åï¼Œå¿…é¡»è°ƒç”¨ <code>close(epfd)</code> å…³é—­å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ fd è¢«è€—å°½ã€‚å½“æŒ‡å‘åŒä¸€ä¸ª <code>epoll</code> å®ä¾‹çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦éƒ½è¢«å…³é—­åï¼Œæ“ä½œç³»ç»Ÿä¼šé”€æ¯è¿™ä¸ª <code>epoll</code> å®ä¾‹ã€‚</p>\n<p><code>epoll</code> å®ä¾‹å†…éƒ¨å­˜å‚¨ï¼š</p>\n<ul>\n<li>ç›‘å¬åˆ—è¡¨ï¼šæ‰€æœ‰è¦ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨çº¢é»‘æ ‘</li>\n<li>å°±ç»ªåˆ—è¡¨ï¼šæ‰€æœ‰å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨é“¾è¡¨</li>\n</ul>\n<h3 id=\"epoll-ctl\"><a href=\"#epoll-ctl\" class=\"headerlink\" title=\"epoll_ctl\"></a>epoll_ctl</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);</span><br></pre></td></tr></table></figure>\n\n<p><code>epoll_ctl</code> ä¼šç›‘å¬æ–‡ä»¶æè¿°ç¬¦ <code>fd</code> ä¸Šå‘ç”Ÿçš„ <code>event</code> äº‹ä»¶ã€‚</p>\n<p>å‚æ•°è¯´æ˜ï¼š</p>\n<ul>\n<li><p><code>epfd</code> å³ <code>epoll_create</code> è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦ï¼ŒæŒ‡å‘ä¸€ä¸ª <code>epoll</code> å®ä¾‹</p>\n</li>\n<li><p><code>fd</code> è¡¨ç¤ºè¦ç›‘å¬çš„ç›®æ ‡æ–‡ä»¶æè¿°ç¬¦</p>\n</li>\n<li><p><code>event</code> è¡¨ç¤ºè¦ç›‘å¬çš„äº‹ä»¶ï¼ˆå¯è¯»ã€å¯å†™ã€å‘é€é”™è¯¯â€¦ï¼‰</p>\n</li>\n<li><pre><code class=\"plaintext\">op\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">è¡¨ç¤ºè¦å¯¹</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;plaintext</span><br><span class=\"line\">fd</span><br></pre></td></tr></table></figure>\n\n\n</code></pre>\n</li>\n</ul>\n<p>  æ‰§è¡Œçš„æ“ä½œï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>\n<ul>\n<li><code>EPOLL_CTL_ADD</code>ï¼šä¸º <code>fd</code> æ·»åŠ ä¸€ä¸ªç›‘å¬äº‹ä»¶ <code>event</code></li>\n<li><code>EPOLL_CTL_MOD</code>ï¼šChange the event event associated with the target file descriptor fdï¼ˆ<code>event</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼Œè¿™ç›¸å½“äºå˜é‡ <code>event</code> æœ¬èº«æ²¡å˜ï¼Œä½†æ˜¯æ›´æ”¹äº†å…¶å†…éƒ¨å­—æ®µçš„å€¼ï¼‰</li>\n<li><code>EPOLL_CTL_DEL</code>ï¼šåˆ é™¤ <code>fd</code> çš„æ‰€æœ‰ç›‘å¬äº‹ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹ <code>event</code> å‚æ•°æ²¡ç”¨</li>\n</ul>\n<p>è¿”å›å€¼ 0 æˆ– -1ï¼Œè¡¨ç¤ºä¸Šè¿°æ“ä½œæˆåŠŸä¸å¦ã€‚</p>\n<p><code>epoll_ctl</code> ä¼šå°†æ–‡ä»¶æè¿°ç¬¦ <code>fd</code> æ·»åŠ åˆ° <code>epoll</code> å®ä¾‹çš„ç›‘å¬åˆ—è¡¨é‡Œï¼ŒåŒæ—¶ä¸º <code>fd</code> è®¾ç½®ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶ç›‘å¬äº‹ä»¶ <code>event</code>ã€‚å½“ <code>fd</code> ä¸Šå‘ç”Ÿç›¸åº”äº‹ä»¶æ—¶ï¼Œä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå°† <code>fd</code> æ·»åŠ åˆ° <code>epoll</code> å®ä¾‹çš„å°±ç»ªé˜Ÿåˆ—ä¸Šã€‚</p>\n<h3 id=\"epoll-wait\"><a href=\"#epoll-wait\" class=\"headerlink\" title=\"epoll_wait\"></a>epoll_wait</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">int epoll_wait(int epfd, struct epoll_event *events,</span><br><span class=\"line\">               int maxevents, int timeout);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ epoll æ¨¡å‹çš„ä¸»è¦å‡½æ•°ï¼ŒåŠŸèƒ½ç›¸å½“äº <code>select</code>ã€‚</p>\n<p>å‚æ•°è¯´æ˜ï¼š</p>\n<ul>\n<li><code>epfd</code> å³ <code>epoll_create</code> è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦ï¼ŒæŒ‡å‘ä¸€ä¸ª <code>epoll</code> å®ä¾‹</li>\n<li><code>events</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¿å­˜å°±ç»ªçŠ¶æ€çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶ç©ºé—´ç”±è°ƒç”¨è€…è´Ÿè´£ç”³è¯·</li>\n<li><code>maxevents</code> æŒ‡å®š <code>events</code> çš„å¤§å°</li>\n<li><code>timeout</code> ç±»ä¼¼äº <code>select</code> ä¸­çš„ timeoutã€‚å¦‚æœæ²¡æœ‰æ–‡ä»¶æè¿°ç¬¦å°±ç»ªï¼Œå³å°±ç»ªé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ <code>epoll_wait</code> ä¼šé˜»å¡ timeout æ¯«ç§’ã€‚å¦‚æœ timeout è®¾ä¸º -1ï¼Œåˆ™ <code>epoll_wait</code> ä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æœ‰æ–‡ä»¶æè¿°ç¬¦å°±ç»ªï¼›å¦‚æœ timeout è®¾ä¸º 0ï¼Œåˆ™ <code>epoll_wait</code> ä¼šç«‹å³è¿”å›</li>\n</ul>\n<p>è¿”å›å€¼è¡¨ç¤º <code>events</code> ä¸­å­˜å‚¨çš„å°±ç»ªæè¿°ç¬¦ä¸ªæ•°ï¼Œæœ€å¤§ä¸è¶…è¿‡ <code>maxevents</code>ã€‚</p>\n<h3 id=\"epoll-çš„ä¼˜ç‚¹\"><a href=\"#epoll-çš„ä¼˜ç‚¹\" class=\"headerlink\" title=\"epoll çš„ä¼˜ç‚¹\"></a>epoll çš„ä¼˜ç‚¹</h3><p>ä¸€å¼€å§‹è¯´ï¼Œepoll æ˜¯å¯¹ select å’Œ poll çš„æ”¹è¿›ï¼Œé¿å…äº†â€œæ€§èƒ½å¼€é”€å¤§â€å’Œâ€œæ–‡ä»¶æè¿°ç¬¦æ•°é‡å°‘â€ä¸¤ä¸ªç¼ºç‚¹ã€‚</p>\n<p>å¯¹äºâ€œæ–‡ä»¶æè¿°ç¬¦æ•°é‡å°‘â€ï¼Œselect ä½¿ç”¨æ•´å‹æ•°ç»„å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œè€Œ epoll ä½¿ç”¨çº¢é»‘æ ‘å­˜å‚¨ï¼Œæ•°é‡è¾ƒå¤§ã€‚</p>\n<p>å¯¹äºâ€œæ€§èƒ½å¼€é”€å¤§â€ï¼Œ<code>epoll_ctl</code> ä¸­ä¸ºæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦æŒ‡å®šäº†å›è°ƒå‡½æ•°ï¼Œå¹¶åœ¨å°±ç»ªæ—¶å°†å…¶åŠ å…¥åˆ°å°±ç»ªåˆ—è¡¨ï¼Œå› æ­¤ epoll ä¸éœ€è¦åƒ <code>select</code> é‚£æ ·éå†æ£€æµ‹æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåªéœ€è¦åˆ¤æ–­å°±ç»ªåˆ—è¡¨æ˜¯å¦ä¸ºç©ºå³å¯ã€‚è¿™æ ·ï¼Œåœ¨æ²¡æœ‰æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œepoll èƒ½æ›´æ—©åœ°è®©å‡ºç³»ç»Ÿèµ„æºã€‚</p>\n<blockquote>\n<p>ç›¸å½“äºæ—¶é—´å¤æ‚åº¦ä» O(n) é™ä¸º O(1)</p>\n</blockquote>\n<p>æ­¤å¤–ï¼Œæ¯æ¬¡è°ƒç”¨ <code>select</code> æ—¶éƒ½éœ€è¦å‘å†…æ ¸æ‹·è´æ‰€æœ‰è¦ç›‘å¬çš„æè¿°ç¬¦é›†åˆï¼Œè€Œ epoll å¯¹äºæ¯ä¸ªæè¿°ç¬¦ï¼Œåªéœ€è¦åœ¨ <code>epoll_ctl</code> ä¼ é€’ä¸€æ¬¡ï¼Œä¹‹å <code>epoll_wait</code> ä¸éœ€è¦å†æ¬¡ä¼ é€’ã€‚è¿™ä¹Ÿå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚</p>\n<h3 id=\"æ°´å¹³è§¦å‘ã€è¾¹ç¼˜è§¦å‘\"><a href=\"#æ°´å¹³è§¦å‘ã€è¾¹ç¼˜è§¦å‘\" class=\"headerlink\" title=\"æ°´å¹³è§¦å‘ã€è¾¹ç¼˜è§¦å‘\"></a>æ°´å¹³è§¦å‘ã€è¾¹ç¼˜è§¦å‘</h3><p><code>select</code> åªæ”¯æŒæ°´å¹³è§¦å‘ï¼Œ<code>epoll</code> æ”¯æŒæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ã€‚</p>\n<p>æ°´å¹³è§¦å‘ï¼ˆLTï¼ŒLevel Triggerï¼‰ï¼šå½“æ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œä¼šè§¦å‘é€šçŸ¥ï¼Œå¦‚æœç”¨æˆ·ç¨‹åºæ²¡æœ‰ä¸€æ¬¡æ€§æŠŠæ•°æ®è¯»/å†™å®Œï¼Œä¸‹æ¬¡è¿˜ä¼šå‘å‡ºå¯è¯»/å¯å†™ä¿¡å·è¿›è¡Œé€šçŸ¥ã€‚</p>\n<p>è¾¹ç¼˜è§¦å‘ï¼ˆETï¼ŒEdge Triggerï¼‰ï¼šä»…å½“æè¿°ç¬¦ä»æœªå°±ç»ªå˜ä¸ºå°±ç»ªæ—¶ï¼Œé€šçŸ¥ä¸€æ¬¡ï¼Œä¹‹åä¸ä¼šå†é€šçŸ¥ã€‚</p>\n<p>åŒºåˆ«ï¼šè¾¹ç¼˜è§¦å‘æ•ˆç‡æ›´é«˜ï¼Œ<strong>å‡å°‘äº†äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°</strong>ï¼Œå‡½æ•°ä¸ä¼šè¿”å›å¤§é‡ç”¨æˆ·ç¨‹åºå¯èƒ½ä¸éœ€è¦çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p>\n<blockquote>\n<p>æ°´å¹³è§¦å‘ã€è¾¹ç¼˜è§¦å‘çš„åç§°æ¥æºï¼šæ•°å­—ç”µè·¯å½“ä¸­çš„ç”µä½æ°´å¹³ï¼Œé«˜ä½ç”µå¹³åˆ‡æ¢ç¬é—´çš„è§¦å‘åŠ¨ä½œå«è¾¹ç¼˜è§¦å‘ï¼Œè€Œå¤„äºé«˜ç”µå¹³çš„è§¦å‘åŠ¨ä½œå«åšæ°´å¹³è§¦å‘ã€‚</p>\n</blockquote>\n<h3 id=\"ä¸ºä»€ä¹ˆè¾¹ç¼˜è§¦å‘å¿…é¡»ä½¿ç”¨éé˜»å¡-I-Oï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¾¹ç¼˜è§¦å‘å¿…é¡»ä½¿ç”¨éé˜»å¡-I-Oï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¾¹ç¼˜è§¦å‘å¿…é¡»ä½¿ç”¨éé˜»å¡ I/Oï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¾¹ç¼˜è§¦å‘å¿…é¡»ä½¿ç”¨éé˜»å¡ I/Oï¼Ÿ</h3><p>å…³äºè¿™ä¸ªé—®é¢˜çš„è§£ç­”ï¼Œå¼ºçƒˆå»ºè®®é˜…è¯»<a href=\"https://eklitzke.org/blocking-io-nonblocking-io-and-epoll\">è¿™ç¯‡æ–‡ç« </a>ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³é”®æ‘˜è¦ï¼š</p>\n<ul>\n<li><p>æ¯æ¬¡é€šè¿‡ <code>read</code> ç³»ç»Ÿè°ƒç”¨è¯»å–æ•°æ®æ—¶ï¼Œæœ€å¤šåªèƒ½è¯»å–ç¼“å†²åŒºå¤§å°çš„å­—èŠ‚æ•°ï¼›å¦‚æœæŸä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸€æ¬¡æ€§æ”¶åˆ°çš„æ•°æ®è¶…è¿‡äº†ç¼“å†²åŒºçš„å¤§å°ï¼Œé‚£ä¹ˆéœ€è¦å¯¹å…¶ <code>read</code> å¤šæ¬¡æ‰èƒ½å…¨éƒ¨è¯»å–å®Œæ¯•</p>\n</li>\n<li><p><code>select</code> å¯ä»¥ä½¿ç”¨é˜»å¡ I/O</p>\n<p>ã€‚é€šè¿‡</p>\n</li>\n</ul>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">select</span><br></pre></td></tr></table></figure>\n\n\n\n<p>  è·å–åˆ°æ‰€æœ‰å¯è¯»çš„æ–‡ä»¶æè¿°ç¬¦åï¼Œéå†æ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œ</p>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">read</span><br></pre></td></tr></table></figure>\n\n\n\n<p>  ä¸€æ¬¡</p>\n<p>  æ•°æ®ï¼ˆè§ä¸Šæ–‡</p>\n<p>  select ç¤ºä¾‹</p>\n<p>  ï¼‰</p>\n<ul>\n<li>è¿™äº›æ–‡ä»¶æè¿°ç¬¦éƒ½æ˜¯å¯è¯»çš„ï¼Œå› æ­¤å³ä½¿ <code>read</code> æ˜¯é˜»å¡ I/Oï¼Œä¹Ÿä¸€å®šå¯ä»¥è¯»åˆ°æ•°æ®ï¼Œä¸ä¼šä¸€ç›´é˜»å¡ä¸‹å»</li>\n<li><code>select</code> é‡‡ç”¨æ°´å¹³è§¦å‘æ¨¡å¼ï¼Œå› æ­¤å¦‚æœç¬¬ä¸€æ¬¡ <code>read</code> æ²¡æœ‰è¯»å–å®Œå…¨éƒ¨æ•°æ®ï¼Œé‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨ <code>select</code> æ—¶ä¾ç„¶ä¼šè¿”å›è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥å†æ¬¡ <code>read</code></li>\n<li><strong><code>select</code> ä¹Ÿå¯ä»¥ä½¿ç”¨éé˜»å¡ I/O</strong>ã€‚å½“éå†æŸä¸ªå¯è¯»æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œä½¿ç”¨ <code>for</code> å¾ªç¯è°ƒç”¨ <code>read</code> <strong>å¤šæ¬¡</strong>ï¼Œç›´åˆ°è¯»å–å®Œæ‰€æœ‰æ•°æ®ä¸ºæ­¢ï¼ˆè¿”å› <code>EWOULDBLOCK</code>ï¼‰ã€‚è¿™æ ·åšä¼šå¤šä¸€æ¬¡ <code>read</code> è°ƒç”¨ï¼Œä½†å¯ä»¥å‡å°‘è°ƒç”¨ <code>select</code> çš„æ¬¡æ•°</li>\n</ul>\n<ul>\n<li>åœ¨</li>\n</ul>\n  <figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">epoll</span><br></pre></td></tr></table></figure>\n\n\n\n<p>  çš„è¾¹ç¼˜è§¦å‘æ¨¡å¼ä¸‹ï¼Œåªä¼šåœ¨æ–‡ä»¶æè¿°ç¬¦çš„å¯è¯»/å¯å†™çŠ¶æ€å‘ç”Ÿåˆ‡æ¢æ—¶ï¼Œæ‰ä¼šæ”¶åˆ°æ“ä½œç³»ç»Ÿçš„é€šçŸ¥</p>\n<ul>\n<li>å› æ­¤ï¼Œå¦‚æœä½¿ç”¨ <code>epoll</code> çš„<strong>è¾¹ç¼˜è§¦å‘æ¨¡å¼</strong>ï¼Œåœ¨æ”¶åˆ°é€šçŸ¥æ—¶ï¼Œ<strong>å¿…é¡»ä½¿ç”¨éé˜»å¡ I/Oï¼Œå¹¶ä¸”å¿…é¡»å¾ªç¯è°ƒç”¨ <code>read</code> æˆ– <code>write</code> å¤šæ¬¡ï¼Œç›´åˆ°è¿”å› <code>EWOULDBLOCK</code> ä¸ºæ­¢</strong>ï¼Œç„¶åå†è°ƒç”¨ <code>epoll_wait</code> ç­‰å¾…æ“ä½œç³»ç»Ÿçš„ä¸‹ä¸€æ¬¡é€šçŸ¥</li>\n<li>å¦‚æœæ²¡æœ‰ä¸€æ¬¡æ€§è¯»/å†™å®Œæ‰€æœ‰æ•°æ®ï¼Œé‚£ä¹ˆåœ¨æ“ä½œç³»ç»Ÿçœ‹æ¥è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°†ä¸ä¼šå†å‘èµ·é€šçŸ¥ï¼Œè°ƒç”¨ <code>epoll_wait</code> ä¼šä½¿å¾—è¯¥æ–‡ä»¶æè¿°ç¬¦ä¸€ç›´ç­‰å¾…ä¸‹å»ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯çš„å“åº”ï¼Œä¸šåŠ¡æµç¨‹æ— æ³•èµ°å®Œ</li>\n<li>è¿™æ ·åšçš„å¥½å¤„æ˜¯æ¯æ¬¡è°ƒç”¨ <code>epoll_wait</code> éƒ½æ˜¯<strong>æœ‰æ•ˆ</strong>çš„â€”â€”ä¿è¯æ•°æ®å…¨éƒ¨è¯»å†™å®Œæ¯•äº†ï¼Œç­‰å¾…ä¸‹æ¬¡é€šçŸ¥ã€‚åœ¨æ°´å¹³è§¦å‘æ¨¡å¼ä¸‹ï¼Œå¦‚æœè°ƒç”¨ <code>epoll_wait</code> æ—¶æ•°æ®æ²¡æœ‰è¯»/å†™å®Œæ¯•ï¼Œä¼šç›´æ¥è¿”å›ï¼Œå†æ¬¡é€šçŸ¥ã€‚å› æ­¤è¾¹ç¼˜è§¦å‘èƒ½æ˜¾è‘—å‡å°‘äº‹ä»¶è¢«è§¦å‘çš„æ¬¡æ•°</li>\n<li>ä¸ºä»€ä¹ˆ <code>epoll</code> çš„<strong>è¾¹ç¼˜è§¦å‘æ¨¡å¼ä¸èƒ½ä½¿ç”¨é˜»å¡ I/O</strong>ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œè¾¹ç¼˜è§¦å‘æ¨¡å¼éœ€è¦å¾ªç¯è¯»/å†™ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ‰€æœ‰æ•°æ®ã€‚å¦‚æœä½¿ç”¨é˜»å¡ I/Oï¼Œé‚£ä¹ˆä¸€å®šä¼šåœ¨æœ€åä¸€æ¬¡è°ƒç”¨ï¼ˆæ²¡æœ‰æ•°æ®å¯è¯»/å†™ï¼‰æ—¶é˜»å¡ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸ç»“æŸ</li>\n</ul>\n<h2 id=\"ä¸‰è€…å¯¹æ¯”\"><a href=\"#ä¸‰è€…å¯¹æ¯”\" class=\"headerlink\" title=\"ä¸‰è€…å¯¹æ¯”\"></a>ä¸‰è€…å¯¹æ¯”</h2><ul>\n<li><code>select</code>ï¼šè°ƒç”¨å¼€é”€å¤§ï¼ˆéœ€è¦å¤åˆ¶é›†åˆï¼‰ï¼›é›†åˆå¤§å°æœ‰é™åˆ¶ï¼›éœ€è¦éå†æ•´ä¸ªé›†åˆæ‰¾åˆ°å°±ç»ªçš„æè¿°ç¬¦</li>\n<li><code>poll</code>ï¼špoll é‡‡ç”¨é“¾è¡¨çš„æ–¹å¼å­˜å‚¨æ–‡ä»¶æè¿°ç¬¦ï¼Œæ²¡æœ‰æœ€å¤§å­˜å‚¨æ•°é‡çš„é™åˆ¶ï¼Œå…¶ä»–æ–¹é¢å’Œ select æ²¡æœ‰åŒºåˆ«</li>\n<li><code>epoll</code>ï¼šè°ƒç”¨å¼€é”€å°ï¼ˆä¸éœ€è¦å¤åˆ¶ï¼‰ï¼›é›†åˆå¤§å°æ— é™åˆ¶ï¼›é‡‡ç”¨å›è°ƒæœºåˆ¶ï¼Œä¸éœ€è¦éå†æ•´ä¸ªé›†åˆ</li>\n</ul>\n<p><code>select</code>ã€<code>poll</code> éƒ½æ˜¯åœ¨ç”¨æˆ·æ€ç»´æŠ¤æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œå› æ­¤æ¯æ¬¡éœ€è¦å°†å®Œæ•´é›†åˆä¼ ç»™å†…æ ¸ï¼›<code>epoll</code> ç”±æ“ä½œç³»ç»Ÿåœ¨å†…æ ¸ä¸­ç»´æŠ¤æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œå› æ­¤åªéœ€è¦åœ¨åˆ›å»ºçš„æ—¶å€™ä¼ å…¥æ–‡ä»¶æè¿°ç¬¦ã€‚</p>\n<p>æ­¤å¤– <code>select</code> åªæ”¯æŒæ°´å¹³è§¦å‘ï¼Œ<code>epoll</code> æ”¯æŒè¾¹ç¼˜è§¦å‘ã€‚</p>\n<h2 id=\"é€‚ç”¨åœºæ™¯\"><a href=\"#é€‚ç”¨åœºæ™¯\" class=\"headerlink\" title=\"é€‚ç”¨åœºæ™¯\"></a>é€‚ç”¨åœºæ™¯</h2><p>å½“è¿æ¥æ•°è¾ƒå¤šå¹¶ä¸”æœ‰å¾ˆå¤šçš„ä¸æ´»è·ƒè¿æ¥æ—¶ï¼Œepoll çš„æ•ˆç‡æ¯”å…¶å®ƒä¸¤è€…é«˜å¾ˆå¤šã€‚å½“è¿æ¥æ•°è¾ƒå°‘å¹¶ä¸”éƒ½ååˆ†æ´»è·ƒçš„æƒ…å†µä¸‹ï¼Œç”±äº epoll éœ€è¦å¾ˆå¤šå›è°ƒï¼Œå› æ­¤æ€§èƒ½å¯èƒ½ä½äºå…¶å®ƒä¸¤è€…ã€‚</p>\n<h2 id=\"Redis-çš„çº¿ç¨‹æ¨¡å‹\"><a href=\"#Redis-çš„çº¿ç¨‹æ¨¡å‹\" class=\"headerlink\" title=\"Redis çš„çº¿ç¨‹æ¨¡å‹\"></a>Redis çš„çº¿ç¨‹æ¨¡å‹</h2><p>Redis æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„å·¥ä½œæ¨¡å‹ï¼Œä½¿ç”¨ I/O å¤šè·¯å¤ç”¨æ¥å¤„ç†å®¢æˆ·ç«¯çš„å¤šä¸ªè¿æ¥ã€‚ä¸ºä»€ä¹ˆ Redis é€‰æ‹©å•çº¿ç¨‹ä¹Ÿèƒ½æ•ˆç‡è¿™ä¹ˆé«˜ï¼Ÿ</p>\n<p>I/O è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ã€ç½‘ç»œï¼‰ç­‰é€Ÿåº¦è¿œè¿œæ…¢äº CPUï¼Œå› æ­¤å¼•å…¥äº†å¤šçº¿ç¨‹æŠ€æœ¯ã€‚å½“ä¸€ä¸ªçº¿ç¨‹å‘èµ· I/O è¯·æ±‚æ—¶ï¼Œå…ˆå°†å®ƒæŒ‚èµ·ï¼Œåˆ‡æ¢åˆ°åˆ«çš„çº¿ç¨‹ï¼›å½“ I/O è®¾å¤‡å°±ç»ªæ—¶ï¼Œå†åˆ‡æ¢å›è¯¥çº¿ç¨‹ã€‚æ€»ä¹‹ï¼Œ<strong>å¤šçº¿ç¨‹æŠ€æœ¯æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨ CPU çš„è®¡ç®—èµ„æºï¼Œé€‚ç”¨äºä¸‹å±‚å­˜å‚¨æ…¢é€Ÿçš„åœºæ™¯</strong>ã€‚</p>\n<p>è€Œ redis æ˜¯çº¯å†…å­˜æ“ä½œï¼Œè¯»å†™é€Ÿåº¦éå¸¸å¿«ã€‚æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šåœ¨å†…å­˜ä¸­å®Œæˆï¼Œä¸æ¶‰åŠä»»ä½• I/O æ“ä½œï¼Œå› æ­¤<strong>å¤šçº¿ç¨‹é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åè€Œæ˜¯ä¸€ç§è´Ÿä¼˜åŒ–</strong>ã€‚Redis é€‰æ‹©åŸºäºéé˜»å¡ I/O çš„ <strong>I/O å¤šè·¯å¤ç”¨æœºåˆ¶</strong>ï¼Œåœ¨å•çº¿ç¨‹é‡Œ<strong>å¹¶å‘</strong>å¤„ç†å®¢æˆ·ç«¯çš„å¤šä¸ªè¿æ¥ï¼Œå‡å°‘å¤šçº¿ç¨‹å¸¦æ¥çš„ç³»ç»Ÿå¼€é”€ï¼ŒåŒæ—¶ä¹Ÿæœ‰æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼Œæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ã€‚</p>\n<p>ä¸è¿‡ redis åœ¨æœ€æ–°çš„å‡ ä¸ªç‰ˆæœ¬ä¸­ä¹Ÿå¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œç›®çš„æ˜¯ï¼š</p>\n<ol>\n<li>å¼‚æ­¥å¤„ç†åˆ é™¤æ“ä½œã€‚å½“åˆ é™¤è¶…å¤§é”®å€¼å¯¹çš„æ—¶å€™ï¼Œå•çº¿ç¨‹å†…åŒæ­¥åœ°åˆ é™¤å¯èƒ½ä¼šé˜»å¡å¾…å¤„ç†çš„ä»»åŠ¡</li>\n<li>åº”å¯¹ç½‘ç»œ I/O çš„åœºæ™¯ï¼Œç½‘ç»œ I/O æ˜¯æ…¢é€Ÿ I/Oã€‚redis6 ååé‡æé«˜äº† 1 å€</li>\n</ol>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://linux.die.net/man/7/epoll\">Linux man page - epoll</a></li>\n<li><a href=\"https://linux.die.net/man/2/epoll_create\">Linux man page - epoll_create</a></li>\n<li><a href=\"https://linux.die.net/man/2/epoll_ctl\">Linux man page - epoll_ctl</a></li>\n<li><a href=\"https://linux.die.net/man/2/epoll_wait\">Linux man page - epoll_wait</a></li>\n</ul>\n","categories":["è®¡ç®—æœºåŸºç¡€çŸ¥è¯†"],"tags":["é¢è¯•","æ“ä½œç³»ç»Ÿ"]},{"title":"è®¾è®¡æ¨¡å¼","url":"/2020/10/20/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","content":"<h1 id=\"å¸¸è§è®¾è®¡æ¨¡å¼\"><a href=\"#å¸¸è§è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"å¸¸è§è®¾è®¡æ¨¡å¼\"></a>å¸¸è§è®¾è®¡æ¨¡å¼</h1><h2 id=\"1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Ÿ\"><a href=\"#1-ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Ÿ\" class=\"headerlink\" title=\"1.ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Ÿ\"></a>1.ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Ÿ</h2><p>åœ¨è®¸å¤šè®¿è°ˆä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„æ¥å£ï¼ŒæŠ½è±¡ç±»ï¼Œä»£ç†å’Œä»¥åŠå…¶ä»–ä¸è®¾è®¡æ¨¡å¼ç›¸å…³çš„é—®é¢˜ã€‚ ä¸€æ—¦äº†è§£äº†è®¾è®¡æ¨¡å¼ï¼Œå®ƒä¼šè®©ä½ è½»æ¾åº”å¯¹ä»»ä½•è®¿è°ˆï¼Œå¹¶å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­åº”ç”¨è¿™äº›ç‰¹æ€§ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°è®¾è®¡æ¨¡å¼å·²ç»å¾—åˆ°éªŒè¯å’Œæµ‹è¯•ã€‚</p>\n<p>ä¸ºäº†ä½¿åº”ç”¨ç¨‹åºå…·æœ‰å¯æ‰©å±•æ€§ï¼Œå¯é æ€§å’Œæ˜“ç»´æŠ¤æ€§ï¼Œåº”è¯¥ç¼–å†™ç¬¦åˆè®¾è®¡æ¨¡å¼çš„ä»£ç ã€‚</p>\n<h2 id=\"2-ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ã€‚\"><a href=\"#2-ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ã€‚\" class=\"headerlink\" title=\"2.ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ã€‚\"></a>2.ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ã€‚</h2><p>è®¾è®¡æ¨¡å¼æ˜¯æˆ‘ä»¬æ¯å¤©ç¼–ç¨‹é‡åˆ°çš„é—®é¢˜çš„å¯é‡ç”¨è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¯¹è±¡çš„ç”Ÿæˆå’Œæ•´åˆé—®é¢˜ã€‚</p>\n<p>æ¢å¥è¯è¯´ï¼Œè®¾è®¡æ¨¡å¼å¯ä»¥ä½œä¸ºå¯åº”ç”¨äºç°å®ä¸–ç•Œç¼–ç¨‹é—®é¢˜çš„æ¨¡æ¿ã€‚</p>\n<h2 id=\"3-è®¾è®¡æ¨¡å¼çš„å‘å±•å†å²\"><a href=\"#3-è®¾è®¡æ¨¡å¼çš„å‘å±•å†å²\" class=\"headerlink\" title=\"3.è®¾è®¡æ¨¡å¼çš„å‘å±•å†å²\"></a>3.è®¾è®¡æ¨¡å¼çš„å‘å±•å†å²</h2><p>è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µæ˜¯ç”±å››äººå¸®ï¼ˆã€Šè®¾è®¡æ¨¡å¼ï¼ˆå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ï¼‰ã€‹çš„å››ä½ä½œè€…ï¼‰æå‡ºã€‚</p>\n<p>å››äººå¸®æŠŠè¿™æœ¬ä¹¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p>\n<p>ç¬¬ä¸€éƒ¨åˆ†è§£é‡Šé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¼˜ç¼ºç‚¹ã€‚</p>\n<p>ç¬¬äºŒéƒ¨åˆ†æ˜¯å…³äº 23 ä¸ªç»å…¸è®¾è®¡æ¨¡å¼çš„æ¼”å˜ã€‚</p>\n<p>è‡ªæå‡ºè®¾è®¡æ¨¡å¼æ¦‚å¿µåï¼Œå››äººå¸®è®¾è®¡æ¨¡å¼åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚</p>\n<h2 id=\"4-è®¾è®¡æ¨¡å¼åˆ†ç±»\"><a href=\"#4-è®¾è®¡æ¨¡å¼åˆ†ç±»\" class=\"headerlink\" title=\"4.è®¾è®¡æ¨¡å¼åˆ†ç±»\"></a>4.è®¾è®¡æ¨¡å¼åˆ†ç±»</h2><p>æ ¹æ®å®é™…åº”ç”¨ä¸­é‡åˆ°çš„ä¸åŒé—®é¢˜ï¼Œå››äººå¸®å°†è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç§ç±»å‹ã€‚</p>\n<ul>\n<li>åˆ›å»ºå‹æ¨¡å¼</li>\n<li>ç»“æ„å‹æ¨¡å¼</li>\n<li>è¡Œä¸ºå‹æ¨¡å¼</li>\n</ul>\n<p>æ¥ä¸‹æ¥å°†æ¦‚è¿°å±äºè¿™ä¸‰ç§ç±»å‹çš„ 23 ç§è®¾è®¡æ¨¡å¼çš„ä¸»è¦æ¦‚å¿µã€‚</p>\n<a id=\"more\"></a>\n\n<h1 id=\"ä¸€ã€åŸºç¡€ç¯‡\"><a href=\"#ä¸€ã€åŸºç¡€ç¯‡\" class=\"headerlink\" title=\"ä¸€ã€åŸºç¡€ç¯‡\"></a>ä¸€ã€åŸºç¡€ç¯‡</h1><h2 id=\"thisã€newã€bindã€callã€apply\"><a href=\"#thisã€newã€bindã€callã€apply\" class=\"headerlink\" title=\"thisã€newã€bindã€callã€apply\"></a>thisã€newã€bindã€callã€apply</h2><h3 id=\"1-this-æŒ‡å‘çš„ç±»å‹\"><a href=\"#1-this-æŒ‡å‘çš„ç±»å‹\" class=\"headerlink\" title=\"1. this æŒ‡å‘çš„ç±»å‹\"></a><strong>1. this æŒ‡å‘çš„ç±»å‹</strong></h3><h4 id=\"this-åœ¨å‡½æ•°çš„æŒ‡å‘æœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š\"><a href=\"#this-åœ¨å‡½æ•°çš„æŒ‡å‘æœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š\" class=\"headerlink\" title=\"this åœ¨å‡½æ•°çš„æŒ‡å‘æœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š\"></a><strong>this åœ¨å‡½æ•°çš„æŒ‡å‘æœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š</strong></h4><ul>\n<li>ä½œä¸ºæ„é€ å‡½æ•°è¢« new è°ƒç”¨ï¼›</li>\n<li>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨ï¼›</li>\n<li>ä½œä¸ºå‡½æ•°ç›´æ¥è°ƒç”¨ï¼›</li>\n<li>è¢« <code>call</code>ã€<code>apply</code>ã€<code>bind</code> è°ƒç”¨ï¼›</li>\n<li>ç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code>ï¼›</li>\n</ul>\n<h4 id=\"1-1-new-ç»‘å®š\"><a href=\"#1-1-new-ç»‘å®š\" class=\"headerlink\" title=\"1.1 new ç»‘å®š\"></a><strong>1.1 new ç»‘å®š</strong></h4><blockquote>\n<p>å‡½æ•°å¦‚æœä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ <code>new</code> è°ƒç”¨æ—¶ï¼Œ <code>this</code> ç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„æ„é€ å‡½æ•°çš„å®ä¾‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> bar = <span class=\"keyword\">new</span> Foo()       <span class=\"comment\">// è¾“å‡º: Foo å®ä¾‹ï¼Œthis å°±æ˜¯ bar</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®é™…ä¸Šä½¿ç”¨ <code>new</code> è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p>\n</blockquote>\n<ul>\n<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›</li>\n<li>æ„é€ å‡½æ•°çš„ <code>prototype</code> è¢«èµ‹å€¼ç»™è¿™ä¸ªæ–°å¯¹è±¡çš„ <code>__proto__</code>ï¼›</li>\n<li>å°†æ–°å¯¹è±¡èµ‹ç»™å½“å‰çš„ <code>this</code>ï¼›</li>\n<li>æ‰§è¡Œæ„é€ å‡½æ•°ï¼›</li>\n<li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆ <code>new</code> è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ï¼Œå¦‚æœè¿”å›çš„ä¸æ˜¯å¯¹è±¡å°†è¢«å¿½ç•¥ï¼›</li>\n</ul>\n<h4 id=\"1-2-æ˜¾å¼ç»‘å®š\"><a href=\"#1-2-æ˜¾å¼ç»‘å®š\" class=\"headerlink\" title=\"1.2 æ˜¾å¼ç»‘å®š\"></a><strong>1.2 æ˜¾å¼ç»‘å®š</strong></h4><blockquote>\n<p>é€šè¿‡ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å‡½æ•°ç»‘å®šçš„ <code>this</code>ï¼Œä½¿å…¶æˆä¸ºæˆ‘ä»¬æŒ‡å®šçš„å¯¹è±¡ã€‚é€šè¿‡è¿™äº›æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°ç»‘å®š <code>this</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\">name, price</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.price = price</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Food</span>(<span class=\"params\">category, name, price</span>) </span>&#123;</span><br><span class=\"line\">    foo.call(<span class=\"built_in\">this</span>, name, price)       <span class=\"comment\">// call æ–¹å¼è°ƒç”¨</span></span><br><span class=\"line\">    <span class=\"comment\">// foo.apply(this, [name, price])    // apply æ–¹å¼è°ƒç”¨</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.category = category</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Food(<span class=\"string\">&#x27;é£Ÿå“&#x27;</span>, <span class=\"string\">&#x27;æ±‰å ¡&#x27;</span>, <span class=\"string\">&#x27;5å—é’±&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &#123;name: &quot;æ±‰å ¡&quot;, price: &quot;5å—é’±&quot;, category: &quot;é£Ÿå“&quot;&#125;</span></span><br><span class=\"line\">call å’Œ apply çš„åŒºåˆ«æ˜¯ call æ–¹æ³•æ¥å—çš„æ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œ apply æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">func.call(thisArg, arg1, arg2, ...)        <span class=\"comment\">// call ç”¨æ³•</span></span><br><span class=\"line\">func.apply(thisArg, [arg1, arg2, ...])     <span class=\"comment\">// apply ç”¨æ³•</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è€Œ <code>bind</code> æ–¹æ³•æ˜¯è®¾ç½® <code>this</code> ä¸ºç»™å®šçš„å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¸”åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œå°†ç»™å®šå‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">func.bind(thisArg[, arg1[, arg2[, ...]]])    <span class=\"comment\">// bind ç”¨æ³•</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> food = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;æ±‰å ¡&#x27;</span>,</span><br><span class=\"line\">    price: <span class=\"string\">&#x27;5å—é’±&#x27;</span>,</span><br><span class=\"line\">    getPrice: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">place</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(place + <span class=\"built_in\">this</span>.price)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">food.getPrice(<span class=\"string\">&#x27;KFC &#x27;</span>)   <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;KFC 5å—é’±&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> getPrice1 = food.getPrice.bind(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&#x27;é¸¡è…¿&#x27;</span>, <span class=\"attr\">price</span>: <span class=\"string\">&#x27;7å—é’±&#x27;</span> &#125;, <span class=\"string\">&#x27;è‚¯æ‰“é¸¡ &#x27;</span>)</span><br><span class=\"line\">getPrice1()       <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;è‚¯æ‰“é¸¡ 7å—é’±&quot;</span></span><br><span class=\"line\">å…³äº bind çš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ apply æ–¹æ³•è‡ªå·±å®ç°ä¸€ä¸ª bind çœ‹ä¸€ä¸‹ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ES5 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"built_in\">Function</span>.prototype.bind || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> self = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> rest1 = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> context = rest1.shift()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> rest2 = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.apply(context, rest1.concat(rest2))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ES6 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"built_in\">Function</span>.prototype.bind || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...rest1</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> self = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> context = rest1.shift()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...rest2</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.apply(context, [...rest1, ...rest2])</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>ES6</code> æ–¹å¼ç”¨äº†ä¸€äº› <code>ES6</code> çš„çŸ¥è¯†æ¯”å¦‚ <code>rest</code> å‚æ•°ã€æ•°ç»„è§£æ„</p>\n</blockquote>\n<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ æŠŠ <code>null</code> æˆ– <code>undefined</code> ä½œä¸º <code>this</code> çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ <code>call</code>ã€<code>apply</code>ã€<code>bind</code>ï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo.call(<span class=\"literal\">null</span>)         <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>bind(this)</code>é“¾å¼è°ƒç”¨ï¼Œå®é™…ä¸Šåå‡ é¡¹æœªæ‰§è¡Œï¼Œå®è´¨ä¸Š <code>this</code> æŒ‡å‘ç¬¬ä¸€ä¸ªç»‘å®š</p>\n<h4 id=\"1-3-éšå¼ç»‘å®š\"><a href=\"#1-3-éšå¼ç»‘å®š\" class=\"headerlink\" title=\"1.3 éšå¼ç»‘å®š\"></a>1.3 éšå¼ç»‘å®š</h4><blockquote>\n<p>å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨ï¼Œå¦‚æœæ˜¯çš„è¯ <code>this</code> ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"string\">&#x27;world&#x27;</span>,</span><br><span class=\"line\">    foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">obj.foo()       <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;world&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code> æ–¹æ³•æ˜¯ä½œä¸ºå¯¹è±¡çš„å±æ€§è°ƒç”¨çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ <code>foo</code> æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œ<code>this</code> æŒ‡å‘ <code>obj</code> å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶ <code>this</code> æŒ‡å‘è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼Œå¦‚æœåµŒå¥—äº†å¤šä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæŒ‡å‘æœ€åä¸€ä¸ªè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"string\">&#x27;world&#x27;</span>,</span><br><span class=\"line\">    b:&#123;</span><br><span class=\"line\">        a:<span class=\"string\">&#x27;China&#x27;</span>,</span><br><span class=\"line\">        foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">obj.b.foo()      <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;China&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ€åä¸€ä¸ªå¯¹è±¡æ˜¯ <code>obj</code> ä¸Šçš„ <code>b</code>ï¼Œé‚£ä¹ˆæ­¤æ—¶ <code>foo</code> æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå…¶ä¸­çš„ <code>this</code> æŒ‡å‘çš„å°±æ˜¯ <code>b</code> å¯¹è±¡ã€‚</p>\n</blockquote>\n<h4 id=\"1-4-é»˜è®¤ç»‘å®š\"><a href=\"#1-4-é»˜è®¤ç»‘å®š\" class=\"headerlink\" title=\"1.4 é»˜è®¤ç»‘å®š\"></a><strong>1.4 é»˜è®¤ç»‘å®š</strong></h4><blockquote>\n<p>å‡½æ•°ç‹¬ç«‹è°ƒç”¨ï¼Œç›´æ¥ä½¿ç”¨ä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿæ˜¯ä¸Šé¢å‡ ç§ç»‘å®šé€”å¾„ä¹‹å¤–çš„æ–¹å¼ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ this ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸‹æ˜¯ <code>winodw</code>ï¼Œ<code>node</code> ç¯å¢ƒæ˜¯ <code>global</code>ï¼‰ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ <code>this</code> ç»‘å®šåˆ° <code>undefined</code> ï¼ˆå› ä¸ºä¸¥æ ¼æ¨¡å¼ä¸å…è®¸ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼‰ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;world&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo()             <span class=\"comment\">// ç›¸å½“äºæ‰§è¡Œ window.foo()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;hello&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: Window å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡ <code>a</code> è¢«å£°æ˜åœ¨å…¨å±€ä½œç”¨åŸŸï¼Œæˆä¸ºå…¨å±€å¯¹è±¡ <code>window</code> çš„ä¸€ä¸ªåŒåå±æ€§ã€‚å‡½æ•° <code>foo</code> è¢«æ‰§è¡Œæ—¶ï¼Œ<code>this</code> æ­¤æ—¶æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ï¼Œå› æ­¤æ‰“å°å‡ºæ¥çš„ <code>a</code> æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ã€‚</p>\n</blockquote>\n<p>æ³¨æ„æœ‰ä¸€ç§æƒ…å†µï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"string\">&#x27;world&#x27;</span>,</span><br><span class=\"line\">    foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> bar = obj.foo</span><br><span class=\"line\"></span><br><span class=\"line\">bar()              <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ­¤æ—¶ <code>bar</code> å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ <code>obj</code> ä¸Šçš„ <code>foo</code> æ–¹æ³•ä¸ºä»€ä¹ˆåˆæŒ‡å‘äº†å…¨å±€å¯¹è±¡å‘¢ï¼Œæ˜¯å› ä¸º <code>bar</code> æ–¹æ³•æ­¤æ—¶æ˜¯ä½œä¸ºå‡½æ•°ç‹¬ç«‹è°ƒç”¨çš„ï¼Œæ‰€ä»¥æ­¤æ—¶çš„åœºæ™¯å±äºé»˜è®¤ç»‘å®šï¼Œè€Œä¸æ˜¯éšå¼ç»‘å®šã€‚è¿™ç§æƒ…å†µå’ŒæŠŠæ–¹æ³•ä½œä¸ºå›è°ƒå‡½æ•°çš„åœºæ™¯ç±»ä¼¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"string\">&#x27;world&#x27;</span>,</span><br><span class=\"line\">    foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    fn()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">func(obj.foo)              <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å‚æ•°ä¼ é€’å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§éšå¼çš„èµ‹å€¼ï¼Œåªä¸è¿‡è¿™é‡Œ <code>obj.foo</code> æ–¹æ³•æ˜¯è¢«éšå¼èµ‹å€¼ç»™äº†å‡½æ•° <code>func</code> çš„å½¢å‚ <code>fn</code>ï¼Œè€Œä¹‹å‰çš„æƒ…æ™¯æ˜¯è‡ªå·±èµ‹å€¼ï¼Œä¸¤ç§æƒ…æ™¯å®é™…ä¸Šç±»ä¼¼ã€‚è¿™ç§åœºæ™¯æˆ‘ä»¬é‡åˆ°çš„æ¯”è¾ƒå¤šçš„æ˜¯ <code>setTimeout</code> å’Œ <code>setInterval</code>ï¼Œå¦‚æœå›è°ƒå‡½æ•°ä¸æ˜¯ç®­å¤´å‡½æ•°ï¼Œé‚£ä¹ˆå…¶ä¸­çš„ <code>this</code> æŒ‡å‘çš„å°±æ˜¯å…¨å±€å¯¹è±¡.</li>\n<li>å…¶å®æˆ‘ä»¬å¯ä»¥æŠŠé»˜è®¤ç»‘å®šå½“ä½œæ˜¯éšå¼ç»‘å®šçš„ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ä¸Šé¢çš„ <code>bar()</code>ï¼Œæˆ‘ä»¬å¯ä»¥å½“ä½œæ˜¯ä½¿ç”¨ <code>window.bar()</code> çš„æ–¹å¼è°ƒç”¨çš„ï¼Œæ­¤æ—¶ bar ä¸­çš„ <code>this</code> æ ¹æ®éšå¼ç»‘å®šçš„æƒ…æ™¯æŒ‡å‘çš„å°±æ˜¯ <code>window</code>ã€‚</li>\n</ul>\n<h3 id=\"2-this-ç»‘å®šçš„ä¼˜å…ˆçº§\"><a href=\"#2-this-ç»‘å®šçš„ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"2. this ç»‘å®šçš„ä¼˜å…ˆçº§\"></a><strong>2. this ç»‘å®šçš„ä¼˜å…ˆçº§</strong></h3><blockquote>\n<p><code>this</code> å­˜åœ¨å¤šä¸ªä½¿ç”¨åœºæ™¯ï¼Œé‚£ä¹ˆå¤šä¸ªåœºæ™¯åŒæ—¶å‡ºç°çš„æ—¶å€™ï¼Œ<code>this</code> åˆ°åº•åº”è¯¥å¦‚ä½•æŒ‡å‘å‘¢ã€‚è¿™é‡Œå­˜åœ¨ä¸€ä¸ªä¼˜å…ˆçº§çš„æ¦‚å¿µï¼Œ<code>this</code> æ ¹æ®ä¼˜å…ˆçº§æ¥ç¡®å®šæŒ‡å‘ã€‚<strong>ä¼˜å…ˆçº§ï¼šnew ç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</strong></p>\n</blockquote>\n<p><strong>æ‰€ä»¥ this çš„åˆ¤æ–­é¡ºåºï¼š</strong></p>\n<ul>\n<li><code>new</code> ç»‘å®šï¼š å‡½æ•°æ˜¯å¦åœ¨ <code>new</code> ä¸­è°ƒç”¨ï¼Ÿå¦‚æœæ˜¯çš„è¯ <code>this</code> ç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ï¼›</li>\n<li>æ˜¾å¼ç»‘å®šï¼š å‡½æ•°æ˜¯å¦æ˜¯é€šè¿‡ <code>bind</code>ã€<code>call</code>ã€<code>apply</code> è°ƒç”¨ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œ<code>this</code> ç»‘å®šçš„æ˜¯æŒ‡å®šçš„å¯¹è±¡ï¼›</li>\n<li>éšå¼ç»‘å®šï¼š å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œ<code>this</code> ç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼›</li>\n<li>å¦‚æœéƒ½ä¸æ˜¯çš„è¯ï¼Œä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ç»‘å®šåˆ° <code>undefined</code>ï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼›</li>\n</ul>\n<h3 id=\"3-ç®­å¤´å‡½æ•°ä¸­çš„-this\"><a href=\"#3-ç®­å¤´å‡½æ•°ä¸­çš„-this\" class=\"headerlink\" title=\"3. ç®­å¤´å‡½æ•°ä¸­çš„ this\"></a><strong>3. ç®­å¤´å‡½æ•°ä¸­çš„ this</strong></h3><ul>\n<li>ç®­å¤´å‡½æ•° æ˜¯æ ¹æ®å…¶å£°æ˜çš„åœ°æ–¹æ¥å†³å®š <code>this</code> çš„</li>\n<li>ç®­å¤´å‡½æ•°çš„ <code>this</code> ç»‘å®šæ˜¯æ— æ³•é€šè¿‡ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> è¢«ä¿®æ”¹çš„ï¼Œä¸”å› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰æ„é€ å‡½æ•° <code>constructor</code>ï¼Œæ‰€ä»¥ä¹Ÿä¸å¯ä»¥ä½¿ç”¨ new è°ƒç”¨ï¼Œå³ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"string\">&#x27;world&#x27;</span>,</span><br><span class=\"line\">    foo: <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">obj.foo()             <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-ä¸€ä¸ª-this-çš„å°ç»ƒä¹ \"><a href=\"#4-ä¸€ä¸ª-this-çš„å°ç»ƒä¹ \" class=\"headerlink\" title=\"4. ä¸€ä¸ª this çš„å°ç»ƒä¹ \"></a><strong>4. ä¸€ä¸ª this çš„å°ç»ƒä¹ </strong></h3><p>ç”¨ä¸€ä¸ªå°ç»ƒä¹ æ¥å®æˆ˜ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">20</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"number\">40</span>,</span><br><span class=\"line\">    foo:<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">    </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.a = <span class=\"number\">60</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">        func.prototype.a = <span class=\"number\">50</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> func</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> bar = obj.foo()        <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 20</span></span><br><span class=\"line\">bar()                      <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 60</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> bar()                  <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 60</span></span><br></pre></td></tr></table></figure>\n\n<p>ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼š</p>\n<ul>\n<li><code>var a = 20</code> è¿™å¥åœ¨å…¨å±€å˜é‡ <code>window</code> ä¸Šåˆ›å»ºäº†ä¸ªå±æ€§ <code>a</code> å¹¶èµ‹å€¼ä¸º <code>20</code>ï¼›</li>\n<li>é¦–å…ˆæ‰§è¡Œçš„æ˜¯ <code>obj.foo()</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°ä¸åˆ›å»ºæ–°çš„å‡½æ•°ä½œç”¨åŸŸç›´æ¥æ²¿ç”¨è¯­å¥å¤–éƒ¨çš„ä½œç”¨åŸŸï¼Œå› æ­¤ <code>obj.foo()</code> æ‰§è¡Œæ—¶ç®­å¤´å‡½æ•°ä¸­ <code>this</code> æ˜¯å…¨å±€ <code>window</code>ï¼Œé¦–å…ˆæ‰“å°å‡º window ä¸Šçš„å±æ€§ a çš„å€¼ 20ï¼Œç®­å¤´å‡½æ•°è¿”å›äº†ä¸€ä¸ªåŸå‹ä¸Šæœ‰ä¸ªå€¼ä¸º <code>50</code> çš„å±æ€§ <code>a</code> çš„å‡½æ•°å¯¹è±¡ <code>func</code> ç»™ <code>bar</code>ï¼›</li>\n<li>ç»§ç»­æ‰§è¡Œçš„æ˜¯ <code>bar()</code>ï¼Œè¿™é‡Œæ‰§è¡Œçš„æ˜¯åˆšåˆšç®­å¤´å‡½æ•°è¿”å›çš„é—­åŒ… <code>func</code>ï¼Œå…¶å†…éƒ¨çš„ <code>this</code> æŒ‡å‘ <code>window</code>ï¼Œå› æ­¤ <code>this.a</code> ä¿®æ”¹äº† <code>window.a</code> çš„å€¼ä¸º <code>60</code> å¹¶æ‰“å°å‡ºæ¥ï¼›</li>\n<li>ç„¶åæ‰§è¡Œçš„æ˜¯ <code>new bar()</code>ï¼Œæ ¹æ®ä¹‹å‰çš„è¡¨è¿°ï¼Œ<code>new</code> æ“ä½œç¬¦ä¼šåœ¨ <code>func</code> å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªç»§æ‰¿äº† <code>func</code> åŸå‹çš„å®ä¾‹å¯¹è±¡å¹¶ç”¨ <code>this</code> æŒ‡å‘å®ƒï¼Œéšå <code>this.a = 60</code> åˆåœ¨å®ä¾‹å¯¹è±¡ä¸Šåˆ›å»ºäº†ä¸€ä¸ªå±æ€§ <code>a</code>ï¼Œåœ¨ä¹‹åçš„æ‰“å°ä¸­å·²ç»åœ¨å®ä¾‹ä¸Šæ‰¾åˆ°äº†å±æ€§ <code>a</code>ï¼Œå› æ­¤å°±ä¸ç»§ç»­å¾€å¯¹è±¡åŸå‹ä¸ŠæŸ¥æ‰¾äº†ï¼Œæ‰€ä»¥æ‰“å°å‡ºç¬¬ä¸‰ä¸ª <code>60</code>ï¼›</li>\n<li>å¦‚æœæŠŠä¸Šé¢ä¾‹å­çš„ç®­å¤´å‡½æ•°æ¢æˆæ™®é€šå‡½æ•°å‘¢ï¼Œç»“æœä¼šæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">20</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\">    a: <span class=\"number\">40</span>,</span><br><span class=\"line\">    foo: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.a = <span class=\"number\">60</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.a)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        func.prototype.a = <span class=\"number\">50</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> func</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> bar = obj.foo()        <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 40</span></span><br><span class=\"line\">bar()                      <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 60</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> bar()                  <span class=\"comment\">// æµè§ˆå™¨ä¸­è¾“å‡º: 60</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é—­åŒ…ä¸é«˜é˜¶å‡½æ•°\"><a href=\"#é—­åŒ…ä¸é«˜é˜¶å‡½æ•°\" class=\"headerlink\" title=\"é—­åŒ…ä¸é«˜é˜¶å‡½æ•°\"></a>é—­åŒ…ä¸é«˜é˜¶å‡½æ•°</h2><h3 id=\"1-é—­åŒ…\"><a href=\"#1-é—­åŒ…\" class=\"headerlink\" title=\"1. é—­åŒ…\"></a><strong>1. é—­åŒ…</strong></h3><h4 id=\"1-1-ä»€ä¹ˆæ˜¯é—­åŒ…\"><a href=\"#1-1-ä»€ä¹ˆæ˜¯é—­åŒ…\" class=\"headerlink\" title=\"1.1 ä»€ä¹ˆæ˜¯é—­åŒ…\"></a><strong>1.1 ä»€ä¹ˆæ˜¯é—­åŒ…</strong></h4><blockquote>\n<p>å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">2</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(a)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> bar</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> baz = foo()</span><br><span class=\"line\"></span><br><span class=\"line\">baz()            <span class=\"comment\">// è¾“å‡º: 2</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>foo</code> å‡½æ•°ä¼ é€’å‡ºäº†ä¸€ä¸ªå‡½æ•° <code>bar</code>ï¼Œä¼ é€’å‡ºæ¥çš„ <code>bar</code> è¢«èµ‹å€¼ç»™ <code>baz</code> å¹¶è°ƒç”¨ï¼Œè™½ç„¶è¿™æ—¶ <code>baz</code> æ˜¯åœ¨ <code>foo</code> ä½œç”¨åŸŸå¤–æ‰§è¡Œçš„ï¼Œä½† <code>baz</code> åœ¨è°ƒç”¨çš„æ—¶å€™å¯ä»¥è®¿é—®åˆ°å‰é¢çš„ <code>bar</code> å‡½æ•°æ‰€åœ¨çš„ <code>foo</code> çš„å†…éƒ¨ä½œç”¨åŸŸã€‚</li>\n<li>ç”±äº <code>bar</code> å£°æ˜åœ¨ <code>foo</code> å‡½æ•°å†…éƒ¨ï¼Œ<code>bar</code> æ‹¥æœ‰æ¶µç›– <code>foo</code> å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œä½¿å¾— <code>foo</code> çš„å†…éƒ¨ä½œç”¨åŸŸä¸€ç›´å­˜æ´»ä¸è¢«å›æ”¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°åœ¨æ‰§è¡Œå®Œåå…¶æ•´ä¸ªå†…éƒ¨ä½œç”¨åŸŸéƒ½ä¼šè¢«é”€æ¯ï¼Œå› ä¸º <code>JavaScript</code> çš„ <code>GC</code>ï¼ˆGarbage Collectionï¼‰åƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚ä½†æ˜¯é—­åŒ…ä¼šé˜»æ­¢æŸäº› <code>GC</code>ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­ <code>foo()</code> æ‰§è¡Œå®Œï¼Œå› ä¸ºè¿”å›çš„ <code>bar</code> å‡½æ•°ä¾ç„¶æŒæœ‰å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œæ‰€ä»¥å…¶å†…éƒ¨ä½œç”¨åŸŸä¸ä¼šè¢«å›æ”¶ã€‚</li>\n<li>æ³¨æ„ï¼š å¦‚æœä¸æ˜¯å¿…é¡»ä½¿ç”¨é—­åŒ…ï¼Œé‚£ä¹ˆå°½é‡é¿å…åˆ›å»ºå®ƒï¼Œå› ä¸ºé—­åŒ…åœ¨å¤„ç†é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—æ–¹é¢å¯¹æ€§èƒ½å…·æœ‰è´Ÿé¢å½±å“ã€‚</li>\n</ul>\n<h4 id=\"1-2-åˆ©ç”¨é—­åŒ…å®ç°ç»“æœç¼“å­˜ï¼ˆå¤‡å¿˜æ¨¡å¼ï¼‰\"><a href=\"#1-2-åˆ©ç”¨é—­åŒ…å®ç°ç»“æœç¼“å­˜ï¼ˆå¤‡å¿˜æ¨¡å¼ï¼‰\" class=\"headerlink\" title=\"1.2 åˆ©ç”¨é—­åŒ…å®ç°ç»“æœç¼“å­˜ï¼ˆå¤‡å¿˜æ¨¡å¼ï¼‰\"></a><strong>1.2 åˆ©ç”¨é—­åŒ…å®ç°ç»“æœç¼“å­˜ï¼ˆå¤‡å¿˜æ¨¡å¼ï¼‰</strong></h4><blockquote>\n<p>å¤‡å¿˜æ¨¡å¼å°±æ˜¯åº”ç”¨é—­åŒ…çš„ç‰¹ç‚¹çš„ä¸€ä¸ªå…¸å‹åº”ç”¨ã€‚æ¯”å¦‚æœ‰ä¸ªå‡½æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¤šæ¬¡è¿è¡Œ <code>add()</code> æ—¶ï¼Œæ¯æ¬¡å¾—åˆ°çš„ç»“æœéƒ½æ˜¯é‡æ–°è®¡ç®—å¾—åˆ°çš„ï¼Œå¦‚æœæ˜¯å¼€é”€å¾ˆå¤§çš„è®¡ç®—æ“ä½œçš„è¯å°±æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½äº†ï¼Œè¿™é‡Œå¯ä»¥å¯¹å·²ç»è®¡ç®—è¿‡çš„è¾“å…¥åšä¸€ä¸ªç¼“å­˜ã€‚</li>\n<li>æ‰€ä»¥è¿™é‡Œå¯ä»¥åˆ©ç”¨é—­åŒ…çš„ç‰¹ç‚¹æ¥å®ç°ä¸€ä¸ªç®€å•çš„ç¼“å­˜ï¼Œåœ¨å‡½æ•°å†…éƒ¨ç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨è¾“å…¥çš„å‚æ•°ï¼Œå¦‚æœä¸‹æ¬¡å†è¾“å…¥ç›¸åŒçš„å‚æ•°ï¼Œé‚£å°±æ¯”è¾ƒä¸€ä¸‹å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœæœ‰ç¼“å­˜ï¼Œå°±ç›´æ¥æŠŠå€¼ä»è¿™ä¸ªå¯¹è±¡é‡Œé¢å–å‡ºæ¥ã€‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* å¤‡å¿˜å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">memorize</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> cache = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">        <span class=\"keyword\">var</span> key = <span class=\"built_in\">JSON</span>.stringify(args)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cache[key] || (cache[key] = fn.apply(fn, args))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¤æ‚è®¡ç®—å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> adder = memorize(add)</span><br><span class=\"line\"></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)            <span class=\"comment\">// è¾“å‡º: 2    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)            <span class=\"comment\">// è¾“å‡º: 2    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">2</span>)            <span class=\"comment\">// è¾“å‡º: 3    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2, &#x27;[2]&#x27;: 3 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>ES6</code> çš„æ–¹å¼ä¼šæ›´ä¼˜é›…ä¸€äº›ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* å¤‡å¿˜å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">memorize</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> cache = &#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> key = <span class=\"built_in\">JSON</span>.stringify(args)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cache[key] || (cache[key] = fn.apply(fn, args))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¤æ‚è®¡ç®—å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> adder = memorize(add)</span><br><span class=\"line\"></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)            <span class=\"comment\">// è¾“å‡º: 2    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)            <span class=\"comment\">// è¾“å‡º: 2    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">2</span>)            <span class=\"comment\">// è¾“å‡º: 3    å½“å‰: cache: &#123; &#x27;[1]&#x27;: 2, &#x27;[2]&#x27;: 3 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼š</p>\n<ul>\n<li>å¤‡å¿˜å‡½æ•°ä¸­ç”¨ <code>JSON.stringify</code> æŠŠä¼ ç»™ <code>adder</code> å‡½æ•°çš„å‚æ•°åºåˆ—åŒ–æˆå­—ç¬¦ä¸²ï¼ŒæŠŠå®ƒå½“åš <code>cache</code> çš„ç´¢å¼•ï¼Œå°† <code>add</code> å‡½æ•°è¿è¡Œçš„ç»“æœå½“åšç´¢å¼•çš„å€¼ä¼ é€’ç»™ <code>cache</code>ï¼Œè¿™æ · <code>adder</code> è¿è¡Œçš„æ—¶å€™å¦‚æœä¼ é€’çš„å‚æ•°ä¹‹å‰ä¼ é€’è¿‡ï¼Œé‚£ä¹ˆå°±è¿”å›ç¼“å­˜å¥½çš„è®¡ç®—ç»“æœï¼Œä¸ç”¨å†è®¡ç®—äº†ï¼Œå¦‚æœä¼ é€’çš„å‚æ•°æ²¡è®¡ç®—è¿‡ï¼Œåˆ™è®¡ç®—å¹¶ç¼“å­˜ <code>fn.apply(fn, args)</code>ï¼Œå†è¿”å›è®¡ç®—çš„ç»“æœã€‚</li>\n<li>å½“ç„¶è¿™é‡Œçš„å®ç°å¦‚æœè¦å®é™…åº”ç”¨çš„è¯ï¼Œè¿˜éœ€è¦ç»§ç»­æ”¹è¿›ä¸€ä¸‹ï¼Œæ¯”å¦‚ï¼š</li>\n<li>ç¼“å­˜ä¸å¯ä»¥æ°¸è¿œæ‰©å¼ ä¸‹å»ï¼Œè¿™æ ·å¤ªè€—è´¹å†…å­˜èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥åªç¼“å­˜æœ€æ–°ä¼ å…¥çš„ <code>n</code> ä¸ªï¼›</li>\n<li>åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©æµè§ˆå™¨çš„æŒä¹…åŒ–æ‰‹æ®µï¼Œæ¥è¿›è¡Œç¼“å­˜çš„æŒä¹…åŒ–ï¼Œæ¯”å¦‚ <code>cookie</code>ã€<code>localStorage</code> ç­‰ï¼›</li>\n<li>è¿™é‡Œçš„å¤æ‚è®¡ç®—å‡½æ•°å¯ä»¥æ˜¯è¿‡å»çš„æŸä¸ªçŠ¶æ€ï¼Œæ¯”å¦‚å¯¹æŸä¸ªç›®æ ‡çš„æ“ä½œï¼Œè¿™æ ·æŠŠè¿‡å»çš„çŠ¶æ€ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿åœ°è¿›è¡ŒçŠ¶æ€å›é€€ã€‚</li>\n<li>å¤æ‚è®¡ç®—å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›æ—¶é—´æ¯”è¾ƒæ…¢çš„å¼‚æ­¥æ“ä½œï¼Œè¿™æ ·å¦‚æœæŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡å°±å¯ä»¥ç›´æ¥ä»æœ¬åœ°è·å–ï¼Œè€Œä¸æ˜¯é‡æ–°è¿›è¡Œå¼‚æ­¥è¯·æ±‚ã€‚</li>\n</ul>\n<blockquote>\n<p>æ³¨æ„ï¼š <code>cache</code> ä¸å¯ä»¥æ˜¯ <code>Map</code>ï¼Œå› ä¸º <code>Map</code> çš„é”®æ˜¯ä½¿ç”¨ <code>===</code> æ¯”è¾ƒçš„ï¼Œå› æ­¤å½“ä¼ å…¥å¼•ç”¨ç±»å‹å€¼ä½œä¸ºé”®æ—¶ï¼Œè™½ç„¶å®ƒä»¬çœ‹ä¸Šå»æ˜¯ç›¸ç­‰çš„ï¼Œä½†å®é™…å¹¶ä¸æ˜¯ï¼Œæ¯”å¦‚ <code>[1]!==[1]</code>ï¼Œæ‰€ä»¥è¿˜æ˜¯è¢«å­˜ä¸ºä¸åŒçš„é”®ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  X é”™è¯¯ç¤ºèŒƒ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">memorize</span>(<span class=\"params\">fn</span>) </span>&#123;        </span><br><span class=\"line\">    <span class=\"keyword\">const</span> cache = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cache.get(args) || cache.set(args, fn.apply(fn, args)).get(args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">a</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> adder = memorize(add)</span><br><span class=\"line\"></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)    <span class=\"comment\">// 2    cache: &#123; [ 1 ] =&gt; 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)    <span class=\"comment\">// 2    cache: &#123; [ 1 ] =&gt; 2, [ 1 ] =&gt; 2 &#125;</span></span><br><span class=\"line\">adder(<span class=\"number\">2</span>)    <span class=\"comment\">// 3    cache: &#123; [ 1 ] =&gt; 2, [ 1 ] =&gt; 2, [ 2 ] =&gt; 3 &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-é«˜é˜¶å‡½æ•°\"><a href=\"#2-é«˜é˜¶å‡½æ•°\" class=\"headerlink\" title=\"2. é«˜é˜¶å‡½æ•°\"></a><strong>2. é«˜é˜¶å‡½æ•°</strong></h3><blockquote>\n<p>é«˜é˜¶å‡½æ•°å°±æ˜¯è¾“å…¥å‚æ•°é‡Œæœ‰å‡½æ•°ï¼Œæˆ–è€…è¾“å‡ºæ˜¯å‡½æ•°çš„å‡½æ•°ã€‚</p>\n</blockquote>\n<h4 id=\"2-1-å‡½æ•°ä½œä¸ºå‚æ•°\"><a href=\"#2-1-å‡½æ•°ä½œä¸ºå‚æ•°\" class=\"headerlink\" title=\"2.1 å‡½æ•°ä½œä¸ºå‚æ•°\"></a><strong>2.1 å‡½æ•°ä½œä¸ºå‚æ•°</strong></h4><blockquote>\n<p>å¦‚æœä½ ç”¨è¿‡ <code>setTimeout</code>ã€<code>setInterval</code>ã€<code>ajax</code> è¯·æ±‚ï¼Œé‚£ä¹ˆä½ å·²ç»ç”¨è¿‡é«˜é˜¶å‡½æ•°äº†ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€å¸¸çœ‹åˆ°çš„åœºæ™¯ï¼šå›è°ƒå‡½æ•°ï¼Œå› ä¸ºå®ƒå°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ¯”å¦‚ <code>ajax</code> è¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å®šä¹‰è¯·æ±‚æˆåŠŸæˆ–è€…å¤±è´¥æ—¶çš„æ“ä½œé€»è¾‘ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">$.ajax(<span class=\"string\">&quot;/request/url&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;è¯·æ±‚æˆåŠŸï¼&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ <code>Array</code>ã€<code>Object</code>ã€<code>String</code> ç­‰ç­‰åŸºæœ¬å¯¹è±¡çš„åŸå‹ä¸Šæœ‰å¾ˆå¤šæ“ä½œæ–¹æ³•ï¼Œå¯ä»¥æ¥å—å›è°ƒå‡½æ•°æ¥æ–¹ä¾¿åœ°è¿›è¡Œå¯¹è±¡æ“ä½œã€‚è¿™é‡Œä¸¾ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ <code>Array.prototype.filter()</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„æ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å›è°ƒå‡½æ•°æ‰§è¡Œåè¿”å› <code>true</code> æˆ–çœŸå€¼çš„æ•°ç»„å…ƒç´ ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> words = [<span class=\"string\">&#x27;spray&#x27;</span>, <span class=\"string\">&#x27;limit&#x27;</span>, <span class=\"string\">&#x27;elite&#x27;</span>, <span class=\"string\">&#x27;exuberant&#x27;</span>, <span class=\"string\">&#x27;destruction&#x27;</span>, <span class=\"string\">&#x27;present&#x27;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> result = words.filter(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">word</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> word.length &gt; <span class=\"number\">6</span></span><br><span class=\"line\">&#125;)  <span class=\"comment\">// è¾“å‡º: [&quot;exuberant&quot;, &quot;destruction&quot;, &quot;present&quot;]</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å›è°ƒå‡½æ•°è¿˜æœ‰ä¸€ä¸ªåº”ç”¨å°±æ˜¯é’©å­ï¼Œå¦‚æœä½ ç”¨è¿‡ Vue æˆ–è€… React ç­‰æ¡†æ¶ï¼Œé‚£ä¹ˆä½ åº”è¯¥å¯¹é’©å­å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒçš„å½¢å¼æ˜¯è¿™æ ·çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\">callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ... ä¸€äº›æ“ä½œ</span></span><br><span class=\"line\">    callback()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-å‡½æ•°ä½œä¸ºè¿”å›å€¼\"><a href=\"#2-2-å‡½æ•°ä½œä¸ºè¿”å›å€¼\" class=\"headerlink\" title=\"2.2 å‡½æ•°ä½œä¸ºè¿”å›å€¼\"></a><strong>2.2 å‡½æ•°ä½œä¸ºè¿”å›å€¼</strong></h4><blockquote>\n<p>å¦ä¸€ä¸ªç»å¸¸çœ‹åˆ°çš„é«˜é˜¶å‡½æ•°çš„åœºæ™¯æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨è¾“å‡ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸»è¦æ˜¯åˆ©ç”¨é—­åŒ…æ¥ä¿æŒç€ä½œç”¨åŸŸï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> num = num + a</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> adder = add()</span><br><span class=\"line\"></span><br><span class=\"line\">adder(<span class=\"number\">1</span>)     <span class=\"comment\">// è¾“å‡º: 1</span></span><br><span class=\"line\">adder(<span class=\"number\">2</span>)     <span class=\"comment\">// è¾“å‡º: 3</span></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"1-æŸ¯é‡ŒåŒ–\"><a href=\"#1-æŸ¯é‡ŒåŒ–\" class=\"headerlink\" title=\"1. æŸ¯é‡ŒåŒ–\"></a><strong>1. æŸ¯é‡ŒåŒ–</strong></h5><ul>\n<li>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼Œåˆç§°éƒ¨åˆ†æ±‚å€¼ï¼ˆPartial Evaluationï¼‰ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„åŸå‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆåŸå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ–°å‡½æ•°èƒ½å¤Ÿæ¥å—ä½™ä¸‹çš„å‚æ•°ï¼Œæœ€åè¿”å›åŒåŸå‡½æ•°ä¸€æ ·çš„ç»“æœã€‚</li>\n<li>æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠå¤šå‚æ•°ä¼ å…¥çš„å‡½æ•°æ‹†æˆå•ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‚æ•°å‡½æ•°ï¼Œå†…éƒ¨å†è¿”å›è°ƒç”¨ä¸‹ä¸€ä¸ªå•ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‚æ•°å‡½æ•°ï¼Œä¾æ¬¡å¤„ç†å‰©ä½™çš„å‚æ•°ã€‚</li>\n</ul>\n<p><strong>æŸ¯é‡ŒåŒ–æœ‰ 3 ä¸ªå¸¸è§ä½œç”¨ï¼š</strong></p>\n<ul>\n<li>å‚æ•°å¤ç”¨</li>\n<li>æå‰è¿”å›</li>\n<li>å»¶è¿Ÿè®¡ç®—/è¿è¡Œ</li>\n</ul>\n<p>å…ˆæ¥çœ‹çœ‹æŸ¯é‡ŒåŒ–çš„é€šç”¨å®ç°ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ES5 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">currying</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> rest1 = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    rest1.shift()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> rest2 = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fn.apply(<span class=\"literal\">null</span>, rest1.concat(rest2))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åªéœ€è¦è®°ä½ ES6 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">currying</span>(<span class=\"params\">fn, ...rest1</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŠŠå‰©ä½™å‚æ•°ä¸å½“å‰å‚æ•°æ‹¼æ¥</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...rest2</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fn.apply(<span class=\"literal\">null</span>, rest1.concat(rest2))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨å®ƒå°†ä¸€ä¸ª <code>sayHello</code> å‡½æ•°æŸ¯é‡ŒåŒ–è¯•è¯•ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¥ä¸Šé¢</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\">name, age, fruit</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">console</span>.log(<span class=\"string\">`æˆ‘å« <span class=\"subst\">$&#123;name&#125;</span>,æˆ‘ <span class=\"subst\">$&#123;age&#125;</span> å²äº†, æˆ‘å–œæ¬¢åƒ <span class=\"subst\">$&#123;fruit&#125;</span>`</span>))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> curryingShowMsg1 = currying(sayHello, <span class=\"string\">&#x27;å°æ˜&#x27;</span>)</span><br><span class=\"line\">curryingShowMsg1(<span class=\"number\">22</span>, <span class=\"string\">&#x27;è‹¹æœ&#x27;</span>)           <span class=\"comment\">// è¾“å‡º: æˆ‘å« å°æ˜,æˆ‘ 22 å²äº†, æˆ‘å–œæ¬¢åƒ è‹¹æœ</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> curryingShowMsg2 = currying(sayHello, <span class=\"string\">&#x27;å°è¡°&#x27;</span>, <span class=\"number\">20</span>)</span><br><span class=\"line\">curryingShowMsg2(<span class=\"string\">&#x27;è¥¿ç“œ&#x27;</span>)               <span class=\"comment\">// è¾“å‡º: æˆ‘å« å°è¡°,æˆ‘ 20 å²äº†, æˆ‘å–œæ¬¢åƒ è¥¿ç“œ</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ›´é«˜é˜¶çš„ç”¨æ³•å‚è§ï¼šJavaScript å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ - æŸ¯é‡ŒåŒ–</p>\n</blockquote>\n<h5 id=\"2-åæŸ¯é‡ŒåŒ–\"><a href=\"#2-åæŸ¯é‡ŒåŒ–\" class=\"headerlink\" title=\"2. åæŸ¯é‡ŒåŒ–\"></a><strong>2. åæŸ¯é‡ŒåŒ–</strong></h5><ul>\n<li>æŸ¯é‡ŒåŒ–æ˜¯å›ºå®šéƒ¨åˆ†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ¥å—å‰©ä½™å‚æ•°çš„å‡½æ•°ï¼Œä¹Ÿç§°ä¸ºéƒ¨åˆ†è®¡ç®—å‡½æ•°ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼©å°é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªé’ˆå¯¹æ€§æ›´å¼ºçš„å‡½æ•°ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠå¤šå‚æ•°ä¼ å…¥çš„å‡½æ•°æ‹†æˆå•å‚æ•°ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‡½æ•°ï¼Œå†…éƒ¨å†è¿”å›è°ƒç”¨ä¸‹ä¸€ä¸ªå•å‚æ•°ï¼ˆæˆ–éƒ¨åˆ†ï¼‰å‡½æ•°ï¼Œä¾æ¬¡å¤„ç†å‰©ä½™çš„å‚æ•°ã€‚</li>\n<li>è€ŒåæŸ¯é‡ŒåŒ–ï¼Œä»å­—é¢è®²ï¼Œæ„ä¹‰å’Œç”¨æ³•è·Ÿå‡½æ•°æŸ¯é‡ŒåŒ–ç›¸æ¯”æ­£å¥½ç›¸åï¼Œæ‰©å¤§é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨èŒƒå›´æ›´å¹¿çš„å‡½æ•°ã€‚ä½¿æœ¬æ¥åªæœ‰ç‰¹å®šå¯¹è±¡æ‰é€‚ç”¨çš„æ–¹æ³•ï¼Œæ‰©å±•åˆ°æ›´å¤šçš„å¯¹è±¡ã€‚</li>\n</ul>\n<p>å…ˆæ¥çœ‹çœ‹åæŸ¯é‡ŒåŒ–çš„é€šç”¨å®ç°å§~</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ES5 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.unCurrying = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> rest = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Function</span>.prototype.call.apply(self, rest)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ES6 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.unCurrying = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> self = <span class=\"built_in\">this</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">...rest</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Function</span>.prototype.call.apply(self, rest)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¦‚æœä½ è§‰å¾—æŠŠå‡½æ•°æ”¾åœ¨ Function çš„åŸå‹ä¸Šä¸å¤ªå¥½ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ES5 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unCurrying</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">tar</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> rest = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">        rest.shift()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fn.apply(tar, rest)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ES6 æ–¹å¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unCurrying</span>(<span class=\"params\">fn</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tar, ...argu</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> fn.apply(tar, argu)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç®€å•è¯´ï¼Œå‡½æ•°æŸ¯é‡ŒåŒ–å°±æ˜¯å¯¹é«˜é˜¶å‡½æ•°çš„é™é˜¶å¤„ç†ï¼Œç¼©å°é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªé’ˆå¯¹æ€§æ›´å¼ºçš„å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1, arg2</span>)              // =&gt; <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1</span>)(<span class=\"params\">arg2</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1, arg2, arg3</span>)        // =&gt; <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1</span>)(<span class=\"params\">arg2</span>)(<span class=\"params\">arg3</span>)</span></span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1, arg2, arg3, arg4</span>)  // =&gt; <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1</span>)(<span class=\"params\">arg2</span>)(<span class=\"params\">arg3</span>)(<span class=\"params\">arg4</span>)</span></span></span></span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1, arg2, ..., argn</span>)   // =&gt; <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg1</span>)(<span class=\"params\">arg2</span>)â€¦(<span class=\"params\">argn</span>)</span></span></span></span></span></span></span></span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è€ŒåæŸ¯é‡ŒåŒ–å°±æ˜¯åè¿‡æ¥ï¼Œå¢åŠ é€‚ç”¨èŒƒå›´ï¼Œè®©æ–¹æ³•ä½¿ç”¨åœºæ™¯æ›´å¤§ã€‚ä½¿ç”¨åæŸ¯é‡ŒåŒ–, å¯ä»¥æŠŠåŸç”Ÿæ–¹æ³•å€Ÿå‡ºæ¥ï¼Œè®©ä»»ä½•å¯¹è±¡æ‹¥æœ‰åŸç”Ÿå¯¹è±¡çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">obj.func(arg1, arg2)        <span class=\"comment\">// =&gt; func(obj, arg1, arg2)</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>å¯ä»¥è¿™æ ·ç†è§£æŸ¯é‡ŒåŒ–å’ŒåæŸ¯é‡ŒåŒ–çš„åŒºåˆ«ï¼š</strong></p>\n<ul>\n<li>æŸ¯é‡ŒåŒ–æ˜¯åœ¨è¿ç®—å‰æå‰ä¼ å‚ï¼Œå¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ï¼›</li>\n<li>åæŸ¯é‡ŒåŒ–æ˜¯å»¶è¿Ÿä¼ å‚ï¼Œåœ¨è¿ç®—æ—¶æŠŠåŸæ¥å·²ç»å›ºå®šçš„å‚æ•°æˆ–è€… this ä¸Šä¸‹æ–‡ç­‰å½“ä½œå‚æ•°å»¶è¿Ÿåˆ°æœªæ¥ä¼ é€’ã€‚</li>\n<li>æ›´é«˜é˜¶çš„ç”¨æ³•å‚è§ï¼šJavaScript å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ - åæŸ¯é‡ŒåŒ–</li>\n</ul>\n<h5 id=\"3-åå‡½æ•°\"><a href=\"#3-åå‡½æ•°\" class=\"headerlink\" title=\"3. åå‡½æ•°\"></a><strong>3. åå‡½æ•°</strong></h5><blockquote>\n<p>åå‡½æ•°æ˜¯åˆ›å»ºä¸€ä¸ªè°ƒç”¨å¦å¤–ä¸€ä¸ªéƒ¨åˆ†ï¼ˆå‚æ•°æˆ–å˜é‡å·²é¢„åˆ¶çš„å‡½æ•°ï¼‰çš„å‡½æ•°ï¼Œå‡½æ•°å¯ä»¥æ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥ç”Ÿæˆä¸€ä¸ªçœŸæ­£æ‰§è¡Œçš„å‡½æ•°ã€‚å…¶æœ¬èº«ä¸åŒ…æ‹¬æˆ‘ä»¬çœŸæ­£éœ€è¦çš„é€»è¾‘ä»£ç ï¼Œåªæ˜¯æ ¹æ®ä¼ å…¥çš„å‚æ•°è¿”å›å…¶ä»–çš„å‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°ä¸­æ‰æœ‰çœŸæ­£çš„å¤„ç†é€»è¾‘æ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> isType = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.prototype.toString.call(obj) === <span class=\"string\">`[object <span class=\"subst\">$&#123;type&#125;</span>]`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> isString = isType(<span class=\"string\">&#x27;String&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> isFunction = isType(<span class=\"string\">&#x27;Function&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™æ ·å°±ç”¨åå‡½æ•°å¿«é€Ÿåˆ›å»ºäº†ä¸€ç»„åˆ¤æ–­å¯¹è±¡ç±»å‹çš„æ–¹æ³•~</p>\n</blockquote>\n<p><strong>åå‡½æ•°å’ŒæŸ¯é‡ŒåŒ–çš„åŒºåˆ«ï¼š</strong></p>\n<ul>\n<li>æŸ¯é‡ŒåŒ–æ˜¯æŠŠä¸€ä¸ªæ¥å— <code>n</code> ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç”±åŸæœ¬çš„ä¸€æ¬¡æ€§ä¼ é€’æ‰€æœ‰å‚æ•°å¹¶æ‰§è¡Œå˜æˆäº†å¯ä»¥åˆ†å¤šæ¬¡æ¥å—å‚æ•°å†æ‰§è¡Œï¼Œä¾‹å¦‚ï¼š<code>add = (x, y, z) =&gt; x + y + zâ†’curryAdd = x =&gt; y =&gt; z =&gt; x + y + zï¼›</code></li>\n<li>åå‡½æ•°å›ºå®šäº†å‡½æ•°çš„æŸä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡ä¼ å…¥çš„å‚æ•°æˆ–è€…æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°æ¥æ¥å—å‰©ä½™çš„å‚æ•°ï¼Œæ•°é‡å¯èƒ½æ˜¯ä¸€ä¸ªä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªï¼›</li>\n<li>å½“ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°åªæ¥å—ä¸¤æ¬¡å‚æ•°æ—¶ï¼Œæ¯”å¦‚ <code>curry()()</code>ï¼Œè¿™æ—¶çš„æŸ¯é‡ŒåŒ–å‡½æ•°å’Œåå‡½æ•°æ¦‚å¿µç±»ä¼¼ï¼Œå¯ä»¥è®¤ä¸ºåå‡½æ•°æ˜¯æŸ¯é‡ŒåŒ–å‡½æ•°çš„é€€åŒ–ç‰ˆ</li>\n</ul>\n<h2 id=\"è®¾è®¡åŸåˆ™\"><a href=\"#è®¾è®¡åŸåˆ™\" class=\"headerlink\" title=\"è®¾è®¡åŸåˆ™\"></a>è®¾è®¡åŸåˆ™</h2><blockquote>\n<p>åœ¨å‰æ–‡æˆ‘ä»¬ä»‹ç»äº†é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ç»§æ‰¿ï¼Œæœ¬æ–‡å°†ä¸»è¦ä»‹ç»é¢å‘å¯¹è±¡å…­å¤§åŸåˆ™ä¸­çš„å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ã€å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOCPï¼‰ã€æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¾è®¡åŸåˆ™æ˜¯æŒ‡å¯¼æ€æƒ³ï¼Œä»æ€æƒ³ä¸Šç»™æˆ‘ä»¬æŒ‡æ˜ç¨‹åºè®¾è®¡çš„æ­£ç¡®æ–¹å‘ï¼Œæ˜¯æˆ‘ä»¬åœ¨å¼€å‘è®¾è®¡è¿‡ç¨‹ä¸­åº”è¯¥å°½åŠ›éµå®ˆçš„å‡†åˆ™ã€‚è€Œè®¾è®¡æ¨¡å¼æ˜¯å®ç°æ‰‹æ®µï¼Œå› æ­¤è®¾è®¡æ¨¡å¼ä¹Ÿåº”è¯¥éµå®ˆè¿™äº›åŸåˆ™ï¼Œæˆ–è€…è¯´ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯è¿™äº›è®¾è®¡åŸåˆ™çš„ä¸€äº›å…·ä½“ä½“ç°ã€‚è¦è¾¾åˆ°çš„ç›®æ ‡å°±æ˜¯é«˜å†…èšä½è€¦åˆï¼Œé«˜å†…èšæ˜¯è¯´æ¨¡å—å†…éƒ¨è¦é«˜åº¦èšåˆï¼Œæ˜¯æ¨¡å—å†…éƒ¨çš„å…³ç³»ï¼Œä½è€¦åˆæ˜¯è¯´æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦è¦å°½é‡ä½ï¼Œæ˜¯æ¨¡å—ä¸æ¨¡å—é—´çš„å…³ç³»ã€‚</p>\n</blockquote>\n<p><strong>æ³¨æ„</strong>ï¼Œéµå®ˆè®¾è®¡åŸåˆ™æ˜¯å¥½ï¼Œä½†æ˜¯è¿‡çŠ¹ä¸åŠï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ä¸è¦åˆ»æ¿éµå®ˆï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µçµæ´»è¿ç”¨</p>\n<h3 id=\"1-å•ä¸€èŒè´£åŸåˆ™-SRP\"><a href=\"#1-å•ä¸€èŒè´£åŸåˆ™-SRP\" class=\"headerlink\" title=\"1. å•ä¸€èŒè´£åŸåˆ™ SRP\"></a><strong>1. å•ä¸€èŒè´£åŸåˆ™ SRP</strong></h3><ul>\n<li>å•ä¸€èŒè´£åŸåˆ™ ï¼ˆSingle Responsibility Principle, SRPï¼‰æ˜¯æŒ‡å¯¹ä¸€ä¸ªç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼Œä¸‹æ–‡ç»Ÿç§°å¯¹è±¡ï¼‰æ¥è¯´ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¯¹è±¡åªåšä¸€ä»¶äº‹ã€‚</li>\n<li>å•ä¸€èŒè´£åŸåˆ™å¯ä»¥è®©æˆ‘ä»¬å¯¹å¯¹è±¡çš„ç»´æŠ¤å˜å¾—ç®€å•ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¤šä¸ªèŒè´£çš„è¯ï¼Œé‚£ä¹ˆå¦‚æœä¸€ä¸ªèŒè´£çš„é€»è¾‘éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå½±å“åˆ°å…¶ä»–èŒè´£çš„ä»£ç ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¤šç§èŒè´£ï¼ŒèŒè´£ä¹‹é—´ç›¸äº’è€¦åˆï¼Œå¯¹ä¸€ä¸ªèŒè´£çš„ä¿®æ”¹ä¼šå½±å“åˆ°å…¶ä»–èŒè´£çš„å®ç°ï¼Œè¿™å°±æ˜¯å±äºæ¨¡å—å†…ä½å†…èšé«˜è€¦åˆçš„æƒ…å†µã€‚è´Ÿè´£çš„èŒè´£è¶Šå¤šï¼Œè€¦åˆè¶Šå¼ºï¼Œå¯¹æ¨¡å—çš„ä¿®æ”¹å°±è¶Šæ¥è¶Šå±é™©ã€‚</li>\n</ul>\n<p><strong>ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>é™ä½å•ä¸ªç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼‰çš„å¤æ‚åº¦ï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼ŒåŠŸèƒ½ä¹‹é—´çš„ç•Œé™æ›´æ¸…æ™°ï¼› ç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼‰ä¹‹é—´æ ¹æ®åŠŸèƒ½è¢«åˆ†ä¸ºæ›´å°çš„ç²’åº¦ï¼Œæœ‰åŠ©äºä»£ç çš„å¤ç”¨ï¼›</li>\n<li>ç¼ºç‚¹ï¼š å¢åŠ ç³»ç»Ÿä¸­ç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼‰çš„ä¸ªæ•°ï¼Œå®é™…ä¸Šä¹Ÿå¢åŠ äº†è¿™äº›å¯¹è±¡ä¹‹é—´ç›¸äº’è”ç³»çš„éš¾åº¦ï¼ŒåŒæ—¶ä¹Ÿå¼•å…¥äº†é¢å¤–çš„å¤æ‚åº¦ã€‚</li>\n</ul>\n<h3 id=\"2-å¼€æ”¾å°é—­åŸåˆ™-OCP\"><a href=\"#2-å¼€æ”¾å°é—­åŸåˆ™-OCP\" class=\"headerlink\" title=\"2. å¼€æ”¾å°é—­åŸåˆ™ OCP\"></a><strong>2. å¼€æ”¾å°é—­åŸåˆ™ OCP</strong></h3><blockquote>\n<p>å¼€æ”¾å°é—­åŸåˆ™ ï¼ˆOpenï¼Close Principle, OCPï¼‰æ˜¯æŒ‡ä¸€ä¸ªæ¨¡å—åœ¨æ‰©å±•æ€§æ–¹é¢åº”è¯¥æ˜¯å¼€æ”¾çš„ï¼Œè€Œåœ¨æ›´æ”¹æ€§æ–¹é¢åº”è¯¥æ˜¯å°é—­çš„ï¼Œä¹Ÿå°±æ˜¯å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å½“éœ€è¦å¢åŠ éœ€æ±‚çš„æ—¶å€™ï¼Œåˆ™å°½é‡é€šè¿‡æ‰©å±•æ–°ä»£ç çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰ä»£ç ã€‚å› ä¸ºä¿®æ”¹å·²æœ‰ä»£ç ï¼Œåˆ™ä¼šç»™ä¾èµ–åŸæœ‰ä»£ç çš„æ¨¡å—å¸¦æ¥éšæ‚£ï¼Œå› æ­¤ä¿®æ”¹ä¹‹åéœ€è¦æŠŠæ‰€æœ‰ä¾èµ–åŸæœ‰ä»£ç çš„æ¨¡å—éƒ½æµ‹è¯•ä¸€éï¼Œä¿®æ”¹ä¸€éæµ‹è¯•ä¸€éï¼Œå¸¦æ¥çš„æˆæœ¬å¾ˆå¤§ï¼Œå¦‚æœæ˜¯ä¸Šçº¿çš„å¤§å‹é¡¹ç›®ï¼Œé‚£ä¹ˆä»£ä»·å’Œé£é™©å¯èƒ½æ›´é«˜ã€‚</p>\n</blockquote>\n<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>\n<ul>\n<li>å¢åŠ å¯ç»´æŠ¤æ€§ï¼Œé¿å…å› ä¸ºä¿®æ”¹ç»™ç³»ç»Ÿå¸¦æ¥çš„ä¸ç¨³å®šæ€§ã€‚</li>\n</ul>\n<h3 id=\"3-æœ€å°‘çŸ¥è¯†åŸåˆ™-LKP\"><a href=\"#3-æœ€å°‘çŸ¥è¯†åŸåˆ™-LKP\" class=\"headerlink\" title=\"3. æœ€å°‘çŸ¥è¯†åŸåˆ™ LKP\"></a><strong>3. æœ€å°‘çŸ¥è¯†åŸåˆ™ LKP</strong></h3><ul>\n<li>æœ€å°‘çŸ¥è¯†åŸåˆ™ ï¼ˆLeast Knowledge Principle, LKPï¼‰åˆç§°ä¸ºè¿ªç±³ç‰¹åŸåˆ™ ï¼ˆLaw of Demeter, LODï¼‰ï¼Œä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ã€‚</li>\n<li>é€šä¿—åœ°è®²ï¼Œä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“å¾—æœ€å°‘ï¼Œç±»çš„å†…éƒ¨å¦‚ä½•å®ç°ã€å¦‚ä½•å¤æ‚éƒ½ä¸è°ƒç”¨è€…æˆ–è€…ä¾èµ–è€…æ²¡å…³ç³»ï¼Œè°ƒç”¨è€…æˆ–è€…ä¾èµ–è€…åªéœ€è¦çŸ¥é“ä»–éœ€è¦çš„æ–¹æ³•å³å¯ï¼Œå…¶ä»–çš„æˆ‘ä¸€æ¦‚ä¸å…³å¿ƒã€‚ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§ï¼Œå½“ä¸€ä¸ªç±»å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹å¦ä¸€ä¸ªç±»çš„å½±å“ä¹Ÿè¶Šå¤§ã€‚</li>\n<li>é€šå¸¸ä¸ºäº†å‡å°‘å¯¹è±¡ä¹‹é—´çš„è”ç³»ï¼Œæ˜¯é€šè¿‡å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰è€…æ¥å¸®åŠ©è¿›è¡Œé€šä¿¡ï¼Œé˜»éš”å¯¹è±¡ä¹‹é—´çš„ç›´æ¥é€šä¿¡ï¼Œä»è€Œå‡å°‘è€¦åˆã€‚</li>\n</ul>\n<p><strong>ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>é™ä½ç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼‰ä¹‹é—´ä¸å¿…è¦çš„ä¾èµ–ï¼Œå‡å°‘è€¦åˆã€‚</li>\n</ul>\n<p><strong>ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>ç±»ï¼ˆæ–¹æ³•ã€å¯¹è±¡ï¼‰ä¹‹é—´ä¸ç›´æ¥é€šä¿¡ä¹Ÿä¼šç»è¿‡ä¸€ä¸ªç¬¬ä¸‰è€…æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±è¦æƒè¡¡å¼•å…¥ç¬¬ä¸‰è€…å¸¦æ¥çš„å¤æ‚åº¦æ˜¯å¦å€¼å¾—ã€‚</li>\n</ul>\n<h1 id=\"äºŒã€åˆ›å»ºå‹æ¨¡å¼\"><a href=\"#äºŒã€åˆ›å»ºå‹æ¨¡å¼\" class=\"headerlink\" title=\"äºŒã€åˆ›å»ºå‹æ¨¡å¼\"></a>äºŒã€åˆ›å»ºå‹æ¨¡å¼</h1><h2 id=\"å•ä¾‹æ¨¡å¼\"><a href=\"#å•ä¾‹æ¨¡å¼\" class=\"headerlink\" title=\"å•ä¾‹æ¨¡å¼\"></a>å•ä¾‹æ¨¡å¼</h2><ul>\n<li>å•ä¾‹æ¨¡å¼å¯èƒ½æ˜¯è®¾è®¡æ¨¡å¼é‡Œé¢æœ€ç®€å•çš„æ¨¡å¼äº†ï¼Œè™½ç„¶ç®€å•ï¼Œä½†åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»å’Œç¼–ç¨‹ä¸­å´ç»å¸¸æ¥è§¦åˆ°ï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ã€‚</li>\n<li>å•ä¾‹æ¨¡å¼ ï¼ˆSingleton Patternï¼‰åˆç§°ä¸ºå•ä½“æ¨¡å¼ï¼Œä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨åŒä¸€ä¸ªç±»åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œåº”è¯¥å¾—åˆ°ä¸ç¬¬ä¸€æ¬¡åˆ›å»ºçš„å¯¹è±¡å®Œå…¨ç›¸åŒçš„å¯¹è±¡ã€‚</li>\n</ul>\n<p>ç»è¥æ¸¸æˆå•ä¾‹ç¤ºä¾‹ä»£ç å®ç°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function ManageGame() &#123;</span><br><span class=\"line\">    if (ManageGame._schedule) &#123;        &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦å·²ç»æœ‰å•ä¾‹äº†</span><br><span class=\"line\">    \treturn ManageGame._schedule</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; æ²¡æœ‰å•ä¾‹ï¼Œè¿›è¡Œåˆ›å»º</span><br><span class=\"line\">    ManageGame._schedule &#x3D; this</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ManageGame.getInstance &#x3D; function() &#123;</span><br><span class=\"line\">    if (ManageGame._schedule) &#123;        &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦å·²ç»æœ‰å•ä¾‹äº†</span><br><span class=\"line\">    \treturn ManageGame._schedule</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; æ²¡æœ‰å•ä¾‹ï¼Œè¿›è¡Œåˆ›å»º</span><br><span class=\"line\">    return ManageGame._schedule &#x3D; new ManageGame()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">const schedule1 &#x3D; new ManageGame()</span><br><span class=\"line\">const schedule2 &#x3D; ManageGame.getInstance()</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(schedule1 &#x3D;&#x3D;&#x3D; schedule2)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°åœ¨å†…éƒ¨ç»´æŠ¤ï¼ˆæˆ–è€…ç›´æ¥æŒ‚è½½è‡ªå·±èº«ä¸Šï¼‰ä¸€ä¸ªå®ä¾‹ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ new çš„æ—¶å€™åˆ¤æ–­è¿™ä¸ªå®ä¾‹æœ‰æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œåˆ›å»ºè¿‡å°±ç›´æ¥è¿”å›ï¼Œå¦åˆ™èµ°åˆ›å»ºæµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>ES6</code> çš„ <code>class</code> è¯­æ³•æ”¹é€ ä¸€ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ManageGame</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> _schedule = <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">getInstance</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦å·²ç»æœ‰å•ä¾‹äº†</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ManageGame._schedule) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ManageGame._schedule</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// æ²¡æœ‰å•ä¾‹ï¼Œè¿›è¡Œåˆ›å»º</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ManageGame._schedule = <span class=\"keyword\">new</span> ManageGame()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦å·²ç»æœ‰å•ä¾‹äº†</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ManageGame._schedule) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ManageGame._schedule</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// æ²¡æœ‰å•ä¾‹ï¼Œè¿›è¡Œåˆ›å»º</span></span><br><span class=\"line\">        ManageGame._schedule = <span class=\"built_in\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> schedule1 = <span class=\"keyword\">new</span> ManageGame()</span><br><span class=\"line\"><span class=\"keyword\">const</span> schedule2 = ManageGame.getInstance()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(schedule1 === schedule2)\t<span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢æ–¹æ³•çš„ç¼ºç‚¹åœ¨äºç»´æŠ¤çš„å®ä¾‹ä½œä¸ºé™æ€å±æ€§ç›´æ¥æš´éœ²ï¼Œå¤–éƒ¨å¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚</p>\n<p>å¯ä»¥ä½¿ç”¨é—­åŒ…æˆ–å—çŠ¶ä½œç”¨åŸŸéšè—å†…éƒ¨å˜é‡ï¼š</p>\n<p><strong>å•ä¾‹æ¨¡å¼èµ‹èƒ½</strong></p>\n<blockquote>\n<p>ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œå•ä¾‹æ¨¡å¼çš„åˆ›å»ºé€»è¾‘å’ŒåŸå…ˆè¿™ä¸ªç±»çš„ä¸€äº›åŠŸèƒ½é€»è¾‘ï¼ˆæ¯”å¦‚ <code>init</code> ç­‰æ“ä½œï¼‰æ··æ‚åœ¨ä¸€èµ·ï¼Œæ ¹æ®å•ä¸€èŒè´£åŸåˆ™ï¼Œè¿™ä¸ªä¾‹å­æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­æ”¹è¿›ä¸€ä¸‹ï¼Œå°†å•ä¾‹æ¨¡å¼çš„åˆ›å»ºé€»è¾‘å’Œç‰¹å®šç±»çš„åŠŸèƒ½é€»è¾‘æ‹†å¼€ï¼Œè¿™æ ·åŠŸèƒ½é€»è¾‘å°±å¯ä»¥å’Œæ­£å¸¸çš„ç±»ä¸€æ ·ã€‚</p>\n</blockquote>\n<p><strong>æƒ°æ€§å•ä¾‹ã€æ‡’æ±‰å¼-é¥¿æ±‰å¼</strong></p>\n<ul>\n<li>æœ‰æ—¶å€™ä¸€ä¸ªå®ä¾‹åŒ–è¿‡ç¨‹æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ç±»ï¼Œä½†æ˜¯å´ä¸€ç›´ç”¨ä¸åˆ°ï¼Œå¦‚æœä¸€å¼€å§‹å°±å¯¹è¿™ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–å°±æ˜¾å¾—æœ‰äº›æµªè´¹ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æƒ°æ€§åˆ›å»ºï¼Œå³å»¶è¿Ÿåˆ›å»ºè¯¥ç±»çš„å•ä¾‹ã€‚ä¹‹å‰çš„ä¾‹å­éƒ½å±äºæƒ°æ€§å•ä¾‹ï¼Œå®ä¾‹çš„åˆ›å»ºéƒ½æ˜¯ <code>new</code> çš„æ—¶å€™æ‰è¿›è¡Œã€‚</li>\n</ul>\n<p><strong>å•ä¾‹æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p>å•ä¾‹æ¨¡å¼ä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯èŠ‚çº¦èµ„æºï¼Œä¿æŒè®¿é—®ä¸€è‡´æ€§ã€‚</p>\n<p><strong>ç®€å•åˆ†æä¸€ä¸‹å®ƒçš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>å•ä¾‹æ¨¡å¼åœ¨åˆ›å»ºååœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼ŒèŠ‚çº¦äº†å†…å­˜å¼€æ”¯å’Œå®ä¾‹åŒ–æ—¶çš„æ€§èƒ½å¼€æ”¯ï¼Œç‰¹åˆ«æ˜¯éœ€è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªåˆ›å»ºå¼€é”€æ¯”è¾ƒå¤§çš„ç±»æ—¶ï¼Œæ¯”èµ·å®ä¾‹ä¸æ–­åœ°é”€æ¯å’Œé‡æ–°å®ä¾‹åŒ–ï¼Œå•ä¾‹èƒ½èŠ‚çº¦æ›´å¤šèµ„æºï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ï¼›</li>\n<li>å•ä¾‹æ¨¡å¼å¯ä»¥è§£å†³å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼Œæ¯”å¦‚å†™æ–‡ä»¶æ“ä½œæ—¶ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥é¿å…å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡ŒåŒæ—¶æ“ä½œï¼›</li>\n<li>åªä½¿ç”¨ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå¯ä»¥å‡å°åƒåœ¾å›æ”¶æœºåˆ¶ GCï¼ˆGarbage Collecationï¼‰ çš„å‹åŠ›ï¼Œè¡¨ç°åœ¨æµè§ˆå™¨ä¸­å°±æ˜¯ç³»ç»Ÿå¡é¡¿å‡å°‘ï¼Œæ“ä½œæ›´æµç•…ï¼ŒCPU èµ„æºå ç”¨æ›´å°‘ï¼›</li>\n</ul>\n<p><strong>å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„</strong></p>\n<ul>\n<li>å•ä¾‹æ¨¡å¼å¯¹æ‰©å±•ä¸å‹å¥½ï¼Œä¸€èˆ¬ä¸å®¹æ˜“æ‰©å±•ï¼Œå› ä¸ºå•ä¾‹æ¨¡å¼ä¸€èˆ¬è‡ªè¡Œå®ä¾‹åŒ–ï¼Œæ²¡æœ‰æ¥å£ï¼›</li>\n<li>ä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œä¸€ä¸ªç±»åº”è¯¥åªå…³å¿ƒå†…éƒ¨é€»è¾‘ï¼Œè€Œä¸å…³å¿ƒå¤–é¢æ€ä¹ˆæ ·æ¥å®ä¾‹åŒ–ï¼›</li>\n</ul>\n<p><strong>å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</strong></p>\n<p>é‚£æˆ‘ä»¬åº”è¯¥åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å•ä¾‹æ¨¡å¼å‘¢ï¼š</p>\n<ul>\n<li>å½“ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹æ¶ˆè€—çš„èµ„æºè¿‡å¤šï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥é¿å…æ€§èƒ½æµªè´¹ï¼›</li>\n<li>å½“é¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªå…¬å…±çš„çŠ¶æ€ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥ä¿è¯è®¿é—®ä¸€è‡´æ€§ï¼›</li>\n</ul>\n<h2 id=\"å·¥å‚æ¨¡å¼\"><a href=\"#å·¥å‚æ¨¡å¼\" class=\"headerlink\" title=\"å·¥å‚æ¨¡å¼\"></a>å·¥å‚æ¨¡å¼</h2><blockquote>\n<p>å·¥å‚æ¨¡å¼ ï¼ˆFactory Patternï¼‰ï¼Œæ ¹æ®ä¸åŒçš„è¾“å…¥è¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œä¸€èˆ¬ç”¨æ¥åˆ›å»ºåŒä¸€ç±»å¯¹è±¡ã€‚å·¥å‚æ–¹å¼çš„ä¸»è¦æ€æƒ³æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡çš„å®ç°åˆ†ç¦»ã€‚</p>\n</blockquote>\n<ul>\n<li>è®¿é—®è€…åªéœ€è¦çŸ¥é“äº§å“åï¼Œå°±å¯ä»¥ä»å·¥å‚è·å¾—å¯¹åº”å®ä¾‹ï¼›</li>\n<li>è®¿é—®è€…ä¸å…³å¿ƒå®ä¾‹åˆ›å»ºè¿‡ç¨‹ï¼›</li>\n</ul>\n<p><strong>ä»£ç å®ç°</strong></p>\n<blockquote>\n<p>å¦‚æœä½ ä½¿ç”¨è¿‡ <code>document.createElement</code> æ–¹æ³•åˆ›å»ºè¿‡ <code>DOM</code> å…ƒç´ ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡å·¥å‚æ–¹æ³•äº†ï¼Œè™½ç„¶è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šå¾ˆå¤æ‚ï¼Œä½†å…¶ä½¿ç”¨çš„å°±æ˜¯å·¥å‚æ–¹æ³•çš„æ€æƒ³ï¼šè®¿é—®è€…åªéœ€æä¾›æ ‡ç­¾åï¼ˆå¦‚ <code>div</code>ã€<code>img</code>ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±ä¼šè¿”å›å¯¹åº”çš„ DOM å…ƒç´ ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript å°†ä¸Šé¢é¥­é¦†ä¾‹å­å®ç°ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* é¥­åº—æ–¹æ³• */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">restaurant</span>(<span class=\"params\">menu</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (menu) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> YuXiangRouSi()</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> GongBaoJiDin()</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é±¼é¦™è‚‰ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">YuXiangRouSi</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">YuXiangRouSi.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; çœŸé¦™~&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å®«ä¿é¸¡ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">GongBaoJiDin</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">GongBaoJiDin.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; è®©æˆ‘æƒ³èµ·äº†å¤–å©†åšçš„èœ~&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish1 = restaurant(<span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>)</span><br><span class=\"line\">dish1.eat()\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">// è¾“å‡º: é±¼é¦™è‚‰ä¸ çœŸé¦™~</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish2 = restaurant(<span class=\"string\">&#x27;çº¢çƒ§æ’éª¨&#x27;</span>) <span class=\"comment\">// è¾“å‡º: Error è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å·¥å‚æ–¹æ³•ä¸­è¿™é‡Œä½¿ç”¨ <code>switch-case</code> è¯­æ³•ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ <code>if-else</code>ï¼Œéƒ½å¯ä»¥ã€‚</p>\n</blockquote>\n<p>ä¸‹é¢ä½¿ç”¨ ES6 çš„ class è¯­æ³•æ”¹å†™ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* é¥­åº—æ–¹æ³• */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Restaurant</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">getMenu</span>(<span class=\"params\">menu</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (menu) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> YuXiangRouSi()</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> GongBaoJiDin()</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-&#x27;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é±¼é¦™è‚‰ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YuXiangRouSi</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span> &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; çœŸé¦™~&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å®«ä¿é¸¡ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GongBaoJiDin</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span> &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; è®©æˆ‘æƒ³èµ·äº†å¤–å©†åšçš„èœ~&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish1 = Restaurant.getMenu(<span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º: é±¼é¦™è‚‰ä¸ çœŸé¦™~</span></span><br><span class=\"line\">dish1.eat()</span><br><span class=\"line\"><span class=\"keyword\">const</span> dish2 = Restaurant.getMenu(<span class=\"string\">&#x27;çº¢çƒ§æ’éª¨&#x27;</span>)\t<span class=\"comment\">// è¾“å‡º: Error è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªå·¥å‚æ¨¡å¼ï¼Œä½†æ˜¯è¿™ä¸ªå®ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå·¥å‚æ–¹æ³•ä¸­åŒ…å«äº†å¾ˆå¤šä¸åˆ›å»ºäº§å“ç›¸å…³çš„è¿‡ç¨‹ï¼Œå¦‚æœäº§å“ç§ç±»å¾ˆå¤šçš„è¯ï¼Œè¿™ä¸ªå·¥å‚æ–¹æ³•ä¸­å°±ä¼šç½—åˆ—å¾ˆå¤šäº§å“çš„åˆ›å»ºé€»è¾‘ï¼Œæ¯æ¬¡æ–°å¢æˆ–åˆ é™¤äº§å“ç§ç±»ï¼Œä¸ä»…è¦å¢åŠ äº§å“ç±»ï¼Œè¿˜éœ€è¦å¯¹åº”ä¿®æ”¹åœ¨å·¥å‚æ–¹æ³•ï¼Œè¿åäº†å¼€é—­åŸåˆ™ï¼Œä¹Ÿå¯¼è‡´è¿™ä¸ªå·¥å‚æ–¹æ³•å˜å¾—è‡ƒè‚¿ã€é«˜è€¦åˆã€‚</li>\n<li>ä¸¥æ ¼ä¸Šè¿™ç§å®ç°åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­å«åšç®€å•å·¥å‚æ¨¡å¼ã€‚é€‚ç”¨äºäº§å“ç§ç±»æ¯”è¾ƒå°‘ï¼Œåˆ›å»ºé€»è¾‘ä¸å¤æ‚çš„æ—¶å€™ä½¿ç”¨ã€‚</li>\n<li>å·¥å‚æ¨¡å¼çš„æœ¬æ„æ˜¯å°†å®é™…åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æ¨è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä¸€èˆ¬ç”¨æŠ½è±¡ç±»æ¥ä½œä¸ºçˆ¶ç±»ï¼Œåˆ›å»ºè¿‡ç¨‹ç”±æŠ½è±¡ç±»çš„å­ç±»æ¥å…·ä½“å®ç°ã€‚JavaScript ä¸­æ²¡æœ‰æŠ½è±¡ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å·¥å‚æ¨¡å¼çœ‹åšæ˜¯ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡çš„å·¥å‚ç±»å³å¯ã€‚å…³äºæŠ½è±¡ç±»çš„æœ‰å…³å†…å®¹ï¼Œå¯ä»¥å‚çœ‹æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li>\n<li>ç„¶è€Œä½œä¸ºçµæ´»çš„ JavaScriptï¼Œæˆ‘ä»¬ä¸å¿…å¦‚æ­¤è¾ƒçœŸï¼Œå¯ä»¥æŠŠæ˜“å˜çš„å‚æ•°æå–å‡ºæ¥ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* é¥­åº—æ–¹æ³• */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Restaurant</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.menuData = &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* åˆ›å»ºèœå“ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">getMenu</span>(<span class=\"params\">menu</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>.menuData[menu])</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">const</span> &#123; type, message &#125; = <span class=\"built_in\">this</span>.menuData[menu]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Menu(type, message)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* å¢åŠ èœå“ç§ç±» */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">addMenu</span>(<span class=\"params\">menu, type, message</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.menuData[menu]) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.Info(<span class=\"string\">&#x27;å·²ç»æœ‰è¿™ä¸ªèœäº†!&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.menuData[menu] = &#123; type, message &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* ç§»é™¤èœå“ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">removeMenu</span>(<span class=\"params\">menu</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">this</span>.menuData[menu]) <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"keyword\">delete</span> <span class=\"built_in\">this</span>.menuData[menu]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* èœå“ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type, message</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.type = type</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.message = message</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.type + <span class=\"built_in\">this</span>.message) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> restaurant = <span class=\"keyword\">new</span> Restaurant()</span><br><span class=\"line\">restaurant.addMenu(<span class=\"string\">&#x27;YuXiangRouSi&#x27;</span>, <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>, <span class=\"string\">&#x27; çœŸé¦™~&#x27;</span>)\t\t\t<span class=\"comment\">// æ³¨å†Œèœå“</span></span><br><span class=\"line\">restaurant.addMenu(<span class=\"string\">&#x27;GongBaoJiDin&#x27;</span>, <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span>, <span class=\"string\">&#x27; è®©æˆ‘æƒ³èµ·äº†å¤–å©†åšçš„èœ~&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish1 = restaurant.getMenu(<span class=\"string\">&#x27;YuXiangRouSi&#x27;</span>)</span><br><span class=\"line\">dish1.eat()\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">// è¾“å‡º: é±¼é¦™è‚‰ä¸ çœŸé¦™~</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish2 = restaurant.getMenu(<span class=\"string\">&#x27;HongSaoPaiGu&#x27;</span>)\t<span class=\"comment\">// è¾“å‡º: Error è¿™ä¸ªèœæœ¬åº—æ²¡æœ‰ -ã€‚-</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>æˆ‘ä»¬è¿˜ç»™ Restaurant ç±»å¢åŠ äº† <code>addMenu/removeMenu</code> ç§æœ‰æ–¹æ³•ï¼Œä»¥ä¾¿äºæ‰©å±•ã€‚</p>\n</li>\n<li><p>å½“ç„¶è¿™é‡Œå¦‚æœèœå“å‚æ•°ä¸å¤ªä¸€è‡´ï¼Œå¯ä»¥åœ¨ <code>addMenu</code> æ—¶å€™æ³¨å†Œæ„é€ å‡½æ•°æˆ–è€…ç±»ï¼Œåˆ›å»ºçš„æ—¶å€™è¿”å› <code>new</code> å‡ºçš„å¯¹åº”ç±»å®ä¾‹ï¼Œçµæ´»å˜é€šå³å¯ã€‚</p>\n<p><strong>å·¥å‚æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n</li>\n</ul>\n<p>å·¥å‚æ¨¡å¼å°†å¯¹è±¡çš„åˆ›å»ºå’Œå®ç°åˆ†ç¦»ï¼Œè¿™å¸¦æ¥äº†ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>è‰¯å¥½çš„å°è£…ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œè®¿é—®è€…æ— éœ€çŸ¥é“å¯¹è±¡çš„åˆ›å»ºæµç¨‹ï¼Œç‰¹åˆ«æ˜¯åˆ›å»ºæ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼›</li>\n<li>æ‰©å±•æ€§ä¼˜è‰¯ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•éš”ç¦»äº†ç”¨æˆ·å’Œåˆ›å»ºæµç¨‹éš”ç¦»ï¼Œç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™ï¼›</li>\n<li>è§£è€¦äº†é«˜å±‚é€»è¾‘å’Œåº•å±‚äº§å“ç±»ï¼Œç¬¦åˆæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œä¸éœ€è¦çš„å°±ä¸è¦å»äº¤æµï¼›</li>\n<li>å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹ï¼šå¸¦æ¥äº†é¢å¤–çš„ç³»ç»Ÿå¤æ‚åº¦ï¼Œå¢åŠ äº†æŠ½è±¡æ€§ï¼›</li>\n</ul>\n<p><strong>å·¥å‚æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</strong></p>\n<p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä½¿ç”¨å·¥å‚æ¨¡å¼å‘¢ï¼š</p>\n<ul>\n<li>å¯¹è±¡çš„åˆ›å»ºæ¯”è¾ƒå¤æ‚ï¼Œè€Œè®¿é—®è€…æ— éœ€çŸ¥é“åˆ›å»ºçš„å…·ä½“æµç¨‹ï¼›</li>\n<li>å¤„ç†å¤§é‡å…·æœ‰ç›¸åŒå±æ€§çš„å°å¯¹è±¡ï¼›</li>\n</ul>\n<h2 id=\"æŠ½è±¡å·¥å‚æ¨¡å¼\"><a href=\"#æŠ½è±¡å·¥å‚æ¨¡å¼\" class=\"headerlink\" title=\"æŠ½è±¡å·¥å‚æ¨¡å¼\"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><blockquote>\n<p>å·¥å‚æ¨¡å¼ ï¼ˆFactory Patternï¼‰ï¼Œæ ¹æ®è¾“å…¥çš„ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ï¼Œä¸€èˆ¬ç”¨æ¥åˆ›å»ºåŒä¸€ç±»å¯¹è±¡ã€‚å·¥å‚æ–¹å¼çš„ä¸»è¦æ€æƒ³æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡çš„å®ç°åˆ†ç¦»ã€‚</p>\n</blockquote>\n<ul>\n<li>æŠ½è±¡å·¥å‚ ï¼ˆAbstract Factoryï¼‰ï¼šé€šè¿‡å¯¹ç±»çš„å·¥å‚æŠ½è±¡ä½¿å…¶ä¸šåŠ¡ç”¨äºå¯¹äº§å“ç±»ç°‡çš„åˆ›å»ºï¼Œè€Œä¸æ˜¯è´Ÿè´£åˆ›å»ºæŸä¸€ç±»äº§å“çš„å®ä¾‹ã€‚å…³é”®åœ¨äºä½¿ç”¨æŠ½è±¡ç±»åˆ¶å®šäº†å®ä¾‹çš„ç»“æ„ï¼Œè°ƒç”¨è€…ç›´æ¥é¢å‘å®ä¾‹çš„ç»“æ„ç¼–ç¨‹ï¼Œä»å®ä¾‹çš„å…·ä½“å®ç°ä¸­è§£è€¦ã€‚</li>\n<li>æˆ‘ä»¬çŸ¥é“ JavaScript å¹¶ä¸æ˜¯å¼ºé¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ‰€ä»¥ä½¿ç”¨ä¼ ç»Ÿç¼–è¯‘å‹è¯­è¨€æ¯”å¦‚ JAVAã€C#ã€C++ ç­‰å®ç°çš„è®¾è®¡æ¨¡å¼å’Œ JavaScript ä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚ JavaScript ä¸­æ²¡æœ‰åŸç”Ÿçš„ç±»å’Œæ¥å£ç­‰ï¼ˆä¸è¿‡ ES6+ æ¸æ¸æä¾›ç±»ä¼¼çš„è¯­æ³•ç³–ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å˜é€šçš„æ–¹å¼æ¥è§£å†³ã€‚æœ€é‡è¦çš„æ˜¯è®¾è®¡æ¨¡å¼èƒŒåçš„æ ¸å¿ƒæ€æƒ³ï¼Œå’Œå®ƒæ‰€è¦è§£å†³çš„é—®é¢˜ã€‚</li>\n</ul>\n<p><strong>ä»£ç å®ç°</strong></p>\n<blockquote>\n<p>æˆ‘ä»¬çŸ¥é“ JavaScript å¹¶ä¸å¼ºé¢å‘å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰æä¾›æŠ½è±¡ç±»ï¼ˆè‡³å°‘ç›®å‰æ²¡æœ‰æä¾›ï¼‰ï¼Œä½†æ˜¯å¯ä»¥æ¨¡æ‹ŸæŠ½è±¡ç±»ã€‚ç”¨å¯¹ <code>new.target</code> æ¥åˆ¤æ–­ new çš„ç±»ï¼Œåœ¨çˆ¶ç±»æ–¹æ³•ä¸­ <code>throw new Error()</code>ï¼Œå¦‚æœå­ç±»ä¸­æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•å°±ä¼šæŠ›é”™ï¼Œè¿™æ ·æ¥æ¨¡æ‹ŸæŠ½è±¡ç±»ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æŠ½è±¡ç±»ï¼ŒES6 class æ–¹å¼ */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractClass1</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target === AbstractClass1) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–!&#x27;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* æŠ½è±¡æ–¹æ³• */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">operate</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨!&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æŠ½è±¡ç±»ï¼ŒES5 æ„é€ å‡½æ•°æ–¹å¼ */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> AbstractClass2 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target === AbstractClass2) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–!&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* æŠ½è±¡æ–¹æ³•ï¼Œä½¿ç”¨åŸå‹æ–¹å¼æ·»åŠ  */</span></span><br><span class=\"line\">AbstractClass2.prototype.operate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨!&#x27;</span>) &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸‹é¢ç”¨ JavaScript å°†ä¸Šé¢ä»‹ç»çš„é¥­åº—ä¾‹å­å®ç°ä¸€ä¸‹ã€‚</p>\n<p>é¦–å…ˆä½¿ç”¨åŸå‹æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* é¥­åº—æ–¹æ³• */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Restaurant</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Restaurant.orderDish = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> YuXiangRouSi()</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> GongBaoJiDing()</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&#x27;ç´«èœè›‹æ±¤&#x27;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ZiCaiDanTang()</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æœ¬åº—æ²¡æœ‰è¿™ä¸ª -ã€‚-&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* èœå“æŠ½è±¡ç±» */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dish</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">this</span>.kind = <span class=\"string\">&#x27;èœ&#x27;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æŠ½è±¡æ–¹æ³• */</span></span><br><span class=\"line\">Dish.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨!&#x27;</span>) &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é±¼é¦™è‚‰ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">YuXiangRouSi</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">YuXiangRouSi.prototype = <span class=\"keyword\">new</span> Dish()</span><br><span class=\"line\"></span><br><span class=\"line\">YuXiangRouSi.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.kind + <span class=\"string\">&#x27; - &#x27;</span> + <span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; çœŸé¦™~&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å®«ä¿é¸¡ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">GongBaoJiDing</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">GongBaoJiDing.prototype = <span class=\"keyword\">new</span> Dish()</span><br><span class=\"line\"></span><br><span class=\"line\">GongBaoJiDing.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.kind + <span class=\"string\">&#x27; - &#x27;</span> + <span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; è®©æˆ‘æƒ³èµ·äº†å¤–å©†åšçš„èœ~&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish1 = Restaurant.orderDish(<span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>)</span><br><span class=\"line\">dish1.eat()</span><br><span class=\"line\"><span class=\"keyword\">const</span> dish2 = Restaurant.orderDish(<span class=\"string\">&#x27;çº¢çƒ§æ’éª¨&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º: èœ - é±¼é¦™è‚‰ä¸ çœŸé¦™~</span></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º: Error æœ¬åº—æ²¡æœ‰è¿™ä¸ª -ã€‚-</span></span><br><span class=\"line\">ä½¿ç”¨ <span class=\"class\"><span class=\"keyword\">class</span> è¯­æ³•æ”¹å†™ä¸€ä¸‹ï¼š</span></span><br><span class=\"line\"><span class=\"class\"></span></span><br><span class=\"line\"><span class=\"class\">/* é¥­åº—æ–¹æ³• */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"title\">class</span> <span class=\"title\">Restaurant</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">orderDish</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> YuXiangRouSi()</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> GongBaoJiDin()</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æœ¬åº—æ²¡æœ‰è¿™ä¸ª -ã€‚-&#x27;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* èœå“æŠ½è±¡ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dish</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target === Dish) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–!&#x27;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.kind = <span class=\"string\">&#x27;èœ&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* æŠ½è±¡æ–¹æ³• */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨!&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é±¼é¦™è‚‰ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">YuXiangRouSi</span> <span class=\"keyword\">extends</span> <span class=\"title\">Dish</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>()</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.kind + <span class=\"string\">&#x27; - &#x27;</span> + <span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; çœŸé¦™~&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å®«ä¿é¸¡ä¸ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GongBaoJiDin</span> <span class=\"keyword\">extends</span> <span class=\"title\">Dish</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">super</span>()</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.type = <span class=\"string\">&#x27;å®«ä¿é¸¡ä¸&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">eat</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.kind + <span class=\"string\">&#x27; - &#x27;</span> + <span class=\"built_in\">this</span>.type + <span class=\"string\">&#x27; è®©æˆ‘æƒ³èµ·äº†å¤–å©†åšçš„èœ~&#x27;</span>) &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish0 = <span class=\"keyword\">new</span> Dish()  \t\t\t\t\t\t\t\t\t\t<span class=\"comment\">// è¾“å‡º: Error æŠ½è±¡æ–¹æ³•ä¸èƒ½è°ƒç”¨!</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish1 = Restaurant.orderDish(<span class=\"string\">&#x27;é±¼é¦™è‚‰ä¸&#x27;</span>)</span><br><span class=\"line\">dish1.eat()\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">// è¾“å‡º: èœ - é±¼é¦™è‚‰ä¸ çœŸé¦™~</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> dish2 = Restaurant.orderDish(<span class=\"string\">&#x27;çº¢çƒ§æ’éª¨&#x27;</span>) <span class=\"comment\">// è¾“å‡º: Error æœ¬åº—æ²¡æœ‰è¿™ä¸ª -ã€‚-</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p><strong>æŠ½è±¡æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<blockquote>\n<p>æŠ½è±¡äº§å“ç±»å°†äº§å“çš„ç»“æ„æŠ½è±¡å‡ºæ¥ï¼Œè®¿é—®è€…ä¸éœ€è¦çŸ¥é“äº§å“çš„å…·ä½“å®ç°ï¼Œåªéœ€è¦é¢å‘äº§å“çš„ç»“æ„ç¼–ç¨‹å³å¯ï¼Œä»äº§å“çš„å…·ä½“å®ç°ä¸­è§£è€¦ï¼›</p>\n</blockquote>\n<p><strong>æŠ½è±¡æ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>æ‰©å±•æ–°ç±»ç°‡çš„äº§å“ç±»æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºéœ€è¦åˆ›å»ºæ–°çš„æŠ½è±¡äº§å“ç±»ï¼Œå¹¶ä¸”è¿˜è¦ä¿®æ”¹å·¥å‚ç±»ï¼Œè¿åå¼€é—­åŸåˆ™ï¼›</li>\n<li>å¸¦æ¥äº†ç³»ç»Ÿå¤æ‚åº¦ï¼Œå¢åŠ äº†æ–°çš„ç±»ï¼Œå’Œæ–°çš„ç»§æ‰¿å…³ç³»ï¼›</li>\n</ul>\n<p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯</strong></p>\n<blockquote>\n<p>å¦‚æœä¸€ç»„å®ä¾‹éƒ½æœ‰ç›¸åŒçš„ç»“æ„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p>\n</blockquote>\n<p> <strong>æŠ½è±¡å·¥å‚æ¨¡å¼ä¸å·¥å‚æ¨¡å¼</strong></p>\n<p>å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>å·¥å‚æ¨¡å¼ ä¸»è¦å…³æ³¨å•ç‹¬çš„äº§å“å®ä¾‹çš„åˆ›å»ºï¼›</li>\n<li>æŠ½è±¡å·¥å‚æ¨¡å¼ ä¸»è¦å…³æ³¨äº§å“ç±»ç°‡å®ä¾‹çš„åˆ›å»ºï¼Œå¦‚æœäº§å“ç±»ç°‡åªæœ‰ä¸€ä¸ªäº§å“ï¼Œé‚£ä¹ˆè¿™æ—¶çš„æŠ½è±¡å·¥å‚æ¨¡å¼å°±é€€åŒ–ä¸ºå·¥å‚æ¨¡å¼äº†ï¼›æ ¹æ®åœºæ™¯çµæ´»ä½¿ç”¨å³å¯ã€‚</li>\n</ul>\n<h2 id=\"å»ºé€ è€…æ¨¡å¼\"><a href=\"#å»ºé€ è€…æ¨¡å¼\" class=\"headerlink\" title=\"å»ºé€ è€…æ¨¡å¼\"></a>å»ºé€ è€…æ¨¡å¼</h2><blockquote>\n<p>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰åˆç§°ç”Ÿæˆå™¨æ¨¡å¼ï¼Œåˆ†æ­¥æ„å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ã€‚åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥é‡‡ç”¨ä¸åŒçš„è¡¨ç¤ºï¼Œå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºå±‚ä¸å…¶è¡¨ç¤ºå±‚åˆ†ç¦»ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œåˆ›å»ºçš„ç»“æœéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸ªä½“ï¼Œæˆ‘ä»¬å¯¹åˆ›å»ºçš„è¿‡ç¨‹å¹¶ä¸å…³å¿ƒï¼Œåªéœ€äº†è§£åˆ›å»ºçš„ç»“æœã€‚è€Œåœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸å°†åˆ›å»ºçš„å¤æ‚å¯¹è±¡çš„æ¨¡å—åŒ–ï¼Œä½¿å¾—è¢«åˆ›å»ºçš„å¯¹è±¡çš„æ¯ä¸€ä¸ªå­æ¨¡å—éƒ½å¯ä»¥å¾—åˆ°é«˜è´¨é‡çš„å¤ç”¨ï¼Œå½“ç„¶åœ¨çµæ´»çš„ JavaScript ä¸­æˆ‘ä»¬å¯ä»¥æœ‰æ›´çµæ´»çš„å®ç°ã€‚</li>\n</ul>\n<p>æ±½è½¦è£…é…ä»£ç æ¨¡å¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å»ºé€ è€…ï¼Œæ±½è½¦éƒ¨ä»¶å‚å®¶ï¼Œæä¾›å…·ä½“é›¶éƒ¨ä»¶çš„ç”Ÿäº§</span><br><span class=\"line\">function CarBuilder(&#123; color &#x3D; &#39;white&#39;, weight &#x3D; 0 &#125;) &#123;</span><br><span class=\"line\">    this.color &#x3D; color</span><br><span class=\"line\">    this.weight &#x3D; weight</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ç”Ÿäº§éƒ¨ä»¶ï¼Œè½®èƒ</span><br><span class=\"line\">CarBuilder.prototype.buildTyre &#x3D; function(type) &#123;</span><br><span class=\"line\">    switch (type) &#123;</span><br><span class=\"line\">        case &#39;small&#39;:</span><br><span class=\"line\">            this.tyreType &#x3D; &#39;å°å·è½®èƒ&#39;</span><br><span class=\"line\">            this.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">        case &#39;normal&#39;:</span><br><span class=\"line\">            this.tyreType &#x3D; &#39;ä¸­å·è½®èƒ&#39;</span><br><span class=\"line\">            this.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨ä¸­å·è½®èƒ&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">        case &#39;big&#39;:</span><br><span class=\"line\">            this.tyreType &#x3D; &#39;å¤§å·è½®èƒ&#39;</span><br><span class=\"line\">            this.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å¤§å·è½®èƒ&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ç”Ÿäº§éƒ¨ä»¶ï¼Œå‘åŠ¨æœº</span><br><span class=\"line\">CarBuilder.prototype.buildEngine &#x3D; function(type) &#123;</span><br><span class=\"line\">    switch (type) &#123;</span><br><span class=\"line\">        case &#39;small&#39;:</span><br><span class=\"line\">            this.engineType &#x3D; &#39;å°é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            this.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å°é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">        case &#39;normal&#39;:</span><br><span class=\"line\">            this.engineType &#x3D; &#39;ä¸­é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            this.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨ä¸­é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">        case &#39;big&#39;:</span><br><span class=\"line\">            this.engineType &#x3D; &#39;å¤§é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            this.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">            break</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;* å¥”é©°å‚å®¶ï¼Œè´Ÿè´£æœ€ç»ˆæ±½è½¦äº§å“çš„è£…é… *&#x2F;</span><br><span class=\"line\">function benChiDirector(tyre, engine, param) &#123;</span><br><span class=\"line\">    var _car &#x3D; new CarBuilder(param)</span><br><span class=\"line\">    _car.buildTyre(tyre)</span><br><span class=\"line\">    _car.buildEngine(engine)</span><br><span class=\"line\">    return _car</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è·å¾—äº§å“å®ä¾‹</span><br><span class=\"line\">var benchi1 &#x3D; benChiDirector(&#39;small&#39;, &#39;big&#39;, &#123; color: &#39;red&#39;, weight: &#39;1600kg&#39; &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(benchi1)</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è¾“å‡ºï¼š</span><br><span class=\"line\">&#x2F;&#x2F; &#123;</span><br><span class=\"line\">&#x2F;&#x2F;   color: &quot;red&quot;</span><br><span class=\"line\">&#x2F;&#x2F;   weight: &quot;1600kg&quot;</span><br><span class=\"line\">&#x2F;&#x2F;   tyre: Tyre &#123;tyreType: &quot;å°å·è½®èƒ&quot;, tyreIntro: &quot;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&quot;&#125;</span><br><span class=\"line\">&#x2F;&#x2F;   engine: Engine &#123;engineType: &quot;å¤§é©¬åŠ›å‘åŠ¨æœº&quot;, engineIntro: &quot;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&quot;&#125;</span><br><span class=\"line\">&#x2F;&#x2F; &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ES6å†™æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å»ºé€ è€…ï¼Œæ±½è½¦éƒ¨ä»¶å‚å®¶ï¼Œæä¾›å…·ä½“é›¶éƒ¨ä»¶çš„ç”Ÿäº§</span><br><span class=\"line\">class CarBuilder &#123;</span><br><span class=\"line\">    constructor(&#123; color &#x3D; &#39;white&#39;, weight &#x3D; 0 &#125;) &#123;</span><br><span class=\"line\">        this.color &#x3D; color</span><br><span class=\"line\">        this.weight &#x3D; weight</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;* ç”Ÿäº§éƒ¨ä»¶ï¼Œè½®èƒ *&#x2F;</span><br><span class=\"line\">    buildTyre(type) &#123;</span><br><span class=\"line\">        const tyre &#x3D; &#123;&#125;</span><br><span class=\"line\">        switch (type) &#123;</span><br><span class=\"line\">            case &#39;small&#39;:</span><br><span class=\"line\">                tyre.tyreType &#x3D; &#39;å°å·è½®èƒ&#39;</span><br><span class=\"line\">                tyre.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">            case &#39;normal&#39;:</span><br><span class=\"line\">                tyre.tyreType &#x3D; &#39;ä¸­å·è½®èƒ&#39;</span><br><span class=\"line\">                tyre.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨ä¸­å·è½®èƒ&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">            case &#39;big&#39;:</span><br><span class=\"line\">                tyre.tyreType &#x3D; &#39;å¤§å·è½®èƒ&#39;</span><br><span class=\"line\">                tyre.tyreIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å¤§å·è½®èƒ&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        this.tyre &#x3D; tyre</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#x2F;* ç”Ÿäº§éƒ¨ä»¶ï¼Œå‘åŠ¨æœº *&#x2F;</span><br><span class=\"line\">    buildEngine(type) &#123;</span><br><span class=\"line\">        const engine &#x3D; &#123;&#125;</span><br><span class=\"line\">        switch (type) &#123;</span><br><span class=\"line\">            case &#39;small&#39;:</span><br><span class=\"line\">                engine.engineType &#x3D; &#39;å°é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                engine.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å°é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">            case &#39;normal&#39;:</span><br><span class=\"line\">                engine.engineType &#x3D; &#39;ä¸­é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                engine.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨ä¸­é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">            case &#39;big&#39;:</span><br><span class=\"line\">                engine.engineType &#x3D; &#39;å¤§é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                engine.engineIntro &#x3D; &#39;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&#39;</span><br><span class=\"line\">                break</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        this.engine &#x3D; engine</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;* æŒ‡æŒ¥è€…ï¼Œè´Ÿè´£æœ€ç»ˆæ±½è½¦äº§å“çš„è£…é… *&#x2F;</span><br><span class=\"line\">class BenChiDirector &#123;</span><br><span class=\"line\">    constructor(tyre, engine, param) &#123;</span><br><span class=\"line\">        const _car &#x3D; new CarBuilder(param)</span><br><span class=\"line\">        _car.buildTyre(tyre)</span><br><span class=\"line\">        _car.buildEngine(engine)</span><br><span class=\"line\">        return _car</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è·å¾—äº§å“å®ä¾‹</span><br><span class=\"line\">const benchi1 &#x3D; new BenChiDirector(&#39;small&#39;, &#39;big&#39;, &#123; color: &#39;red&#39;, weight: &#39;1600kg&#39; &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(benchi1)</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è¾“å‡ºï¼š</span><br><span class=\"line\">&#x2F;&#x2F; &#123;</span><br><span class=\"line\">&#x2F;&#x2F;   color: &quot;red&quot;</span><br><span class=\"line\">&#x2F;&#x2F;   weight: &quot;1600kg&quot;</span><br><span class=\"line\">&#x2F;&#x2F;   tyre: Tyre &#123;tyreType: &quot;å°å·è½®èƒ&quot;, tyreIntro: &quot;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&quot;&#125;</span><br><span class=\"line\">&#x2F;&#x2F;   engine: Engine &#123;engineType: &quot;å¤§é©¬åŠ›å‘åŠ¨æœº&quot;, engineIntro: &quot;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&quot;&#125;</span><br><span class=\"line\">&#x2F;&#x2F; &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½œä¸ºçµæ´»çš„ JavaScriptï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é“¾æ¨¡å¼æ¥å®Œæˆéƒ¨ä»¶çš„è£…é…</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å»ºé€ è€…ï¼Œæ±½è½¦éƒ¨ä»¶å‚å®¶</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CarBuilder</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">&#123; color = <span class=\"string\">&#x27;white&#x27;</span>, weight = <span class=\"string\">&#x27;0&#x27;</span> &#125;</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.color = color</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.weight = weight</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* ç”Ÿäº§éƒ¨ä»¶ï¼Œè½®èƒ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">buildTyre</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> tyre = &#123;&#125;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;small&#x27;</span>:</span><br><span class=\"line\">                tyre.tyreType = <span class=\"string\">&#x27;å°å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                tyre.tyreIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;normal&#x27;</span>:</span><br><span class=\"line\">                tyre.tyreType = <span class=\"string\">&#x27;ä¸­å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                tyre.tyreIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨ä¸­å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;big&#x27;</span>:</span><br><span class=\"line\">                tyre.tyreType = <span class=\"string\">&#x27;å¤§å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                tyre.tyreIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨å¤§å·è½®èƒ&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.tyre = tyre</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* ç”Ÿäº§éƒ¨ä»¶ï¼Œå‘åŠ¨æœº */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">buildEngine</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> engine = &#123;&#125;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;small&#x27;</span>:</span><br><span class=\"line\">                engine.engineType = <span class=\"string\">&#x27;å°é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                engine.engineIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨å°é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;normal&#x27;</span>:</span><br><span class=\"line\">                engine.engineType = <span class=\"string\">&#x27;ä¸­é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                engine.engineIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨ä¸­é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;big&#x27;</span>:</span><br><span class=\"line\">                engine.engineType = <span class=\"string\">&#x27;å¤§é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                engine.engineIntro = <span class=\"string\">&#x27;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&#x27;</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.engine = engine</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ±½è½¦è£…é…ï¼Œè·å¾—äº§å“å®ä¾‹</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> benchi1 = <span class=\"keyword\">new</span> CarBuilder(&#123; <span class=\"attr\">color</span>: <span class=\"string\">&#x27;red&#x27;</span>, <span class=\"attr\">weight</span>: <span class=\"string\">&#x27;1600kg&#x27;</span> &#125;)</span><br><span class=\"line\">    .buildTyre(<span class=\"string\">&#x27;small&#x27;</span>)</span><br><span class=\"line\">    .buildEngine(<span class=\"string\">&#x27;big&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(benchi1)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   color: &quot;red&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//   weight: &quot;1600kg&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//   tyre: Tyre &#123;tyre: &quot;å°å·è½®èƒ&quot;, tyreIntro: &quot;æ­£åœ¨ä½¿ç”¨å°å·è½®èƒ&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">//   engine: Engine &#123;engine: &quot;å¤§é©¬åŠ›å‘åŠ¨æœº&quot;, engineIntro: &quot;æ­£åœ¨ä½¿ç”¨å¤§é©¬åŠ›å‘åŠ¨æœº&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™æ ·å°†æœ€ç»ˆäº§å“çš„åˆ›å»ºæµç¨‹ä½¿ç”¨é“¾æ¨¡å¼æ¥å®ç°ï¼Œç›¸å½“äºå°†æŒ‡æŒ¥è€…é€€åŒ–ï¼ŒæŒ‡æŒ¥çš„è¿‡ç¨‹é€šè¿‡é“¾æ¨¡å¼è®©ç”¨æˆ·è‡ªå·±å®ç°ï¼Œè¿™æ ·æ—¢å¢åŠ äº†çµæ´»æ€§ï¼Œè£…é…è¿‡ç¨‹ä¹Ÿä¸€ç›®äº†ç„¶ã€‚å¦‚æœå¸Œæœ›æ‰©å±•äº§å“çš„éƒ¨ä»¶ï¼Œé‚£ä¹ˆåœ¨å»ºé€ è€…ä¸Šå¢åŠ éƒ¨ä»¶å®ç°æ–¹æ³•ï¼Œå†é€‚å½“ä¿®æ”¹é“¾æ¨¡å¼å³å¯ã€‚</p>\n</blockquote>\n<p><strong>å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥ä½¿äº§å“çš„æ„å»ºæµç¨‹å’Œäº§å“çš„è¡¨ç°åˆ†ç¦»ï¼Œä¹Ÿå°±æ˜¯å°†äº§å“çš„åˆ›å»ºç®—æ³•å’Œäº§å“ç»„æˆçš„å®ç°éš”ç¦»ï¼Œè®¿é—®è€…ä¸å¿…çŸ¥é“äº§å“éƒ¨ä»¶å®ç°çš„ç»†èŠ‚ï¼›</li>\n<li>æ‰©å±•æ–¹ä¾¿ï¼Œå¦‚æœå¸Œæœ›ç”Ÿäº§ä¸€ä¸ªè£…é…é¡ºåºæˆ–æ–¹å¼ä¸åŒçš„æ–°äº§å“ï¼Œé‚£ä¹ˆç›´æ¥æ–°å»ºä¸€ä¸ªæŒ‡æŒ¥è€…å³å¯ï¼Œä¸ç”¨ä¿®æ”¹æ—¢æœ‰ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼›</li>\n<li>æ›´å¥½çš„å¤ç”¨æ€§ï¼Œå»ºé€ è€…æ¨¡å¼å°†äº§å“çš„åˆ›å»ºç®—æ³•å’Œäº§å“ç»„æˆçš„å®ç°åˆ†ç¦»ï¼Œæ‰€ä»¥äº§å“åˆ›å»ºçš„ç®—æ³•å¯ä»¥å¤ç”¨ï¼Œäº§å“éƒ¨ä»¶çš„å®ç°ä¹Ÿå¯ä»¥å¤ç”¨ï¼Œå¸¦æ¥å¾ˆå¤§çš„çµæ´»æ€§ï¼›</li>\n</ul>\n<p><strong>å»ºé€ è€…æ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li><p>å»ºé€ è€…æ¨¡å¼ä¸€èˆ¬é€‚ç”¨äºäº§å“ä¹‹é—´ç»„æˆéƒ¨ä»¶ç±»ä¼¼çš„æƒ…å†µï¼Œå¦‚æœäº§å“ä¹‹é—´å·®å¼‚æ€§å¾ˆå¤§ã€å¤ç”¨æ€§ä¸é«˜ï¼Œé‚£ä¹ˆä¸è¦ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼›</p>\n</li>\n<li><p>å®ä¾‹çš„åˆ›å»ºå¢åŠ äº†è®¸å¤šé¢å¤–çš„ç»“æ„ï¼Œæ— ç–‘å¢åŠ äº†è®¸å¤šå¤æ‚åº¦ï¼Œå¦‚æœå¯¹è±¡ç²’åº¦ä¸å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€å¥½ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼›</p>\n<p><strong>å»ºé€ è€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n</li>\n<li><p>ç›¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºï¼Œäº§ç”Ÿä¸ä¸€æ ·çš„äº§å“æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å»ºé€ è€…æ¨¡å¼ï¼›</p>\n</li>\n<li><p>äº§å“çš„ç»„æˆéƒ¨ä»¶ç±»ä¼¼ï¼Œé€šè¿‡ç»„è£…ä¸åŒçš„ç»„ä»¶è·å¾—ä¸åŒäº§å“æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å»ºé€ è€…æ¨¡å¼ï¼›</p>\n</li>\n</ul>\n<p><strong>å»ºé€ è€…æ¨¡å¼ä¸å·¥å‚æ¨¡å¼</strong></p>\n<ul>\n<li>å»ºé€ è€…æ¨¡å¼å’Œå·¥å‚æ¨¡å¼æœ€ç»ˆéƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„äº§å“ï¼Œä½†æ˜¯åœ¨å»ºé€ è€…æ¨¡å¼ä¸­æˆ‘ä»¬æ›´å…³å¿ƒå¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ï¼Œå°†åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æ¨¡å—åŒ–ï¼Œä»è€Œæ›´å¥½åœ°å¤ç”¨è¿™äº›æ¨¡å—ã€‚</li>\n<li>å½“ç„¶å»ºé€ è€…æ¨¡å¼ä¸å·¥å‚æ¨¡å¼ä¹Ÿæ˜¯å¯ä»¥ç»„åˆä½¿ç”¨çš„ï¼Œæ¯”å¦‚å»ºé€ è€…ä¸­ä¸€èˆ¬ä¼šæä¾›ä¸åŒçš„éƒ¨ä»¶å®ç°ï¼Œé‚£ä¹ˆè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥æä¾›å…·ä½“çš„éƒ¨ä»¶å¯¹è±¡ï¼Œå†é€šè¿‡æŒ‡æŒ¥è€…æ¥è¿›è¡Œè£…é…ã€‚</li>\n</ul>\n<p>** å»ºé€ è€…æ¨¡å¼ä¸æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼**</p>\n<ul>\n<li>æŒ‡æŒ¥è€…çš„å®ç°å¯ä»¥å’Œæ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ç›¸ç»“åˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡æŒ¥è€…ä¸­éƒ¨ä»¶çš„è£…é…è¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼æ¥å›ºå®šè£…é…ç®—æ³•ï¼ŒæŠŠéƒ¨ä»¶å®ç°æ–¹æ³•åˆ†ä¸ºæ¨¡æ¿æ–¹æ³•å’ŒåŸºæœ¬æ–¹æ³•ï¼Œè¿›ä¸€æ­¥æå–å…¬å…±ä»£ç ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚</li>\n<li>æ˜¯å¦é‡‡ç”¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼çœ‹å…·ä½“åœºæ™¯ï¼Œå¦‚æœäº§å“çš„éƒ¨ä»¶è£…é…é¡ºåºå¾ˆæ˜ç¡®ï¼Œä½†æ˜¯å…·ä½“çš„å®ç°æ˜¯æœªçŸ¥çš„ã€çµæ´»çš„ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‚å½“è€ƒè™‘æ˜¯å¦åº”è¯¥å°†ç®—æ³•éª¨æ¶æå–å‡ºæ¥ã€‚</li>\n</ul>\n<h1 id=\"ä¸‰ã€ç»“æ„å‹æ¨¡å¼\"><a href=\"#ä¸‰ã€ç»“æ„å‹æ¨¡å¼\" class=\"headerlink\" title=\"ä¸‰ã€ç»“æ„å‹æ¨¡å¼\"></a><strong>ä¸‰ã€ç»“æ„å‹æ¨¡å¼</strong></h1><h2 id=\"ä»£ç†æ¨¡å¼\"><a href=\"#ä»£ç†æ¨¡å¼\" class=\"headerlink\" title=\"ä»£ç†æ¨¡å¼\"></a>ä»£ç†æ¨¡å¼</h2><blockquote>\n<p>ä»£ç†æ¨¡å¼ ï¼ˆProxy Patternï¼‰åˆç§°å§”æ‰˜æ¨¡å¼ï¼Œå®ƒä¸ºç›®æ ‡å¯¹è±¡åˆ›é€ äº†ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»¥æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ã€‚</p>\n</blockquote>\n<ul>\n<li>ä»£ç†æ¨¡å¼æŠŠä»£ç†å¯¹è±¡æ’å…¥åˆ°è®¿é—®è€…å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´ï¼Œä»è€Œä¸ºè®¿é—®è€…å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®å¼•å…¥ä¸€å®šçš„é—´æ¥æ€§ã€‚æ­£æ˜¯è¿™ç§é—´æ¥æ€§ï¼Œç»™äº†ä»£ç†å¯¹è±¡å¾ˆå¤šæ“ä½œç©ºé—´ï¼Œæ¯”å¦‚åœ¨è°ƒç”¨ç›®æ ‡å¯¹è±¡å‰å’Œè°ƒç”¨åè¿›è¡Œä¸€äº›é¢„æ“ä½œå’Œåæ“ä½œï¼Œä»è€Œå®ç°æ–°çš„åŠŸèƒ½æˆ–è€…æ‰©å±•ç›®æ ‡çš„åŠŸèƒ½ã€‚</li>\n</ul>\n<p><strong>å®ä¾‹çš„ä»£ç å®ç°</strong></p>\n<p>æˆ‘ä»¬ä½¿ç”¨ JavaScript æ¥å°†ä¸Šé¢çš„æ˜æ˜Ÿä¾‹å­å®ç°ä¸€ä¸‹ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æ˜æ˜Ÿ */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> SuperStar = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;å°é²œè‚‰&#x27;</span>,</span><br><span class=\"line\">    playAdvertisement: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">ad</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(ad)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ç»çºªäºº */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ProxyAssistant = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;ç»çºªäººå¼ æŸ&#x27;</span>,</span><br><span class=\"line\">    playAdvertisement: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">reward, ad</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (reward &gt; <span class=\"number\">1000000</span>) &#123;             <span class=\"comment\">// å¦‚æœæŠ¥é…¬è¶…è¿‡100w</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ²¡é—®é¢˜ï¼Œæˆ‘ä»¬å°é²œé²œæœ€å–œæ¬¢æ‹å¹¿å‘Šäº†ï¼&#x27;</span>)</span><br><span class=\"line\">            SuperStar.playAdvertisement(ad)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ²¡ç©ºï¼Œæ»šï¼&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyAssistant.playAdvertisement(<span class=\"number\">10000</span>, <span class=\"string\">&#x27;çº¯è’¸é…¸ç‰›å¥¶ï¼Œå‘³é“çº¯çº¯ï¼Œå°½äº«çº¯è’¸&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ²¡ç©ºï¼Œæ»š</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥å‡çº§ä¸€ä¸‹ï¼Œæ¯”å¦‚å¦‚æœæ˜æ˜Ÿæ²¡æœ‰æ¡£æœŸçš„è¯ï¼Œå¯ä»¥é€šè¿‡ç»çºªäººå®‰æ’æ¡£æœŸï¼Œå½“æ˜æ˜Ÿæœ‰ç©ºçš„æ—¶å€™æ‰è®©æ˜æ˜Ÿæ¥æ‹å¹¿å‘Šã€‚è¿™é‡Œé€šè¿‡ <code>Promise</code> çš„æ–¹å¼æ¥å®ç°æ¡£æœŸçš„å®‰æ’ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æ˜æ˜Ÿ */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> SuperStar = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;å°é²œè‚‰&#x27;</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">playAdvertisement</span>(<span class=\"params\">ad</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(ad)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ç»çºªäºº */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ProxyAssistant = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">&#x27;ç»çºªäººå¼ æŸ&#x27;</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">scheduleTime</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å°é²œé²œæœ‰ç©ºäº†&#x27;</span>)</span><br><span class=\"line\">                resolve()</span><br><span class=\"line\">            &#125;, <span class=\"number\">2000</span>)                        <span class=\"comment\">// å‘ç°æ˜æ˜Ÿæœ‰ç©ºäº†</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">playAdvertisement</span>(<span class=\"params\">reward, ad</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (reward &gt; <span class=\"number\">1000000</span>) &#123;             <span class=\"comment\">// å¦‚æœæŠ¥é…¬è¶…è¿‡100w</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ²¡é—®é¢˜ï¼Œæˆ‘ä»¬å°é²œé²œæœ€å–œæ¬¢æ‹å¹¿å‘Šäº†ï¼&#x27;</span>)</span><br><span class=\"line\">            ProxyAssistant.scheduleTime()   <span class=\"comment\">// å®‰æ’ä¸Šäº†</span></span><br><span class=\"line\">                .then(<span class=\"function\">() =&gt;</span> SuperStar.playAdvertisement(ad))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ²¡ç©ºï¼Œæ»šï¼&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyAssistant.playAdvertisement(<span class=\"number\">10000</span>, <span class=\"string\">&#x27;çº¯è’¸é…¸ç‰›å¥¶ï¼Œå‘³é“çº¯çº¯ï¼Œå°½äº«çº¯è’¸&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ²¡ç©ºï¼Œæ»š</span></span><br><span class=\"line\"></span><br><span class=\"line\">ProxyAssistant.playAdvertisement(<span class=\"number\">1000001</span>, <span class=\"string\">&#x27;çº¯è’¸é…¸ç‰›å¥¶ï¼Œå‘³é“çº¯çº¯ï¼Œå°½äº«çº¯è’¸&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ²¡é—®é¢˜ï¼Œæˆ‘ä»¬å°é²œé²œæœ€å–œæ¬¢æ‹å¹¿å‘Šäº†ï¼</span></span><br><span class=\"line\"><span class=\"comment\">// 2ç§’å</span></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š å°é²œé²œæœ‰ç©ºäº†</span></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š çº¯è’¸é…¸ç‰›å¥¶ï¼Œå‘³é“çº¯çº¯ï¼Œå°½äº«çº¯è’¸</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œå°±ç®€å•å®ç°äº†ç»çºªäººå¯¹è¯·æ±‚çš„è¿‡æ»¤ï¼Œå¯¹æ˜æ˜Ÿæ¡£æœŸçš„å®‰æ’ï¼Œå®ç°äº†ä¸€ä¸ªä»£ç†å¯¹è±¡çš„åŸºæœ¬åŠŸèƒ½ã€‚</p>\n<p><strong>ä»£ç†æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p><strong>ä»£ç†æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æœ‰ï¼š</strong></p>\n<ul>\n<li>ä»£ç†å¯¹è±¡åœ¨è®¿é—®è€…ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´å¯ä»¥èµ·åˆ°ä¸­ä»‹å’Œä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ï¼›</li>\n<li>ä»£ç†å¯¹è±¡å¯ä»¥æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼›</li>\n<li>ä»£ç†æ¨¡å¼èƒ½å°†è®¿é—®è€…ä¸ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›é€‚åº¦æ‰©å±•ç›®æ ‡å¯¹è±¡çš„ä¸€äº›åŠŸèƒ½ï¼Œé€šè¿‡ä¿®æ”¹ä»£ç†å¯¹è±¡å°±å¯ä»¥äº†ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼›</li>\n<li>ä»£ç†æ¨¡å¼çš„ç¼ºç‚¹ä¸»è¦æ˜¯å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œè¦æ–Ÿé…Œå½“å‰åœºæ™¯æ˜¯ä¸æ˜¯çœŸçš„éœ€è¦å¼•å…¥ä»£ç†æ¨¡å¼ï¼ˆåå…«çº¿æ˜æ˜Ÿå°±åˆ«è¯·ç»çºªäººäº†ï¼‰</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong></p>\n<p>å¾ˆå¤šå…¶ä»–çš„æ¨¡å¼ï¼Œæ¯”å¦‚çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼å…¶å®ä¹Ÿæ˜¯ä½¿ç”¨äº†ä»£ç†æ¨¡å¼ï¼ŒåŒ…æ‹¬åœ¨ä¹‹å‰é«˜é˜¶å‡½æ•°å¤„ä»‹ç»çš„å¤‡å¿˜æ¨¡å¼ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ç¼“å­˜ä»£ç†ã€‚</p>\n<p><strong>ä»£ç†æ¨¡å¼ä¸é€‚é…å™¨æ¨¡å¼</strong></p>\n<p>ä»£ç†æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼éƒ½ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›é—´æ¥æ€§çš„è®¿é—®ï¼Œä»–ä»¬çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>é€‚é…å™¨æ¨¡å¼ï¼š ä¸»è¦ç”¨æ¥è§£å†³æ¥å£ä¹‹é—´ä¸åŒ¹é…çš„é—®é¢˜ï¼Œé€šå¸¸æ˜¯ä¸ºæ‰€é€‚é…çš„å¯¹è±¡æä¾›ä¸€ä¸ªä¸åŒçš„æ¥å£ï¼›</li>\n<li>ä»£ç†æ¨¡å¼ï¼š æä¾›è®¿é—®ç›®æ ‡å¯¹è±¡çš„é—´æ¥è®¿é—®ï¼Œä»¥åŠå¯¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½çš„æ‰©å±•ï¼Œä¸€èˆ¬æä¾›å’Œç›®æ ‡å¯¹è±¡ä¸€æ ·çš„æ¥å£ï¼›</li>\n</ul>\n<p><strong>ä»£ç†æ¨¡å¼ä¸è£…é¥°è€…æ¨¡å¼</strong></p>\n<p>è£…é¥°è€…æ¨¡å¼å®ç°ä¸Šå’Œä»£ç†æ¨¡å¼ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨è®¿é—®ç›®æ ‡å¯¹è±¡ä¹‹å‰æˆ–è€…ä¹‹åæ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œä½†æ˜¯ç›®çš„å’ŒåŠŸèƒ½ä¸åŒï¼š</p>\n<ul>\n<li>è£…é¥°è€…æ¨¡å¼ï¼š ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿åœ°ç»™ç›®æ ‡å¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€åœ°æ·»åŠ åŠŸèƒ½ï¼›</li>\n<li>ä»£ç†æ¨¡å¼ï¼š ä¸»è¦ç›®çš„æ˜¯æ§åˆ¶å…¶ä»–è®¿é—®è€…å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼›</li>\n</ul>\n<h2 id=\"äº«å…ƒæ¨¡å¼\"><a href=\"#äº«å…ƒæ¨¡å¼\" class=\"headerlink\" title=\"äº«å…ƒæ¨¡å¼\"></a>äº«å…ƒæ¨¡å¼</h2><blockquote>\n<p>äº«å…ƒæ¨¡å¼ ï¼ˆFlyweight Patternï¼‰è¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ï¼Œä»¥å‡å°‘åˆ›å»ºçš„å¯¹è±¡çš„æ•°é‡ã€‚</p>\n</blockquote>\n<blockquote>\n<p>äº«å…ƒæ¨¡å¼çš„ä¸»è¦æ€æƒ³æ˜¯å…±äº«ç»†ç²’åº¦å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªç›¸åŒçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåªéœ€å…±äº«ä¸€ä»½å°±å¯ä»¥äº†ï¼Œä¸å¿…æ¯ä¸ªéƒ½å»å®ä¾‹åŒ–æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·æ¥ç²¾ç®€å†…å­˜èµ„æºï¼Œæå‡æ€§èƒ½å’Œæ•ˆç‡ã€‚</p>\n</blockquote>\n<p>Fly æ„ä¸ºè‹è‡ï¼ŒFlyweight æŒ‡è½»è‡é‡çº§ï¼ŒæŒ‡ä»£å¯¹è±¡ç²’åº¦å¾ˆå°ã€‚</p>\n<p><strong>ä»£ç å®ç°</strong></p>\n<p>é¦–å…ˆå‡è®¾è€ƒç”Ÿçš„ ID ä¸ºå¥‡æ•°åˆ™è€ƒçš„æ˜¯æ‰‹åŠ¨æ¡£ï¼Œä¸ºå¶æ•°åˆ™è€ƒçš„æ˜¯è‡ªåŠ¨æ¡£ã€‚å¦‚æœç»™æ‰€æœ‰è€ƒç”Ÿéƒ½ new ä¸€ä¸ªé©¾è€ƒè½¦ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿä¸­å°±ä¼šåˆ›å»ºäº†å’Œè€ƒç”Ÿæ•°é‡ä¸€è‡´çš„é©¾è€ƒè½¦å¯¹è±¡ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> candidateNum = <span class=\"number\">10</span>   <span class=\"comment\">// è€ƒç”Ÿæ•°é‡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> examCarNum = <span class=\"number\">0</span>      <span class=\"comment\">// é©¾è€ƒè½¦çš„æ•°é‡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é©¾è€ƒè½¦æ„é€ å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ExamCar</span>(<span class=\"params\">carType</span>) </span>&#123;</span><br><span class=\"line\">    examCarNum++</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.carId = examCarNum</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.carType = carType ? <span class=\"string\">&#x27;æ‰‹åŠ¨æ¡£&#x27;</span> : <span class=\"string\">&#x27;è‡ªåŠ¨æ¡£&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ExamCar.prototype.examine = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">candidateId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;è€ƒç”Ÿ- &#x27;</span> + candidateId + <span class=\"string\">&#x27; åœ¨&#x27;</span> + <span class=\"built_in\">this</span>.carType + <span class=\"string\">&#x27;é©¾è€ƒè½¦- &#x27;</span> + <span class=\"built_in\">this</span>.carId + <span class=\"string\">&#x27; ä¸Šè€ƒè¯•&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> candidateId = <span class=\"number\">1</span>; candidateId &lt;= candidateNum; candidateId++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> examCar = <span class=\"keyword\">new</span> ExamCar(candidateId % <span class=\"number\">2</span>)</span><br><span class=\"line\">    examCar.examine(candidateId)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;é©¾è€ƒè½¦æ€»æ•° - &#x27;</span> + examCarNum)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º: é©¾è€ƒè½¦æ€»æ•° - 10</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœè€ƒç”Ÿå¾ˆå¤šï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­å°±ä¼šå­˜åœ¨æ›´å¤šä¸ªé©¾è€ƒè½¦å¯¹è±¡å®ä¾‹ï¼Œå‡å¦‚é©¾è€ƒè½¦å¯¹è±¡æ¯”è¾ƒå¤æ‚ï¼Œé‚£ä¹ˆè¿™äº›æ–°å»ºçš„é©¾è€ƒè½¦å®ä¾‹å°±ä¼šå ç”¨å¤§é‡å†…å­˜ã€‚è¿™æ—¶æˆ‘ä»¬å°†åŒç§ç±»å‹çš„é©¾è€ƒè½¦å®ä¾‹è¿›è¡Œåˆå¹¶ï¼Œæ‰‹åŠ¨æ¡£å’Œè‡ªåŠ¨æ¡£æ¡£é©¾è€ƒè½¦åˆ†åˆ«å¼•ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼Œå°±å¯ä»¥èŠ‚çº¦å¤§é‡å†…å­˜ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> candidateNum = <span class=\"number\">10</span>   <span class=\"comment\">// è€ƒç”Ÿæ•°é‡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> examCarNum = <span class=\"number\">0</span>      <span class=\"comment\">// é©¾è€ƒè½¦çš„æ•°é‡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* é©¾è€ƒè½¦æ„é€ å‡½æ•° */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ExamCar</span>(<span class=\"params\">carType</span>) </span>&#123;</span><br><span class=\"line\">    examCarNum++</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.carId = examCarNum</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.carType = carType ? <span class=\"string\">&#x27;æ‰‹åŠ¨æ¡£&#x27;</span> : <span class=\"string\">&#x27;è‡ªåŠ¨æ¡£&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">ExamCar.prototype.examine = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">candidateId</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;è€ƒç”Ÿ- &#x27;</span> + candidateId + <span class=\"string\">&#x27; åœ¨&#x27;</span> + <span class=\"built_in\">this</span>.carType + <span class=\"string\">&#x27;é©¾è€ƒè½¦- &#x27;</span> + <span class=\"built_in\">this</span>.carId + <span class=\"string\">&#x27; ä¸Šè€ƒè¯•&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> manualExamCar = <span class=\"keyword\">new</span> ExamCar(<span class=\"literal\">true</span>)</span><br><span class=\"line\"><span class=\"keyword\">var</span> autoExamCar = <span class=\"keyword\">new</span> ExamCar(<span class=\"literal\">false</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> candidateId = <span class=\"number\">1</span>; candidateId &lt;= candidateNum; candidateId++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> examCar = candidateId % <span class=\"number\">2</span> ? manualExamCar : autoExamCar</span><br><span class=\"line\">    examCar.examine(candidateId)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;é©¾è€ƒè½¦æ€»æ•° - &#x27;</span> + examCarNum)</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡º: é©¾è€ƒè½¦æ€»æ•° - 2</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨ 2 ä¸ªé©¾è€ƒè½¦å®ä¾‹å°±å®ç°äº†åˆšåˆš 10 ä¸ªé©¾è€ƒè½¦å®ä¾‹å®ç°çš„åŠŸèƒ½ã€‚è¿™æ˜¯ä»…æœ‰ 10 ä¸ªè€ƒç”Ÿçš„æƒ…å†µï¼Œå¦‚æœæœ‰å‡ ç™¾ä¸Šåƒè€ƒç”Ÿï¼Œè¿™æ—¶æˆ‘ä»¬èŠ‚çº¦çš„å†…å­˜å°±æ¯”è¾ƒå¯è§‚äº†ï¼Œè¿™å°±æ˜¯äº«å…ƒæ¨¡å¼è¦è¾¾åˆ°çš„ç›®çš„ã€‚</p>\n</blockquote>\n<p><strong>äº«å…ƒæ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p><strong>äº«å…ƒæ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>ç”±äºå‡å°‘äº†ç³»ç»Ÿä¸­çš„å¯¹è±¡æ•°é‡ï¼Œæé«˜äº†ç¨‹åºè¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ï¼Œç²¾ç®€äº†å†…å­˜å ç”¨ï¼ŒåŠ å¿«è¿è¡Œé€Ÿåº¦ï¼›</li>\n<li>å¤–éƒ¨çŠ¶æ€ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸ä¼šå½±å“åˆ°å†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥äº«å…ƒå¯¹è±¡èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¯å¢ƒè¢«å…±äº«ï¼›</li>\n</ul>\n<p><strong>äº«å…ƒæ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>å¼•å…¥äº†å…±äº«å¯¹è±¡ï¼Œä½¿å¯¹è±¡ç»“æ„å˜å¾—å¤æ‚ï¼›</li>\n<li>å…±äº«å¯¹è±¡çš„åˆ›å»ºã€é”€æ¯ç­‰éœ€è¦ç»´æŠ¤ï¼Œå¸¦æ¥é¢å¤–çš„å¤æ‚åº¦ï¼ˆå¦‚æœéœ€è¦æŠŠå…±äº«å¯¹è±¡ç»´æŠ¤èµ·æ¥çš„è¯ï¼‰ï¼›</li>\n</ul>\n<p><strong>äº«å…ƒæ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n<ul>\n<li>å¦‚æœä¸€ä¸ªç¨‹åºä¸­å¤§é‡ä½¿ç”¨äº†ç›¸åŒæˆ–ç›¸ä¼¼å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å¼•å…¥äº«å…ƒæ¨¡å¼ï¼›</li>\n<li>å¦‚æœä½¿ç”¨äº†å¤§é‡ç›¸åŒæˆ–ç›¸ä¼¼å¯¹è±¡ï¼Œå¹¶é€ æˆäº†æ¯”è¾ƒå¤§çš„å†…å­˜å¼€é”€ï¼›</li>\n<li>å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€å¯ä»¥è¢«è½¬å˜ä¸ºå¤–éƒ¨çŠ¶æ€ï¼›</li>\n<li>å‰¥ç¦»å‡ºå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€åï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¤§é‡å¯¹è±¡ï¼›</li>\n<li>åœ¨ä¸€äº›ç¨‹åºä¸­ï¼Œå¦‚æœå¼•å…¥äº«å…ƒæ¨¡å¼å¯¹ç³»ç»Ÿçš„æ€§èƒ½å’Œå†…å­˜çš„å ç”¨å½±å“ä¸å¤§æ—¶ï¼Œæ¯”å¦‚ç›®æ ‡å¯¹è±¡ä¸å¤šï¼Œæˆ–è€…åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œåˆ™ä¸éœ€è¦å¼•å…¥ï¼Œä»¥å…é€‚å¾—å…¶åã€‚</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong></p>\n<ul>\n<li>äº«å…ƒæ¨¡å¼å’Œå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ç­‰ç­‰ç»å¸¸ä¼šä¸€èµ·ä½¿ç”¨ã€‚</li>\n</ul>\n<p><strong>äº«å…ƒæ¨¡å¼å’Œå·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼</strong></p>\n<ul>\n<li><p>åœ¨åŒºåˆ†å‡ºä¸åŒç§ç±»çš„å¤–éƒ¨çŠ¶æ€åï¼Œåˆ›å»ºæ–°å¯¹è±¡æ—¶éœ€è¦é€‰æ‹©ä¸åŒç§ç±»çš„å…±äº«å¯¹è±¡ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥æä¾›å…±äº«å¯¹è±¡ï¼Œåœ¨å…±äº«å¯¹è±¡çš„ç»´æŠ¤ä¸Šï¼Œç»å¸¸ä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼æ¥æä¾›å•å®ä¾‹çš„å…±äº«å¯¹è±¡ã€‚</p>\n<p><strong>äº«å…ƒæ¨¡å¼å’Œç»„åˆæ¨¡å¼</strong></p>\n</li>\n<li><p>åœ¨ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥æä¾›å…±äº«å¯¹è±¡æ—¶ï¼Œæ¯”å¦‚æŸäº›æ—¶å€™å…±äº«å¯¹è±¡ä¸­çš„æŸäº›çŠ¶æ€å°±æ˜¯å¯¹è±¡ä¸éœ€è¦çš„ï¼Œå¯ä»¥å¼•å…¥ç»„åˆæ¨¡å¼æ¥æå‡è‡ªå®šä¹‰å…±äº«å¯¹è±¡çš„è‡ªç”±åº¦ï¼Œå¯¹å…±äº«å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†è¿›ä¸€æ­¥å½’ç±»ã€åˆ†å±‚ï¼Œæ¥å®ç°æ›´å¤æ‚çš„å¤šå±‚æ¬¡å¯¹è±¡ç»“æ„ï¼Œå½“ç„¶ç³»ç»Ÿä¹Ÿä¼šæ›´éš¾ç»´æŠ¤ã€‚</p>\n</li>\n</ul>\n<p><strong>äº«å…ƒæ¨¡å¼å’Œç­–ç•¥æ¨¡å¼</strong></p>\n<blockquote>\n<p>ç­–ç•¥æ¨¡å¼ä¸­çš„ç­–ç•¥å±äºä¸€ç³»åˆ—åŠŸèƒ½å•ä¸€ã€ç»†ç²’åº¦çš„ç»†ç²’åº¦å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºç›®æ ‡å¯¹è±¡æ¥è€ƒè™‘å¼•å…¥äº«å…ƒæ¨¡å¼è¿›è¡Œä¼˜åŒ–ï¼Œä½†æ˜¯å‰ææ˜¯è¿™äº›ç­–ç•¥æ˜¯ä¼šè¢«é¢‘ç¹ä½¿ç”¨çš„ï¼Œå¦‚æœä¸ç»å¸¸ä½¿ç”¨ï¼Œå°±æ²¡æœ‰å¿…è¦äº†ã€‚</p>\n</blockquote>\n<h2 id=\"é€‚é…å™¨æ¨¡å¼\"><a href=\"#é€‚é…å™¨æ¨¡å¼\" class=\"headerlink\" title=\"é€‚é…å™¨æ¨¡å¼\"></a>é€‚é…å™¨æ¨¡å¼</h2><ul>\n<li>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰åˆç§°åŒ…è£…å™¨æ¨¡å¼ï¼Œå°†ä¸€ä¸ªç±»ï¼ˆå¯¹è±¡ï¼‰çš„æ¥å£ï¼ˆæ–¹æ³•ã€å±æ€§ï¼‰è½¬åŒ–ä¸ºç”¨æˆ·éœ€è¦çš„å¦ä¸€ä¸ªæ¥å£ï¼Œè§£å†³ç±»ï¼ˆå¯¹è±¡ï¼‰ä¹‹é—´æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ã€‚</li>\n<li>ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡Œè½¬æ¢åŒ¹é…ï¼Œç›®çš„æ˜¯å¤ç”¨å·²æœ‰çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯æ¥å®ç°æ–°çš„æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè®¿é—®è€…éœ€è¦çš„åŠŸèƒ½åº”è¯¥æ˜¯å·²ç»å®ç°å¥½äº†çš„ï¼Œä¸éœ€è¦é€‚é…å™¨æ¨¡å¼æ¥å®ç°ï¼Œé€‚é…å™¨æ¨¡å¼ä¸»è¦æ˜¯è´Ÿè´£æŠŠä¸å…¼å®¹çš„æ¥å£è½¬æ¢æˆè®¿é—®è€…æœŸæœ›çš„æ ¼å¼è€Œå·²ã€‚</li>\n</ul>\n<p><strong>ä»£ç å®ç°</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸‹ç”µæºé€‚é…å™¨çš„ä¾‹å­ï¼Œä¸€å¼€å§‹æˆ‘ä»¬ä½¿ç”¨çš„ä¸­å›½æ’å¤´æ ‡å‡†ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> chinaPlug = &#123;</span><br><span class=\"line\">    type: <span class=\"string\">&#x27;ä¸­å›½æ’å¤´&#x27;</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">chinaInPlug</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¼€å§‹ä¾›ç”µ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">chinaPlug.chinaInPlug()</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šå¼€å§‹ä¾›ç”µ</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯æˆ‘ä»¬å‡ºå›½æ—…æ¸¸äº†ï¼Œåˆ°äº†æ—¥æœ¬ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªæ—¥æœ¬æ’å¤´åˆ°ä¸­å›½æ’å¤´çš„ç”µæºé€‚é…å™¨ï¼Œæ¥å°†æˆ‘ä»¬åŸæ¥çš„ç”µæºçº¿ç”¨èµ·æ¥ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> chinaPlug = &#123;</span><br><span class=\"line\">    type: <span class=\"string\">&#x27;ä¸­å›½æ’å¤´&#x27;</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">chinaInPlug</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¼€å§‹ä¾›ç”µ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> japanPlug = &#123;</span><br><span class=\"line\">    type: <span class=\"string\">&#x27;æ—¥æœ¬æ’å¤´&#x27;</span>,</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">japanInPlug</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¼€å§‹ä¾›ç”µ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ—¥æœ¬æ’å¤´ç”µæºé€‚é…å™¨ */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">japanPlugAdapter</span>(<span class=\"params\">plug</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">chinaInPlug</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> plug.japanInPlug()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">japanPlugAdapter(japanPlug).chinaInPlug()</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šå¼€å§‹ä¾›ç”µ</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>é€‚é…å™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p><strong>é€‚é…å™¨æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>å·²æœ‰çš„åŠŸèƒ½å¦‚æœåªæ˜¯æ¥å£ä¸å…¼å®¹ï¼Œä½¿ç”¨é€‚é…å™¨é€‚é…å·²æœ‰åŠŸèƒ½ï¼Œå¯ä»¥ä½¿åŸæœ‰é€»è¾‘å¾—åˆ°æ›´å¥½çš„å¤ç”¨ï¼Œæœ‰åŠ©äºé¿å…å¤§è§„æ¨¡æ”¹å†™ç°æœ‰ä»£ç ï¼›</li>\n<li>å¯æ‰©å±•æ€§è‰¯å¥½ï¼Œåœ¨å®ç°é€‚é…å™¨åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨è‡ªå·±å¼€å‘çš„åŠŸèƒ½ï¼Œä»è€Œæ–¹ä¾¿åœ°æ‰©å±•ç³»ç»Ÿçš„åŠŸèƒ½ï¼›</li>\n<li>çµæ´»æ€§å¥½ï¼Œå› ä¸ºé€‚é…å™¨å¹¶æ²¡æœ‰å¯¹åŸæœ‰å¯¹è±¡çš„åŠŸèƒ½æœ‰æ‰€å½±å“ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨é€‚é…å™¨äº†ï¼Œé‚£ä¹ˆç›´æ¥åˆ æ‰å³å¯ï¼Œä¸ä¼šå¯¹ä½¿ç”¨åŸæœ‰å¯¹è±¡çš„ä»£ç æœ‰å½±å“ï¼›</li>\n<li>é€‚é…å™¨æ¨¡å¼çš„ç¼ºç‚¹ï¼šä¼šè®©ç³»ç»Ÿå˜å¾—é›¶ä¹±ï¼Œæ˜æ˜è°ƒç”¨ Aï¼Œå´è¢«é€‚é…åˆ°äº† Bï¼Œå¦‚æœç³»ç»Ÿä¸­è¿™æ ·çš„æƒ…å†µå¾ˆå¤šï¼Œé‚£ä¹ˆå¯¹å¯é˜…è¯»æ€§ä¸å¤ªå‹å¥½ã€‚å¦‚æœæ²¡å¿…è¦ä½¿ç”¨é€‚é…å™¨æ¨¡å¼çš„è¯ï¼Œå¯ä»¥è€ƒè™‘é‡æ„ï¼Œå¦‚æœä½¿ç”¨çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å°½é‡æŠŠæ–‡æ¡£å®Œå–„ã€‚</li>\n</ul>\n<p><strong>é€‚é…å™¨æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n<ul>\n<li>å½“ä½ æƒ³ç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œå´æƒ³ä¿®æ”¹å®ƒçš„æ¥å£æ—¶ï¼Œä¸€èˆ¬å¯ä»¥è€ƒè™‘ä¸€ä¸‹æ˜¯ä¸æ˜¯å¯ä»¥åº”ç”¨é€‚é…å™¨æ¨¡å¼ã€‚</li>\n<li>å¦‚æœä½ æƒ³è¦ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„æ¥å£ä¸æ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼ŒæŠŠå·²æœ‰çš„å®ç°è½¬æ¢æˆä½ éœ€è¦çš„æ¥å£ï¼›</li>\n<li>å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªå¯ä»¥å¤ç”¨çš„å¯¹è±¡ï¼Œè€Œä¸”ç¡®å®šéœ€è¦å’Œä¸€äº›ä¸å…¼å®¹çš„å¯¹è±¡ä¸€èµ·å·¥ä½œï¼Œè¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œç„¶åéœ€è¦ä»€ä¹ˆå°±é€‚é…ä»€ä¹ˆï¼›</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong></p>\n<blockquote>\n<p>é€‚é…å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼çœ‹èµ·æ¥æ¯”è¾ƒç±»ä¼¼ï¼Œéƒ½æ˜¯å±äºåŒ…è£…æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªå¯¹è±¡æ¥åŒ…è£…å¦ä¸€ä¸ªå¯¹è±¡çš„æ¨¡å¼ï¼Œä»–ä»¬ä¹‹é—´çš„å¼‚åŒåœ¨ä»£ç†æ¨¡å¼ä¸­å·²ç»è¯¦ç»†ä»‹ç»äº†ï¼Œè¿™é‡Œå†ç®€å•å¯¹æ¯”ä¸€ä¸‹ã€‚</p>\n</blockquote>\n<p><strong>é€‚é…å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼</strong></p>\n<ul>\n<li>é€‚é…å™¨æ¨¡å¼ï¼š æä¾›ä¸€ä¸ªä¸ä¸€æ ·çš„æ¥å£ï¼Œç”±äºåŸæ¥çš„æ¥å£æ ¼å¼ä¸èƒ½ç”¨äº†ï¼Œæä¾›æ–°çš„æ¥å£ä»¥æ»¡è¶³æ–°åœºæ™¯ä¸‹çš„éœ€æ±‚ï¼›</li>\n<li>ä»£ç†æ¨¡å¼ï¼š æä¾›ä¸€æ¨¡ä¸€æ ·çš„æ¥å£ï¼Œç”±äºä¸èƒ½ç›´æ¥è®¿é—®ç›®æ ‡å¯¹è±¡ï¼Œæ‰¾ä¸ªä»£ç†æ¥å¸®å¿™è®¿é—®ï¼Œä½¿ç”¨è€…å¯ä»¥å°±åƒè®¿é—®ç›®æ ‡å¯¹è±¡ä¸€æ ·æ¥è®¿é—®ä»£ç†å¯¹è±¡ï¼›</li>\n</ul>\n<p><strong>é€‚é…å™¨æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ä¸ä»£ç†æ¨¡å¼</strong></p>\n<ul>\n<li>é€‚é…å™¨æ¨¡å¼ï¼š åŠŸèƒ½ä¸å˜ï¼Œåªè½¬æ¢äº†åŸæœ‰æ¥å£è®¿é—®æ ¼å¼ï¼›</li>\n<li>è£…é¥°è€…æ¨¡å¼ï¼š æ‰©å±•åŠŸèƒ½ï¼ŒåŸæœ‰åŠŸèƒ½ä¸å˜ä¸”å¯ç›´æ¥ä½¿ç”¨ï¼›</li>\n<li>ä»£ç†æ¨¡å¼ï¼š åŸæœ‰åŠŸèƒ½ä¸å˜ï¼Œä½†ä¸€èˆ¬æ˜¯ç»è¿‡é™åˆ¶è®¿é—®çš„ï¼›</li>\n</ul>\n<h2 id=\"è£…é¥°è€…æ¨¡å¼\"><a href=\"#è£…é¥°è€…æ¨¡å¼\" class=\"headerlink\" title=\"è£…é¥°è€…æ¨¡å¼\"></a>è£…é¥°è€…æ¨¡å¼</h2><blockquote>\n<p>è£…é¥°è€…æ¨¡å¼ ï¼ˆDecorator Patternï¼‰åˆç§°è£…é¥°å™¨æ¨¡å¼ï¼Œåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¯¹å…¶æ·»åŠ å±æ€§æˆ–æ–¹æ³•æ¥è¿›è¡ŒåŒ…è£…æ‹“å±•ï¼Œä½¿å¾—åŸæœ‰å¯¹è±¡å¯ä»¥åŠ¨æ€å…·æœ‰æ›´å¤šåŠŸèƒ½ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æœ¬è´¨æ˜¯åŠŸèƒ½åŠ¨æ€ç»„åˆï¼Œå³åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½è§’åº¦æ¥çœ‹ï¼Œä½¿ç”¨è£…é¥°è€…æ¨¡å¼æ¯”ç”¨ç»§æ‰¿æ›´ä¸ºçµæ´»ã€‚å¥½å¤„æ˜¯æœ‰æ•ˆåœ°æŠŠå¯¹è±¡çš„æ ¸å¿ƒèŒè´£å’Œè£…é¥°åŠŸèƒ½åŒºåˆ†å¼€ï¼Œå¹¶ä¸”é€šè¿‡åŠ¨æ€å¢åˆ è£…é¥°å»é™¤ç›®æ ‡å¯¹è±¡ä¸­é‡å¤çš„è£…é¥°é€»è¾‘ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript æ¥å°†è£…ä¿®æˆ¿å­çš„ä¾‹å­å®ç°ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æ¯›å¯æˆ¿ - ç›®æ ‡å¯¹è±¡ */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">OriginHouse</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">OriginHouse.prototype.getDesc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¯›å¯æˆ¿&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ¬å…¥å®¶å…· - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Furniture</span>(<span class=\"params\">house</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.house = house</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Furniture.prototype.getDesc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.house.getDesc()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¬å…¥å®¶å…·&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¢™å£åˆ·æ¼† - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Painting</span>(<span class=\"params\">house</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.house = house</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Painting.prototype.getDesc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.house.getDesc()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¢™å£åˆ·æ¼†&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> house = <span class=\"keyword\">new</span> OriginHouse() <span class=\"comment\">// æ¯›å¯æˆ¿</span></span><br><span class=\"line\">house = <span class=\"keyword\">new</span> Furniture(house) <span class=\"comment\">// æ¬å…¥å®¶å…·</span></span><br><span class=\"line\">house = <span class=\"keyword\">new</span> Painting(house) <span class=\"comment\">// å¢™å£åˆ·æ¼†</span></span><br><span class=\"line\"></span><br><span class=\"line\">house.getDesc()</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ¯›å¯æˆ¿  æ¬å…¥å®¶å…·  å¢™å£åˆ·æ¼†</span></span><br><span class=\"line\">ä½¿ç”¨ ES6 çš„ Class è¯­æ³•ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ¯›å¯æˆ¿ - ç›®æ ‡å¯¹è±¡ */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OriginHouse</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">getDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¯›å¯æˆ¿&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ¬å…¥å®¶å…· - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Furniture</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">house</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.house = house</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">getDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.house.getDesc()</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¬å…¥å®¶å…·&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¢™å£åˆ·æ¼† - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Painting</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">house</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.house = house</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">getDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.house.getDesc()</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¢™å£åˆ·æ¼†&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> house = <span class=\"keyword\">new</span> OriginHouse()</span><br><span class=\"line\">house = <span class=\"keyword\">new</span> Furniture(house)</span><br><span class=\"line\">house = <span class=\"keyword\">new</span> Painting(house)</span><br><span class=\"line\"></span><br><span class=\"line\">house.getDesc()</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ¯›å¯æˆ¿  æ¬å…¥å®¶å…·  å¢™å£åˆ·æ¼†</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼Œè£…é¥°ä¸ªåŠŸèƒ½è¿™ä¹ˆå¤æ‚ï¼Ÿæˆ‘ä»¬ JSer å¤§å¯ä¸å¿…èµ°è¿™ä¸€å¥—é¢å‘å¯¹è±¡èŠ±é‡Œèƒ¡å“¨çš„ï¼Œæ¯•ç«Ÿ JavaScript çš„ä¼˜ç‚¹å°±æ˜¯çµæ´»ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æ¯›å¯æˆ¿ - ç›®æ ‡å¯¹è±¡ */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> originHouse = &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">getDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¯›å¯æˆ¿ &#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ¬å…¥å®¶å…· - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">furniture</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;æ¬å…¥å®¶å…· &#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¢™å£åˆ·æ¼† - è£…é¥°è€… */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">painting</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;å¢™å£åˆ·æ¼† &#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ·»åŠ è£…é¥° - æ¬å…¥å®¶å…· */</span></span><br><span class=\"line\">originHouse.getDesc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> getDesc = originHouse.getDesc</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        getDesc()</span><br><span class=\"line\">        furniture()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; ()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ·»åŠ è£…é¥° - å¢™å£åˆ·æ¼† */</span></span><br><span class=\"line\">originHouse.getDesc = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> getDesc = originHouse.getDesc</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        getDesc()</span><br><span class=\"line\">        painting()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125; ()</span><br><span class=\"line\"></span><br><span class=\"line\">originHouse.getDesc()</span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼š æ¯›å¯æˆ¿  æ¬å…¥å®¶å…·  å¢™å£åˆ·æ¼†</span></span><br></pre></td></tr></table></figure>\n\n<p>ç®€æ´æ˜äº†ï¼Œä¸”æ›´ç¬¦åˆå‰ç«¯æ—¥å¸¸ä½¿ç”¨çš„åœºæ™¯ã€‚</p>\n<p><strong>è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p>\n<p><strong>è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å®ç°åŠŸèƒ½çš„æ‰©å±•ï¼Œä½†è¿™æ ·ä¼šç»™ç³»ç»Ÿä¸­å¸¦æ¥å¾ˆå¤šçš„å­ç±»å’Œå¤æ‚çš„ç»§æ‰¿å…³ç³»ï¼Œè£…é¥°è€…æ¨¡å¼å…è®¸ç”¨æˆ·åœ¨ä¸å¼•èµ·å­ç±»æ•°é‡æš´å¢çš„å‰æä¸‹åŠ¨æ€åœ°ä¿®é¥°å¯¹è±¡ï¼Œæ·»åŠ åŠŸèƒ½ï¼Œè£…é¥°è€…å’Œè¢«è£…é¥°è€…ä¹‹é—´æ¾è€¦åˆï¼Œå¯ç»´æŠ¤æ€§å¥½ï¼›</li>\n<li>è¢«è£…é¥°è€…å¯ä»¥ä½¿ç”¨è£…é¥°è€…åŠ¨æ€åœ°å¢åŠ å’Œæ’¤é”€åŠŸèƒ½ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„è£…é¥°å™¨ï¼Œå®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œçµæ´»æ€§å¥½ï¼›</li>\n<li>è£…é¥°è€…æ¨¡å¼æŠŠä¸€ç³»åˆ—å¤æ‚çš„åŠŸèƒ½åˆ†æ•£åˆ°æ¯ä¸ªè£…é¥°å™¨å½“ä¸­ï¼Œä¸€èˆ¬ä¸€ä¸ªè£…é¥°å™¨åªå®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ å¤šä¸ªåŒæ ·çš„è£…é¥°å™¨ï¼Œä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªè£…é¥°å™¨ç”¨æ¥è£…é¥°ä¸åŒçš„å¯¹è±¡ï¼Œæœ‰åˆ©äºè£…é¥°å™¨åŠŸèƒ½çš„å¤ç”¨ï¼›</li>\n<li>å¯ä»¥é€šè¿‡é€‰æ‹©ä¸åŒçš„è£…é¥°è€…çš„ç»„åˆï¼Œåˆ›é€ ä¸åŒè¡Œä¸ºå’ŒåŠŸèƒ½çš„ç»“åˆä½“ï¼ŒåŸæœ‰å¯¹è±¡çš„ä»£ç æ— é¡»æ”¹å˜ï¼Œå°±å¯ä»¥ä½¿å¾—åŸæœ‰å¯¹è±¡çš„åŠŸèƒ½å˜å¾—æ›´å¼ºå¤§å’Œæ›´å¤šæ ·åŒ–ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼›</li>\n</ul>\n<p><strong>è£…é¥°è€…æ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>ä½¿ç”¨è£…é¥°è€…æ¨¡å¼æ—¶ä¼šäº§ç”Ÿå¾ˆå¤šç»†ç²’åº¦çš„è£…é¥°è€…å¯¹è±¡ï¼Œè¿™äº›è£…é¥°è€…å¯¹è±¡ç”±äºæ¥å£å’ŒåŠŸèƒ½çš„å¤šæ ·åŒ–å¯¼è‡´ç³»ç»Ÿå¤æ‚åº¦å¢åŠ ï¼ŒåŠŸèƒ½è¶Šå¤æ‚ï¼Œéœ€è¦çš„ç»†ç²’åº¦å¯¹è±¡è¶Šå¤šï¼›</li>\n<li>ç”±äºæ›´å¤§çš„çµæ´»æ€§ï¼Œä¹Ÿå°±æ›´å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤šçº§è£…é¥°çš„åœºæ™¯ï¼Œé”™è¯¯å®šä½ä¼šæ›´åŠ ç¹çï¼›</li>\n</ul>\n<p><strong>è£…é¥°è€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n<ul>\n<li>å¦‚æœä¸å¸Œæœ›ç³»ç»Ÿä¸­å¢åŠ å¾ˆå¤šå­ç±»ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼›</li>\n<li>éœ€è¦é€šè¿‡å¯¹ç°æœ‰çš„ä¸€ç»„åŸºæœ¬åŠŸèƒ½è¿›è¡Œæ’åˆ—ç»„åˆè€Œäº§ç”Ÿéå¸¸å¤šçš„åŠŸèƒ½æ—¶ï¼Œé‡‡ç”¨ç»§æ‰¿å…³ç³»å¾ˆéš¾å®ç°ï¼Œè¿™æ—¶é‡‡ç”¨è£…é¥°è€…æ¨¡å¼å¯ä»¥å¾ˆå¥½å®ç°ï¼›</li>\n<li>å½“å¯¹è±¡çš„åŠŸèƒ½è¦æ±‚å¯ä»¥åŠ¨æ€åœ°æ·»åŠ ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€åœ°æ’¤é”€ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼›</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong> </p>\n<p>** è£…é¥°è€…æ¨¡å¼ä¸é€‚é…å™¨æ¨¡å¼**</p>\n<blockquote>\n<p>è£…é¥°è€…æ¨¡å¼å’Œé€‚é…å™¨æ¨¡å¼éƒ½æ˜¯å±äºåŒ…è£…æ¨¡å¼ï¼Œç„¶è€Œä»–ä»¬çš„æ„å›¾æœ‰äº›ä¸ä¸€æ ·ï¼š</p>\n</blockquote>\n<ul>\n<li>è£…é¥°è€…æ¨¡å¼ï¼š æ‰©å±•åŠŸèƒ½ï¼ŒåŸæœ‰åŠŸèƒ½è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸€èˆ¬å¯ä»¥ç»™ç›®æ ‡å¯¹è±¡å¤šæ¬¡å åŠ ä½¿ç”¨å¤šä¸ªè£…é¥°è€…ï¼›</li>\n<li>é€‚é…å™¨æ¨¡å¼ï¼š åŠŸèƒ½ä¸å˜ï¼Œä½†æ˜¯è½¬æ¢äº†åŸæœ‰æ¥å£çš„è®¿é—®æ ¼å¼ï¼Œä¸€èˆ¬åªç»™ç›®æ ‡å¯¹è±¡ä½¿ç”¨ä¸€æ¬¡ï¼›</li>\n</ul>\n<p><strong>è£…é¥°è€…æ¨¡å¼ä¸ç»„åˆæ¨¡å¼</strong></p>\n<p>è¿™ä¸¤ä¸ªæ¨¡å¼æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½æ¶‰åŠåˆ°å¯¹è±¡çš„é€’å½’è°ƒç”¨ï¼Œä»æŸä¸ªè§’åº¦æ¥è¯´ï¼Œå¯ä»¥æŠŠè£…é¥°è€…æ¨¡å¼çœ‹åšæ˜¯åªæœ‰ä¸€ä¸ªç»„ä»¶çš„ç»„åˆæ¨¡å¼ã€‚</p>\n<ul>\n<li>è£…é¥°è€…æ¨¡å¼ï¼š åŠ¨æ€åœ°ç»™å¯¹è±¡å¢åŠ åŠŸèƒ½ï¼›</li>\n<li>ç»„åˆæ¨¡å¼ï¼š ç®¡ç†ç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡ï¼Œä¸ºå®ƒä»¬æä¾›ä¸€è‡´çš„æ“ä½œæ¥å£ç»™å®¢æˆ·ç«¯ï¼Œæ–¹ä¾¿å®¢æˆ·ç«¯çš„ä½¿ç”¨ï¼›</li>\n</ul>\n<p><strong>è£…é¥°è€…æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼</strong></p>\n<p>è£…é¥°è€…æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼éƒ½åŒ…å«æœ‰è®¸å¤šç»†ç²’åº¦çš„åŠŸèƒ½æ¨¡å—ï¼Œä½†æ˜¯ä»–ä»¬çš„ä½¿ç”¨æ€è·¯ä¸åŒï¼š</p>\n<ul>\n<li>è£…é¥°è€…æ¨¡å¼ï¼š å¯ä»¥é€’å½’è°ƒç”¨ï¼Œä½¿ç”¨å¤šä¸ªåŠŸèƒ½æ¨¡å¼ï¼ŒåŠŸèƒ½ä¹‹é—´å¯ä»¥å åŠ ç»„åˆä½¿ç”¨ï¼›</li>\n<li>ç­–ç•¥æ¨¡å¼ï¼š åªæœ‰ä¸€å±‚é€‰æ‹©ï¼Œé€‰æ‹©æŸä¸€ä¸ªåŠŸèƒ½ï¼›</li>\n</ul>\n<h2 id=\"å¤–è§‚æ¨¡å¼\"><a href=\"#å¤–è§‚æ¨¡å¼\" class=\"headerlink\" title=\"å¤–è§‚æ¨¡å¼\"></a>å¤–è§‚æ¨¡å¼</h2><blockquote>\n<p>å¤–è§‚æ¨¡å¼ ï¼ˆFacade Patternï¼‰åˆå«é—¨é¢æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªå°†å­ç³»ç»Ÿçš„ä¸€ç»„æ¥å£é›†æˆåœ¨ä¸€èµ·çš„é«˜å±‚æ¥å£ï¼Œä»¥æä¾›ä¸€ä¸ªä¸€è‡´çš„å¤–è§‚ã€‚å¤–è§‚æ¨¡å¼è®©å¤–ç•Œå‡å°‘ä¸å­ç³»ç»Ÿå†…å¤šä¸ªæ¨¡å—çš„ç›´æ¥äº¤äº’ï¼Œä»è€Œå‡å°‘è€¦åˆï¼Œè®©å¤–ç•Œå¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨å­ç³»ç»Ÿã€‚æœ¬è´¨æ˜¯å°è£…äº¤äº’ï¼Œç®€åŒ–è°ƒç”¨ã€‚</p>\n</blockquote>\n<p>å¤–è§‚æ¨¡å¼åœ¨æºç ä¸­ä½¿ç”¨å¾ˆå¤šï¼Œå…·ä½“å¯ä»¥å‚è€ƒåæ–‡ä¸­æºç é˜…è¯»éƒ¨åˆ†ã€‚</p>\n<p><strong>ç®€åŒ–ç‰ˆæœ¬çš„ä»£ç ï¼š æ— äººæœº</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> uav = &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ç”µå­è°ƒé€Ÿå™¨ */</span></span><br><span class=\"line\">    diantiao1: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ1å‘é€æŒ‡ä»¤ï¼šç”µæœº1å¢å¤§è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji1.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ1å‘é€æŒ‡ä»¤ï¼šç”µæœº1å‡å°è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji1.up()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    diantiao2: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ2å‘é€æŒ‡ä»¤ï¼šç”µæœº2å¢å¤§è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji2.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ2å‘é€æŒ‡ä»¤ï¼šç”µæœº2å‡å°è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji2.down()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    diantiao3: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ3å‘é€æŒ‡ä»¤ï¼šç”µæœº3å¢å¤§è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji3.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ3å‘é€æŒ‡ä»¤ï¼šç”µæœº3å‡å°è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji3.down()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    diantiao4: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ4å‘é€æŒ‡ä»¤ï¼šç”µæœº4å¢å¤§è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji4.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µè°ƒ4å‘é€æŒ‡ä»¤ï¼šç”µæœº4å‡å°è½¬é€Ÿ&#x27;</span>)</span><br><span class=\"line\">            uav.dianji4.down()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* ç”µæœº */</span></span><br><span class=\"line\">    dianji1: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº1å¢å¤§è½¬é€Ÿ&#x27;</span>) &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº1å‡å°è½¬é€Ÿ&#x27;</span>) &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dianji2: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº2å¢å¤§è½¬é€Ÿ&#x27;</span>) &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº2å‡å°è½¬é€Ÿ&#x27;</span>) &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dianji3: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº3å¢å¤§è½¬é€Ÿ&#x27;</span>) &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº3å‡å°è½¬é€Ÿ&#x27;</span>) &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dianji4: &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº4å¢å¤§è½¬é€Ÿ&#x27;</span>) &#125;,</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;ç”µæœº4å‡å°è½¬é€Ÿ&#x27;</span>) &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* é¥æ§å™¨ */</span></span><br><span class=\"line\">    controller: &#123;</span><br><span class=\"line\">        <span class=\"comment\">/* ä¸Šå‡ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">up</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            uav.diantiao1.up()</span><br><span class=\"line\">            uav.diantiao2.up()</span><br><span class=\"line\">            uav.diantiao3.up()</span><br><span class=\"line\">            uav.diantiao4.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* å‰è¿› */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">forward</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            uav.diantiao1.down()</span><br><span class=\"line\">            uav.diantiao2.down()</span><br><span class=\"line\">            uav.diantiao3.up()</span><br><span class=\"line\">            uav.diantiao4.up()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* ä¸‹é™ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">down</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            uav.diantiao1.down()</span><br><span class=\"line\">            uav.diantiao2.down()</span><br><span class=\"line\">            uav.diantiao3.down()</span><br><span class=\"line\">            uav.diantiao4.down()</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* å·¦è½¬ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">left</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            uav.diantiao1.up()</span><br><span class=\"line\">            uav.diantiao2.down()</span><br><span class=\"line\">            uav.diantiao3.up()</span><br><span class=\"line\">            uav.diantiao4.down()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ“çºµæ— äººæœº */</span></span><br><span class=\"line\">uav.controller.down()    <span class=\"comment\">// å‘é€ä¸‹é™æŒ‡ä»¤</span></span><br><span class=\"line\">uav.controller.left()    <span class=\"comment\">// å‘é€å·¦è½¬æŒ‡ä»¤</span></span><br></pre></td></tr></table></figure>\n\n<p>æ— äººæœºç³»ç»Ÿæ˜¯æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°æ— äººæœºçš„æ“çºµå´æ¯”è¾ƒç®€å•ï¼Œæ­£æ˜¯å› ä¸ºæœ‰é¥æ§å™¨è¿™ä¸ªå¤–è§‚çš„å­˜åœ¨ã€‚</p>\n<p><strong>å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>è®¿é—®è€…ä¸éœ€è¦å†äº†è§£å­ç³»ç»Ÿå†…éƒ¨æ¨¡å—çš„åŠŸèƒ½ï¼Œè€Œåªéœ€å’Œå¤–è§‚äº¤äº’å³å¯ï¼Œä½¿å¾—è®¿é—®è€…å¯¹å­ç³»ç»Ÿçš„ä½¿ç”¨å˜å¾—ç®€å•ï¼Œç¬¦åˆæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œå¢å¼ºäº†å¯ç§»æ¤æ€§å’Œå¯è¯»æ€§ï¼›</li>\n<li>å‡å°‘äº†ä¸å­ç³»ç»Ÿæ¨¡å—çš„ç›´æ¥å¼•ç”¨ï¼Œå®ç°äº†è®¿é—®è€…ä¸å­ç³»ç»Ÿä¸­æ¨¡å—ä¹‹é—´çš„æ¾è€¦åˆï¼Œå¢åŠ äº†å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼›</li>\n<li>é€šè¿‡åˆç†ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°åˆ’åˆ†ç³»ç»Ÿè®¿é—®å±‚æ¬¡ï¼Œæ¯”å¦‚æŠŠéœ€è¦æš´éœ²ç»™å¤–éƒ¨çš„åŠŸèƒ½é›†ä¸­åˆ°å¤–è§‚ä¸­ï¼Œè¿™æ ·æ—¢æ–¹ä¾¿è®¿é—®è€…ä½¿ç”¨ï¼Œä¹Ÿå¾ˆå¥½åœ°éšè—äº†å†…éƒ¨çš„ç»†èŠ‚ï¼Œæå‡äº†å®‰å…¨æ€§ï¼›</li>\n</ul>\n<p><strong>å¤–è§‚æ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¦‚æœå¤–è§‚æ¨¡å—å‡ºé”™ï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡ä¿®æ”¹çš„æ–¹å¼æ¥è§£å†³é—®é¢˜ï¼Œå› ä¸ºå¤–è§‚æ¨¡å—æ˜¯å­ç³»ç»Ÿçš„å”¯ä¸€å‡ºå£ï¼›</li>\n<li>ä¸éœ€è¦æˆ–ä¸åˆç†çš„ä½¿ç”¨å¤–è§‚ä¼šè®©äººè¿·æƒ‘ï¼Œè¿‡çŠ¹ä¸åŠï¼›</li>\n</ul>\n<p><strong>å¤–è§‚æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n<ul>\n<li>ç»´æŠ¤è®¾è®¡ç²—ç³™å’Œéš¾ä»¥ç†è§£çš„é—ç•™ç³»ç»Ÿï¼Œæˆ–è€…ç³»ç»Ÿéå¸¸å¤æ‚çš„æ—¶å€™ï¼Œå¯ä»¥ä¸ºè¿™äº›ç³»ç»Ÿè®¾ç½®å¤–è§‚æ¨¡å—ï¼Œç»™å¤–ç•Œæä¾›æ¸…æ™°çš„æ¥å£ï¼Œä»¥åæ–°ç³»ç»Ÿåªéœ€ä¸å¤–è§‚äº¤äº’å³å¯ï¼›</li>\n<li>ä½ å†™äº†è‹¥å¹²å°æ¨¡å—ï¼Œå¯ä»¥å®ŒæˆæŸä¸ªå¤§åŠŸèƒ½ï¼Œä½†æ—¥åå¸¸ç”¨çš„æ˜¯å¤§åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨å¤–è§‚æ¥æä¾›å¤§åŠŸèƒ½ï¼Œå› ä¸ºå¤–ç•Œä¹Ÿä¸éœ€è¦äº†è§£å°æ¨¡å—çš„åŠŸèƒ½ï¼›</li>\n<li>å›¢é˜Ÿåä½œæ—¶ï¼Œå¯ä»¥ç»™å„è‡ªè´Ÿè´£çš„æ¨¡å—å»ºç«‹åˆé€‚çš„å¤–è§‚ï¼Œä»¥ç®€åŒ–ä½¿ç”¨ï¼ŒèŠ‚çº¦æ²Ÿé€šæ—¶é—´ï¼›</li>\n<li>å¦‚æœæ„å»ºå¤šå±‚ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼æ¥å°†ç³»ç»Ÿåˆ†å±‚ï¼Œè®©å¤–è§‚æ¨¡å—æˆä¸ºæ¯å±‚çš„å…¥å£ï¼Œç®€åŒ–å±‚é—´è°ƒç”¨ï¼Œæ¾æ•£å±‚é—´è€¦åˆï¼›</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong> </p>\n<p><strong>å¤–è§‚æ¨¡å¼ä¸ä¸­ä»‹è€…æ¨¡å¼</strong></p>\n<ul>\n<li>å¤–è§‚æ¨¡å¼ï¼š å°è£…å­ä½¿ç”¨è€…å¯¹å­ç³»ç»Ÿå†…æ¨¡å—çš„ç›´æ¥äº¤äº’ï¼Œæ–¹ä¾¿ä½¿ç”¨è€…å¯¹å­ç³»ç»Ÿçš„è°ƒç”¨ï¼›</li>\n<li>ä¸­ä»‹è€…æ¨¡å¼ï¼š å°è£…å­ç³»ç»Ÿé—´å„æ¨¡å—ä¹‹é—´çš„ç›´æ¥äº¤äº’ï¼Œæ¾æ•£æ¨¡å—é—´çš„è€¦åˆï¼›</li>\n</ul>\n<p><strong>å¤–è§‚æ¨¡å¼ä¸å•ä¾‹æ¨¡å¼</strong></p>\n<blockquote>\n<p>æœ‰æ—¶å€™ä¸€ä¸ªç³»ç»Ÿåªéœ€è¦ä¸€ä¸ªå¤–è§‚ï¼Œæ¯”å¦‚ä¹‹å‰ä¸¾çš„ <code>Axios</code> çš„ <code>HTTP</code> æ¨¡å—ä¾‹å­ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥å°†å¤–è§‚æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼ŒæŠŠå¤–è§‚å®ç°ä¸ºå•ä¾‹ã€‚</p>\n</blockquote>\n<h2 id=\"ç»„åˆæ¨¡å¼\"><a href=\"#ç»„åˆæ¨¡å¼\" class=\"headerlink\" title=\"ç»„åˆæ¨¡å¼\"></a>ç»„åˆæ¨¡å¼</h2><blockquote>\n<p>ç»„åˆæ¨¡å¼ ï¼ˆComposite Patternï¼‰åˆå«æ•´ä½“-éƒ¨åˆ†æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç°æ•´ä½“-éƒ¨åˆ†å±‚æ¬¡ç»“æ„ï¼Œè®©ä½¿ç”¨è€…å¯ä»¥ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†ç»„åˆå¯¹è±¡ä»¥åŠéƒ¨åˆ†å¯¹è±¡</p>\n</blockquote>\n<p><strong>ä½ æ›¾è§è¿‡çš„ç»„åˆæ¨¡å¼</strong></p>\n<p>å¤§å®¶ç”µè„‘é‡Œçš„æ–‡ä»¶å¤¹ç»“æ„ç›¸æ¯”å¾ˆç†Ÿæ‚‰äº†ï¼Œæ–‡ä»¶å¤¹ä¸‹é¢å¯ä»¥æœ‰å­æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æœ‰æ–‡ä»¶ï¼Œå­æ–‡ä»¶å¤¹ä¸‹é¢è¿˜å¯ä»¥æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå…±åŒç»„æˆäº†ä¸€ä¸ªæ–‡ä»¶æ ‘ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">Folder <span class=\"number\">1</span></span><br><span class=\"line\">â”œâ”€â”€ Folder <span class=\"number\">2</span></span><br><span class=\"line\">â”‚   â”œâ”€â”€ File <span class=\"number\">1.</span>txt</span><br><span class=\"line\">â”‚   â”œâ”€â”€ File <span class=\"number\">2.</span>txt</span><br><span class=\"line\">â”‚   â””â”€â”€ File <span class=\"number\">3.</span>txt</span><br><span class=\"line\">â””â”€â”€ Folder <span class=\"number\">3</span></span><br><span class=\"line\">    â”œâ”€â”€ File <span class=\"number\">4.</span>txt</span><br><span class=\"line\">    â”œâ”€â”€ File <span class=\"number\">5.</span>txt</span><br><span class=\"line\">    â””â”€â”€ File <span class=\"number\">6.</span>txt</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ–‡ä»¶å¤¹æ˜¯æ ‘å½¢ç»“æ„çš„å®¹å™¨èŠ‚ç‚¹ï¼Œå®¹å™¨èŠ‚ç‚¹å¯ä»¥ç»§ç»­åŒ…å«å…¶ä»–å®¹å™¨èŠ‚ç‚¹ï¼Œåƒæ ‘æä¸Šè¿˜å¯ä»¥æœ‰å…¶ä»–æ ‘æä¸€æ ·ï¼›ä¹Ÿå¯ä»¥åŒ…å«æ–‡ä»¶ï¼Œä¸å†å¢åŠ æ–°çš„å±‚çº§ï¼Œå°±åƒæ ‘çš„å¶å­ä¸€æ ·å¤„äºæœ«ç«¯ï¼Œå› æ­¤è¢«ç§°ä¸ºå¶èŠ‚ç‚¹ã€‚æœ¬æ–‡ä¸­ï¼Œå¶èŠ‚ç‚¹åˆç§°ä¸ºå¶å¯¹è±¡ï¼Œå®¹å™¨èŠ‚ç‚¹å› ä¸ºå¯ä»¥åŒ…å«å®¹å™¨èŠ‚ç‚¹å’Œéå®¹å™¨èŠ‚ç‚¹ï¼Œåˆç§°ä¸ºç»„åˆå¯¹è±¡ã€‚</p>\n</blockquote>\n<p><strong>ä»£ç å®ç°</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript æ¥å°†ä¹‹å‰çš„æ–‡ä»¶å¤¹ä¾‹å­å®ç°ä¸€ä¸‹ã€‚</p>\n<p>åœ¨æœ¬åœ°ä¸€ä¸ªã€Œç”µå½±ã€æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸¤ä¸ªå­æ–‡ä»¶å¤¹ã€Œæ¼«å¨è‹±é›„ç”µå½±ã€å’Œã€ŒDCè‹±é›„ç”µå½±ã€ï¼Œåˆ†åˆ«å„è‡ªæœ‰ä¸€äº›ç”µå½±æ–‡ä»¶ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªç”µå½±æ–‡ä»¶å¤¹é‡Œæ‰¾å¤§äº 2G çš„ç”µå½±æ–‡ä»¶ï¼Œæ— è®ºæ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¿˜æ˜¯åœ¨å­æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶è¾“å‡ºå®ƒçš„æ–‡ä»¶åå’Œæ–‡ä»¶å¤§å°ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* åˆ›å»ºæ–‡ä»¶å¤¹ */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> createFolder = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: name,</span><br><span class=\"line\">        _children: [],</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* åœ¨æ–‡ä»¶å¤¹ä¸‹å¢åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\">fileOrFolder</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._children.push(fileOrFolder)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* æ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._children.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">child</span>) </span>&#123;</span><br><span class=\"line\">                child.scan(cb)</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* åˆ›å»ºæ–‡ä»¶ */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> createFile = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, size</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: name,</span><br><span class=\"line\">        size: size,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* åœ¨æ–‡ä»¶ä¸‹å¢åŠ æ–‡ä»¶ï¼Œåº”æŠ¥é”™ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶&#x27;</span>)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* æ‰§è¡Œæ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">            cb(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> foldMovies = createFolder(<span class=\"string\">&#x27;ç”µå½±&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºå­æ–‡ä»¶å¤¹ï¼Œå¹¶æ”¾å…¥æ ¹æ–‡ä»¶å¤¹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> foldMarvelMovies = createFolder(<span class=\"string\">&#x27;æ¼«å¨è‹±é›„ç”µå½±&#x27;</span>)</span><br><span class=\"line\">foldMovies.add(foldMarvelMovies)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> foldDCMovies = createFolder(<span class=\"string\">&#x27;DCè‹±é›„ç”µå½±&#x27;</span>)</span><br><span class=\"line\">foldMovies.add(foldDCMovies)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸ºä¸¤ä¸ªå­æ–‡ä»¶å¤¹åˆ†åˆ«æ·»åŠ ç”µå½±</span></span><br><span class=\"line\">foldMarvelMovies.add(createFile(<span class=\"string\">&#x27;é’¢é“ä¾ .mp4&#x27;</span>, <span class=\"number\">1.9</span>))</span><br><span class=\"line\">foldMarvelMovies.add(createFile(<span class=\"string\">&#x27;èœ˜è››ä¾ .mp4&#x27;</span>, <span class=\"number\">2.1</span>))</span><br><span class=\"line\">foldMarvelMovies.add(createFile(<span class=\"string\">&#x27;é‡‘åˆšç‹¼.mp4&#x27;</span>, <span class=\"number\">2.3</span>))</span><br><span class=\"line\">foldMarvelMovies.add(createFile(<span class=\"string\">&#x27;é»‘å¯¡å¦‡.mp4&#x27;</span>, <span class=\"number\">1.9</span>))</span><br><span class=\"line\">foldMarvelMovies.add(createFile(<span class=\"string\">&#x27;ç¾å›½é˜Ÿé•¿.mp4&#x27;</span>, <span class=\"number\">1.4</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">foldDCMovies.add(createFile(<span class=\"string\">&#x27;è™è ä¾ .mp4&#x27;</span>, <span class=\"number\">2.4</span>))</span><br><span class=\"line\">foldDCMovies.add(createFile(<span class=\"string\">&#x27;è¶…äºº.mp4&#x27;</span>, <span class=\"number\">1.6</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š&#x27;</span>)</span><br><span class=\"line\">foldMovies.scan(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (item.size &gt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;name:&#x27;</span> + item.name + <span class=\"string\">&#x27; size:&#x27;</span> + item.size + <span class=\"string\">&#x27;GB&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// name:èœ˜è››ä¾ .mp4 size:2.1GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:é‡‘åˆšç‹¼.mp4 size:2.3GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:è™è ä¾ .mp4 size:2.4GB</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½œä¸ºçµæ´»çš„ JavaScriptï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é“¾æ¨¡å¼æ¥è¿›è¡Œæ”¹é€ ä¸€ä¸‹ï¼Œè®©æˆ‘ä»¬æ·»åŠ å­æ–‡ä»¶æ›´åŠ ç›´è§‚å’Œæ–¹ä¾¿ã€‚å¯¹é“¾æ¨¡å¼è¿˜ä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹åé¢æœ‰ä¸€ç¯‡å•ç‹¬ä»‹ç»é“¾æ¨¡å¼çš„æ–‡ç« ï½</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* åˆ›å»ºæ–‡ä»¶å¤¹ */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> createFolder = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: name,</span><br><span class=\"line\">        _children: [],</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* åœ¨æ–‡ä»¶å¤¹ä¸‹å¢åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹  */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\">...fileOrFolder</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._children.push(...fileOrFolder)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">this</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* æ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>._children.forEach(<span class=\"function\"><span class=\"params\">child</span> =&gt;</span> child.scan(cb))</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* åˆ›å»ºæ–‡ä»¶ */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> createFile = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, size</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        name: name,</span><br><span class=\"line\">        size: size,</span><br><span class=\"line\">      </span><br><span class=\"line\">        <span class=\"comment\">/* åœ¨æ–‡ä»¶ä¸‹å¢åŠ æ–‡ä»¶ï¼Œåº”æŠ¥é”™ */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶&#x27;</span>)</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">/* æ‰§è¡Œæ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">            cb(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> foldMovies = createFolder(<span class=\"string\">&#x27;ç”µå½±&#x27;</span>)</span><br><span class=\"line\">  .add(</span><br><span class=\"line\">    createFolder(<span class=\"string\">&#x27;æ¼«å¨è‹±é›„ç”µå½±&#x27;</span>)</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;é’¢é“ä¾ .mp4&#x27;</span>, <span class=\"number\">1.9</span>))</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;èœ˜è››ä¾ .mp4&#x27;</span>, <span class=\"number\">2.1</span>))</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;é‡‘åˆšç‹¼.mp4&#x27;</span>, <span class=\"number\">2.3</span>))</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;é»‘å¯¡å¦‡.mp4&#x27;</span>, <span class=\"number\">1.9</span>))</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;ç¾å›½é˜Ÿé•¿.mp4&#x27;</span>, <span class=\"number\">1.4</span>)),</span><br><span class=\"line\">    createFolder(<span class=\"string\">&#x27;DCè‹±é›„ç”µå½±&#x27;</span>)</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;è™è ä¾ .mp4&#x27;</span>, <span class=\"number\">2.4</span>))</span><br><span class=\"line\">      .add(createFile(<span class=\"string\">&#x27;è¶…äºº.mp4&#x27;</span>, <span class=\"number\">1.6</span>))</span><br><span class=\"line\">  )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">foldMovies.scan(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (item.size &gt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`name:<span class=\"subst\">$&#123; item.name &#125;</span> size:<span class=\"subst\">$&#123; item.size &#125;</span>GB`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// name:èœ˜è››ä¾ .mp4 size:2.1GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:é‡‘åˆšç‹¼.mp4 size:2.3GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:è™è ä¾ .mp4 size:2.4GB</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ä»£ç æ¯”è¾ƒ JavaScript ç‰¹è‰²ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿçš„ç±»å‘¢ï¼Œä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ï¼Œä¸‹é¢ä½¿ç”¨ ES6 çš„ class è¯­æ³•æ¥æ”¹å†™ä¸€ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* æ–‡ä»¶å¤¹ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Folder</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name, children</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.children = children</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* åœ¨æ–‡ä»¶å¤¹ä¸‹å¢åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\">...fileOrFolder</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.children.push(...fileOrFolder)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* æ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.children.forEach(<span class=\"function\"><span class=\"params\">child</span> =&gt;</span> child.scan(cb))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ–‡ä»¶ç±» */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">File</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name, size</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.name = name</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.size = size</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* åœ¨æ–‡ä»¶ä¸‹å¢åŠ æ–‡ä»¶ï¼Œåº”æŠ¥é”™ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\">...fileOrFolder</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* æ‰§è¡Œæ‰«ææ–¹æ³• */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">scan</span>(<span class=\"params\">cb</span>)</span> &#123;</span><br><span class=\"line\">        cb(<span class=\"built_in\">this</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> foldMovies = <span class=\"keyword\">new</span> Folder(<span class=\"string\">&#x27;ç”µå½±&#x27;</span>, [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Folder(<span class=\"string\">&#x27;æ¼«å¨è‹±é›„ç”µå½±&#x27;</span>, [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;é’¢é“ä¾ .mp4&#x27;</span>, <span class=\"number\">1.9</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;èœ˜è››ä¾ .mp4&#x27;</span>, <span class=\"number\">2.1</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;é‡‘åˆšç‹¼.mp4&#x27;</span>, <span class=\"number\">2.3</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;é»‘å¯¡å¦‡.mp4&#x27;</span>, <span class=\"number\">1.9</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;ç¾å›½é˜Ÿé•¿.mp4&#x27;</span>, <span class=\"number\">1.4</span>)]),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Folder(<span class=\"string\">&#x27;DCè‹±é›„ç”µå½±&#x27;</span>, [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;è™è ä¾ .mp4&#x27;</span>, <span class=\"number\">2.4</span>),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> File(<span class=\"string\">&#x27;è¶…äºº.mp4&#x27;</span>, <span class=\"number\">1.6</span>)])</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">foldMovies.scan(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (item.size &gt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">`name:<span class=\"subst\">$&#123; item.name &#125;</span> size:<span class=\"subst\">$&#123; item.size &#125;</span>GB`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// size å¤§äº2Gçš„æ–‡ä»¶æœ‰ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// name:èœ˜è››ä¾ .mp4 size:2.1GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:é‡‘åˆšç‹¼.mp4 size:2.3GB</span></span><br><span class=\"line\"><span class=\"comment\">// name:è™è ä¾ .mp4 size:2.4GB</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¼ ç»Ÿçš„è¯­è¨€ä¸­ï¼Œä¸ºäº†ä¿è¯å¶å¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„å¤–è§‚ä¸€è‡´ï¼Œè¿˜ä¼šè®©ä»–ä»¬å®ç°åŒä¸€ä¸ªæŠ½è±¡ç±»æˆ–æ¥å£ã€‚</p>\n<p><strong>ç»„åˆæ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong> <strong>ç»„åˆæ¨¡å¼çš„ä¼˜ç‚¹ï¼š</strong></p>\n<ul>\n<li>ç”±äºç»„åˆå¯¹è±¡å’Œå¶å¯¹è±¡å…·æœ‰åŒæ ·çš„æ¥å£ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯ç»„åˆå¯¹è±¡è¿˜æ˜¯å¶å¯¹è±¡å¯¹ä½¿ç”¨è€…æ¥è¯´æ²¡æœ‰åŒºåˆ«ï¼Œä½¿å¾—ä½¿ç”¨è€…é¢å‘æ¥å£ç¼–ç¨‹ï¼›</li>\n<li>å¦‚æœæƒ³åœ¨ç»„åˆæ¨¡å¼çš„æ ‘ä¸­å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹æ¯”è¾ƒå®¹æ˜“ï¼Œåœ¨ç›®æ ‡ç»„åˆå¯¹è±¡ä¸­æ·»åŠ å³å¯ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–å¯¹è±¡ï¼Œå¯¹æ‰©å±•å‹å¥½ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼Œåˆ©äºç»´æŠ¤ï¼›</li>\n</ul>\n<p><strong>ç»„åˆæ¨¡å¼çš„ç¼ºç‚¹ï¼š</strong></p>\n<ul>\n<li>å¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦ï¼Œå¦‚æœæ ‘ä¸­å¯¹è±¡ä¸å¤šï¼Œåˆ™ä¸ä¸€å®šéœ€è¦ä½¿ç”¨ï¼›</li>\n<li>å¦‚æœé€šè¿‡ç»„åˆæ¨¡å¼åˆ›å»ºäº†å¤ªå¤šçš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡å¯èƒ½ä¼šè®©ç³»ç»Ÿè´Ÿæ‹…ä¸èµ·ï¼›</li>\n</ul>\n<p><strong>ç»„åˆæ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p>\n<ul>\n<li>å¦‚æœå¯¹è±¡ç»„ç»‡å‘ˆæ ‘å½¢ç»“æ„å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæ“ä½œæ ‘ä¸­å¯¹è±¡çš„æ–¹æ³•æ¯”è¾ƒç±»ä¼¼æ—¶ï¼›</li>\n<li>ä½¿ç”¨è€…å¸Œæœ›ç»Ÿä¸€å¯¹å¾…æ ‘å½¢ç»“æ„ä¸­çš„å¯¹è±¡ï¼Œæ¯”å¦‚ç”¨æˆ·ä¸æƒ³å†™ä¸€å † if-else æ¥å¤„ç†æ ‘ä¸­çš„èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼›</li>\n</ul>\n<p><strong>å…¶ä»–ç›¸å…³æ¨¡å¼</strong> </p>\n<p><strong>ç»„åˆæ¨¡å¼å’ŒèŒè´£é“¾æ¨¡å¼</strong></p>\n<p>æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œç»„åˆæ¨¡å¼æ˜¯å¤©ç”Ÿå®ç°äº†èŒè´£é“¾æ¨¡å¼çš„ã€‚</p>\n<ul>\n<li>ç»„åˆæ¨¡å¼ï¼š è¯·æ±‚åœ¨ç»„åˆå¯¹è±¡ä¸Šä¼ é€’ï¼Œè¢«æ·±åº¦éå†åˆ°ç»„åˆå¯¹è±¡çš„æ‰€æœ‰å­å­™å¶èŠ‚ç‚¹å…·ä½“æ‰§è¡Œï¼›</li>\n<li>èŒè´£é“¾æ¨¡å¼ï¼š å®ç°è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è§£è€¦ï¼ŒæŠŠå¤šä¸ªæ¥å—è€…ç»„åˆèµ·æ¥å½¢æˆèŒè´£é“¾ï¼Œè¯·æ±‚åœ¨é“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°æœ‰æ¥å—è€…å¤„ç†è¯·æ±‚ä¸ºæ­¢ï¼›</li>\n</ul>\n<p><strong>ç»„åˆæ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼</strong></p>\n<p>ç»„åˆæ¨¡å¼å¯ä»¥ç»“åˆè¿­ä»£å™¨æ¨¡å¼ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨éå†ç»„åˆå¯¹è±¡çš„å¶èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼æ¥éå†ã€‚</p>\n<p><strong>ç»„åˆæ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼</strong></p>\n<blockquote>\n<p>å‘½ä»¤æ¨¡å¼é‡Œæœ‰ä¸€ä¸ªç”¨æ³•ã€Œå®å‘½ä»¤ã€ï¼Œå®å‘½ä»¤å°±æ˜¯ç»„åˆæ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼ä¸€èµ·ä½¿ç”¨çš„ç»“æœï¼Œæ˜¯ç»„åˆæ¨¡å¼ç»„è£…è€Œæˆ</p>\n</blockquote>\n<h2 id=\"æ¡¥æ¥æ¨¡å¼\"><a href=\"#æ¡¥æ¥æ¨¡å¼\" class=\"headerlink\" title=\"æ¡¥æ¥æ¨¡å¼\"></a>æ¡¥æ¥æ¨¡å¼</h2><ul>\n<li>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰åˆç§°æ¡¥æ¢æ¨¡å¼ï¼Œå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚ä½¿ç”¨ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»ï¼Œé™ä½æŠ½è±¡å’Œå®ç°ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ã€‚</li>\n<li>æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œé¦™è•‰ã€è‹¹æœã€è¥¿ç“œï¼Œå®ƒä»¬å…±åŒçš„æŠ½è±¡éƒ¨åˆ†å°±æ˜¯æ°´æœï¼Œå¯ä»¥åƒï¼Œå®ç°éƒ¨åˆ†å°±æ˜¯ä¸åŒçš„æ°´æœå®ä½“ã€‚å†æ¯”å¦‚é»‘è‰²æ‰‹æåŒ…ã€çº¢è‰²é’±åŒ…ã€è“è‰²å…¬æ–‡åŒ…ï¼Œå®ƒä»¬å…±åŒçš„æŠ½è±¡éƒ¨åˆ†æ˜¯åŒ…å’Œé¢œè‰²ï¼Œè¿™éƒ¨åˆ†çš„å…±æ€§å°±å¯ä»¥è¢«ä½œä¸ºæŠ½è±¡æå–å‡ºæ¥ã€‚</li>\n</ul>\n<p><strong>å®ä¾‹çš„ä»£ç å®ç°</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript æ¥å°†ä¹‹å‰çš„å˜é¢‘æ´—è¡£æœºä¾‹å­å®ç°ä¸€ä¸‹ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ç»„è£…æ´—è¡£æœº */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Washer</span>(<span class=\"params\">motorType, rollerType, transducerType</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.motor = <span class=\"keyword\">new</span> Motor(motorType)</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.roller = <span class=\"keyword\">new</span> Roller(rollerType)</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.transducer = <span class=\"keyword\">new</span> Transducer(transducerType)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Washer.prototype.work = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.motor.run()</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.roller.run()</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.transducer.run()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ç”µæœº */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Motor</span>(<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.motorType = type + <span class=\"string\">&#x27;ç”µæœº&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Motor.prototype.run = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.motorType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ»šç­’ */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Roller</span>(<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.rollerType = type + <span class=\"string\">&#x27;æ»šç­’&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Roller.prototype.run = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.rollerType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å˜é¢‘å™¨ */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Transducer</span>(<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.transducerType = type + <span class=\"string\">&#x27;å˜é¢‘å™¨&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Transducer.prototype.run = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.transducerType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–°å»ºæ´—è¡£æœº</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> washerA = <span class=\"keyword\">new</span> Washer(<span class=\"string\">&#x27;å°åŠŸç‡&#x27;</span>, <span class=\"string\">&#x27;ç›´ç«‹&#x27;</span>, <span class=\"string\">&#x27;å°åŠŸç‡&#x27;</span>)</span><br><span class=\"line\">washerA.work()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šå°åŠŸç‡ç”µæœºå¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      ç›´ç«‹æ»šç­’å¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      å°åŠŸç‡å˜é¢‘å™¨å¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\">ç”±äºäº§å“éƒ¨ä»¶å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œæ‰€ä»¥åˆ›å»ºæ–°çš„æ´—è¡£æœºäº§å“å°±éå¸¸å®¹æ˜“ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> washerD = <span class=\"keyword\">new</span> Washer(<span class=\"string\">&#x27;å°åŠŸç‡&#x27;</span>, <span class=\"string\">&#x27;ç›´ç«‹&#x27;</span>, <span class=\"string\">&#x27;ä¸­åŠŸç‡&#x27;</span>)</span><br><span class=\"line\">washerD.work()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šå°åŠŸç‡ç”µæœºå¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      ç›´ç«‹æ»šç­’å¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      ä¸­åŠŸç‡å˜é¢‘å™¨å¼€å§‹å·¥ä½œ</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥çœ‹åˆ°ç”±äºæ´—è¡£æœºçš„ç»“æ„è¢«åˆ†åˆ«æŠ½è±¡ä¸ºå‡ ä¸ªéƒ¨ä»¶çš„ç»„åˆï¼Œéƒ¨ä»¶çš„å®ä¾‹åŒ–æ˜¯åœ¨éƒ¨ä»¶ç±»å„è‡ªçš„æ„é€ å‡½æ•°ä¸­å®Œæˆï¼Œå› æ­¤éƒ¨ä»¶ä¹‹é—´çš„å®ä¾‹åŒ–ä¸ä¼šç›¸äº’å½±å“ï¼Œæ–°äº§å“çš„åˆ›å»ºä¹Ÿå˜å¾—å®¹æ˜“ï¼Œè¿™å°±æ˜¯æ¡¥æ¥æ¨¡å¼çš„å¥½å¤„ã€‚</p>\n</blockquote>\n<p>ä¸‹é¢æˆ‘ä»¬ç”¨ ES6 çš„ Class è¯­æ³•å®ç°ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ç»„è£…æ´—è¡£æœº */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Washer</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">motorType, rollerType, transducerType</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.motor = <span class=\"keyword\">new</span> Motor(motorType)</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.roller = <span class=\"keyword\">new</span> Roller(rollerType)</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.transducer = <span class=\"keyword\">new</span> Transducer(transducerType)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* å¼€å§‹ä½¿ç”¨ */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">work</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.motor.run()</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.roller.run()</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.transducer.run()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ç”µæœº */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Motor</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.motorType = type + <span class=\"string\">&#x27;ç”µæœº&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">run</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.motorType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æ»šç­’ */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Roller</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.rollerType = type + <span class=\"string\">&#x27;æ»šç­’&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">run</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.rollerType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å˜é¢‘å™¨ */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Transducer</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.transducerType = type + <span class=\"string\">&#x27;å˜é¢‘å™¨&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">run</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.transducerType + <span class=\"string\">&#x27;å¼€å§‹å·¥ä½œ&#x27;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> washerA = <span class=\"keyword\">new</span> Washer(<span class=\"string\">&#x27;å°åŠŸç‡&#x27;</span>, <span class=\"string\">&#x27;ç›´ç«‹&#x27;</span>, <span class=\"string\">&#x27;å°åŠŸç‡&#x27;</span>)</span><br><span class=\"line\">washerA.work()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šå°åŠŸç‡ç”µæœºå¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      ç›´ç«‹æ»šç­’å¼€å§‹å·¥ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">//      å°åŠŸç‡å˜é¢‘å™¨å¼€å§‹å·¥ä½œ</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœå†ç²¾è‡´ä¸€ç‚¹ï¼Œå¯ä»¥è®©ç”µæœºã€æ»šç­’ã€å˜é¢‘å™¨ç­‰éƒ¨ä»¶å®ä¾‹ç»§æ‰¿è‡ªå„è‡ªçš„æŠ½è±¡ç±»ï¼Œå°†é¢å‘æŠ½è±¡è¿›è¡Œåˆ°åº•ï¼Œä½†æ˜¯æ¡¥æ¥æ¨¡å¼åœ¨ JavaScript ä¸­åº”ç”¨ä¸å¤šï¼Œé€‚å½“äº†è§£å³å¯ï¼Œä¸ç”¨å¤ªæ­»æ‰£ã€‚</li>\n<li>æœ‰æ—¶å€™ä¸ºäº†æ›´å¤ç”¨éƒ¨ä»¶ï¼Œå¯ä»¥å°†éƒ¨ä»¶çš„å®ä¾‹åŒ–æ‹¿å‡ºæ¥ï¼Œå¯¹äºæ´—è¡£æœºæ¥è¯´ä¸€ä¸ªå®ä½“éƒ¨ä»¶å½“ç„¶ä¸èƒ½ç”¨ä¸¤æ¬¡ï¼Œè¿™é‡Œä½¿ç”¨çš®åŒ…çš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* çš®åŒ… */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bag</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type, color</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.type = type</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.color = color</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/* å±•ç¤º */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">show</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">          <span class=\"built_in\">this</span>.color.show() + <span class=\"built_in\">this</span>.type.show()</span><br><span class=\"line\">        )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* çš®åŒ…ç±»å‹ */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Type</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.typeType = type</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">show</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.typeType</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* çš®åŒ…é¢œè‰² */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Color</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">type</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.colorType = type</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">show</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.colorType</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* æŠ½è±¡å®ä¾‹åŒ– */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> redColor = <span class=\"keyword\">new</span> Color(<span class=\"string\">&#x27;çº¢è‰²&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> walletType = <span class=\"keyword\">new</span> Type(<span class=\"string\">&#x27;é’±åŒ…&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> briefcaseType = <span class=\"keyword\">new</span> Type(<span class=\"string\">&#x27;å…¬æ–‡åŒ…&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> bagA = <span class=\"keyword\">new</span> Bag(walletType, redColor)</span><br><span class=\"line\">bagA.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šçº¢è‰²é’±åŒ…</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> bagB = <span class=\"keyword\">new</span> Bag(briefcaseType, redColor)</span><br><span class=\"line\">bagB.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºï¼šçº¢è‰²å…¬æ–‡åŒ…</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"å››ã€è¡Œä¸ºå‹æ¨¡å¼\"><a href=\"#å››ã€è¡Œä¸ºå‹æ¨¡å¼\" class=\"headerlink\" title=\"å››ã€è¡Œä¸ºå‹æ¨¡å¼\"></a><strong>å››ã€è¡Œä¸ºå‹æ¨¡å¼</strong></h1><p>æš‚æ—¶æä¸æ‡‚ï¼Œåç»­ç†è§£</p>\n<h1 id=\"äº”ã€å…¶ä»–æ¨¡å¼\"><a href=\"#äº”ã€å…¶ä»–æ¨¡å¼\" class=\"headerlink\" title=\"äº”ã€å…¶ä»–æ¨¡å¼\"></a><strong>äº”ã€å…¶ä»–æ¨¡å¼</strong></h1><h2 id=\"MVCã€MVPã€MVVM\"><a href=\"#MVCã€MVPã€MVVM\" class=\"headerlink\" title=\"MVCã€MVPã€MVVM\"></a>MVCã€MVPã€MVVM</h2><blockquote>\n<p>åœ¨ä¸‹æ–‡ä¸­ï¼Œå¦‚æœæŸäº›å†…å®¹å’Œä½ çœ‹çš„æŸæœ¬ä¹¦æˆ–è€…æŸä¸ªå¸–å­ä¸Šçš„ä¸ä¸€æ ·ï¼Œä¸è¦æƒŠæ…Œï¼Œå¤šçœ‹å‡ æœ¬ä¹¦ï¼Œå¤šæ‰“å¼€å‡ ä¸ªå¸–å­ï¼Œä½ ä¼šå‘ç°æ¯ä¸ªéƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ¨¡å¼å…·ä½“æ˜¯å¦‚ä½•è¡¨ç°å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ï¼Œäº†è§£è¿™ä¸‰ä¸ªæ¨¡å¼ä¸»è¦çš„ç›®çš„å’Œæ€æƒ³æ˜¯ä»€ä¹ˆï¼š</p>\n</blockquote>\n<ul>\n<li><code>MVC</code> æ¨¡å¼ï¼š ä»å¤§é”…çƒ©æ—¶ä»£è¿›åŒ–ï¼Œå¼•å…¥äº†åˆ†å±‚çš„æ¦‚å¿µï¼Œä½†æ˜¯å±‚ä¸å±‚ä¹‹é—´è€¦åˆæ˜æ˜¾ï¼Œç»´æŠ¤èµ·æ¥ä¸å®¹æ˜“ï¼›</li>\n<li><code>MVP</code> æ¨¡å¼ï¼š åœ¨ MVC åŸºç¡€ä¸Šè¿›ä¸€æ­¥è§£è€¦ï¼Œè§†å›¾å±‚å’Œæ¨¡å‹å±‚å®Œå…¨éš”ç¦»ï¼Œäº¤äº’åªèƒ½é€šè¿‡ç®¡ç†å±‚æ¥è¿›è¡Œï¼Œé—®é¢˜æ˜¯æ›´æ–°è§†å›¾éœ€è¦ç®¡ç†å±‚æ‰‹åŠ¨æ¥è¿›è¡Œï¼›</li>\n<li><code>MVVM</code> æ¨¡å¼ï¼š å¼•å…¥åŒå‘ç»‘å®šæœºåˆ¶ï¼Œå¸®åŠ©å®ç°ä¸€äº›æ›´æ–°è§†å›¾å±‚å’Œæ¨¡å‹å±‚çš„å·¥ä½œï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œç›¸æ¯”äºä¹‹å‰çš„æ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨æ›´å°‘çš„ä»£ç é‡å®Œæˆæ›´å¤æ‚çš„äº¤äº’ï¼› MVCã€MVPã€MVVM æ¨¡å¼æ˜¯æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„æ¦‚å¿µï¼Œå…¶ä¸­ MVVM æ˜¯æœ€å¸¸ç”¨åˆ°çš„ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¾€å¾€æ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§æ¨¡å¼çš„å®šä¹‰æ¥è®¾è®¡çš„ç³»ç»Ÿï¼Œå¼€å‘ä¸­ä¹Ÿä¸ä¸€å®šè¦çº ç»“è‡ªå·±ç”¨çš„åˆ°åº•æ˜¯å“ªä¸ªæ¨¡å¼ï¼Œåˆé€‚çš„æ‰æ˜¯æœ€å¥½çš„ã€‚</li>\n</ul>\n<h3 id=\"1-MVC-ï¼ˆModel-View-Controllerï¼‰\"><a href=\"#1-MVC-ï¼ˆModel-View-Controllerï¼‰\" class=\"headerlink\" title=\"1. MVC ï¼ˆModel View Controllerï¼‰\"></a><strong>1. MVC ï¼ˆModel View Controllerï¼‰</strong></h3><blockquote>\n<p><code>MVC</code> æ¨¡å¼å°†ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ¨¡å‹ï¼ˆ<code>Model</code>ï¼‰ã€è§†å›¾ï¼ˆ<code>View</code>ï¼‰ã€æ§åˆ¶å™¨ï¼ˆ<code>Controller</code>ï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Model</code> æ¨¡å‹å±‚ï¼š ä¸šåŠ¡æ•°æ®çš„å¤„ç†å’Œå­˜å‚¨ï¼Œæ•°æ®æ›´æ–°åæ›´æ–°ï¼›</li>\n<li><code>View</code> è§†å›¾å±‚ï¼š äººæœºäº¤äº’æ¥å£ï¼Œä¸€èˆ¬ä¸ºå±•ç¤ºç»™ç”¨æˆ·çš„ç•Œé¢ï¼›</li>\n<li><code>Controller</code> æ§åˆ¶å™¨å±‚ ï¼š è´Ÿè´£è¿æ¥ <code>Model</code> å±‚å’Œ <code>View</code> å±‚ï¼Œæ¥å—å¹¶å¤„ç† <code>View</code> å±‚è§¦å‘çš„äº‹ä»¶ï¼Œå¹¶åœ¨ <code>Model</code> å±‚çš„æ•°æ®çŠ¶æ€å˜åŠ¨æ—¶æ›´æ–° <code>View</code> å±‚ï¼›</li>\n<li><code>MVC</code> æ¨¡å¼çš„ç›®çš„æ˜¯é€šè¿‡å¼•å…¥ <code>Controller</code> å±‚æ¥å°† <code>Model</code> å±‚å’Œ <code>View</code> å±‚åˆ†ç¦»ï¼Œåˆ†å±‚çš„å¼•å…¥æ˜¯åŸæ¥å¤§é”…çƒ©æ–¹å¼çš„æ”¹è¿›ï¼Œä½¿å¾—ç³»ç»Ÿåœ¨å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ä¸Šæœ‰äº†è¿›æ­¥ã€‚</li>\n<li><code>MVC</code> æ¨¡å¼æå‡ºå·²ç»æœ‰å››åä½™å¹´ï¼Œ<code>MVC</code> æ¨¡å¼åœ¨å„ä¸ªä¹¦ã€å„ä¸ªæ•™ç¨‹ã€<code>WIKI</code> çš„è§£é‡Šæœ‰å„ç§ç‰ˆæœ¬ï¼Œç”šè‡³ <code>MVC</code> æ¨¡å¼åœ¨ä¸åŒç³»ç»Ÿä¸­çš„å…·ä½“è¡¨ç°ä¹Ÿä¸åŒï¼Œè¿™é‡Œåªä»‹ç»å…¸å‹ <code>MVC</code> æ¨¡å¼çš„æ€è·¯ã€‚</li>\n</ul>\n<blockquote>\n<p>å…¸å‹æ€è·¯æ˜¯ <code>View</code> å±‚é€šè¿‡äº‹ä»¶é€šçŸ¥åˆ° <code>Controller</code> å±‚ï¼Œ<code>Controller</code> å±‚ç»è¿‡å¯¹äº‹ä»¶çš„å¤„ç†å®Œæˆç›¸å…³ä¸šåŠ¡é€»è¾‘ï¼Œè¦æ±‚ <code>Model</code> å±‚æ”¹å˜æ•°æ®çŠ¶æ€ï¼Œ<code>Model</code> å±‚å†å°†æ–°æ•°æ®æ›´æ–°åˆ° <code>View</code>å±‚ã€‚</p>\n</blockquote>\n<p>åœ¨å®é™…æ“ä½œæ—¶ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥å¯¹ <code>View</code> å±‚çš„ <code>UI</code> è¿›è¡Œæ“ä½œï¼Œä»¥é€šè¿‡äº‹ä»¶é€šçŸ¥ <code>Controller</code> å±‚ï¼Œç»è¿‡å¤„ç†åä¿®æ”¹ <code>Model</code> å±‚çš„æ•°æ®ï¼Œ<code>Model</code> å±‚ä½¿ç”¨æœ€æ–°æ•°æ®æ›´æ–° <code>View</code>ã€‚</p>\n<p>ç”¨æˆ·ä¹Ÿå¯ä»¥ç›´æ¥è§¦å‘ <code>Controller</code> å»æ›´æ–° <code>Model</code> å±‚çŠ¶æ€ï¼Œå†æ›´æ–° View å±‚</p>\n<p>æŸäº›åœºæ™¯ä¸‹ï¼Œ<code>View</code> å±‚ç›´æ¥é‡‡ç”¨è§‚å¯Ÿè€…/å‘å¸ƒè®¢é˜…æ¨¡å¼ç›‘å¬ <code>Model</code> å±‚çš„å˜åŒ–ï¼Œè¿™æ · <code>View</code>å±‚å’Œ <code>Model</code> å±‚ç›¸äº’æŒæœ‰ã€ç›¸äº’æ“ä½œï¼Œå¯¼è‡´ç´§å¯†è€¦åˆï¼Œåœ¨å¯ç»´æŠ¤æ€§ä¸Šæœ‰å¾…æå‡ã€‚ç”±æ­¤ï¼Œ<code>MVP</code> æ¨¡å¼åº”è¿è€Œç”Ÿ ã€‚</p>\n<h3 id=\"2-MVP-ï¼ˆModel-View-Presenterï¼‰\"><a href=\"#2-MVP-ï¼ˆModel-View-Presenterï¼‰\" class=\"headerlink\" title=\"2. MVP ï¼ˆModel View Presenterï¼‰\"></a><strong>2. MVP ï¼ˆModel View Presenterï¼‰</strong></h3><blockquote>\n<p><code>MVP</code> æ¨¡å¼å°†ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ¨¡å‹ï¼ˆ<code>Model</code>ï¼‰ã€è§†å›¾ï¼ˆ<code>View</code>ï¼‰ã€ç®¡ç†å±‚ï¼ˆ<code>Presenter</code>ï¼‰ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Model</code> æ¨¡å‹å±‚ï¼š åªè´Ÿè´£å­˜å‚¨æ•°æ®ï¼Œä¸ <code>View</code> å‘ˆç°æ— å…³ï¼Œä¹Ÿä¸ <code>UI</code> å¤„ç†é€»è¾‘æ— å…³ï¼Œå‘ç”Ÿæ›´æ–°ä¹Ÿä¸ç”¨ä¸»åŠ¨é€šçŸ¥ <code>View</code>ï¼›</li>\n<li><code>View</code> è§†å›¾å±‚ï¼š äººæœºäº¤äº’æ¥å£ï¼Œä¸€èˆ¬ä¸ºå±•ç¤ºç»™ç”¨æˆ·çš„ç•Œé¢ï¼›</li>\n<li><code>Presenter</code> ç®¡ç†å±‚ ï¼š è´Ÿè´£è¿æ¥ <code>Model</code> å±‚å’Œ <code>View</code> å±‚ï¼Œå¤„ç† <code>View</code> å±‚çš„äº‹ä»¶ï¼Œè´Ÿè´£è·å–æ•°æ®å¹¶å°†è·å–çš„æ•°æ®ç»è¿‡å¤„ç†åæ›´æ–° <code>View</code>ï¼›</li>\n<li><code>MVC</code> æ¨¡å¼çš„ <code>View</code> å±‚å’Œ <code>Model</code> å±‚å­˜åœ¨è€¦åˆï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>MVP</code> æ¨¡å¼å°† <code>View</code> å±‚å’Œ <code>Model</code> å±‚è§£è€¦ï¼Œä¹‹é—´çš„äº¤äº’åªèƒ½é€šè¿‡ <code>Presenter</code> å±‚ï¼Œå®é™…ä¸Šï¼Œ<code>MVP</code> æ¨¡å¼çš„ç›®çš„å°±æ˜¯å°† <code>View</code> å±‚å’Œ Model å±‚å®Œå…¨è§£è€¦ï¼Œä½¿å¾—å¯¹ <code>View</code> å±‚çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ° <code>Model</code> å±‚ï¼Œè€Œå¯¹ <code>Model</code> å±‚çš„æ•°æ®æ”¹åŠ¨ä¹Ÿä¸ä¼šå½±å“åˆ°<code>View</code> å±‚ã€‚</li>\n</ul>\n<blockquote>\n<p>å…¸å‹æµç¨‹æ˜¯ <code>View</code> å±‚è§¦å‘çš„äº‹ä»¶ä¼ é€’åˆ° <code>Presenter</code> å±‚ä¸­å¤„ç†ï¼Œ<code>Presenter</code> å±‚å»æ“ä½œ <code>Model</code> å±‚ï¼Œå¹¶ä¸”å°†æ•°æ®è¿”å›ç»™ <code>View</code>å±‚ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>View</code> å±‚å’Œ <code>Model</code> å±‚æ²¡æœ‰ç›´æ¥è”ç³»ã€‚è€Œ <code>View</code> å±‚ä¸éƒ¨ç½²ä¸šåŠ¡é€»è¾‘ï¼Œé™¤äº†å±•ç¤ºæ•°æ®å’Œè§¦å‘äº‹ä»¶ä¹‹å¤–ï¼Œå…¶å®ƒæ—¶é—´éƒ½åœ¨ç­‰ç€ <code>Presenter</code> å±‚æ¥æ›´æ–°è‡ªå·±ï¼Œè¢«ç§°ä¸ºã€Œè¢«åŠ¨è§†å›¾ã€ã€‚</p>\n</blockquote>\n<p>åœ¨å®é™…æ“ä½œæ—¶ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥å¯¹ <code>View</code> å±‚çš„ <code>UI</code> è¿›è¡Œæ“ä½œï¼Œ<code>View</code> å±‚é€šçŸ¥ <code>Presenter</code> å±‚ï¼Œ<code>Presenter</code> å±‚æ“ä½œ <code>Model</code> å±‚çš„æ•°æ®ï¼Œ<code>Presenter</code> å±‚è·å–åˆ°æ•°æ®ä¹‹åæ›´æ–° <code>View</code>ã€‚</p>\n<ul>\n<li>ç”±äº <code>Presenter</code> å±‚è´Ÿè´£äº†æ•°æ®è·å–ã€æ•°æ®å¤„ç†ã€äº¤äº’é€»è¾‘ã€<code>UI</code> æ•ˆæœç­‰ç­‰åŠŸèƒ½ï¼Œæ‰€ä»¥ <code>Presenter</code> å±‚å°±å˜å¾—å¼ºå¤§èµ·æ¥ï¼Œç›¸åº”çš„ï¼Œ<code>Model</code> å±‚åªè´Ÿè´£æ•°æ®å­˜å‚¨ï¼Œè€Œ <code>View</code> å±‚åªè´Ÿè´£è§†å›¾ï¼Œ<code>Model</code> å’Œ <code>View</code> å±‚çš„è´£ä»»çº¯ç²¹è€Œå•ä¸€ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ·»åŠ æˆ–ä¿®æ”¹åŠŸèƒ½æ¨¡å—ï¼Œåªéœ€è¦ä¿®æ”¹ <code>Presenter</code> å±‚å°±å¤Ÿäº†ã€‚ç”±äº <code>Presenter</code> å±‚éœ€è¦è°ƒç”¨ <code>View</code> å±‚çš„æ–¹æ³•æ›´æ–°è§†å›¾ï¼Œ<code>Presenter</code> å±‚ç›´æ¥æŒæœ‰ <code>View</code> å±‚å¯¼è‡´äº† <code>Presenter</code> å¯¹ <code>View</code> çš„ä¾èµ–ã€‚</li>\n</ul>\n<blockquote>\n<p>æ­£å¦‚ä¸Šæ‰€è¯´ï¼Œæ›´æ–°è§†å›¾éœ€è¦ <code>Presenter</code> å±‚ç›´æ¥æŒæœ‰ <code>View</code> å±‚ï¼Œå¹¶é€šè¿‡è°ƒç”¨ <code>View</code> å±‚ä¸­çš„æ–¹æ³•æ¥å®ç°ï¼Œè¿˜æ˜¯éœ€è¦ä¸€ç³»åˆ—å¤æ‚æ“ä½œï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæœºåˆ¶è‡ªåŠ¨å»æ›´æ–°è§†å›¾è€Œä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨å»æ›´æ–°å‘¢ï¼Œæ‰€ä»¥ï¼Œ<code>MVVM</code> æ¨¡å¼åº”è¿è€Œç”Ÿã€‚</p>\n</blockquote>\n<h3 id=\"3-MVVM-ï¼ˆModel-View-ViewModelï¼‰\"><a href=\"#3-MVVM-ï¼ˆModel-View-ViewModelï¼‰\" class=\"headerlink\" title=\"3. MVVM ï¼ˆModel View ViewModelï¼‰\"></a><strong>3. MVVM ï¼ˆModel View ViewModelï¼‰</strong></h3><blockquote>\n<p><code>MVVM</code> æ¨¡å¼å°†ç¨‹åºåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šæ¨¡å‹ï¼ˆ<code>Model</code>ï¼‰ã€è§†å›¾ï¼ˆ<code>View</code>ï¼‰ã€è§†å›¾æ¨¡å‹ï¼ˆ<code>View-Model</code>ï¼‰ã€‚</p>\n</blockquote>\n<p>å’Œ <code>MVP</code> æ¨¡å¼ç±»ä¼¼ï¼Œ<code>Model</code> å±‚å’Œ <code>View</code> å±‚ä¹Ÿè¢«éš”ç¦»å¼€ï¼Œå½»åº•è§£è€¦ï¼Œ<code>ViewModel</code> å±‚ç›¸å½“äº <code>Presenter</code> å±‚ï¼Œè´Ÿè´£ç»‘å®š <code>Model</code> å±‚å’Œ <code>View</code> å±‚ï¼Œç›¸æ¯”äº <code>MVP</code> å¢åŠ äº†åŒå‘ç»‘å®šæœºåˆ¶ã€‚</p>\n<blockquote>\n<p><code>MVVM</code> æ¨¡å¼çš„ç‰¹å¾æ˜¯ <code>ViewModel</code> å±‚å’Œ <code>View</code> å±‚é‡‡ç”¨åŒå‘ç»‘å®šçš„å½¢å¼ï¼ˆBindingï¼‰ï¼Œ<code>View</code> å±‚çš„å˜åŠ¨ï¼Œå°†è‡ªåŠ¨åæ˜ åœ¨ <code>ViewModel</code> å±‚ï¼Œåä¹‹äº¦ç„¶ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½†æ˜¯åŒå‘ç»‘å®šç»™è°ƒè¯•å’Œé”™è¯¯å®šä½å¸¦æ¥å›°éš¾ï¼Œ<code>View</code> å±‚çš„å¼‚å¸¸å¯èƒ½æ˜¯ <code>View</code> çš„ä»£ç æœ‰é—®é¢˜ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ <code>Model</code> å±‚çš„é—®é¢˜ã€‚æ•°æ®ç»‘å®šä½¿å¾—ä¸€ä¸ªä½ç½®çš„ <code>Bug</code> è¢«ä¼ é€’åˆ°åˆ«çš„ä½ç½®ï¼Œè¦å®šä½åŸå§‹å‡ºé—®é¢˜çš„åœ°æ–¹å°±å˜å¾—ä¸é‚£ä¹ˆå®¹æ˜“äº†ã€‚</li>\n<li>å¯¹ç®€å•<code>UI</code> æ¥è¯´ï¼Œå®ç° <code>MVVM</code> æ¨¡å¼çš„å¼€é”€æ˜¯ä¸å¿…è¦çš„ï¼Œè€Œå¯¹äºå¤§å‹åº”ç”¨æ¥è¯´ï¼Œå¼•å…¥ MVVM æ¨¡å¼åˆ™ä¼šèŠ‚çº¦å¤§é‡æ‰‹åŠ¨æ›´æ–°è§†å›¾çš„å¤æ‚è¿‡ç¨‹ï¼Œæ˜¯å¦ä½¿ç”¨ï¼Œè¿˜æ˜¯çœ‹ä½¿ç”¨åœºæ™¯ã€‚</li>\n</ul>\n<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸º <code>MVVM</code> æ¨¡å¼è¦æ±‚ <code>Model</code> å±‚å’Œ <code>View</code> å±‚å®Œå…¨è§£è€¦ï¼Œä½†æ˜¯ç”±äº <code>Vue</code> è¿˜æä¾›äº† <code>ref</code> è¿™æ ·çš„ <code>API</code>ï¼Œä½¿å¾— <code>Model</code> ä¹Ÿå¯ä»¥ç›´æ¥æŒæœ‰ <code>View</code>ï¼š</p>\n<p>ä½†æ˜¯å¤§å¤šæ•°å¸–å­éƒ½è¯´ç›´æ¥ç§°å‘¼ <code>Vue</code> ä¸º <code>MVVM</code> æ¡†æ¶ï¼Œå¯è§è¿™äº›æ¨¡å¼çš„åˆ’åˆ†ä¹Ÿä¸æ˜¯é‚£ä¹ˆä¸¥æ ¼ã€‚</p>\n"},{"title":"cssé¢è¯•é¢˜","url":"/2021/03/06/css%E9%9D%A2%E8%AF%95%E9%A2%98/","content":"<p>CSSæ ·å¼åŸºæœ¬å¸ƒå±€ä¹Ÿæ˜¯å‰ç«¯çš„åŸºæœ¬åŠŸè¯¾ï¼Œç›¸æ¯”JSï¼Œè‡ªå·±è¿™æ–¹é¢å¹¶æ²¡æœ‰åšè¶³åŠŸè¯¾ï¼Œåªèƒ½æ ¹æ®å¸¸è§çš„é¢è¯•é¢˜åå‘é€¼è¿«è‡ªå·±å°½å¿«å¤ä¹ äº†ï¼Œå®ä¹ æ˜¥æ‹›å’Œç§‹æ‹›åŠ æ²¹å§</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-cssç›’æ¨¡å‹ç®€ä»‹\"><a href=\"#1-cssç›’æ¨¡å‹ç®€ä»‹\" class=\"headerlink\" title=\"1.cssç›’æ¨¡å‹ç®€ä»‹\"></a>1.<a href=\"https://www.cnblogs.com/112233-j/p/12600228.html\">cssç›’æ¨¡å‹ç®€ä»‹</a></h1><p>ç›’å­æ¨¡å‹ï¼Œè‹±æ–‡å³box modelã€‚æ— è®ºæ˜¯divã€spanã€è¿˜æ˜¯aéƒ½æ˜¯ç›’å­ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå›¾ç‰‡ã€è¡¨å•å…ƒç´ ä¸€å¾‹çœ‹ä½œæ˜¯æ–‡æœ¬ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ç›’å­ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæ¯”å¦‚è¯´ï¼Œä¸€å¼ å›¾ç‰‡é‡Œå¹¶ä¸èƒ½æ”¾ä¸œè¥¿ï¼Œå®ƒè‡ªå·±å°±æ˜¯è‡ªå·±çš„å†…å®¹ã€‚</p>\n<h3 id=\"ç›’å­ä¸­çš„åŒºåŸŸ\"><a href=\"#ç›’å­ä¸­çš„åŒºåŸŸ\" class=\"headerlink\" title=\"ç›’å­ä¸­çš„åŒºåŸŸ\"></a>ç›’å­ä¸­çš„åŒºåŸŸ</h3><p>ä¸€ä¸ªç›’å­ä¸­ä¸»è¦çš„å±æ€§å°±5ä¸ªï¼šwidthã€heightã€paddingã€borderã€marginã€‚å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>widthå’Œheightï¼š<strong>å†…å®¹</strong>çš„å®½åº¦ã€é«˜åº¦ï¼ˆä¸æ˜¯ç›’å­çš„å®½åº¦ã€é«˜åº¦ï¼‰ã€‚</li>\n<li>paddingï¼šå†…è¾¹è·ã€‚</li>\n<li>borderï¼šè¾¹æ¡†ã€‚</li>\n<li>marginï¼šå¤–è¾¹è·ã€‚</li>\n</ul>\n<p>ç›’å­æ¨¡å‹çš„ç¤ºæ„å›¾ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170727_2128.png\" alt=\"img\"></p>\n<p>ä»£ç æ¼”ç¤ºï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170727_2326.png\" alt=\"img\"></p>\n<p>ä¸Šé¢è¿™ä¸ªç›’å­ï¼Œwidth:200px; height:200px; ä½†æ˜¯çœŸå®å æœ‰çš„å®½é«˜æ˜¯302*302ã€‚ è¿™æ˜¯å› ä¸ºè¿˜è¦åŠ ä¸Špaddingã€borderã€‚</p>\n<p>æ³¨æ„ï¼š<strong>å®½åº¦å’ŒçœŸå®å æœ‰å®½åº¦ï¼Œä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼</strong>æ¥çœ‹ä¸‹é¢è¿™ä¾‹å­ã€‚</p>\n<h3 id=\"æ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹\"><a href=\"#æ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹\" class=\"headerlink\" title=\"æ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹\"></a>æ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹</h3><blockquote>\n<p>æˆ‘ä»¬ç›®å‰æ‰€å­¦ä¹ çš„çŸ¥è¯†ä¸­ï¼Œä»¥æ ‡å‡†ç›’å­æ¨¡å‹ä¸ºå‡†ã€‚</p>\n</blockquote>\n<p>æ ‡å‡†ç›’å­æ¨¡å‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/2015-10-03-css-27.jpg\" alt=\"img\"></p>\n<p>IEç›’å­æ¨¡å‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/2015-10-03-css-30.jpg\" alt=\"img\"></p>\n<p>ä¸Šå›¾æ˜¾ç¤ºï¼š</p>\n<p>åœ¨ CSS ç›’å­æ¨¡å‹ (Box Model) è§„å®šäº†å…ƒç´ å¤„ç†å…ƒç´ çš„å‡ ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>widthå’Œheightï¼š<strong>å†…å®¹</strong>çš„å®½åº¦ã€é«˜åº¦ï¼ˆä¸æ˜¯ç›’å­çš„å®½åº¦ã€é«˜åº¦ï¼‰ã€‚</li>\n<li>paddingï¼šå†…è¾¹è·ã€‚</li>\n<li>borderï¼šè¾¹æ¡†ã€‚</li>\n<li>marginï¼šå¤–è¾¹è·ã€‚</li>\n</ul>\n<p>CSSç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹çš„åŒºåˆ«ï¼š</p>\n<ul>\n<li>åœ¨ <strong>æ ‡å‡†ç›’å­æ¨¡å‹</strong>ä¸­ï¼Œ<strong>width å’Œ height æŒ‡çš„æ˜¯å†…å®¹åŒºåŸŸ</strong>çš„å®½åº¦å’Œé«˜åº¦ã€‚å¢åŠ å†…è¾¹è·ã€è¾¹æ¡†å’Œå¤–è¾¹è·ä¸ä¼šå½±å“å†…å®¹åŒºåŸŸçš„å°ºå¯¸ï¼Œä½†æ˜¯ä¼šå¢åŠ å…ƒç´ æ¡†çš„æ€»å°ºå¯¸ã€‚</li>\n<li><strong>IEç›’å­æ¨¡å‹</strong>ä¸­ï¼Œ<strong>width å’Œ height æŒ‡çš„æ˜¯å†…å®¹åŒºåŸŸ+border+padding</strong>çš„å®½åº¦å’Œé«˜åº¦ã€‚</li>\n</ul>\n<p>æ³¨ï¼šAndroidä¸­ä¹Ÿæœ‰marginå’Œpaddingçš„æ¦‚å¿µï¼Œæ„æ€æ˜¯å·®ä¸å¤šçš„ï¼Œå¦‚æœä½ ä¼šä¸€ç‚¹Androidï¼Œåº”è¯¥æ¯”è¾ƒå¥½ç†è§£å§ã€‚åŒºåˆ«åœ¨äºï¼ŒAndroidä¸­æ²¡æœ‰borderè¿™ä¸ªä¸œè¥¿ï¼Œè€Œä¸”åœ¨Androidä¸­ï¼Œmarginå¹¶ä¸æ˜¯æ§ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘è§‰å¾—è¿™æ ·åšæ›´åˆç†ä¸€äº›ï¼Œå‘µå‘µã€‚</p>\n<h3 id=\"lt-body-gt-æ ‡ç­¾ä¹Ÿæœ‰margin\"><a href=\"#lt-body-gt-æ ‡ç­¾ä¹Ÿæœ‰margin\" class=\"headerlink\" title=\"&lt;body&gt;æ ‡ç­¾ä¹Ÿæœ‰margin\"></a><code>&lt;body&gt;</code>æ ‡ç­¾ä¹Ÿæœ‰margin</h3><p><code>&lt;body&gt;</code>æ ‡ç­¾æœ‰å¿…è¦å¼ºè°ƒä¸€ä¸‹ã€‚å¾ˆå¤šäººä»¥ä¸º<code>&lt;body&gt;</code>æ ‡ç­¾å æ®çš„æ˜¯æ•´ä¸ªé¡µé¢çš„å…¨éƒ¨åŒºåŸŸï¼Œå…¶å®æ˜¯é”™è¯¯çš„ï¼Œæ­£ç¡®çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼šæ•´ä¸ªç½‘é¡µæœ€å¤§çš„ç›’å­æ˜¯<code>&lt;document&gt;</code>ï¼Œå³æµè§ˆå™¨ã€‚è€Œ<code>&lt;body&gt;</code>æ˜¯<code>&lt;document&gt;</code>çš„å„¿å­ã€‚æµè§ˆå™¨ç»™<code>&lt;body&gt;</code>é»˜è®¤çš„marginå¤§å°æ˜¯8ä¸ªåƒç´ ï¼Œæ­¤æ—¶<code>&lt;body&gt;</code>å æ®äº†æ•´ä¸ªé¡µé¢çš„ä¸€å¤§éƒ¨åˆ†åŒºåŸŸï¼Œè€Œä¸æ˜¯å…¨éƒ¨åŒºåŸŸã€‚æ¥çœ‹ä¸€æ®µä»£ç ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!doctype <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Generator&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;EditPlusÂ®&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Author&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Keywords&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\tdiv&#123;</span><br><span class=\"line\">\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\tborder: 1px solid red;</span><br><span class=\"line\">\t\t\tpadding: 20px;</span><br><span class=\"line\">\t\t\tmargin: 30px;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>æœ‰ç”Ÿä¹‹å¹´<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>ç‹­è·¯ç›¸é€¢<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹divæ ‡ç­¾è®¾ç½®äº†è¾¹è·ç­‰ä¿¡æ¯ã€‚æ‰“å¼€googleæµè§ˆå™¨ï¼ŒæŒ‰ä½F12ï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20151003_27.png\" alt=\"img\"></p>\n<h3 id=\"è®¤è¯†widthã€height\"><a href=\"#è®¤è¯†widthã€height\" class=\"headerlink\" title=\"è®¤è¯†widthã€height\"></a>è®¤è¯†widthã€height</h3><p>ä¸€å®šè¦çŸ¥é“ï¼Œåœ¨å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆçœ¼ä¸­ï¼Œä¸–ç•Œä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ä¸åŒçš„ã€‚</p>\n<p>æ¯”å¦‚è¯´ï¼Œä¸ˆé‡ç¨¿çº¸ï¼Œå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆåªä¼šä¸ˆé‡å†…å®¹å®½åº¦ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170727_2329.png\" alt=\"img\"></p>\n<p>ä¸‹é¢è¿™ä¸¤ä¸ªç›’å­ï¼ŒçœŸå®å æœ‰å®½é«˜ï¼Œéƒ½æ˜¯302*302ï¼š</p>\n<p>ç›’å­1ï¼š</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box1</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç›’å­2ï¼š</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box2</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">250px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>çœŸå®å æœ‰å®½åº¦ = å·¦border + å·¦padding + width + å³padding + å³border</p>\n<p>ä¸Šé¢è¿™ä¸¤ä¸ªç›’å­çš„ç›’æ¨¡å‹å›¾å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_0925.png\" alt=\"img\"></p>\n<p><strong>å¦‚æœæƒ³ä¿æŒä¸€ä¸ªç›’å­çš„çœŸå®å æœ‰å®½åº¦ä¸å˜ï¼Œé‚£ä¹ˆåŠ widthçš„æ—¶å€™å°±è¦å‡paddingã€‚åŠ paddingçš„æ—¶å€™å°±è¦å‡width</strong>ã€‚å› ä¸ºç›’å­å˜èƒ–äº†æ˜¯ç¾éš¾æ€§çš„ï¼Œè¿™ä¼šæŠŠåˆ«çš„ç›’å­æŒ¤ä¸‹å»ã€‚</p>\n<h3 id=\"è®¤è¯†padding\"><a href=\"#è®¤è¯†padding\" class=\"headerlink\" title=\"è®¤è¯†padding\"></a>è®¤è¯†padding</h3><h4 id=\"paddingåŒºåŸŸä¹Ÿæœ‰é¢œè‰²\"><a href=\"#paddingåŒºåŸŸä¹Ÿæœ‰é¢œè‰²\" class=\"headerlink\" title=\"paddingåŒºåŸŸä¹Ÿæœ‰é¢œè‰²\"></a>paddingåŒºåŸŸä¹Ÿæœ‰é¢œè‰²</h4><p>paddingå°±æ˜¯å†…è¾¹è·ã€‚paddingçš„åŒºåŸŸæœ‰èƒŒæ™¯é¢œè‰²ï¼Œcss2.1å‰æä¸‹ï¼Œå¹¶ä¸”èƒŒæ™¯é¢œè‰²ä¸€å®šå’Œå†…å®¹åŒºåŸŸçš„ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œbackground-colorå°†å¡«å……<strong>æ‰€æœ‰borderä»¥å†…çš„åŒºåŸŸã€‚</strong></p>\n<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1005.png\" alt=\"img\"></p>\n<h4 id=\"paddingæœ‰å››ä¸ªæ–¹å‘\"><a href=\"#paddingæœ‰å››ä¸ªæ–¹å‘\" class=\"headerlink\" title=\"paddingæœ‰å››ä¸ªæ–¹å‘\"></a>paddingæœ‰å››ä¸ªæ–¹å‘</h4><p>paddingæ˜¯4ä¸ªæ–¹å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåˆ†åˆ«æè¿°4ä¸ªæ–¹å‘çš„paddingã€‚</p>\n<p>æ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§å†™å°å±æ€§ï¼›ç¬¬äºŒç§å†™ç»¼åˆå±æ€§ï¼Œç”¨ç©ºæ ¼éš”å¼€ã€‚</p>\n<p>å°å±æ€§çš„å†™æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">padding-top: 30px;</span><br><span class=\"line\">padding-right: 20px;</span><br><span class=\"line\">padding-bottom: 40px;</span><br><span class=\"line\">padding-left: 100px;</span><br></pre></td></tr></table></figure>\n\n<p>ç»¼åˆå±æ€§çš„å†™æ³•ï¼š(ä¸Šã€å³ã€ä¸‹ã€å·¦)ï¼ˆé¡ºæ—¶é’ˆæ–¹å‘ï¼Œç”¨ç©ºæ ¼éš”å¼€ã€‚marginçš„é“ç†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">padding:30px 20px 40px 100px;</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœå†™äº†å››ä¸ªå€¼ï¼Œåˆ™é¡ºåºä¸ºï¼šä¸Šã€å³ã€ä¸‹ã€å·¦ã€‚</p>\n<p>å¦‚æœåªå†™äº†ä¸‰ä¸ªå€¼ï¼Œåˆ™é¡ºåºä¸ºï¼šä¸Šã€å³ã€ä¸‹ã€‚??å’Œå³ä¸€æ ·ã€‚</p>\n<p>å¦‚æœåªå†™äº†ä¸¤ä¸ªå€¼ï¼Œæ¯”å¦‚è¯´ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">padding: 30px 40px;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ™é¡ºåºç­‰ä»·äºï¼š30px 40px 30px 40px;</p>\n<p>è¦æ‡‚å¾—ï¼Œ<strong>ç”¨å°å±æ€§å±‚å å¤§å±æ€§</strong>ã€‚æ¯”å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">padding: 20px;</span><br><span class=\"line\">padding-left: 30px;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„paddingå¯¹åº”ç›’å­æ¨¡å‹ä¸ºï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1039.png\" alt=\"img\"></p>\n<p>ä¸‹é¢çš„å†™æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">padding-left: 30px;</span><br><span class=\"line\">padding: 20px;</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬ä¸€è¡Œçš„å°å±æ€§æ— æ•ˆï¼Œå› ä¸ºè¢«ç¬¬äºŒè¡Œçš„å¤§å±æ€§å±‚å æ‰äº†ã€‚</p>\n<p>ä¸‹é¢çš„é¢˜ï¼Œä¼šåšäº†ï¼Œè¯´æ˜ä½ æ˜ç™½äº†ã€‚</p>\n<h4 id=\"ä¸€äº›é¢˜ç›®\"><a href=\"#ä¸€äº›é¢˜ç›®\" class=\"headerlink\" title=\"ä¸€äº›é¢˜ç›®\"></a>ä¸€äº›é¢˜ç›®</h4><p><strong>é¢˜ç›®1</strong>ï¼šè¯´å‡ºä¸‹é¢ç›’å­çœŸå®å æœ‰å®½é«˜ï¼Œå¹¶ç”»å‡ºç›’æ¨¡å‹å›¾ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">10px</span> <span class=\"number\">20px</span> <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­”æ¡ˆï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1048.png\" alt=\"img\"></p>\n<p><strong>é¢˜ç›®2</strong>ï¼šè¯´å‡ºä¸‹é¢ç›’å­çœŸå®å æœ‰å®½é«˜ï¼Œå¹¶ç”»å‡ºç›’æ¨¡å‹å›¾ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-right</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding</span>:<span class=\"number\">40px</span> <span class=\"number\">50px</span> <span class=\"number\">60px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">padding-bottom</span>: <span class=\"number\">30px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­”æ¡ˆï¼š</p>\n<p><code>padding-left:10pxï¼›</code> å’Œ<code>padding-right:20px;</code> æ²¡ç”¨ï¼Œå› ä¸ºåé¢çš„paddingå¤§å±æ€§ï¼Œå±‚å æ‰äº†ä»–ä»¬ã€‚</p>\n<p>ç›’å­æ¨¡å‹å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1100.png\" alt=\"img\"></p>\n<p><strong>é¢˜ç›®3</strong>ï¼šç°åœ¨ç»™ä½ ä¸€ä¸ªç›’å­æ¨¡å‹å›¾ï¼Œè¯·å†™å‡ºä»£ç ï¼Œè¯•ç€ç”¨æœ€æœ€ç®€å•çš„æ–¹æ³•å†™ã€‚</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1401.png\" alt=\"img\"></p>\n<p>ç­”æ¡ˆï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">width:123px;</span><br><span class=\"line\">height:123px;</span><br><span class=\"line\">padding:20px 40px;</span><br><span class=\"line\">border:1px solid red;</span><br></pre></td></tr></table></figure>\n\n<p><strong>é¢˜ç›®4</strong>ï¼šç°åœ¨ç»™ä½ ä¸€ä¸ªç›’å­æ¨¡å‹å›¾ï¼Œè¯·å†™å‡ºä»£ç ï¼Œè¯•ç€ç”¨æœ€æœ€ç®€å•çš„æ–¹æ³•å†™ã€‚</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1402.png\" alt=\"img\"></p>\n<p>ç­”æ¡ˆï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">width:123px;</span><br><span class=\"line\">height:123px;</span><br><span class=\"line\">padding:20px;</span><br><span class=\"line\">padding-right:40px;</span><br><span class=\"line\">border:1px solid red;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸€äº›å…ƒç´ ï¼Œé»˜è®¤å¸¦æœ‰padding\"><a href=\"#ä¸€äº›å…ƒç´ ï¼Œé»˜è®¤å¸¦æœ‰padding\" class=\"headerlink\" title=\"ä¸€äº›å…ƒç´ ï¼Œé»˜è®¤å¸¦æœ‰padding\"></a>ä¸€äº›å…ƒç´ ï¼Œé»˜è®¤å¸¦æœ‰padding</h4><p>ä¸€äº›å…ƒç´ ï¼Œé»˜è®¤å¸¦æœ‰<code>padding</code>ï¼Œæ¯”å¦‚ulæ ‡ç­¾ã€‚å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1413.png\" alt=\"img\"></p>\n<p>ä¸Šå›¾æ˜¾ç¤ºï¼Œä¸åŠ ä»»ä½•æ ·å¼çš„ulï¼Œä¹Ÿæ˜¯æœ‰40pxçš„padding-leftã€‚</p>\n<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åšç«™çš„æ—¶å€™ï¼Œä¸ºäº†ä¾¿äºæ§åˆ¶ï¼Œæ€»æ˜¯å–œæ¬¢æ¸…é™¤è¿™ä¸ªé»˜è®¤çš„paddingã€‚</p>\n<p>å¯ä»¥ä½¿ç”¨<code>*</code>è¿›è¡Œæ¸…é™¤ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">*&#123;</span><br><span class=\"line\">\tmargin: 0;</span><br><span class=\"line\">\tpadding: 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½†æ˜¯ï¼Œ<code>*</code>çš„æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å¹¶é›†é€‰æ‹©å™¨ï¼Œç½—åˆ—æ‰€æœ‰çš„æ ‡ç­¾ï¼ˆä¸ç”¨èƒŒï¼Œæœ‰ä¸“ä¸šçš„æ¸…é™¤é»˜è®¤æ ·å¼çš„æ ·å¼è¡¨ï¼Œä»Šåå­¦ä¹ ï¼‰ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td&#123;</span><br><span class=\"line\">    margin:0;</span><br><span class=\"line\">    padding:0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è®¤è¯†border\"><a href=\"#è®¤è¯†border\" class=\"headerlink\" title=\"è®¤è¯†border\"></a>è®¤è¯†border</h3><p>borderå°±æ˜¯è¾¹æ¡†ã€‚è¾¹æ¡†æœ‰ä¸‰ä¸ªè¦ç´ ï¼šåƒç´ ï¼ˆç²—ç»†ï¼‰ã€çº¿å‹ã€é¢œè‰²ã€‚</p>\n<p>é¢œè‰²å¦‚æœä¸å†™ï¼Œé»˜è®¤æ˜¯é»‘è‰²ã€‚å¦å¤–ä¸¤ä¸ªå±æ€§ä¸å†™ï¼Œè¦å‘½äº†ï¼Œæ˜¾ç¤ºä¸å‡ºæ¥è¾¹æ¡†ã€‚</p>\n<h4 id=\"border-style\"><a href=\"#border-style\" class=\"headerlink\" title=\"border-style\"></a>border-style</h4><p>borderçš„æ‰€æœ‰çš„çº¿å‹å¦‚ä¸‹ï¼šï¼ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹<code>CSSå‚è€ƒæ‰‹å†Œ</code>å¾—åˆ°ï¼‰</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1435.png\" alt=\"img\"></p>\n<p>æ¯”å¦‚<code>border:10px ridge red;</code>è¿™ä¸ªå±æ€§ï¼Œåœ¨chromeå’Œfirefoxã€IEä¸­æœ‰ç»†å¾®å·®åˆ«ï¼šï¼ˆå› ä¸ºå¯ä»¥æ˜¾ç¤ºå‡ºæ•ˆæœï¼Œå› æ­¤å¹¶ä¸æ˜¯å…¼å®¹æ€§é—®é¢˜ï¼Œåªæ˜¯æœ‰ç»†å¾®å·®åˆ«è€Œå·²ï¼‰</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1619.png\" alt=\"img\"></p>\n<p>å¦‚æœå…¬å¸é‡Œé¢çš„è®¾è®¡å¸ˆæ˜¯å¤„å¥³åº§çš„ï¼Œè¿½æ±‚æé«˜çš„<strong>é¡µé¢è¿˜åŸåº¦</strong>ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨cssæ¥åˆ¶ä½œè¾¹æ¡†ã€‚å°±è¦ç”¨åˆ°å›¾ç‰‡ï¼Œå°±è¦åˆ‡å›¾äº†ã€‚</p>\n<p>æ‰€ä»¥ï¼Œæ¯”è¾ƒç¨³å®šçš„border-styleå°±å‡ ä¸ªï¼šsolidã€dashedã€dottedã€‚</p>\n<h4 id=\"borderæ‹†åˆ†\"><a href=\"#borderæ‹†åˆ†\" class=\"headerlink\" title=\"borderæ‹†åˆ†\"></a>borderæ‹†åˆ†</h4><p>borderæ˜¯ä¸€ä¸ªå¤§ç»¼åˆå±æ€§ã€‚æ¯”å¦‚è¯´ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:1px solid red;</span><br></pre></td></tr></table></figure>\n\n<p>å°±æ˜¯æŠŠ4ä¸ªè¾¹æ¡†ï¼Œéƒ½è®¾ç½®ä¸º1pxå®½åº¦ã€çº¿å‹å®çº¿ã€redé¢œè‰²ã€‚</p>\n<p>PSï¼šå°æŠ€å·§ï¼šåœ¨sublime textä¸­ï¼Œä¸ºäº†å¿«é€Ÿè¾“å…¥<code>border:1px solid red;</code>è¿™ä¸ªå±æ€§ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥<code>bd</code>ï¼Œç„¶åé€‰ç¬¬äºŒä¸ªåå›è½¦ã€‚</p>\n<p>borderå±æ€§æ˜¯èƒ½å¤Ÿè¢«æ‹†å¼€çš„ï¼Œæœ‰ä¸¤å¤§ç§æ‹†å¼€çš„æ–¹å¼ï¼š</p>\n<ul>\n<li>ï¼ˆ1ï¼‰æŒ‰ä¸‰è¦ç´ æ‹†å¼€ï¼šborder-widthã€border-styleã€border-colorã€‚ï¼ˆä¸€ä¸ªborderå±æ€§æ˜¯ç”±ä¸‰ä¸ªå°å±æ€§ç»¼åˆè€Œæˆçš„ï¼‰</li>\n<li>ï¼ˆ2ï¼‰æŒ‰æ–¹å‘æ‹†å¼€ï¼šborder-topã€border-rightã€border-bottomã€border-leftã€‚</li>\n</ul>\n<p>ç°åœ¨æˆ‘ä»¬æ˜ç™½äº†ï¼š<strong>ä¸€ä¸ªborderå±æ€§ï¼Œæ˜¯ç”±ä¸‰ä¸ªå°å±æ€§ç»¼åˆè€Œæˆçš„</strong>ã€‚å¦‚æœæŸä¸€ä¸ªå°å±æ€§åé¢æ˜¯ç©ºæ ¼éš”å¼€çš„å¤šä¸ªå€¼ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸Šå³ä¸‹å·¦çš„é¡ºåºã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-width:10px 20px;</span><br><span class=\"line\">border-style:solid dashed dotted;</span><br><span class=\"line\">border-color:red green blue yellow;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1516.png\" alt=\"img\"></p>\n<p>ï¼ˆ1ï¼‰æŒ‰ä¸‰è¦ç´ æ‹†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-width:10px;    &#x2F;&#x2F;è¾¹æ¡†å®½åº¦</span><br><span class=\"line\">border-style:solid;   &#x2F;&#x2F;çº¿å‹</span><br><span class=\"line\">border-color:red;     &#x2F;&#x2F;é¢œè‰²ã€‚</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰ä»·äºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:10px solid red;</span><br></pre></td></tr></table></figure>\n\n<p>(2)æŒ‰æ–¹å‘æ¥æ‹†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-top:10px solid red;</span><br><span class=\"line\">border-right:10px solid red;</span><br><span class=\"line\">border-bottom:10px solid red;</span><br><span class=\"line\">border-left:10px solid red;</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰ä»·äºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:10px solid red;</span><br></pre></td></tr></table></figure>\n\n<p>ï¼ˆ3ï¼‰æŒ‰ä¸‰è¦ç´ å’Œæ–¹å‘æ¥æ‹†ï¼š(å°±æ˜¯æŠŠæ¯ä¸ªæ–¹å‘çš„ï¼Œæ¯ä¸ªè¦ç´ æ‹†å¼€ã€‚3*4 = 12)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-top-width:10px;</span><br><span class=\"line\">border-top-style:solid;</span><br><span class=\"line\">border-top-color:red;</span><br><span class=\"line\">border-right-width:10px;</span><br><span class=\"line\">border-right-style:solid;</span><br><span class=\"line\">border-right-color:red;</span><br><span class=\"line\">border-bottom-width:10px;</span><br><span class=\"line\">border-bottom-style:solid;</span><br><span class=\"line\">border-bottom-color:red;</span><br><span class=\"line\">border-left-width:10px;</span><br><span class=\"line\">border-left-style:solid;</span><br><span class=\"line\">border-left-color:red;</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰ä»·äºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:10px solid red;</span><br></pre></td></tr></table></figure>\n\n<p>å·¥ä½œä¸­åˆ°åº•ç”¨ä»€ä¹ˆï¼Ÿå¾ˆç®€ç­”ï¼šä»€ä¹ˆç®€å•ç”¨ä»€ä¹ˆã€‚ä½†è¦æ‡‚å¾—ï¼Œç”¨å°å±æ€§å±‚å å¤§å±æ€§ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1606.png\" alt=\"img\"></p>\n<p>ä¸ºäº†å®ç°ä¸Šæ–¹æ•ˆæœï¼Œå†™æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:10px solid red;</span><br><span class=\"line\">border-right-color:blue;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"http://img.smyhvae.com/20170728_1608.png\" alt=\"img\"></p>\n<p>ä¸ºäº†å®ç°ä¸Šæ–¹æ•ˆæœï¼Œå†™æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:10px solid red;</span><br><span class=\"line\">border-style:solid dashed;</span><br></pre></td></tr></table></figure>\n\n<p>borderå¯ä»¥æ²¡æœ‰ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border:none;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥æŸä¸€æ¡è¾¹æ²¡æœ‰ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-left: none;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥è°ƒæ•´å·¦è¾¹è¾¹æ¡†çš„å®½åº¦ä¸º0ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-left-width: 0;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸¾ä¾‹ï¼šåˆ©ç”¨borderå±æ€§ç”»ä¸€ä¸ªä¸‰è§’å½¢ï¼ˆå°æŠ€å·§ï¼‰\"><a href=\"#ä¸¾ä¾‹ï¼šåˆ©ç”¨borderå±æ€§ç”»ä¸€ä¸ªä¸‰è§’å½¢ï¼ˆå°æŠ€å·§ï¼‰\" class=\"headerlink\" title=\"ä¸¾ä¾‹ï¼šåˆ©ç”¨borderå±æ€§ç”»ä¸€ä¸ªä¸‰è§’å½¢ï¼ˆå°æŠ€å·§ï¼‰\"></a>ä¸¾ä¾‹ï¼šåˆ©ç”¨borderå±æ€§ç”»ä¸€ä¸ªä¸‰è§’å½¢ï¼ˆå°æŠ€å·§ï¼‰</h4><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<p>ï¼ˆ1ï¼‰å½“æˆ‘ä»¬è®¾ç½®ç›’å­çš„widthå’Œheightä¸º0æ—¶ï¼Œæ­¤æ—¶æ•ˆæœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1640.png\" alt=\"img\"></p>\n<p>ï¼ˆ2ï¼‰ç„¶åå°†borderçš„åº•éƒ¨å–æ¶ˆï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1645.png\" alt=\"img\"></p>\n<p>ï¼ˆ3ï¼‰æœ€åè®¾ç½®borderçš„å·¦è¾¹å’Œå³è¾¹ä¸ºç™½è‰²ï¼š</p>\n<p><img data-src=\"http://img.smyhvae.com/20170728_1649.png\" alt=\"img\"></p>\n<p>è¿™æ ·ï¼Œä¸€ä¸ªä¸‰è§’å½¢å°±ç”»å¥½äº†ã€‚</p>\n<p><a href=\"http://www.yanhuangxueyuan.com/HTML5/icon.html\">CSSç»˜åˆ¶ä¸‰è§’å½¢</a> è®²è§£çš„æ˜¯åˆ©ç”¨boderå¤–è¾¹æ¡†å±æ€§ç»˜åˆ¶å„ç§ä¸‰è§’å½¢çš„æ¡ˆä¾‹ã€‚</p>\n<p><a href=\"http://www.yanhuangxueyuan.com/HTML5/icon.html\">CSSç»˜åˆ¶åœ†(å¼§)</a> è®²è§£å¦‚ä½•åˆ©ç”¨CSSçš„åŸºæœ¬å±æ€§åœ†è§’border-radiusç»˜åˆ¶ä¸åœ†ã€åœ†å¼§ç›¸å…³çš„å›¾å½¢ã€‚</p>\n<h1 id=\"2-CSS-é€‰æ‹©å™¨\"><a href=\"#2-CSS-é€‰æ‹©å™¨\" class=\"headerlink\" title=\"2.CSS é€‰æ‹©å™¨\"></a>2.<a href=\"https://segmentfault.com/a/1190000013424772\">CSS é€‰æ‹©å™¨</a></h1><blockquote>\n<p>æ‘˜è‡ª MDN web docs</p>\n</blockquote>\n<h2 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h2><p>é€‰æ‹©å™¨æ˜¯ CSS è§„åˆ™çš„ä¸€éƒ¨åˆ†ä¸”ä½äº CSS å£°æ˜å—å‰ã€‚</p>\n<p><img data-src=\"https://segmentfault.com/img/remote/1460000013424775?w=644&h=188\" alt=\"image\"></p>\n<p>é€‰æ‹©å™¨å¯ä»¥è¢«åˆ†ä¸ºä»¥ä¸‹ç±»åˆ«ï¼š</p>\n<ul>\n<li><code>ç®€å•é€‰æ‹©å™¨ï¼ˆSimple selectorsï¼‰</code>ï¼šé€šè¿‡å…ƒç´ ç±»å‹ã€class æˆ– id åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</li>\n<li><code>å±æ€§é€‰æ‹©å™¨ï¼ˆAttribute selectorsï¼‰</code>ï¼šé€šè¿‡ å±æ€§ / å±æ€§å€¼ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</li>\n<li><code>ä¼ªç±»ï¼ˆPseudo-classesï¼‰</code>ï¼šåŒ¹é…å¤„äºç¡®å®šçŠ¶æ€çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œæ¯”å¦‚è¢«é¼ æ ‡æŒ‡é’ˆæ‚¬åœçš„å…ƒç´ ï¼Œæˆ–å½“å‰è¢«é€‰ä¸­æˆ–æœªé€‰ä¸­çš„å¤é€‰æ¡†ï¼Œæˆ–å…ƒç´ æ˜¯ DOM æ ‘ä¸­ä¸€çˆ¶èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚</li>\n<li><code>ä¼ªå…ƒç´ ï¼ˆPseudo-elementsï¼‰</code>:åŒ¹é…å¤„äºç›¸å…³çš„ç¡®å®šä½ç½®çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œä¾‹å¦‚æ¯ä¸ªæ®µè½çš„ç¬¬ä¸€ä¸ªå­—ï¼Œæˆ–è€…æŸä¸ªå…ƒç´ ä¹‹å‰ç”Ÿæˆçš„å†…å®¹ã€‚</li>\n<li><code>ç»„åˆå™¨ï¼ˆCombinatorsï¼‰</code>ï¼šè¿™é‡Œä¸ä»…ä»…æ˜¯é€‰æ‹©å™¨æœ¬èº«ï¼Œè¿˜æœ‰ä»¥æœ‰æ•ˆçš„æ–¹å¼ç»„åˆä¸¤ä¸ªæˆ–æ›´å¤šçš„é€‰æ‹©å™¨ç”¨äºéå¸¸ç‰¹å®šçš„é€‰æ‹©çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åªé€‰æ‹© divs çš„ç›´ç³»å­èŠ‚ç‚¹çš„æ®µè½ï¼Œæˆ–è€…ç›´æ¥è·Ÿåœ¨ headings åé¢çš„æ®µè½ã€‚</li>\n<li><code>å¤šç”¨é€‰æ‹©å™¨ï¼ˆMultiple selectorsï¼‰</code>ï¼šè¿™äº›ä¹Ÿä¸æ˜¯å•ç‹¬çš„é€‰æ‹©å™¨ï¼›è¿™ä¸ªæ€è·¯æ˜¯å°†ä»¥é€—å·åˆ†éš”å¼€çš„å¤šä¸ªé€‰æ‹©å™¨æ”¾åœ¨ä¸€ä¸ª CSS è§„åˆ™ä¸‹é¢ï¼Œ ä»¥å°†ä¸€ç»„å£°æ˜åº”ç”¨äºç”±è¿™äº›é€‰æ‹©å™¨é€‰æ‹©çš„æ‰€æœ‰å…ƒç´ ã€‚</li>\n</ul>\n<h2 id=\"ç®€å•é€‰æ‹©å™¨\"><a href=\"#ç®€å•é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ç®€å•é€‰æ‹©å™¨\"></a>ç®€å•é€‰æ‹©å™¨</h2><h3 id=\"ç±»å‹é€‰æ‹©å™¨ï¼ˆåˆåï¼šå…ƒç´ é€‰æ‹©å™¨ï¼‰\"><a href=\"#ç±»å‹é€‰æ‹©å™¨ï¼ˆåˆåï¼šå…ƒç´ é€‰æ‹©å™¨ï¼‰\" class=\"headerlink\" title=\"ç±»å‹é€‰æ‹©å™¨ï¼ˆåˆåï¼šå…ƒç´ é€‰æ‹©å™¨ï¼‰\"></a>ç±»å‹é€‰æ‹©å™¨ï¼ˆåˆåï¼šå…ƒç´ é€‰æ‹©å™¨ï¼‰</h3><p>æ­¤é€‰æ‹©å™¨åªæ˜¯ä¸€ä¸ªé€‰æ‹©å™¨åå’ŒæŒ‡å®šçš„HTMLå…ƒç´ åçš„ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…ã€‚è¿™æ˜¯é€‰æ‹©æ‰€æœ‰æŒ‡å®šç±»å‹çš„æœ€ç®€å•æ–¹å¼ã€‚</p>\n<h3 id=\"ç±»é€‰æ‹©å™¨ï¼ˆClass-selectorsï¼‰\"><a href=\"#ç±»é€‰æ‹©å™¨ï¼ˆClass-selectorsï¼‰\" class=\"headerlink\" title=\"ç±»é€‰æ‹©å™¨ï¼ˆClass selectorsï¼‰\"></a>ç±»é€‰æ‹©å™¨ï¼ˆClass selectorsï¼‰</h3><p>ç±»é€‰æ‹©å™¨ç”±ä¸€ä¸ªç‚¹â€œ.â€ä»¥åŠç±»åé¢çš„ç±»åç»„æˆã€‚ç±»åæ˜¯åœ¨HTML classæ–‡æ¡£å…ƒç´ å±æ€§ä¸­æ²¡æœ‰ç©ºæ ¼çš„ä»»ä½•å€¼ã€‚ç”±ä½ è‡ªå·±é€‰æ‹©ä¸€ä¸ªåå­—ã€‚åŒæ ·å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ–‡æ¡£ä¸­çš„å¤šä¸ªå…ƒç´ å¯ä»¥å…·æœ‰ç›¸åŒçš„ç±»åï¼Œè€Œå•ä¸ªå…ƒç´ å¯ä»¥æœ‰å¤šä¸ªç±»å(ä»¥ç©ºæ ¼åˆ†å¼€å¤šä¸ªç±»åçš„å½¢å¼ä¹¦å†™)ã€‚</p>\n<h3 id=\"ID-é€‰æ‹©å™¨\"><a href=\"#ID-é€‰æ‹©å™¨\" class=\"headerlink\" title=\"ID é€‰æ‹©å™¨\"></a>ID é€‰æ‹©å™¨</h3><p>IDé€‰æ‹©å™¨ç”±å“ˆå¸Œ/ç£…ç¬¦å· (#)ç»„æˆï¼Œåé¢æ˜¯ç»™å®šå…ƒç´ çš„IDåç§°ã€‚ ä»»ä½•å…ƒç´ éƒ½å¯ä»¥ä½¿ç”¨idå±æ€§è®¾ç½®å”¯ä¸€çš„IDåç§°ã€‚ ç”±ä½ è‡ªå·±é€‰æ‹©çš„IDæ˜¯ä»€ä¹ˆã€‚ è¿™æ˜¯é€‰æ‹©å•ä¸ªå…ƒç´ çš„æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚</p>\n<blockquote>\n<p>é‡è¦æç¤ºï¼šä¸€ä¸ªIDåç§°å¿…é¡»åœ¨æ–‡ä»¶ä¸­æ˜¯å”¯ä¸€çš„ã€‚å…³äºé‡å¤IDçš„è¡Œä¸ºæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œæ¯”å¦‚åœ¨ä¸€äº›æµè§ˆå™¨åªæ˜¯ç¬¬ä¸€ä¸ªå®ä¾‹è®¡ç®—ï¼Œå…¶ä½™çš„å°†è¢«å¿½ç•¥ã€‚</p>\n</blockquote>\n<h3 id=\"é€šç”¨é€‰æ‹©å™¨ï¼ˆUniversal-selectorï¼‰\"><a href=\"#é€šç”¨é€‰æ‹©å™¨ï¼ˆUniversal-selectorï¼‰\" class=\"headerlink\" title=\"é€šç”¨é€‰æ‹©å™¨ï¼ˆUniversal selectorï¼‰\"></a>é€šç”¨é€‰æ‹©å™¨ï¼ˆUniversal selectorï¼‰</h3><p>é€šç”¨é€‰æ‹©ï¼ˆ*ï¼‰æ˜¯æœ€ç»ˆçš„ç‹ç‰Œã€‚å®ƒå…è®¸é€‰æ‹©åœ¨ä¸€ä¸ªé¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ç”±äºç»™æ¯ä¸ªå…ƒç´ åº”ç”¨åŒæ ·çš„è§„åˆ™å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå®é™…ä»·å€¼ï¼Œæ›´å¸¸è§çš„åšæ³•æ˜¯ä¸å…¶ä»–é€‰æ‹©å™¨ç»“åˆä½¿ç”¨ã€‚</p>\n<blockquote>\n<p>é‡è¦æç¤ºï¼šä½¿ç”¨é€šç”¨é€‰æ‹©æ—¶å°å¿ƒã€‚å› ä¸ºå®ƒé€‚ç”¨äºæ‰€æœ‰çš„å…ƒç´ ï¼Œåœ¨å¤§å‹ç½‘é¡µåˆ©ç”¨å®ƒå¯ä»¥å¯¹æ€§èƒ½æœ‰æ˜æ˜¾çš„å½±å“ï¼šç½‘é¡µå¯ä»¥æ˜¾ç¤ºæ¯”é¢„æœŸè¦æ…¢ã€‚ä¸ä¼šæœ‰å¤ªå¤šçš„æƒ…å†µä¸‹ï¼Œæ‚¨æƒ³ä½¿ç”¨æ­¤é€‰æ‹©ã€‚</p>\n</blockquote>\n<h3 id=\"ç»„åˆå™¨ï¼ˆCombinatorsï¼‰\"><a href=\"#ç»„åˆå™¨ï¼ˆCombinatorsï¼‰\" class=\"headerlink\" title=\"ç»„åˆå™¨ï¼ˆCombinatorsï¼‰\"></a>ç»„åˆå™¨ï¼ˆCombinatorsï¼‰</h3><p>åœ¨CSSä¸­ï¼Œç»„åˆå™¨å…è®¸æ‚¨å°†å¤šä¸ªé€‰æ‹©å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œè¿™å…è®¸æ‚¨åœ¨å…¶ä»–å…ƒç´ ä¸­é€‰æ‹©å…ƒç´ ï¼Œæˆ–è€…ä¸å…¶ä»–å…ƒç´ ç›¸é‚»ã€‚å››ç§å¯ç”¨çš„ç±»å‹æ˜¯ï¼š</p>\n<ul>\n<li>åä»£é€‰æ‹©å™¨â€”â€”ï¼ˆç©ºæ ¼é”®ï¼‰â€”â€”å…è®¸æ‚¨é€‰æ‹©åµŒå¥—åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸­çš„æŸä¸ªå…ƒç´ ï¼ˆä¸ä¸€å®šæ˜¯ç›´æ¥çš„åä»£;ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­™å­ï¼‰ã€‚</li>\n<li>å­é€‰æ‹©å™¨â€”â€” &gt; â€”â€”å…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå…ƒç´ ï¼Œè¯¥å…ƒç´ æ˜¯å¦ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ã€‚</li>\n<li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨â€”â€” + â€”â€”å…è®¸æ‚¨é€‰æ‹©ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒæ˜¯å¦ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å…„å¼Ÿå…ƒç´ (ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å®ƒçš„æ—è¾¹ï¼Œåœ¨å±‚æ¬¡ç»“æ„çš„åŒä¸€å±‚)ã€‚</li>\n<li>é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨â€”â€” ~ â€” â€”å…è®¸æ‚¨é€‰æ‹©å…¶ä»–å…ƒç´ çš„å…„å¼Ÿå…ƒç´ (ä¾‹å¦‚ï¼Œåœ¨å±‚æ¬¡ç»“æ„ä¸­çš„ç›¸åŒçº§åˆ«ï¼Œä½†ä¸ä¸€å®šå°±åœ¨å®ƒçš„æ—è¾¹)ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Combinators</th>\n<th>Select</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>A,B</td>\n<td>åŒ¹é…æ»¡è¶³Aï¼ˆå’Œ/æˆ–ï¼‰Bçš„ä»»æ„å…ƒç´ .</td>\n</tr>\n<tr>\n<td>A B</td>\n<td>åŒ¹é…ä»»æ„å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶ï¼šBæ˜¯Açš„åä»£ç»“ç‚¹ï¼ˆBæ˜¯Açš„å­èŠ‚ç‚¹ï¼Œæˆ–è€…Açš„å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼‰</td>\n</tr>\n<tr>\n<td>A &gt; B</td>\n<td>åŒ¹é…ä»»æ„å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶ï¼šBæ˜¯Açš„ç›´æ¥å­èŠ‚ç‚¹</td>\n</tr>\n<tr>\n<td>A + B</td>\n<td>åŒ¹é…ä»»æ„å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶ï¼šBæ˜¯Açš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼ˆABæœ‰ç›¸åŒçš„çˆ¶ç»“ç‚¹ï¼Œå¹¶ä¸”Bç´§è·Ÿåœ¨Açš„åé¢ï¼‰</td>\n</tr>\n<tr>\n<td>A ~ B</td>\n<td>åŒ¹é…ä»»æ„å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶ï¼šBæ˜¯Aä¹‹åçš„å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä»»æ„ä¸€ä¸ªï¼ˆABæœ‰ç›¸åŒçš„çˆ¶èŠ‚ç‚¹ï¼ŒBåœ¨Aä¹‹åï¼Œä½†ä¸ä¸€å®šæ˜¯ç´§æŒ¨ç€Aï¼‰</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>æ³¨ï¼šç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨å’Œé€šç”¨å…„å¼Ÿé€‰æ‹©å™¨åªä¼šâ€œå‘åâ€é€‰æ‹©ï¼ŒDOMç»“æ„é å‰çš„å…„å¼Ÿå…ƒç´ ä¸åœ¨é€‰æ‹©èŒƒå›´å†…ã€‚</p>\n</blockquote>\n<p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å±•ç¤ºè¿™äº›å·¥ä½œæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;section&gt;</span><br><span class=\"line\">  &lt;h2&gt;Heading 1&lt;&#x2F;h2&gt;</span><br><span class=\"line\">  &lt;p&gt;Paragraph 1&lt;&#x2F;p&gt;</span><br><span class=\"line\">  &lt;p&gt;Paragraph 2&lt;&#x2F;p&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;h2&gt;Heading 2&lt;&#x2F;h2&gt;</span><br><span class=\"line\">    &lt;p&gt;Paragraph 3&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;p&gt;Paragraph 4&lt;&#x2F;p&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;section&gt;</span><br><span class=\"line\">section p &#123;</span><br><span class=\"line\">  color: blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">section &gt; p &#123;</span><br><span class=\"line\">  background-color: yellow;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">h2 + p &#123;</span><br><span class=\"line\">  text-transform: uppercase;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">h2 ~ p &#123;</span><br><span class=\"line\">  border: 1px dashed black;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>CSSæ ·å¼çš„HTMLå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://img-blog.csdnimg.cn/20210307112422139.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mjc1MjU3NA==,size_16,color_FFFFFF,t_70\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<p>é€‰æ‹©å™¨æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š</p>\n<ul>\n<li>section pé€‰æ‹©äº†æ‰€æœ‰çš„ <code>&lt;p&gt;</code> å…ƒç´ â€”â€”å‰ä¸¤ä¸ª <code>&lt;p&gt;</code> éƒ½æ˜¯ <code>&lt;section&gt;</code> å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼Œè€Œåé¢çš„ä¸¤ä¸ª <code>&lt;p&gt;</code> å…ƒç´ æ˜¯ <code>&lt;section&gt;</code> å…ƒç´ çš„å­™å­å…ƒç´ (å®ƒä»¬åœ¨ <code>&lt;div&gt;</code>é‡Œé¢)ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„æ®µè½æ–‡æœ¬éƒ½æ˜¯è“è‰²çš„ã€‚</li>\n<li>section &gt; p åªé€‰æ‹©å‰ä¸¤ä¸ª <code>&lt;p&gt;</code> å…ƒç´ ï¼Œè¿™ä¸¤ä¸ªå…ƒç´ æ˜¯ <code>&lt;section&gt;</code> å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼ˆä½†åä¸¤ä¸ª <code>&lt;p&gt;</code>å…ƒç´ ä¸æ˜¯ï¼Œå®ƒä»¬ä¸æ˜¯ç›´æ¥çš„å­å…ƒç´ ï¼‰ã€‚æ‰€ä»¥åªæœ‰å‰ä¸¤æ®µæœ‰é»„è‰²çš„èƒŒæ™¯è‰²ã€‚</li>\n<li>h2 + p åªé€‰æ‹©åœ¨ç›¸åŒå±‚æ¬¡ç»“æ„çš„ <code>&lt;h2&gt;</code> å…ƒç´ ä¹‹åç›´æ¥ç›¸è¿çš„ <code>&lt;p&gt;</code> å…ƒç´ â€”â€” åœ¨æœ¬ä¾‹ä¸­æ˜¯ç¬¬ä¸€å’Œç¬¬ä¸‰æ®µã€‚å› æ­¤ï¼Œè¿™äº›æ–‡æœ¬éƒ½æ˜¯å¤§å†™çš„ã€‚</li>\n<li>h2 ~ p é€‰æ‹©ä»»ä½•åœ¨ç›¸åŒçš„å±‚çº§ä¸Šï¼ˆè¿˜æœ‰ä¹‹åçš„ï¼‰ <code>&lt;h2&gt;</code> å…ƒç´ çš„ <code>&lt;p&gt;</code> å…ƒç´  â€”â€”åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„æ®µè½ç¬¦åˆæ­¤æ¡ä»¶ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„è¿™äº›éƒ½æœ‰ä¸€ä¸ªè™šçº¿çš„è¾¹ç•Œã€‚</li>\n</ul>\n<h2 id=\"å±æ€§é€‰æ‹©å™¨\"><a href=\"#å±æ€§é€‰æ‹©å™¨\" class=\"headerlink\" title=\"å±æ€§é€‰æ‹©å™¨\"></a>å±æ€§é€‰æ‹©å™¨</h2><p>å±æ€§é€‰æ‹©å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„é€‰æ‹©å™¨ï¼Œå®ƒæ ¹æ®å…ƒç´ çš„ å±æ€§å’Œå±æ€§å€¼æ¥åŒ¹é…å…ƒç´ ã€‚å®ƒä»¬çš„é€šç”¨è¯­æ³•ç”±æ–¹æ‹¬å·([]) ç»„æˆï¼Œå…¶ä¸­åŒ…å«å±æ€§åç§°ï¼Œåè·Ÿå¯é€‰æ¡ä»¶ä»¥åŒ¹é…å±æ€§çš„å€¼ã€‚ å±æ€§é€‰æ‹©å™¨å¯ä»¥æ ¹æ®å…¶åŒ¹é…å±æ€§å€¼çš„æ–¹å¼åˆ†ä¸ºä¸¤ç±»ï¼š <strong>å­˜åœ¨å’Œå€¼å±æ€§é€‰æ‹©å™¨</strong> å’Œ<strong>å­ä¸²å€¼å±æ€§é€‰æ‹©å™¨</strong>ã€‚</p>\n<h3 id=\"å­˜åœ¨å’Œå€¼ï¼ˆPresence-and-valueï¼‰å±æ€§é€‰æ‹©å™¨\"><a href=\"#å­˜åœ¨å’Œå€¼ï¼ˆPresence-and-valueï¼‰å±æ€§é€‰æ‹©å™¨\" class=\"headerlink\" title=\"å­˜åœ¨å’Œå€¼ï¼ˆPresence and valueï¼‰å±æ€§é€‰æ‹©å™¨\"></a>å­˜åœ¨å’Œå€¼ï¼ˆPresence and valueï¼‰å±æ€§é€‰æ‹©å™¨</h3><p>è¿™äº›å±æ€§é€‰æ‹©å™¨å°è¯•åŒ¹é…ç²¾ç¡®çš„å±æ€§å€¼ï¼š</p>\n<ul>\n<li>[attr]ï¼šè¯¥é€‰æ‹©å™¨é€‰æ‹©åŒ…å« attr å±æ€§çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸è®º attr çš„å€¼ä¸ºä½•ã€‚</li>\n<li>[attr=val]ï¼šè¯¥é€‰æ‹©å™¨ä»…é€‰æ‹© attr å±æ€§è¢«èµ‹å€¼ä¸º val çš„æ‰€æœ‰å…ƒç´ ã€‚</li>\n<li>[attr~=val]ï¼šè¯¥é€‰æ‹©å™¨ä»…é€‰æ‹© attr å±æ€§çš„å€¼ï¼ˆä»¥ç©ºæ ¼é—´éš”å‡ºå¤šä¸ªå€¼ï¼‰ä¸­æœ‰åŒ…å« val å€¼çš„æ‰€æœ‰å…ƒç´ ï¼Œæ¯”å¦‚ä½äºè¢«ç©ºæ ¼åˆ†éš”çš„å¤šä¸ªç±»ï¼ˆclassï¼‰ä¸­çš„ä¸€ä¸ªç±»ã€‚</li>\n</ul>\n<h3 id=\"å­ä¸²å€¼ï¼ˆSubstring-valueï¼‰å±æ€§é€‰æ‹©å™¨\"><a href=\"#å­ä¸²å€¼ï¼ˆSubstring-valueï¼‰å±æ€§é€‰æ‹©å™¨\" class=\"headerlink\" title=\"å­ä¸²å€¼ï¼ˆSubstring valueï¼‰å±æ€§é€‰æ‹©å™¨\"></a>å­ä¸²å€¼ï¼ˆSubstring valueï¼‰å±æ€§é€‰æ‹©å™¨</h3><p>è¿™ç§æƒ…å†µçš„å±æ€§é€‰æ‹©å™¨ä¹Ÿè¢«ç§°ä¸ºâ€œä¼ªæ­£åˆ™é€‰æ‹©å™¨â€ï¼Œå› ä¸ºå®ƒä»¬æä¾›ç±»ä¼¼ regular expression çš„çµæ´»åŒ¹é…æ–¹å¼ï¼ˆä½†è¯·æ³¨æ„ï¼Œè¿™äº›é€‰æ‹©å™¨å¹¶ä¸æ˜¯çœŸæ­£çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼š</p>\n<ul>\n<li>[attr|=val] : é€‰æ‹©attrå±æ€§çš„å€¼ä»¥valï¼ˆåŒ…æ‹¬valï¼‰æˆ–val-å¼€å¤´çš„å…ƒç´ ï¼ˆ-ç”¨æ¥å¤„ç†è¯­è¨€ç¼–ç ï¼‰ã€‚</li>\n<li>[attr^=val] : é€‰æ‹©attrå±æ€§çš„å€¼ä»¥valå¼€å¤´ï¼ˆåŒ…æ‹¬valï¼‰çš„å…ƒç´ ã€‚</li>\n<li>[attr$=val] : é€‰æ‹©attrå±æ€§çš„å€¼ä»¥valç»“å°¾ï¼ˆåŒ…æ‹¬valï¼‰çš„å…ƒç´ ã€‚</li>\n<li>[attr*=val] : é€‰æ‹©attrå±æ€§çš„å€¼ä¸­åŒ…å«å­—ç¬¦ä¸²valçš„å…ƒç´ ã€‚</li>\n</ul>\n<h2 id=\"ä¼ªç±»å’Œä¼ªå…ƒç´ \"><a href=\"#ä¼ªç±»å’Œä¼ªå…ƒç´ \" class=\"headerlink\" title=\"ä¼ªç±»å’Œä¼ªå…ƒç´ \"></a>ä¼ªç±»å’Œä¼ªå…ƒç´ </h2><h3 id=\"ä¼ªç±»ï¼ˆPseudo-classï¼‰\"><a href=\"#ä¼ªç±»ï¼ˆPseudo-classï¼‰\" class=\"headerlink\" title=\"ä¼ªç±»ï¼ˆPseudo-classï¼‰\"></a>ä¼ªç±»ï¼ˆPseudo-classï¼‰</h3><p>ä¸€ä¸ª CSS <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\">ä¼ªç±»ï¼ˆpseudo-classï¼‰</a> æ˜¯ä¸€ä¸ªä»¥å†’å·(:)ä½œä¸ºå‰ç¼€çš„å…³é”®å­—ï¼Œå½“ä½ å¸Œæœ›æ ·å¼åœ¨ç‰¹å®šçŠ¶æ€ä¸‹æ‰è¢«å‘ˆç°åˆ°æŒ‡å®šçš„å…ƒç´ æ—¶ï¼Œä½ å¯ä»¥å¾€å…ƒç´ çš„é€‰æ‹©å™¨åé¢åŠ ä¸Šå¯¹åº”çš„ä¼ªç±»ï¼ˆpseudo-classï¼‰ã€‚ä½ å¯èƒ½å¸Œæœ›æŸä¸ªå…ƒç´ åœ¨å¤„äºæŸç§çŠ¶æ€ä¸‹å‘ˆç°å¦ä¸€ç§æ ·å¼ï¼Œä¾‹å¦‚å½“é¼ æ ‡æ‚¬åœåœ¨å…ƒç´ ä¸Šé¢æ—¶ï¼Œæˆ–è€…å½“ä¸€ä¸ª checkbox è¢«ç¦ç”¨æˆ–è¢«å‹¾é€‰æ—¶ï¼Œåˆæˆ–è€…å½“ä¸€ä¸ªå…ƒç´ æ˜¯å®ƒåœ¨ DOM æ ‘ä¸­çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­©å­å…ƒç´ æ—¶ã€‚</p>\n<p>:active<br>:any<br>:checked<br>:default<br>:dir()<br>:disabled<br>:empty<br>:enabled<br>:first<br>:first-child<br>:first-of-type<br>:fullscreen<br>:focus<br>:hover<br>:indeterminate<br>:in-range<br>:invalid<br>:lang()<br>:last-child<br>:last-of-type<br>:left<br>:link<br>:not()<br>:nth-child()<br>:nth-last-child()<br>:nth-last-of-type()<br>:nth-of-type()<br>:only-child<br>:only-of-type<br>:optional<br>:out-of-range<br>:read-only<br>:read-write<br>:required<br>:right<br>:root<br>:scope<br>:target<br>:valid<br>:visited</p>\n<h3 id=\"ä¼ªå…ƒç´ \"><a href=\"#ä¼ªå…ƒç´ \" class=\"headerlink\" title=\"ä¼ªå…ƒç´ \"></a>ä¼ªå…ƒç´ </h3><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements\">ä¼ªå…ƒç´ ï¼ˆPseudo-elementï¼‰</a>è·Ÿä¼ªç±»å¾ˆåƒï¼Œä½†å®ƒä»¬åˆæœ‰ä¸åŒçš„åœ°æ–¹ã€‚å®ƒä»¬éƒ½æ˜¯å…³é”®å­— â€”â€” ä½†è¿™æ¬¡ä¼ªå…ƒç´ å‰ç¼€æ˜¯ä¸¤ä¸ªå†’å· (::) â€”â€” åŒæ ·æ˜¯æ·»åŠ åˆ°é€‰æ‹©å™¨åé¢è¾¾åˆ°æŒ‡å®šæŸä¸ªå…ƒç´ çš„æŸä¸ªéƒ¨åˆ†ã€‚</p>\n<p>::after<br>::before<br>::first-letter<br>::first-line<br>::selection<br>::backdrop</p>\n<p><a href=\"https://segmentfault.com/t/css\">css</a></p>\n<h2 id=\"CSSä¸‰å¤§ç‰¹æ€§â€”â€”-ç»§æ‰¿ã€-ä¼˜å…ˆçº§å’Œå±‚å ã€‚\"><a href=\"#CSSä¸‰å¤§ç‰¹æ€§â€”â€”-ç»§æ‰¿ã€-ä¼˜å…ˆçº§å’Œå±‚å ã€‚\" class=\"headerlink\" title=\"CSSä¸‰å¤§ç‰¹æ€§â€”â€” ç»§æ‰¿ã€ ä¼˜å…ˆçº§å’Œå±‚å ã€‚\"></a>CSSä¸‰å¤§ç‰¹æ€§â€”â€” <strong>ç»§æ‰¿ã€ ä¼˜å…ˆçº§å’Œå±‚å ã€‚</strong></h2><p><strong>ç»§æ‰¿ï¼š</strong>å³å­ç±»å…ƒç´ ç»§æ‰¿çˆ¶ç±»çš„æ ·å¼;</p>\n<p><strong>ä¼˜å…ˆçº§ï¼š</strong>æ˜¯æŒ‡ä¸åŒç±»åˆ«æ ·å¼çš„æƒé‡æ¯”è¾ƒ;</p>\n<p><strong>å±‚å ï¼š</strong>æ˜¯è¯´å½“æ•°é‡ç›¸åŒæ—¶ï¼Œé€šè¿‡å±‚å (åè€…è¦†ç›–å‰è€…)çš„æ ·å¼ã€‚</p>\n<h2 id=\"cssé€‰æ‹©ç¬¦åˆ†ç±»\"><a href=\"#cssé€‰æ‹©ç¬¦åˆ†ç±»\" class=\"headerlink\" title=\"cssé€‰æ‹©ç¬¦åˆ†ç±»ã€€ã€€\"></a>cssé€‰æ‹©ç¬¦åˆ†ç±»ã€€ã€€</h2><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹cssé€‰æ‹©ç¬¦(cssé€‰æ‹©å™¨)æœ‰å“ªäº›?</p>\n<p>ã€€ã€€1.æ ‡ç­¾é€‰æ‹©å™¨(å¦‚ï¼šbody,div,p,ul,li)</p>\n<p>ã€€ã€€2.ç±»é€‰æ‹©å™¨(å¦‚ï¼šclass=â€headâ€,class=â€head_logoâ€)</p>\n<p>ã€€ã€€3.IDé€‰æ‹©å™¨(å¦‚ï¼šid=â€nameâ€,id=â€name_txtâ€)</p>\n<p>ã€€ã€€4.å…¨å±€é€‰æ‹©å™¨(å¦‚ï¼š*å·)</p>\n<p>ã€€ã€€5.ç»„åˆé€‰æ‹©å™¨(å¦‚ï¼š.head .head_logo,æ³¨æ„ä¸¤é€‰æ‹©å™¨ç”¨ç©ºæ ¼é”®åˆ†å¼€)</p>\n<p>ã€€ã€€6.åä»£é€‰æ‹©å™¨ (å¦‚ï¼š#head .nav ul li ä»çˆ¶é›†åˆ°å­å­™é›†çš„é€‰æ‹©å™¨)</p>\n<p>ã€€ã€€7.ç¾¤ç»„é€‰æ‹©å™¨ div,span,img {color:Red} å³å…·æœ‰ç›¸åŒæ ·å¼çš„æ ‡ç­¾åˆ†ç»„æ˜¾ç¤º</p>\n<p>ã€€ã€€8.ç»§æ‰¿é€‰æ‹©å™¨(å¦‚ï¼šdiv p,æ³¨æ„ä¸¤é€‰æ‹©å™¨ç”¨ç©ºæ ¼é”®åˆ†å¼€)</p>\n<p>ã€€ã€€9.ä¼ªç±»é€‰æ‹©å™¨(å¦‚ï¼šå°±æ˜¯é“¾æ¥æ ·å¼,aå…ƒç´ çš„ä¼ªç±»ï¼Œ4ç§ä¸åŒçš„çŠ¶æ€ï¼šlinkã€visitedã€activeã€hoverã€‚)</p>\n<p>ã€€ã€€10.å­—ç¬¦ä¸²åŒ¹é…çš„å±æ€§é€‰æ‹©ç¬¦(^ $ *ä¸‰ç§ï¼Œåˆ†åˆ«å¯¹åº”å¼€å§‹ã€ç»“å°¾ã€åŒ…å«)</p>\n<p>ã€€ã€€11.å­é€‰æ‹©å™¨ (å¦‚ï¼šdiv&gt;p ,å¸¦å¤§äºå·&gt;)</p>\n<p>ã€€ã€€12.CSS ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨å™¨ (å¦‚ï¼šh1+p,å¸¦åŠ å·+)</p>\n<h2 id=\"cssä¼˜å…ˆçº§\"><a href=\"#cssä¼˜å…ˆçº§\" class=\"headerlink\" title=\"cssä¼˜å…ˆçº§\"></a>cssä¼˜å…ˆçº§</h2><p>å½“ä¸¤ä¸ªè§„åˆ™éƒ½ä½œç”¨åˆ°äº†åŒä¸€ä¸ªhtmlå…ƒç´ ä¸Šæ—¶ï¼Œå¦‚æœå®šä¹‰çš„å±æ€§æœ‰å†²çªï¼Œé‚£ä¹ˆåº”è¯¥ç”¨è°çš„å€¼çš„ï¼ŒCSSæœ‰ä¸€å¥—ä¼˜å…ˆçº§çš„å®šä¹‰ã€‚</p>\n<p><strong>ä¸åŒçº§åˆ«</strong></p>\n<ol>\n<li><p>åœ¨å±æ€§åé¢ä½¿ç”¨ !important ä¼šè¦†ç›–é¡µé¢å†…ä»»ä½•ä½ç½®å®šä¹‰çš„å…ƒç´ æ ·å¼ã€‚</p>\n</li>\n<li><p>ä½œä¸ºstyleå±æ€§å†™åœ¨å…ƒç´ å†…çš„æ ·å¼</p>\n</li>\n<li><p>idé€‰æ‹©å™¨</p>\n</li>\n<li><p>ç±»é€‰æ‹©å™¨</p>\n</li>\n<li><p>æ ‡ç­¾é€‰æ‹©å™¨</p>\n</li>\n<li><p>é€šé…ç¬¦é€‰æ‹©å™¨</p>\n</li>\n<li><p>æµè§ˆå™¨è‡ªå®šä¹‰æˆ–ç»§æ‰¿</p>\n<p><strong>æ€»ç»“æ’åºï¼š!important &gt; è¡Œå†…æ ·å¼&gt;IDé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾ &gt; é€šé…ç¬¦ &gt; ç»§æ‰¿ &gt; æµè§ˆå™¨é»˜è®¤å±æ€§</strong></p>\n</li>\n</ol>\n<p><strong>åŒä¸€çº§åˆ«</strong></p>\n<p>åŒä¸€çº§åˆ«ä¸­åå†™çš„ä¼šè¦†ç›–å…ˆå†™çš„æ ·å¼</p>\n<p>ä¸Šé¢çš„çº§åˆ«è¿˜æ˜¯å¾ˆå®¹æ˜“çœ‹æ‡‚çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™æœ‰äº›è§„åˆ™æ˜¯å¤šä¸ªçº§åˆ«çš„ç»„åˆï¼Œåƒè¿™æ ·</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class=\"line\">    &lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class=\"line\">        div.test&#123;</span><br><span class=\"line\">            background-COLOR:#a00;</span><br><span class=\"line\">            width:100px;</span><br><span class=\"line\">            height: 100px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        .test.test2&#123;</span><br><span class=\"line\">            background-COLOR:#0e0;</span><br><span class=\"line\">            width:100px;</span><br><span class=\"line\">            height: 100px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;test test2&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ°åº•divæ˜¯åº”ç”¨é‚£æ¡è§„åˆ™å‘¢ï¼Œæœ‰ä¸ªç®€å•çš„è®¡ç®—æ–¹æ³•ï¼ˆç»å›­å‹æç¤ºï¼Œæƒå€¼å®é™…å¹¶ä¸æ˜¯æŒ‰åè¿›åˆ¶ï¼Œç”¨æ•°å­—è¡¨ç¤ºåªæ˜¯è¯´æ˜æ€æƒ³ï¼Œä¸€ä¸‡ä¸ªclassä¹Ÿä¸å¦‚ä¸€ä¸ªidæƒå€¼é«˜ï¼‰</p>\n<ul>\n<li><p>å†…è”æ ·å¼è¡¨çš„æƒå€¼ä¸º 1000</p>\n</li>\n<li><p>ID é€‰æ‹©å™¨çš„æƒå€¼ä¸º 100</p>\n</li>\n<li><p>Class ç±»é€‰æ‹©å™¨çš„æƒå€¼ä¸º 10</p>\n</li>\n<li><p>HTML æ ‡ç­¾é€‰æ‹©å™¨çš„æƒå€¼ä¸º 1</p>\n<p>æˆ‘ä»¬å¯ä»¥æŠŠé€‰æ‹©å™¨ä¸­è§„åˆ™å¯¹åº”åšåŠ æ³•ï¼Œæ¯”è¾ƒæƒå€¼ï¼Œå¦‚æœæƒå€¼ç›¸åŒé‚£å°±åé¢çš„è¦†ç›–å‰é¢çš„äº†ï¼Œdiv.classçš„æƒå€¼æ˜¯1+10=11ï¼Œè€Œ.test1 .test2çš„æƒå€¼æ˜¯10+10=20ï¼Œæ‰€ä»¥divä¼šåº”ç”¨.test1 .test2å˜æˆç»¿è‰²</p>\n<p><img data-src=\"https://images2015.cnblogs.com/blog/625717/201612/625717-20161223085747964-420267465.png\" alt=\"img\"></p>\n</li>\n</ul>\n<h2 id=\"å¦å¤–ä¸€ç§ç†è§£æ–¹å¼ï¼š\"><a href=\"#å¦å¤–ä¸€ç§ç†è§£æ–¹å¼ï¼š\" class=\"headerlink\" title=\"å¦å¤–ä¸€ç§ç†è§£æ–¹å¼ï¼š\"></a>å¦å¤–ä¸€ç§ç†è§£æ–¹å¼ï¼š</h2><p>ã€€ã€€CSSä¼˜å…ˆçº§ï¼šæ˜¯ç”±å››ä¸ªçº§åˆ«å’Œå„çº§åˆ«çš„å‡ºç°æ¬¡æ•°å†³å®šçš„ã€‚</p>\n<p>ã€€ã€€å››ä¸ªçº§åˆ«åˆ†åˆ«ä¸ºï¼šè¡Œå†…é€‰æ‹©ç¬¦ã€IDé€‰æ‹©ç¬¦ã€ç±»åˆ«é€‰æ‹©ç¬¦ã€å…ƒç´ é€‰æ‹©ç¬¦ã€‚</p>\n<p>ã€€ã€€ä¼˜å…ˆçº§çš„ç®—æ³•ï¼š</p>\n<p>ã€€ã€€æ¯ä¸ªè§„åˆ™å¯¹åº”ä¸€ä¸ªåˆå§‹â€å››ä½æ•°â€ï¼š0ã€0ã€0ã€0</p>\n<p>ã€€ã€€è‹¥æ˜¯ è¡Œå†…é€‰æ‹©ç¬¦ï¼Œåˆ™åŠ 1ã€0ã€0ã€0</p>\n<p>ã€€ã€€è‹¥æ˜¯ IDé€‰æ‹©ç¬¦ï¼Œåˆ™åŠ 0ã€1ã€0ã€0</p>\n<p>ã€€ã€€è‹¥æ˜¯ ç±»é€‰æ‹©ç¬¦/å±æ€§é€‰æ‹©ç¬¦/ä¼ªç±»é€‰æ‹©ç¬¦ï¼Œåˆ™åˆ†åˆ«åŠ 0ã€0ã€1ã€0</p>\n<p>ã€€ã€€è‹¥æ˜¯ å…ƒç´ é€‰æ‹©ç¬¦/ä¼ªå…ƒç´ é€‰æ‹©ç¬¦ï¼Œåˆ™åˆ†åˆ«åŠ 0ã€0ã€0ã€1</p>\n<p>ã€€ã€€ç®—æ³•ï¼šå°†æ¯æ¡è§„åˆ™ä¸­ï¼Œé€‰æ‹©ç¬¦å¯¹åº”çš„æ•°ç›¸åŠ åå¾—åˆ°çš„â€å››ä½æ•°â€œï¼Œä»å·¦åˆ°å³è¿›è¡Œæ¯”è¾ƒï¼Œå¤§çš„ä¼˜å…ˆçº§è¶Šé«˜ã€‚ã€€ã€€</p>\n<h2 id=\"éœ€æ³¨æ„çš„ï¼š\"><a href=\"#éœ€æ³¨æ„çš„ï¼š\" class=\"headerlink\" title=\"éœ€æ³¨æ„çš„ï¼š\"></a>éœ€æ³¨æ„çš„ï¼š</h2><p>ã€€ã€€â‘ ã€!importantçš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä½†å‡ºç°å†²çªæ—¶åˆ™éœ€æ¯”è¾ƒâ€å››ä½æ•°â€œ;</p>\n<p>ã€€ã€€â‘¡ã€ä¼˜å…ˆçº§ç›¸åŒæ—¶ï¼Œåˆ™é‡‡ç”¨å°±è¿‘åŸåˆ™ï¼Œé€‰æ‹©æœ€åå‡ºç°çš„æ ·å¼;</p>\n<p>ã€€ã€€â‘¢ã€ç»§æ‰¿å¾—æ¥çš„å±æ€§ï¼Œå…¶ä¼˜å…ˆçº§æœ€ä½;</p>\n<p>ã€€ã€€!important &gt; è¡Œå†…æ ·å¼&gt;IDé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾ &gt; é€šé…ç¬¦ &gt; ç»§æ‰¿ &gt; æµè§ˆå™¨é»˜è®¤å±æ€§</p>\n<p>ã€€ã€€*cssé€‰æ‹©å™¨ä½¿ç”¨å¼ºçƒˆå»ºè®®é‡‡ç”¨ä½æƒé‡åŸåˆ™ï¼Œåˆ©äºå……åˆ†å‘æŒ¥cssçš„ç»§æ‰¿æ€§ï¼Œå¤ç”¨æ€§ï¼Œæ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€‚</p>\n<h2 id=\"CSSé€‰æ‹©å™¨çš„è§£æåŸåˆ™\"><a href=\"#CSSé€‰æ‹©å™¨çš„è§£æåŸåˆ™\" class=\"headerlink\" title=\"CSSé€‰æ‹©å™¨çš„è§£æåŸåˆ™\"></a><strong>CSSé€‰æ‹©å™¨çš„è§£æåŸåˆ™</strong></h2><p>â€‹     ä»¥å‰ä¸€ç›´è®¤ä¸ºé€‰æ‹©å™¨çš„å®šä½DOMå…ƒç´ æ˜¯ä»å·¦å‘å³çš„æ–¹å‘ï¼ŒæŸ¥çœ‹äº†ç½‘ä¸Šçš„ç›¸å…³èµ„æ–™ä¹‹åæ‰å‘ç°åŸæ¥è‡ªå·±ä¸€ç›´éƒ½æ˜¯é”™çš„ã€‚éƒ‘é‡çš„å£°æ˜é€‰æ‹©å™¨å®šä½DOMå…ƒç´ æ˜¯ä»å³å¾€å·¦çš„æ–¹å‘ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å°½æ—©çš„è¿‡æ»¤æ‰ä¸€äº›æ— å…³çš„æ ·å¼è§„åˆ™å’Œå…ƒç´  ã€‚<a href=\"http://blog.csdn.net/jinboker/article/details/52126021\">ä¸ºä»€ä¹ˆCSSé€‰æ‹©å™¨æ˜¯ä»å³å¾€å·¦è§£æ ï¼Ÿï¼Ÿï¼Ÿ</a></p>\n<h2 id=\"ç®€æ´ã€é«˜æ•ˆçš„css\"><a href=\"#ç®€æ´ã€é«˜æ•ˆçš„css\" class=\"headerlink\" title=\"ç®€æ´ã€é«˜æ•ˆçš„css\"></a><strong>ç®€æ´ã€é«˜æ•ˆçš„css</strong></h2><p>â€‹    æ‰€è°“é«˜æ•ˆå°±æ˜¯è®©æµè§ˆå™¨æŸ¥æ‰¾æ›´å°‘çš„å…ƒç´ æ ‡ç­¾æ¥ç¡®å®šåŒ¹é…çš„styleå…ƒç´ ã€‚</p>\n<p>   1.ä¸è¦å†IDé€‰æ‹©å™¨å‰ä½¿ç”¨æ ‡ç­¾å</p>\n<p>â€‹    è§£é‡Šï¼šIDé€‰æ‹©æ˜¯å”¯ä¸€çš„ï¼ŒåŠ ä¸Šæ ‡ç­¾åç›¸å½“äºç”»è›‡æ·»è¶³äº†ï¼Œæ²¡å¿…è¦ã€‚</p>\n<p>   2.ä¸è¦åœ¨ç±»é€‰æ‹©å™¨å‰ä½¿ç”¨æ ‡ç­¾å</p>\n<p>   è§£é‡Šï¼šå¦‚æœæ²¡æœ‰ç›¸åŒçš„åå­—å‡ºç°å°±æ˜¯æ²¡å¿…è¦ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒåå­—çš„ç±»é€‰æ‹©å™¨åˆ™æœ‰å¿…è¦æ·»åŠ æ ‡ç­¾åé˜²æ­¢æ··æ·†å¦‚ï¼ˆp.colclass{colorï¼šred;} å’Œ span.colclass{color:red;}</p>\n<p>   3.å°½é‡å°‘ä½¿ç”¨å±‚çº§å…³ç³»ï¼›</p>\n<p>â€‹     #divclass p.colclass{color:red;}æ”¹ä¸º  .colclass{color:red;}</p>\n<p>   4.ä½¿ç”¨ç±»é€‰æ‹©å™¨ä»£æ›¿å±‚çº§å…³ç³»ï¼ˆå¦‚ä¸Šï¼‰</p>\n<h1 id=\"3-BFC-åŸç†\"><a href=\"#3-BFC-åŸç†\" class=\"headerlink\" title=\"3. BFC åŸç†\"></a>3. BFC åŸç†</h1><h2 id=\"ä¸€ã€å¸¸è§å®šä½æ–¹æ¡ˆ\"><a href=\"#ä¸€ã€å¸¸è§å®šä½æ–¹æ¡ˆ\" class=\"headerlink\" title=\"ä¸€ã€å¸¸è§å®šä½æ–¹æ¡ˆ\"></a>ä¸€ã€å¸¸è§å®šä½æ–¹æ¡ˆ</h2><p>åœ¨è®² BFC ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å¸¸è§çš„å®šä½æ–¹æ¡ˆï¼Œå®šä½æ–¹æ¡ˆæ˜¯æ§åˆ¶å…ƒç´ çš„å¸ƒå±€ï¼Œæœ‰ä¸‰ç§å¸¸è§æ–¹æ¡ˆ:</p>\n<ul>\n<li>æ™®é€šæµ (normal flow)</li>\n</ul>\n<blockquote>\n<p>åœ¨æ™®é€šæµä¸­ï¼Œå…ƒç´ æŒ‰ç…§å…¶åœ¨ HTML ä¸­çš„å…ˆåä½ç½®è‡³ä¸Šè€Œä¸‹å¸ƒå±€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¡Œå†…å…ƒç´ æ°´å¹³æ’åˆ—ï¼Œç›´åˆ°å½“è¡Œè¢«å æ»¡ç„¶åæ¢è¡Œï¼Œå—çº§å…ƒç´ åˆ™ä¼šè¢«æ¸²æŸ“ä¸ºå®Œæ•´çš„ä¸€ä¸ªæ–°è¡Œï¼Œé™¤éå¦å¤–æŒ‡å®šï¼Œå¦åˆ™æ‰€æœ‰å…ƒç´ é»˜è®¤éƒ½æ˜¯æ™®é€šæµå®šä½ï¼Œä¹Ÿå¯ä»¥è¯´ï¼Œæ™®é€šæµä¸­å…ƒç´ çš„ä½ç½®ç”±è¯¥å…ƒç´ åœ¨ HTML æ–‡æ¡£ä¸­çš„ä½ç½®å†³å®šã€‚</p>\n</blockquote>\n<ul>\n<li>æµ®åŠ¨ (float)</li>\n</ul>\n<blockquote>\n<p>åœ¨æµ®åŠ¨å¸ƒå±€ä¸­ï¼Œå…ƒç´ é¦–å…ˆæŒ‰ç…§æ™®é€šæµçš„ä½ç½®å‡ºç°ï¼Œç„¶åæ ¹æ®æµ®åŠ¨çš„æ–¹å‘å°½å¯èƒ½çš„å‘å·¦è¾¹æˆ–å³è¾¹åç§»ï¼Œå…¶æ•ˆæœä¸å°åˆ·æ’ç‰ˆä¸­çš„æ–‡æœ¬ç¯ç»•ç›¸ä¼¼ã€‚</p>\n</blockquote>\n<ul>\n<li>ç»å¯¹å®šä½ (absolute positioning)</li>\n</ul>\n<blockquote>\n<p>åœ¨ç»å¯¹å®šä½å¸ƒå±€ä¸­ï¼Œå…ƒç´ ä¼šæ•´ä½“è„±ç¦»æ™®é€šæµï¼Œå› æ­¤ç»å¯¹å®šä½å…ƒç´ ä¸ä¼šå¯¹å…¶å…„å¼Ÿå…ƒç´ é€ æˆå½±å“ï¼Œè€Œå…ƒç´ å…·ä½“çš„ä½ç½®ç”±ç»å¯¹å®šä½çš„åæ ‡å†³å®šã€‚</p>\n</blockquote>\n<h2 id=\"äºŒã€BFC-æ¦‚å¿µ\"><a href=\"#äºŒã€BFC-æ¦‚å¿µ\" class=\"headerlink\" title=\"äºŒã€BFC æ¦‚å¿µ\"></a>äºŒã€BFC æ¦‚å¿µ</h2><p>Formatting context(æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) æ˜¯ W3C CSS2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚</p>\n<p>é‚£ä¹ˆ BFC æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>BFC å³ Block Formatting Contexts (å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)ï¼Œå®ƒå±äºä¸Šè¿°å®šä½æ–¹æ¡ˆçš„æ™®é€šæµã€‚</p>\n<p>**å…·æœ‰ BFC ç‰¹æ€§çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯éš”ç¦»äº†çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå¹¶ä¸” BFC å…·æœ‰æ™®é€šå®¹å™¨æ‰€æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ã€‚<br>**</p>\n<p>é€šä¿—ä¸€ç‚¹æ¥è®²ï¼Œå¯ä»¥æŠŠ BFC ç†è§£ä¸ºä¸€ä¸ªå°é—­çš„å¤§ç®±å­ï¼Œç®±å­å†…éƒ¨çš„å…ƒç´ æ— è®ºå¦‚ä½•ç¿»æ±Ÿå€’æµ·ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°å¤–éƒ¨ã€‚</p>\n<h2 id=\"ä¸‰ã€è§¦å‘-BFC\"><a href=\"#ä¸‰ã€è§¦å‘-BFC\" class=\"headerlink\" title=\"ä¸‰ã€è§¦å‘ BFC\"></a>ä¸‰ã€è§¦å‘ BFC</h2><p>åªè¦å…ƒç´ æ»¡è¶³ä¸‹é¢ä»»ä¸€æ¡ä»¶å³å¯è§¦å‘ BFC ç‰¹æ€§ï¼š</p>\n<ul>\n<li>body æ ¹å…ƒç´ </li>\n<li>æµ®åŠ¨å…ƒç´ ï¼šfloat é™¤ none ä»¥å¤–çš„å€¼</li>\n<li>ç»å¯¹å®šä½å…ƒç´ ï¼šposition (absoluteã€fixed)</li>\n<li>display ä¸º inline-blockã€table-cellsã€flex</li>\n<li>overflow é™¤äº† visible ä»¥å¤–çš„å€¼ (hiddenã€autoã€scroll)</li>\n</ul>\n<h2 id=\"å››ã€BFC-ç‰¹æ€§åŠåº”ç”¨\"><a href=\"#å››ã€BFC-ç‰¹æ€§åŠåº”ç”¨\" class=\"headerlink\" title=\"å››ã€BFC ç‰¹æ€§åŠåº”ç”¨\"></a>å››ã€BFC ç‰¹æ€§åŠåº”ç”¨</h2><p><strong>1. åŒä¸€ä¸ª BFC ä¸‹å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å </strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">div&#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    background: lightblue;</span><br><span class=\"line\">    margin: 100px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-0a9ca8952c83141250a2d9002e6d2047_720w.png\" alt=\"img\"></p>\n<p>ä»æ•ˆæœä¸Šçœ‹ï¼Œå› ä¸ºä¸¤ä¸ª div å…ƒç´ éƒ½å¤„äºåŒä¸€ä¸ª BFC å®¹å™¨ä¸‹ (è¿™é‡ŒæŒ‡ body å…ƒç´ ) æ‰€ä»¥ç¬¬ä¸€ä¸ª div çš„ä¸‹è¾¹è·å’Œç¬¬äºŒä¸ª div çš„ä¸Šè¾¹è·å‘ç”Ÿäº†é‡å ï¼Œæ‰€ä»¥ä¸¤ä¸ªç›’å­ä¹‹é—´è·ç¦»åªæœ‰ 100pxï¼Œè€Œä¸æ˜¯ 200pxã€‚</p>\n<p>é¦–å…ˆè¿™ä¸æ˜¯ CSS çš„ bugï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ç§è§„èŒƒï¼Œ<strong>å¦‚æœæƒ³è¦é¿å…å¤–è¾¹è·çš„é‡å ï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨ä¸åŒçš„ BFC å®¹å™¨ä¸­ã€‚</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">.container &#123;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">p &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    background: lightblue;</span><br><span class=\"line\">    margin: 100px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶å€™ï¼Œä¸¤ä¸ªç›’å­è¾¹è·å°±å˜æˆäº† 200px</p>\n<p><img data-src=\"https://pic2.zhimg.com/80/v2-5b8d6e8b2b507352900c1ece00018855_720w.png\" alt=\"img\"></p>\n<p><strong>2. BFC å¯ä»¥åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰</strong></p>\n<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæµ®åŠ¨çš„å…ƒç´ ä¼šè„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œæ¥çœ‹ä¸‹ä¸‹é¢ä¸€ä¸ªä¾‹å­</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;border: 1px solid #000;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 100px;height: 100px;background: #eee;float: left;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-371eb702274af831df909b2c55d6a14b_720w.png\" alt=\"img\"></p>\n<p>ç”±äºå®¹å™¨å†…å…ƒç´ æµ®åŠ¨ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œæ‰€ä»¥å®¹å™¨åªå‰©ä¸‹ 2px çš„è¾¹è·é«˜åº¦ã€‚å¦‚æœä½¿è§¦å‘å®¹å™¨çš„ BFCï¼Œé‚£ä¹ˆå®¹å™¨å°†ä¼šåŒ…è£¹ç€æµ®åŠ¨å…ƒç´ ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;border: 1px solid #000;overflow: hidden&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 100px;height: 100px;background: #eee;float: left;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœå¦‚å›¾ï¼š</p>\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-cc8365db5c9cc5ca003ce9afe88592e7_720w.png\" alt=\"img\"></p>\n<p><strong>3. BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</strong></p>\n<p>å…ˆæ¥çœ‹ä¸€ä¸ªæ–‡å­—ç¯ç»•æ•ˆæœï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 100px;width: 100px;float: left;background: lightblue&quot;</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 200px; height: 200px;background: #eee&quot;</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, </span><br><span class=\"line\">ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ , width: 200px; height:200px; background: #eee;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-dd3e636d73682140bf4a781bcd6f576b_720w.png\" alt=\"img\"></p>\n<p>è¿™æ—¶å€™å…¶å®ç¬¬äºŒä¸ªå…ƒç´ æœ‰éƒ¨åˆ†è¢«æµ®åŠ¨å…ƒç´ æ‰€è¦†ç›–ï¼Œ(ä½†æ˜¯æ–‡æœ¬ä¿¡æ¯ä¸ä¼šè¢«æµ®åŠ¨å…ƒç´ æ‰€è¦†ç›–) å¦‚æœæƒ³é¿å…å…ƒç´ è¢«è¦†ç›–ï¼Œå¯è§¦ç¬¬äºŒä¸ªå…ƒç´ çš„ BFC ç‰¹æ€§ï¼Œåœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¸­åŠ å…¥ <strong>overflow: hidden</strong>ï¼Œå°±ä¼šå˜æˆï¼š</p>\n<p><img data-src=\"https://pic3.zhimg.com/80/v2-5ebd48f09fac875f0bd25823c76ba7fa_720w.png\" alt=\"img\"></p>\n<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€ï¼Œæ•ˆæœä¸é”™ï¼Œè¿™æ—¶å€™å·¦è¾¹çš„å®½åº¦å›ºå®šï¼Œå³è¾¹çš„å†…å®¹è‡ªé€‚åº”å®½åº¦(å»æ‰ä¸Šé¢å³è¾¹å†…å®¹çš„å®½åº¦)ã€‚</p>\n<h1 id=\"4-position\"><a href=\"#4-position\" class=\"headerlink\" title=\"4. position\"></a>4. position</h1><h2 id=\"1-static\"><a href=\"#1-static\" class=\"headerlink\" title=\"1. static\"></a>1. static</h2><p>é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£°æ˜ï¼‰ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            * &#123;</span><br><span class=\"line\">                padding: 0;</span><br><span class=\"line\">                margin: 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .static &#123;</span><br><span class=\"line\">                position: static;</span><br><span class=\"line\">                top: 10px;</span><br><span class=\"line\">                left: 10px;</span><br><span class=\"line\">                width: 100px;</span><br><span class=\"line\">                height: 200px;</span><br><span class=\"line\">                background: yellow;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;static&quot;&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>é‡‘é»„è‰²æ–¹å—ä¼šåœ¨å·¦ä¸Šè§’æ˜¾ç¤ºï¼Œæ²¡æœ‰åç§»ã€‚</p>\n<h2 id=\"2-fixed\"><a href=\"#2-fixed\" class=\"headerlink\" title=\"2. fixed\"></a>2. fixed</h2><p>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±æ€§è¿›è¡Œè§„å®šã€‚</p>\n<p>è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œåªå’Œçª—å£æœ‰å…³ï¼Œä¸çˆ¶å…ƒç´ ï¼Œæ–‡æ¡£æµéƒ½æ— å…³ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            * &#123;</span><br><span class=\"line\">                padding: 0;</span><br><span class=\"line\">                margin: 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .fixed-outer &#123;</span><br><span class=\"line\">                position: fixed;</span><br><span class=\"line\">                top: 20px;</span><br><span class=\"line\">                left: 20px;</span><br><span class=\"line\">                width: 20px;</span><br><span class=\"line\">                height: 20px;</span><br><span class=\"line\">                background: yellow;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .fixed-inner &#123;</span><br><span class=\"line\">                position: fixed;</span><br><span class=\"line\">                top: 40px;</span><br><span class=\"line\">                left: 40px;</span><br><span class=\"line\">                width: 20px;</span><br><span class=\"line\">                height: 20px;</span><br><span class=\"line\">                background: red;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body  bgcolor&#x3D;&quot;#999&quot;&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;fixed-outer&quot;&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;fixed-inner&quot;&gt;</span><br><span class=\"line\">            &lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://images2018.cnblogs.com/blog/670878/201803/670878-20180301141019698-644310256.png\" alt=\"img\"></p>\n<p>leftå°±æ˜¯å·¦è¾¹ç•Œè·ç¦»è§†çª—å·¦è¾¹è·çš„ä½ç½®ï¼Œrightå°±æ˜¯å³è¾¹ç•Œè·ç¦»è§†çª—å³è¾¹è·çš„ä½ç½®ï¼Œtopï¼ŒbottomåŒç†ã€‚topå’Œbottomæˆ–è€…leftå’ŒrightåŒæ—¶å­˜åœ¨ï¼Œåªæœ‰topæˆ–è€…leftç”Ÿæ•ˆã€‚</p>\n<p>å°å¹¿å‘Šæ•ˆæœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            * &#123;</span><br><span class=\"line\">                padding: 0;</span><br><span class=\"line\">                margin: 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .fixed &#123;</span><br><span class=\"line\">                position: fixed;</span><br><span class=\"line\">                right: 0px;</span><br><span class=\"line\">                bottom: 50px;</span><br><span class=\"line\">                width: 200px;</span><br><span class=\"line\">                height: 100px;</span><br><span class=\"line\">                background: yellow;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;fixed&quot;&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;&lt;p&gt;...&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-relative\"><a href=\"#3-relative\" class=\"headerlink\" title=\"3. relative\"></a>3. relative</h2><p>ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚</p>\n<p>ç›¸å¯¹å…ƒç´ æ­£å¸¸åº”è¯¥åœ¨çš„ä½ç½®ç§»åŠ¨ï¼Œå…ƒç´ æ‰€å çš„ç©ºé—´ä½ç½®ä¸å˜ï¼Œä½†æ˜¯æ˜¾ç¤ºçš„ä½ç½®å‘ç”Ÿåç§»ã€‚</p>\n<p>leftæ˜¯å‘å³åç§»ï¼Œrightæ˜¯å‘å·¦åç§»ï¼ˆè¿™ä¹ˆè¯´å¥½å¥‡æ€ªï¼Œä½†æ˜¯â€¦åº”è¯¥æ²¡é”™å§â€¦â€¦ï¼‰ï¼Œtopå‘ä¸‹åç§»ï¼Œbottomå‘ä¸Šåç§»ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            * &#123;</span><br><span class=\"line\">                padding: 0;</span><br><span class=\"line\">                margin: 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .div &#123;</span><br><span class=\"line\">                width: 100px;</span><br><span class=\"line\">                height: 100px;</span><br><span class=\"line\">                border: 1px solid;</span><br><span class=\"line\">                float: left;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .relative1 &#123;</span><br><span class=\"line\">                position: relative;</span><br><span class=\"line\">                left: 10px;</span><br><span class=\"line\">                top: 10px;</span><br><span class=\"line\">                border-color: red;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .relative2 &#123;</span><br><span class=\"line\">                position: relative;</span><br><span class=\"line\">                right: 10px;</span><br><span class=\"line\">                bottom: 10px;</span><br><span class=\"line\">                border-color: green;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;div&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;div relative1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;div&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;div relative2&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://images2018.cnblogs.com/blog/670878/201803/670878-20180301145327838-51205356.png\" alt=\"img\"></p>\n<h2 id=\"4-absolute\"><a href=\"#4-absolute\" class=\"headerlink\" title=\"4. absolute\"></a>4. absolute</h2><p>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚(å¦‚æœæ²¡æœ‰è¿™æ ·çš„çˆ¶å…ƒç´ å‘¢ï¼Ÿemmmâ€¦â€¦åº”è¯¥æ˜¯æ•´ä¸ªæ–‡æ¡£æœ€å¤–å±‚çš„æ¡†â€¦â€¦å§â€¦â€¦</p>\n<p>å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±æ€§è¿›è¡Œè§„å®šã€‚</p>\n<p>absoluteå…ƒç´ ä¼šé™„å¸¦ display:block æ•ˆæœï¼ŒåŒæ—¶ï¼Œè®¾ç½®absoluteåï¼Œå…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµã€‚</p>\n<p>\\1. å¦‚æœä¸è®¾ç½®â€leftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ï¼Œä¼šæ˜¾ç¤ºåœ¨æ­£å¸¸åº”è¯¥æ˜¾ç¤ºçš„ä½ç½®ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            .relative &#123;</span><br><span class=\"line\">                width: 300px;</span><br><span class=\"line\">                height: 300px;</span><br><span class=\"line\">                border: 1px solid;</span><br><span class=\"line\">                position: relative;</span><br><span class=\"line\">                left: 100px;</span><br><span class=\"line\">                top: 100px;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute &#123;</span><br><span class=\"line\">                position: absolute;</span><br><span class=\"line\">                width: 100px;</span><br><span class=\"line\">                height: 100px;</span><br><span class=\"line\">                border: 1px solid red;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;relative&quot;&gt;</span><br><span class=\"line\">            outer</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://images2018.cnblogs.com/blog/670878/201803/670878-20180301160725057-1706791347.png\" alt=\"img\"></p>\n<p>\\2. è®¾ç½®äº†åç§»â€¦â€¦ï¼ˆä¸€ä¸‹çˆ¶å…ƒç´ å…¨éƒ¨æŒ‡ static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ </p>\n<p>è®¾ç½®äº†left å°†ä»¥çˆ¶å…ƒç´ çš„å·¦è¾¹ç•Œä¸ºåŸºå‡† å‘å³åç§» å‚ç›´æ–¹å‘å’Œä¹‹å‰ç›¸åŒã€‚</p>\n<p>è®¾ç½®äº†right å°†ä»¥çˆ¶å…ƒç´ çš„å³è¾¹ç•Œä¸ºåŸºå‡† å‘å·¦åç§» å‚ç›´æ–¹å‘å’Œä¹‹å‰ç›¸åŒã€‚</p>\n<p>è®¾ç½®äº†top å°†ä»¥çˆ¶å…ƒç´ çš„ä¸Šè¾¹ç•Œä¸ºåŸºå‡† å‘ä¸‹åç§» æ°´å¹³æ–¹å‘å’Œä¹‹å‰ç›¸åŒã€‚</p>\n<p>è®¾ç½®äº†bottom å°†ä»¥çˆ¶å…ƒç´ çš„ä¸‹è¾¹ç•Œä¸ºåŸºå‡† å‘ä¸Šåç§» æ°´å¹³æ–¹å‘å’Œä¹‹å‰ç›¸åŒã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            .relative &#123;</span><br><span class=\"line\">                width: 300px;</span><br><span class=\"line\">                height: 300px;</span><br><span class=\"line\">                border: 1px solid;</span><br><span class=\"line\">                position: relative;</span><br><span class=\"line\">                left: 100px;</span><br><span class=\"line\">                top: 100px;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute1, .absolute2, .absolute3, .absolute4, .absolute5 &#123;</span><br><span class=\"line\">                position: absolute;</span><br><span class=\"line\">                width: 100px;</span><br><span class=\"line\">                height: 100px;</span><br><span class=\"line\">                border: 2px solid red;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute2 &#123;</span><br><span class=\"line\">                left: 60px;</span><br><span class=\"line\">                border-color: green;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute3 &#123;</span><br><span class=\"line\">                right: 10px;</span><br><span class=\"line\">                border-color: yellow;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute4 &#123;</span><br><span class=\"line\">                top: 0;</span><br><span class=\"line\">                border-color: pink;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .absolute5 &#123;</span><br><span class=\"line\">                bottom: 10px;</span><br><span class=\"line\">                border-color: blue;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;relative&quot;&gt;</span><br><span class=\"line\">            outer</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute1&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute2&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute3&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute4&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;absolute5&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://images2018.cnblogs.com/blog/670878/201803/670878-20180301162703536-1368636423.png\" alt=\"img\"></p>\n<h2 id=\"5-others\"><a href=\"#5-others\" class=\"headerlink\" title=\"5. others\"></a>5. others</h2><p>inheritï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„å€¼ã€‚</p>\n<p>initialï¼š åˆå§‹å€¼ï¼Œå³é»˜è®¤å€¼ï¼Œstaticã€‚</p>\n<p>unsetï¼š éç»§æ‰¿å±æ€§ï¼Œç›¸å½“äºinitialï¼Œstaticã€‚</p>\n<h2 id=\"6-navigation-bar\"><a href=\"#6-navigation-bar\" class=\"headerlink\" title=\"6. navigation bar\"></a>6. navigation bar</h2><p>æ•ˆæœè§å³ä¸‹è§’</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;position&lt;&#x2F;title&gt;</span><br><span class=\"line\">        &lt;style&gt;</span><br><span class=\"line\">            .right-nav * &#123;</span><br><span class=\"line\">                margin: 0;</span><br><span class=\"line\">                padding: 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav &#123;</span><br><span class=\"line\">                position: fixed;</span><br><span class=\"line\">                right: 10px;</span><br><span class=\"line\">                bottom: 150px;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav li &#123;</span><br><span class=\"line\">                list-style-type: none !important;</span><br><span class=\"line\">                position: relative;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav li a &#123;</span><br><span class=\"line\">                text-decoration: none;</span><br><span class=\"line\">                display: block;</span><br><span class=\"line\">                width: 150px;</span><br><span class=\"line\">                line-height: 30px;</span><br><span class=\"line\">                text-align: center;</span><br><span class=\"line\">                background: #666;</span><br><span class=\"line\">                border-bottom: 1px solid;</span><br><span class=\"line\">                color: #fff;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav li a:hover, .right-nav li a:active  &#123;</span><br><span class=\"line\">                background: #ccc;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav .summary &#123;</span><br><span class=\"line\">                position: absolute;</span><br><span class=\"line\">                right: 150px;</span><br><span class=\"line\">                top: 0px;</span><br><span class=\"line\">                line-height: 30px;</span><br><span class=\"line\">                height: 30px;</span><br><span class=\"line\">                width: 400px;</span><br><span class=\"line\">                background: #ccc;</span><br><span class=\"line\">                color: #fff;</span><br><span class=\"line\">                text-align: center;</span><br><span class=\"line\">                display: none;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            .right-nav li:hover .summary &#123;</span><br><span class=\"line\">                display: block;</span><br><span class=\"line\">                font-size: 12px;</span><br><span class=\"line\">                border-right: 1px solid #fff;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;right-nav&quot;&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#static&quot;&gt;1. static&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ã€‚&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#fixed&quot;&gt;2. fixed&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#relative&quot;&gt;3. relative&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#absolute&quot;&gt;4. absolute&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#others&quot;&gt;5. others&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;inherit &amp; initial &amp; unset&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;www.cnblogs.com&#x2F;wenruo&#x2F;p&#x2F;8488254.html#navigation-bar&quot;&gt;6. navigation bar&lt;&#x2F;a&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;summary&quot;&gt;æ ¹æ®å®šä½å†™ä¸€ä¸ªå¯¼èˆªæ ã€‚&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"5-flex-å¸ƒå±€\"><a href=\"#5-flex-å¸ƒå±€\" class=\"headerlink\" title=\"5.flex å¸ƒå±€\"></a>5.flex å¸ƒå±€</h1><p>ç½‘é¡µå¸ƒå±€ï¼ˆlayoutï¼‰æ˜¯ CSS çš„ä¸€ä¸ªé‡ç‚¹åº”ç”¨ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071001.gif\" alt=\"img\"></p>\n<p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäº<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/box_model\">ç›’çŠ¶æ¨¡å‹</a>ï¼Œä¾èµ– <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/display\"><code>display</code></a> å±æ€§ + <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/position\"><code>position</code></a>å±æ€§ + <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/float\"><code>float</code></a>å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œ<a href=\"https://css-tricks.com/centering-css-complete-guide/\">å‚ç›´å±…ä¸­</a>å°±ä¸å®¹æ˜“å®ç°ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071002.png\" alt=\"img\"></p>\n<p>2009å¹´ï¼ŒW3C æå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flex å¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚ç›®å‰ï¼Œå®ƒå·²ç»å¾—åˆ°äº†æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€ï¼Œç°åœ¨å°±èƒ½å¾ˆå®‰å…¨åœ°ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071003.jpg\" alt=\"img\"></p>\n<p>Flex å¸ƒå±€å°†æˆä¸ºæœªæ¥å¸ƒå±€çš„é¦–é€‰æ–¹æ¡ˆã€‚æœ¬æ–‡ä»‹ç»å®ƒçš„è¯­æ³•ï¼Œ<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">ä¸‹ä¸€ç¯‡æ–‡ç« </a>ç»™å‡ºå¸¸è§å¸ƒå±€çš„ Flex å†™æ³•ã€‚ç½‘å‹ <a href=\"http://vgee.cn/\">JailBreak</a> ä¸ºæœ¬æ–‡çš„æ‰€æœ‰ç¤ºä¾‹åˆ¶ä½œäº† <a href=\"http://static.vgee.cn/static/index.html\">Demo</a>ï¼Œä¹Ÿå¯ä»¥å‚è€ƒã€‚</p>\n<p>ä»¥ä¸‹å†…å®¹ä¸»è¦å‚è€ƒäº†ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š<a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\">A Complete Guide to Flexbox</a> å’Œ <a href=\"https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties\">A Visual Guide to CSS3 Flexbox Properties</a>ã€‚</p>\n<h2 id=\"ä¸€ã€Flex-å¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#ä¸€ã€Flex-å¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"ä¸€ã€Flex å¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>ä¸€ã€Flex å¸ƒå±€æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚</p>\n<p>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸º Flex å¸ƒå±€ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span>&#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>è¡Œå†…å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨ Flex å¸ƒå±€ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span>&#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">display</span>: inline-flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>Webkit å†…æ ¸çš„æµè§ˆå™¨ï¼Œå¿…é¡»åŠ ä¸Š<code>-webkit</code>å‰ç¼€ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span>&#123;</span><br><span class=\"line\">      <span class=\"attribute\">display</span>: -webkit-flex; <span class=\"comment\">/* Safari */</span></span><br><span class=\"line\">      <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>æ³¨æ„ï¼Œè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„<code>float</code>ã€<code>clear</code>å’Œ<code>vertical-align</code>å±æ€§å°†å¤±æ•ˆã€‚</p>\n<h2 id=\"äºŒã€åŸºæœ¬æ¦‚å¿µ\"><a href=\"#äºŒã€åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"äºŒã€åŸºæœ¬æ¦‚å¿µ\"></a>äºŒã€åŸºæœ¬æ¦‚å¿µ</h2><p>é‡‡ç”¨ Flex å¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸º Flex å®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º Flex é¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png\" alt=\"img\"></p>\n<p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åš<code>main end</code>ï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚</p>\n<p>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p>\n<h2 id=\"ä¸‰ã€å®¹å™¨çš„å±æ€§\"><a href=\"#ä¸‰ã€å®¹å™¨çš„å±æ€§\" class=\"headerlink\" title=\"ä¸‰ã€å®¹å™¨çš„å±æ€§\"></a>ä¸‰ã€å®¹å™¨çš„å±æ€§</h2><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚</p>\n<blockquote>\n<ul>\n<li>flex-direction</li>\n<li>flex-wrap</li>\n<li>flex-flow</li>\n<li>justify-content</li>\n<li>align-items</li>\n<li>align-content</li>\n</ul>\n</blockquote>\n<h3 id=\"3-1-flex-directionå±æ€§\"><a href=\"#3-1-flex-directionå±æ€§\" class=\"headerlink\" title=\"3.1 flex-directionå±æ€§\"></a>3.1 flex-directionå±æ€§</h3><p><code>flex-direction</code>å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071005.png\" alt=\"img\"></p>\n<p>å®ƒå¯èƒ½æœ‰4ä¸ªå€¼ã€‚</p>\n<blockquote>\n<ul>\n<li><code>row</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚</li>\n<li><code>row-reverse</code>ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚</li>\n<li><code>column</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚</li>\n<li><code>column-reverse</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹æ²¿ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"3-2-flex-wrapå±æ€§\"><a href=\"#3-2-flex-wrapå±æ€§\" class=\"headerlink\" title=\"3.2 flex-wrapå±æ€§\"></a>3.2 flex-wrapå±æ€§</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®éƒ½æ’åœ¨ä¸€æ¡çº¿ï¼ˆåˆç§°â€è½´çº¿â€ï¼‰ä¸Šã€‚<code>flex-wrap</code>å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071006.png\" alt=\"img\"></p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span>&#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>å®ƒå¯èƒ½å–ä¸‰ä¸ªå€¼ã€‚</p>\n<p>ï¼ˆ1ï¼‰<code>nowrap</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸æ¢è¡Œã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071007.png\" alt=\"img\"></p>\n<p>ï¼ˆ2ï¼‰<code>wrap</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071008.jpg\" alt=\"img\"></p>\n<p>ï¼ˆ3ï¼‰<code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ã€‚</p>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071009.jpg\" alt=\"img\"></p>\n<h3 id=\"3-3-flex-flow\"><a href=\"#3-3-flex-flow\" class=\"headerlink\" title=\"3.3 flex-flow\"></a>3.3 flex-flow</h3><p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code>ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-4-justify-contentå±æ€§\"><a href=\"#3-4-justify-contentå±æ€§\" class=\"headerlink\" title=\"3.4 justify-contentå±æ€§\"></a>3.4 justify-contentå±æ€§</h3><p><code>justify-content</code>å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png\" alt=\"img\"></p>\n<p>å®ƒå¯èƒ½å–5ä¸ªå€¼ï¼Œå…·ä½“å¯¹é½æ–¹å¼ä¸è½´çš„æ–¹å‘æœ‰å…³ã€‚ä¸‹é¢å‡è®¾ä¸»è½´ä¸ºä»å·¦åˆ°å³ã€‚</p>\n<blockquote>\n<ul>\n<li><code>flex-start</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå·¦å¯¹é½</li>\n<li><code>flex-end</code>ï¼šå³å¯¹é½</li>\n<li><code>center</code>ï¼š å±…ä¸­</li>\n<li><code>space-between</code>ï¼šä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰ã€‚</li>\n<li><code>space-around</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"3-5-align-itemså±æ€§\"><a href=\"#3-5-align-itemså±æ€§\" class=\"headerlink\" title=\"3.5 align-itemså±æ€§\"></a>3.5 align-itemså±æ€§</h3><p><code>align-items</code>å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png\" alt=\"img\"></p>\n<p>å®ƒå¯èƒ½å–5ä¸ªå€¼ã€‚å…·ä½“çš„å¯¹é½æ–¹å¼ä¸äº¤å‰è½´çš„æ–¹å‘æœ‰å…³ï¼Œä¸‹é¢å‡è®¾äº¤å‰è½´ä»ä¸Šåˆ°ä¸‹ã€‚</p>\n<blockquote>\n<ul>\n<li><code>flex-start</code>ï¼šäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li>\n<li><code>flex-end</code>ï¼šäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li>\n<li><code>center</code>ï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li>\n<li><code>baseline</code>: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚</li>\n<li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"3-6-align-contentå±æ€§\"><a href=\"#3-6-align-contentå±æ€§\" class=\"headerlink\" title=\"3.6 align-contentå±æ€§\"></a>3.6 align-contentå±æ€§</h3><p><code>align-content</code>å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png\" alt=\"img\"></p>\n<p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ã€‚</p>\n<blockquote>\n<ul>\n<li><code>flex-start</code>ï¼šä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li>\n<li><code>flex-end</code>ï¼šä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li>\n<li><code>center</code>ï¼šä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li>\n<li><code>space-between</code>ï¼šä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚</li>\n<li><code>space-around</code>ï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li>\n<li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ã€‚</li>\n</ul>\n</blockquote>\n<h3 id=\"å››ã€é¡¹ç›®çš„å±æ€§\"><a href=\"#å››ã€é¡¹ç›®çš„å±æ€§\" class=\"headerlink\" title=\"å››ã€é¡¹ç›®çš„å±æ€§\"></a>å››ã€é¡¹ç›®çš„å±æ€§</h3><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚</p>\n<blockquote>\n<ul>\n<li><code>order</code></li>\n<li><code>flex-grow</code></li>\n<li><code>flex-shrink</code></li>\n<li><code>flex-basis</code></li>\n<li><code>flex</code></li>\n<li><code>align-self</code></li>\n</ul>\n</blockquote>\n<h3 id=\"4-1-orderå±æ€§\"><a href=\"#4-1-orderå±æ€§\" class=\"headerlink\" title=\"4.1 orderå±æ€§\"></a>4.1 orderå±æ€§</h3><p><code>order</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">order</span>: &lt;integer&gt;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071013.png\" alt=\"img\"></p>\n<h3 id=\"4-2-flex-growå±æ€§\"><a href=\"#4-2-flex-growå±æ€§\" class=\"headerlink\" title=\"4.2 flex-growå±æ€§\"></a>4.2 flex-growå±æ€§</h3><p><code>flex-grow</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-grow</span>: &lt;number&gt;; <span class=\"comment\">/* default 0 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071014.png\" alt=\"img\"></p>\n<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚</p>\n<h3 id=\"4-3-flex-shrinkå±æ€§\"><a href=\"#4-3-flex-shrinkå±æ€§\" class=\"headerlink\" title=\"4.3 flex-shrinkå±æ€§\"></a>4.3 flex-shrinkå±æ€§</h3><p><code>flex-shrink</code>å±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-shrink</span>: &lt;number&gt;; <span class=\"comment\">/* default 1 */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071015.jpg\" alt=\"img\"></p>\n<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚</p>\n<p>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p>\n<h3 id=\"4-4-flex-basiså±æ€§\"><a href=\"#4-4-flex-basiså±æ€§\" class=\"headerlink\" title=\"4.4 flex-basiså±æ€§\"></a>4.4 flex-basiså±æ€§</h3><p><code>flex-basis</code>å±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex-basis</span>: &lt;length&gt; | auto; <span class=\"comment\">/* default auto */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>å®ƒå¯ä»¥è®¾ä¸ºè·Ÿ<code>width</code>æˆ–<code>height</code>å±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚</p>\n<h3 id=\"4-5-flexå±æ€§\"><a href=\"#4-5-flexå±æ€§\" class=\"headerlink\" title=\"4.5 flexå±æ€§\"></a>4.5 flexå±æ€§</h3><p><code>flex</code>å±æ€§æ˜¯<code>flex-grow</code>, <code>flex-shrink</code> å’Œ <code>flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º<code>0 1 auto</code>ã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">flex</span>: none | [ &lt;<span class=\"string\">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class=\"string\">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class=\"string\">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼š<code>auto</code> (<code>1 1 auto</code>) å’Œ none (<code>0 0 auto</code>)ã€‚</p>\n<p>å»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å•ç‹¬å†™ä¸‰ä¸ªåˆ†ç¦»çš„å±æ€§ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæ¨ç®—ç›¸å…³å€¼ã€‚</p>\n<h3 id=\"4-6-align-selfå±æ€§\"><a href=\"#4-6-align-selfå±æ€§\" class=\"headerlink\" title=\"4.6 align-selfå±æ€§\"></a>4.6 align-selfå±æ€§</h3><p><code>align-self</code>å±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„<code>align-items</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº<code>stretch</code>ã€‚</p>\n<blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  \t<span class=\"attribute\">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p><img data-src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071016.png\" alt=\"img\"></p>\n<p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ï¼Œé™¤äº†autoï¼Œå…¶ä»–éƒ½ä¸align-itemså±æ€§å®Œå…¨ä¸€è‡´ã€‚</p>\n<h1 id=\"6-cssæ ·å¼ä¼˜å…ˆçº§\"><a href=\"#6-cssæ ·å¼ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"6.cssæ ·å¼ä¼˜å…ˆçº§\"></a>6.cssæ ·å¼ä¼˜å…ˆçº§</h1><h2 id=\"å®šä¹‰\"><a href=\"#å®šä¹‰\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><ol>\n<li>æƒé‡å†³å®šäº†ä½ cssè§„åˆ™æ€æ ·è¢«æµè§ˆå™¨è§£æç›´åˆ°ç”Ÿæ•ˆã€‚â€œcssæƒé‡å…³ç³»åˆ°ä½ çš„cssè§„åˆ™æ˜¯æ€æ ·æ˜¾ç¤ºçš„â€ã€‚</li>\n<li>å½“å¾ˆå¤šçš„æ ·å¼è¢«åº”ç”¨åˆ°æŸä¸€ä¸ªå…ƒç´ ä¸Šæ—¶ï¼Œæƒé‡æ˜¯ä¸€ä¸ªå†³å®šå“ªç§æ ·å¼ç”Ÿæ•ˆï¼Œæˆ–è€…æ˜¯ä¼˜å…ˆçº§çš„è¿‡ç¨‹ã€‚</li>\n<li>æ¯ä¸ªé€‰æ‹©å™¨éƒ½æœ‰è‡ªå·±çš„æƒé‡ã€‚ä½ çš„æ¯æ¡cssè§„åˆ™ï¼Œéƒ½åŒ…å«ä¸€ä¸ªæƒé‡çº§åˆ«ã€‚ è¿™ä¸ªçº§åˆ«æ˜¯ç”±ä¸åŒçš„é€‰æ‹©å™¨åŠ æƒè®¡ç®—çš„ï¼Œé€šè¿‡æƒé‡ï¼Œä¸åŒçš„æ ·å¼æœ€ç»ˆä¼šä½œç”¨åˆ°ä½ çš„ç½‘é¡µä¸­ ã€‚</li>\n<li>å¦‚æœä¸¤ä¸ªé€‰æ‹©å™¨åŒæ—¶ä½œç”¨åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œæƒé‡é«˜è€…ç”Ÿæ•ˆã€‚</li>\n</ol>\n<h2 id=\"æƒé‡è®°å¿†å£è¯€ï¼š\"><a href=\"#æƒé‡è®°å¿†å£è¯€ï¼š\" class=\"headerlink\" title=\"æƒé‡è®°å¿†å£è¯€ï¼š\"></a><strong>æƒé‡è®°å¿†å£è¯€</strong>ï¼š</h2><p><em>ä»0å¼€å§‹ï¼Œä¸€ä¸ªè¡Œå†…æ ·å¼+1000ï¼Œä¸€ä¸ªidé€‰æ‹©å™¨+100ï¼Œä¸€ä¸ªå±æ€§é€‰æ‹©å™¨ã€classæˆ–è€…ä¼ªç±»+10ï¼Œä¸€ä¸ªå…ƒç´ é€‰æ‹©å™¨ï¼Œæˆ–è€…ä¼ªå…ƒç´ +1ï¼Œé€šé…ç¬¦+0ã€‚</em></p>\n<p><img data-src=\"https://pic3.zhimg.com/80/v2-b1a9fedf320754acb1d7766c6548d5f6_720w.jpg\" alt=\"img\">cssæƒé‡å€¼è®°å¿†å›¾</p>\n<p>æ¥ä¸‹æ¥å¢åŠ ä¸€ä¸‹è®°å¿†ï¼Œä¸‹é¢æ˜¯æˆ‘çå†™çš„ä¸€ä¸ªæ ·å¼ï¼Œåªçœ‹é€‰æ‹©å™¨é‚£é‡Œå°±å¯ä»¥äº†ï¼Œå…·ä½“æ ·å¼è¯·å¿½ç•¥ï¼Œæˆ‘åˆ†åˆ«ç”¨äº†idé€‰æ‹©å™¨ã€classé€‰æ‹©å™¨å’Œæ ‡ç­¾é€‰æ‹©å™¨å„ä¸€æ¬¡ã€‚</p>\n<p><img data-src=\"https://pic3.zhimg.com/80/v2-f27a0588280e867a3bc3ed17c7643cf6_720w.jpg\" alt=\"img\"></p>\n<h2 id=\"æ ·å¼é‡å¤å¤šå†™æƒ…å†µ\"><a href=\"#æ ·å¼é‡å¤å¤šå†™æƒ…å†µ\" class=\"headerlink\" title=\"æ ·å¼é‡å¤å¤šå†™æƒ…å†µ\"></a><strong>æ ·å¼é‡å¤å¤šå†™æƒ…å†µ</strong></h2><p>åœ¨cssæ ·å¼è¡¨ä¸­ï¼ŒåŒä¸€ä¸ªCSSæ ·å¼ä½ å†™äº†ä¸¤æ¬¡ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼Œåœ¨å¼€å‘ä¸­åŸºæœ¬ä¸ä¼šä½¿ç”¨ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#box</span> &#123;</span><br><span class=\"line\">     <span class=\"attribute\">background-color</span>: green;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* è¿™æ¡ç”Ÿæ•ˆ */</span></span><br><span class=\"line\"><span class=\"selector-id\">#box</span> &#123;</span><br><span class=\"line\">     <span class=\"attribute\">background-color</span>: blue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸åŒçš„æƒé‡ï¼Œæƒé‡å€¼é«˜åˆ™ç”Ÿæ•ˆ\"><a href=\"#ä¸åŒçš„æƒé‡ï¼Œæƒé‡å€¼é«˜åˆ™ç”Ÿæ•ˆ\" class=\"headerlink\" title=\"ä¸åŒçš„æƒé‡ï¼Œæƒé‡å€¼é«˜åˆ™ç”Ÿæ•ˆ\"></a><strong>ä¸åŒçš„æƒé‡ï¼Œæƒé‡å€¼é«˜åˆ™ç”Ÿæ•ˆ</strong></h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>æƒé‡é«˜çš„æ ·å¼ç”Ÿæ•ˆ<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* æƒé‡å€¼ï¼š1 */</span></span></span><br><span class=\"line\">\t\t\tdiv&#123;</span><br><span class=\"line\">\t\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\t\tbackground-color: red;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* æƒé‡å€¼ï¼š10 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-class\">.box2</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* æƒé‡å€¼ï¼š100 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#box</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\t\tbackground-color: green;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;box&#x27;</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;box2&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-4428f2f2ad22f0541b5c49ec42f261c4_720w.jpg\" alt=\"img\">idçš„æƒé‡é«˜ï¼Œæ‰€ä»¥idé€‰æ‹©å™¨ä¸­çš„æ ·å¼ç”Ÿæ•ˆ</p>\n<p>ä»ä¸Šé¢çš„ä¾‹å­ä¸éš¾çœ‹å‡ºï¼Œidé€‰æ‹©å™¨çš„æƒé‡å€¼é«˜äºå…¶å®ƒ2ç§é€‰æ‹©å™¨çš„æƒé‡å€¼ï¼Œæ‰€ä»¥idé€‰æ‹©å™¨ä¸­çš„æ ·å¼ç”Ÿæ•ˆäº†ã€‚</p>\n<h2 id=\"important-æå‡æ ·å¼ä¼˜å…ˆçº§\"><a href=\"#important-æå‡æ ·å¼ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"!important(æå‡æ ·å¼ä¼˜å…ˆçº§)\"></a><strong>!important(æå‡æ ·å¼ä¼˜å…ˆçº§)</strong></h2><p>!importantçš„ä½œç”¨æ˜¯æå‡æ ·å¼ä¼˜å…ˆçº§ï¼Œå¦‚æœåŠ äº†è¿™å¥çš„æ ·å¼çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ã€‚ä¸è¿‡æˆ‘è¿™é‡Œ*<strong>å»ºè®®å¤§å®¶ä¸€ä¸‹ï¼Œ!importantæœ€å¥½ä¸è¦ä½¿ç”¨ã€‚*</strong></p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"selector-tag\">style</span>&gt;</span><br><span class=\"line\">    <span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">        <span class=\"attribute\">background</span>: blue <span class=\"meta\">!important</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-id\">#box</span>&#123;</span><br><span class=\"line\">        <span class=\"attribute\">background-color</span>: green;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">    &lt;<span class=\"selector-tag\">body</span>&gt;</span><br><span class=\"line\">    \t&lt;div id=&quot;box&quot; style=&quot;background-color: red;width: 100px;height: 100px;&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-dffaab8e727068ed415d2e93f11cab30_720w.jpg\" alt=\"img\">!important ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä¸å»ºè®®ä½¿ç”¨</p>\n<h2 id=\"ä¸¤ç§æ ·å¼éƒ½ä½¿ç”¨-importantæ—¶\"><a href=\"#ä¸¤ç§æ ·å¼éƒ½ä½¿ç”¨-importantæ—¶\" class=\"headerlink\" title=\"ä¸¤ç§æ ·å¼éƒ½ä½¿ç”¨!importantæ—¶\"></a><strong>ä¸¤ç§æ ·å¼éƒ½ä½¿ç”¨!importantæ—¶</strong></h2><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>å½“ä¸¤ä¸ªæ ·å¼éƒ½ä½¿ç”¨!importantæ—¶<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-class\">.box</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\t\tbackground-color: red !important;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">\t\t\tdiv&#123;</span><br><span class=\"line\">\t\t\t\twidth: 100px;</span><br><span class=\"line\">\t\t\t\theight: 100px;</span><br><span class=\"line\">\t\t\t\tbackground-color: green !important;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- å½“ä¸¤ä¸ªæ ·å¼éƒ½ä½¿ç”¨!importantæ—¶ï¼Œæƒé‡å€¼å¤§çš„ä¼˜å…ˆçº§æ›´é«˜ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&#x27;box&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-78a61330c654eb406693bcbea09fc728_720w.jpg\" alt=\"img\">å½“ä¸¤ä¸ªæ ·å¼éƒ½ä½¿ç”¨!importantæ—¶ï¼Œæƒé‡å€¼å¤§çš„ä¼˜å…ˆçº§æ›´é«˜</p>\n<h2 id=\"importantåº”ç”¨äºç®€å†™æ ·å¼\"><a href=\"#importantåº”ç”¨äºç®€å†™æ ·å¼\" class=\"headerlink\" title=\"!importantåº”ç”¨äºç®€å†™æ ·å¼\"></a><strong>!importantåº”ç”¨äºç®€å†™æ ·å¼</strong></h2><p>å¦‚æœ!importantè¢«ç”¨äºä¸€ä¸ªç®€å†™çš„æ ·å¼å±æ€§ï¼Œé‚£ä¹ˆè¿™æ¡ç®€å†™çš„æ ·å¼å±æ€§æ‰€ä»£è¡¨çš„å­å±æ€§éƒ½ä¼šè¢«ä½œç”¨ä¸Š!importantã€‚</p>\n<p>ä¾‹å¦‚ï¼š<em>background: blue !important;</em></p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-7d88d39b30972d1b20ef5ba2e96d46d4_720w.jpg\" alt=\"img\">ç®€å•å†™çš„æ ·å¼å¦‚æœä½¿ç”¨!importantï¼Œå­å±æ€§ä¹Ÿä¼šé»˜è®¤åŠ ä¸Šimportant</p>\n<p>ä¸Šè¿°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œbackgroundçš„å­å±æ€§éƒ½åŠ ä¸Šäº†!importantï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘æé†’ä¸€ä¸‹å¼€å‘è€…ä»¬ï¼Œè¿™ç§å¤åˆæ€§æ ·å¼ä¸å»ºè®®å¤§é‡ä½¿ç”¨ï¼Œå¦‚æœé‡Œé¢çš„å±æ€§å¤§å¤šæ•°æ˜¯å¯ä»¥ç”¨åˆ°çš„ï¼Œè¿˜æ˜¯å¯ä»¥å†™å¤åˆæ€§æ ·å¼çš„ã€‚æˆ‘ç»å¸¸çœ‹åˆ°ä¸€äº›å¼€å‘éƒ½ï¼Œç»™æŸä¸€å…ƒç´ åŠ ä¸Šé¢œè‰²ï¼Œç»å¸¸æ€§çš„å†™æˆè¿™æ ·</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">background</span>: <span class=\"selector-tag\">red</span>;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸ªæ ·å¼ä»è¡¨é¢æ¥è¯´ï¼Œå’Œbackground-color:red;ä¸€æ ·å¯ä»¥å®ç°æ•ˆæœã€‚</p>\n<p>è¿™æ—¶ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„è°ƒè¯•å·¥å…·æ¥æŸ¥çœ‹å®ƒå…·ä½“çš„æ ·å¼ï¼š</p>\n<p><img data-src=\"https://pic3.zhimg.com/80/v2-891cb936a5d21fd220732e8d01908bb6_720w.jpg\" alt=\"img\">goolgeä¸‹çš„æ•ˆæœå›¾</p>\n<p>ä½¿ç”¨å¤åˆå†™æ³•çš„æ—¶å€™ï¼Œå®ƒä¸å…‰åªåŠ è½½äº†èƒŒæ™¯é¢œè‰²æ ·å¼ï¼Œè¿˜åŠ è½½äº†å…¶å®ƒä¸€äº›æ ·å¼ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œå¦‚æœä¸€ä¸ªé¡¹ç›®çš„å‰å°å…¨éƒ¨éƒ½é‡‡ç”¨å¤åˆå†™æ³•çš„æ–¹å¼ï¼Œç¬¬è®¾ç½®ä¸€ä¸ªbackgroundæ ·å¼æ—¶backgroundç›¸å…³çš„æ ·å¼éƒ½ä¼šè¢«åŠ è½½è¿›å»ï¼Œè¿™æ ·æ€§èƒ½ä¸€å®šéå¸¸å·®ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ä¸åˆç†çš„è®¾è®¡æ–¹ æ¡ˆï¼Œè€Œå•ä¾‹å†™æ³•å´çœ‹ä¸åˆ°è¿™ç§æƒ…å†µã€‚ </p>\n<p><strong>è¡Œå†…ã€å†…è”å’Œå¤–è”æ ·å¼ä¼˜å…ˆçº§</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>cssä¼˜å…ˆçº§<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&#x27;stylesheet&#x27;</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;css/styles.css&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t        div&#123;</span><br><span class=\"line\">\t        \tbackground-color: blue;</span><br><span class=\"line\">\t        &#125;</span><br><span class=\"line\"><span class=\"css\">\t        <span class=\"selector-id\">#box</span>&#123;</span></span><br><span class=\"line\">\t            background-color: green;</span><br><span class=\"line\">\t        &#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- è¡Œå†…æ ·å¼ç”Ÿæ•ˆ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background-color: red;width: 100px;height: 100px;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-ca7b3c40edc41399cf0224c91137551b_720w.jpg\" alt=\"img\">æ•ˆæœå›¾</p>\n<p>æ ¹æ®æƒé‡å€¼æ¥è®¡ç®—ï¼Œè¡Œå†…æ ·å¼çš„æƒé‡å€¼æœ€å¤§ï¼Œæ‰€ä»¥è¡Œå†…æ ·å¼ç”Ÿæ•ˆäº†ã€‚</p>\n<p><strong>å†…è”å’Œå¤–è”æ ·å¼ä¼˜å…ˆçº§</strong></p>\n<p>è¿™é‡Œæˆ‘æ›¾ç»ä¸€ç›´ä»¥ä¸ºå†…è”æ ·å¼çš„ä¼˜å…ˆçº§ä¸€å®šå¤§äºå¤–è”æ ·å¼çš„ï¼Œç›´åˆ°æœ€è¿‘çš„å‡ å¤©æˆ‘æ‰å‘ç°æˆ‘ä¸€ç›´éƒ½å­¦é”™äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿæ˜¯ç»™å¤§å®¶æä¸ªé†’ï¼Œå¸Œæœ›è‡ªå·±ä¹Ÿç‰¢è®°è¿™ä¸ªæ•™è®­ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* styles.css */</span></span><br><span class=\"line\"><span class=\"selector-id\">#box</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: yellow;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#div</span>&#123;</span><br><span class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</span><br><span class=\"line\">\t<span class=\"attribute\">background-color</span>: pink;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<p>1.å¤–è”æ ·å¼å†™å‰é¢ï¼Œå†…è”æ ·å¼å†™åé¢</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>å†…è”å’Œå¤–è”æ ·å¼çš„ä¼˜å…ˆçº§é—®é¢˜<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&#x27;stylesheet&#x27;</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;css/styles.css&#x27;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#div</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- å†…è”æ ·å¼ç”Ÿæ•ˆ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;div&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-5558422e14755b5dc2ce0eb0f2ae6ec7_720w.jpg\" alt=\"img\">å†…è”æ ·å¼ç”Ÿæ•ˆ</p>\n<p>2.å†…è”æ ·å¼å†™å‰é¢ï¼Œå¤–è”æ ·å¼å†™åé¢</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>å†…è”å’Œå¤–è”æ ·å¼çš„ä¼˜å…ˆçº§é—®é¢˜<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#div</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&#x27;stylesheet&#x27;</span> <span class=\"attr\">href</span>=<span class=\"string\">&#x27;css/styles.css&#x27;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- å†…è”æ ·å¼ç”Ÿæ•ˆ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;div&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-3350f183180f050442665e45f69971cb_720w.jpg\" alt=\"img\">å¤–è”æ ·å¼ç”Ÿæ•ˆ</p>\n<p>ä¸Šé¢çš„ä¾‹å­è¶³ä»¥è¯´æ˜å†…è”æ ·å¼çš„ä¼˜å…ˆçº§å¹¶ä¸ä¸€å®šæ¯”å¤–è”æ ·å¼é«˜ï¼Œå› ä¸ºcssæ ·å¼æ˜¯å•çº¿ç¨‹ï¼Œä¾æ¬¡ä»ä¸Šå‘ä¸‹åŠ è½½çš„ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº†*<strong>å†…è”æ ·å¼å’Œå¤–è”æ ·å¼çš„ä¼˜å…ˆçº§å’ŒåŠ è½½é¡ºåºæœ‰å…³*</strong>ã€‚</p>\n<p>æ€»ç»“ä¸€ä¸‹ï¼š**<em>!important &gt; è¡Œå†…æ ·å¼ &gt; å†…è”æ ·å¼ and å¤–è”æ ·å¼**</em></p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-bb8fc596d248f2c30bae77b565fded84_720w.jpg\" alt=\"img\">æ ·å¼ä¼˜å…ˆçº§</p>\n<p><strong>æ ·å¼åº”ç”¨äºéç›®æ ‡æ ‡ç­¾æ—¶</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>æ ·å¼åº”ç”¨äºéç›®æ ‡æ ‡ç­¾æ—¶<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-tag\">div</span> <span class=\"selector-tag\">p</span>&#123;<span class=\"attribute\">color</span>: red&#125;;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#box</span>&#123;<span class=\"attribute\">color</span>: blue&#125;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- é€‰ä¸­éç›®æ ‡å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œç¦»ç›®æ ‡è¶Šè¿‘è€…ä¼˜å…ˆ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>ç¥æ¥ä¹‹ç¬”<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-a2eed077c5ad66f7de820538fb585217_720w.jpg\" alt=\"img\">æ•ˆæœå›¾</p>\n<p><strong>æƒé‡ç›¸ç­‰çš„æƒ…å†µä¸‹</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>æƒé‡ç›¸ç­‰çš„æƒ…å†µä¸‹<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* æƒé‡å€¼ï¼š201 */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#box</span> <span class=\"selector-id\">#box2</span> <span class=\"selector-tag\">p</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: red;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"comment\">/* æƒé‡å€¼ï¼š201,ç¦»ç›®æ ‡æœ€è¿‘ */</span></span></span><br><span class=\"line\"><span class=\"css\">\t\t\t<span class=\"selector-id\">#box</span> <span class=\"selector-id\">#box3</span> <span class=\"selector-tag\">p</span>&#123;</span></span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- åŒç­‰æƒé‡ä¸‹,é è¿‘ç›®æ ‡çš„ä¼˜å…ˆ --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;boxs&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box2&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;boxs2&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t    \t        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;box3&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;boxs3&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t      \t\t        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t    \t        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t \t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-e5bed8244d8296206d76cec0f825dacf_720w.jpg\" alt=\"img\">åŒç­‰æƒé‡ä¸‹,é è¿‘ç›®æ ‡çš„ä¼˜å…ˆ</p>\n<p><strong>æ€»ç»“</strong></p>\n<ol>\n<li>å¸¸ç”¨é€‰æ‹©å™¨æƒé‡ä¼˜å…ˆçº§ï¼š*<strong>!important &gt; id &gt; class &gt; tag*</strong></li>\n<li>!importantå¯ä»¥æå‡æ ·å¼ä¼˜å…ˆçº§ï¼Œä½†ä¸å»ºè®®ä½¿ç”¨ã€‚å¦‚æœ!importantè¢«ç”¨äºä¸€ä¸ªç®€å†™çš„æ ·å¼å±æ€§ï¼Œé‚£ä¹ˆè¿™æ¡ç®€å†™çš„æ ·å¼å±æ€§æ‰€ä»£è¡¨çš„å­å±æ€§éƒ½ä¼šè¢«åº”ç”¨ä¸Š!importantã€‚ ä¾‹å¦‚ï¼š<em>background: blue !important;</em></li>\n<li>å¦‚æœä¸¤æ¡æ ·å¼éƒ½ä½¿ç”¨!importantï¼Œåˆ™æƒé‡å€¼é«˜çš„ä¼˜å…ˆçº§æ›´é«˜</li>\n<li>åœ¨cssæ ·å¼è¡¨ä¸­ï¼ŒåŒä¸€ä¸ªCSSæ ·å¼ä½ å†™äº†ä¸¤æ¬¡ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„</li>\n<li>æ ·å¼æŒ‡å‘åŒä¸€å…ƒç´ ï¼Œæƒé‡è§„åˆ™ç”Ÿæ•ˆï¼Œæƒé‡å¤§çš„è¢«åº”ç”¨</li>\n<li>æ ·å¼æŒ‡å‘åŒä¸€å…ƒç´ ï¼Œæƒé‡è§„åˆ™ç”Ÿæ•ˆï¼Œæƒé‡ç›¸åŒæ—¶ï¼Œå°±è¿‘åŸåˆ™ç”Ÿæ•ˆï¼Œåé¢å®šä¹‰çš„è¢«åº”ç”¨</li>\n<li>æ ·å¼ä¸æŒ‡å‘åŒä¸€å…ƒç´ æ—¶ï¼Œæƒé‡è§„åˆ™å¤±æ•ˆï¼Œå°±è¿‘åŸåˆ™ç”Ÿæ•ˆï¼Œç¦»ç›®æ ‡å…ƒç´ æœ€è¿‘çš„æ ·å¼è¢«åº”ç”¨</li>\n</ol>\n<h1 id=\"7-åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€\"><a href=\"#7-åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€\" class=\"headerlink\" title=\"7.åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€\"></a>7.åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€</h1><h2 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>å¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/11/16a0c9554c172710?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<h2 id=\"å­—é¢æ„æ€\"><a href=\"#å­—é¢æ„æ€\" class=\"headerlink\" title=\"å­—é¢æ„æ€\"></a>å­—é¢æ„æ€</h2><p>åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€ä»å­—é¢æ„æ€æ¥çœ‹æ˜¯è¿™æ ·çš„ï¼š</p>\n<blockquote>\n<p>ä¸€ä¸ªåƒåœ£æ¯æˆ–è€…åƒå±•ç¿…çš„ç¦½ç±»è¿™æ ·çš„å¸ƒå±€</p>\n</blockquote>\n<p><strong>é€šä¿—çš„æ¥è¯´å°±æ˜¯å·¦å³ä¸¤æ å›ºå®šå®½åº¦ï¼Œä¸­é—´éƒ¨åˆ†è‡ªé€‚åº”çš„ä¸‰æ å¸ƒå±€ã€‚</strong></p>\n<h3 id=\"ä¸¤è€…æœ¬è´¨\"><a href=\"#ä¸¤è€…æœ¬è´¨\" class=\"headerlink\" title=\"ä¸¤è€…æœ¬è´¨\"></a>ä¸¤è€…æœ¬è´¨</h3><p><img data-src=\"https://user-gold-cdn.xitu.io/2019/9/5/16cfefeb90d9ec0b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<h3 id=\"åœ£æ¯å¸ƒå±€\"><a href=\"#åœ£æ¯å¸ƒå±€\" class=\"headerlink\" title=\"åœ£æ¯å¸ƒå±€\"></a>åœ£æ¯å¸ƒå±€</h3><ol>\n<li>é¦–å…ˆæŠŠleftã€middleã€rightéƒ½æ”¾å‡ºæ¥</li>\n<li>ç»™å®ƒä»¬ä¸‰ä¸ªè®¾ç½®ä¸Šfloat: left, è„±ç¦»æ–‡æ¡£æµï¼›</li>\n<li>ä¸€å®šè®°å¾—ç»™containerè®¾ç½®ä¸Šoverflow: hidden; å¯ä»¥å½¢æˆBFCæ’‘å¼€æ–‡æ¡£</li>\n<li>leftã€rightè®¾ç½®ä¸Šå„è‡ªçš„å®½åº¦</li>\n<li>middleè®¾ç½®width: 100%;</li>\n</ol>\n<p><strong>æ¥ä¸‹æ¥æ¯”è¾ƒé‡è¦äº†ï¼š</strong></p>\n<ol>\n<li>ç»™leftã€middleã€rightè®¾ç½®position: relative;</li>\n<li>leftè®¾ç½® left: -leftWidth, rightè®¾ç½® right: -rightWidth;</li>\n<li>containerè®¾ç½®padding: 0, rightWidth, 0, leftWidth;</li>\n</ol>\n<hr>\n<p>æˆ‘æ³¨æ„åˆ°åœ£æ¯å¸ƒå±€çš„leftã€middleã€rightéƒ½æœ‰position: relative;</p>\n<p>è®¾:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.left width:200px</span><br><span class=\"line\">.right width:220px</span><br></pre></td></tr></table></figure>\n\n<p>é‚£ä¹ˆä¸‹é¢çš„è¿™äº›å±æ€§ä¸ºä»€ä¹ˆè¦å­˜åœ¨ï¼Ÿ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.containerä¸Šé¢çš„paddind</span><br><span class=\"line\">.left çš„left: -200px;</span><br><span class=\"line\">.right çš„right: -220px;</span><br></pre></td></tr></table></figure>\n\n<p><strong>å› ä¸ºä¸è¿™æ ·è®¾ç½®  ä¼šé®æŒ¡middleçš„å†…å®¹</strong></p>\n<p>å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ä¸‹</p>\n<hr>\n<p>åœ£æ¯å¸ƒå±€ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;zh&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">  &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class=\"line\">  &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;ie&#x3D;edge&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;åœ£æ¯å¸ƒå±€&lt;&#x2F;title&gt;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">      margin: 0;</span><br><span class=\"line\">      padding: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .header,</span><br><span class=\"line\">    .footer &#123;</span><br><span class=\"line\">      height: 100px;</span><br><span class=\"line\">      line-height: 100px;</span><br><span class=\"line\">      background-color: green;</span><br><span class=\"line\">      text-align: center;</span><br><span class=\"line\">      font-size: 30px;</span><br><span class=\"line\">      font-weight: bolder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .footer &#123;</span><br><span class=\"line\">      background-color: goldenrod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .container &#123;</span><br><span class=\"line\">      padding: 0 220px 0 200px;</span><br><span class=\"line\">      overflow: hidden;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .left,</span><br><span class=\"line\">    .middle,</span><br><span class=\"line\">    .right &#123;</span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">      float: left;</span><br><span class=\"line\">      min-height: 130px;</span><br><span class=\"line\">      word-break: break-all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .left &#123;</span><br><span class=\"line\">      margin-left: -100%;</span><br><span class=\"line\">      left: -200px;</span><br><span class=\"line\">      width: 200px;</span><br><span class=\"line\">      background-color: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .right &#123;</span><br><span class=\"line\">      margin-left: -220px;</span><br><span class=\"line\">      right: -220px;</span><br><span class=\"line\">      width: 220px;</span><br><span class=\"line\">      background-color: green;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .middle &#123;</span><br><span class=\"line\">      width: 100%;</span><br><span class=\"line\">      background-color: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;header&quot;&gt;header&lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;middle&quot;&gt;</span><br><span class=\"line\">      &lt;h4&gt;middle&lt;&#x2F;h4&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        middlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;left&quot;&gt;</span><br><span class=\"line\">      &lt;h4&gt;left&lt;&#x2F;h4&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;right&quot;&gt;</span><br><span class=\"line\">      &lt;h4&gt;right&lt;&#x2F;h4&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        rightrightrightrightrightrightrightrightrightright</span><br><span class=\"line\">        rightrightrightrightrightrightrightrightrightright</span><br><span class=\"line\">        rightrightrightrightrightrightright</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;footer&quot;&gt;footer&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"åŒé£ç¿¼å¸ƒå±€\"><a href=\"#åŒé£ç¿¼å¸ƒå±€\" class=\"headerlink\" title=\"åŒé£ç¿¼å¸ƒå±€\"></a>åŒé£ç¿¼å¸ƒå±€</h3><p>åŒé£ç¿¼å¸ƒå±€å’Œåœ£æ¯å¸ƒå±€å¾ˆç±»ä¼¼ï¼Œä¸è¿‡æ˜¯åœ¨middleçš„divé‡Œåˆæ’å…¥ä¸€ä¸ªdivï¼Œé€šè¿‡è°ƒæ•´å†…éƒ¨divçš„marginå€¼ï¼Œå®ç°ä¸­é—´æ è‡ªé€‚åº”ï¼Œå†…å®¹å†™åˆ°å†…éƒ¨divä¸­ã€‚</p>\n<p>è¿™æ ·å¯ä»¥å…ˆåšå¥½ä¸»ä½“éƒ¨åˆ†ï¼Œç„¶åå†å°†é™„å±éƒ¨åˆ†æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼</p>\n<ol>\n<li>é¦–å…ˆæŠŠleftã€middleã€rightéƒ½æ”¾å‡ºæ¥, middleä¸­å¢åŠ inner</li>\n<li>ç»™å®ƒä»¬ä¸‰ä¸ªè®¾ç½®ä¸Šfloat: left, è„±ç¦»æ–‡æ¡£æµï¼›</li>\n<li>ä¸€å®šè®°å¾—ç»™containerè®¾ç½®ä¸Šoverflow: hidden; å¯ä»¥å½¢æˆBFCæ’‘å¼€æ–‡æ¡£</li>\n<li>leftã€rightè®¾ç½®ä¸Šå„è‡ªçš„å®½åº¦</li>\n<li>middleè®¾ç½®width: 100%;</li>\n</ol>\n<p><strong>æ¥ä¸‹æ¥ä¸åœ£æ¯å¸ƒå±€ä¸ä¸€æ ·çš„åœ°æ–¹ï¼š</strong></p>\n<ol>\n<li>leftè®¾ç½® margin-left: -100%, rightè®¾ç½® right: -rightWidth;</li>\n<li>containerè®¾ç½®padding: 0, rightWidth, 0, leftWidth;</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;zh&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">  &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class=\"line\">  &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;ie&#x3D;edge&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;åŒé£ç¿¼å¸ƒå±€&lt;&#x2F;title&gt;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">      margin: 0;</span><br><span class=\"line\">      padding: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .header,</span><br><span class=\"line\">    .footer &#123;</span><br><span class=\"line\">      height: 100px;</span><br><span class=\"line\">      line-height: 100px;</span><br><span class=\"line\">      background-color: green;</span><br><span class=\"line\">      text-align: center;</span><br><span class=\"line\">      font-size: 30px;</span><br><span class=\"line\">      font-weight: bolder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .footer &#123;</span><br><span class=\"line\">      background-color: goldenrod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .container &#123;</span><br><span class=\"line\">      overflow: hidden;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .left,</span><br><span class=\"line\">    .middle,</span><br><span class=\"line\">    .right &#123;</span><br><span class=\"line\">      float: left;</span><br><span class=\"line\">      min-height: 130px;</span><br><span class=\"line\">      word-break: break-all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .left &#123;</span><br><span class=\"line\">      margin-left: -100%;</span><br><span class=\"line\">      width: 200px;</span><br><span class=\"line\">      background-color: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .right &#123;</span><br><span class=\"line\">      margin-left: -220px;</span><br><span class=\"line\">      width: 220px;</span><br><span class=\"line\">      background-color: green;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .middle &#123;</span><br><span class=\"line\">      width: 100%;</span><br><span class=\"line\">      height: 100%;</span><br><span class=\"line\">      background-color: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .inner &#123;</span><br><span class=\"line\">      margin: 0 220px 0 200px;</span><br><span class=\"line\">      min-height: 130px;</span><br><span class=\"line\">      background: blue;</span><br><span class=\"line\">      word-break: break-all;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;header&quot;&gt;header&lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;middle&quot;&gt;</span><br><span class=\"line\">      &lt;div class&#x3D;&quot;inner&quot;&gt;</span><br><span class=\"line\">        &lt;h4&gt;middle&lt;&#x2F;h4&gt;</span><br><span class=\"line\">        &lt;p&gt;</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">          middlemiddlemiddlemiddlemiddle</span><br><span class=\"line\">        &lt;&#x2F;p&gt;</span><br><span class=\"line\">      &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;left&quot;&gt;</span><br><span class=\"line\">      &lt;h4&gt;left&lt;&#x2F;h4&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">        leftleftleftleftleftleftleftleftleftleftleftleft</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;right&quot;&gt;</span><br><span class=\"line\">      &lt;h4&gt;right&lt;&#x2F;h4&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        rightrightrightrightrightrightrightrightrightright</span><br><span class=\"line\">        rightrightrightrightrightrightrightrightrightright</span><br><span class=\"line\">        rightrightrightrightrightrightright</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;footer&quot;&gt;footer&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>åœ£æ¯å¸ƒå±€åœ¨DOMç»“æ„ä¸Šæ˜¾å¾—æ›´åŠ ç›´è§‚å’Œè‡ªç„¶ï¼›</p>\n<p>åŒé£ç¿¼å¸ƒå±€çœå»äº†å¾ˆå¤šcssï¼Œè€Œä¸”ç”±äºä¸ç”¨ä½¿ç”¨å®šä½ï¼Œå¯ä»¥è·å¾—æ¯”åœ£æ¯å¸ƒå±€æ›´å°æœ€å°å®½åº¦ï¼›</p>\n<p>è¯´åˆ°è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹  ç”±äºåŒé£ç¿¼å¸ƒå±€ä¼šä¸€ç›´éšç€æµè§ˆå™¨å¯è§†åŒºåŸŸå®½åº¦å‡å°ä»è€Œä¸æ–­æŒ¤å‹ä¸­é—´éƒ¨åˆ†å®½åº¦ã€‚</p>\n<p>æ‰€ä»¥éœ€è¦è®¾ç½®ç»™é¡µé¢ä¸€ä¸ªmin-width &gt; LeftWidth + RightWidthï¼›</p>\n<hr>\n<p>è¿˜æœ‰ä¸€ä»¶äº‹å°±æ˜¯ä»–ä»¬åœ¨å•ç‹¬éƒ¨åˆ†å†…å®¹æ‰©å……çš„æ—¶å€™ï¼Œç«¥é‹ä»¬å¯èƒ½å‘ç°äº† åº•éƒ¨ä¼šå‚å·®ä¸é½ã€‚</p>\n<p>åœ¨æˆ‘çš„è€å¸ˆé‚£é‡ŒçŸ¥é“äº†æœ€ç®€å•çš„è§£å†³åŠæ³• / ç¬‘å“­</p>\n<blockquote>\n<p>ç»™leftã€middleã€rightè®¾ç½®ä¸Š padding-bottom: 9999px; margin-bottom: -9999px;</p>\n</blockquote>\n<p>å°±è®©ä»–å˜å¾—æ— é™é«˜ï¼Œä½†æ˜¯åˆç»™ä»–é€å›å»äº†ã€‚çœŸçš„æ˜¯è®©æˆ‘è„‘æ´å¤§å¼€ï¼ï¼ï¼</p>\n<h1 id=\"8-CSS3æ–°ç‰¹æ€§\"><a href=\"#8-CSS3æ–°ç‰¹æ€§\" class=\"headerlink\" title=\"8.CSS3æ–°ç‰¹æ€§\"></a>8.CSS3æ–°ç‰¹æ€§</h1><h2 id=\"1-å‰è¨€\"><a href=\"#1-å‰è¨€\" class=\"headerlink\" title=\"1.å‰è¨€\"></a>1.å‰è¨€</h2><p>css3è¿™ä¸ªç›¸ä¿¡å¤§å®¶ä¸é™Œç”Ÿäº†ï¼Œæ˜¯ä¸ªéå¸¸æœ‰è¶£ï¼Œç¥å¥‡çš„ä¸œè¥¿ï¼æœ‰äº†css3ï¼Œjséƒ½å¯ä»¥å°‘å†™å¾ˆå¤šï¼æˆ‘ä¹‹å‰ä¹Ÿå†™è¿‡å…³äºcss3çš„æ–‡ç« ï¼Œä¹Ÿå°è£…è¿‡css3çš„ä¸€äº›å°åŠ¨ç”»ã€‚ä¸ªäººè§‰å¾—css3ä¸éš¾ï¼Œä½†æ˜¯å¾ˆéš¾ç”¨å¾—å¥½ï¼Œç”¨å¾—é¡ºæ‰‹ï¼Œæœ€è¿‘æˆ‘ä¹Ÿåœ¨è¿‡ä¸€écss3çš„ä¸€äº›æ–°ç‰¹æ€§ï¼ˆä¸æ˜¯å…¨éƒ¨ï¼Œæ˜¯æˆ‘åœ¨å·¥ä½œä¸Šå¸¸ç”¨çš„ï¼Œæˆ–è€…è§‰å¾—æœ‰ç”¨çš„ï¼‰ï¼Œä»¥åŠä¸€äº›å®ä¾‹ï¼Œå°±å†™äº†è¿™ä¸€ç¯‡æ€»ç»“ï¼å¸Œæœ›ï¼Œè¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°å¤§å®¶è®¤è¯†css3ã€‚å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®©å¤§å®¶èƒ½äº†è§£css3çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œä»¥åŠåŸºç¡€çš„ç”¨æ³•ï¼Œæ„Ÿè§‰css3çš„é­…åŠ›ï¼å¦‚æœæƒ³è¦ç”¨å¥½css3ï¼Œè¿™ä¸ªå¾—é å¤§å®¶ç»§ç»­åŠªåŠ›å­¦ä¹ ï¼Œå¯»æ‰¾ä¸€äº›è®²å¾—æ›´æ·±å…¥çš„æ–‡ç« æˆ–è€…ä¹¦ç±äº†ï¼å¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆå…¶ä»–ç‰¹æ€§æ¨èçš„ï¼Œæ¬¢è¿è¡¥å……ï¼å¤§å®¶ä¸€èµ·å­¦ä¹ ï¼Œè¿›æ­¥ï¼</p>\n<blockquote>\n<p>çœ‹è¿™ç¯‡æ–‡ç« ï¼Œä»£ç å¯ä»¥ä¸ç”¨çœ‹å¾—è¿‡äºä»”ç»†ï¼è¿™é‡Œä¸»è¦æ˜¯æƒ³è®©å¤§å®¶äº†è§£css3çš„æ–°ç‰¹æ€§ï¼ä»£ç ä¹Ÿæ˜¯å¾ˆåŸºç¡€çš„ç”¨æ³•ã€‚æˆ‘ç»™å‡ºä»£ç ä¸»è¦æ˜¯è®©å¤§å®¶åœ¨æµè§ˆå™¨è¿è¡Œä¸€ä¸‹ï¼Œè®©å¤§å®¶å‚è€ƒå’Œè°ƒè¯•ã€‚ä¸è¦åªçœ‹ä»£ç ï¼Œåªçœ‹ä»£ç çš„è¯ï¼Œä¸ä¼šçŸ¥é“å“ªä¸ªä»£ç æœ‰ä»€ä¹ˆä½œç”¨çš„ï¼Œå»ºè®®è¾¹çœ‹æ•ˆæœè¾¹çœ‹ä»£ç ã€‚</p>\n</blockquote>\n<h2 id=\"2-è¿‡æ¸¡\"><a href=\"#2-è¿‡æ¸¡\" class=\"headerlink\" title=\"2.è¿‡æ¸¡\"></a>2.è¿‡æ¸¡</h2><p>è¿‡æ¸¡ï¼Œæ˜¯æˆ‘åœ¨é¡¹ç›®é‡Œé¢ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªç‰¹æ€§äº†ï¼ä¹Ÿç›¸ä¿¡æ˜¯å¾ˆå¤šäººç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªä¾‹å­ï¼æˆ‘å¹³å¸¸ä½¿ç”¨å°±æ˜¯æƒ³è®©ä¸€äº›äº¤äº’æ•ˆæœï¼ˆä¸»è¦æ˜¯hoveråŠ¨ç”»ï¼‰ï¼Œå˜å¾—ç”ŸåŠ¨ä¸€äº›ï¼Œä¸ä¼šæ˜¾å¾—é‚£ä¹ˆç”Ÿç¡¬ï¼å¥½äº†ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡ï¼</p>\n<p>å¼•ç”¨èœé¸Ÿæ•™ç¨‹çš„è¯´æ³•ï¼šCSS3 è¿‡æ¸¡æ˜¯å…ƒç´ ä»ä¸€ç§æ ·å¼é€æ¸æ”¹å˜ä¸ºå¦ä¸€ç§çš„æ•ˆæœã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¿…é¡»è§„å®šä¸¤é¡¹å†…å®¹ï¼šæŒ‡å®šè¦æ·»åŠ æ•ˆæœçš„CSSå±æ€§æŒ‡å®šæ•ˆæœçš„æŒç»­æ—¶é—´ã€‚</p>\n<h3 id=\"2-1è¯­æ³•\"><a href=\"#2-1è¯­æ³•\" class=\"headerlink\" title=\"2-1è¯­æ³•\"></a>2-1è¯­æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">transitionï¼š CSSå±æ€§ï¼ŒèŠ±è´¹æ—¶é—´ï¼Œæ•ˆæœæ›²çº¿(é»˜è®¤ease)ï¼Œå»¶è¿Ÿæ—¶é—´(é»˜è®¤0)</span><br></pre></td></tr></table></figure>\n\n<p>ä¾‹å­1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*å®½åº¦ä»åŸå§‹å€¼åˆ°åˆ¶å®šå€¼çš„ä¸€ä¸ªè¿‡æ¸¡ï¼Œè¿åŠ¨æ›²çº¿ease,è¿åŠ¨æ—¶é—´0.5ç§’ï¼Œ0.2ç§’åæ‰§è¡Œè¿‡æ¸¡*&#x2F;</span><br><span class=\"line\">transitionï¼šwidth,.5s,ease,.2s</span><br></pre></td></tr></table></figure>\n\n<p>ä¾‹å­2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*æ‰€æœ‰å±æ€§ä»åŸå§‹å€¼åˆ°åˆ¶å®šå€¼çš„ä¸€ä¸ªè¿‡æ¸¡ï¼Œè¿åŠ¨æ›²çº¿ease,è¿åŠ¨æ—¶é—´0.5ç§’*&#x2F;</span><br><span class=\"line\">transitionï¼šall,.5s</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä¾‹å­æ˜¯ç®€å†™æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥åˆ†å¼€å†™å„ä¸ªå±æ€§ï¼ˆè¿™ä¸ªåœ¨ä¸‹é¢å°±ä¸å†é‡å¤äº†ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">transition-property: width;</span><br><span class=\"line\">transition-duration: 1s;</span><br><span class=\"line\">transition-timing-function: linear;</span><br><span class=\"line\">transition-delay: 2s;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2å®ä¾‹-hoveræ•ˆæœ\"><a href=\"#2-2å®ä¾‹-hoveræ•ˆæœ\" class=\"headerlink\" title=\"2-2å®ä¾‹-hoveræ•ˆæœ\"></a>2-2å®ä¾‹-hoveræ•ˆæœ</h3><p><img data-src=\"https://segmentfault.com/img/bVTbJs?w=467&h=139\" alt=\"clipboard.png\"></p>\n<p>ä¸Šé¢ä¸¤ä¸ªæŒ‰é’®ï¼Œç¬¬ä¸€ä¸ªä½¿ç”¨äº†è¿‡æ¸¡ï¼Œç¬¬äºŒä¸ªæ²¡æœ‰ä½¿ç”¨è¿‡æ¸¡ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°å½“ä¸­çš„åŒºåˆ«ï¼Œç”¨äº†è¿‡æ¸¡ä¹‹åæ˜¯ä¸æ˜¯æ²¡æœ‰é‚£ä¹ˆç”Ÿç¡¬ï¼Œæœ‰ä¸€ä¸ªå˜åŒ–çš„è¿‡ç¨‹ï¼Œæ˜¾å¾—æ¯”è¾ƒç”ŸåŠ¨ã€‚<br>å½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªæœ€ç®€å•çš„è¿‡æ¸¡ä¾‹å­ï¼Œä¸¤ä¸ªæŒ‰é’®çš„æ ·å¼ä»£ç ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼Œç¬¬ä¸€ä¸ªæŒ‰é’®åŠ äº†è¿‡æ¸¡ä»£ç <code>transition: all .5s;</code></p>\n<h3 id=\"2-3å®ä¾‹-ä¸‹æ‹‰èœå•\"><a href=\"#2-3å®ä¾‹-ä¸‹æ‹‰èœå•\" class=\"headerlink\" title=\"2-3å®ä¾‹-ä¸‹æ‹‰èœå•\"></a>2-3å®ä¾‹-ä¸‹æ‹‰èœå•</h3><p><img data-src=\"https://segmentfault.com/img/bVTbLy?w=592&h=570\" alt=\"clipboard.png\"></p>\n<p>ä¸Šé¢ä¸¤ä¸ªèœå•ï¼Œç¬¬ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨è¿‡æ¸¡ï¼Œç¬¬äºŒä¸ªä½¿ç”¨è¿‡æ¸¡ï¼Œå¤§å®¶æ˜æ˜¾çœ‹åˆ°åŒºåˆ«ï¼Œä½¿ç”¨äº†è¿‡æ¸¡çœ‹èµ·æ¥ä¹Ÿæ˜¯æ¯”è¾ƒèˆ’æœï¼ä»£ç åŒºåˆ«å°±æ˜¯æœ‰è¿‡æ¸¡çš„ulçš„ä¸Šçº§å…ƒç´ (ç¥–å…ˆå…ƒç´ )æœ‰ä¸€ä¸ªç±»åï¼ˆul-transitionï¼‰ã€‚åˆ©ç”¨è¿™ä¸ªç±»åï¼Œè®¾ç½®ulçš„è¿‡æ¸¡<code>.ul-transition ul&#123;transform-origin: 0 0;transition: all .5s;&#125;</code></p>\n<p>å¯èƒ½å¤§å®¶ä¸çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆï¼æˆ‘è´´ä¸‹ä»£ç å§</p>\n<p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div class&#x3D;&quot;demo-hover demo-ul t_c&quot;&gt;</span><br><span class=\"line\">    &lt;ul class&#x3D;&quot;fllil&quot;&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;html&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;div&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;h1&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;js&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;string&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;array&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;object&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;number&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;css3&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;transition&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;animation&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;æ¡†æ¶&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;vue&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;react&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">    &lt;&#x2F;ul&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;clear&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;demo-hover demo-ul ul-transition t_c&quot;&gt;</span><br><span class=\"line\">    &lt;ul class&#x3D;&quot;fllil&quot;&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;html&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;div&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;h1&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;js&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;string&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;array&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;object&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;number&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;css3&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;transition&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;animation&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li&gt;</span><br><span class=\"line\">            &lt;a href&#x3D;&quot;javascript:;&quot;&gt;æ¡†æ¶&lt;&#x2F;a&gt;</span><br><span class=\"line\">            &lt;ul&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;vue&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">                &lt;li&gt;&lt;a href&#x3D;&quot;#&quot;&gt;react&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">            &lt;&#x2F;ul&gt;</span><br><span class=\"line\">        &lt;&#x2F;li&gt;</span><br><span class=\"line\">    &lt;&#x2F;ul&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;clear&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.demo-ul&#123;margin-bottom: 300px;&#125;</span><br><span class=\"line\">    .demo-ul li&#123;</span><br><span class=\"line\">        padding: 0 10px;</span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        background: #f90;</span><br><span class=\"line\">        position: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .demo-ul li a&#123;</span><br><span class=\"line\">        display: block;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\">        line-height: 40px;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .demo-ul li ul&#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        width: 100%;</span><br><span class=\"line\">        top: 40px;</span><br><span class=\"line\">        left: 0;</span><br><span class=\"line\">        transform: scaleY(0);</span><br><span class=\"line\">        overflow: hidden;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .ul-transition ul&#123;</span><br><span class=\"line\">        transform-origin: 0 0;</span><br><span class=\"line\">        transition: all .5s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .demo-ul li:hover ul&#123;</span><br><span class=\"line\">        transform: scaleY(1);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .demo-ul li ul li&#123;</span><br><span class=\"line\">        float: none;</span><br><span class=\"line\">        background: #0099ff;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä¸¤ä¸ªå¯ä»¥è¯´æ˜¯è¿‡æ¸¡å¾ˆåŸºç¡€çš„ç”¨æ³•ï¼Œè¿‡æ¸¡ç”¨æ³•çµæ´»ï¼ŒåŠŸèƒ½ä¹Ÿå¼ºå¤§ï¼Œç»“åˆjsï¼Œå¯ä»¥å¾ˆè½»æ¾å®ç°å„ç§æ•ˆæœï¼ˆç„¦ç‚¹å›¾ï¼Œæ‰‹é£ç´ï¼‰ç­‰ï¼Œä»¥åŠå¾ˆå¤šæ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚è¿™ä¸ªé å¤§å®¶è¦å»æŒ–æ˜ï¼</p>\n<h2 id=\"3-åŠ¨ç”»\"><a href=\"#3-åŠ¨ç”»\" class=\"headerlink\" title=\"3.åŠ¨ç”»\"></a>3.åŠ¨ç”»</h2><p>åŠ¨ç”»è¿™ä¸ªå¹³å¸¸ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œä¸»è¦æ˜¯åšä¸€ä¸ªé¢„è®¾çš„åŠ¨ç”»ã€‚å’Œä¸€äº›é¡µé¢äº¤äº’çš„åŠ¨ç”»æ•ˆæœï¼Œç»“æœå’Œè¿‡æ¸¡åº”è¯¥ä¸€æ ·ï¼Œè®©é¡µé¢ä¸ä¼šé‚£ä¹ˆç”Ÿç¡¬ï¼</p>\n<h3 id=\"3-1-è¯­æ³•\"><a href=\"#3-1-è¯­æ³•\" class=\"headerlink\" title=\"3-1.è¯­æ³•\"></a>3-1.è¯­æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">animationï¼šåŠ¨ç”»åç§°ï¼Œä¸€ä¸ªå‘¨æœŸèŠ±è´¹æ—¶é—´ï¼Œè¿åŠ¨æ›²çº¿ï¼ˆé»˜è®¤easeï¼‰ï¼ŒåŠ¨ç”»å»¶è¿Ÿï¼ˆé»˜è®¤0ï¼‰ï¼Œæ’­æ”¾æ¬¡æ•°ï¼ˆé»˜è®¤1ï¼‰ï¼Œæ˜¯å¦åå‘æ’­æ”¾åŠ¨ç”»ï¼ˆé»˜è®¤normalï¼‰ï¼Œæ˜¯å¦æš‚åœåŠ¨ç”»ï¼ˆé»˜è®¤runningï¼‰</span><br></pre></td></tr></table></figure>\n\n<p>ä¾‹å­1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*æ‰§è¡Œä¸€æ¬¡logo2-lineåŠ¨ç”»ï¼Œè¿åŠ¨æ—¶é—´2ç§’ï¼Œè¿åŠ¨æ›²çº¿ä¸º linear*&#x2F;</span><br><span class=\"line\">animation: logo2-line 2s linear;</span><br></pre></td></tr></table></figure>\n\n<p>ä¾‹å­2</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*2ç§’åå¼€å§‹æ‰§è¡Œä¸€æ¬¡logo2-lineåŠ¨ç”»ï¼Œè¿åŠ¨æ—¶é—´2ç§’ï¼Œè¿åŠ¨æ›²çº¿ä¸º linear*&#x2F;</span><br><span class=\"line\">animation: logo2-line 2s linear 2s;</span><br></pre></td></tr></table></figure>\n\n<p>ä¾‹å­3</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;*æ— é™æ‰§è¡Œlogo2-lineåŠ¨ç”»ï¼Œæ¯æ¬¡è¿åŠ¨æ—¶é—´2ç§’ï¼Œè¿åŠ¨æ›²çº¿ä¸º linearï¼Œå¹¶ä¸”æ‰§è¡Œåå‘åŠ¨ç”»*&#x2F;</span><br><span class=\"line\">animation: logo2-line 2s linear alternate infinite;</span><br></pre></td></tr></table></figure>\n\n<p>è¿˜æœ‰ä¸€ä¸ªé‡è¦å±æ€§</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">animation-fill-mode : none | forwards | backwards | both;</span><br><span class=\"line\">&#x2F;*noneï¼šä¸æ”¹å˜é»˜è®¤è¡Œä¸ºã€‚    </span><br><span class=\"line\">forwards ï¼šå½“åŠ¨ç”»å®Œæˆåï¼Œä¿æŒæœ€åä¸€ä¸ªå±æ€§å€¼ï¼ˆåœ¨æœ€åä¸€ä¸ªå…³é”®å¸§ä¸­å®šä¹‰ï¼‰ã€‚    </span><br><span class=\"line\">backwardsï¼šåœ¨ animation-delay æ‰€æŒ‡å®šçš„ä¸€æ®µæ—¶é—´å†…ï¼Œåœ¨åŠ¨ç”»æ˜¾ç¤ºä¹‹å‰ï¼Œåº”ç”¨å¼€å§‹å±æ€§å€¼ï¼ˆåœ¨ç¬¬ä¸€ä¸ªå…³é”®å¸§ä¸­å®šä¹‰ï¼‰ã€‚ </span><br><span class=\"line\">bothï¼šå‘å‰å’Œå‘åå¡«å……æ¨¡å¼éƒ½è¢«åº”ç”¨ã€‚  *&#x2F;      </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-logoå±•ç¤ºåŠ¨ç”»\"><a href=\"#3-2-logoå±•ç¤ºåŠ¨ç”»\" class=\"headerlink\" title=\"3-2.logoå±•ç¤ºåŠ¨ç”»\"></a>3-2.logoå±•ç¤ºåŠ¨ç”»</h3><p><img data-src=\"https://segmentfault.com/img/bVTdn3?w=776&h=220\" alt=\"clipboard.png\"></p>\n<p>è¿™ä¸ªæ˜¯æˆ‘ç”¨å…¬å¸logoå†™çš„åŠ¨ç”»ï¼Œæ²¡é‚£ä¹ˆç²¾ç»†</p>\n<p>ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Title&lt;&#x2F;title&gt;</span><br><span class=\"line\">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;reset.css&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">.logo-box&#123;</span><br><span class=\"line\">    width: 600px;</span><br><span class=\"line\">    margin: 100px auto;</span><br><span class=\"line\">    font-size: 0;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box div&#123;</span><br><span class=\"line\">    display: inline-block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box .logo-text&#123;</span><br><span class=\"line\">    margin-left: 10px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box .logo1&#123;</span><br><span class=\"line\">    animation: logo1 1s ease-in 2s;</span><br><span class=\"line\">    animation-fill-mode:backwards;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box .logo-text&#123;</span><br><span class=\"line\">    animation: logoText 1s ease-in 3s;</span><br><span class=\"line\">    animation-fill-mode:backwards;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box .logo2&#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    top: 20px;</span><br><span class=\"line\">    left: 20px;</span><br><span class=\"line\">    animation: logo2-middle 2s ease-in;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.logo-box .logo2 img&#123;</span><br><span class=\"line\">    animation: logo2-line 2s linear;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@keyframes logo1 &#123;</span><br><span class=\"line\">    0%&#123;</span><br><span class=\"line\">        transform:rotate(180deg);</span><br><span class=\"line\">        opacity: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    100%&#123;</span><br><span class=\"line\">        transform:rotate(0deg);</span><br><span class=\"line\">        opacity: 1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@keyframes logoText &#123;</span><br><span class=\"line\">    0%&#123;</span><br><span class=\"line\">        transform:translateX(30px);</span><br><span class=\"line\">        opacity: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    100%&#123;</span><br><span class=\"line\">        transform:translateX(0);</span><br><span class=\"line\">        opacity: 1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@keyframes logo2-line &#123;</span><br><span class=\"line\">    0% &#123; transform: translateX(200px)&#125;</span><br><span class=\"line\">    25% &#123; transform: translateX(150px)&#125;</span><br><span class=\"line\">    50% &#123; transform: translateX(100px)&#125;</span><br><span class=\"line\">    75% &#123; transform: translateX(50px)&#125;</span><br><span class=\"line\">    100% &#123; transform: translateX(0); &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">@keyframes logo2-middle &#123;</span><br><span class=\"line\">    0% &#123; transform: translateY(0);     &#125;</span><br><span class=\"line\">    25% &#123; transform: translateY(-100px);     &#125;</span><br><span class=\"line\">    50% &#123; transform: translateY(0);     &#125;</span><br><span class=\"line\">    75% &#123; transform: translateY(-50px);     &#125;</span><br><span class=\"line\">    100% &#123; transform: translateY(0); &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;logo-box&quot;&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;logo1&quot;&gt;&lt;img src&#x3D;&quot;logo1.jpg&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;logo2&quot;&gt;&lt;img src&#x3D;&quot;logo2.jpg&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;logo-text&quot;&gt;&lt;img src&#x3D;&quot;logo3.jpg&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div class&#x3D;&quot;wraper&quot;&gt;&lt;div class&#x3D;&quot;item&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸‹é¢è®©å¤§å®¶çœ‹ä¸€ä¸ªä¸“ä¸šçº§åˆ«çš„</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdpk?w=734&h=214\" alt=\"clipboard.png\"></p>\n<p>ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Title&lt;&#x2F;title&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    body &#123;</span><br><span class=\"line\">        font-family: Arial,&quot;Helvetica Neue&quot;,Helvetica,sans-serif;</span><br><span class=\"line\">        overflow: hidden;</span><br><span class=\"line\">        background: #fff;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .center &#123;</span><br><span class=\"line\">        margin: 80px auto;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .so &#123;</span><br><span class=\"line\">        display: block;</span><br><span class=\"line\">        width: 500px;</span><br><span class=\"line\">        height: 156px;</span><br><span class=\"line\">        background: #ffffff;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner &#123;</span><br><span class=\"line\">        width: 500px;</span><br><span class=\"line\">        height: 156px;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner * &#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        animation-iteration-count: infinite;</span><br><span class=\"line\">        animation-duration: 3.5s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .name &#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        font-size: 54px;</span><br><span class=\"line\">        left: 130px;</span><br><span class=\"line\">        top: 95px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .name .b &#123;</span><br><span class=\"line\">        font-weight: bold;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack-box &#123;</span><br><span class=\"line\">        top: 100px;</span><br><span class=\"line\">        width: 115px;</span><br><span class=\"line\">        height: 56px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box &#123;</span><br><span class=\"line\">        width: 115px;</span><br><span class=\"line\">        height: 56px;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box div &#123;</span><br><span class=\"line\">        background: #BCBBBB;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .bottom &#123;</span><br><span class=\"line\">        bottom: 0px;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">        width: 115px;</span><br><span class=\"line\">        height: 12px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .left &#123;</span><br><span class=\"line\">        bottom: 11px;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">        width: 12px;</span><br><span class=\"line\">        height: 34px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .right &#123;</span><br><span class=\"line\">        bottom: 11px;</span><br><span class=\"line\">        left: 103px;</span><br><span class=\"line\">        width: 12px;</span><br><span class=\"line\">        height: 34px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .top &#123;</span><br><span class=\"line\">        top: 0px;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">        width: 0;</span><br><span class=\"line\">        height: 12px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack &#123;</span><br><span class=\"line\">        left: 22px;</span><br><span class=\"line\">        top: 22px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .inner-item &#123;</span><br><span class=\"line\">        background: #F48024;</span><br><span class=\"line\">        width: 71px;</span><br><span class=\"line\">        height: 12px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item &#123;</span><br><span class=\"line\">        transition: transform 0.3s;</span><br><span class=\"line\">        width: 291px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack div:nth-child(1) &#123;</span><br><span class=\"line\">        transform: rotate(0deg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack div:nth-child(2) &#123;</span><br><span class=\"line\">        transform: rotate(12deg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack div:nth-child(3) &#123;</span><br><span class=\"line\">        transform: rotate(24deg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack div:nth-child(4) &#123;</span><br><span class=\"line\">        transform: rotate(36deg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack div:nth-child(5) &#123;</span><br><span class=\"line\">        transform: rotate(48deg);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box &#123;</span><br><span class=\"line\">        animation-name: box;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .top &#123;</span><br><span class=\"line\">        animation-name: box-top;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .left &#123;</span><br><span class=\"line\">        animation-name: box-left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .right &#123;</span><br><span class=\"line\">        animation-name: box-right;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .box .bottom &#123;</span><br><span class=\"line\">        animation-name: box-bottom;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack-box &#123;</span><br><span class=\"line\">        animation-name: stack-box;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack &#123;</span><br><span class=\"line\">        animation-name: stack;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .inner-item &#123;</span><br><span class=\"line\">        animation-name: stack-items;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item:nth-child(1) &#123;</span><br><span class=\"line\">        animation-name: stack-item-1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item:nth-child(2) &#123;</span><br><span class=\"line\">        animation-name: stack-item-2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item:nth-child(3) &#123;</span><br><span class=\"line\">        animation-name: stack-item-3;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item:nth-child(4) &#123;</span><br><span class=\"line\">        animation-name: stack-item-4;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .so .inner .stack .item:nth-child(5) &#123;</span><br><span class=\"line\">        animation-name: stack-item-5;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            left: 22px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            left: 22px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            left: 52px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            left: 52px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        80% &#123;</span><br><span class=\"line\">            left: 22px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-item-1 &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 0);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        10% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        54% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        92% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 0);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-item-2 &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        10% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        54% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        92% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-item-3 &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        10% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        54% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        92% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-item-4 &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 3);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        10% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        54% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        92% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 3);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-item-5 &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 4);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        10% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        54% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        92% &#123;</span><br><span class=\"line\">            transform: rotate(12deg * 4);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-items &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            width: 71px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            width: 71px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            width: 12px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            width: 12px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        80% &#123;</span><br><span class=\"line\">            width: 71px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes box &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            left: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            left: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            left: 30px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            left: 30px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        80% &#123;</span><br><span class=\"line\">            left: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes box-top &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            width: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        6% &#123;</span><br><span class=\"line\">            width: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            width: 115px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            width: 56px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            width: 56px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        59% &#123;</span><br><span class=\"line\">            width: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes box-bottom &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            width: 115px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            width: 115px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            width: 56px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            width: 56px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        80% &#123;</span><br><span class=\"line\">            width: 115px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes box-right &#123;</span><br><span class=\"line\">        15% &#123;</span><br><span class=\"line\">            left: 103px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            left: 44px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            left: 44px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        80% &#123;</span><br><span class=\"line\">            left: 103px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @keyframes stack-box &#123;</span><br><span class=\"line\">        0% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        30% &#123;</span><br><span class=\"line\">            transform: rotate(0deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        40% &#123;</span><br><span class=\"line\">            transform: rotate(135deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        50% &#123;</span><br><span class=\"line\">            transform: rotate(135deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        83% &#123;</span><br><span class=\"line\">            transform: rotate(360deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        100% &#123;</span><br><span class=\"line\">            transform: rotate(360deg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;so center&quot;&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;inner&quot;&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;stack-box&quot;&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;stack&quot;&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;item&quot;&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;inner-item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;item&quot;&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;inner-item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;item&quot;&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;inner-item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;item&quot;&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;inner-item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;item&quot;&gt;</span><br><span class=\"line\">                    &lt;div class&#x3D;&quot;inner-item&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;bottom&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;left&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;right&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">                &lt;div class&#x3D;&quot;top&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">            &lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;name&quot;&gt;</span><br><span class=\"line\">            stack&lt;span class&#x3D;&quot;b&quot;&gt;overflow&lt;&#x2F;span&gt;</span><br><span class=\"line\">        &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-loadingæ•ˆæœ\"><a href=\"#3-3-loadingæ•ˆæœ\" class=\"headerlink\" title=\"3-3.loadingæ•ˆæœ\"></a>3-3.loadingæ•ˆæœ</h3><p><img data-src=\"https://segmentfault.com/img/bVTdrH?w=1192&h=951\" alt=\"clipboard.png\"></p>\n<p>è¿™ä¸ªä»£ç å®åœ¨å¤ªå¤šäº†ï¼Œå¤§å®¶ç›´æ¥ä¸Šç½‘å€çœ‹å§ã€‚<a href=\"http://www.html5tricks.com/demo/css3-loading-cool-styles/index.html\">css3-loading</a></p>\n<h3 id=\"3-4-éŸ³ä¹éœ‡åŠ¨æ¡\"><a href=\"#3-4-éŸ³ä¹éœ‡åŠ¨æ¡\" class=\"headerlink\" title=\"3-4.éŸ³ä¹éœ‡åŠ¨æ¡\"></a>3-4.éŸ³ä¹éœ‡åŠ¨æ¡</h3><p><img data-src=\"https://segmentfault.com/img/bVTdsN?w=260&h=155\" alt=\"clipboard.png\"></p>\n<p>ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;çº¯CSS3æ¨¡æ‹Ÿè·³åŠ¨çš„éŸ³ç¬¦æ•ˆæœ&lt;&#x2F;title&gt;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    *&#123;margin:0;padding:0;list-style: none;&#125;</span><br><span class=\"line\">    body&#123;background-color: #efefef;&#125;</span><br><span class=\"line\">    .demo-music &#123;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      width: 100%;</span><br><span class=\"line\">      height: 200px;</span><br><span class=\"line\">      top: 120px;</span><br><span class=\"line\">      zoom: 1.5;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music .music &#123;</span><br><span class=\"line\">      width: 80px;</span><br><span class=\"line\">      height: 50px;</span><br><span class=\"line\">      top: 50%;</span><br><span class=\"line\">      left: 50%;</span><br><span class=\"line\">      -webkit-transform: translate(-40px, -25px);</span><br><span class=\"line\">      transform: translate(-40px, -25px);</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves &#123;</span><br><span class=\"line\">      width: 80px;</span><br><span class=\"line\">      height: 50px;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      top: 12px;</span><br><span class=\"line\">      left: 12px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves li &#123;</span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">      float: left;</span><br><span class=\"line\">      height: 100%;</span><br><span class=\"line\">      width: 12%;</span><br><span class=\"line\">      overflow: hidden;</span><br><span class=\"line\">      margin-right: 1px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves li span &#123;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      bottom: 0;</span><br><span class=\"line\">      display: block;</span><br><span class=\"line\">      height: 100%;</span><br><span class=\"line\">      width: 100px;</span><br><span class=\"line\">      background: #09f;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li1 span &#123;</span><br><span class=\"line\">      animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li2 span &#123;</span><br><span class=\"line\">      animation: waves 0.9s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 0.9s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li3 span &#123;</span><br><span class=\"line\">      animation: waves 1s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 1s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li4 span &#123;</span><br><span class=\"line\">      animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li5 span &#123;</span><br><span class=\"line\">      animation: waves 0.7s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 0.7s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .demo-music #waves .li6 span &#123;</span><br><span class=\"line\">      animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">      -webkit-animation: waves 0.8s linear 0s infinite alternate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @-webkit-keyframes waves &#123;</span><br><span class=\"line\">      10% &#123;</span><br><span class=\"line\">        height: 20%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      20% &#123;</span><br><span class=\"line\">        height: 60%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      40% &#123;</span><br><span class=\"line\">        height: 40%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      50% &#123;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      100% &#123;</span><br><span class=\"line\">        height: 50%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @keyframes waves &#123;</span><br><span class=\"line\">      10% &#123;</span><br><span class=\"line\">        height: 20%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      20% &#123;</span><br><span class=\"line\">        height: 60%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      40% &#123;</span><br><span class=\"line\">        height: 40%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      50% &#123;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      100% &#123;</span><br><span class=\"line\">        height: 50%;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div class&#x3D;&quot;demo-music&quot;&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;music&quot;&gt;</span><br><span class=\"line\">      &lt;ul id&#x3D;&quot;waves&quot; class&#x3D;&quot;movement&quot;&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li1&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li2&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li3&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li4&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li5&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">        &lt;li class&#x3D;&quot;li6&quot;&gt;&lt;span class&#x3D;&quot;ani-li&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;li&gt;</span><br><span class=\"line\">      &lt;&#x2F;ul&gt;</span><br><span class=\"line\">      &lt;div class&#x3D;&quot;music-state&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-å½¢çŠ¶è½¬æ¢\"><a href=\"#4-å½¢çŠ¶è½¬æ¢\" class=\"headerlink\" title=\"4.å½¢çŠ¶è½¬æ¢\"></a>4.å½¢çŠ¶è½¬æ¢</h2><p>è¿™ä¸€éƒ¨åˆ†ï¼Œåˆ†2dè½¬æ¢å’Œ3dè½¬æ¢ã€‚æœ‰ä»€ä¹ˆå¥½ç©çš„ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªï¼</p>\n<h3 id=\"4-1-è¯­æ³•\"><a href=\"#4-1-è¯­æ³•\" class=\"headerlink\" title=\"4-1.è¯­æ³•\"></a>4-1.è¯­æ³•</h3><p>transform:é€‚ç”¨äº2Dæˆ–3Dè½¬æ¢çš„å…ƒç´ <br>transform-originï¼šè½¬æ¢å…ƒç´ çš„ä½ç½®ï¼ˆå›´ç»•é‚£ä¸ªç‚¹è¿›è¡Œè½¬æ¢ï¼‰ã€‚é»˜è®¤(x,y,z)ï¼š(50%,50%,0)</p>\n<h3 id=\"4-2-å®ä¾‹\"><a href=\"#4-2-å®ä¾‹\" class=\"headerlink\" title=\"4-2.å®ä¾‹\"></a>4-2.å®ä¾‹</h3><p>transform:rotate(30deg);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdyC?w=284&h=218\" alt=\"clipboard.png\"></p>\n<p>transform:translate(30px,30px);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdAC?w=501&h=450\" alt=\"clipboard.png\"></p>\n<p>transform:scale(.8);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdAT?w=404&h=373\" alt=\"clipboard.png\"></p>\n<p>transform: skew(10deg,10deg);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdBj?w=280&h=160\" alt=\"clipboard.png\"></p>\n<p>transform:rotateX(180deg);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdHv?w=142&h=97\" alt=\"clipboard.png\"></p>\n<p>transform:rotateY(180deg);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdHA?w=142&h=97\" alt=\"clipboard.png\"></p>\n<p>transform:rotate3d(10,10,10,90deg);</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTdHU?w=182&h=114\" alt=\"clipboard.png\"></p>\n<h2 id=\"5-é€‰æ‹©å™¨\"><a href=\"#5-é€‰æ‹©å™¨\" class=\"headerlink\" title=\"5.é€‰æ‹©å™¨\"></a>5.é€‰æ‹©å™¨</h2><p>css3æä¾›çš„é€‰æ‹©å™¨å¯ä»¥è®©æˆ‘ä»¬çš„å¼€å‘ï¼Œæ›´åŠ æ–¹ä¾¿ï¼è¿™ä¸ªå¤§å®¶éƒ½è¦äº†è§£ã€‚ä¸‹é¢æ˜¯css3æä¾›çš„é€‰æ‹©å™¨ã€‚</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd2d?w=780&h=728\" alt=\"clipboard.png\"></p>\n<p>å›¾ç‰‡æ¥è‡ªw3cã€‚è¿™ä¸€å—å»ºè®®å¤§å®¶å»w3cçœ‹ï¼ˆ<a href=\"http://www.w3school.com.cn/cssref/css_selectors.asp\">CSS é€‰æ‹©å™¨å‚è€ƒæ‰‹å†Œ</a>ï¼‰ï¼Œé‚£é‡Œçš„ä¾‹å­é€šä¿—æ˜“æ‡‚ã€‚æˆ‘ä¸é‡å¤è®²äº†ã€‚<br>æä¾›çš„é€‰æ‹©å™¨é‡Œé¢ï¼ŒåŸºæœ¬éƒ½æŒºå¥½ç”¨çš„ã€‚ä½†æ˜¯æˆ‘è§‰å¾—æœ‰äº›ä¸ä¼šå¾ˆå¸¸ç”¨ï¼Œæ¯”å¦‚ï¼Œ<code>:rootï¼Œ:emptyï¼Œ:targetï¼Œ:enabledï¼Œ:checked</code>ã€‚è€Œä¸”å‡ ä¸ªä¸æ¨èä½¿ç”¨ï¼Œç½‘ä¸Šçš„è¯´æ³•æ˜¯æ€§èƒ½è¾ƒå·®<code>[attribute*=value]ï¼Œ[attribute$=value]ï¼Œ[attribute^=value]</code>ï¼Œè¿™ä¸ªæˆ‘æ²¡ç”¨è¿‡ï¼Œä¸å¤ªæ¸…æ¥šã€‚</p>\n<h2 id=\"6-é˜´å½±\"><a href=\"#6-é˜´å½±\" class=\"headerlink\" title=\"6.é˜´å½±\"></a>6.é˜´å½±</h2><p>ä»¥å‰æ²¡æœ‰css3çš„æ—¶å€™ï¼Œæˆ–è€…éœ€è¦å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„æ—¶å€™ï¼Œé˜´å½±åªèƒ½ç”¨å›¾ç‰‡å®ç°ï¼Œä½†æ˜¯ç°åœ¨ä¸éœ€è¦ï¼Œcss3å°±æä¾›äº†ï¼</p>\n<h3 id=\"6-1-è¯­æ³•\"><a href=\"#6-1-è¯­æ³•\" class=\"headerlink\" title=\"6-1.è¯­æ³•\"></a>6-1.è¯­æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">box-shadow: æ°´å¹³é˜´å½±çš„ä½ç½® å‚ç›´é˜´å½±çš„ä½ç½® æ¨¡ç³Šè·ç¦» é˜´å½±çš„å¤§å° é˜´å½±çš„é¢œè‰² é˜´å½±å¼€å§‹æ–¹å‘ï¼ˆé»˜è®¤æ˜¯ä»é‡Œå¾€å¤–ï¼Œè®¾ç½®insetå°±æ˜¯ä»å¤–å¾€é‡Œï¼‰;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-1-ä¾‹å­\"><a href=\"#6-1-ä¾‹å­\" class=\"headerlink\" title=\"6-1.ä¾‹å­\"></a>6-1.ä¾‹å­</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt; </span><br><span class=\"line\">&lt;title&gt;&lt;&#x2F;title&gt; </span><br><span class=\"line\">&lt;style&gt; </span><br><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">    height:100px;</span><br><span class=\"line\">    background:#09f;</span><br><span class=\"line\">    box-shadow: 10px 10px 5px #888888;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd9F?w=364&h=151\" alt=\"clipboard.png\"></p>\n<h2 id=\"7-è¾¹æ¡†\"><a href=\"#7-è¾¹æ¡†\" class=\"headerlink\" title=\"7.è¾¹æ¡†\"></a>7.è¾¹æ¡†</h2><h3 id=\"7-1-è¾¹æ¡†å›¾ç‰‡\"><a href=\"#7-1-è¾¹æ¡†å›¾ç‰‡\" class=\"headerlink\" title=\"7-1.è¾¹æ¡†å›¾ç‰‡\"></a>7-1.è¾¹æ¡†å›¾ç‰‡</h3><h4 id=\"7-1-1-è¯­æ³•\"><a href=\"#7-1-1-è¯­æ³•\" class=\"headerlink\" title=\"7-1-1.è¯­æ³•\"></a>7-1-1.è¯­æ³•</h4><p>border-image: å›¾ç‰‡url å›¾åƒè¾¹ç•Œå‘å†…åç§» å›¾åƒè¾¹ç•Œçš„å®½åº¦(é»˜è®¤ä¸ºè¾¹æ¡†çš„å®½åº¦) ç”¨äºæŒ‡å®šåœ¨è¾¹æ¡†å¤–éƒ¨ç»˜åˆ¶åç§»çš„é‡ï¼ˆé»˜è®¤0ï¼‰ é“ºæ»¡æ–¹å¼â€“é‡å¤ï¼ˆrepeatï¼‰ã€æ‹‰ä¼¸ï¼ˆstretchï¼‰æˆ–é“ºæ»¡ï¼ˆroundï¼‰ï¼ˆé»˜è®¤ï¼šæ‹‰ä¼¸ï¼ˆstretchï¼‰ï¼‰;</p>\n<h4 id=\"7-1-2-ä¾‹å­\"><a href=\"#7-1-2-ä¾‹å­\" class=\"headerlink\" title=\"7-1-2.ä¾‹å­\"></a>7-1-2.ä¾‹å­</h4><p>è¾¹æ¡†å›¾ç‰‡ï¼ˆæ¥è‡ªèœé¸Ÿæ•™ç¨‹ï¼‰</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTefk?w=81&h=81\" alt=\"clipboard.png\"></p>\n<p>ä»£ç </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">.demo &#123;</span><br><span class=\"line\">    border: 15px solid transparent;</span><br><span class=\"line\">    padding: 15px;   </span><br><span class=\"line\">    border-image: url(border.png);</span><br><span class=\"line\">    border-image-slice: 30;</span><br><span class=\"line\">    border-image-repeat: round;</span><br><span class=\"line\">    border-image-outset: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;demo&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTeeg?w=601&h=91\" alt=\"clipboard.png\"></p>\n<p>æœ‰è¶£å˜åŒ–</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTefm?w=617&h=444\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTefl?w=617&h=444\" alt=\"clipboard.png\"></p>\n<p>é‚£ä¸ªæ›´å¥½çœ‹ï¼Œå¤§å®¶çœ‹ç€åŠ</p>\n<h3 id=\"7-2-è¾¹æ¡†åœ†è§’\"><a href=\"#7-2-è¾¹æ¡†åœ†è§’\" class=\"headerlink\" title=\"7-2.è¾¹æ¡†åœ†è§’\"></a>7-2.è¾¹æ¡†åœ†è§’</h3><h4 id=\"7-2-1-è¯­æ³•\"><a href=\"#7-2-1-è¯­æ³•\" class=\"headerlink\" title=\"7-2-1.è¯­æ³•\"></a>7-2-1.è¯­æ³•</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">border-radius: n1,n2,n3,n4;</span><br><span class=\"line\">border-radius: n1,n2,n3,n4&#x2F;n1,n2,n3,n4;</span><br><span class=\"line\">&#x2F;*n1-n4å››ä¸ªå€¼çš„é¡ºåºæ˜¯ï¼šå·¦ä¸Šè§’ï¼Œå³ä¸Šè§’ï¼Œå³ä¸‹è§’ï¼Œå·¦ä¸‹è§’ã€‚*&#x2F;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-2-2-ä¾‹å­\"><a href=\"#7-2-2-ä¾‹å­\" class=\"headerlink\" title=\"7-2-2.ä¾‹å­\"></a>7-2-2.ä¾‹å­</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt; </span><br><span class=\"line\">&lt;title&gt;&lt;&#x2F;title&gt; </span><br><span class=\"line\">&lt;style&gt; </span><br><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    border:2px solid #a1a1a1;</span><br><span class=\"line\">    padding:10px 40px; </span><br><span class=\"line\">    background:#dddddd;</span><br><span class=\"line\">    text-align:center;</span><br><span class=\"line\">    width:300px;</span><br><span class=\"line\">    border-radius:25px 0 25px 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">&lt;div&gt;border-radius&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œç»“æœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTegF?w=486&h=82\" alt=\"clipboard.png\"></p>\n<h2 id=\"8-èƒŒæ™¯\"><a href=\"#8-èƒŒæ™¯\" class=\"headerlink\" title=\"8.èƒŒæ™¯\"></a>8.èƒŒæ™¯</h2><p>è¿™ä¸€å—ä¸»è¦è®²css3æä¾›èƒŒæ™¯çš„ä¸‰ä¸ªå±æ€§</p>\n<h3 id=\"background-clip\"><a href=\"#background-clip\" class=\"headerlink\" title=\"background-clip\"></a>background-clip</h3><p>åˆ¶å®šèƒŒæ™¯ç»˜åˆ¶ï¼ˆæ˜¾ç¤ºï¼‰åŒºåŸŸ</p>\n<p>é»˜è®¤æƒ…å†µï¼ˆä»è¾¹æ¡†å¼€å§‹ç»˜åˆ¶ï¼‰</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTeqt?w=533&h=251\" alt=\"clipboard.png\"></p>\n<p>ä»paddingå¼€å§‹ç»˜åˆ¶ï¼ˆæ˜¾ç¤ºï¼‰ï¼Œä¸ç®—border,ï¼Œç›¸å½“äºæŠŠborderé‚£é‡Œçš„èƒŒæ™¯ç»™è£å‰ªæ‰ï¼ï¼ˆbackground-clip: padding-box;ï¼‰</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTeqv?w=533&h=255\" alt=\"clipboard.png\"></p>\n<p>åªåœ¨å†…å®¹åŒºç»˜åˆ¶ï¼ˆæ˜¾ç¤ºï¼‰ï¼Œä¸ç®—paddingå’Œborderï¼Œç›¸å½“äºæŠŠpaddingå’Œborderé‚£é‡Œçš„èƒŒæ™¯ç»™è£å‰ªæ‰ï¼ï¼ˆbackground-clip: content-box;ï¼‰</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTeqy?w=537&h=244\" alt=\"clipboard.png\"></p>\n<h3 id=\"background-origin\"><a href=\"#background-origin\" class=\"headerlink\" title=\"background-origin\"></a>background-origin</h3><p>å¼•ç”¨èœé¸Ÿæ•™ç¨‹çš„è¯´æ³•ï¼šbackground-Originå±æ€§æŒ‡å®šbackground-positionå±æ€§åº”è¯¥æ˜¯ç›¸å¯¹ä½ç½®</p>\n<p>ä¸‹é¢çš„divåˆå§‹çš„htmlå’Œcssä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ä¸‹<br>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    border:10px dashed black;</span><br><span class=\"line\">    padding:35px;</span><br><span class=\"line\">    background:url(&#39;logo.png&#39;) no-repeat,#ccc;</span><br><span class=\"line\">    background-position:0px 0px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸‹é¢çœ‹ä¸‹ï¼Œbackground-originä¸åŒçš„ä¸‰ç§æƒ…å†µ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVZGAM?w=800&h=506\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<h3 id=\"background-size\"><a href=\"#background-size\" class=\"headerlink\" title=\"background-size\"></a>background-size</h3><p>è¿™ä¸ªç›¸ä¿¡å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åˆ¶å®šèƒŒæ™¯çš„å¤§å°<br>ä¸‹é¢çš„divåˆå§‹çš„htmlå’Œcssä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ä¸‹<br>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    border:1px dashed black;</span><br><span class=\"line\">    padding:35px;</span><br><span class=\"line\">    background:url(&#39;test.jpg&#39;) no-repeat;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTgk7?w=1016&h=768\" alt=\"clipboard.png\"></p>\n<h3 id=\"å¤šå¼ èƒŒæ™¯å›¾\"><a href=\"#å¤šå¼ èƒŒæ™¯å›¾\" class=\"headerlink\" title=\"å¤šå¼ èƒŒæ™¯å›¾\"></a>å¤šå¼ èƒŒæ™¯å›¾</h3><p>è¿™ä¸ªæ²¡ä»€ä¹ˆï¼Œå°±æ˜¯åœ¨ä¸€å¼ å›¾ç‰‡ï¼Œä½¿ç”¨å¤šå¼ èƒŒæ™¯å›¾ç‰‡ï¼Œä»£ç å¦‚ä¸‹ï¼<br>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;ä¸¤å¼ å›¾ç‰‡çš„èƒŒæ™¯&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    border:1px dashed black;</span><br><span class=\"line\">    padding:35px;</span><br><span class=\"line\">    background-size: contain;</span><br><span class=\"line\">    background:url(&#39;test.jpg&#39;) no-repeat left,url(logo.png) no-repeat right;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTglS?w=999&h=199\" alt=\"clipboard.png\"></p>\n<h2 id=\"9-åå°„\"><a href=\"#9-åå°„\" class=\"headerlink\" title=\"9.åå°„\"></a>9.åå°„</h2><p>è¿™ä¸ªä¹Ÿå¯ä»¥è¯´æ˜¯å€’å½±ï¼Œç”¨èµ·æ¥ä¹ŸæŒºæœ‰è¶£çš„ã€‚</p>\n<h3 id=\"9-1-è¯­æ³•\"><a href=\"#9-1-è¯­æ³•\" class=\"headerlink\" title=\"9-1.è¯­æ³•\"></a>9-1.è¯­æ³•</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">-webkit-box-reflect:æ–¹å‘[ above-ä¸Š | below-ä¸‹ | right-å³ | left-å·¦ ]ï¼Œåç§»é‡ï¼Œé®ç½©å›¾ç‰‡</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-2-ä¸‹å€’å½±\"><a href=\"#9-2-ä¸‹å€’å½±\" class=\"headerlink\" title=\"9-2.ä¸‹å€’å½±\"></a>9-2.ä¸‹å€’å½±</h3><p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;ä¸‹å€’å½±&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;p class&#x3D;&quot;reflect-bottom-p&quot;&gt;&lt;img src&#x3D;&quot;test.jpg&quot; class&#x3D;&quot;reflect-bottom&quot;&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.reflect-bottom-p &#123;</span><br><span class=\"line\">    padding-bottom: 300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">.reflect-bottom &#123;</span><br><span class=\"line\">    -webkit-box-reflect: below;</span><br><span class=\"line\">&#125;   </span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTeoE?w=518&h=669\" alt=\"clipboard.png\"></p>\n<h3 id=\"9-2-å³å€’å½±ï¼ˆæœ‰åç§»ï¼‰\"><a href=\"#9-2-å³å€’å½±ï¼ˆæœ‰åç§»ï¼‰\" class=\"headerlink\" title=\"9-2.å³å€’å½±ï¼ˆæœ‰åç§»ï¼‰\"></a>9-2.å³å€’å½±ï¼ˆæœ‰åç§»ï¼‰</h3><p><img data-src=\"https://segmentfault.com/img/bVTeoU?w=994&h=351\" alt=\"clipboard.png\"></p>\n<p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;å³å€’å½±åŒæ—¶æœ‰åç§»&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;p&gt;&lt;img src&#x3D;&quot;test.jpg&quot; class&#x3D;&quot;reflect-right-translate&quot;&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.reflect-right-translate &#123;</span><br><span class=\"line\">    -webkit-box-reflect: right 10px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-3-ä¸‹å€’å½±ï¼ˆæ¸å˜ï¼‰\"><a href=\"#9-3-ä¸‹å€’å½±ï¼ˆæ¸å˜ï¼‰\" class=\"headerlink\" title=\"9-3.ä¸‹å€’å½±ï¼ˆæ¸å˜ï¼‰\"></a>9-3.ä¸‹å€’å½±ï¼ˆæ¸å˜ï¼‰</h3><p><img data-src=\"https://segmentfault.com/img/bVTepo?w=507&h=668\" alt=\"clipboard.png\"></p>\n<p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;ä¸‹å€’å½±ï¼ˆæ¸å˜ï¼‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;p class&#x3D;&quot;reflect-bottom-p&quot;&gt;&lt;img src&#x3D;&quot;test.jpg&quot; class&#x3D;&quot;reflect-bottom-mask&quot;&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">reflect-bottom-mask &#123;</span><br><span class=\"line\">    -webkit-box-reflect: below 0 linear-gradient(transparent, white);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"9-3-ä¸‹å€’å½±ï¼ˆå›¾ç‰‡é®ç½©ï¼‰\"><a href=\"#9-3-ä¸‹å€’å½±ï¼ˆå›¾ç‰‡é®ç½©ï¼‰\" class=\"headerlink\" title=\"9-3.ä¸‹å€’å½±ï¼ˆå›¾ç‰‡é®ç½©ï¼‰\"></a>9-3.ä¸‹å€’å½±ï¼ˆå›¾ç‰‡é®ç½©ï¼‰</h3><p>ä½¿ç”¨çš„å›¾ç‰‡</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTepE?w=200&h=200\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTepD?w=510&h=672\" alt=\"clipboard.png\"></p>\n<p>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;ä¸‹å€’å½±ï¼ˆpngå›¾ç‰‡ï¼‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;p class&#x3D;&quot;reflect-bottom-p&quot;&gt;&lt;img src&#x3D;&quot;test.jpg&quot; class&#x3D;&quot;reflect-bottom-img&quot;&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.reflect-bottom-img &#123;</span><br><span class=\"line\">    -webkit-box-reflect: below 0 url(shou.png);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-æ–‡å­—\"><a href=\"#10-æ–‡å­—\" class=\"headerlink\" title=\"10.æ–‡å­—\"></a>10.æ–‡å­—</h2><h3 id=\"æ¢è¡Œ\"><a href=\"#æ¢è¡Œ\" class=\"headerlink\" title=\"æ¢è¡Œ\"></a>æ¢è¡Œ</h3><p>è¯­æ³•ï¼š<code>word-break: normal|break-all|keep-all;</code><br>ä¾‹å­å’Œè¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgo9?w=511&h=446\" alt=\"clipboard.png\"></p>\n<p>è¯­æ³•ï¼š<code>word-wrap: normal|break-word;</code><br>ä¾‹å­å’Œè¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgpp?w=602&h=423\" alt=\"clipboard.png\"></p>\n<blockquote>\n<p>è¶…å‡ºçœç•¥å·è¿™ä¸ªï¼Œä¸»è¦è®²<code>text-overflow</code>è¿™ä¸ªå±æ€§ï¼Œæˆ‘ç›´æ¥è®²å®ä¾‹çš„åŸå› æ˜¯<code>text-overflow</code>çš„ä¸‰ä¸ªå†™æ³•ï¼Œ<code>clip|ellipsis|string</code>ã€‚<code>clip</code>è¿™ä¸ªæ–¹å¼å¤„ç†ä¸ç¾è§‚ï¼Œä¸ä¼˜é›…ã€‚<code>string</code>åªåœ¨ç«ç‹å…¼å®¹ã€‚</p>\n</blockquote>\n<p><img data-src=\"https://segmentfault.com/img/bVTgpF?w=595&h=299\" alt=\"clipboard.png\"></p>\n<h3 id=\"è¶…å‡ºçœç•¥å·\"><a href=\"#è¶…å‡ºçœç•¥å·\" class=\"headerlink\" title=\"è¶…å‡ºçœç•¥å·\"></a>è¶…å‡ºçœç•¥å·</h3><p>è¿™ä¸ªå…¶å®æœ‰ä¸‰è¡Œä»£ç ï¼Œç¦æ­¢æ¢è¡Œï¼Œè¶…å‡ºéšè—ï¼Œè¶…å‡ºçœç•¥å·<br>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;This is some long text that will not fit in the box&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    width:200px; </span><br><span class=\"line\">    border:1px solid #000000;</span><br><span class=\"line\">    overflow:hidden;</span><br><span class=\"line\">    white-space:nowrap; </span><br><span class=\"line\">    text-overflow:ellipsis;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œç»“æœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgqd?w=292&h=42\" alt=\"clipboard.png\"></p>\n<h3 id=\"å¤šè¡Œè¶…å‡ºçœç•¥å·\"><a href=\"#å¤šè¡Œè¶…å‡ºçœç•¥å·\" class=\"headerlink\" title=\"å¤šè¡Œè¶…å‡ºçœç•¥å·\"></a>å¤šè¡Œè¶…å‡ºçœç•¥å·</h3><p>è¶…å‡ºçœç•¥å·ã€‚è¿™ä¸ªå¯¹äºå¤§å®¶æ¥è¯´ï¼Œä¸éš¾ï¼ä½†æ˜¯ä»¥å‰å¦‚æœæ˜¯å¤šè¡Œè¶…å‡ºçœç•¥å·ï¼Œå°±åªèƒ½ç”¨jsæ¨¡æ‹Ÿï¼ç°åœ¨css3æä¾›äº†å¤šè¡Œçœç•¥å·çš„æ–¹æ³•ï¼é—æ†¾å°±æ˜¯è¿™ä¸ªæš‚æ—¶åªæ”¯æŒwebkitæµè§ˆå™¨ï¼</p>\n<p>ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;    </span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt; </span><br><span class=\"line\">&lt;title&gt;&lt;&#x2F;title&gt; </span><br><span class=\"line\">&lt;style&gt; </span><br><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    width:400px;</span><br><span class=\"line\">    margin:0 auto;</span><br><span class=\"line\">    overflow : hidden;</span><br><span class=\"line\">    border:1px solid #ccc;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    display: -webkit-box;</span><br><span class=\"line\">    -webkit-line-clamp: 2;</span><br><span class=\"line\">    -webkit-box-orient: vertical;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div&gt;è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—è¿™é‡Œå°†ä¼šè¶…å‡ºéšè—&lt;&#x2F;div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœå›¾</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd6V?w=491&h=74\" alt=\"clipboard.png\"></p>\n<p>è¿™æ ·å‘ç°è¾¹æ¡†è´´ç€éš¾çœ‹ï¼Œè¦æ’‘å¼€ä¸€ç‚¹ï¼Œä½†æ˜¯æ’‘å¼€ä¸Šä¸‹è¾¹æ¡†ä¸è¦ä½¿ç”¨padding!å› ä¸ºä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªæ•ˆæœã€‚</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd66?w=527&h=102\" alt=\"clipboard.png\"></p>\n<p>æ­£ç¡®å§¿åŠ¿æ˜¯è¿™æ ·å†™</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;style&gt; </span><br><span class=\"line\">div</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    width:400px;</span><br><span class=\"line\">    margin:0 auto;</span><br><span class=\"line\">    overflow : hidden;</span><br><span class=\"line\">    border:1px solid #ccc;</span><br><span class=\"line\">    text-overflow: ellipsis;</span><br><span class=\"line\">    padding:0 10px;</span><br><span class=\"line\">    display: -webkit-box;</span><br><span class=\"line\">    -webkit-line-clamp: 2;</span><br><span class=\"line\">    -webkit-box-orient: vertical;</span><br><span class=\"line\">    line-height:30px;</span><br><span class=\"line\">    height:60px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œç»“æœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd7k?w=478&h=104\" alt=\"clipboard.png\"></p>\n<p>è¿™æ ·å†™ï¼Œå°±ç®—åœ¨ä¸æ˜¯webkitå†…æ ¸çš„æµè§ˆå™¨ï¼Œä¹Ÿå¯ä»¥ä¼˜é›…é™çº§ï¼ˆé«˜åº¦=è¡Œé«˜*è¡Œæ•°ï¼ˆwebkit-line-clampï¼‰ï¼‰ï¼</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTd7u?w=481&h=108\" alt=\"clipboard.png\"></p>\n<h3 id=\"æ–‡å­—é˜´å½±\"><a href=\"#æ–‡å­—é˜´å½±\" class=\"headerlink\" title=\"æ–‡å­—é˜´å½±\"></a>æ–‡å­—é˜´å½±</h3><p>è¯­æ³•ï¼štext-shadow:æ°´å¹³é˜´å½±ï¼Œå‚ç›´é˜´å½±ï¼Œæ¨¡ç³Šçš„è·ç¦»ï¼Œä»¥åŠé˜´å½±çš„é¢œè‰²ã€‚<br>ä¾‹å­ï¼š<code>text-shadow: 0 0 10px #f00;</code><br>æ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgnR?w=378&h=78\" alt=\"clipboard.png\"></p>\n<h2 id=\"11-é¢œè‰²\"><a href=\"#11-é¢œè‰²\" class=\"headerlink\" title=\"11.é¢œè‰²\"></a>11.é¢œè‰²</h2><p>è¿™ä¸ªå…¶å®å°±æ˜¯css3æä¾›äº†æ–°çš„é¢œè‰²è¡¨ç¤ºæ–¹æ³•ã€‚</p>\n<h3 id=\"rgba\"><a href=\"#rgba\" class=\"headerlink\" title=\"rgba\"></a>rgba</h3><p>ä¸€ä¸ªæ˜¯rgbaï¼ˆrgbä¸ºé¢œè‰²å€¼ï¼Œaä¸ºé€æ˜åº¦ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">color: rgba(255,00,00,1);</span><br><span class=\"line\">background: rgba(00,00,00,.5);</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTgri?w=924&h=81\" alt=\"clipboard.png\"></p>\n<h3 id=\"hsla\"><a href=\"#hsla\" class=\"headerlink\" title=\"hsla\"></a>hsla</h3><p>h:è‰²ç›¸â€ï¼Œâ€œsï¼šé¥±å’Œåº¦â€ï¼Œâ€œlï¼šäº®åº¦â€ï¼Œâ€œaï¼šé€æ˜åº¦â€<br>è¿™ä¸ªæˆ‘å§¿åŠ¿äº†è§£è¿‡ï¼Œæ²¡ç”¨è¿‡ï¼Œè¿™é‡Œç®€å•ç»™ä¸€ä¸ªä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">color: hsla( 112, 72%, 33%, 0.68);</span><br><span class=\"line\">background-color: hsla( 49, 65%, 60%, 0.68);</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTgqS?w=934&h=72\" alt=\"clipboard.png\"></p>\n<h2 id=\"12-æ¸å˜\"><a href=\"#12-æ¸å˜\" class=\"headerlink\" title=\"12.æ¸å˜\"></a>12.æ¸å˜</h2><p>css3çš„æ¸å˜å¯ä»¥è¯´æ˜¯ä¸€å¤§äº®ç‚¹ï¼Œæä¾›äº†çº¿æ€§æ¸å˜ï¼Œå¾„å‘æ¸å˜ï¼Œåœ†é”¥æ¸å˜ï¼ˆw3cå’Œèœé¸Ÿæ•™ç¨‹éƒ½æ²¡æœ‰æåŠï¼Œæ˜¯æˆ‘ä»ä¸€ç¯‡æ–‡ç« äº†è§£åˆ°ï¼Œä½†æ˜¯æˆ‘è‡ªå·±åœ¨è°·æ­Œæµè§ˆå™¨å°è¯•ï¼Œå´æ˜¯ä¸€ä¸ªæ— æ•ˆçš„å†™æ³•ï¼å¤§å®¶å¦‚æœçŸ¥é“æ€ä¹ˆç”¨ï¼Œè¯·å‘ŠçŸ¥ï¼æ„Ÿè°¢ï¼‰<br>æ¸å˜è¿™ä¸€éƒ¨åˆ†ï¼Œç”±äºç”¨æ³•çµæ´»ï¼ŒåŠŸèƒ½ä¹Ÿå¼ºå¤§ï¼Œè¿™ä¸ªå†™èµ·æ¥å¾ˆé•¿ï¼Œå†™ä¸€ç‚¹åˆæ„Ÿè§‰æ²¡ä»€ä¹ˆæ„æ€ï¼Œæˆ‘è¿™é‡Œè´´å‡ ä¸ªé“¾æ¥æ•™ç¨‹ç»™å¤§å®¶ï¼Œåœ¨æ–‡ç« æˆ‘ä¸å¤šè¯´äº†ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿæ˜¯ä»é‚£å‡ ä¸ªåœ°æ–¹å­¦çš„ï¼Œä»–ä»¬å†™å¾—ä¹Ÿæ˜¯æ¯”æˆ‘å¥½ï¼Œæ¯”æˆ‘è¯¦ç»†ï¼</p>\n<p><a href=\"http://www.w3cplus.com/content/css3-gradient\">CSS3 Gradient</a><br><a href=\"http://www.w3cplus.com/css3/new-css3-linear-gradient.html\">å†è¯´CSS3æ¸å˜â€”â€”çº¿æ€§æ¸å˜</a><br><a href=\"http://www.w3cplus.com/css3/new-css3-radial-gradient.html\">å†è¯´CSS3æ¸å˜â€”â€”å¾„å‘æ¸å˜</a><br><a href=\"http://www.cnblogs.com/coco1s/p/7079529.html\">ç¥å¥‡çš„ conic-gradient åœ†é”¥æ¸å˜</a>ï¼ˆè¿™ç¯‡å°±æ˜¯çœ‹æˆ‘çœ‹åˆ°åœ†é”¥æ¸å˜çš„æ–‡ç« ï¼‰</p>\n<h2 id=\"13-Filterï¼ˆæ»¤é•œï¼‰\"><a href=\"#13-Filterï¼ˆæ»¤é•œï¼‰\" class=\"headerlink\" title=\"13.Filterï¼ˆæ»¤é•œï¼‰\"></a>13.Filterï¼ˆæ»¤é•œï¼‰</h2><p>css3çš„æ»¤é•œä¹Ÿæ˜¯ä¸€ä¸ªäº®ç‚¹ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œå†™æ³•ä¹Ÿçµæ´»ã€‚</p>\n<p>ä¾‹å­ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;åŸå›¾&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;é»‘ç™½è‰²filter: grayscale(100%)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter: grayscale(100%);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;è¤è‰²filter:sepia(1)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:sepia(1);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;é¥±å’Œåº¦saturate(2)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:saturate(2);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;è‰²ç›¸æ—‹è½¬hue-rotate(90deg)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:hue-rotate(90deg);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;åè‰²filter:invert(1)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:invert(1);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;é€æ˜åº¦opacity(.5)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:opacity(.5);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;äº®åº¦brightness(.5)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:brightness(.5);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;å¯¹æ¯”åº¦contrast(2)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:contrast(2);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;æ¨¡ç³Šblur(3px)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:blur(3px);&quot;&#x2F;&gt;</span><br><span class=\"line\">&lt;p&gt;é˜´å½±drop-shadow(5px 5px 5px #000)&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;filter:drop-shadow(5px 5px 5px #000);&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTgyB?w=504&h=357\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgzW?w=528&h=716\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgzY?w=511&h=728\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgzZ?w=511&h=721\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgz0?w=513&h=723\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgPQ?w=519&h=715\" alt=\"clipboard.png\"></p>\n<h2 id=\"14-å¼¹æ€§å¸ƒå±€\"><a href=\"#14-å¼¹æ€§å¸ƒå±€\" class=\"headerlink\" title=\"14.å¼¹æ€§å¸ƒå±€\"></a>14.å¼¹æ€§å¸ƒå±€</h2><p>è¿™é‡Œè¯´çš„å¼¹æ€§å¸ƒå±€ï¼Œå°±æ˜¯flexï¼›è¿™ä¸€å—è¦è®²çš„è¯ï¼Œå¿…é¡»è¦å…¨éƒ¨è®²å®Œï¼Œä¸è®²å®Œæ²¡ä»€ä¹ˆæ„æ€ï¼Œåè€Œä¼šæŠŠå¤§å®¶æè’™ï¼è®²å®Œä¹Ÿæ˜¯å¾ˆé•¿ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä¹Ÿåªè´´æ•™ç¨‹ç½‘å€ã€‚åšå®¢è®²çš„å¾ˆå¥½ï¼Œå¾ˆè¯¦ç»†ï¼</p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a><br><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡</a></p>\n<h2 id=\"15-æ …æ ¼å¸ƒå±€\"><a href=\"#15-æ …æ ¼å¸ƒå±€\" class=\"headerlink\" title=\"15.æ …æ ¼å¸ƒå±€\"></a>15.æ …æ ¼å¸ƒå±€</h2><p>æ …æ ¼åŒ–å¸ƒå±€ï¼Œå°±æ˜¯gridï¼›è¿™ä¸€å—å’Œflexä¸€æ ·ï¼Œè¦è®²å°±å¿…é¡»è®²å®Œã€‚è¿™å—çš„å†…å®¹å’Œflexå·®ä¸å¤šï¼Œä¹Ÿæœ‰ç‚¹é•¿ï¼Œè¿™é‡Œæˆ‘ä¹Ÿè´´é“¾æ¥ï¼Œè¿™ä¸ªé“¾æ¥è®²å¾—ä¹Ÿå¾ˆè¯¦ç»†ï¼</p>\n<p><a href=\"http://www.jianshu.com/p/d183265a8dad\">Gridå¸ƒå±€æŒ‡å—</a></p>\n<h2 id=\"16-å¤šåˆ—å¸ƒå±€\"><a href=\"#16-å¤šåˆ—å¸ƒå±€\" class=\"headerlink\" title=\"16.å¤šåˆ—å¸ƒå±€\"></a>16.å¤šåˆ—å¸ƒå±€</h2><p>è¿™ä¸€å—ï¼Œæˆ‘ä¹Ÿæ˜¯äº†è§£è¿‡ï¼Œæˆ‘è§‰å¾—å¤šåˆ—åº”è¯¥è¿˜æ˜¯æŒºæœ‰ç”¨çš„ã€‚è™½ç„¶æˆ‘æ²¡åœ¨é¡¹ç›®ä¸­ç”¨è¿‡ï¼Œä¸‹é¢æˆ‘ç®€å•è¯´ä¸‹ï¼ä¸¾ä¸ªä¾‹å­ï¼è¿™ä¸ªå±æ€§ï¼Œå»ºè®®åŠ ç§æœ‰å‰ç¼€ï¼Œå…¼å®¹æ€§æœ‰å¾…æé«˜ï¼<br>html</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div class&#x3D;&quot;newspaper&quot;&gt;</span><br><span class=\"line\">å½“æˆ‘å¹´è½»çš„æ—¶å€™ï¼Œæˆ‘æ¢¦æƒ³æ”¹å˜è¿™ä¸ªä¸–ç•Œï¼›å½“æˆ‘æˆç†Ÿä»¥åï¼Œæˆ‘å‘ç°æˆ‘ä¸èƒ½å¤Ÿæ”¹å˜è¿™ä¸ªä¸–ç•Œï¼Œæˆ‘å°†ç›®å…‰ç¼©çŸ­äº†äº›ï¼Œå†³å®šåªæ”¹å˜æˆ‘çš„å›½å®¶ï¼›å½“æˆ‘è¿›å…¥æš®å¹´ä»¥åï¼Œæˆ‘å‘ç°æˆ‘ä¸èƒ½å¤Ÿæ”¹å˜æˆ‘ä»¬çš„å›½å®¶ï¼Œæˆ‘çš„æœ€åæ„¿æœ›ä»…ä»…æ˜¯æ”¹å˜ä¸€ä¸‹æˆ‘çš„å®¶åº­ï¼Œä½†æ˜¯ï¼Œè¿™ä¹Ÿä¸å¯èƒ½ã€‚å½“æˆ‘ç°åœ¨èººåœ¨åºŠä¸Šï¼Œè¡Œå°†å°±æœ¨æ—¶ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ï¼šå¦‚æœä¸€å¼€å§‹æˆ‘ä»…ä»…å»æ”¹å˜æˆ‘è‡ªå·±ï¼Œç„¶åï¼Œæˆ‘å¯èƒ½æ”¹å˜æˆ‘çš„å®¶åº­ï¼›åœ¨å®¶äººçš„å¸®åŠ©å’Œé¼“åŠ±ä¸‹ï¼Œæˆ‘å¯èƒ½ä¸ºå›½å®¶åšä¸€äº›äº‹æƒ…ï¼›ç„¶åï¼Œè°çŸ¥é“å‘¢?æˆ‘ç”šè‡³å¯èƒ½æ”¹å˜è¿™ä¸ªä¸–ç•Œã€‚</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>css</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.newspaper</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    column-count: 3;</span><br><span class=\"line\">    -webkit-column-count: 3;</span><br><span class=\"line\">    -moz-column-count: 3;</span><br><span class=\"line\">    column-rule:2px solid #000;</span><br><span class=\"line\">    -webkit-column-rule:2px solid #000;</span><br><span class=\"line\">    -mox-column-rule:2px solid #000;</span><br><span class=\"line\">&#125;    </span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://segmentfault.com/img/bVTgRx?w=587&h=163\" alt=\"clipboard.png\"></p>\n<h2 id=\"17-ç›’æ¨¡å‹å®šä¹‰\"><a href=\"#17-ç›’æ¨¡å‹å®šä¹‰\" class=\"headerlink\" title=\"17.ç›’æ¨¡å‹å®šä¹‰\"></a>17.ç›’æ¨¡å‹å®šä¹‰</h2><p>box-sizingè¿™ä¸ªå±æ€§ï¼Œç½‘ä¸Šè¯´æ³•æ˜¯ï¼šå±æ€§å…è®¸æ‚¨ä»¥ç‰¹å®šçš„æ–¹å¼å®šä¹‰åŒ¹é…æŸä¸ªåŒºåŸŸçš„ç‰¹å®šå…ƒç´ ã€‚</p>\n<p>è¿™ä¸ªå¤§å®¶çœ‹ç€å¯èƒ½ä¸çŸ¥é“åœ¨è¯´ä»€ä¹ˆï¼Œç®€å•ç²—æš´çš„ç†è§£å°±æ˜¯ï¼šbox-sizing:border-boxçš„æ—¶å€™ï¼Œè¾¹æ¡†å’ŒpaddingåŒ…å«åœ¨å…ƒç´ çš„å®½é«˜ä¹‹å†…ï¼å¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://segmentfault.com/img/bVZDJZ?w=1040&h=797\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<p>box-sizing:content-boxçš„æ—¶å€™ï¼Œè¾¹æ¡†å’Œpaddingä¸åŒ…å«åœ¨å…ƒç´ çš„å®½é«˜ä¹‹å†…ï¼å¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://segmentfault.com/img/bVZDJ5?w=950&h=876\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<h2 id=\"18-åª’ä½“æŸ¥è¯¢\"><a href=\"#18-åª’ä½“æŸ¥è¯¢\" class=\"headerlink\" title=\"18.åª’ä½“æŸ¥è¯¢\"></a>18.åª’ä½“æŸ¥è¯¢</h2><p>åª’ä½“æŸ¥è¯¢ï¼Œå°±åœ¨ç›‘å¬å±å¹•å°ºå¯¸çš„å˜åŒ–ï¼Œåœ¨ä¸åŒå°ºå¯¸çš„æ—¶å€™æ˜¾ç¤ºä¸åŒçš„æ ·å¼ï¼åœ¨åšå“åº”å¼çš„ç½‘ç«™é‡Œé¢ï¼Œæ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼ä¸è¿‡ç”±äºæˆ‘æœ€è¿‘çš„é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨remå¸ƒå±€ã€‚æ‰€ä»¥åª’ä½“æŸ¥è¯¢å°±æ²¡æ€ä¹ˆç”¨äº†ï¼ä½†æ˜¯ï¼Œåª’ä½“æŸ¥è¯¢ï¼Œè¿˜æ˜¯å¾ˆå€¼å¾—ä¸€çœ‹çš„ï¼è¯´ä¸å®šå“ªä¸€å¤©å°±éœ€è¦ç”¨ä¸Šäº†ï¼</p>\n<p>ä¾‹å­ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt; </span><br><span class=\"line\">&lt;title&gt;&lt;&#x2F;title&gt; </span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">body &#123;</span><br><span class=\"line\">    background-color: pink;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@media screen and (max-width: 960px) &#123;</span><br><span class=\"line\">    body &#123;</span><br><span class=\"line\">        background-color: darkgoldenrod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">@media screen and (max-width: 480px) &#123;</span><br><span class=\"line\">    body &#123;</span><br><span class=\"line\">        background-color: lightgreen;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;h1&gt;é‡ç½®æµè§ˆå™¨çª—å£æŸ¥çœ‹æ•ˆæœï¼&lt;&#x2F;h1&gt;</span><br><span class=\"line\">&lt;p&gt;å¦‚æœåª’ä½“ç±»å‹å±å¹•çš„å¯è§†çª—å£å®½åº¦å°äº 960 px ï¼ŒèƒŒæ™¯é¢œè‰²å°†æ”¹å˜ã€‚&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;p&gt;å¦‚æœåª’ä½“ç±»å‹å±å¹•çš„å¯è§†çª—å£å®½åº¦å°äº 480 px ï¼ŒèƒŒæ™¯é¢œè‰²å°†æ”¹å˜ã€‚&lt;&#x2F;p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgPW?w=1022&h=157\" alt=\"clipboard.png\"></p>\n<h2 id=\"19-æ··åˆæ¨¡å¼\"><a href=\"#19-æ··åˆæ¨¡å¼\" class=\"headerlink\" title=\"19.æ··åˆæ¨¡å¼\"></a>19.æ··åˆæ¨¡å¼</h2><p>æ··åˆæ¨¡å¼ï¼Œå°±åƒphotoshopé‡Œé¢çš„æ··åˆæ¨¡å¼ï¼è¿™ä¸€å—ï¼Œæˆ‘äº†è§£è¿‡ï¼Œåœ¨é¡¹ç›®ä¸Šæ²¡ç”¨è¿‡ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªåº”è¯¥ä¸ä¼šæ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ï¼<br>css3çš„æ··åˆæ¨¡å¼ï¼Œä¸¤ä¸ªï¼ˆbackground-blend-modeå’Œmix-blend-modeï¼‰ã€‚è¿™ä¸¤ä¸ªå†™æ³•å’Œæ˜¾ç¤ºæ•ˆæœéƒ½éå¸¸åƒï¼åŒºåˆ«å°±åœ¨äºbackground-blend-modeæ˜¯ç”¨äºåŒä¸€ä¸ªå…ƒç´ çš„èƒŒæ™¯å›¾ç‰‡å’ŒèƒŒæ™¯é¢œè‰²çš„ã€‚mix-blend-modeç”¨äºä¸€ä¸ªå…ƒç´ çš„èƒŒæ™¯å›¾ç‰‡æˆ–è€…é¢œè‰²å’Œå­å…ƒç´ çš„ã€‚çœ‹ä»¥ä¸‹ä»£ç ï¼ŒåŒºåˆ«å°±å‡ºæ¥äº†ï¼</p>\n<blockquote>\n<p>è¿™ä¸€å—å›¾ç‰‡å¾ˆå¤šï¼Œå¤§å®¶çœ‹å›¾ç‰‡å¿«é€Ÿæ‰«ä¸€çœ¼ï¼Œçœ‹ä¸‹ä»€ä¹ˆæ•ˆæœå°±å¥½ï¼</p>\n</blockquote>\n<h3 id=\"background-blend-mode\"><a href=\"#background-blend-mode\" class=\"headerlink\" title=\"background-blend-mode\"></a>background-blend-mode</h3><p>ä»£ç </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        div&#123;</span><br><span class=\"line\">            width: 480px;</span><br><span class=\"line\">            height: 300px;</span><br><span class=\"line\">            background:url(&#39;test.jpg&#39;)no-repeat,#09f;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;!----&gt;</span><br><span class=\"line\">        </span><br><span class=\"line\">        &lt;p&gt;åŸå›¾&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;multiplyæ­£ç‰‡å åº•&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: multiply;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;screenæ»¤è‰²&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: screen;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;overlayå åŠ &lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: overlay;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;darkenå˜æš—&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: darken;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;lightenå˜äº®&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: lighten;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;color-dodgeé¢œè‰²å‡æ·¡æ¨¡å¼&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: color-dodge;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;color-burné¢œè‰²åŠ æ·±&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: color-burn;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;hard-lightå¼ºå…‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: hard-light;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;soft-lightæŸ”å…‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: soft-light;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;differenceå·®å€¼&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: difference;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;exclusionæ’é™¤&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: exclusion;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;hueè‰²ç›¸&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: hue;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;saturationé¥±å’Œåº¦&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: saturation;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;coloré¢œè‰²&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: color;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;luminosityäº®åº¦&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div style&#x3D;&quot;background-blend-mode: luminosity;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgPX?w=502&h=362\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgPZ?w=506&h=710\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP0?w=512&h=711\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP1?w=516&h=711\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP2?w=514&h=353\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP3?w=523&h=709\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP6?w=521&h=708\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgP9?w=544&h=713\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQa?w=525&h=705\" alt=\"clipboard.png\"></p>\n<h3 id=\"mix-blend-mode\"><a href=\"#mix-blend-mode\" class=\"headerlink\" title=\"mix-blend-mode\"></a>mix-blend-mode</h3><p>ä»£ç </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">    &lt;head&gt;</span><br><span class=\"line\">        &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">        &lt;title&gt;&lt;&#x2F;title&gt;</span><br><span class=\"line\">    &lt;&#x2F;head&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        div&#123;</span><br><span class=\"line\">            padding: 20px;</span><br><span class=\"line\">            width: 480px;</span><br><span class=\"line\">            background: #09f;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\">    &lt;body&gt;</span><br><span class=\"line\">        &lt;p&gt;åŸå›¾&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;multiplyæ­£ç‰‡å åº•&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: multiply;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;screenæ»¤è‰²&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: screen;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;overlayå åŠ &lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: overlay;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;darkenå˜æš—&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: darken;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;lightenå˜äº®&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: lighten;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;color-dodgeé¢œè‰²å‡æ·¡æ¨¡å¼&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: color-dodge;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;color-burné¢œè‰²åŠ æ·±&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: color-burn;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;hard-lightå¼ºå…‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: hard-light;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;soft-lightæŸ”å…‰&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: soft-light;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;differenceå·®å€¼&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: difference;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;exclusionæ’é™¤&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: exclusion;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;hueè‰²ç›¸&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: hue;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;saturationé¥±å’Œåº¦&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: saturation;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;coloré¢œè‰²&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: color;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;p&gt;luminosityäº®åº¦&lt;&#x2F;p&gt;</span><br><span class=\"line\">        &lt;div&gt;&lt;img src&#x3D;&quot;test.jpg&quot; style&#x3D;&quot;mix-blend-mode: luminosity;&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œæ•ˆæœ</p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQd?w=556&h=406\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQf?w=550&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQk?w=554&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQm?w=554&h=398\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQp?w=551&h=401\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQs?w=544&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQv?w=568&h=402\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQx?w=555&h=391\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQz?w=563&h=404\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgQB?w=553&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTjea?w=556&h=399\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTgSP?w=551&h=396\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTjeh?w=560&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTjem?w=558&h=400\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTjep?w=547&h=402\" alt=\"clipboard.png\"></p>\n<p><img data-src=\"https://segmentfault.com/img/bVTjeq?w=551&h=395\" alt=\"clipboard.png\"></p>\n<h1 id=\"9-CSSæ ·å¼éš”ç¦»\"><a href=\"#9-CSSæ ·å¼éš”ç¦»\" class=\"headerlink\" title=\"9.CSSæ ·å¼éš”ç¦»\"></a>9.CSSæ ·å¼éš”ç¦»</h1><p>CSS in JSï¼Œæ„æ€å°±æ˜¯ä½¿ç”¨ js è¯­è¨€å†™ cssï¼Œå®Œå…¨ä¸éœ€è¦äº›å•ç‹¬çš„ css æ–‡ä»¶ï¼Œæ‰€æœ‰çš„ css ä»£ç å…¨éƒ¨æ”¾åœ¨ç»„ä»¶å†…éƒ¨ï¼Œä»¥å®ç° css çš„æ¨¡å—åŒ–ã€‚</p>\n<p>CSS in JS å…¶å®æ˜¯ä¸€ç§ç¼–å†™æ€æƒ³ï¼Œç›®å‰å·²ç»æœ‰è¶…è¿‡ 40 å¤šç§æ–¹æ¡ˆçš„å®ç°ï¼Œæœ€å‡ºåçš„æ˜¯ styled-componentsã€‚</p>\n<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">import React from &quot;react&quot;;</span><br><span class=\"line\">import styled from &quot;styled-components&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªå¸¦æ ·å¼çš„ h1 æ ‡ç­¾</span><br><span class=\"line\">const Title &#x3D; styled.h1&#96;</span><br><span class=\"line\">  font-size: 1.5em;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">  color: palevioletred;</span><br><span class=\"line\">&#96;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªå¸¦æ ·å¼çš„ section æ ‡ç­¾</span><br><span class=\"line\">const Wrapper &#x3D; styled.section&#96;</span><br><span class=\"line\">  padding: 4em;</span><br><span class=\"line\">  background: papayawhip;</span><br><span class=\"line\">&#96;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; é€šè¿‡å±æ€§åŠ¨æ€å®šä¹‰æ ·å¼</span><br><span class=\"line\">const Button &#x3D; styled.button&#96;</span><br><span class=\"line\">  background: $&#123;props &#x3D;&gt; (props.primary ? &quot;palevioletred&quot; : &quot;white&quot;)&#125;;</span><br><span class=\"line\">  color: $&#123;props &#x3D;&gt; (props.primary ? &quot;white&quot; : &quot;palevioletred&quot;)&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  font-size: 1em;</span><br><span class=\"line\">  margin: 1em;</span><br><span class=\"line\">  padding: 0.25em 1em;</span><br><span class=\"line\">  border: 2px solid palevioletred;</span><br><span class=\"line\">  border-radius: 3px;</span><br><span class=\"line\">&#96;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æ ·å¼å¤ç”¨</span><br><span class=\"line\">const TomatoButton &#x3D; styled(Button)&#96;</span><br><span class=\"line\">  color: tomato;</span><br><span class=\"line\">  border-color: tomato;</span><br><span class=\"line\">&#96;;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;Wrapper&gt;</span><br><span class=\"line\">  &lt;Title&gt;Hello World, this is my first styled component!&lt;&#x2F;Title&gt;</span><br><span class=\"line\">  &lt;Button primary&gt;Primary&lt;&#x2F;Button&gt;</span><br><span class=\"line\">&lt;&#x2F;Wrapper&gt;;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ js ä¸­ç¼–å†™ cssï¼Œæ¡ˆä¾‹ä¸­åœ¨å®šä¹‰æºç”Ÿ html æ—¶å°±åˆ›å»ºå¥½äº†æ ·å¼ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥æ¸²æŸ“å‡ºå¸¦æ ·å¼çš„ç»„ä»¶äº†ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–æ¯”è¾ƒå‡ºåçš„åº“ï¼š</p>\n<ul>\n<li>emotion</li>\n<li>radium</li>\n<li>glamorous</li>\n</ul>\n<p>æ—¥å¸¸çš„å¼€å‘æ¨¡å¼ å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ã€‚</p>\n<ul>\n<li>å…¨å±€æ±¡æŸ“ï¼šCSS é€‰æ‹©å™¨çš„ä½œç”¨åŸŸæ˜¯å…¨å±€çš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å¼•èµ·é€‰æ‹©å™¨å†²çªï¼›è€Œä¸ºäº†é¿å…å…¨å±€å†²çªï¼Œåˆä¼šå¯¼è‡´ç±»å‘½åçš„å¤æ‚åº¦ä¸Šå‡</li>\n<li>å¤ç”¨æ€§ä½ï¼šCSS ç¼ºå°‘æŠ½è±¡çš„æœºåˆ¶ï¼Œé€‰æ‹©å™¨å¾ˆå®¹æ˜“å‡ºç°é‡å¤ï¼Œä¸åˆ©äºç»´æŠ¤å’Œå¤ç”¨</li>\n</ul>\n<p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæœ‰ä¸€äº›æ–¹æ¡ˆã€‚ vue æ¡†æ¶å·²ç»å¸®æˆ‘ä»¬å®ç°äº† css æ¨¡å—åŒ–, é€šè¿‡ style æ ‡ç­¾çš„ scoped æŒ‡ä»¤å®šä¹‰ä½œç”¨åŸŸï¼Œé€šè¿‡ç¼–è¯‘ä¸ºè¯¥ä½œç”¨åŸŸæ‰€æœ‰æ ‡ç­¾ç”Ÿæˆå”¯ä¸€çš„å±æ€§ã€‚å¦‚å›¾ï¼š <img data-src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b86cc72b94e4df49adb0fba1ffee3eb~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"img\"> ä½†æ˜¯ react å¹¶æœªç»™æˆ‘ä»¬å®ç°ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šèƒ½é€šè¿‡å…¶å®ƒæ–¹æ¡ˆæ¥å®ç°ï¼Œå¦‚ï¼šçº¦å®š css class å‘½åè§„èŒƒ(å‘½åç©ºé—´) åŠ ä¸Šä¸šåŠ¡å‰ç¼€ï¼Œæˆ–è€…å°è£…ç»„ä»¶, æˆ–è€…<a href=\"https://bemcss.com/\">BEM å‘½åè§„èŒƒ(block-element-modife)</a>/<a href=\"https://segmentfault.com/a/1190000012705634\">BEM ç®€ä»‹</a>ã€ ä½†å¹¶ä¸èƒ½è§£å†³æ ¹æºé—®é¢˜ï¼Œåè€Œä½¿ä»£ç æ›´éš¾ç»´æŠ¤ã€‚</p>\n<h2 id=\"ç›®å‰ä¸»æµçš„-css-æ¨¡å—åŒ–åˆ†ä¸º-css-modules-å’Œ-css-in-js-ä¸¤ç§æ–¹æ¡ˆ\"><a href=\"#ç›®å‰ä¸»æµçš„-css-æ¨¡å—åŒ–åˆ†ä¸º-css-modules-å’Œ-css-in-js-ä¸¤ç§æ–¹æ¡ˆ\" class=\"headerlink\" title=\"ç›®å‰ä¸»æµçš„ css æ¨¡å—åŒ–åˆ†ä¸º css modules å’Œ css in js ä¸¤ç§æ–¹æ¡ˆ\"></a>ç›®å‰ä¸»æµçš„ css æ¨¡å—åŒ–åˆ†ä¸º css modules å’Œ css in js ä¸¤ç§æ–¹æ¡ˆ</h2><h3 id=\"css-modules\"><a href=\"#css-modules\" class=\"headerlink\" title=\"css modules\"></a>css modules</h3><blockquote>\n<p>CSS Modules æŒ‡çš„æ˜¯æˆ‘ä»¬åƒ import js ä¸€æ ·å»å¼•å…¥æˆ‘ä»¬çš„ css ä»£ç ï¼Œä»£ç ä¸­çš„æ¯ä¸€ä¸ªç±»åéƒ½æ˜¯å¼•å…¥å¯¹è±¡çš„ä¸€ä¸ªå±æ€§, ç¼–è¯‘æ—¶ä¼šå°† css ç±»å åŠ ä¸Šå”¯ä¸€ hashã€‚</p>\n</blockquote>\n<p>css module éœ€è¦ webpack é…ç½® css-loader æˆ–è€… scss-loader , module ä¸º true</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    loader: <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">    options: &#123;</span><br><span class=\"line\">        modules: <span class=\"literal\">true</span>, <span class=\"comment\">// å¼€å¯æ¨¡å—åŒ–</span></span><br><span class=\"line\">        localIdentName: <span class=\"string\">&#x27;[path][name]-[local]-[hash:base64:5]&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š <img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e81eff3bce7b4d168b7cf72899d75325~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"æ•ˆæœå›¾\"></p>\n<p>è®²è§£ä¸€ä¸‹ localIdentName è‡ªå®šä¹‰ç”Ÿæˆçš„ç±»åæ ¼å¼ï¼Œå¯é€‰å‚æ•°æœ‰ï¼š</p>\n<ul>\n<li>[path]è¡¨ç¤ºæ ·å¼è¡¨ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•æ‰€åœ¨çš„è·¯å¾„(é»˜è®¤ä¸æ‹¼æ¥)</li>\n<li>[name] è¡¨ç¤ºæ ·å¼è¡¨æ–‡ä»¶åç§°</li>\n<li>[local] è¡¨ç¤ºæ ·å¼è¡¨çš„ç±»åå®šä¹‰åç§°</li>\n<li>[hash:length] è¡¨ç¤º 32 ä½çš„ hash å€¼ æ³¨æ„ï¼šåªæœ‰ç±»åé€‰æ‹©å™¨å’Œ ID é€‰æ‹©å™¨æ‰ä¼šè¢«æ¨¡å—åŒ–æ§åˆ¶ï¼Œç±»ä¼¼ body h2 span è¿™äº›æ ‡ç­¾é€‰æ‹©å™¨æ˜¯ä¸ä¼šè¢«æ¨¡å—åŒ–æ§åˆ¶</li>\n</ul>\n<p>css module ä½œç”¨åŸŸ</p>\n<ul>\n<li>ä½œç”¨åŸŸé»˜è®¤ä¸º local å³åªåœ¨å½“å‰æ¨¡å—ç”Ÿæ•ˆ</li>\n<li>global è¢« :global åŒ…è£¹èµ·æ¥çš„ç±»åï¼Œä¸ä¼šè¢«æ¨¡å—åŒ–</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* åŠ ä¸Š :global ä¼šå…¨å±€æ ·å¼ */</span></span><br><span class=\"line\">:<span class=\"function\"><span class=\"title\">global</span>(<span class=\"params\">.<span class=\"built_in\">global</span>-color</span>)</span> &#123;</span><br><span class=\"line\">  color: blue;</span><br><span class=\"line\">  :<span class=\"function\"><span class=\"title\">global</span>(<span class=\"params\">.common-width</span>)</span> &#123;</span><br><span class=\"line\">    width: <span class=\"number\">200</span>px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>css module é«˜çº§ä½¿ç”¨</p>\n<ul>\n<li>å’Œå¤–éƒ¨æ ·å¼æ··ç”¨</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> classNames <span class=\"keyword\">from</span> <span class=\"string\">&#x27;classnames&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨classNames</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> wrapperClassNames = classNames(&#123;</span><br><span class=\"line\">  <span class=\"string\">&#x27;common-show&#x27;</span>: visible,</span><br><span class=\"line\">  <span class=\"string\">&#x27;common-hide&#x27;</span>: !visible,</span><br><span class=\"line\">  [styles1[<span class=\"string\">&#x27;view-wrapper&#x27;</span>]]: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;div className=&#123;wrapperClassNames&#125;&gt;&lt;/div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²</span></span><br><span class=\"line\">&lt;div className=&#123;<span class=\"string\">`<span class=\"subst\">$&#123;styles1.content&#125;</span> <span class=\"subst\">$&#123;styles1.color&#125;</span> common-show`</span>&#125;&gt;</span><br><span class=\"line\">  æˆ‘æ˜¯æ–‡ç« å†…å®¹æˆ‘æ˜¯æ–‡ç« å†…å®¹æˆ‘æ˜¯æ–‡ç« å†…å®¹æˆ‘æ˜¯æ–‡ç« å†…å®¹æˆ‘æ˜¯æ–‡ç« å†…å®¹æˆ‘æ˜¯æ–‡ç« å†…å®¹</span><br><span class=\"line\">&lt;/div&gt;;</span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¦†ç›–ç¬¬ä¸‰æ–¹ UI åº“</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"comment\">/* è¦†ç›–ç¬¬ä¸‰æ–¹UIåº“ æ ·å¼*/</span>&#125;</span><br><span class=\"line\">&lt;div className=&#123;styles1[<span class=\"string\">&#x27;am-button-custom-wrapper&#x27;</span>]&#125;&gt;</span><br><span class=\"line\">  &lt;Button type=&#123;<span class=\"string\">&#x27;primary&#x27;</span>&#125; onClick=&#123;<span class=\"function\">() =&gt;</span> toggle()&#125;&gt;</span><br><span class=\"line\">     &#123;visible ? <span class=\"string\">&#x27;éšè—&#x27;</span> : <span class=\"string\">&#x27;æ˜¾ç¤º&#x27;</span>&#125;</span><br><span class=\"line\">  &lt;/Button&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  è¦†ç›–ç¬¬ä¸‰æ–¹UIåº“çš„ æ ·å¼</span></span><br><span class=\"line\">.am-button-custom-wrapper &#123;</span><br><span class=\"line\">  :<span class=\"built_in\">global</span> &#123;</span><br><span class=\"line\">    .am-button-primary &#123;</span><br><span class=\"line\">      color: red;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"css-in-js\"><a href=\"#css-in-js\" class=\"headerlink\" title=\"css in js\"></a>css in js</h3><ul>\n<li>style å¯¹è±¡</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> style = &#123;</span><br><span class=\"line\">  width: <span class=\"number\">200</span>,</span><br><span class=\"line\">  color: <span class=\"string\">&#x27;#fff&#x27;</span>,</span><br><span class=\"line\">  backgroundColor: <span class=\"string\">&#x27;red&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p><a href=\"https://emotion.sh/docs/introduction\">emotion</a></p>\n</li>\n<li><p>styled-components</p>\n<blockquote>\n<p><a href=\"https://styled-components.com/docs/basics#extending-styles\">styled-components</a> æ˜¯é’ˆå¯¹ React å†™çš„ä¸€å¥— css in js æ¡†æ¶, åœ¨ä½ ä½¿ç”¨ styled-components è¿›è¡Œæ ·å¼å®šä¹‰çš„åŒæ—¶ï¼Œä½ ä¹Ÿå°±åˆ›å»ºäº†ä¸€ä¸ª React ç»„ä»¶ã€‚<a href=\"https://www.jianshu.com/p/27788be90605\">css in js </a></p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">const DivWrapper = styled.div`</span><br><span class=\"line\">  width: &#x27;100%&#x27;;</span><br><span class=\"line\">  <span class=\"selector-tag\">height</span>: 300;</span><br><span class=\"line\">  background-color: $&#123;(props) =&gt; props.color&#125;;</span><br><span class=\"line\">`;</span><br><span class=\"line\"></span><br><span class=\"line\">// å°è£…ç¬¬ä¸‰æ–¹ç»„ä»¶åº“</span><br><span class=\"line\">const AntdButtonWrapper = styled(Button)`</span><br><span class=\"line\">  color: &#x27;red&#x27;;</span><br><span class=\"line\">`;</span><br><span class=\"line\"></span><br><span class=\"line\">// é€šè¿‡å±æ€§åŠ¨æ€å®šä¹‰æ ·å¼</span><br><span class=\"line\">const MyButton = styled.button`</span><br><span class=\"line\">  background: $&#123;(props) =&gt; (props.primary ? &#x27;palevioletred&#x27; : &#x27;white&#x27;)&#125;;</span><br><span class=\"line\">  color: $&#123;(props) =&gt; (props.primary ? &#x27;white&#x27; : &#x27;palevioletred&#x27;)&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-tag\">font-size</span>: 1<span class=\"selector-tag\">em</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">margin</span>: 1<span class=\"selector-tag\">em</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">padding</span>: 0<span class=\"selector-class\">.25em</span> 1<span class=\"selector-tag\">em</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">border</span>: 2<span class=\"selector-tag\">px</span> <span class=\"selector-tag\">solid</span> <span class=\"selector-tag\">palevioletred</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">border-radius</span>: 3<span class=\"selector-tag\">px</span>;</span><br><span class=\"line\">`;</span><br><span class=\"line\"></span><br><span class=\"line\">// æ ·å¼å¤ç”¨</span><br><span class=\"line\">const TomatoButton = styled(MyButton)`</span><br><span class=\"line\">  <span class=\"selector-tag\">color</span>: <span class=\"selector-tag\">tomato</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">border-color</span>: <span class=\"selector-tag\">tomato</span>;</span><br><span class=\"line\">`;</span><br><span class=\"line\"></span><br><span class=\"line\">// åˆ›å»ºå…³é”®å¸§</span><br><span class=\"line\">const rotate = keyframes`</span><br><span class=\"line\">  <span class=\"selector-tag\">from</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">0deg</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-tag\">to</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>: <span class=\"built_in\">rotate</span>(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  `;</span><br><span class=\"line\"></span><br><span class=\"line\">// åˆ›å»ºåŠ¨ç”»ç»„ä»¶</span><br><span class=\"line\">const Rotate = styled.div`</span><br><span class=\"line\">  <span class=\"selector-tag\">display</span>: <span class=\"selector-tag\">inline-block</span>;</span><br><span class=\"line\">  animation: $&#123;rotate&#125; 2s linear infinite;</span><br><span class=\"line\">  <span class=\"selector-tag\">padding</span>: 2<span class=\"selector-tag\">rem</span> 1<span class=\"selector-tag\">rem</span>;</span><br><span class=\"line\">  <span class=\"selector-tag\">font-size</span>: 1<span class=\"selector-class\">.2rem</span>;</span><br><span class=\"line\">`;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>styled-components ä¼˜åŠ¿: æ”¯æŒå°† props ä»¥æ’å€¼çš„æ–¹å¼ä¼ é€’ç»™ç»„ä»¶,ä»¥è°ƒæ•´ç»„ä»¶æ ·å¼, è·¨å¹³å°å¯åœ¨ RN å’Œ next ä¸­ä½¿ç”¨ã€‚ ç¼ºç‚¹ï¼š é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨ä¸å…¼å®¹ã€‚</p>\n<h3 id=\"å¯¹æ¯”æ€»ç»“\"><a href=\"#å¯¹æ¯”æ€»ç»“\" class=\"headerlink\" title=\"å¯¹æ¯”æ€»ç»“\"></a>å¯¹æ¯”æ€»ç»“</h3><p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/30/16f5477372d2bee3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"æ€»ç»“\"></p>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><ul>\n<li><a href=\"https://juejin.im/post/6844904034281734151#heading-9\">æ¢³ç† CSS æ¨¡å—åŒ– </a></li>\n<li><a href=\"https://www.cnblogs.com/yy17yy/p/11618775.html\">styled-component, emotion and jss å¯¹æ¯”</a></li>\n</ul>\n<h1 id=\"10-CSSæ€§èƒ½ä¼˜åŒ–\"><a href=\"#10-CSSæ€§èƒ½ä¼˜åŒ–\" class=\"headerlink\" title=\"10.CSSæ€§èƒ½ä¼˜åŒ–\"></a>10.CSSæ€§èƒ½ä¼˜åŒ–</h1><h2 id=\"æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›\"><a href=\"#æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›\" class=\"headerlink\" title=\"æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›?\"></a>æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›?</h2><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> åˆå¹¶cssæ–‡ä»¶ï¼Œå¦‚æœé¡µé¢åŠ è½½<span class=\"number\">10</span>ä¸ªcssæ–‡ä»¶,æ¯ä¸ªæ–‡ä»¶<span class=\"number\">1</span>kï¼Œé‚£ä¹ˆä¹Ÿè¦æ¯”åªåŠ è½½ä¸€ä¸ª<span class=\"number\">100</span>kçš„cssæ–‡ä»¶æ…¢ã€‚</span><br><span class=\"line\"><span class=\"number\">2.</span> å‡å°‘cssåµŒå¥—ï¼Œæœ€å¥½ä¸è¦åµŒå¥—ä¸‰å±‚ä»¥ä¸Šã€‚</span><br><span class=\"line\"><span class=\"number\">3.</span> ä¸è¦åœ¨IDé€‰æ‹©å™¨å‰é¢è¿›è¡ŒåµŒå¥—ï¼ŒIDæœ¬æ¥å°±æ˜¯å”¯ä¸€çš„è€Œä¸”æƒé™å€¼å¤§ï¼ŒåµŒå¥—å®Œå…¨æ˜¯æµªè´¹æ€§èƒ½ã€‚</span><br><span class=\"line\"><span class=\"number\">4.</span> å»ºç«‹å…¬å…±æ ·å¼ç±»ï¼ŒæŠŠç›¸åŒæ ·å¼æå–å‡ºæ¥ä½œä¸ºå…¬å…±ç±»ä½¿ç”¨ã€‚</span><br><span class=\"line\"><span class=\"number\">5.</span> å‡å°‘é€šé…ç¬¦*æˆ–è€…ç±»ä¼¼[hidden=<span class=\"string\">&quot;true&quot;</span>]è¿™ç±»é€‰æ‹©å™¨çš„ä½¿ç”¨ï¼ŒæŒ¨ä¸ªæŸ¥æ‰¾æ‰€æœ‰...è¿™æ€§èƒ½èƒ½å¥½å—ï¼Ÿ</span><br><span class=\"line\"><span class=\"number\">6.</span> å·§å¦™è¿ç”¨cssçš„ç»§æ‰¿æœºåˆ¶ï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å®šä¹‰äº†ï¼Œå­èŠ‚ç‚¹å°±æ— éœ€å®šä¹‰ã€‚</span><br><span class=\"line\"><span class=\"number\">7.</span> æ‹†åˆ†å‡ºå…¬å…±cssæ–‡ä»¶ï¼Œå¯¹äºæ¯”è¾ƒå¤§çš„é¡¹ç›®å¯ä»¥å°†å¤§éƒ¨åˆ†é¡µé¢çš„å…¬å…±ç»“æ„æ ·å¼æå–å‡ºæ¥æ”¾åˆ°å•ç‹¬cssæ–‡ä»¶é‡Œï¼Œè¿™æ ·ä¸€æ¬¡ä¸‹è½½ åå°±æ”¾åˆ°ç¼“å­˜é‡Œï¼Œå½“ç„¶è¿™ç§åšæ³•ä¼šå¢åŠ è¯·æ±‚ï¼Œå…·ä½“åšæ³•åº”ä»¥å®é™…æƒ…å†µè€Œå®šã€‚</span><br><span class=\"line\"><span class=\"number\">8.</span> ä¸ç”¨cssè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼åªæ˜¯è®©ä½ çš„ä»£ç æ˜¾å¾—æ›´åŠ é…·ç‚«ï¼Œä½†æ˜¯å¯¹æ€§èƒ½çš„æµªè´¹å¯èƒ½æ˜¯è¶…ä¹ä½ æƒ³è±¡çš„ã€‚</span><br><span class=\"line\"><span class=\"number\">9.</span> å°‘ç”¨css restï¼Œå¯èƒ½ä¼šè§‰å¾—é‡ç½®æ ·å¼æ˜¯è§„èŒƒï¼Œä½†æ˜¯å…¶å®å…¶ä¸­æœ‰å¾ˆå¤šæ“ä½œæ˜¯ä¸å¿…è¦ä¸å‹å¥½çš„ï¼Œæœ‰éœ€æ±‚æœ‰å…´è¶£ï¼Œå¯ä»¥é€‰æ‹©normolize.cssã€‚</span><br><span class=\"line\"><span class=\"number\">10.</span> cssSpriteï¼Œåˆæˆæ‰€æœ‰iconå›¾ç‰‡ï¼Œç”¨å®½é«˜åŠ ä¸Šbackground-positionçš„èƒŒæ™¯å›¾æ–¹å¼æ˜¾ç°iconå›¾ï¼Œè¿™æ ·å¾ˆå®ç”¨ï¼Œå‡å°‘äº†httpè¯·æ±‚ã€‚</span><br><span class=\"line\"><span class=\"number\">11.</span> å–„åå·¥ä½œï¼Œcsså‹ç¼©(åœ¨çº¿å‹ç¼©å·¥å…· YUI Compressor)</span><br><span class=\"line\"><span class=\"number\">12.</span> GZIPå‹ç¼©ï¼Œæ˜¯ä¸€ç§æµè¡Œçš„æ–‡ä»¶å‹ç¼©ç®—æ³•ã€‚</span><br><span class=\"line\"><span class=\"number\">123456789101112</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ€§èƒ½ä¼˜åŒ–\"><a href=\"#æ€§èƒ½ä¼˜åŒ–\" class=\"headerlink\" title=\"æ€§èƒ½ä¼˜åŒ–\"></a>æ€§èƒ½ä¼˜åŒ–</h2><blockquote>\n<p><strong>&gt; \\</strong>1. é¿å…ä½¿ç”¨@importï¼Œå¤–éƒ¨çš„cssæ–‡ä»¶ä¸­ä½¿ç”¨@importä¼šä½¿å¾—é¡µé¢åœ¨åŠ è½½æ—¶å¢åŠ é¢å¤–çš„å»¶è¿Ÿã€‚****</p>\n</blockquote>\n<p>é¦–å…ˆï¼Œä½¿ç”¨@importå¼•å…¥cssä¼šå½±å“æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½ã€‚ä½¿ç”¨@importå¼•ç”¨çš„cssæ–‡ä»¶åªæœ‰åœ¨å¼•ç”¨å®ƒçš„é‚£ä¸ªcssæ–‡ä»¶è¢«ä¸‹è½½ï¼Œè§£æä¹‹åï¼Œæµè§ˆå™¨æ‰ä¼šçŸ¥é“è¿˜æœ‰å¦å¤–ä¸€ä¸ªcsséœ€è¦ä¸‹è½½ï¼Œè¿™æ—¶æ‰å»ä¸‹è½½ï¼Œç„¶åä¸‹è½½åå¼€å§‹è§£æï¼Œæ„å»ºrender treeç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œè¿™å°±å¯¼è‡´æµè§ˆå™¨æ— æ³•å¹¶è¡Œä¸‹è½½<br>æ‰€éœ€çš„æ ·å¼æ–‡ä»¶ã€‚<br>å…¶æ¬¡ï¼Œå¤šä¸ª@importä¼šå¯¼è‡´ä¸‹è½½é¡ºåºç´Šä¹±ï¼Œåœ¨IEä¸­ï¼Œ@importä¼šå¼•å‘èµ„æºæ–‡ä»¶çš„ä¸‹è½½é¡ºåºè¢«æ‰“ä¹±ï¼Œå³æ’åˆ—åœ¨@importåé¢çš„jsæ–‡ä»¶ä¼˜å…ˆäº@importä¸‹è½½ï¼Œå¹¶ä¸”æ‰“ä¹±ç”šè‡³ç ´å@importè‡ªèº«çš„å¹¶è¡Œä¸‹è½½ã€‚<br>æ‰€ä»¥ä¸è¦ä½¿ç”¨è¿™ä¸€æ–¹æ³•ï¼Œä½¿ç”¨linkæ ‡ç­¾å°±è¡Œäº†ã€‚</p>\n<blockquote>\n<p><strong>&gt; \\</strong>2.é¿å…è¿‡åˆ†é‡æ’****</p>\n</blockquote>\n<ul>\n<li>æµè§ˆå™¨ä¸ºäº†é‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–æ•´ä¸ªé¡µé¢ï¼Œé‡æ–°è®¡ç®—é¡µé¢å…ƒç´ ä½ç½®å’Œå‡ ä½•ç»“æ„çš„è¿›ç¨‹å«åšreflow</li>\n<li>æµè§ˆå™¨æ ¹æ®å®šä¹‰å¥½çš„æ ·å¼æ¥è®¡ç®—ï¼Œå¹¶å°†å…ƒç´ æ”¾åˆ°è¯¥å‡ºç°çš„ä½ç½®ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšreflow</li>\n<li>é¡µé¢ä¸Šä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹è§¦å‘æ¥reflowï¼Œä¼šå¯¼è‡´ä»–çš„å­èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹é‡æ–°æ¸²æŸ“</li>\n<li>å¯¼è‡´reflowå‘ç”Ÿçš„æƒ…å†µ</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> 1. æ”¹å˜çª—å£çš„å¤§å°  </span><br><span class=\"line\"> 2. æ”¹å˜æ–‡å­—çš„å¤§å°</span><br><span class=\"line\"> 3. æ·»åŠ  åˆ é™¤æ ·å¼è¡¨</span><br><span class=\"line\"> 4. å†…å®¹çš„æ”¹å˜ è¾“å…¥æ¡†è¾“å…¥å†…å®¹ä¹Ÿä¼š</span><br><span class=\"line\"> 5. ä¼ªç±»çš„æ¿€æ´»</span><br><span class=\"line\"> 6. æ“ä½œclasså±æ€§</span><br><span class=\"line\"> 7. è„šæœ¬æ“ä½œdom jsæ”¹å˜cssç±»</span><br><span class=\"line\"> 8. è®¡ç®—offsetWidthå’ŒoffsetHeight</span><br><span class=\"line\"> 9. è®¾ç½®styleå±æ€§</span><br><span class=\"line\"> 10.æ”¹å˜å…ƒç´ çš„å†…å¤–è¾¹è· </span><br><span class=\"line\">12345678910</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¸¸è§é‡æ’å…ƒç´ </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> 1. å¤§å°æœ‰å…³çš„ width,height,padding,margin,border-width,border,min-height</span><br><span class=\"line\"> 2. å¸ƒå±€æœ‰å…³çš„ display,top,position,<span class=\"built_in\">float</span>,left,right,bottom</span><br><span class=\"line\"> 3. å­—ä½“æœ‰å…³çš„ font-size,text-align,font-weight,font-family,line-height,white-space,vertical-align</span><br><span class=\"line\"> 4. éšè—æœ‰å…³çš„ overflow,overflow-x,overflow-y</span><br><span class=\"line\">1234</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å‡å°‘reflowå¯¹æ€§èƒ½çš„å½±å“çš„å»ºè®®</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> 1. ä¸è¦ä¸€æ¡æ¡çš„ä¿®æ”¹domçš„æ ·å¼ï¼Œé¢„å…ˆå®šä¹‰å¥½classï¼Œç„¶åä¿®æ”¹domçš„classname</span><br><span class=\"line\"> 2. ä¸è¦ä¿®æ”¹å½±å“èŒƒå›´è¾ƒå¤§çš„dom</span><br><span class=\"line\"> 3. ä¸ºåŠ¨ç”»å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½</span><br><span class=\"line\"> 4. ä¸è¦tableå¸ƒå±€ï¼Œå› ä¸ºä¸€ä¸ªå¾ˆå°çš„æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ªtableé‡æ–°å¸ƒå±€</span><br><span class=\"line\"> 5. é¿å…è®¾ç½®å¤§é‡çš„styleå±æ€§ï¼Œé€šè¿‡è®¾ç½®styleå±æ€§æ”¹å˜èŠ‚ç‚¹æ ·å¼çš„è¯ï¼Œæ¯ä¸€æ¬¡è®¾ç½®éƒ½ä¼šè§¦å‘ä¸€æ¬¡reflowï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨classå±æ€§</span><br><span class=\"line\"> 6. å¦‚æœcssé‡Œé¢æœ‰è®¡ç®—è¡¨è¾¾å¼ï¼Œæ¯æ¬¡éƒ½ä¼šé‡æ–°è®¡ç®—ä¸€éï¼Œè§¦å‘ä¸€æ¬¡reflow</span><br><span class=\"line\">123456</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>&gt; \\</strong>repaint****</p>\n</blockquote>\n<ol>\n<li>å½“ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜ï¼Œä½†æ˜¯å¸ƒå±€æ²¡æœ‰æ”¹å˜çš„æƒ…å†µ</li>\n<li>å½“å…ƒç´ æ”¹å˜çš„æ—¶å€™ï¼Œä¸å½±å“å…ƒç´ åœ¨é¡µé¢ä¸­çš„ä½ç½®ï¼Œæµè§ˆå™¨ä»…ä»…ä¼šç”¨æ–°çš„æ ·å¼é‡ç»˜æ­¤å…ƒç´ </li>\n<li>å¸¸è§çš„é‡ç»˜å…ƒç´ </li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> - é¢œè‰² color,background</span><br><span class=\"line\"> - è¾¹æ¡†æ ·å¼ border-style,outline-color,outline,outline-style,border-radius,box-shadow,outline-width</span><br><span class=\"line\"> - èƒŒæ™¯æœ‰å…³ background,backgound-image,background-position,background-repeat,background-size</span><br><span class=\"line\">123</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>&gt; CSSåŠ¨ç”»</strong></p>\n</blockquote>\n<ol>\n<li>cssåŠ¨ç”»å¯ç”¨GPUåŠ é€Ÿï¼Œåº”ç”¨GPUçš„å›¾å½¢æ€§èƒ½å¯¹æµè§ˆå™¨ä¸­çš„ä¸€äº›å›¾å½¢æ“ä½œäº¤ç»™GPUå®Œæˆã€‚canvas2Dï¼Œå¸ƒå±€åˆæˆï¼Œcss3è½¬æ¢ï¼Œcss3då˜æ¢ï¼ŒwebGLï¼Œè§†é¢‘</li>\n<li>2dåŠ é€Ÿ</li>\n<li>3dåŠ é€Ÿ</li>\n</ol>\n<blockquote>\n<p><strong>&gt; æ–‡ä»¶å‹ç¼©</strong></p>\n</blockquote>\n<p>æ€§èƒ½ä¼˜åŒ–æ—¶æœ€å®¹æ˜“æƒ³åˆ°çš„ï¼Œä¹Ÿæ˜¯æœ€å¸¸è§çš„æ–¹æ³•ï¼Œå°±æ˜¯æ–‡ä»¶å‹ç¼©ï¼Œè¿™ä¸€æ–¹æ¡ˆå¾€å¾€æ•ˆæœæ˜¾è‘—<br>æ–‡ä»¶çš„å¤§å°ä¼šç›´æ¥å½±å“æµè§ˆå™¨çš„åŠ è½½é€Ÿåº¦ï¼Œè¿™ä¸€ç‚¹åœ¨ç½‘ç»œè¾ƒå·®æ—¶è¡¨ç°å°¤ä¸ºæ˜æ˜¾ï¼Œæ„å»ºå·¥å…·webpackï¼Œgulp/gruntï¼Œrollupï¼Œå‹ç¼©ä¹‹åèƒ½å¤Ÿæ˜æ˜¾å‡å°‘ï¼Œå¯ä»¥å¤§å¤§é™ä½æµè§ˆå™¨çš„åŠ è½½æ—¶é—´ã€‚</p>\n<blockquote>\n<p><strong>&gt; å»é™¤æ— ç”¨CSS</strong></p>\n</blockquote>\n<p>è™½ç„¶æ–‡ä»¶å‹ç¼©èƒ½å¤Ÿé™ä½æ–‡ä»¶å¤§å°ï¼Œä½†cssæ–‡ä»¶å‹ç¼©é€šå¸¸åªä¼šå»é™¤æ— ç”¨çš„ç©ºæ ¼ï¼Œè¿™æ ·å°±é™åˆ¶æ¥cssæ–‡ä»¶çš„å‹ç¼©æ¯”ä¾‹ã€‚å¦‚æœå‹ç¼©åçš„æ–‡ä»¶ä»ç„¶è¶…è¿‡æ¥é¢„æœŸçš„å¤§å°ï¼Œå¯ä»¥è¯•ç€æ‰¾åˆ°å¹¶åˆ é™¤ä»£ç ä¸­æ— ç”¨çš„cssã€‚<br>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šå­˜åœ¨è¿™ä¸¤ç§æ— ç”¨çš„CSSä»£ç ï¼š</p>\n<ol>\n<li>ä¸åŒå…ƒç´ æˆ–è€…å…¶ä»–æƒ…å†µä¸‹çš„é‡å¤ä»£ç ï¼Œ</li>\n<li>æ•´ä¸ªé¡µé¢å†…æ²¡æœ‰ç”Ÿæ•ˆçš„CSSä»£ç </li>\n</ol>\n<blockquote>\n<p><strong>&gt; æœ‰é€‰æ‹©åœ°ä½¿ç”¨é€‰æ‹©å™¨</strong></p>\n</blockquote>\n<p>cssé€‰æ‹©å™¨çš„åŒ¹é…æ˜¯ä»å³å‘å·¦è¿›è¡Œçš„ï¼Œè¿™ä¸€ç­–ç•¥å¯¼è‡´æ¥ä¸åŒç§ç±»çš„é€‰æ‹©å™¨ä¹‹é—´çš„æ€§èƒ½ä¹Ÿå­˜åœ¨å·®å¼‚ã€‚ç›¸æ¯”äº #markdown-content-h3,æ˜¾ç„¶ä½¿ç”¨ #markdown.content h3æ—¶ï¼Œæµè§ˆå™¨ç”Ÿæˆæ¸²æŸ“æ ‘æ‰€è¦èŠ±è´¹çš„æ—¶é—´æ›´å¤šã€‚å› ä¸ºåè€…éœ€è¦å…ˆæ‰¾åˆ°DOMä¸­çš„æ‰€æœ‰h3å…ƒç´ ï¼Œå†è¿‡æ»¤æ‰ç¥–å…ˆå…ƒç´ ä¸æ˜¯.contentçš„ï¼Œæœ€åè¿‡æ»¤æ‰.contentä¸æ˜¯#markdownçš„ã€‚è¯•æƒ³ï¼Œé¡µé¢ä¸­çš„å…ƒç´ æ›´å¤šï¼Œé‚£ä¹ˆåŒ¹é…æ‰€è¦èŠ±è´¹çš„æ—¶é—´ä»£ä»·è‡ªç„¶æ›´é«˜ã€‚<br>æ˜¾å¾—æµè§ˆå™¨åœ¨è¿™ä¸€æ–¹é¢åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä¸åŒé€‰æ‹©å™¨çš„æ€§èƒ½å·®åˆ«å¹¶ä¸æ˜æ˜¾ï¼Œç”šè‡³å¯ä»¥è¯´å·®åˆ«ç”šå¾®ï¼Œæ­¤å¤–ä¸åŒé€‰æ‹©å™¨åœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„æ€§èƒ½è¡¨ç°ä¹Ÿä¸ç»Ÿä¸€ï¼Œåœ¨ç¼–å†™cssçš„æ—¶å€™æ— æ³•å…¼é¡¾æ¯ç§æµè§ˆå™¨ï¼Œé‰´äºè¿™ä¸¤ç‚¹ï¼Œåœ¨ä½¿ç”¨é€‰æ‹©å™¨æ—¶ï¼Œå°½é‡è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"> 1. ä¿æŒç®€å•ï¼Œä¸è¦ä½¿ç”¨åµŒå¥—è¿‡å¤šè¿‡äºå¤æ‚çš„é€‰æ‹©å™¨</span><br><span class=\"line\"> 2. é€šé…ç¬¦å’Œå±æ€§é€‰æ‹©å™¨æ•ˆç‡æœ€ä½ï¼Œéœ€è¦åŒ¹é…çš„å…ƒç´ æœ€å¤šï¼Œå°½é‡é¿å…ä½¿ç”¨ã€‚</span><br><span class=\"line\"> 3. ä¸è¦ä½¿ç”¨ç±»é€‰æ‹©å™¨å’ŒIDé€‰æ‹©å™¨ä¿®é¥°å…ƒç´ æ ‡ç­¾ï¼Œå¦‚ï¼šh3<span class=\"comment\">#markdown-contentï¼Œè¿™ä¸€å¤šæ­¤ä¸€ä¸¾ï¼Œè¿˜ä¼šé™ä½æ•ˆç‡</span></span><br><span class=\"line\"> 4. ä¸è¦ä¸ºäº†è¿½æ±‚é€Ÿåº¦è€Œæ”¾å¼ƒå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</span><br><span class=\"line\">1234</span><br></pre></td></tr></table></figure>\n\n<p>TIPSï¼šä¸ºä»€ä¹ˆcssé€‰æ‹©å™¨æ˜¯ä»å³å‘å·¦åŒ¹é…çš„ï¼Ÿ<br>cssä¸­æ›´å¤šçš„é€‰æ‹©å™¨æ˜¯ä¸ä¼šåŒ¹é…çš„ï¼Œæ‰€ä»¥åœ¨è€ƒè™‘æ€§èƒ½é—®é¢˜æ—¶ï¼Œéœ€è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•åœ¨é€‰æ‹©å™¨ä¸åŒ¹é…æ—¶æå‡æ•ˆç‡ï¼Œä»å³å‘å·¦åŒ¹é…å°±æ˜¯ä¸ºäº†è¾¾æˆè¿™ä¸€ç›®çš„çš„ï¼Œé€šè¿‡è¿™ä¸€ç­–ç•¥èƒ½å¤Ÿä½¿å¾—cssé€‰æ‹©å™¨åœ¨ä¸åŒ¹é…çš„æ—¶å€™æ•ˆç‡æ›´é«˜ã€‚</p>\n<blockquote>\n<p><strong>&gt; å‡å°‘ä½¿ç”¨æ˜‚è´µçš„å±æ€§</strong></p>\n</blockquote>\n<p>åœ¨æµè§ˆå™¨ç»˜åˆ¶å±å¹•æ—¶ï¼Œæ‰€æœ‰éœ€è¦æµè§ˆå™¨è¿›è¡Œæ“ä½œæˆ–è®¡ç®—çš„å±æ€§ç›¸å¯¹è€Œè¨€éƒ½éœ€è¦èŠ±è´¹æ›´å¤§çš„ä»£ä»·ï¼Œè€Œé¡µé¢å‘ç”Ÿé‡ç»˜æ—¶ï¼Œå®ƒä»¬ä¼šé™ä½æµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½ã€‚æ‰€ä»¥åœ¨ç¼–å†™cssæ—¶ï¼Œåº”è¯¥å°½é‡å‡å°‘ä½¿ç”¨æ˜‚è´µå±æ€§ï¼Œå¦‚:<br>box-shadow, border-radius, filter, é€æ˜åº¦, :nth-childç­‰<br>å½“ç„¶å¹¶ä¸æ˜¯ä¸è¦ä½¿ç”¨è¿™äº›å±æ€§ï¼Œè¿™äº›éƒ½æ˜¯ç»å¸¸ä½¿ç”¨çš„å±æ€§ï¼Œåªæ˜¯è¿™é‡Œå¯ä»¥ä½œä¸ºä¸€ä¸ªäº†è§£ã€‚å½“æœ‰å…¶ä»–æ–¹æ¡ˆå¯ä»¥é€‰æ‹©çš„æ—¶å€™ï¼Œå¯ä»¥ä¼˜å…ˆé€‰æ‹©æ²¡æœ‰æ˜‚è´µå±æ€§æˆ–æ˜‚è´µå±æ€§æ›´å°‘çš„æ–¹æ¡ˆï¼Œè¿™ä¸€ç½‘ç«™çš„æ€§èƒ½ä¼šåœ¨ä¸çŸ¥ä¸è§‰ä¸­å¾—åˆ°ä¸€å®šçš„æå‡ã€‚</p>\n<blockquote>\n<p><strong>&gt; ç¡¬ä»¶åŠ é€Ÿçš„å¥½å</strong></p>\n</blockquote>\n<ol>\n<li>ä»…ä»…ä¾é GPUè¿˜æ˜¯ä¸è¡Œçš„ï¼Œè®¸å¤šåŠ¨ç”»è¿˜æ˜¯éœ€è¦CPUçš„ä»‹å…¥ï¼Œè¿æ¥cpuå’ŒGPUçš„æ€»å¸¦å®½ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„æ•°æ®åœ¨cpuå’ŒGPUä¹‹é—´çš„ä¼ è¾“ï¼Œå°½é‡é¿å…é€ æˆé€šé“çš„æ‹¥æŒ¤ï¼Œè¦ä¸€ç›´æ³¨æ„åƒç´ çš„ä¼ è¾“ã€‚</li>\n<li>ä¸€ä¸ªé‡ç‚¹æ˜¯äº†è§£åˆ›å»ºçš„åˆæˆå±‚çš„æ•°é‡ï¼Œæ¯ä¸€ä¸ªå±‚éƒ½å¯¹åº”æ¥ä¸€ä¸ªGPUçº¹ç†ï¼Œå¤ªå¤šçš„å±‚ä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ã€‚</li>\n<li><code>**chrome://flags/#composited-layer-borders**</code>è§‚å¯Ÿçš„åœ°å€ã€‚</li>\n<li>æ¯ä¸€ä¸ªdomå…ƒç´ çš„åˆæˆå±‚éƒ½ä¼šè¢«æ ‡è®°ä¸€ä¸ªé¢å¤–çš„è¾¹æ¡†ï¼Œè¿™ä¸€å°±å¯ä»¥éªŒè¯æ˜¯å¦æœ‰äº†å¾ˆå¤šå±‚</li>\n<li>å¦ä¸€ä¸ªé‡ç‚¹æ˜¯ä¿æŒGPUå’ŒCPUä¹‹é—´ä¼ è¾“é‡è¾¾åˆ°æœ€å°å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå±‚çš„æ›´æ–°æ•°é‡æœ€å¥½æ˜¯ä¸€ä¸ªç†æƒ³çš„å¸¸é‡ï¼Œæ¯æ¬¡å±‚æ›´æ–°çš„æ—¶å€™ï¼Œä¸€å †æ–°çš„åƒç´ å°±å¯èƒ½éœ€è¦ä¼ è¾“ç»™GPUã€‚</li>\n<li>å› ä¸ºä¸ºäº†é«˜æ€§èƒ½ï¼ŒåŠ¨ç”»å¼€å§‹ä¹‹åé¿å…å±‚çš„æ›´æ–°ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œé¿å…åŠ¨ç”»è¿›è¡Œä¸­å…¶ä»–å±‚ä¸€ç›´æ›´æ–°å¯¼è‡´æ‹¥å µã€‚</li>\n<li>ä¹Ÿå°±æ˜¯ä½¿ç”¨è¿™äº›csså±æ€§æ¥å®ç°åŠ¨ç”»ï¼štransformation, opacity, filter</li>\n<li>ä½¿ç”¨æ€§èƒ½å·¥å…·æ£€æµ‹ä¼˜åŒ–çš„åˆç†æ€§ï¼Œtimelineæ£€æµ‹ä¼˜åŒ–æ˜¯å¦åˆç†ï¼Œè¿˜éœ€è¦å®ç°è‡ªåŠ¨æ“ä½œæ¥åšæ€§èƒ½å›å½’æµ‹è¯•ã€‚</li>\n<li>æ£€æµ‹å±‚æ•°å’Œå±‚æ›´æ–°æ¬¡æ•°æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li>\n</ol>\n<h1 id=\"11-CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº\"><a href=\"#11-CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº\" class=\"headerlink\" title=\"11.CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº\"></a>11.CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº</h1><h3 id=\"é›¶ã€ä¸–é—´çš„é“ç†éƒ½æ˜¯æƒ³é€šçš„\"><a href=\"#é›¶ã€ä¸–é—´çš„é“ç†éƒ½æ˜¯æƒ³é€šçš„\" class=\"headerlink\" title=\"é›¶ã€ä¸–é—´çš„é“ç†éƒ½æ˜¯æƒ³é€šçš„\"></a>é›¶ã€ä¸–é—´çš„é“ç†éƒ½æ˜¯æƒ³é€šçš„</h3><p>åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œå‡¡äº‹éƒ½æœ‰ä¸ªå…ˆåé¡ºåºï¼Œå‡¡ç‰©éƒ½æœ‰ä¸ªè®ºèµ„æ’è¾ˆã€‚æ¯”æ–¹è¯´é£Ÿå ‚æ’é˜Ÿæ‰“é¥­ï¼Œå¯¹å§ï¼Œè®²æ±‚å…ˆåˆ°å…ˆå¾—ï¼Œæ€»ä¸å¯èƒ½ä¸€æ‹¥è€Œä¸Šã€‚å†æ¯”å¦‚è¯´è¯è¯­æƒï¼Œè€å©†çš„è¯æ°¸è¿œæ˜¯å¯¹çš„ï¼Œé¢†å¯¼çš„è¯æ°¸è¿œæ˜¯å¯¹çš„ã€‚</p>\n<p>åœ¨CSSå±Šï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚åªæ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤§å®¶æ­Œèˆå‡å¹³ï¼Œçœ‹ä¸å‡ºä»€ä¹ˆå·®å¼‚ï¼Œå³æ‰€è°“çš„ä¼—ç”Ÿå¹³ç­‰ã€‚ä½†æ˜¯ï¼Œå½“å‘ç”Ÿå†²çªå‘ç”Ÿçº è‘›çš„æ—¶å€™ï¼Œæ˜¾ç„¶ï¼Œæ˜¯ä¸å¯èƒ½åšåˆ°å®Œå…¨ç­‰åŒçš„ï¼Œå…ˆåé¡ºåºï¼Œèº«ä»½å·®å¼‚å°±æ˜¾ç°å‡ºæ¥äº†ã€‚ä¾‹å¦‚ï¼Œæ°å…‹å’Œç½—æ–¯ï¼Œåªèƒ½ä¸€äººæµ®åœ¨æœ¨æ¿ä¸Šï¼Œæ­¤æ—¶ï¼Œå‡ºç°äº†å†²çªï¼Œç»“æœå¤§å®¶éƒ½çŸ¥é“çš„ã€‚é‚£å¯¹äºCSSä¸–ç•Œä¸­çš„å…ƒç´ è€Œè¨€ï¼Œæ‰€è°“çš„â€œå†²çªâ€æŒ‡ä»€ä¹ˆå‘¢ï¼Œå…¶ä¸­ï¼Œå¾ˆé‡è¦çš„ä¸€ä¸ªå±‚é¢å°±æ˜¯â€œå±‚å æ˜¾ç¤ºå†²çªâ€ã€‚</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç½‘é¡µå†…å®¹æ˜¯æ²¡æœ‰åç§»è§’çš„å‚ç›´è§†è§‰å‘ˆç°ï¼Œå½“å†…å®¹å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œä¸€å®šä¼šæœ‰ä¸€ä¸ªå‰åçš„å±‚å é¡ºåºäº§ç”Ÿï¼Œæœ‰ç‚¹ç±»ä¼¼äºçœŸå®ä¸–ç•Œä¸­è®ºèµ„æ’è¾ˆçš„æ„Ÿè§‰ã€‚</p>\n<p>è€Œè¦ç†è§£ç½‘é¡µä¸­å…ƒç´ æ˜¯å¦‚ä½•â€œè®ºèµ„æ’è¾ˆâ€çš„ï¼Œå°±éœ€è¦æ·±å…¥ç†è§£CSSä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåºã€‚</p>\n<p>æˆ‘ä»¬å¤§å®¶å¯èƒ½éƒ½ç†Ÿæ‚‰CSSä¸­çš„<code>z-index</code>å±æ€§ï¼Œéœ€è¦è·Ÿå¤§å®¶è®²çš„æ˜¯ï¼Œ<code>z-index</code>å®é™…ä¸Šåªæ˜¯CSSå±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåºä¸­çš„ä¸€å¶å°èˆŸã€‚</p>\n<h3 id=\"ä¸€ã€ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡\"><a href=\"#ä¸€ã€ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡\" class=\"headerlink\" title=\"ä¸€ã€ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡\"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡</h3><p>å±‚å ä¸Šä¸‹æ–‡ï¼Œè‹±æ–‡ç§°ä½œâ€stacking contextâ€. æ˜¯HTMLä¸­çš„ä¸€ä¸ªä¸‰ç»´çš„æ¦‚å¿µã€‚å¦‚æœä¸€ä¸ªå…ƒç´ å«æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå…ƒç´ åœ¨zè½´ä¸Šå°±â€œé«˜äººä¸€ç­‰â€ã€‚</p>\n<p>è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªåè¯-<strong>zè½´</strong>ï¼ŒæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·ä¸å±å¹•çš„è¿™æ¡çœ‹ä¸è§çš„å‚ç›´çº¿ï¼ˆå‚è§ä¸‹å›¾ç¤ºæ„-çº¢çº¿ï¼‰ï¼š<br><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/z-aris.png\" alt=\"ç½‘é¡µä¸­zè½´ç¤ºæ„\"></p>\n<p>å±‚å ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œè·Ÿã€Œ<a href=\"http://www.zhangxinxu.com/wordpress/?p=4588\">å—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡(BFC)</a>ã€ç±»ä¼¼ã€‚ç„¶è€Œï¼Œæ¦‚å¿µè¿™ä¸ªä¸œè¥¿æ˜¯æ¯”è¾ƒè™šæ¯”è¾ƒæŠ½è±¡çš„ï¼Œè¦æƒ³è½»æ¾ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å…·è±¡åŒ–ã€‚</p>\n<p>æ€ä¹ˆä¸ªå…·è±¡åŒ–æ³•å‘¢ï¼Ÿ</p>\n<p>ä½ å¯ä»¥<strong>æŠŠã€Œå±‚å ä¸Šä¸‹æ–‡ã€ç†è§£ä¸ºå½“å®˜</strong>ï¼šç½‘é¡µä¸­æœ‰å¾ˆå¤šå¾ˆå¤šçš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹æˆæ˜¯çœŸå®ä¸–ç•Œçš„èŠ¸èŠ¸ä¼—ç”Ÿã€‚çœŸå®ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººæ˜¯æ™®é€šè€ç™¾å§“ä»¬ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†äººæ˜¯åšå®˜çš„å®˜å‘˜ã€‚OKï¼Œè¿™é‡Œçš„â€œå®˜å‘˜â€å°±å¯ä»¥ç†è§£ä¸ºç½‘é¡µä¸­çš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ã€‚</p>\n<p>æ¢å¥è¯è¯´ï¼Œé¡µé¢ä¸­çš„å…ƒç´ æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå°±å¥½æ¯”æˆ‘ä»¬æ™®é€šè€ç™¾å§“å½“äº†å®˜ï¼Œä¸€æ—¦å½“äº†å®˜ï¼Œç›¸æ¯”æ™®é€šè€ç™¾å§“è€Œè¨€ï¼Œç¦»çš‡å¸æ›´è¿‘äº†ï¼Œå¯¹ä¸å¯¹ï¼Œå°±ç­‰åŒäºç½‘é¡µä¸­å…ƒç´ çº§åˆ«æ›´é«˜ï¼Œç¦»æˆ‘ä»¬ç”¨æˆ·æ›´è¿‘äº†ã€‚</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/emtion/point.gif\" alt=\"ä½ æ‡‚çš„\"></p>\n<h3 id=\"äºŒã€ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³\"><a href=\"#äºŒã€ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³\" class=\"headerlink\" title=\"äºŒã€ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³\"></a>äºŒã€ä»€ä¹ˆæ˜¯å±‚å æ°´å¹³</h3><p>å†æ¥è¯´è¯´å±‚å æ°´å¹³ã€‚â€œå±‚å æ°´å¹³â€è‹±æ–‡ç§°ä½œâ€stacking levelâ€ï¼Œå†³å®šäº†åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ä¸­å…ƒç´ åœ¨zè½´ä¸Šçš„æ˜¾ç¤ºé¡ºåºã€‚levelè¿™ä¸ªè¯å¾ˆå®¹æ˜“è®©æˆ‘ä»¬è”æƒ³åˆ°æˆ‘ä»¬çœŸæ­£ä¸–ç•Œä¸­çš„ä¸‰å…­ä¹ç­‰ã€è®ºèµ„æ’è¾ˆã€‚çœŸå®ä¸–ç•Œä¸­ï¼Œæ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼ŒåŒ…æ‹¬åŒåµåŒèƒèƒï¼Œæœ‰å·®å¼‚å°±æœ‰åŒºåˆ†ã€‚ä¾‹å¦‚ï¼ŒåŒèƒèƒè™½ç„¶é•¿å¾—åƒCtrl+C/Ctrl+Vå¾—åˆ°çš„ï¼Œä½†å®é™…ä¸Šï¼Œå‡ºç”Ÿæ—¶é—´è¿˜æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå…ˆå‡ºç”Ÿçš„é‚£ä¸ªå°±å¤§ï¼Œå¤§å“¥æˆ–å¤§å§ã€‚ç½‘é¡µä¸­çš„å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé¡µé¢ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œä»–ä»¬ä¸€å®šæ˜¯ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼çš„æ’åæ’åºçš„æƒ…å†µå­˜åœ¨ã€‚è€Œè¿™ä¸ªæ’åæ’åºã€è®ºèµ„æ’è¾ˆå°±æ˜¯æˆ‘ä»¬è¿™é‡Œæ‰€è¯´çš„â€œå±‚å æ°´å¹³â€ã€‚å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„å±‚å æ°´å¹³å¯ä»¥ç†è§£ä¸ºå®˜å‘˜çš„èŒçº§ï¼Œ1å“2å“ï¼Œå¿é•¿çœé•¿ä¹‹ç±»ï¼›å¯¹äºæ™®é€šå…ƒç´ ï¼Œè¿™ä¸ªå˜›â€¦â€¦ä½ è‡ªå·±éšæ„ç†è§£ã€‚</p>\n<p>äºæ˜¯ï¼Œæ˜¾è€Œæ˜“è§ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½æœ‰å±‚å æ°´å¹³ï¼ŒåŒ…æ‹¬å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œå±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„å±‚å æ°´å¹³å¯ä»¥ç†è§£ä¸ºå®˜å‘˜çš„èŒçº§ï¼Œ1å“2å“ï¼Œå¿é•¿çœé•¿ä¹‹ç±»ã€‚ç„¶åï¼Œå¯¹äºæ™®é€šå…ƒç´ çš„å±‚å æ°´å¹³ï¼Œæˆ‘ä»¬çš„æ¢è®¨ä»…ä»…å±€é™åœ¨å½“å‰å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸­ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå¦åˆ™æ²¡æœ‰æ„ä¹‰ã€‚</p>\n<p>è¿™ä¹ˆç†è§£å§~ ä¸Šé¢æè¿‡å…ƒç´ å…·æœ‰å±‚å ä¸Šä¸‹æ–‡å¥½æ¯”å½“å®˜ï¼Œå¤§å®¶éƒ½çŸ¥é“çš„ï¼Œè¿™å½“å®˜çš„å®¶é‡Œéƒ½æœ‰ä¸«é¬Ÿå•Šä¿é•–å•Šç®¡å®¶å•Šä»€ä¹ˆçš„ã€‚æ‰€è°“æ‰“ç‹—çœ‹ä¸»äººï¼ŒAå®˜å‘˜å®¶é‡Œçš„ç®¡å®¶å’ŒBå®˜å‘˜å®¶é‡Œçš„ç®¡å®¶åšPKå®é™…ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºä»–ä»¬ç‰›ä¸ç‰›é€¼å®Œå…¨ç”±ä»–ä»¬çš„ä¸»å­å†³å®šçš„ã€‚ä¸€äººå¾—é“é¸¡çŠ¬å‡å¤©ï¼Œä½ è¯´è¿™å’Œç…å®¶é‡Œçš„ç®¡å®¶å’Œä¸ƒä¾ é•‡å¨„çŸ¥å¿å¿ä»¤å®¶é‡Œçš„ç®¡å®¶æœ‰å¯æ¯”æ€§å—ï¼Ÿææ€»ç†çš„ç§˜ä¹¦æ˜¯ä¸æ˜¯åˆ†åˆ†é’Ÿç­äº†ä½ æ‘æ”¯éƒ¨ä¹¦è®°çš„ç§˜ä¹¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p>\n<p>ç¿»è¯‘æˆæœ¯è¯­å°±æ˜¯ï¼šæ™®é€šå…ƒç´ çš„å±‚å æ°´å¹³ä¼˜å…ˆç”±å±‚å ä¸Šä¸‹æ–‡å†³å®šï¼Œå› æ­¤ï¼Œå±‚å æ°´å¹³çš„æ¯”è¾ƒåªæœ‰åœ¨å½“å‰å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸­æ‰æœ‰æ„ä¹‰ã€‚</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/emtion/point.gif\" alt=\"ä½ æ‡‚çš„\"></p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¸ä½åƒä¸‡ä¸è¦æŠŠå±‚å æ°´å¹³å’ŒCSSçš„z-indexå±æ€§æ··ä¸ºä¸€è°ˆã€‚æ²¡é”™ï¼ŒæŸäº›æƒ…å†µä¸‹z-indexç¡®å®å¯ä»¥å½±å“å±‚å æ°´å¹³ï¼Œä½†æ˜¯ï¼Œåªé™äºå®šä½å…ƒç´ ä»¥åŠflexç›’å­çš„å­©å­å…ƒç´ ï¼›è€Œå±‚å æ°´å¹³æ‰€æœ‰çš„å…ƒç´ éƒ½å­˜åœ¨ã€‚</p>\n<h3 id=\"ä¸‰ã€ä»€ä¹ˆæ˜¯å±‚å é¡ºåº\"><a href=\"#ä¸‰ã€ä»€ä¹ˆæ˜¯å±‚å é¡ºåº\" class=\"headerlink\" title=\"ä¸‰ã€ä»€ä¹ˆæ˜¯å±‚å é¡ºåº\"></a>ä¸‰ã€ä»€ä¹ˆæ˜¯å±‚å é¡ºåº</h3><p>å†æ¥è¯´è¯´å±‚å é¡ºåºã€‚â€œå±‚å é¡ºåºâ€è‹±æ–‡ç§°ä½œâ€stacking orderâ€. è¡¨ç¤ºå…ƒç´ å‘ç”Ÿå±‚å æ—¶å€™æœ‰ç€ç‰¹å®šçš„å‚ç›´æ˜¾ç¤ºé¡ºåºï¼Œæ³¨æ„ï¼Œè¿™é‡Œè·Ÿä¸Šé¢ä¸¤ä¸ªä¸ä¸€æ ·ï¼Œä¸Šé¢çš„<strong>å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å æ°´å¹³æ˜¯æ¦‚å¿µ</strong>ï¼Œè€Œè¿™é‡Œçš„<strong>å±‚å é¡ºåºæ˜¯è§„åˆ™</strong>ã€‚</p>\n<p>åœ¨CSS2.1çš„å¹´ä»£ï¼Œåœ¨CSS3è¿˜æ²¡æœ‰å‡ºç°çš„æ—¶å€™ï¼ˆæ³¨æ„è¿™é‡Œçš„å‰æï¼‰ï¼Œå±‚å é¡ºåºè§„åˆ™éµå¾ªä¸‹é¢è¿™å¼ å›¾ï¼š<br><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-07_223349.png\" alt=\"å±‚å é¡ºåº\"></p>\n<p>æœ‰äººå¯èƒ½æœ‰è§è¿‡ç±»ä¼¼å›¾ï¼Œé‚£ä¸ªå›¾æ˜¯å¾ˆå¤šå¾ˆå¤šå¹´å‰è€å¤–ç»˜åˆ¶çš„ï¼Œè‹±æ–‡å†…å®¹ã€‚è€Œæ˜¯æ›´å…³é”®çš„æ˜¯å›½å†…ä¼°è®¡æ²¡æœ‰åŒè¡Œè¿›è¡Œè¿‡éªŒè¯ä¸å®è·µï¼Œå®é™…ä¸Šå¾ˆå¤šå…³é”®ä¿¡æ¯ç¼ºå¤±ã€‚ä¸Šé¢æ˜¯æˆ‘è‡ªå·±æ‰‹åŠ¨é‡ç»˜çš„ä¸­æ–‡ç‰ˆåŒæ—¶è¡¥å……å¾ˆå¤šå…¶ä»–åœ°æ–¹ç»å¯¹æ²¡æœ‰çš„é‡è¦çŸ¥è¯†ä¿¡æ¯ã€‚</p>\n<p>ç¼ºå¤±çš„å…³é”®ä¿¡æ¯åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>ä½äºæœ€ä½æ°´å¹³çš„<code>border</code>/<code>background</code>æŒ‡çš„æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„è¾¹æ¡†å’ŒèƒŒæ™¯è‰²ã€‚æ¯ä¸€ä¸ªå±‚å é¡ºåºè§„åˆ™é€‚ç”¨äºä¸€ä¸ªå®Œæ•´çš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ã€‚</li>\n<li>åŸå›¾æ²¡æœ‰å‘ˆç°inline-blockçš„å±‚å é¡ºåºï¼Œå®é™…ä¸Šï¼Œinline-blockå’Œinlineæ°´å¹³å…ƒç´ æ˜¯åŒç­‰levelçº§åˆ«ã€‚</li>\n<li>z-index:0å®é™…ä¸Šå’Œz-index:autoå•çº¯ä»å±‚å æ°´å¹³ä¸Šçœ‹ï¼Œæ˜¯å¯ä»¥çœ‹æˆæ˜¯ä¸€æ ·çš„ã€‚æ³¨æ„è¿™é‡Œçš„æªè¾â€”â€”â€œå•çº¯ä»å±‚å æ°´å¹³ä¸Šçœ‹â€ï¼Œå®é™…ä¸Šï¼Œä¸¤è€…åœ¨å±‚å ä¸Šä¸‹æ–‡é¢†åŸŸæœ‰ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚</li>\n</ol>\n<p>ä¸‹é¢æˆ‘è¦å‘å¤§å®¶å‘é—®äº†ï¼Œå¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œä¸ºä»€ä¹ˆå†…è”å…ƒç´ çš„å±‚å é¡ºåºè¦æ¯”æµ®åŠ¨å…ƒç´ å’Œå—çŠ¶å…ƒç´ éƒ½é«˜ï¼Ÿ<br><img data-src=\"https://image.zhangxinxu.com/image/emtion/ask.gif\" alt=\"ç–‘é—®\"><br><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-07_235108.png\" alt=\"å±‚å é¡ºåºå…ƒç´ çš„æ ‡æ³¨è¯´æ˜\"></p>\n<p>è¯¸å¦‚<code>border</code>/<code>background</code>ä¸€èˆ¬ä¸ºè£…é¥°å±æ€§ï¼Œè€Œæµ®åŠ¨å’Œå—çŠ¶å…ƒç´ ä¸€èˆ¬ç”¨ä½œå¸ƒå±€ï¼Œè€Œå†…è”å…ƒç´ éƒ½æ˜¯å†…å®¹ã€‚ç½‘é¡µä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯å†…å®¹äº†å“ˆï¼Œå¯¹ä¸å¯¹ï¼</p>\n<p>å› æ­¤ï¼Œä¸€å®šè¦è®©å†…å®¹çš„å±‚å é¡ºåºç›¸å½“é«˜ï¼Œå½“å‘ç”Ÿå±‚å æ˜¯å¾ˆå¥½ï¼Œé‡è¦çš„æ–‡å­—å•Šå›¾ç‰‡å†…å®¹å¯ä»¥ä¼˜å…ˆæš´éœ²åœ¨å±å¹•ä¸Šã€‚ä¾‹å¦‚ï¼Œæ–‡å­—å’Œæµ®åŠ¨å›¾ç‰‡é‡å çš„æ—¶å€™ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-07_235830.jpg\" alt=\"æµ®åŠ¨å’Œæ–‡å­—é‡å \"></p>\n<p>ä¸Šé¢è¯´çš„è¿™äº›å±‚å é¡ºåºè§„åˆ™è¿˜æ˜¯è€æ—¶ä»£çš„ï¼Œå¦‚æœæŠŠCSS3ä¹Ÿç‰µæ‰¯è¿›æ¥ã€‚</p>\n<h3 id=\"å››ã€åŠ¡å¿…ç‰¢è®°çš„å±‚å å‡†åˆ™\"><a href=\"#å››ã€åŠ¡å¿…ç‰¢è®°çš„å±‚å å‡†åˆ™\" class=\"headerlink\" title=\"å››ã€åŠ¡å¿…ç‰¢è®°çš„å±‚å å‡†åˆ™\"></a>å››ã€åŠ¡å¿…ç‰¢è®°çš„å±‚å å‡†åˆ™</h3><p>ä¸‹é¢è¿™ä¸¤ä¸ªæ˜¯å±‚å é¢†åŸŸçš„é»„é‡‘å‡†åˆ™ã€‚å½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œå…¶è¦†ç›–å…³ç³»éµå¾ªä¸‹é¢2ä¸ªå‡†åˆ™ï¼š</p>\n<ol>\n<li><strong>è°å¤§è°ä¸Šï¼š</strong>å½“å…·æœ‰æ˜æ˜¾çš„å±‚å æ°´å¹³æ ‡ç¤ºçš„æ—¶å€™ï¼Œå¦‚è¯†åˆ«çš„z-indxå€¼ï¼Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œå±‚å æ°´å¹³å€¼å¤§çš„é‚£ä¸€ä¸ªè¦†ç›–å°çš„é‚£ä¸€ä¸ªã€‚é€šä¿—è®²å°±æ˜¯å®˜å¤§çš„å‹æ­»å®˜å°çš„ã€‚</li>\n<li><strong>åæ¥å±…ä¸Šï¼š</strong>å½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´ã€å±‚å é¡ºåºç›¸åŒçš„æ—¶å€™ï¼Œåœ¨DOMæµä¸­å¤„äºåé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ ã€‚</li>\n</ol>\n<p>åœ¨CSSå’ŒHTMLé¢†åŸŸï¼Œåªè¦å…ƒç´ å‘ç”Ÿäº†é‡å ï¼Œéƒ½ç¦»ä¸å¼€ä¸Šé¢è¿™ä¸¤ä¸ªé»„é‡‘å‡†åˆ™ã€‚å› ä¸ºåé¢ä¼šæœ‰å¤šä¸ªå®ä¾‹è¯´æ˜ï¼Œè¿™é‡Œå°±åˆ°æ­¤ä¸ºæ­¢ã€‚</p>\n<h3 id=\"äº”ã€å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§\"><a href=\"#äº”ã€å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§\" class=\"headerlink\" title=\"äº”ã€å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§\"></a>äº”ã€å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§</h3><p>å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>\n<ul>\n<li>å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ï¼ˆåŸå› åé¢ä¼šè¯´æ˜ï¼‰ï¼›</li>\n<li>å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ï¼ˆè§<a href=\"http://www.zhangxinxu.com/wordpress/?p=5155\">æ­¤æ–‡ç¬¬äºŒéƒ¨åˆ†è¯´æ˜</a>ï¼‰ï¼›</li>\n<li>å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºå¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ã€‚</li>\n<li>æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯å½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è¦è€ƒè™‘åä»£å…ƒç´ ã€‚</li>\n<li>æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºä¸­ã€‚</li>\n</ul>\n<p>ç¿»è¯‘æˆçœŸå®ä¸–ç•Œè¯­è¨€å°±æ˜¯ï¼š</p>\n<ul>\n<li>å½“å®˜çš„æ¯”è€ç™¾å§“æ›´æœ‰æœºä¼šé¢è§åœ£ä¸Šï¼›</li>\n<li>é¢†å¯¼ä¸‹å»è€ƒå¯Ÿï¼Œä¼šè¢«å½“åœ°å®˜å‘˜é˜»éš”åªçœ‹åˆ°ç¹è£çœ‹ä¸åˆ°çœŸå®æ°‘æƒ…ï¼›</li>\n<li>ä¸€ä¸ªå®¶é‡Œï¼Œçˆ¸çˆ¸å¯ä»¥å½“å®˜ï¼Œå­©å­ä¹Ÿæ˜¯å¯ä»¥åŒæ—¶å½“å®˜çš„ã€‚ä½†æ˜¯ï¼Œå­©å­è¿™ä¸ªå®˜è¦å—çˆ¸çˆ¸æ§åˆ¶ã€‚</li>\n<li>è‡ªå·±å½“å®˜ï¼Œå…„å¼Ÿä¸å å…‰ã€‚æœ‰ä»€ä¹ˆç¦åˆ©æˆ–è€…å˜æ•…åªä¼šå½±å“è‡ªå·±çš„å­©å­ä»¬ã€‚</li>\n<li>æ¯ä¸ªå½“å®˜çš„éƒ½æœ‰å±äºè‡ªå·±çš„å°å›¢ä½“ï¼Œå½“å®¶çœ·ç®¡å®¶å‘ç”Ÿæ‘©æ“¦ç£•ç¢°çš„æ—¶å€™ï¼ˆåŒ…æ‹¬å’Œå…¶ä»–å®˜å‘˜çš„å®¶çœ·ç®¡å®¶ï¼‰ï¼Œéƒ½æ˜¯è¦ä¼˜å…ˆçœ‹å½“å®˜çš„ä¹Ÿå°±æ˜¯ä¸»å­çš„è„¸è‰²ã€‚</li>\n</ul>\n<h3 id=\"å…­ã€å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º\"><a href=\"#å…­ã€å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º\" class=\"headerlink\" title=\"å…­ã€å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º\"></a>å…­ã€å±‚å ä¸Šä¸‹æ–‡çš„åˆ›å»º</h3><p>å–äº†è¿™ä¹ˆå¤šæ–‡å­—ï¼Œåˆ°åº•å±‚å ä¸Šä¸‹æ–‡æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Œå€’æ˜¯æ‹¿å‡ºæ¥ç…ç…å•Šï¼</p>\n<p>å“ˆå“ˆã€‚å¦‚åŒå—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå±‚å ä¸Šä¸‹æ–‡ä¹ŸåŸºæœ¬ä¸Šæ˜¯æœ‰ä¸€äº›ç‰¹å®šçš„CSSå±æ€§åˆ›å»ºçš„ã€‚æˆ‘å°†å…¶æ€»ç»“ä¸º3ä¸ªæµæ´¾ï¼Œä¹Ÿå°±æ˜¯åšå®˜çš„3ç§é€”å¾„ï¼š</p>\n<ol>\n<li><strong>çš‡äº²å›½æˆš</strong>æ´¾ï¼šé¡µé¢æ ¹å…ƒç´ å¤©ç”Ÿå…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œç§°ä¹‹ä¸ºâ€œæ ¹å±‚å ä¸Šä¸‹æ–‡â€ã€‚</li>\n<li><strong>ç§‘è€ƒå…¥é€‰</strong>æ´¾ï¼šz-indexå€¼ä¸ºæ•°å€¼çš„å®šä½å…ƒç´ çš„ä¼ ç»Ÿå±‚å ä¸Šä¸‹æ–‡ã€‚</li>\n<li><strong>å…¶ä»–å½“å®˜é€”å¾„</strong>ï¼šå…¶ä»–CSS3å±æ€§ã€‚</li>\n</ol>\n<p>//zxx: ä¸‹é¢å¾ˆå¤šä¾‹å­æ˜¯å®æ—¶CSSæ•ˆæœï¼Œå»ºè®®æ‚¨å»<a href=\"http://www.zhangxinxu.com/wordpress/?p=5115\">åŸåœ°å€æµè§ˆ</a>ï¼Œä»¥ä¾¿é¢„è§ˆæ›´å‡†ç¡®çš„æ•ˆæœã€‚</p>\n<p><strong>â‘ . æ ¹å±‚å ä¸Šä¸‹æ–‡</strong><br>æŒ‡çš„æ˜¯é¡µé¢æ ¹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ»šåŠ¨æ¡çš„é»˜è®¤çš„å§‹ä½œä¿‘è€…<code>&lt;html&gt;</code>å…ƒç´ ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œç»å¯¹å®šä½å…ƒç´ åœ¨<code>left</code>/<code>top</code>ç­‰å€¼å®šä½çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–å®šä½å…ƒç´ é™åˆ¶ï¼Œä¼šç›¸å¯¹æµè§ˆå™¨çª—å£å®šä½çš„åŸå› ã€‚</p>\n<p><strong>â‘¡. å®šä½å…ƒç´ ä¸ä¼ ç»Ÿå±‚å ä¸Šä¸‹æ–‡</strong><br>å¯¹äºåŒ…å«æœ‰<code>position:relative</code>/<code>position:absolute</code>çš„å®šä½å…ƒç´ ï¼Œä»¥åŠFireFox/IEæµè§ˆå™¨ï¼ˆä¸åŒ…æ‹¬Chromeç­‰webkitå†…æ ¸æµè§ˆå™¨ï¼‰ï¼ˆç›®å‰ï¼Œä¹Ÿå°±æ˜¯2016å¹´åˆæ˜¯è¿™æ ·ï¼‰ä¸‹å«æœ‰<code>position:fixed</code>å£°æ˜çš„å®šä½å…ƒç´ ï¼Œå½“å…¶<code>z-index</code>å€¼ä¸æ˜¯<code>auto</code>çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚</p>\n<p>çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œæœ‰äº›ç°è±¡å°±å¥½ç†è§£äº†ã€‚</p>\n<p>å¦‚ä¸‹HTMLä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style&#x3D;&quot;position:relative; z-index:auto;&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm1.jpg&quot; style&#x3D;&quot;position:absolute; z-index:2;&quot;&gt;    &lt;-- æ¨ªå¦¹å­ --&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div style&#x3D;&quot;position:relative; z-index:auto;&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm2.jpg&quot; style&#x3D;&quot;position:relative; z-index:1;&quot;&gt;    &lt;-- ç«–å¦¹å­ --&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"></p>\n<p>å¤§å®¶ä¼šå‘ç°ï¼Œç«–ç€çš„å¦¹å­(mm2)è¢«æ¨ªç€çš„å¦¹å­(mm1)ç»™è¦†ç›–äº†ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹çˆ¶çº§ç®€å•è°ƒæ•´ä¸‹ï¼ŒæŠŠ<code>z-index:auto</code>æ”¹æˆå±‚å æ°´å¹³ä¸€è‡´çš„<code>z-index:0</code>, ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style&#x3D;&quot;position:relative; z-index:0;&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm1.jpg&quot; style&#x3D;&quot;position:absolute; z-index:2;&quot;&gt;    &lt;-- æ¨ªå¦¹å­ --&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div style&#x3D;&quot;position:relative; z-index:0;&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm2.jpg&quot; style&#x3D;&quot;position:relative; z-index:1;&quot;&gt;    &lt;-- ç«–å¦¹å­ --&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"></p>\n<p>å¤§å®¶ä¼šå‘ç°ï¼Œå°¼ç›åè¿‡æ¥äº†ï¼Œç«–ç€çš„å¦¹å­(mm2)è¿™å›è¶´åœ¨äº†æ¨ªç€çš„å¦¹å­(mm1)èº«ä¸Šã€‚</p>\n<p>å·®åˆ«å°±åœ¨äºï¼Œ<code>z-index:0</code>æ‰€åœ¨çš„<code>&lt;div&gt;</code>å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œè€Œ<code>z-index:auto</code>æ‰€åœ¨çš„<code>&lt;div&gt;</code>å…ƒç´ æ˜¯ä¸€ä¸ªæ™®é€šçš„å…ƒç´ ï¼Œäºæ˜¯ï¼Œé‡Œé¢çš„ä¸¤ä¸ª<code>&lt;img&gt;</code>å¦¹å­çš„å±‚å æ¯”è¾ƒå°±ä¸å—çˆ¶çº§çš„å½±å“ï¼Œä¸¤è€…ç›´æ¥å¥—ç”¨å±‚å é»„é‡‘å‡†åˆ™ï¼Œè¿™é‡Œï¼Œä¸¤è€…æœ‰ç€æ˜æ˜¾ä¸ä¸€çš„<code>z-index</code>å€¼ï¼Œå› æ­¤ï¼Œéµå¾ªâ€œ<strong>è°å¤§è°ä¸Š</strong>â€çš„å‡†åˆ™ï¼Œäºæ˜¯ï¼Œ<code>z-index</code>ä¸º<code>2</code>çš„é‚£ä¸ªæ¨ªå¦¹å­ï¼Œå°±è¶´åœ¨äº†<code>z-index</code>ä¸º<code>1</code>çš„ç«–å¦¹å­èº«ä¸Šã€‚</p>\n<p>è€Œ<code>z-index</code>ä¸€æ—¦å˜æˆæ•°å€¼ï¼Œå“ªæ€•æ˜¯<code>0</code>ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ã€‚æ­¤æ—¶ï¼Œå±‚å è§„åˆ™å°±å‘ç”Ÿäº†å˜åŒ–ã€‚å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§é‡Œé¢æœ€åä¸€æ¡â€”â€”è‡ªæˆä½“ç³»ã€‚ä¸¤ä¸ª<code>&lt;img&gt;</code>å¦¹å­çš„å±‚å é¡ºåºæ¯”è¾ƒå˜æˆäº†ä¼˜å…ˆæ¯”è¾ƒå…¶çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„å±‚å é¡ºåºã€‚è¿™é‡Œï¼Œç”±äºä¸¤è€…éƒ½æ˜¯<code>z-index:0</code>ï¼Œå±‚å é¡ºåºè¿™ä¸€å—ä¸¤è€…ä¸€æ ·å¤§ï¼Œæ­¤æ—¶ï¼Œéµå¾ªå±‚å é»„é‡‘å‡†åˆ™çš„å¦å¤–ä¸€ä¸ªå‡†åˆ™â€œ<strong>åæ¥å±…ä¸Š</strong>â€ï¼Œæ ¹æ®åœ¨DOMæµä¸­çš„ä½ç½®å†³å®šè°åœ¨ä¸Šé¢ï¼Œäºæ˜¯ï¼Œä½äºåé¢çš„ç«–ç€çš„å¦¹å­å°±è‡ªç„¶è€Œç„¶è¶´åœ¨äº†æ¨ªç€çš„å¦¹å­èº«ä¸Šã€‚å¯¹ï¼Œæ²¡é”™ï¼Œ<code>&lt;img&gt;</code>å…ƒç´ ä¸Šçš„<code>z-index</code>æ‰“é…±æ²¹äº†ï¼</p>\n<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç½‘é¡µé‡æ„çš„æ—¶å€™ï¼Œä¼šå‘ç°ï¼Œ<code>z-index</code>åµŒå¥—é”™ä¹±ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å—çˆ¶çº§çš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ å¹²æ‰°äº†ã€‚ç„¶åï¼Œå¯èƒ½æ²¡å¤šå¤§æ„ä¹‰äº†ï¼Œä½†æˆ‘è¿˜æ˜¯æä¸€ä¸‹ï¼Œç®—æ˜¯ç¥­å¥ ä¸‹ï¼ŒIE6/IE7æµè§ˆå™¨æœ‰ä¸ªbugï¼Œå°±æ˜¯<code>z-index:auto</code>çš„å®šä½å…ƒç´ ä¹Ÿä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è¿‡å»ï¼ŒIE6/IE7çš„<code>z-index</code>ä¼šææ­»äººçš„åŸå› ã€‚</p>\n<p>ç„¶åï¼Œæˆ‘å†æä¸€ä¸‹<code>position:fixed</code>, åœ¨è¿‡å»ï¼Œ<code>position:fixed</code>å’Œ<code>relative/absolute</code>åœ¨å±‚å ä¸Šä¸‹æ–‡è¿™ä¸€å—æ˜¯ä¸€è·¯è´§è‰²ï¼Œéƒ½æ˜¯éœ€è¦<code>z-index</code>ä¸ºæ•°å€¼æ‰è¡Œã€‚ä½†æ˜¯ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™èµ·ï¼ŒChromeç­‰webkitå†…æ ¸æµè§ˆå™¨ï¼Œ<code>position:fixed</code>å…ƒç´ å¤©ç„¶å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œæ— éœ€<code>z-index</code>ä¸ºæ•°å€¼ã€‚æ ¹æ®æˆ‘çš„æµ‹è¯•ï¼Œç›®å‰ï¼ŒIEä»¥åŠFireFoxä»æ˜¯è€å¥—è·¯ã€‚</p>\n<p><strong>â‘¢. CSS3ä¸æ–°æ—¶ä»£çš„å±‚å ä¸Šä¸‹æ–‡</strong><br>CSS3çš„å‡ºç°é™¤äº†å¸¦æ¥äº†æ–°å±æ€§ï¼ŒåŒæ—¶è¿˜å¯¹è¿‡å»çš„å¾ˆå¤šè§„åˆ™å‘å‡ºäº†æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼ŒCSS3 <code>transform</code><a href=\"http://www.zhangxinxu.com/wordpress/2015/05/css3-transform-affect/\">å¯¹overflowéšè—å¯¹position:fixedå®šä½çš„å½±å“</a>ç­‰ã€‚è€Œè¿™é‡Œï¼Œå±‚å ä¸Šä¸‹æ–‡è¿™ä¸€å—çš„å½±å“è¦æ›´åŠ å¹¿æ³›ä¸æ˜¾è‘—ã€‚</p>\n<p>å¦‚ä¸‹ï¼š</p>\n<ol>\n<li><code>z-index</code>å€¼ä¸ä¸º<code>auto</code>çš„<code>flex</code>é¡¹(çˆ¶å…ƒç´ <code>display:flex|inline-flex</code>).</li>\n<li>å…ƒç´ çš„<code>opacity</code>å€¼ä¸æ˜¯<code>1</code>.</li>\n<li>å…ƒç´ çš„<code>transform</code>å€¼ä¸æ˜¯<code>none</code>.</li>\n<li>å…ƒç´ <code>mix-blend-mode</code>å€¼ä¸æ˜¯<code>normal</code>.</li>\n<li>å…ƒç´ çš„<code>filter</code>å€¼ä¸æ˜¯<code>none</code>.</li>\n<li>å…ƒç´ çš„<code>isolation</code>å€¼æ˜¯<code>isolate</code>.</li>\n<li><code>will-change</code>æŒ‡å®šçš„å±æ€§å€¼ä¸ºä¸Šé¢ä»»æ„ä¸€ä¸ªã€‚</li>\n<li>å…ƒç´ çš„<code>-webkit-overflow-scrolling</code>è®¾ä¸º<code>touch</code>.</li>\n</ol>\n<p>åŸºæœ¬ä¸Šæ¯ä¸€é¡¹éƒ½æœ‰å¾ˆå¤šæ§½ç‚¹ã€‚</p>\n<p><strong>1. display:flex|inline-flexä¸å±‚å ä¸Šä¸‹æ–‡</strong><br>æ³¨æ„ï¼Œè¿™é‡Œçš„è§„åˆ™æœ‰äº›<del>è´Ÿè´£</del>å¤æ‚ã€‚è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶æ‰èƒ½å½¢æˆå±‚å ä¸Šä¸‹æ–‡ï¼šæ¡ä»¶1æ˜¯çˆ¶çº§éœ€è¦æ˜¯<code>display:flex</code>æˆ–è€…<code>display:inline-flex</code>æ°´å¹³ï¼Œæ¡ä»¶2æ˜¯å­å…ƒç´ çš„z-indexä¸æ˜¯<code>auto</code>ï¼Œå¿…é¡»æ˜¯æ•°å€¼ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªå­å…ƒç´ ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œæ²¡é”™ï¼Œæ³¨æ„äº†ï¼Œæ˜¯å­å…ƒç´ ï¼Œä¸æ˜¯flexçˆ¶çº§å…ƒç´ ã€‚</p>\n<p>çœ¼è§ä¸ºå®ï¼Œç»™å¤§å®¶ä¸Šä¾‹å­å§ã€‚</p>\n<p>å¦‚ä¸‹HTMLå’ŒCSSä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">    \t&lt;img src&#x3D;&quot;mm1.jpg&quot;&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">.box &#123;  &#125;</span><br><span class=\"line\">.box &gt; div &#123; background-color: blue; z-index: 1; &#125;    &#x2F;* æ­¤æ—¶è¯¥divæ˜¯æ™®é€šå…ƒç´ ï¼Œz-indexæ— æ•ˆ *&#x2F;</span><br><span class=\"line\">.box &gt; div &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;     &#x2F;* æ³¨æ„è¿™é‡Œæ˜¯è´Ÿå€¼z-index *&#x2F;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ä¼šå‘ç°ï¼Œå¦¹å­è·‘åˆ°è“è‰²èƒŒæ™¯çš„ä¸‹é¢äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå±‚å é¡ºåºå›¾å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼Œå¦‚ä¸‹ï¼š<br><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-08_235511.png\" alt=\"è´Ÿå€¼z-indexçš„å±‚å é¡ºåº\"></p>\n<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºè´Ÿå€¼z-indexçš„å±‚å é¡ºåºåœ¨blockæ°´å¹³å…ƒç´ çš„ä¸‹é¢ï¼Œè€Œè“è‰²èƒŒæ™¯<code>div</code>å…ƒç´ æ˜¯ä¸ªæ™®é€šå…ƒç´ ï¼Œå› æ­¤ï¼Œå¦¹å­ç›´æ¥ç©¿è¶Šè¿‡å»ï¼Œåœ¨è“è‰²èƒŒæ™¯åé¢çš„æ˜¾ç¤ºäº†ã€‚</p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬CSSå¾®è°ƒä¸‹ï¼Œå¢åŠ <code>display:flex</code>, å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; display: flex; &#125;</span><br><span class=\"line\">.box &gt; div &#123; background-color: blue; z-index: 1; &#125;    &#x2F;* æ­¤æ—¶è¯¥divæ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼ŒåŒæ—¶z-indexç”Ÿæ•ˆ *&#x2F;</span><br><span class=\"line\">.box &gt; div &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;     &#x2F;* æ³¨æ„è¿™é‡Œæ˜¯è´Ÿå€¼z-index *&#x2F;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ä¼šå‘ç°ï¼Œå¦¹å­åœ¨è“è‰²èƒŒæ™¯ä¸Šé¢æ˜¾ç¤ºäº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå±‚å é¡ºåºå›¾å¯ä»¥æ‰¾åˆ°ç­”æ¡ˆï¼Œå¦‚ä¸‹ï¼š<br><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-08_235217.png\" alt=\"img\"></p>\n<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºè´Ÿå€¼<code>z-index</code>çš„å±‚å é¡ºåºåœ¨å½“å‰ç¬¬ä¸€ä¸ªçˆ¶å±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„ä¸Šé¢ï¼Œè€Œæ­¤æ—¶ï¼Œé‚£ä¸ª<code>z-index</code>å€¼ä¸º<code>1</code>çš„è“è‰²èƒŒæ™¯<code>&lt;div&gt;</code>çš„çˆ¶å…ƒç´ çš„<code>display</code>å€¼æ˜¯<code>flex</code>ï¼Œä¸€ä¸‹å­å‡å®˜å‘è´¢å˜æˆå±‚å ä¸Šä¸‹æ–‡å…ƒç´ äº†ï¼Œäºæ˜¯ï¼Œå›¾ç‰‡åœ¨è“è‰²èƒŒæ™¯ä¸Šé¢æ˜¾ç¤ºäº†ã€‚è¿™ä¸ªç°è±¡ä¹Ÿè¯å®äº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ æ˜¯<code>flex</code>å­å…ƒç´ ï¼Œè€Œä¸æ˜¯<code>flex</code>å®¹å™¨å…ƒç´ ã€‚</p>\n<p>å¦å¤–ï¼Œå¦å¤–ï¼Œè¿™ä¸ªä¾‹å­ä¹Ÿé¢ è¦†äº†æˆ‘ä»¬ä¼ ç»Ÿçš„å¯¹<code>z-index</code>çš„ç†è§£ã€‚åœ¨CSS2.1æ—¶ä»£ï¼Œ<code>z-index</code>å±æ€§å¿…é¡»å’Œå®šä½å…ƒç´ ä¸€èµ·ä½¿ç”¨æ‰æœ‰ä½œç”¨ï¼Œä½†æ˜¯ï¼Œåœ¨CSS3çš„ä¸–ç•Œé‡Œï¼Œéå®šä½å…ƒç´ ä¹Ÿèƒ½å’Œ<code>z-index</code>æ„‰å¿«åœ°æåŸºã€‚</p>\n<p><strong>2. opacityä¸å±‚å ä¸Šä¸‹æ–‡</strong><br>æˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ï¼ŒåŸç†å’Œä¸Šé¢ä¾‹å­ä¸€æ ·ï¼Œå°±ä¸è§£é‡Šäº†ã€‚</p>\n<p>å¦‚ä¸‹HTMLå’ŒCSSä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm1.jpg&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">.box &#123; background-color: blue;  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ç„¶åä»·æ ¼é€æ˜åº¦ï¼Œä¾‹å¦‚50%é€æ˜ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; background-color: blue; opacity: 0.5;  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>åŸå› å°±æ˜¯åŠé€æ˜å…ƒç´ å…·æœ‰å±‚å ä¸Šä¸‹æ–‡ï¼Œå¦¹å­å›¾ç‰‡çš„<code>z-index:-1</code>æ— æ³•ç©¿é€ï¼Œäºæ˜¯ï¼Œåœ¨è“è‰²èƒŒæ™¯ä¸Šé¢ä¹–ä¹–æ˜¾ç¤ºäº†ã€‚</p>\n<p><strong>3. transformä¸å±‚å ä¸Šä¸‹æ–‡</strong><br>åº”ç”¨äº†<a href=\"http://www.zhangxinxu.com/wordpress/2010/11/css3-transitions-transforms-animation-introduction/\">transformå˜æ¢</a>çš„å…ƒç´ åŒæ ·å…·æœ‰èœå•ä¸Šä¸‹æ–‡ã€‚</p>\n<p>æˆ‘ä»¬ç›´æ¥çœ‹åº”ç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹CSSä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; background-color: blue; transform: rotate(15deg);  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>å¦¹å­åŒæ ·åœ¨è“è‰²èƒŒæ™¯ä¹‹ä¸Šã€‚</p>\n<p><strong>4. mix-blend-modeä¸å±‚å ä¸Šä¸‹æ–‡</strong><br><code>mix-blend-mode</code>ç±»ä¼¼äºPSä¸­çš„æ··åˆæ¨¡å¼ï¼Œä¹‹å‰ä¸“é—¨æœ‰æ–‡ç« ä»‹ç»-â€œ<a href=\"http://www.zhangxinxu.com/wordpress/2015/05/css3-mix-blend-mode-background-blend-mode/\">CSS3æ··åˆæ¨¡å¼mix-blend-modeç®€ä»‹</a>â€ã€‚</p>\n<p>å…ƒç´ å’Œç™½è‰²èƒŒæ™¯æ··åˆã€‚æ— è®ºå“ªç§æ¨¡å¼ï¼Œè¦ä¹ˆå…¨ç™½ï¼Œè¦ä¹ˆæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚ä¸ºäº†è®©å¤§å®¶æœ‰ç›´è§‚æ„Ÿå—ï¼Œå› æ­¤ï¼Œä¸‹é¢ä¾‹å­æˆ‘ç‰¹æ„åŠ äº†ä¸ªåŸåˆ›å¹³é“ºèƒŒæ™¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; background-color: blue; mix-blend-mode: darken;  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›®å‰ï¼ŒIEæµè§ˆå™¨(åŒ…æ‹¬IE14)è¿˜ä¸æ”¯æŒ<code>mix-blend-mode</code>ï¼Œå› æ­¤ï¼Œè¦æƒ³çœ‹åˆ°å¦¹å­åœ¨èƒŒæ™¯è‰²ä¹‹ä¸Šï¼Œè¯·ä½¿ç”¨Chromeæˆ–FireFoxã€‚</p>\n<p>åŒæ ·çš„ï¼Œå› ä¸ºè“è‰²èƒŒæ™¯å…ƒç´ å‡çº§æˆäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ï¼Œ<code>z-index:-1</code>æ— æ³•ç©¿é€ï¼Œåœ¨è“è‰²èƒŒæ™¯ä¸Šæ˜¾ç¤ºäº†ã€‚</p>\n<p><strong>5. filterä¸å±‚å ä¸Šä¸‹æ–‡</strong><br>æ­¤å¤„è¯´çš„<code>filter</code>æ˜¯CSS3ä¸­è§„èŒƒçš„æ»¤é•œï¼Œä¸æ˜¯æ—§IEæ—¶ä»£ç§æœ‰çš„é‚£äº›ï¼Œè™½ç„¶ç›®çš„ç±»ä¼¼ã€‚åŒæ ·çš„ï¼Œæˆ‘ä¹‹å‰æœ‰æè¿‡ï¼Œä¾‹å¦‚<a href=\"http://www.zhangxinxu.com/wordpress/2012/08/css-svg-filter-image-grayscale/\">å›¾ç‰‡çš„ç°åº¦</a>æˆ–è€…<a href=\"http://www.zhangxinxu.com/wordpress/2013/11/css-svg-image-blur/\">å›¾ç‰‡çš„æ¯›ç»ç’ƒæ•ˆæœ</a>ç­‰ã€‚</p>\n<p>æˆ‘ä»¬ä½¿ç”¨å¸¸è§çš„æ¨¡ç³Šæ•ˆæœç¤ºæ„ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; background-color: blue; filter: blur(5px);  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>å¥½å§ï¼Œæœç„¶è¢«ä½ çŒœå¯¹äº†ï¼Œå¦¹å­è“è‰²åºŠä¸Šèººç€ï¼Œåªæ˜¯ä½ çœ¼é•œæ‘˜äº†ï¼Œçœ‹å¾—æœ‰äº›ä¸å¤ŸçœŸåˆ‡ç½¢äº†ã€‚</p>\n<p><strong>6. isolation:isolateä¸å±‚å ä¸Šä¸‹æ–‡</strong><br><code>isolation:isolate</code>è¿™ä¸ªå£°æ˜æ˜¯<code>mix-blend-mode</code>åº”è¿è€Œç”Ÿçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>mix-blend-mode</code>ä¼šæ··åˆzè½´æ‰€æœ‰å±‚å åœ¨ä¸‹é¢çš„å…ƒç´ ï¼Œè¦æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›æŸä¸ªå±‚å çš„å…ƒç´ å‚ä¸æ··åˆæ€ä¹ˆåŠå‘¢ï¼Ÿå°±æ˜¯ä½¿ç”¨<code>isolation:isolate</code>ã€‚ç”±äºä¸€è¨€éš¾å°½ï¼Œæˆ‘ç‰¹æ„ä¸ºæ­¤å†™äº†ç¯‡æ–‡ç« ï¼šâ€œ<a href=\"http://www.zhangxinxu.com/wordpress/?p=5155\">ç†è§£CSS3 isolation: isolateçš„è¡¨ç°å’Œä½œç”¨</a>â€ï¼Œè§£é‡Šäº†å…¶é˜»éš”æ··åˆæ¨¡å¼çš„åŸç†ï¼Œå»ºè®®å¤§å®¶çœ‹ä¸‹ã€‚</p>\n<p>è¦æ¼”ç¤ºè¿™ä¸ªæ•ˆæœï¼Œæˆ‘éœ€è¦é‡æ–°è®¾è®¡ä¸‹ï¼Œå¦‚ä¸‹HTMLç»“æ„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;img src&#x3D;&quot;img&#x2F;mm2.jpg&quot; class&#x3D;&quot;mode&quot;&gt;</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class=\"line\">    &lt;img src&#x3D;&quot;mm1.jpg&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>CSSä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.mode &#123;</span><br><span class=\"line\">  &#x2F;* ç«–å¦¹å­ç»å¯¹å®šä½ï¼ŒåŒæ—¶æ··åˆæ¨¡å¼ *&#x2F;</span><br><span class=\"line\">  position: absolute; mix-blend-mode: darken;</span><br><span class=\"line\">&#125;    </span><br><span class=\"line\">.box &#123;</span><br><span class=\"line\">  background: blue;         </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æ„å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"></p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ä¼šå‘ç°ï¼Œæ¨ªå¦¹å­è¢«æ··åˆæ¨¡å¼äº†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ç»™å¦¹å­æ‰€åœ¨å®¹å™¨å¢åŠ <code>isolation:isolate</code>ï¼Œå¦‚ä¸‹CSSæ‰€ç¤ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.mode &#123;</span><br><span class=\"line\">  &#x2F;* ç«–å¦¹å­ç»å¯¹å®šä½ï¼ŒåŒæ—¶æ··åˆæ¨¡å¼ *&#x2F;</span><br><span class=\"line\">  position: absolute; mix-blend-mode: darken;</span><br><span class=\"line\">&#125;    </span><br><span class=\"line\">.box &#123;</span><br><span class=\"line\">  background: blue; isolation:isolate;         </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœä¸ºï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"></p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ä¼šå‘ç°æ¨ªç€çš„å¦¹å­è·‘åˆ°è“è‰²èƒŒæ™¯ä¸Šé¢äº†ã€‚è¿™è¡¨æ˜ç¡®å®åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ã€‚</p>\n<p><strong>7. will-changeä¸å±‚å ä¸Šä¸‹æ–‡</strong><br>å…³äº<code>will-change</code>ï¼Œå¦‚æœæœ‰åŒå­¦è¿˜ä¸äº†è§£ï¼Œå¯ä»¥å‚è§æˆ‘ä¹‹å‰å†™çš„æ–‡ç« ï¼šâ€œ<a href=\"http://www.zhangxinxu.com/wordpress/2015/11/css3-will-change-improve-paint/\">ä½¿ç”¨CSS3 will-changeæé«˜é¡µé¢æ»šåŠ¨ã€åŠ¨ç”»ç­‰æ¸²æŸ“æ€§èƒ½</a>â€ã€‚</p>\n<p>éƒ½æ˜¯ç±»ä¼¼çš„æ¼”ç¤ºä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.box &#123; background-color: blue; will-change: transform;  &#125;</span><br><span class=\"line\">.box &gt; img &#123; </span><br><span class=\"line\">  position: relative; z-index: -1; right: -150px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>æœç„¶ä¸å‡ºæ‰€æ–™ï¼Œå¦¹å­ä¸Šäº†è“è‰²çš„èƒŒæ™¯ã€‚</p>\n<h3 id=\"ä¸ƒã€å±‚å ä¸Šä¸‹æ–‡ä¸å±‚å é¡ºåº\"><a href=\"#ä¸ƒã€å±‚å ä¸Šä¸‹æ–‡ä¸å±‚å é¡ºåº\" class=\"headerlink\" title=\"ä¸ƒã€å±‚å ä¸Šä¸‹æ–‡ä¸å±‚å é¡ºåº\"></a>ä¸ƒã€å±‚å ä¸Šä¸‹æ–‡ä¸å±‚å é¡ºåº</h3><p>æœ¬æ–‡å¤šæ¬¡æåˆ°ï¼Œä¸€æ—¦æ™®é€šå…ƒç´ å…·æœ‰äº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå…¶å±‚å é¡ºåºå°±ä¼šå˜é«˜ã€‚é‚£å®ƒçš„å±‚å é¡ºåºç©¶ç«Ÿåœ¨å“ªä¸ªä½ç½®å‘¢ï¼Ÿ</p>\n<p>è¿™é‡Œéœ€è¦åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š</p>\n<ol>\n<li>å¦‚æœå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¸ä¾èµ–<code>z-index</code>æ•°å€¼ï¼Œåˆ™å…¶å±‚å é¡ºåºæ˜¯<code>z-index:auto</code>å¯çœ‹æˆ<code>z:index:0</code>çº§åˆ«ï¼›</li>\n<li>å¦‚æœå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ä¾èµ–<code>z-index</code>æ•°å€¼ï¼Œåˆ™å…¶å±‚å é¡ºåºç”±<code>z-index</code>å€¼å†³å®šã€‚</li>\n</ol>\n<p>äºæ˜¯ä¹ï¼Œæˆ‘ä»¬ä¸Šé¢æä¾›çš„å±‚å é¡ºåºè¡¨ï¼Œå®é™…ä¸Šè¿˜æ˜¯ç¼ºå°‘å…¶ä»–é‡è¦ä¿¡æ¯ã€‚æˆ‘åˆèŠ±åŠŸå¤«é‡æ–°ç»˜åˆ¶äº†ä¸€ä¸ªæ›´å®Œæ•´çš„7é˜¶å±‚å é¡ºåºå›¾ï¼ˆåŒæ ·çš„ç‰ˆæƒæ‰€æœ‰ï¼Œå•†ä¸šè¯·è´­ä¹°ï¼Œå¯å¾—æ— æ°´å°å¤§å›¾ï¼‰ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/blog/201601/2016-01-09_211116.png\" alt=\"æ›´å®Œæ•´çš„7é˜¶å±‚å é¡ºåºå›¾\"></p>\n<p>å¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆå®šä½å…ƒç´ ä¼šå±‚å åœ¨æ™®é€šå…ƒç´ çš„ä¸Šé¢å—ï¼Ÿ</p>\n<p>å…¶æ ¹æœ¬åŸå› å°±åœ¨äºï¼Œå…ƒç´ ä¸€æ—¦æˆä¸ºå®šä½å…ƒç´ ï¼Œå…¶<code>z-index</code>å°±ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ­¤æ—¶å…¶<code>z-index</code>å°±æ˜¯é»˜è®¤çš„<code>auto</code>ï¼Œä¹Ÿå°±æ˜¯<code>0</code>çº§åˆ«ï¼Œæ ¹æ®ä¸Šé¢çš„å±‚å é¡ºåºè¡¨ï¼Œå°±ä¼šè¦†ç›–<code>inline</code>æˆ–<code>block</code>æˆ–<code>float</code>å…ƒç´ ã€‚</p>\n<p>è€Œä¸æ”¯æŒz-indexçš„å±‚å ä¸Šä¸‹æ–‡å…ƒç´ å¤©ç„¶<code>z-index:auto</code>çº§åˆ«ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œå±‚å ä¸Šä¸‹æ–‡å…ƒç´ å’Œå®šä½å…ƒç´ æ˜¯ä¸€ä¸ªå±‚å é¡ºåºçš„ï¼Œäºæ˜¯å½“ä»–ä»¬å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œéµå¾ªçš„æ˜¯â€œåæ¥å±…ä¸Šâ€å‡†åˆ™ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥é€Ÿåº¦æµ‹è¯•ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;img src&#x3D;&quot;mm1&quot; style&#x3D;&quot;position:relative&quot;&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;mm2&quot; style&#x3D;&quot;transform:scale(1);&quot;&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;mm2&quot; style&#x3D;&quot;transform:scale(1);&quot;&gt;</span><br><span class=\"line\">&lt;img src&#x3D;&quot;mm1&quot; style&#x3D;&quot;position:relative&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"><br><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm2.jpg\" alt=\"img\"><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p>ä¼šå‘ç°ï¼Œä¸¤è€…æ ·å¼ä¸€æ¨¡ä¸€æ ·ï¼Œä»…ä»…æ˜¯åœ¨DOMæµä¸­çš„ä½ç½®ä¸ä¸€æ ·ï¼Œå¯¼è‡´ä»–ä»¬çš„å±‚å è¡¨ç°ä¸ä¸€æ ·ï¼Œåé¢çš„å¦¹å­è¶´åœ¨äº†å‰é¢å¦¹å­çš„èº«ä¸Šã€‚è¿™ä¹Ÿè¯´æ˜äº†ï¼Œå±‚å ä¸Šä¸‹æ–‡å…ƒç´ çš„å±‚å é¡ºåºå°±æ˜¯<code>z-index:auto</code>çº§åˆ«ã€‚</p>\n<p><strong>z-indexå€¼ä¸å±‚å é¡ºåº</strong><br>å¦‚æœå…ƒç´ æ”¯æŒz-indexå€¼ï¼Œåˆ™å±‚å é¡ºåºå°±è¦å¥½ç†è§£äº›äº†ï¼Œæ¯”è¾ƒæ•°å€¼å¤§å°å˜›ï¼Œå°ç›†å‹éƒ½ä¼šï¼Œæœ¬è´¨ä¸Šæ˜¯åº”ç”¨çš„â€œè°å¤§è°ä¸Šâ€çš„å‡†åˆ™ã€‚åœ¨ä»¥å‰ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå®šä½å…ƒç´ çš„z-indexå°±å¥½ï¼Œä½†æ˜¯ï¼Œåœ¨CSS3æ—¶ä»£ï¼Œflexå­é¡¹ä¹Ÿæ”¯æŒ<code>z-index</code>ï¼Œä½¿å¾—æˆ‘ä»¬é¢å¯¹çš„æƒ…å†µæ¯”ä»¥å‰è¦è´Ÿå¤æ‚ã€‚ç„¶è€Œï¼Œå¥½çš„æ˜¯ï¼Œè§„åˆ™éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯¹äº<code>z-index</code>çš„ä½¿ç”¨å’Œè¡¨ç°ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¥—ç”¨ä¸Šé¢çš„7é˜¶å±‚å é¡ºåºè¡¨å°±å¯ä»¥äº†ã€‚</p>\n<p>åŒæ ·ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œçœ‹ä¸‹<code>z-index:-1</code>å’Œ<code>z-index:1</code>å˜åŒ–å¯¹å±‚å è¡¨ç°çš„å½±å“ï¼Œå¦‚ä¸‹ä¸¤æ®µHTMLï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style&#x3D;&quot;display:flex; background:blue;&quot;&gt;</span><br><span class=\"line\">   &lt;img src&#x3D;&quot;mm1.jpg&quot; style&#x3D;&quot;z-index:-1;&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;div style&#x3D;&quot;display:flex; background:blue;&quot;&gt;</span><br><span class=\"line\">   &lt;img src&#x3D;&quot;mm1.jpg&quot; style&#x3D;&quot;z-index:1;&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æœ€åï¼Œä¼šå‘ç°ï¼Œ<code>z-index:-1</code>è·‘åˆ°äº†èƒŒæ™¯è‰²å°é¢ï¼Œè€Œ<code>z-index:1</code>é«˜é«˜åœ¨ä¸Šã€‚</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/study/s/s256/mm1.jpg\" alt=\"img\"></p>\n<p><strong>ä¸€ä¸ªä¸å±‚å ä¸Šä¸‹æ–‡ç›¸å…³çš„æœ‰è¶£çš„æ˜¾ç¤ºç°è±¡</strong><br>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ¸è¿›ä½¿ç”¨CSS3çš„fadeInæ·¡å…¥animationæ•ˆæœå¢å¼ºä½“éªŒï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å°±ä¼šé‡åˆ°ç±»ä¼¼ä¸‹é¢çš„ç°è±¡ï¼š</p>\n<p>æ‚¨å¯ä»¥ç‹ ç‹ åœ°ç‚¹å‡»è¿™é‡Œï¼š<a href=\"http://www.zhangxinxu.com/study/201601/css3-fadein-animation-stacking-context.html\">CSS3 fadeInæ·¡å…¥animationåŠ¨ç”»æœ‰è¶£ç°è±¡</a></p>\n<p>æœ‰ä¸€ä¸ªç»å¯¹å®šä½çš„é»‘è‰²åŠé€æ˜å±‚è¦†ç›–åœ¨å›¾ç‰‡ä¸Šï¼Œé»˜è®¤æ˜¾ç¤ºæ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/blog/201801/2018-01-09_004641.png\" alt=\"æ–‡å­—åœ¨å¦¹å­ä¸Š\"></p>\n<p>ä½†æ˜¯ï¼Œä¸€æ—¦å›¾ç‰‡å¼€å§‹èµ°fadeInæ·¡å‡ºçš„CSS3åŠ¨ç”»ï¼Œæ–‡å­—è·‘åˆ°å›¾ç‰‡åé¢å»äº†<img data-src=\"https://mat1.gtimg.com/www/mb/images/face/36.gif\" alt=\"img\">ï¼š</p>\n<p><img data-src=\"https://image.zhangxinxu.com/image/blog/201801/2018-01-09_004654.png\" alt=\"æ–‡å­—è·‘åˆ°å›¾ç‰‡åé¢\"></p>\n<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p>\n<p>å®é™…ä¸Šï¼Œå­¦äº†æœ¬æ–‡çš„å†…å®¹ï¼Œå°±å¾ˆç®€å•äº†ï¼fadeInåŠ¨ç”»æœ¬è´¨æ˜¯<code>opacity</code>é€æ˜åº¦çš„å˜åŒ–ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">@keyframes fadeIn &#123;</span><br><span class=\"line\">  0% &#123; </span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  100% &#123;</span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¦çŸ¥é“ï¼Œ<code>opacity</code>çš„å€¼ä¸æ˜¯<code>1</code>çš„æ—¶å€™ï¼Œæ˜¯å…·æœ‰å±‚å ä¸Šä¸‹æ–‡çš„ï¼Œå±‚å é¡ºåºæ˜¯<code>z-index:auto</code>çº§åˆ«ï¼Œè·Ÿæ²¡æœ‰<code>z-index</code>å€¼çš„<code>absolute</code>ç»å¯¹å®šä½å…ƒç´ æ˜¯å¹³èµ·å¹³åçš„ã€‚è€Œæœ¬demoä¸­çš„æ–‡å­—å…ƒç´ åœ¨å›¾ç‰‡å…ƒç´ çš„å‰é¢ï¼Œäºæ˜¯ï¼Œå½“CSS3åŠ¨ç”»åªè¦ä¸æ˜¯æœ€ç»ˆä¸€ç¬é—´çš„<code>opacity: 1</code>ï¼Œä½äºDOMæµåé¢çš„å›¾ç‰‡å°±ä¼šéµå¾ªâ€œåæ¥å±…ä¸Šâ€å‡†åˆ™ï¼Œè¦†ç›–æ–‡å­—ã€‚</p>\n<p>è¿™å°±æ˜¯åŸå› ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜å°±å¾ˆç®€å•ã€‚</p>\n<ol>\n<li>è°ƒæ•´DOMæµçš„å…ˆåé¡ºåºï¼›</li>\n<li>æé«˜æ–‡å­—çš„å±‚å é¡ºåºï¼Œä¾‹å¦‚ï¼Œè®¾ç½®<code>z-index:1</code>;</li>\n</ol>\n<h3 id=\"å…«ã€ç»“æŸè¯­\"><a href=\"#å…«ã€ç»“æŸè¯­\" class=\"headerlink\" title=\"å…«ã€ç»“æŸè¯­\"></a>å…«ã€ç»“æŸè¯­</h3><p>åªè¦å…ƒç´ å‘ç”Ÿå±‚å ï¼Œè¦è§£é‡Šå…¶è¡¨ç°ï¼ŒåŸºæœ¬ä¸Šå°±æœ¬æ–‡çš„è¿™äº›å†…å®¹äº†ã€‚</p>\n<p>æˆ‘å‘ç°å¾ˆå¤šé‡æ„å°ä¼™ä¼´éƒ½æœ‰z-indexæ»¥ç”¨ï¼Œæˆ–è€…ä½¿ç”¨ä¸è§„èŒƒçš„é—®é¢˜ã€‚æˆ‘è§‰å¾—æœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯å¯¹ç†è§£å±‚å ä¸Šä¸‹æ–‡ä»¥åŠå±‚å é¡ºåºè¿™äº›æ¦‚å¿µéƒ½ä¸äº†è§£ã€‚ä¾‹å¦‚ï¼Œåªè¦ä½¿ç”¨äº†å®šä½å…ƒç´ ï¼Œå°¤å…¶<code>absolute</code>ç»å¯¹å®šä½ï¼Œéƒ½ç¦»ä¸å¼€è®¾ç½®ä¸€ä¸ª<code>z-index</code>å€¼ï¼›æˆ–è€…åªè¦å…ƒç´ è¢«å…¶ä»–å…ƒç´ è¦†ç›–äº†ï¼Œä¾‹å¦‚å˜æˆå®šä½å…ƒç´ æˆ–è€…å¢åŠ <code>z-index</code>å€¼å‡çº§ã€‚é¡µé¢ä¸€å¤æ‚ï¼Œå¿…ç„¶æå¾—ä¹±ä¸ƒå…«ç³Ÿã€‚</p>\n<p>å®é™…ä¸Šï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè§‰å¾—å¤šæ•°å¸¸è§ï¼Œz-indexæ ¹æœ¬å°±æ²¡æœ‰å‡ºç°çš„å¿…è¦ã€‚çŸ¥é“äº†å†…è”å…ƒç´ çš„å±‚å æ°´å¹³æ¯”å—çŠ¶å…ƒç´ é«˜ï¼Œäºæ˜¯ï¼ŒæŸæ¡çº¿ä½ æƒ³è¦†ç›–ä¸Šå»çš„æ—¶å€™ï¼Œéœ€è¦è®¾ç½®<code>position:relative</code>å—ï¼Ÿä¸éœ€è¦ï¼Œ<code>inline-block</code>åŒ–å°±å¯ä»¥ã€‚å› ä¸ºIE6/IE7 <code>position:relative</code>ä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œå¾ˆçƒ¦çš„ã€‚</p>\n<p>OKï¼Œæœ¬æ–‡å·²ç»å¤Ÿé•¿äº†ï¼Œå°±ä¸å¤šå•°å—¦äº†ã€‚</p>\n<p>è¡Œä¸ºåŒ†å¿™ï¼Œå‡ºé”™åœ¨æ‰€éš¾å…ï¼Œæ¬¢è¿å¤§åŠ›æŒ‡æ­£ã€‚ä¹Ÿæ¬¢è¿å„ç§å½¢å¼çš„äº¤æµï¼Œæˆ–è€…æŒ‡å‡ºæ–‡ä¸­æ¦‚å¿µæ€§çš„é”™è¯¯ã€‚</p>\n<p>æ„Ÿè°¢é˜…è¯»ï¼</p>\n<h1 id=\"12-divå±…ä¸­\"><a href=\"#12-divå±…ä¸­\" class=\"headerlink\" title=\"12.divå±…ä¸­\"></a>12.divå±…ä¸­</h1><h2 id=\"ä½¿divæ°´å¹³å‚ç›´å±…ä¸­\"><a href=\"#ä½¿divæ°´å¹³å‚ç›´å±…ä¸­\" class=\"headerlink\" title=\"ä½¿divæ°´å¹³å‚ç›´å±…ä¸­\"></a>ä½¿divæ°´å¹³å‚ç›´å±…ä¸­</h2><h3 id=\"1-flex-å¸ƒå±€å®ç°-ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\"><a href=\"#1-flex-å¸ƒå±€å®ç°-ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\" class=\"headerlink\" title=\"1. flex å¸ƒå±€å®ç° ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\"></a>1. flex å¸ƒå±€å®ç° ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰</h3><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1eccc17f7ff91?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å†…éƒ¨ div è¦æœ‰å®½åº¦</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç :</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;           </span><br><span class=\"line\">        background-color: #ccc;            </span><br><span class=\"line\">        display: flex;            </span><br><span class=\"line\">        display: -webkit-flex;            </span><br><span class=\"line\">        justify-content: center;            </span><br><span class=\"line\">        align-items: center;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        width: 100px;            </span><br><span class=\"line\">        height: 100px;            </span><br><span class=\"line\">        background-color: blue;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">HTML ä»£ç ï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;&lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-position-ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\"><a href=\"#2-position-ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\" class=\"headerlink\" title=\"2. position ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰\"></a>2. position ï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰</h3><p>â€‹            çˆ¶å…ƒç´ è®¾ç½®ä¸ºï¼šposition: relative;</p>\n<p>â€‹            å­å…ƒç´ è®¾ç½®ä¸ºï¼šposition: absolute;</p>\n<p>â€‹            è·ä¸Š50%ï¼Œæ®å·¦50%ï¼Œç„¶åå‡å»å…ƒç´ è‡ªèº«å®½åº¦çš„ä¸€åŠè·ç¦»å°±å¯ä»¥å®ç°</p>\n<p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1ecd08d952a7e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSSä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        position: relative;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        width: 100px;            </span><br><span class=\"line\">        height: 100px;            </span><br><span class=\"line\">        background-color: blue;            </span><br><span class=\"line\">        position: absolute;            </span><br><span class=\"line\">        left: 50%;            </span><br><span class=\"line\">        top: 50%;            </span><br><span class=\"line\">        margin: -50px 0 0 -50px;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">    &lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">HTML ä»£ç ï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;love&lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-position-transform-ï¼ˆå…ƒç´ æœªçŸ¥å®½åº¦ï¼‰\"><a href=\"#3-position-transform-ï¼ˆå…ƒç´ æœªçŸ¥å®½åº¦ï¼‰\" class=\"headerlink\" title=\"3. position transform ï¼ˆå…ƒç´ æœªçŸ¥å®½åº¦ï¼‰\"></a>3. position transform ï¼ˆå…ƒç´ æœªçŸ¥å®½åº¦ï¼‰</h3><p>å¦‚æœå…ƒç´ æœªçŸ¥å®½åº¦ï¼Œåªéœ€å°†ä¸Šé¢ä¾‹å­ä¸­çš„<code> margin: -50px 0 0 -50px;</code>æ›¿æ¢ä¸ºï¼š**<code>transform: translate(-50%,-50%);</code>**</p>\n<p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1ecf67eb4c5a5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        position: relative;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        background-color: blue;            </span><br><span class=\"line\">        position: absolute;            </span><br><span class=\"line\">        top: 50%;            </span><br><span class=\"line\">        left: 50%;            </span><br><span class=\"line\">        transform: translate(-50%, -50%);        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-positionï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰ï¼ˆleftï¼Œrightï¼Œtopï¼Œbottomä¸º0ï¼Œmaiginï¼šauto-ï¼‰\"><a href=\"#4-positionï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰ï¼ˆleftï¼Œrightï¼Œtopï¼Œbottomä¸º0ï¼Œmaiginï¼šauto-ï¼‰\" class=\"headerlink\" title=\"4. positionï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰ï¼ˆleftï¼Œrightï¼Œtopï¼Œbottomä¸º0ï¼Œmaiginï¼šauto ï¼‰\"></a>4. positionï¼ˆå…ƒç´ å·²çŸ¥å®½åº¦ï¼‰ï¼ˆleftï¼Œrightï¼Œtopï¼Œbottomä¸º0ï¼Œmaiginï¼šauto ï¼‰</h3><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1ed33c6187453?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;           </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        position: relative;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        width: 100px;            </span><br><span class=\"line\">        height: 100px;            </span><br><span class=\"line\">        background-color: blue;            </span><br><span class=\"line\">        position: absolute;            </span><br><span class=\"line\">        top: 0;            </span><br><span class=\"line\">        bottom: 0;            </span><br><span class=\"line\">        left: 0;            </span><br><span class=\"line\">        right: 0;            </span><br><span class=\"line\">        margin: auto;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">HTML ä»£ç ï¼š</span><br><span class=\"line\"> &lt;div class&#x3D;&quot;box&quot;&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;love&lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"â˜…ç¬¬å››ç§æƒ…å†µæ–¹æ¡ˆä¸­ï¼Œå¦‚æœå­å…ƒç´ ä¸è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå°†ä¼šé“ºæ»¡æ•´ä¸ªçˆ¶çº§ï¼ˆåº”ç”¨ï¼šæ¨¡æ€æ¡†ï¼‰\"><a href=\"#â˜…ç¬¬å››ç§æƒ…å†µæ–¹æ¡ˆä¸­ï¼Œå¦‚æœå­å…ƒç´ ä¸è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå°†ä¼šé“ºæ»¡æ•´ä¸ªçˆ¶çº§ï¼ˆåº”ç”¨ï¼šæ¨¡æ€æ¡†ï¼‰\" class=\"headerlink\" title=\"â˜…ç¬¬å››ç§æƒ…å†µæ–¹æ¡ˆä¸­ï¼Œå¦‚æœå­å…ƒç´ ä¸è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå°†ä¼šé“ºæ»¡æ•´ä¸ªçˆ¶çº§ï¼ˆåº”ç”¨ï¼šæ¨¡æ€æ¡†ï¼‰\"></a>â˜…ç¬¬å››ç§æƒ…å†µæ–¹æ¡ˆä¸­ï¼Œå¦‚æœå­å…ƒç´ ä¸è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå°†ä¼šé“ºæ»¡æ•´ä¸ªçˆ¶çº§ï¼ˆåº”ç”¨ï¼šæ¨¡æ€æ¡†ï¼‰</h3><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1ed5caebd6979?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        position: relative;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        &#x2F;* å¦‚æœä¸è®¾ç½®å®½é«˜ï¼Œå°†é“ºæ»¡æ•´ä¸ªçˆ¶çº§*&#x2F;            </span><br><span class=\"line\">        background-color: pink;            </span><br><span class=\"line\">        position: absolute;            </span><br><span class=\"line\">        left: 0;            </span><br><span class=\"line\">        right: 0;            </span><br><span class=\"line\">        top: 0;            </span><br><span class=\"line\">        bottom: 0;            </span><br><span class=\"line\">        margin: auto;            </span><br><span class=\"line\">        text-align: center;                    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">HTML:</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;love&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-table-cell-å¸ƒå±€å®ç°\"><a href=\"#5-table-cell-å¸ƒå±€å®ç°\" class=\"headerlink\" title=\"5. table-cell å¸ƒå±€å®ç°\"></a>5. table-cell å¸ƒå±€å®ç°</h3><p>table å®ç°å‚ç›´å±…ä¸­ï¼Œå­é›†å…ƒç´ å¯ä»¥æ˜¯å—å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä¸æ˜¯å—å…ƒç´ </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSSï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        display: table-cell;            </span><br><span class=\"line\">        vertical-align: middle;                    </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        margin-left: 100px;            </span><br><span class=\"line\">        width: 100px;            </span><br><span class=\"line\">        height: 100px;            </span><br><span class=\"line\">        background-color: blue;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;         </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;love&lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä½¿å†…å®¹ï¼ˆæ–‡å­—ï¼Œå›¾ç‰‡ï¼‰æ°´å¹³å‚ç›´å±…ä¸­ï¼ˆtable-cell-å¸ƒå±€ï¼‰\"><a href=\"#ä½¿å†…å®¹ï¼ˆæ–‡å­—ï¼Œå›¾ç‰‡ï¼‰æ°´å¹³å‚ç›´å±…ä¸­ï¼ˆtable-cell-å¸ƒå±€ï¼‰\" class=\"headerlink\" title=\"ä½¿å†…å®¹ï¼ˆæ–‡å­—ï¼Œå›¾ç‰‡ï¼‰æ°´å¹³å‚ç›´å±…ä¸­ï¼ˆtable-cell å¸ƒå±€ï¼‰\"></a>ä½¿å†…å®¹ï¼ˆæ–‡å­—ï¼Œå›¾ç‰‡ï¼‰æ°´å¹³å‚ç›´å±…ä¸­ï¼ˆtable-cell å¸ƒå±€ï¼‰</h2><p>è¡Œå…ƒç´  text-align ï¼šcenterï¼›</p>\n<p>å—å…ƒç´  ï¼šmargin ï¼š0 autoï¼›</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">text-align : center  ç»™å…ƒç´ çš„çˆ¶çº§åŠ ï¼Œå¯ä»¥ä½¿æ–‡æœ¬æˆ–è€…è¡Œçº§å…ƒç´ (ä¾‹å¦‚ï¼šå›¾ç‰‡)æ°´å¹³å±…ä¸­</span><br><span class=\"line\">line-height : å€¼ä¸ºå…ƒç´ çš„é«˜åº¦ï¼Œå¯ä»¥ä½¿å…ƒç´ çš„æ–‡æœ¬å†…å®¹å‚ç›´å±…ä¸­</span><br><span class=\"line\">margin: 0 auto ä½¿ç”¨æ¡ä»¶ï¼šçˆ¶çº§å…ƒç´ å®½åº¦å¯æœ‰å¯æ— ï¼Œå­çº§å…ƒç´ å¿…é¡»ä½¿å—å…ƒç´ ï¼Œè€Œä¸”è¦æœ‰å®½åº¦ï¼ˆå¦åˆ™ç»§æ‰¿çˆ¶çº§ï¼‰</span><br></pre></td></tr></table></figure>\n\n<p><code>displayï¼štable-cell </code>ä¼šä½¿å…ƒç´ è¡¨ç°çš„ç±»ä¼¼ä¸€ä¸ªè¡¨æ ¼ä¸­çš„å•å…ƒæ ¼tdï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§å¯ä»¥å®ç°æ–‡å­—çš„å‚ç›´å±…ä¸­æ•ˆæœã€‚åŒæ—¶å®ƒä¹Ÿä¼šç ´åä¸€äº› CSS å±æ€§ï¼Œä½¿ç”¨ table-cell æ—¶æœ€å¥½ä¸è¦ä¸ float ä»¥åŠ position: absolute ä¸€èµ·ä½¿ç”¨ï¼Œè®¾ç½®äº† table-cell çš„å…ƒç´ å¯¹é«˜åº¦å’Œå®½åº¦é«˜åº¦æ•æ„Ÿï¼Œå¯¹marginå€¼æ— ååº”ï¼Œå¯ä»¥å“ padding çš„è®¾ç½®ï¼Œè¡¨ç°å‡ ä¹ç±»ä¼¼ä¸€ä¸ª td å…ƒç´ ã€‚</p>\n<p>å°ç»“ï¼š </p>\n<ol>\n<li><p>ä¸è¦ä¸ floatï¼šleftï¼Œ position : absoluteï¼Œ ä¸€èµ·ä½¿ç”¨ </p>\n</li>\n<li><p>å¯ä»¥å®ç°å¤§å°ä¸å›ºå®šå…ƒç´ çš„å‚ç›´å±…ä¸­ </p>\n</li>\n<li><p>margin è®¾ç½®æ— æ•ˆï¼Œå“åº” padding è®¾ç½® </p>\n</li>\n<li><p>å¯¹é«˜åº¦å’Œå®½åº¦é«˜åº¦æ•æ„Ÿ </p>\n</li>\n<li><p>ä¸è¦å¯¹ displayï¼štable-cell ä½¿ç”¨ç™¾åˆ†æ¯”è®¾ç½®å®½åº¦å’Œé«˜åº¦</p>\n</li>\n</ol>\n<h3 id=\"åº”ç”¨ï¼š\"><a href=\"#åº”ç”¨ï¼š\" class=\"headerlink\" title=\"åº”ç”¨ï¼š\"></a>åº”ç”¨ï¼š</h3><h3 id=\"1-ä½¿æ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­\"><a href=\"#1-ä½¿æ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­\" class=\"headerlink\" title=\"1. ä½¿æ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­\"></a>1. ä½¿æ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­</h3><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1ee843df854e4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        display: table-cell;            </span><br><span class=\"line\">        text-align: center;&#x2F;*ä½¿å…ƒç´ æ°´å¹³å±…ä¸­ *&#x2F;            </span><br><span class=\"line\">        vertical-align: middle;&#x2F;*ä½¿å…ƒç´ å‚ç›´å±…ä¸­ *&#x2F;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">HTML ä»£ç ï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;love&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ç»™çˆ¶çº§è®¾ç½® display : tableï¼Œå­é›†è®¾ç½® displayï¼štablecell ï¼Œå­é›†ä¼šå……æ»¡å…¨å±</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1eed995e17eef?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: red;            </span><br><span class=\"line\">        display: table;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box .a&#123;            </span><br><span class=\"line\">        display: table-cell;            </span><br><span class=\"line\">        vertical-align: middle;            </span><br><span class=\"line\">        text-align: center;            </span><br><span class=\"line\">        background-color: blue;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">HTML ï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;a&quot;&gt;love&lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-å›¾ç‰‡æ°´å¹³å‚ç›´å±…ä¸­\"><a href=\"#2-å›¾ç‰‡æ°´å¹³å‚ç›´å±…ä¸­\" class=\"headerlink\" title=\"2. å›¾ç‰‡æ°´å¹³å‚ç›´å±…ä¸­\"></a>2. å›¾ç‰‡æ°´å¹³å‚ç›´å±…ä¸­</h3><p>æ•ˆæœå›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1f0a0dfeb3002?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        width: 300px;            </span><br><span class=\"line\">        height: 300px;            </span><br><span class=\"line\">        background-color: skyblue;            </span><br><span class=\"line\">        display: table-cell;            </span><br><span class=\"line\">        text-align: center;            </span><br><span class=\"line\">        vertical-align: middle;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    img&#123;            </span><br><span class=\"line\">        &#x2F;* è®¾ç½®æˆå—å…ƒç´ åï¼Œtext-alignï¼šcenter å°±ä¼šå¤±æ•ˆ *&#x2F;            </span><br><span class=\"line\">        width: 100px;            </span><br><span class=\"line\">        height: 100px;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">HTMLï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;    </span><br><span class=\"line\">    &lt;img src&#x3D;&quot;1.jpg&quot; alt&#x3D;&quot;&quot;&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸­é—´çš„å›¾ç‰‡ä¼šéšç€å¤–å±‚å®¹å™¨çš„å¤§å°è€Œè‡ªåŠ¨æ°´å¹³å‚ç›´å±…ä¸­ï¼Œå…¶å®åŸç†å’Œæ–‡å­—æ°´å¹³å‚ç›´å±…ä¸­ä¸€æ¨¡ä¸€æ ·</p>\n<h3 id=\"3-å…ƒç´ ä¸¤ç«¯å‚ç›´å¯¹é½\"><a href=\"#3-å…ƒç´ ä¸¤ç«¯å‚ç›´å¯¹é½\" class=\"headerlink\" title=\"3. å…ƒç´ ä¸¤ç«¯å‚ç›´å¯¹é½\"></a>3. å…ƒç´ ä¸¤ç«¯å‚ç›´å¯¹é½</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">CSS ä»£ç ï¼š</span><br><span class=\"line\">&lt;style&gt;        </span><br><span class=\"line\">    *&#123;            </span><br><span class=\"line\">        padding: 0;            </span><br><span class=\"line\">        margin: 0;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .box&#123;            </span><br><span class=\"line\">        display: table;            </span><br><span class=\"line\">        width: 90%;            </span><br><span class=\"line\">        margin: 10px  auto;            </span><br><span class=\"line\">        padding: 10px;             </span><br><span class=\"line\">        border: 1px solid green;            </span><br><span class=\"line\">        height: 100px;        </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .left,.right&#123;            </span><br><span class=\"line\">        display: table-cell;                        </span><br><span class=\"line\">        width: 20%;            </span><br><span class=\"line\">        border: 1px solid red;                 </span><br><span class=\"line\">    &#125;        </span><br><span class=\"line\">    .center&#123;            </span><br><span class=\"line\">        &#x2F;* padding-top: 10px; *&#x2F;            </span><br><span class=\"line\">        height: 100px;            </span><br><span class=\"line\">        background-color: green;        </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">HTMLï¼š</span><br><span class=\"line\">&lt;div class&#x3D;&quot;box&quot;&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;left&quot;&gt;            </span><br><span class=\"line\">        &lt;p&gt;æˆ‘æ˜¯å·¦è¾¹&lt;&#x2F;p&gt;        </span><br><span class=\"line\">    &lt;&#x2F;div&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;center&quot;&gt;            </span><br><span class=\"line\">        &lt;p&gt;æˆ‘æ˜¯ä¸­é—´&lt;&#x2F;p&gt;       </span><br><span class=\"line\">    &lt;&#x2F;div&gt;        </span><br><span class=\"line\">    &lt;div class&#x3D;&quot;right&quot;&gt;            </span><br><span class=\"line\">        &lt;p&gt;æˆ‘æ˜¯å³è¾¹&lt;&#x2F;p&gt;        </span><br><span class=\"line\">    &lt;&#x2F;div&gt;    </span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š<img data-src=\"https://user-gold-cdn.xitu.io/2019/4/15/16a1f1e596191dfa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å…¶ä¸­ center çš„é¡¶éƒ¨æ²¡æœ‰ä¸å·¦å³ä¸¤ä¾§å¯¹é½ï¼ŒåŸå› æ˜¯ left ä¸­çš„ <p> æœ‰ä¸€ä¸ª margin-top ï¼Œ è€Œè¡¨æ ¼å¸ƒå±€ä¸­é»˜è®¤æ˜¯æ–‡å­—é¡¶éƒ¨å¯¹é½çš„ï¼Œæ‰€ä»¥ center ä¼šå‘ä¸‹ç§»åŠ¨åˆ°é¦–è¡Œæ–‡å­—åŸºçº¿å¯¹é½ï¼Œè§£å†³åŠæ³•æ˜¯ä¸º center æ·»åŠ ä¸å·¦å³ä¸¤ä¾§ä¸­ margin-top è¾ƒå¤§è€…ç­‰å€¼çš„ padding-top å³å¯ã€‚ </p>\n<h1 id=\"13-CSSæµ®åŠ¨\"><a href=\"#13-CSSæµ®åŠ¨\" class=\"headerlink\" title=\"13.CSSæµ®åŠ¨\"></a>13.<a href=\"https://segmentfault.com/a/1190000012739764\">CSSæµ®åŠ¨</a></h1><p>é¡µé¢å¸ƒå±€æ˜¯CSSçš„ä¸€ä¸ªé‡ç‚¹åº”ç”¨ï¼Œä¾‹å¦‚ï¼š<br><img data-src=\"https://segmentfault.com/img/bVuVFG\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<p>è€Œå®ç°é¡µé¢å¸ƒå±€ä¸»è¦åº”ç”¨åˆ°ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯<strong>CSSæµ®åŠ¨</strong>ï¼Œä¸€ç§æ˜¯<strong>Flexbox</strong>ï¼ˆIE9ä»¥ä¸Šï¼‰ï¼Œæœ¬æ–‡ä¸»è¦è®²çš„æ˜¯CSSæµ®åŠ¨ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å°†é˜è¿°Flexboxã€‚</p>\n<h2 id=\"æµ®åŠ¨å…ƒç´ \"><a href=\"#æµ®åŠ¨å…ƒç´ \" class=\"headerlink\" title=\"æµ®åŠ¨å…ƒç´ \"></a>æµ®åŠ¨å…ƒç´ </h2><p><strong>ä»€ä¹ˆæ˜¯æµ®åŠ¨å…ƒç´ ï¼š</strong>æµ®åŠ¨å…ƒç´ åŒæ—¶å¤„äºå¸¸è§„æµå†…å’Œæµå¤–çš„å…ƒç´ ã€‚å…¶ä¸­å—çº§å…ƒç´ è®¤ä¸ºæµ®åŠ¨å…ƒç´ ä¸å­˜åœ¨ï¼Œè€Œæµ®åŠ¨å…ƒç´ ä¼šå½±å“è¡Œå†…å…ƒç´ çš„å¸ƒå±€ï¼Œæµ®åŠ¨å…ƒç´ ä¼šé€šè¿‡å½±å“è¡Œå†…å…ƒç´ é—´æ¥å½±å“äº†åŒ…å«å—çš„å¸ƒå±€ã€‚</p>\n<blockquote>\n<p><strong>å¸¸è§„æµï¼š</strong>é¡µé¢ä¸Šä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹æ’åˆ—çš„å…ƒç´ æµï¼Œå°±æ˜¯å¸¸è§„æµ<br><strong>è„±ç¦»å¸¸è§„æµï¼š</strong>ç»å¯¹å®šä½ï¼Œfixedå®šä½çš„å…ƒç´ æœ‰è‡ªå·±å›ºå®šçš„ä½ç½®ï¼Œè„±ç¦»äº†å¸¸è§„æµ<br><strong>åŒ…å«å—ï¼š</strong>ä¸€ä¸ªå…ƒç´ ç¦»å®ƒæœ€è¿‘çš„å—çº§å…ƒç´ æ˜¯å®ƒçš„åŒ…å«å—</p>\n</blockquote>\n<p>ä¸‹é¢è¯¦ç»†æè¿°ä»¥ä¸Šçš„å†…å®¹ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class=\"line\">  &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;JS Bin&lt;&#x2F;title&gt;</span><br><span class=\"line\">&lt;&#x2F;head&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">.border &#123;</span><br><span class=\"line\">  border: 2px solid;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.common-div &#123;</span><br><span class=\"line\">  width: 160px;</span><br><span class=\"line\">  height: 50px;</span><br><span class=\"line\">  background-color: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.float-red &#123;</span><br><span class=\"line\">  width: 100px;</span><br><span class=\"line\">  height: 50px;</span><br><span class=\"line\">  background-color: #fcc;</span><br><span class=\"line\">  float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.float-blue &#123;</span><br><span class=\"line\">  width: 100px;</span><br><span class=\"line\">  height: 50px;</span><br><span class=\"line\">  background-color: #09c;</span><br><span class=\"line\">  float: left;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;style&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;border&quot;&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;float-red&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;common-div&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        &lt;div class&#x3D;&quot;float-blue&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¾ç¤ºçš„æ ·å­å¦‚ä¸‹ï¼š<br><img data-src=\"https://segmentfault.com/img/bV1Cjj?w=1482&h=394\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<ul>\n<li>å—çº§å…ƒç´ è®¤ä¸ºæµ®åŠ¨å…ƒç´ ä¸å­˜åœ¨ï¼šçº¢è‰²çš„å—çº§å…ƒç´ æ²¡æœ‰å—åˆ°ç²‰è‰²æµ®åŠ¨å…ƒç´ çš„å½±å“ï¼Œè¿˜å±•ç¤ºåœ¨å·¦ä¸Šè§’çš„ä½ç½®ï¼Œä½†æ˜¯è¢«ç²‰è‰²å…ƒç´ ç›–ä½äº†å·¦è¾¹çš„éƒ¨åˆ†</li>\n<li>æµ®åŠ¨å…ƒç´ ä¼šå½±å“è¡Œå†…å…ƒç´ ï¼šæ–‡å­—éƒ¨åˆ†è¢«è“è‰²æµ®åŠ¨å…ƒç´ å½±å“ï¼Œç©ºå‡ºäº†è“è‰²æµ®åŠ¨å…ƒç´ çš„éƒ¨åˆ†</li>\n<li>æµ®åŠ¨å…ƒç´ ä¼šé—´æ¥å½±å“äº†åŒ…å«å—çš„å¸ƒå±€ï¼šæµ®åŠ¨å…ƒç´ å½±å“äº†æ–‡å­—éƒ¨åˆ†å—ï¼Œä½¿ä¹‹å¤šå‡ºäº†ä¸€è¡Œï¼Œæ–‡å­—éƒ¨åˆ†æ’‘é«˜äº†æœ€å¤–é¢çš„borderæ¡†ï¼Œæ‰€ä»¥é—´æ¥å½±å“äº†åŒ…å«å—çš„å¸ƒå±€ã€‚</li>\n</ul>\n<p>å…¶ä¸­ï¼Œ<strong>æµ®åŠ¨å…ƒç´ çš„æ‘†æ”¾</strong>ä¼šéµå¾ªå¦‚ä¸‹çš„è§„åˆ™ï¼š</p>\n<ul>\n<li>å°½é‡é ä¸Š</li>\n<li>å°½é‡é å·¦</li>\n<li>å°½é‡ä¸€ä¸ªæŒ¨ç€ä¸€ä¸ª</li>\n<li>ä¸èƒ½è¶…å‡ºåŒ…å«å—ï¼Œé™¤éå…ƒç´ æ¯”åŒ…å«å—æ›´å®½</li>\n<li>ä¸èƒ½è¶…è¿‡æ‰€åœ¨è¡Œçš„æœ€é«˜ç‚¹</li>\n<li>ä¸èƒ½è¶…è¿‡å®ƒå‰é¢æµ®åŠ¨å…ƒç´ çš„æœ€é«˜ç‚¹</li>\n<li>è¡Œå†…å…ƒç´ ç»•ç€æµ®åŠ¨å…ƒç´ æ‘†æ”¾ï¼šå·¦æµ®åŠ¨å…ƒç´ çš„å³è¾¹å’Œå³æµ®åŠ¨å…ƒç´ çš„å·¦è¾¹ä¼šå‡ºæµ®åŠ¨å…ƒç´ </li>\n</ul>\n<h2 id=\"åº”ç”¨\"><a href=\"#åº”ç”¨\" class=\"headerlink\" title=\"åº”ç”¨\"></a>åº”ç”¨</h2><blockquote>\n<p>æµ®åŠ¨å…ƒç´ å¹¶ä¸èƒ½æ’‘èµ·åŒ…å«å—ï¼Œè¿™å’Œæˆ‘ä»¬çš„é¢„æœŸå¹¶ä¸ç›¸ç¬¦ã€‚é€šè¿‡ä»¥ä¸‹çš„åŠæ³•å¯ä»¥å°†åŒ…å«å—æ’‘å¼€ï¼Œç§°ä¹‹ä¸º<strong>é—­åˆæµ®åŠ¨</strong></p>\n</blockquote>\n<p><img data-src=\"https://segmentfault.com/img/bV1CkU?w=798&h=248\" alt=\"å›¾ç‰‡æè¿°\"><br><img data-src=\"https://segmentfault.com/img/bV1Ck1?w=802&h=248\" alt=\"å›¾ç‰‡æè¿°\"></p>\n<h3 id=\"é—­åˆæµ®åŠ¨çš„æ–¹æ³•ï¼š\"><a href=\"#é—­åˆæµ®åŠ¨çš„æ–¹æ³•ï¼š\" class=\"headerlink\" title=\"é—­åˆæµ®åŠ¨çš„æ–¹æ³•ï¼š\"></a>é—­åˆæµ®åŠ¨çš„æ–¹æ³•ï¼š</h3><ul>\n<li><strong>BFC:</strong> 1) åŒ…å«å—è®¾ç½®overflow:hidden æˆ–è€… 2)åŒ…å«å—è®¾ç½®display:table-cell/table/flexâ€¦</li>\n</ul>\n<blockquote>\n<p><strong>BFCï¼šå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œåªæœ‰Block-level boxå‚ä¸ï¼Œ å®ƒè§„å®šäº†å†…éƒ¨çš„å—çº§å…ƒç´ å¦‚ä½•å¸ƒå±€ï¼Œå¹¶ä¸”ä¸è¿™ä¸ªåŒºåŸŸå¤–éƒ¨æ¯«ä¸ç›¸å¹²ã€‚</strong><br>åªè¦<strong>ç¬¦åˆä»¥ä¸‹çš„æ¡ä»¶å°±æ˜¯BFC:</strong></p>\n<ol>\n<li>æ ¹å…ƒç´ </li>\n<li>floatå±æ€§ä¸ä¸ºnone</li>\n<li>positionä¸ºabsoluteæˆ–fixed</li>\n<li>displayä¸ºinline-block, table-cell, table-caption, flex, inline-flex</li>\n<li>overflowä¸ä¸ºvisible</li>\n</ol>\n</blockquote>\n<p>ç›¸åº”çš„èƒŒæ™¯æ–‡æ¡£å¯ä»¥å‚é˜…ï¼š<a href=\"http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html\">ã€ŠBFCçš„ç¥å¥‡åŸç†ã€‹</a></p>\n<ul>\n<li><strong>ä¼ªå…ƒç´ </strong>ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.clearfix::after &#123;</span><br><span class=\"line\">    content: &#39;&#39;;</span><br><span class=\"line\">    display: block;</span><br><span class=\"line\">    clear: both;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>clear:both;æ„å‘³ç€å—çº§å…ƒç´ çš„å·¦è¾¹å’Œå³è¾¹éƒ½ä¸èƒ½æœ‰æµ®åŠ¨å…ƒç´ ã€‚åœ¨åŒ…å«å—çš„æœ«å°¾å»ºç«‹äº†ä¸€ä¸ªå†…å®¹ä¸ºç©ºçš„ä¼ªå…ƒç´ ï¼Œå¹¶è®¾ç½®clear:bothï¼Œä½¿è¿™ä¸ªå…ƒç´ ä½äºæ‰€æœ‰çš„æµ®åŠ¨å…ƒç´ ä¹‹åï¼Œä»è€Œæ’‘å¼€äº†åŒ…å«å—çš„é«˜ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>åŒ…å«å—è‡ªå·±ä¹Ÿæµ®åŠ¨</strong></li>\n</ul>\n<p>è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯w3cä½¿ç”¨çš„æ–¹æ³•ã€‚ä¸è¿‡ï¼Œä¸‹ä¸€ä¸ªå…ƒç´ ä¼šå—åˆ°è¿™ä¸ªæµ®åŠ¨å…ƒç´ çš„å½±å“ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äº›äººé€‰æ‹©å¯¹å¸ƒå±€ä¸­çš„æ‰€æœ‰ä¸œè¥¿è¿›è¡Œæµ®åŠ¨ï¼Œç„¶åä½¿ç”¨é€‚å½“çš„æœ‰æ„ä¹‰çš„å…ƒç´ ï¼ˆå¸¸å¸¸æ˜¯ç«™ç‚¹çš„é¡µè„šï¼‰å¯¹è¿™äº›æµ®åŠ¨è¿›è¡Œæ¸…ç†ã€‚è¿™æœ‰åŠ©äºå‡å°‘æˆ–æ¶ˆé™¤ä¸å¿…è¦çš„æ ‡è®°ã€‚</p>\n<p>ç›¸åº”çš„èƒŒæ™¯æ–‡æ¡£ï¼š<a href=\"http://www.w3school.com.cn/css/css_positioning_floating.asp\">ã€ŠW3C CSSæµ®åŠ¨ã€‹</a></p>\n<p>##</p>\n","categories":["webå‰ç«¯"],"tags":["é¢è¯•","å‰ç«¯åŸºç¡€","CSS"]},{"title":"javascripté¢è¯•é—®é¢˜","url":"/2021/02/23/javascript%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/","content":"<p>javascriptåŸºæœ¬çŸ¥è¯†ï¼Œå»ºè®®æœ‰ä¸€å®šåŸºç¡€ï¼Œå†é˜…è¯»è¿‡ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼ˆä¿—ç§°çº¢å®ä¹¦ï¼‰çš„åŸºç¡€ä¸Šä¹‹åè¿›è¡Œé˜…è¯»ï¼Œå¼€å§‹å‡†å¤‡é¢è¯•å§ï¼Œåˆæˆ˜ä¸åˆ©ï¼Œæ›´åº”è¯¥å¤šåˆ·é¢ç»ï¼Œå¤šèƒŒåŸºç¡€ï¼Œæ¯•ç«Ÿæ˜¯å®ä¹ å’Œæ ¡æ‹›ï¼ŒåŸºç¡€è¦å¤¯å®ï¼Œæ¨èè§‚çœ‹  <a href=\"https://github.com/mqyqingfeng/Blog\">å†´ç¾½çš„åšå®¢</a> ï¼Œå†…å®¹ä¸°å¯Œï¼Œé€‚åˆæœ‰ä¸€å®šJSåŸºç¡€çš„äººè¿›è¡Œé˜…è¯»</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-åŸå‹é“¾\"><a href=\"#1-åŸå‹é“¾\" class=\"headerlink\" title=\"1.åŸå‹é“¾\"></a>1.åŸå‹é“¾</h1><h2 id=\"æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡\"><a href=\"#æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡\" class=\"headerlink\" title=\"æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡\"></a>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</h2><p>æˆ‘ä»¬å…ˆä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var person &#x3D; new Person();</span><br><span class=\"line\">person.name &#x3D; &#39;Kevin&#39;;</span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Kevin</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒPerson å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ new åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡ personã€‚</p>\n<h2 id=\"prototype\"><a href=\"#prototype\" class=\"headerlink\" title=\"prototype\"></a>prototype</h2><p>æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; è™½ç„¶å†™åœ¨æ³¨é‡Šé‡Œï¼Œä½†æ˜¯ä½ è¦æ³¨æ„ï¼š</span><br><span class=\"line\">&#x2F;&#x2F; prototypeæ˜¯å¯¹è±¡çš„å±æ€§</span><br><span class=\"line\">Person.prototype.name &#x3D; &#39;Kevin&#39;;</span><br><span class=\"line\">var person1 &#x3D; new Person();</span><br><span class=\"line\">var person2 &#x3D; new Person();</span><br><span class=\"line\">console.log(person1.name) &#x2F;&#x2F; Kevin</span><br><span class=\"line\">console.log(person2.name) &#x2F;&#x2F; Kevin</span><br></pre></td></tr></table></figure>\n\n<p>é‚£è¿™ä¸ªå‡½æ•°çš„ prototype å±æ€§åˆ°åº•æŒ‡å‘çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿™ä¸ªå‡½æ•°çš„åŸå‹å—ï¼Ÿ</p>\n<p>å…¶å®ï¼Œå‡½æ•°çš„ prototype å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ­£æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„<strong>å®ä¾‹</strong>çš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªä¾‹å­ä¸­çš„ person1 å’Œ person2 çš„åŸå‹ã€‚</p>\n<p>é‚£ä»€ä¹ˆæ˜¯åŸå‹å‘¢ï¼Ÿä½ å¯ä»¥è¿™æ ·ç†è§£ï¼šæ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(nullé™¤å¤–)åœ¨åˆ›å»ºçš„æ—¶å€™å°±ä¼šä¸ä¹‹å…³è”å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŸå‹ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€ç»§æ‰¿â€å±æ€§ã€‚</p>\n<p>è®©æˆ‘ä»¬ç”¨ä¸€å¼ å›¾è¡¨ç¤ºæ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹ä¹‹é—´çš„å…³ç³»ï¼š</p>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype1.png\"><img data-src=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype1.png\" alt=\"æ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹çš„å…³ç³»å›¾\"></a></p>\n<p>åœ¨è¿™å¼ å›¾ä¸­æˆ‘ä»¬ç”¨ Object.prototype è¡¨ç¤ºå®ä¾‹åŸå‹ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆè¡¨ç¤ºå®ä¾‹ä¸å®ä¾‹åŸå‹ï¼Œä¹Ÿå°±æ˜¯ person å’Œ Person.prototype ä¹‹é—´çš„å…³ç³»å‘¢ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦è®²åˆ°ç¬¬äºŒä¸ªå±æ€§ï¼š</p>\n<h2 id=\"proto\"><a href=\"#proto\" class=\"headerlink\" title=\"proto\"></a><strong>proto</strong></h2><p>è¿™æ˜¯æ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(é™¤äº† null )éƒ½å…·æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œå«__proto__ï¼Œè¿™ä¸ªå±æ€§ä¼šæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚</p>\n<p>ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹,æˆ‘ä»¬å¯ä»¥åœ¨Firefoxæˆ–è€…Chromeä¸­æ§åˆ¶å°è¾“å…¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var person &#x3D; new Person();</span><br><span class=\"line\">console.log(person.__proto__ &#x3D;&#x3D;&#x3D; Person.prototype); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>äºæ˜¯æˆ‘ä»¬æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š</p>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype2.png\"><img data-src=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype2.png\" alt=\"å®ä¾‹ä¸å®ä¾‹åŸå‹çš„å…³ç³»å›¾\"></a></p>\n<p>æ—¢ç„¶å®ä¾‹å¯¹è±¡å’Œæ„é€ å‡½æ•°éƒ½å¯ä»¥æŒ‡å‘åŸå‹ï¼Œé‚£ä¹ˆåŸå‹æ˜¯å¦æœ‰å±æ€§æŒ‡å‘æ„é€ å‡½æ•°æˆ–è€…å®ä¾‹å‘¢ï¼Ÿ</p>\n<h2 id=\"constructor-NaN\"><a href=\"#constructor-NaN\" class=\"headerlink\" title=\"constructor\"></a>constructor</h2><p>æŒ‡å‘å®ä¾‹å€’æ˜¯æ²¡æœ‰ï¼Œå› ä¸ºåŒä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç”Ÿæˆå¤šä¸ªå®ä¾‹ï¼Œä½†æ˜¯åŸå‹æŒ‡å‘æ„é€ å‡½æ•°å€’æ˜¯æœ‰çš„ï¼Œè¿™å°±è¦è®²åˆ°ç¬¬ä¸‰ä¸ªå±æ€§ï¼šconstructorï¼Œæ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°ã€‚</p>\n<p>ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(Person &#x3D;&#x3D;&#x3D; Person.prototype.constructor); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š</p>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype3.png\"><img data-src=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype3.png\" alt=\"å®ä¾‹åŸå‹ä¸æ„é€ å‡½æ•°çš„å…³ç³»å›¾\"></a></p>\n<p>ç»¼ä¸Šæˆ‘ä»¬å·²ç»å¾—å‡ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; new Person();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(person.__proto__ &#x3D;&#x3D; Person.prototype) &#x2F;&#x2F; true</span><br><span class=\"line\">console.log(Person.prototype.constructor &#x3D;&#x3D; Person) &#x2F;&#x2F; true</span><br><span class=\"line\">&#x2F;&#x2F; é¡ºä¾¿å­¦ä¹ ä¸€ä¸ªES5çš„æ–¹æ³•,å¯ä»¥è·å¾—å¯¹è±¡çš„åŸå‹</span><br><span class=\"line\">console.log(Object.getPrototypeOf(person) &#x3D;&#x3D;&#x3D; Person.prototype) &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>äº†è§£äº†æ„é€ å‡½æ•°ã€å®ä¾‹åŸå‹ã€å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®²è®²å®ä¾‹å’ŒåŸå‹çš„å…³ç³»ï¼š</p>\n<h2 id=\"å®ä¾‹ä¸åŸå‹\"><a href=\"#å®ä¾‹ä¸åŸå‹\" class=\"headerlink\" title=\"å®ä¾‹ä¸åŸå‹\"></a>å®ä¾‹ä¸åŸå‹</h2><p>å½“è¯»å–å®ä¾‹çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŸ¥æ‰¾ä¸å¯¹è±¡å…³è”çš„åŸå‹ä¸­çš„å±æ€§ï¼Œå¦‚æœè¿˜æŸ¥ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚ä¸ºæ­¢ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Person.prototype.name &#x3D; &#39;Kevin&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; new Person();</span><br><span class=\"line\"></span><br><span class=\"line\">person.name &#x3D; &#39;Daisy&#39;;</span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Daisy</span><br><span class=\"line\"></span><br><span class=\"line\">delete person.name;</span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Kevin</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™å®ä¾‹å¯¹è±¡ person æ·»åŠ äº† name å±æ€§ï¼Œå½“æˆ‘ä»¬æ‰“å° person.name çš„æ—¶å€™ï¼Œç»“æœè‡ªç„¶ä¸º Daisyã€‚</p>\n<p>ä½†æ˜¯å½“æˆ‘ä»¬åˆ é™¤äº† person çš„ name å±æ€§æ—¶ï¼Œè¯»å– person.nameï¼Œä» person å¯¹è±¡ä¸­æ‰¾ä¸åˆ° name å±æ€§å°±ä¼šä» person çš„åŸå‹ä¹Ÿå°±æ˜¯ person.<strong>proto</strong> ï¼Œä¹Ÿå°±æ˜¯ Person.prototypeä¸­æŸ¥æ‰¾ï¼Œå¹¸è¿çš„æ˜¯æˆ‘ä»¬æ‰¾åˆ°äº† name å±æ€§ï¼Œç»“æœä¸º Kevinã€‚</p>\n<p>ä½†æ˜¯ä¸‡ä¸€è¿˜æ²¡æœ‰æ‰¾åˆ°å‘¢ï¼ŸåŸå‹çš„åŸå‹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<h2 id=\"åŸå‹çš„åŸå‹\"><a href=\"#åŸå‹çš„åŸå‹\" class=\"headerlink\" title=\"åŸå‹çš„åŸå‹\"></a>åŸå‹çš„åŸå‹</h2><p>åœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»è®²äº†åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æœ€åŸå§‹çš„æ–¹å¼åˆ›å»ºå®ƒï¼Œé‚£å°±æ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var obj &#x3D; new Object();</span><br><span class=\"line\">obj.name &#x3D; &#39;Kevin&#39;</span><br><span class=\"line\">console.log(obj.name) &#x2F;&#x2F; Kevin</span><br></pre></td></tr></table></figure>\n\n<p>å…¶å®åŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œç»“åˆä¹‹å‰æ‰€è®²ï¼Œå®ä¾‹çš„ <strong>proto</strong> æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š</p>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype4.png\"><img data-src=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype4.png\" alt=\"åŸå‹çš„åŸå‹å…³ç³»å›¾\"></a></p>\n<h2 id=\"åŸå‹é“¾\"><a href=\"#åŸå‹é“¾\" class=\"headerlink\" title=\"åŸå‹é“¾\"></a>åŸå‹é“¾</h2><p>é‚£ Object.prototype çš„åŸå‹å‘¢ï¼Ÿ</p>\n<p>nullï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">console.log(Object.prototype.__proto__ &#x3D;&#x3D;&#x3D; null) &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶è€Œ null ç©¶ç«Ÿä»£è¡¨äº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>å¼•ç”¨é˜®ä¸€å³°è€å¸ˆçš„ <a href=\"http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html\">ã€Šundefinedä¸nullçš„åŒºåˆ«ã€‹</a> å°±æ˜¯ï¼š</p>\n<blockquote>\n<p>null è¡¨ç¤ºâ€œæ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ã€‚</p>\n</blockquote>\n<p>æ‰€ä»¥ Object.prototype.<strong>proto</strong> çš„å€¼ä¸º null å°±æ˜¯ Object.prototype æ²¡æœ‰åŸå‹ï¼Œè¡¨è¾¾äº†åŒä¸€ä¸ªæ„æ€ã€‚</p>\n<p>æ‰€ä»¥æŸ¥æ‰¾å±æ€§çš„æ—¶å€™æŸ¥åˆ° Object.prototype å°±å¯ä»¥åœæ­¢æŸ¥æ‰¾äº†ã€‚</p>\n<p>æœ€åä¸€å¼ å…³ç³»å›¾ä¹Ÿå¯ä»¥æ›´æ–°ä¸ºï¼š</p>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype5.png\"><img data-src=\"https://github.com/mqyqingfeng/Blog/raw/master/Images/prototype5.png\" alt=\"åŸå‹é“¾ç¤ºæ„å›¾\"></a></p>\n<p>é¡ºä¾¿è¿˜è¦è¯´ä¸€ä¸‹ï¼Œå›¾ä¸­ç”±ç›¸äº’å…³è”çš„åŸå‹ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ï¼Œä¹Ÿå°±æ˜¯è“è‰²çš„è¿™æ¡çº¿ã€‚</p>\n<h2 id=\"è¡¥å……\"><a href=\"#è¡¥å……\" class=\"headerlink\" title=\"è¡¥å……\"></a>è¡¥å……</h2><p>æœ€åï¼Œè¡¥å……ä¸‰ç‚¹å¤§å®¶å¯èƒ½ä¸ä¼šæ³¨æ„çš„åœ°æ–¹ï¼š</p>\n<h3 id=\"constructor\"><a href=\"#constructor\" class=\"headerlink\" title=\"constructor\"></a>constructor</h3><p>é¦–å…ˆæ˜¯ constructor å±æ€§ï¼Œæˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Person() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; å®ä¾‹</span><br><span class=\"line\">var person &#x3D; new Person();</span><br><span class=\"line\">console.log(person.constructor &#x3D;&#x3D;&#x3D; Person); &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>å½“è·å– person.constructor æ—¶ï¼Œå…¶å® person ä¸­å¹¶æ²¡æœ‰ constructor å±æ€§,å½“ä¸èƒ½è¯»å–åˆ°constructor å±æ€§æ—¶ï¼Œä¼šä» person çš„åŸå‹ä¹Ÿå°±æ˜¯ Person.prototype ä¸­è¯»å–ï¼Œæ­£å¥½åŸå‹ä¸­æœ‰è¯¥å±æ€§ï¼Œæ‰€ä»¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">person.constructor &#x3D;&#x3D;&#x3D; Person.prototype.constructor</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"proto-1\"><a href=\"#proto-1\" class=\"headerlink\" title=\"proto\"></a><strong>proto</strong></h3><p>å…¶æ¬¡æ˜¯ <strong>proto</strong> ï¼Œç»å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªéæ ‡å‡†çš„æ–¹æ³•è®¿é—®åŸå‹ï¼Œç„¶è€Œå®ƒå¹¶ä¸å­˜åœ¨äº Person.prototype ä¸­ï¼Œå®é™…ä¸Šï¼Œå®ƒæ˜¯æ¥è‡ªäº Object.prototype ï¼Œä¸å…¶è¯´æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ä¸ª getter/setterï¼Œå½“ä½¿ç”¨ obj.<strong>proto</strong> æ—¶ï¼Œå¯ä»¥ç†è§£æˆè¿”å›äº† Object.getPrototypeOf(obj)ã€‚</p>\n<h3 id=\"çœŸçš„æ˜¯ç»§æ‰¿å—ï¼Ÿ\"><a href=\"#çœŸçš„æ˜¯ç»§æ‰¿å—ï¼Ÿ\" class=\"headerlink\" title=\"çœŸçš„æ˜¯ç»§æ‰¿å—ï¼Ÿ\"></a>çœŸçš„æ˜¯ç»§æ‰¿å—ï¼Ÿ</h3><p>æœ€åæ˜¯å…³äºç»§æ‰¿ï¼Œå‰é¢æˆ‘ä»¬è®²åˆ°â€œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€˜ç»§æ‰¿â€™å±æ€§â€ï¼Œå®é™…ä¸Šï¼Œç»§æ‰¿æ˜¯ä¸€ä¸ªååˆ†å…·æœ‰è¿·æƒ‘æ€§çš„è¯´æ³•ï¼Œå¼•ç”¨ã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹ä¸­çš„è¯ï¼Œå°±æ˜¯ï¼š</p>\n<p>ç»§æ‰¿æ„å‘³ç€å¤åˆ¶æ“ä½œï¼Œç„¶è€Œ JavaScript é»˜è®¤å¹¶ä¸ä¼šå¤åˆ¶å¯¹è±¡çš„å±æ€§ï¼Œç›¸åï¼ŒJavaScript åªæ˜¯åœ¨ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ªå…³è”ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥é€šè¿‡å§”æ‰˜è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œå‡½æ•°ï¼Œæ‰€ä»¥ä¸å…¶å«ç»§æ‰¿ï¼Œå§”æ‰˜çš„è¯´æ³•åè€Œæ›´å‡†ç¡®äº›ã€‚</p>\n<h1 id=\"2-ç»§æ‰¿\"><a href=\"#2-ç»§æ‰¿\" class=\"headerlink\" title=\"2.ç»§æ‰¿\"></a>2.ç»§æ‰¿</h1><h2 id=\"1-åŸå‹é“¾ç»§æ‰¿\"><a href=\"#1-åŸå‹é“¾ç»§æ‰¿\" class=\"headerlink\" title=\"1.åŸå‹é“¾ç»§æ‰¿\"></a>1.åŸå‹é“¾ç»§æ‰¿</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent () &#123;</span><br><span class=\"line\">    this.name &#x3D; &#39;kevin&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Parent.prototype.getName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(this.name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; å…³é”® å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»</span><br><span class=\"line\">Child.prototype &#x3D; new Parent();</span><br><span class=\"line\"></span><br><span class=\"line\">var child1 &#x3D; new Child();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(child1.getName()) &#x2F;&#x2F; kevin</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼š</p>\n<p>1.å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent () &#123;</span><br><span class=\"line\">    this.names &#x3D; [&#39;kevin&#39;, &#39;daisy&#39;];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Child.prototype &#x3D; new Parent();</span><br><span class=\"line\">var child1 &#x3D; new Child();</span><br><span class=\"line\">child1.names.push(&#39;yayu&#39;);</span><br><span class=\"line\">console.log(child1.names); &#x2F;&#x2F; [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span><br><span class=\"line\">var child2 &#x3D; new Child();</span><br><span class=\"line\">console.log(child2.names); &#x2F;&#x2F; [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>2.åœ¨åˆ›å»º Child çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘Parentä¼ å‚</p>\n<h2 id=\"2-å€Ÿç”¨æ„é€ å‡½æ•°-ç»å…¸ç»§æ‰¿\"><a href=\"#2-å€Ÿç”¨æ„é€ å‡½æ•°-ç»å…¸ç»§æ‰¿\" class=\"headerlink\" title=\"2.å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)\"></a>2.å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent () &#123;</span><br><span class=\"line\">    this.names &#x3D; [&#39;kevin&#39;, &#39;daisy&#39;];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child () &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; å…³é”® åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span><br><span class=\"line\">    Parent.call(this);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var child1 &#x3D; new Child();</span><br><span class=\"line\">child1.names.push(&#39;yayu&#39;);</span><br><span class=\"line\">console.log(child1.names); &#x2F;&#x2F; [&quot;kevin&quot;, &quot;daisy&quot;, &quot;yayu&quot;]</span><br><span class=\"line\">var child2 &#x3D; new Child();</span><br><span class=\"line\">console.log(child2.names); &#x2F;&#x2F; [&quot;kevin&quot;, &quot;daisy&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>ä¼˜ç‚¹ï¼š</p>\n<p>1.é¿å…äº†å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«</p>\n<p>2.å¯ä»¥åœ¨ Child ä¸­å‘ Parent ä¼ å‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent (name) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child (name) &#123;</span><br><span class=\"line\">    Parent.call(this, name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var child1 &#x3D; new Child(&#39;kevin&#39;);</span><br><span class=\"line\">console.log(child1.name); &#x2F;&#x2F; kevin</span><br><span class=\"line\">var child2 &#x3D; new Child(&#39;daisy&#39;);</span><br><span class=\"line\">console.log(child2.name); &#x2F;&#x2F; daisy</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼š</p>\n<p>æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰æ¯ä¸ªå­ç±»å®ä¾‹ä¸èƒ½å…±äº«çˆ¶å‡½æ•°ï¼Œæµªè´¹å†…å­˜ï¼Œå¼€é”€è¾ƒå¤§ã€‚ä¸èƒ½ç»§æ‰¿çˆ¶ç±»åŸå‹ã€‚</p>\n<h2 id=\"3-ç»„åˆç»§æ‰¿\"><a href=\"#3-ç»„åˆç»§æ‰¿\" class=\"headerlink\" title=\"3.ç»„åˆç»§æ‰¿\"></a>3.ç»„åˆç»§æ‰¿</h2><p>åŸå‹é“¾ç»§æ‰¿å’Œç»å…¸ç»§æ‰¿åŒå‰‘åˆç’§ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent (name) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">    this.colors &#x3D; [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Parent.prototype.getName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(this.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child (name, age) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; å…³é”® åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span><br><span class=\"line\">    Parent.call(this, name);</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»</span><br><span class=\"line\">Child.prototype &#x3D; new Parent();</span><br><span class=\"line\">Child.prototype.constructor &#x3D; Child;</span><br><span class=\"line\"></span><br><span class=\"line\">var child1 &#x3D; new Child(&#39;kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">child1.colors.push(&#39;black&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(child1.name); &#x2F;&#x2F; kevin</span><br><span class=\"line\">console.log(child1.age); &#x2F;&#x2F; 18</span><br><span class=\"line\">console.log(child1.colors); &#x2F;&#x2F; [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;black&quot;]</span><br><span class=\"line\"></span><br><span class=\"line\">var child2 &#x3D; new Child(&#39;daisy&#39;, &#39;20&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(child2.name); &#x2F;&#x2F; daisy</span><br><span class=\"line\">console.log(child2.age); &#x2F;&#x2F; 20</span><br><span class=\"line\">console.log(child2.colors); &#x2F;&#x2F; [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>ä¼˜ç‚¹ï¼šèåˆåŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°çš„ä¼˜ç‚¹ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ¨¡å¼ã€‚</p>\n<p>ç¼ºç‚¹ï¼šParentçš„æ„é€ å‡½æ•°ä¼šå¤šæ‰§è¡Œäº†ä¸€æ¬¡</p>\n<h2 id=\"4-åŸå‹å¼ç»§æ‰¿\"><a href=\"#4-åŸå‹å¼ç»§æ‰¿\" class=\"headerlink\" title=\"4.åŸå‹å¼ç»§æ‰¿\"></a>4.åŸå‹å¼ç»§æ‰¿</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function createObj(o) &#123;</span><br><span class=\"line\">    function F()&#123;&#125;</span><br><span class=\"line\">    F.prototype &#x3D; o;</span><br><span class=\"line\">    return new F();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å°±æ˜¯ ES5 Object.create çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚</p>\n<p>ç¼ºç‚¹ï¼šåŒ…å«å¼•ç”¨ç±»å‹çš„å±æ€§å€¼å§‹ç»ˆéƒ½ä¼šå…±äº«ç›¸åº”çš„å€¼ï¼Œè¿™ç‚¹è·ŸåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var person &#x3D; &#123;</span><br><span class=\"line\">    name: &#39;kevin&#39;,</span><br><span class=\"line\">    friends: [&#39;daisy&#39;, &#39;kelly&#39;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var person1 &#x3D; createObj(person);</span><br><span class=\"line\">var person2 &#x3D; createObj(person);</span><br><span class=\"line\"></span><br><span class=\"line\">person1.name &#x3D; &#39;person1&#39;;</span><br><span class=\"line\">console.log(person2.name); &#x2F;&#x2F; kevin</span><br><span class=\"line\"></span><br><span class=\"line\">person1.firends.push(&#39;taylor&#39;);</span><br><span class=\"line\">console.log(person2.friends); &#x2F;&#x2F; [&quot;daisy&quot;, &quot;kelly&quot;, &quot;taylor&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šä¿®æ”¹<code>person1.name</code>çš„å€¼ï¼Œ<code>person2.name</code>çš„å€¼å¹¶æœªå‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸æ˜¯å› ä¸º<code>person1</code>å’Œ<code>person2</code>æœ‰ç‹¬ç«‹çš„ name å€¼ï¼Œè€Œæ˜¯å› ä¸º<code>person1.name = &#39;person1&#39;</code>ï¼Œç»™<code>person1</code>æ·»åŠ äº† name å€¼ï¼Œå¹¶éä¿®æ”¹äº†åŸå‹ä¸Šçš„ name å€¼ã€‚</p>\n<h2 id=\"5-å¯„ç”Ÿå¼ç»§æ‰¿\"><a href=\"#5-å¯„ç”Ÿå¼ç»§æ‰¿\" class=\"headerlink\" title=\"5.å¯„ç”Ÿå¼ç»§æ‰¿\"></a>5.å¯„ç”Ÿå¼ç»§æ‰¿</h2><p>åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function createObj (o) &#123;</span><br><span class=\"line\">    var clone &#x3D; Object.create(o);</span><br><span class=\"line\">    clone.sayName &#x3D; function () &#123;</span><br><span class=\"line\">        console.log(&#39;hi&#39;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return clone;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šè·Ÿå€Ÿç”¨æ„é€ å‡½æ•°æ¨¡å¼ä¸€æ ·ï¼Œæ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚</p>\n<h2 id=\"6-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\"><a href=\"#6-å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\" class=\"headerlink\" title=\"6.å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\"></a>6.å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h2><p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶é˜…è¯»ï¼Œåœ¨è¿™é‡Œé‡å¤ä¸€ä¸‹ç»„åˆç»§æ‰¿çš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent (name) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">    this.colors &#x3D; [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Parent.prototype.getName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(this.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child (name, age) &#123;</span><br><span class=\"line\">    Parent.call(this, name);</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Child.prototype &#x3D; new Parent();</span><br><span class=\"line\">var child1 &#x3D; new Child(&#39;kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\">console.log(child1);</span><br></pre></td></tr></table></figure>\n\n<p>ç»„åˆç»§æ‰¿æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ã€‚</p>\n<p>ä¸€æ¬¡æ˜¯è®¾ç½®å­ç±»å‹å®ä¾‹çš„åŸå‹çš„æ—¶å€™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Child.prototype &#x3D; new Parent();</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€æ¬¡åœ¨åˆ›å»ºå­ç±»å‹å®ä¾‹çš„æ—¶å€™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var child1 &#x3D; new Child(&#39;kevin&#39;, &#39;18&#39;);</span><br></pre></td></tr></table></figure>\n\n<p>å›æƒ³ä¸‹ new çš„æ¨¡æ‹Ÿå®ç°ï¼Œå…¶å®åœ¨è¿™å¥ä¸­ï¼Œæˆ‘ä»¬ä¼šæ‰§è¡Œï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Parent.call(this, name);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆä¼šè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ã€‚</p>\n<p>æ‰€ä»¥ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ‰“å° child1 å¯¹è±¡ï¼Œæˆ‘ä»¬ä¼šå‘ç° Child.prototype å’Œ child1 éƒ½æœ‰ä¸€ä¸ªå±æ€§ä¸º<code>colors</code>ï¼Œå±æ€§å€¼ä¸º<code>[&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;]</code>ã€‚</p>\n<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•ç²¾ç›Šæ±‚ç²¾ï¼Œé¿å…è¿™ä¸€æ¬¡é‡å¤è°ƒç”¨å‘¢ï¼Ÿ</p>\n<p>å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨ Child.prototype = new Parent() ï¼Œè€Œæ˜¯é—´æ¥çš„è®© Child.prototype è®¿é—®åˆ° Parent.prototype å‘¢ï¼Ÿ</p>\n<p>çœ‹çœ‹å¦‚ä½•å®ç°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Parent (name) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">    this.colors &#x3D; [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Parent.prototype.getName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(this.name)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function Child (name, age) &#123;</span><br><span class=\"line\">    Parent.call(this, name);</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å…³é”®çš„ä¸‰æ­¥</span><br><span class=\"line\">var F &#x3D; function () &#123;&#125;;</span><br><span class=\"line\">F.prototype &#x3D; Parent.prototype;</span><br><span class=\"line\">Child.prototype &#x3D; new F();</span><br><span class=\"line\">var child1 &#x3D; new Child(&#39;kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\">console.log(child1);</span><br></pre></td></tr></table></figure>\n\n<p>æœ€åæˆ‘ä»¬å°è£…ä¸€ä¸‹è¿™ä¸ªç»§æ‰¿æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function object(o) &#123;</span><br><span class=\"line\">    function F() &#123;&#125;</span><br><span class=\"line\">    F.prototype &#x3D; o;</span><br><span class=\"line\">    return new F();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function prototype(child, parent) &#123;</span><br><span class=\"line\">    var prototype &#x3D; object(parent.prototype);</span><br><span class=\"line\">    prototype.constructor &#x3D; child;</span><br><span class=\"line\">    child.prototype &#x3D; prototype;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å½“æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼š</span><br><span class=\"line\">prototype(Child, Parent);</span><br></pre></td></tr></table></figure>\n\n<p>å¼•ç”¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­å¯¹å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„å¤¸èµå°±æ˜¯ï¼š</p>\n<p>è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚</p>\n<h1 id=\"3-ä½œç”¨åŸŸé“¾\"><a href=\"#3-ä½œç”¨åŸŸé“¾\" class=\"headerlink\" title=\"3.ä½œç”¨åŸŸé“¾\"></a>3.ä½œç”¨åŸŸé“¾</h1><h2 id=\"å®šä¹‰\"><a href=\"#å®šä¹‰\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>å½“æŸ¥æ‰¾å˜é‡çš„æ—¶å€™ï¼Œä¼šå…ˆä»å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä»çˆ¶çº§(è¯æ³•å±‚é¢ä¸Šçš„çˆ¶çº§)æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ã€‚è¿™æ ·ç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾è¡¨å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p>\n<p>ä¸‹é¢ï¼Œè®©æˆ‘ä»¬ä»¥ä¸€ä¸ªå‡½æ•°çš„åˆ›å»ºå’Œæ¿€æ´»ä¸¤ä¸ªæ—¶æœŸæ¥è®²è§£ä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•åˆ›å»ºå’Œå˜åŒ–çš„ã€‚</p>\n<h2 id=\"å‡½æ•°åˆ›å»º\"><a href=\"#å‡½æ•°åˆ›å»º\" class=\"headerlink\" title=\"å‡½æ•°åˆ›å»º\"></a>å‡½æ•°åˆ›å»º</h2><p>å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†,è¿™æ˜¯å› ä¸ºå‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ [[scope]]ï¼Œå½“å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šä¿å­˜æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡åˆ°å…¶ä¸­ï¼Œä½ å¯ä»¥ç†è§£ [[scope]] å°±æ˜¯æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ï¼Œä½†æ˜¯æ³¨æ„ï¼š[[scope]] å¹¶ä¸ä»£è¡¨å®Œæ•´çš„ä½œç”¨åŸŸé“¾ï¼</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    function bar() &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å‡½æ•°åˆ›å»ºæ—¶ï¼Œå„è‡ªçš„[[scope]]ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">foo.[[scope]] &#x3D; [</span><br><span class=\"line\">  globalContext.VO</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\">bar.[[scope]] &#x3D; [</span><br><span class=\"line\">    fooContext.AO,</span><br><span class=\"line\">    globalContext.VO</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å‡½æ•°æ¿€æ´»\"><a href=\"#å‡½æ•°æ¿€æ´»\" class=\"headerlink\" title=\"å‡½æ•°æ¿€æ´»\"></a>å‡½æ•°æ¿€æ´»</h2><p>å½“å‡½æ•°æ¿€æ´»æ—¶ï¼Œè¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»º VO/AO åï¼Œå°±ä¼šå°†æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨é“¾çš„å‰ç«¯ã€‚</p>\n<p>è¿™æ—¶å€™æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å‘½åä¸º Scopeï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Scope &#x3D; [AO].concat([[Scope]]);</span><br></pre></td></tr></table></figure>\n\n<p>è‡³æ­¤ï¼Œä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•ã€‚</p>\n<h2 id=\"æŒ‰ç…§æ­¥éª¤åˆ†æ\"><a href=\"#æŒ‰ç…§æ­¥éª¤åˆ†æ\" class=\"headerlink\" title=\"æŒ‰ç…§æ­¥éª¤åˆ†æ\"></a>æŒ‰ç…§æ­¥éª¤åˆ†æ</h2><p>ä»¥ä¸‹é¢çš„ä¾‹å­ä¸ºä¾‹ï¼Œç»“åˆç€ä¹‹å‰è®²çš„å˜é‡å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½œç”¨åŸŸé“¾å’Œå˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var scope &#x3D; &quot;global scope&quot;;</span><br><span class=\"line\">function checkscope()&#123;</span><br><span class=\"line\">    var scope2 &#x3D; &#39;local scope&#39;;</span><br><span class=\"line\">    return scope2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">checkscope();</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<p>1.checkscope å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° å†…éƒ¨å±æ€§[[scope]]</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkscope.[[scope]] &#x3D; [</span><br><span class=\"line\">    globalContext.VO</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<p>2.æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ECStack &#x3D; [</span><br><span class=\"line\">    checkscopeContext,</span><br><span class=\"line\">    globalContext</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n<p>3.checkscope å‡½æ•°å¹¶ä¸ç«‹åˆ»æ‰§è¡Œï¼Œå¼€å§‹åšå‡†å¤‡å·¥ä½œï¼Œç¬¬ä¸€æ­¥ï¼šå¤åˆ¶å‡½æ•°[[scope]]å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkscopeContext &#x3D; &#123;</span><br><span class=\"line\">    Scope: checkscope.[[scope]],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4.ç¬¬äºŒæ­¥ï¼šç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œéšååˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼ŒåŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkscopeContext &#x3D; &#123;</span><br><span class=\"line\">    AO: &#123;</span><br><span class=\"line\">        arguments: &#123;</span><br><span class=\"line\">            length: 0</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        scope2: undefined</span><br><span class=\"line\">    &#125;ï¼Œ</span><br><span class=\"line\">    Scope: checkscope.[[scope]],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>5.ç¬¬ä¸‰æ­¥ï¼šå°†æ´»åŠ¨å¯¹è±¡å‹å…¥ checkscope ä½œç”¨åŸŸé“¾é¡¶ç«¯</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkscopeContext &#x3D; &#123;</span><br><span class=\"line\">    AO: &#123;</span><br><span class=\"line\">        arguments: &#123;</span><br><span class=\"line\">            length: 0</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        scope2: undefined</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    Scope: [AO, [[Scope]]]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>6.å‡†å¤‡å·¥ä½œåšå®Œï¼Œå¼€å§‹æ‰§è¡Œå‡½æ•°ï¼Œéšç€å‡½æ•°çš„æ‰§è¡Œï¼Œä¿®æ”¹ AO çš„å±æ€§å€¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">checkscopeContext &#x3D; &#123;</span><br><span class=\"line\">    AO: &#123;</span><br><span class=\"line\">        arguments: &#123;</span><br><span class=\"line\">            length: 0</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        scope2: &#39;local scope&#39;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    Scope: [AO, [[Scope]]]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>7.æŸ¥æ‰¾åˆ° scope2 çš„å€¼ï¼Œè¿”å›åå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ECStack &#x3D; [</span><br><span class=\"line\">    globalContext</span><br><span class=\"line\">];</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"4-é—­åŒ…\"><a href=\"#4-é—­åŒ…\" class=\"headerlink\" title=\"4.é—­åŒ…\"></a>4.é—­åŒ…</h1><h2 id=\"å®šä¹‰-1\"><a href=\"#å®šä¹‰-1\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>MDN å¯¹é—­åŒ…çš„å®šä¹‰ä¸ºï¼š</p>\n<blockquote>\n<p>é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚</p>\n</blockquote>\n<p>é‚£ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡å‘¢ï¼Ÿ</p>\n<blockquote>\n<p>è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„ï¼Œä½†æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡çš„å˜é‡ã€‚</p>\n</blockquote>\n<p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºé—­åŒ…å…±æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>\n<blockquote>\n<p>é—­åŒ… = å‡½æ•° + å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„è‡ªç”±å˜é‡</p>\n</blockquote>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var a &#x3D; 1;</span><br><span class=\"line\"></span><br><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    console.log(a);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo();</span><br></pre></td></tr></table></figure>\n\n<p>foo å‡½æ•°å¯ä»¥è®¿é—®å˜é‡ aï¼Œä½†æ˜¯ a æ—¢ä¸æ˜¯ foo å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œä¹Ÿä¸æ˜¯ foo å‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥ a å°±æ˜¯è‡ªç”±å˜é‡ã€‚</p>\n<p>é‚£ä¹ˆï¼Œå‡½æ•° foo + foo å‡½æ•°è®¿é—®çš„è‡ªç”±å˜é‡ a ä¸å°±æ˜¯æ„æˆäº†ä¸€ä¸ªé—­åŒ…å˜›â€¦â€¦</p>\n<p>è¿˜çœŸæ˜¯è¿™æ ·çš„ï¼</p>\n<p>æ‰€ä»¥åœ¨ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ä¸­å°±è®²åˆ°ï¼šä»æŠ€æœ¯çš„è§’åº¦è®²ï¼Œæ‰€æœ‰çš„JavaScriptå‡½æ•°éƒ½æ˜¯é—­åŒ…ã€‚å› ä¸ºå®ƒä»¬éƒ½åœ¨åˆ›å»ºçš„æ—¶å€™å°±å°†ä¸Šå±‚ä¸Šä¸‹æ–‡çš„æ•°æ®ä¿å­˜èµ·æ¥äº†ã€‚å“ªæ€•æ˜¯ç®€å•çš„å…¨å±€å˜é‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå‡½æ•°ä¸­è®¿é—®å…¨å±€å˜é‡å°±ç›¸å½“äºæ˜¯åœ¨è®¿é—®è‡ªç”±å˜é‡ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨æœ€å¤–å±‚çš„ä½œç”¨åŸŸã€‚</p>\n<p>è¿™åªæ˜¯ç†è®ºä¸Šçš„é—­åŒ…ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªå®è·µè§’åº¦ä¸Šçš„é—­åŒ…ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ±¤å§†å¤§å”ç¿»è¯‘çš„å…³äºé—­åŒ…çš„æ–‡ç« ä¸­çš„å®šä¹‰ï¼š</p>\n<p>ECMAScriptä¸­ï¼Œä»å®è·µè§’åº¦ï¼Œä»¥ä¸‹å‡½æ•°æ‰ç®—æ˜¯é—­åŒ…ï¼š</p>\n<p>1.å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼ˆæ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›ï¼‰</p>\n<p>2.åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡</p>\n<p>æ¥ä¸‹æ¥å°±æ¥è®²è®²å®è·µä¸Šçš„é—­åŒ…ã€‚</p>\n<h2 id=\"åˆ†æ\"><a href=\"#åˆ†æ\" class=\"headerlink\" title=\"åˆ†æ\"></a>åˆ†æ</h2><p>è®©æˆ‘ä»¬å…ˆå†™ä¸ªä¾‹å­ï¼Œä¾‹å­ä¾ç„¶æ˜¯æ¥è‡ªã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹ï¼Œç¨å¾®åšç‚¹æ”¹åŠ¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var scope &#x3D; &quot;global scope&quot;;</span><br><span class=\"line\">function checkscope()&#123;</span><br><span class=\"line\">    var scope &#x3D; &quot;local scope&quot;;</span><br><span class=\"line\">    function f()&#123;</span><br><span class=\"line\">        return scope;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return f;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; checkscope();</span><br><span class=\"line\">foo();</span><br></pre></td></tr></table></figure>\n\n<p>é¦–å…ˆæˆ‘ä»¬è¦åˆ†æä¸€ä¸‹è¿™æ®µä»£ç ä¸­æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜åŒ–æƒ…å†µã€‚</p>\n<p>è¿™é‡Œç›´æ¥ç»™å‡ºç®€è¦çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>è¿›å…¥å…¨å±€ä»£ç ï¼Œåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</li>\n<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–</li>\n<li>æ‰§è¡Œ checkscope å‡½æ•°ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œcheckscope æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</li>\n<li>checkscope æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–ï¼Œåˆ›å»ºå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€thisç­‰</li>\n<li>checkscope å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œcheckscope æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</li>\n<li>æ‰§è¡Œ f å‡½æ•°ï¼Œåˆ›å»º f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œf æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</li>\n<li>f æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–ï¼Œåˆ›å»ºå˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€thisç­‰</li>\n<li>f å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œf å‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</li>\n</ol>\n<p>äº†è§£åˆ°è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬åº”è¯¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼š</p>\n<p>å½“ f å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œcheckscope å‡½æ•°ä¸Šä¸‹æ–‡å·²ç»è¢«é”€æ¯äº†å•Š(å³ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­è¢«å¼¹å‡º)ï¼Œæ€ä¹ˆè¿˜ä¼šè¯»å–åˆ° checkscope ä½œç”¨åŸŸä¸‹çš„ scope å€¼å‘¢ï¼Ÿ</p>\n<p>ä»¥ä¸Šçš„ä»£ç ï¼Œè¦æ˜¯è½¬æ¢æˆ PHPï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨ PHP ä¸­ï¼Œf å‡½æ•°åªèƒ½è¯»å–åˆ°è‡ªå·±ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸé‡Œçš„å€¼ï¼Œæ‰€ä»¥è¯»ä¸åˆ° checkscope ä¸‹çš„ scope å€¼ã€‚(è¿™æ®µæˆ‘é—®çš„PHPåŒäº‹â€¦â€¦)</p>\n<p>ç„¶è€Œ JavaScript å´æ˜¯å¯ä»¥çš„ï¼</p>\n<p>å½“æˆ‘ä»¬äº†è§£äº†å…·ä½“çš„æ‰§è¡Œè¿‡ç¨‹åï¼Œæˆ‘ä»¬çŸ¥é“ f æ‰§è¡Œä¸Šä¸‹æ–‡ç»´æŠ¤äº†ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fContext &#x3D; &#123;</span><br><span class=\"line\">    Scope: [AO, checkscopeContext.AO, globalContext.VO],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹çš„ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ªä½œç”¨åŸŸé“¾ï¼Œf å‡½æ•°ä¾ç„¶å¯ä»¥è¯»å–åˆ° checkscopeContext.AO çš„å€¼ï¼Œè¯´æ˜å½“ f å‡½æ•°å¼•ç”¨äº† checkscopeContext.AO ä¸­çš„å€¼çš„æ—¶å€™ï¼Œå³ä½¿ checkscopeContext è¢«é”€æ¯äº†ï¼Œä½†æ˜¯ JavaScript ä¾ç„¶ä¼šè®© checkscopeContext.AO æ´»åœ¨å†…å­˜ä¸­ï¼Œf å‡½æ•°ä¾ç„¶å¯ä»¥é€šè¿‡ f å‡½æ•°çš„ä½œç”¨åŸŸé“¾æ‰¾åˆ°å®ƒï¼Œæ­£æ˜¯å› ä¸º JavaScript åšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œä»è€Œå®ç°äº†é—­åŒ…è¿™ä¸ªæ¦‚å¿µã€‚</p>\n<p>æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å†çœ‹ä¸€éå®è·µè§’åº¦ä¸Šé—­åŒ…çš„å®šä¹‰ï¼š</p>\n<ol>\n<li>å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œå®ƒä»ç„¶å­˜åœ¨ï¼ˆæ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›ï¼‰</li>\n<li>åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡</li>\n</ol>\n<p>åœ¨è¿™é‡Œå†è¡¥å……ä¸€ä¸ªã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹è‹±æ–‡åŸç‰ˆå¯¹é—­åŒ…çš„å®šä¹‰:</p>\n<blockquote>\n<p>This combination of a function object and a scope (a set of variable bindings) in which the functionâ€™s variables are resolved is called a closure in the computer science literature.</p>\n</blockquote>\n<p>é—­åŒ…åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ¦‚å¿µï¼Œå¤§å®¶ä¸è¦å»æƒ³å¾—å¤ªå¤æ‚ã€‚</p>\n<h2 id=\"å¿…åˆ·é¢˜\"><a href=\"#å¿…åˆ·é¢˜\" class=\"headerlink\" title=\"å¿…åˆ·é¢˜\"></a>å¿…åˆ·é¢˜</h2><p>æ¥ä¸‹æ¥ï¼Œçœ‹è¿™é“åˆ·é¢˜å¿…åˆ·ï¼Œé¢è¯•å¿…è€ƒçš„é—­åŒ…é¢˜ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var data &#x3D; [];</span><br><span class=\"line\"></span><br><span class=\"line\">for (var i &#x3D; 0; i &lt; 3; i++) &#123;</span><br><span class=\"line\">  data[i] &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(i);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">data[0]();</span><br><span class=\"line\">data[1]();</span><br><span class=\"line\">data[2]();</span><br></pre></td></tr></table></figure>\n\n<p>ç­”æ¡ˆæ˜¯éƒ½æ˜¯ 3ï¼Œè®©æˆ‘ä»¬åˆ†æä¸€ä¸‹åŸå› ï¼š</p>\n<p>å½“æ‰§è¡Œåˆ° data[0] å‡½æ•°ä¹‹å‰ï¼Œæ­¤æ—¶å…¨å±€ä¸Šä¸‹æ–‡çš„ VO ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">globalContext &#x3D; &#123;</span><br><span class=\"line\">    VO: &#123;</span><br><span class=\"line\">        data: [...],</span><br><span class=\"line\">        i: 3</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ data[0] å‡½æ•°çš„æ—¶å€™ï¼Œdata[0] å‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">data[0]Context &#x3D; &#123;</span><br><span class=\"line\">    Scope: [AO, globalContext.VO]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>data[0]Context çš„ AO å¹¶æ²¡æœ‰ i å€¼ï¼Œæ‰€ä»¥ä¼šä» globalContext.VO ä¸­æŸ¥æ‰¾ï¼Œi ä¸º 3ï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœå°±æ˜¯ 3ã€‚</p>\n<p>data[1] å’Œ data[2] æ˜¯ä¸€æ ·çš„é“ç†ã€‚</p>\n<p>æ‰€ä»¥è®©æˆ‘ä»¬æ”¹æˆé—­åŒ…çœ‹çœ‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var data &#x3D; [];</span><br><span class=\"line\"></span><br><span class=\"line\">for (var i &#x3D; 0; i &lt; 3; i++) &#123;</span><br><span class=\"line\">  data[i] &#x3D; (function (i) &#123;</span><br><span class=\"line\">        return function()&#123;</span><br><span class=\"line\">            console.log(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">  &#125;)(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">data[0]();</span><br><span class=\"line\">data[1]();</span><br><span class=\"line\">data[2]();</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œåˆ° data[0] å‡½æ•°ä¹‹å‰ï¼Œæ­¤æ—¶å…¨å±€ä¸Šä¸‹æ–‡çš„ VO ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">globalContext &#x3D; &#123;</span><br><span class=\"line\">    VO: &#123;</span><br><span class=\"line\">        data: [...],</span><br><span class=\"line\">        i: 3</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è·Ÿæ²¡æ”¹ä¹‹å‰ä¸€æ¨¡ä¸€æ ·ã€‚</p>\n<p>å½“æ‰§è¡Œ data[0] å‡½æ•°çš„æ—¶å€™ï¼Œdata[0] å‡½æ•°çš„ä½œç”¨åŸŸé“¾å‘ç”Ÿäº†æ”¹å˜ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">data[0]Context &#x3D; &#123;</span><br><span class=\"line\">    Scope: [AO, åŒ¿åå‡½æ•°Context.AO globalContext.VO]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åŒ¿åå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„AOä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">åŒ¿åå‡½æ•°Context &#x3D; &#123;</span><br><span class=\"line\">    AO: &#123;</span><br><span class=\"line\">        arguments: &#123;</span><br><span class=\"line\">            0: 0,</span><br><span class=\"line\">            length: 1</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        i: 0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>data[0]Context çš„ AO å¹¶æ²¡æœ‰ i å€¼ï¼Œæ‰€ä»¥ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾ä»åŒ¿åå‡½æ•° Context.AO ä¸­æŸ¥æ‰¾ï¼Œè¿™æ—¶å€™å°±ä¼šæ‰¾ i ä¸º 0ï¼Œæ‰¾åˆ°äº†å°±ä¸ä¼šå¾€ globalContext.VO ä¸­æŸ¥æ‰¾äº†ï¼Œå³ä½¿ globalContext.VO ä¹Ÿæœ‰ i çš„å€¼(å€¼ä¸º3)ï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœå°±æ˜¯0ã€‚</p>\n<p>data[1] å’Œ data[2] æ˜¯ä¸€æ ·çš„é“ç†ã€‚</p>\n<h1 id=\"5-å˜é‡å¯¹è±¡\"><a href=\"#5-å˜é‡å¯¹è±¡\" class=\"headerlink\" title=\"5.å˜é‡å¯¹è±¡\"></a>5.å˜é‡å¯¹è±¡</h1><h2 id=\"å˜é‡å¯¹è±¡\"><a href=\"#å˜é‡å¯¹è±¡\" class=\"headerlink\" title=\"å˜é‡å¯¹è±¡\"></a>å˜é‡å¯¹è±¡</h2><p>å˜é‡å¯¹è±¡æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå­˜å‚¨äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚</p>\n<p>å› ä¸ºä¸åŒæ‰§è¡Œä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡ç¨æœ‰ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥èŠèŠå…¨å±€ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡å’Œå‡½æ•°ä¸Šä¸‹æ–‡ä¸‹çš„å˜é‡å¯¹è±¡ã€‚</p>\n<h2 id=\"å…¨å±€ä¸Šä¸‹æ–‡\"><a href=\"#å…¨å±€ä¸Šä¸‹æ–‡\" class=\"headerlink\" title=\"å…¨å±€ä¸Šä¸‹æ–‡\"></a>å…¨å±€ä¸Šä¸‹æ–‡</h2><p>æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œå«å…¨å±€å¯¹è±¡ã€‚åœ¨ <a href=\"http://www.w3school.com.cn/jsref/jsref_obj_global.asp\">W3School</a> ä¸­ä¹Ÿæœ‰ä»‹ç»ï¼š</p>\n<blockquote>\n<p>å…¨å±€å¯¹è±¡æ˜¯é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä½œä¸º JavaScript çš„å…¨å±€å‡½æ•°å’Œå…¨å±€å±æ€§çš„å ä½ç¬¦ã€‚é€šè¿‡ä½¿ç”¨å…¨å±€å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰å…¶ä»–æ‰€æœ‰é¢„å®šä¹‰çš„å¯¹è±¡ã€å‡½æ•°å’Œå±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨é¡¶å±‚ JavaScript ä»£ç ä¸­ï¼Œå¯ä»¥ç”¨å…³é”®å­— this å¼•ç”¨å…¨å±€å¯¹è±¡ã€‚å› ä¸ºå…¨å±€å¯¹è±¡æ˜¯ä½œç”¨åŸŸé“¾çš„å¤´ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰éé™å®šæ€§çš„å˜é‡å’Œå‡½æ•°åéƒ½ä¼šä½œä¸ºè¯¥å¯¹è±¡çš„å±æ€§æ¥æŸ¥è¯¢ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¾‹å¦‚ï¼Œå½“JavaScript ä»£ç å¼•ç”¨ parseInt() å‡½æ•°æ—¶ï¼Œå®ƒå¼•ç”¨çš„æ˜¯å…¨å±€å¯¹è±¡çš„ parseInt å±æ€§ã€‚å…¨å±€å¯¹è±¡æ˜¯ä½œç”¨åŸŸé“¾çš„å¤´ï¼Œè¿˜æ„å‘³ç€åœ¨é¡¶å±‚ JavaScript ä»£ç ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡éƒ½å°†æˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚</p>\n</blockquote>\n<p>å¦‚æœçœ‹çš„ä¸æ˜¯å¾ˆæ‡‚çš„è¯ï¼Œå®¹æˆ‘å†æ¥ä»‹ç»ä¸‹å…¨å±€å¯¹è±¡:</p>\n<p>1.å¯ä»¥é€šè¿‡ this å¼•ç”¨ï¼Œåœ¨å®¢æˆ·ç«¯ JavaScript ä¸­ï¼Œå…¨å±€å¯¹è±¡å°±æ˜¯ Window å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">console.log(this);</span><br></pre></td></tr></table></figure>\n\n<p>2.å…¨å±€å¯¹è±¡æ˜¯ç”± Object æ„é€ å‡½æ•°å®ä¾‹åŒ–çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">console.log(this instanceof Object);</span><br></pre></td></tr></table></figure>\n\n<p>3.é¢„å®šä¹‰äº†ä¸€å †ï¼Œå—¯ï¼Œä¸€å¤§å †å‡½æ•°å’Œå±æ€§ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; éƒ½èƒ½ç”Ÿæ•ˆ</span><br><span class=\"line\">console.log(Math.random());</span><br><span class=\"line\">console.log(this.Math.random());</span><br></pre></td></tr></table></figure>\n\n<p>4.ä½œä¸ºå…¨å±€å˜é‡çš„å®¿ä¸»ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var a &#x3D; 1;</span><br><span class=\"line\">console.log(this.a);</span><br></pre></td></tr></table></figure>\n\n<p>5.å®¢æˆ·ç«¯ JavaScript ä¸­ï¼Œå…¨å±€å¯¹è±¡æœ‰ window å±æ€§æŒ‡å‘è‡ªèº«ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var a &#x3D; 1;</span><br><span class=\"line\">console.log(window.a);</span><br><span class=\"line\"></span><br><span class=\"line\">this.window.b &#x3D; 2;</span><br><span class=\"line\">console.log(this.b);</span><br></pre></td></tr></table></figure>\n\n<p>èŠ±äº†ä¸€ä¸ªå¤§ç¯‡å¹…ä»‹ç»å…¨å±€å¯¹è±¡ï¼Œå…¶å®å°±æƒ³è¯´ï¼š</p>\n<p>å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡å°±æ˜¯å…¨å±€å¯¹è±¡å‘ï¼</p>\n<h2 id=\"å‡½æ•°ä¸Šä¸‹æ–‡\"><a href=\"#å‡½æ•°ä¸Šä¸‹æ–‡\" class=\"headerlink\" title=\"å‡½æ•°ä¸Šä¸‹æ–‡\"></a>å‡½æ•°ä¸Šä¸‹æ–‡</h2><p>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬ç”¨æ´»åŠ¨å¯¹è±¡(activation object, AO)æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚</p>\n<p>æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œåªæ˜¯å˜é‡å¯¹è±¡æ˜¯è§„èŒƒä¸Šçš„æˆ–è€…è¯´æ˜¯å¼•æ“å®ç°ä¸Šçš„ï¼Œä¸å¯åœ¨ JavaScript ç¯å¢ƒä¸­è®¿é—®ï¼Œåªæœ‰åˆ°å½“è¿›å…¥ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ‰ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥æ‰å« activation object å‘ï¼Œè€Œåªæœ‰è¢«æ¿€æ´»çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚</p>\n<p>æ´»åŠ¨å¯¹è±¡æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ»è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„ arguments å±æ€§åˆå§‹åŒ–ã€‚arguments å±æ€§å€¼æ˜¯ Arguments å¯¹è±¡ã€‚</p>\n<h2 id=\"æ‰§è¡Œè¿‡ç¨‹\"><a href=\"#æ‰§è¡Œè¿‡ç¨‹\" class=\"headerlink\" title=\"æ‰§è¡Œè¿‡ç¨‹\"></a>æ‰§è¡Œè¿‡ç¨‹</h2><p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼šåˆ†æå’Œæ‰§è¡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å«åšï¼š</p>\n<ol>\n<li>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</li>\n<li>ä»£ç æ‰§è¡Œ</li>\n</ol>\n<h3 id=\"è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡\"><a href=\"#è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡\" class=\"headerlink\" title=\"è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡\"></a>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</h3><p>å½“è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œè¿™æ—¶å€™è¿˜æ²¡æœ‰æ‰§è¡Œä»£ç ï¼Œ</p>\n<p>å˜é‡å¯¹è±¡ä¼šåŒ…æ‹¬ï¼š</p>\n<ol>\n<li>å‡½æ•°çš„æ‰€æœ‰å½¢å‚ (å¦‚æœæ˜¯å‡½æ•°ä¸Šä¸‹æ–‡)<ul>\n<li>ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º</li>\n<li>æ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸º undefined</li>\n</ul>\n</li>\n<li>å‡½æ•°å£°æ˜<ul>\n<li>ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡(function-object)ï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º</li>\n<li>å¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§</li>\n</ul>\n</li>\n<li>å˜é‡å£°æ˜<ul>\n<li>ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»ºï¼›</li>\n<li>å¦‚æœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§</li>\n</ul>\n</li>\n</ol>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo(a) &#123;</span><br><span class=\"line\">  var b &#x3D; 2;</span><br><span class=\"line\">  function c() &#123;&#125;</span><br><span class=\"line\">  var d &#x3D; function() &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  b &#x3D; 3;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo(1);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œè¿™æ—¶å€™çš„ AO æ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">AO &#x3D; &#123;</span><br><span class=\"line\">    arguments: &#123;</span><br><span class=\"line\">        0: 1,</span><br><span class=\"line\">        length: 1</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    a: 1,</span><br><span class=\"line\">    b: undefined,</span><br><span class=\"line\">    c: reference to function c()&#123;&#125;,</span><br><span class=\"line\">    d: undefined</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä»£ç æ‰§è¡Œ\"><a href=\"#ä»£ç æ‰§è¡Œ\" class=\"headerlink\" title=\"ä»£ç æ‰§è¡Œ\"></a>ä»£ç æ‰§è¡Œ</h3><p>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œæ ¹æ®ä»£ç ï¼Œä¿®æ”¹å˜é‡å¯¹è±¡çš„å€¼</p>\n<p>è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå½“ä»£ç æ‰§è¡Œå®Œåï¼Œè¿™æ—¶å€™çš„ AO æ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">AO &#x3D; &#123;</span><br><span class=\"line\">    arguments: &#123;</span><br><span class=\"line\">        0: 1,</span><br><span class=\"line\">        length: 1</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    a: 1,</span><br><span class=\"line\">    b: 3,</span><br><span class=\"line\">    c: reference to function c()&#123;&#125;,</span><br><span class=\"line\">    d: reference to FunctionExpression &quot;d&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ°è¿™é‡Œå˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å°±ä»‹ç»å®Œäº†ï¼Œè®©æˆ‘ä»¬ç®€æ´çš„æ€»ç»“æˆ‘ä»¬ä¸Šè¿°æ‰€è¯´ï¼š</p>\n<ol>\n<li>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡</li>\n<li>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ Arguments å¯¹è±¡</li>\n<li>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼</li>\n<li>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼</li>\n</ol>\n<h2 id=\"æ€è€ƒé¢˜\"><a href=\"#æ€è€ƒé¢˜\" class=\"headerlink\" title=\"æ€è€ƒé¢˜\"></a>æ€è€ƒé¢˜</h2><p>æœ€åè®©æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­ï¼š</p>\n<p>1.ç¬¬ä¸€é¢˜</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    console.log(a);</span><br><span class=\"line\">    a &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo(); &#x2F;&#x2F; ???</span><br><span class=\"line\"></span><br><span class=\"line\">function bar() &#123;</span><br><span class=\"line\">    a &#x3D; 1;</span><br><span class=\"line\">    console.log(a);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">bar(); &#x2F;&#x2F; ???</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬ä¸€æ®µä¼šæŠ¥é”™ï¼š<code>Uncaught ReferenceError: a is not defined</code>ã€‚</p>\n<p>ç¬¬äºŒæ®µä¼šæ‰“å°ï¼š<code>1</code>ã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºå‡½æ•°ä¸­çš„ â€œaâ€ å¹¶æ²¡æœ‰é€šè¿‡ var å…³é”®å­—å£°æ˜ï¼Œæ‰€æœ‰ä¸ä¼šè¢«å­˜æ”¾åœ¨ AO ä¸­ã€‚</p>\n<p>ç¬¬ä¸€æ®µæ‰§è¡Œ console çš„æ—¶å€™ï¼Œ AO çš„å€¼æ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">AO &#x3D; &#123;</span><br><span class=\"line\">    arguments: &#123;</span><br><span class=\"line\">        length: 0</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ²¡æœ‰ a çš„å€¼ï¼Œç„¶åå°±ä¼šåˆ°å…¨å±€å»æ‰¾ï¼Œå…¨å±€ä¹Ÿæ²¡æœ‰ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p>\n<p>å½“ç¬¬äºŒæ®µæ‰§è¡Œ console çš„æ—¶å€™ï¼Œå…¨å±€å¯¹è±¡å·²ç»è¢«èµ‹äºˆäº† a å±æ€§ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä»å…¨å±€æ‰¾åˆ° a çš„å€¼ï¼Œæ‰€ä»¥ä¼šæ‰“å° 1ã€‚</p>\n<p>2.ç¬¬äºŒé¢˜</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">console.log(foo);</span><br><span class=\"line\"></span><br><span class=\"line\">function foo()&#123;</span><br><span class=\"line\">    console.log(&quot;foo&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; 1;</span><br></pre></td></tr></table></figure>\n\n<p>ä¼šæ‰“å°å‡½æ•°ï¼Œè€Œä¸æ˜¯ undefined ã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºåœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œé¦–å…ˆä¼šå¤„ç†å‡½æ•°å£°æ˜ï¼Œå…¶æ¬¡ä¼šå¤„ç†å˜é‡å£°æ˜ï¼Œå¦‚æœå¦‚æœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚</p>\n<h1 id=\"6-ä»ECMAScriptè§„èŒƒè§£è¯»this\"><a href=\"#6-ä»ECMAScriptè§„èŒƒè§£è¯»this\" class=\"headerlink\" title=\"6.ä»ECMAScriptè§„èŒƒè§£è¯»this\"></a>6.ä»ECMAScriptè§„èŒƒè§£è¯»this</h1><p> ECMAScript 5.1 è§„èŒƒåœ°å€ï¼š</p>\n<p>è‹±æ–‡ç‰ˆï¼š<a href=\"http://es5.github.io/#x15.1\">http://es5.github.io/#x15.1</a></p>\n<p>ä¸­æ–‡ç‰ˆï¼š<a href=\"http://yanhaijing.com/es5/#115\">http://yanhaijing.com/es5/#115</a></p>\n<p>è®©æˆ‘ä»¬å¼€å§‹äº†è§£è§„èŒƒå§ï¼</p>\n<h2 id=\"Types\"><a href=\"#Types\" class=\"headerlink\" title=\"Types\"></a>Types</h2><p>é¦–å…ˆæ˜¯ç¬¬ 8 ç«  Typesï¼š</p>\n<p>ECMAScript çš„ç±»å‹åˆ†ä¸ºè¯­è¨€ç±»å‹å’Œè§„èŒƒç±»å‹ã€‚</p>\n<p>ECMAScript è¯­è¨€ç±»å‹æ˜¯å¼€å‘è€…ç›´æ¥ä½¿ç”¨ ECMAScript å¯ä»¥æ“ä½œçš„ã€‚å…¶å®å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Undefined, Null, Boolean, String, Number, å’Œ Objectã€‚</p>\n<p>è€Œè§„èŒƒç±»å‹ç›¸å½“äº meta-valuesï¼Œæ˜¯ç”¨æ¥ç”¨ç®—æ³•æè¿° ECMAScript è¯­è¨€ç»“æ„å’Œ ECMAScript è¯­è¨€ç±»å‹çš„ã€‚è§„èŒƒç±»å‹åŒ…æ‹¬ï¼šReference, List, Completion, Property Descriptor, Property Identifier, Lexical Environment, å’Œ Environment Recordã€‚</p>\n<p>æ²¡æ‡‚ï¼Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“åœ¨ ECMAScript è§„èŒƒä¸­è¿˜æœ‰ä¸€ç§åªå­˜åœ¨äºè§„èŒƒä¸­çš„ç±»å‹ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ç”¨æ¥æè¿°è¯­è¨€åº•å±‚è¡Œä¸ºé€»è¾‘ã€‚</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p> Reference ç±»å‹ã€‚å®ƒä¸ this çš„æŒ‡å‘æœ‰ç€å¯†åˆ‡çš„å…³è”ã€‚</p>\n<p>è®©æˆ‘ä»¬çœ‹ 8.7 ç«  The Reference Specification Typeï¼š</p>\n<blockquote>\n<p>The Reference type is used to explain the behaviour of such operators as delete, typeof, and the assignment operators.</p>\n</blockquote>\n<p>æ‰€ä»¥ Reference ç±»å‹å°±æ˜¯ç”¨æ¥è§£é‡Šè¯¸å¦‚ deleteã€typeof ä»¥åŠèµ‹å€¼ç­‰æ“ä½œè¡Œä¸ºçš„ã€‚</p>\n<p>æŠ„è¢­å°¤é›¨æºªå¤§å¤§çš„è¯ï¼Œå°±æ˜¯ï¼š</p>\n<blockquote>\n<p>è¿™é‡Œçš„ Reference æ˜¯ä¸€ä¸ª Specification Typeï¼Œä¹Ÿå°±æ˜¯ â€œåªå­˜åœ¨äºè§„èŒƒé‡Œçš„æŠ½è±¡ç±»å‹â€ã€‚å®ƒä»¬æ˜¯ä¸ºäº†æ›´å¥½åœ°æè¿°è¯­è¨€çš„åº•å±‚è¡Œä¸ºé€»è¾‘æ‰å­˜åœ¨çš„ï¼Œä½†å¹¶ä¸å­˜åœ¨äºå®é™…çš„ js ä»£ç ä¸­ã€‚</p>\n</blockquote>\n<p>å†çœ‹æ¥ä¸‹æ¥çš„è¿™æ®µå…·ä½“ä»‹ç» Reference çš„å†…å®¹ï¼š</p>\n<blockquote>\n<p>A Reference is a resolved name binding.</p>\n</blockquote>\n<blockquote>\n<p>A Reference consists of three components, the base value, the referenced name and the Boolean valued strict reference flag.</p>\n</blockquote>\n<blockquote>\n<p>The base value is either undefined, an Object, a Boolean, a String, a Number, or an environment record (10.2.1).</p>\n</blockquote>\n<blockquote>\n<p>A base value of undefined indicates that the reference could not be resolved to a binding. The referenced name is a String.</p>\n</blockquote>\n<p>è¿™æ®µè®²è¿°äº† Reference çš„æ„æˆï¼Œç”±ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>\n<ul>\n<li>base value</li>\n<li>referenced name</li>\n<li>strict reference</li>\n</ul>\n<p>å¯æ˜¯è¿™äº›åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬ç®€å•çš„ç†è§£çš„è¯ï¼š</p>\n<p>base value å°±æ˜¯å±æ€§æ‰€åœ¨çš„å¯¹è±¡æˆ–è€…å°±æ˜¯ EnvironmentRecordï¼Œå®ƒçš„å€¼åªå¯èƒ½æ˜¯ undefined, an Object, a Boolean, a String, a Number, or an environment record å…¶ä¸­çš„ä¸€ç§ã€‚</p>\n<p>referenced name å°±æ˜¯å±æ€§çš„åç§°ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; 1;</span><br><span class=\"line\">&#x2F;&#x2F; å¯¹åº”çš„Referenceæ˜¯ï¼š</span><br><span class=\"line\">var fooReference &#x3D; &#123;</span><br><span class=\"line\">    base: EnvironmentRecord,</span><br><span class=\"line\">    name: &#39;foo&#39;,</span><br><span class=\"line\">    strict: false</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>å†ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    bar: function () &#123;</span><br><span class=\"line\">        return this;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">foo.bar(); &#x2F;&#x2F; foo</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; barå¯¹åº”çš„Referenceæ˜¯ï¼š</span><br><span class=\"line\">var BarReference &#x3D; &#123;</span><br><span class=\"line\">    base: foo,</span><br><span class=\"line\">    propertyName: &#39;bar&#39;,</span><br><span class=\"line\">    strict: false</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>è€Œä¸”è§„èŒƒä¸­è¿˜æä¾›äº†è·å– Reference ç»„æˆéƒ¨åˆ†çš„æ–¹æ³•ï¼Œæ¯”å¦‚ GetBase å’Œ IsPropertyReferenceã€‚</p>\n<p>è¿™ä¸¤ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œç®€å•çœ‹ä¸€çœ‹ï¼š</p>\n<p>1.GetBase</p>\n<blockquote>\n<p>GetBase(V). Returns the base value component of the reference V.</p>\n</blockquote>\n<p>è¿”å› reference çš„ base valueã€‚</p>\n<p>2.IsPropertyReference</p>\n<blockquote>\n<p>IsPropertyReference(V). Returns true if either the base value is an object or HasPrimitiveBase(V) is true; otherwise returns false.</p>\n</blockquote>\n<p>ç®€å•çš„ç†è§£ï¼šå¦‚æœ base value æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±è¿”å›trueã€‚</p>\n<h2 id=\"GetValue\"><a href=\"#GetValue\" class=\"headerlink\" title=\"GetValue\"></a>GetValue</h2><p>é™¤æ­¤ä¹‹å¤–ï¼Œç´§æ¥ç€åœ¨ 8.7.1 ç« è§„èŒƒä¸­å°±è®²äº†ä¸€ä¸ªç”¨äºä» Reference ç±»å‹è·å–å¯¹åº”å€¼çš„æ–¹æ³•ï¼š GetValueã€‚</p>\n<p>ç®€å•æ¨¡æ‹Ÿ GetValue çš„ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; 1;</span><br><span class=\"line\"></span><br><span class=\"line\">var fooReference &#x3D; &#123;</span><br><span class=\"line\">    base: EnvironmentRecord,</span><br><span class=\"line\">    name: &#39;foo&#39;,</span><br><span class=\"line\">    strict: false</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">GetValue(fooReference) &#x2F;&#x2F; 1;</span><br></pre></td></tr></table></figure>\n\n<p>GetValue è¿”å›å¯¹è±¡å±æ€§çœŸæ­£çš„å€¼ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼š</p>\n<p><strong>è°ƒç”¨ GetValueï¼Œè¿”å›çš„å°†æ˜¯å…·ä½“çš„å€¼ï¼Œè€Œä¸å†æ˜¯ä¸€ä¸ª Reference</strong></p>\n<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œè¿™ä¸ªå¾ˆé‡è¦ã€‚</p>\n<h2 id=\"å¦‚ä½•ç¡®å®šthisçš„å€¼\"><a href=\"#å¦‚ä½•ç¡®å®šthisçš„å€¼\" class=\"headerlink\" title=\"å¦‚ä½•ç¡®å®šthisçš„å€¼\"></a>å¦‚ä½•ç¡®å®šthisçš„å€¼</h2><p>å…³äº Reference è®²äº†é‚£ä¹ˆå¤šï¼Œä¸ºä»€ä¹ˆè¦è®² Reference å‘¢ï¼Ÿåˆ°åº• Reference è·Ÿæœ¬æ–‡çš„ä¸»é¢˜ this æœ‰å“ªäº›å…³è”å‘¢ï¼Ÿå¦‚æœä½ èƒ½è€å¿ƒçœ‹å®Œä¹‹å‰çš„å†…å®¹ï¼Œä»¥ä¸‹å¼€å§‹è¿›å…¥é«˜èƒ½é˜¶æ®µï¼š</p>\n<p>çœ‹è§„èŒƒ 11.2.3 Function Callsï¼š</p>\n<p>è¿™é‡Œè®²äº†å½“å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚ä½•ç¡®å®š this çš„å–å€¼ã€‚</p>\n<p>åªçœ‹ç¬¬ä¸€æ­¥ã€ç¬¬å…­æ­¥ã€ç¬¬ä¸ƒæ­¥ï¼š</p>\n<blockquote>\n<p>1.Let <em>ref</em> be the result of evaluating MemberExpression.</p>\n</blockquote>\n<blockquote>\n<p>6.If Type(<em>ref</em>) is Reference, then</p>\n</blockquote>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">a.If IsPropertyReference(ref) is true, then</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">i.Let thisValue be GetBase(ref).</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">b.Else, the base of ref is an Environment Record</span><br></pre></td></tr></table></figure>\n</blockquote>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">i.Let thisValue be the result of calling the ImplicitThisValue concrete method of GetBase(ref).</span><br></pre></td></tr></table></figure>\n\n<p>7.Else, Type(<em>ref</em>) is not Reference.</p>\n</blockquote>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">a. Let thisValue be undefined.</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>è®©æˆ‘ä»¬æè¿°ä¸€ä¸‹ï¼š</p>\n<p>1.è®¡ç®— MemberExpression çš„ç»“æœèµ‹å€¼ç»™ ref</p>\n<p>2.åˆ¤æ–­ ref æ˜¯ä¸æ˜¯ä¸€ä¸ª Reference ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">2.1 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” IsPropertyReference(ref) æ˜¯ true, é‚£ä¹ˆ this çš„å€¼ä¸º GetBase(ref)</span><br><span class=\"line\"></span><br><span class=\"line\">2.2 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” base value å€¼æ˜¯ Environment Record, é‚£ä¹ˆthisçš„å€¼ä¸º ImplicitThisValue(ref)</span><br><span class=\"line\"></span><br><span class=\"line\">2.3 å¦‚æœ ref ä¸æ˜¯ Referenceï¼Œé‚£ä¹ˆ this çš„å€¼ä¸º undefined</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…·ä½“åˆ†æ\"><a href=\"#å…·ä½“åˆ†æ\" class=\"headerlink\" title=\"å…·ä½“åˆ†æ\"></a>å…·ä½“åˆ†æ</h2><p>è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çœ‹ï¼š</p>\n<ol>\n<li>è®¡ç®— MemberExpression çš„ç»“æœèµ‹å€¼ç»™ ref</li>\n</ol>\n<p>ä»€ä¹ˆæ˜¯ MemberExpressionï¼Ÿçœ‹è§„èŒƒ 11.2 Left-Hand-Side Expressionsï¼š</p>\n<p>MemberExpression :</p>\n<ul>\n<li>PrimaryExpression // åŸå§‹è¡¨è¾¾å¼ å¯ä»¥å‚è§ã€ŠJavaScriptæƒå¨æŒ‡å—ç¬¬å››ç« ã€‹</li>\n<li>FunctionExpression // å‡½æ•°å®šä¹‰è¡¨è¾¾å¼</li>\n<li>MemberExpression [ Expression ] // å±æ€§è®¿é—®è¡¨è¾¾å¼</li>\n<li>MemberExpression . IdentifierName // å±æ€§è®¿é—®è¡¨è¾¾å¼</li>\n<li>new MemberExpression Arguments // å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼</li>\n</ul>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    console.log(this)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo(); &#x2F;&#x2F; MemberExpression æ˜¯ foo</span><br><span class=\"line\"></span><br><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        console.log(this)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo()(); &#x2F;&#x2F; MemberExpression æ˜¯ foo()</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    bar: function () &#123;</span><br><span class=\"line\">        return this;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo.bar(); &#x2F;&#x2F; MemberExpression æ˜¯ foo.bar</span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥ç®€å•ç†è§£ MemberExpression å…¶å®å°±æ˜¯()å·¦è¾¹çš„éƒ¨åˆ†ã€‚</p>\n<p>2.åˆ¤æ–­ ref æ˜¯ä¸æ˜¯ä¸€ä¸ª Reference ç±»å‹ã€‚</p>\n<p>å…³é”®å°±åœ¨äºçœ‹è§„èŒƒæ˜¯å¦‚ä½•å¤„ç†å„ç§ MemberExpressionï¼Œè¿”å›çš„ç»“æœæ˜¯ä¸æ˜¯ä¸€ä¸ªReferenceç±»å‹ã€‚</p>\n<p>ä¸¾æœ€åä¸€ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var value &#x3D; 1;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">  value: 2,</span><br><span class=\"line\">  bar: function () &#123;</span><br><span class=\"line\">    return this.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹1</span><br><span class=\"line\">console.log(foo.bar());</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹2</span><br><span class=\"line\">console.log((foo.bar)());</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹3</span><br><span class=\"line\">console.log((foo.bar &#x3D; foo.bar)());</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹4</span><br><span class=\"line\">console.log((false || foo.bar)());</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹5</span><br><span class=\"line\">console.log((foo.bar, foo.bar)());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"foo-bar\"><a href=\"#foo-bar\" class=\"headerlink\" title=\"foo.bar()\"></a>foo.bar()</h3><p>åœ¨ç¤ºä¾‹ 1 ä¸­ï¼ŒMemberExpression è®¡ç®—çš„ç»“æœæ˜¯ foo.barï¼Œé‚£ä¹ˆ foo.bar æ˜¯ä¸æ˜¯ä¸€ä¸ª Reference å‘¢ï¼Ÿ</p>\n<p>æŸ¥çœ‹è§„èŒƒ 11.2.1 Property Accessorsï¼Œè¿™é‡Œå±•ç¤ºäº†ä¸€ä¸ªè®¡ç®—çš„è¿‡ç¨‹ï¼Œä»€ä¹ˆéƒ½ä¸ç®¡äº†ï¼Œå°±çœ‹æœ€åä¸€æ­¥ï¼š</p>\n<blockquote>\n<p>Return a value of type Reference whose base value is baseValue and whose referenced name is propertyNameString, and whose strict mode flag is strict.</p>\n</blockquote>\n<p>æˆ‘ä»¬å¾—çŸ¥è¯¥è¡¨è¾¾å¼è¿”å›äº†ä¸€ä¸ª Reference ç±»å‹ï¼</p>\n<p>æ ¹æ®ä¹‹å‰çš„å†…å®¹ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥å€¼ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var Reference &#x3D; &#123;</span><br><span class=\"line\">  base: foo,</span><br><span class=\"line\">  name: &#39;bar&#39;,</span><br><span class=\"line\">  strict: false</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>æ¥ä¸‹æ¥æŒ‰ç…§ 2.1 çš„åˆ¤æ–­æµç¨‹èµ°ï¼š</p>\n<blockquote>\n<p>2.1 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” IsPropertyReference(ref) æ˜¯ true, é‚£ä¹ˆ this çš„å€¼ä¸º GetBase(ref)</p>\n</blockquote>\n<p>è¯¥å€¼æ˜¯ Reference ç±»å‹ï¼Œé‚£ä¹ˆ IsPropertyReference(ref) çš„ç»“æœæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p>\n<p>å‰é¢æˆ‘ä»¬å·²ç»é“ºå«äº† IsPropertyReference æ–¹æ³•ï¼Œå¦‚æœ base value æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç»“æœè¿”å› trueã€‚</p>\n<p>base value ä¸º fooï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ IsPropertyReference(ref) ç»“æœä¸º trueã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç¡®å®š this çš„å€¼äº†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">this &#x3D; GetBase(ref)ï¼Œ</span><br></pre></td></tr></table></figure>\n\n<p>GetBase ä¹Ÿå·²ç»é“ºå«äº†ï¼Œè·å¾— base value å€¼ï¼Œè¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯fooï¼Œæ‰€ä»¥ this çš„å€¼å°±æ˜¯ foo ï¼Œç¤ºä¾‹1çš„ç»“æœå°±æ˜¯ 2ï¼</p>\n<p>å”‰å‘€å¦ˆå‘€ï¼Œä¸ºäº†è¯æ˜ this æŒ‡å‘fooï¼ŒçœŸæ˜¯ç´¯æ­»æˆ‘äº†ï¼ä½†æ˜¯çŸ¥é“äº†åŸç†ï¼Œå‰©ä¸‹çš„å°±æ›´å¿«äº†ã€‚</p>\n<h3 id=\"foo-bar-1\"><a href=\"#foo-bar-1\" class=\"headerlink\" title=\"(foo.bar)()\"></a>(foo.bar)()</h3><p>çœ‹ç¤ºä¾‹2ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">console.log((foo.bar)());</span><br></pre></td></tr></table></figure>\n\n<p>foo.bar è¢« () åŒ…ä½ï¼ŒæŸ¥çœ‹è§„èŒƒ 11.1.6 The Grouping Operator</p>\n<p>ç›´æ¥çœ‹ç»“æœéƒ¨åˆ†ï¼š</p>\n<blockquote>\n<p>Return the result of evaluating Expression. This may be of type Reference.</p>\n</blockquote>\n<blockquote>\n<p>NOTE This algorithm does not apply GetValue to the result of evaluating Expression.</p>\n</blockquote>\n<p>å®é™…ä¸Š () å¹¶æ²¡æœ‰å¯¹ MemberExpression è¿›è¡Œè®¡ç®—ï¼Œæ‰€ä»¥å…¶å®è·Ÿç¤ºä¾‹ 1 çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p>\n<h3 id=\"foo-bar-foo-bar\"><a href=\"#foo-bar-foo-bar\" class=\"headerlink\" title=\"(foo.bar = foo.bar)()\"></a>(foo.bar = foo.bar)()</h3><p>çœ‹ç¤ºä¾‹3ï¼Œæœ‰èµ‹å€¼æ“ä½œç¬¦ï¼ŒæŸ¥çœ‹è§„èŒƒ 11.13.1 Simple Assignment ( = ):</p>\n<p>è®¡ç®—çš„ç¬¬ä¸‰æ­¥ï¼š</p>\n<blockquote>\n<p>3.Let rval be GetValue(rref).</p>\n</blockquote>\n<p>å› ä¸ºä½¿ç”¨äº† GetValueï¼Œæ‰€ä»¥è¿”å›çš„å€¼ä¸æ˜¯ Reference ç±»å‹ï¼Œ</p>\n<p>æŒ‰ç…§ä¹‹å‰è®²çš„åˆ¤æ–­é€»è¾‘ï¼š</p>\n<blockquote>\n<p>2.3 å¦‚æœ ref ä¸æ˜¯Referenceï¼Œé‚£ä¹ˆ this çš„å€¼ä¸º undefined</p>\n</blockquote>\n<p>this ä¸º undefinedï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis çš„å€¼ä¸º undefined çš„æ—¶å€™ï¼Œå…¶å€¼ä¼šè¢«éšå¼è½¬æ¢ä¸ºå…¨å±€å¯¹è±¡ã€‚</p>\n<h3 id=\"false-foo-bar\"><a href=\"#false-foo-bar\" class=\"headerlink\" title=\"(false || foo.bar)()\"></a>(false || foo.bar)()</h3><p>çœ‹ç¤ºä¾‹4ï¼Œé€»è¾‘ä¸ç®—æ³•ï¼ŒæŸ¥çœ‹è§„èŒƒ 11.11 Binary Logical Operatorsï¼š</p>\n<p>è®¡ç®—ç¬¬äºŒæ­¥ï¼š</p>\n<blockquote>\n<p>2.Let lval be GetValue(lref).</p>\n</blockquote>\n<p>å› ä¸ºä½¿ç”¨äº† GetValueï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯ Reference ç±»å‹ï¼Œthis ä¸º undefined</p>\n<h3 id=\"foo-bar-foo-bar-1\"><a href=\"#foo-bar-foo-bar-1\" class=\"headerlink\" title=\"(foo.bar, foo.bar)()\"></a>(foo.bar, foo.bar)()</h3><p>çœ‹ç¤ºä¾‹5ï¼Œé€—å·æ“ä½œç¬¦ï¼ŒæŸ¥çœ‹è§„èŒƒ11.14 Comma Operator ( , )</p>\n<p>è®¡ç®—ç¬¬äºŒæ­¥ï¼š</p>\n<blockquote>\n<p>2.Call GetValue(lref).</p>\n</blockquote>\n<p>å› ä¸ºä½¿ç”¨äº† GetValueï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯ Reference ç±»å‹ï¼Œthis ä¸º undefined</p>\n<h3 id=\"æ­æ™“ç»“æœ\"><a href=\"#æ­æ™“ç»“æœ\" class=\"headerlink\" title=\"æ­æ™“ç»“æœ\"></a>æ­æ™“ç»“æœ</h3><p>æ‰€ä»¥æœ€åä¸€ä¸ªä¾‹å­çš„ç»“æœæ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var value &#x3D; 1;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">  value: 2,</span><br><span class=\"line\">  bar: function () &#123;</span><br><span class=\"line\">    return this.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹1</span><br><span class=\"line\">console.log(foo.bar()); &#x2F;&#x2F; 2</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹2</span><br><span class=\"line\">console.log((foo.bar)()); &#x2F;&#x2F; 2</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹3</span><br><span class=\"line\">console.log((foo.bar &#x3D; foo.bar)()); &#x2F;&#x2F; 1</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹4</span><br><span class=\"line\">console.log((false || foo.bar)()); &#x2F;&#x2F; 1</span><br><span class=\"line\">&#x2F;&#x2F;ç¤ºä¾‹5</span><br><span class=\"line\">console.log((foo.bar, foo.bar)()); &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šä»¥ä¸Šæ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹çš„ç»“æœï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹å› ä¸º this è¿”å› undefinedï¼Œæ‰€ä»¥ç¤ºä¾‹ 3 ä¼šæŠ¥é”™ã€‚</p>\n<h3 id=\"è¡¥å……-1\"><a href=\"#è¡¥å……-1\" class=\"headerlink\" title=\"è¡¥å……\"></a>è¡¥å……</h3><p>æœ€æœ€åï¼Œå¿˜è®°äº†ä¸€ä¸ªæœ€æœ€æ™®é€šçš„æƒ…å†µï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    console.log(this)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo(); </span><br></pre></td></tr></table></figure>\n\n<p>MemberExpression æ˜¯ fooï¼Œè§£ææ ‡è¯†ç¬¦ï¼ŒæŸ¥çœ‹è§„èŒƒ 10.3.1 Identifier Resolutionï¼Œä¼šè¿”å›ä¸€ä¸ª Reference ç±»å‹çš„å€¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var fooReference &#x3D; &#123;</span><br><span class=\"line\">    base: EnvironmentRecord,</span><br><span class=\"line\">    name: &#39;foo&#39;,</span><br><span class=\"line\">    strict: false</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>æ¥ä¸‹æ¥è¿›è¡Œåˆ¤æ–­ï¼š</p>\n<blockquote>\n<p>2.1 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” IsPropertyReference(ref) æ˜¯ true, é‚£ä¹ˆ this çš„å€¼ä¸º GetBase(ref)</p>\n</blockquote>\n<p>å› ä¸º base value æ˜¯ EnvironmentRecordï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ª Object ç±»å‹ï¼Œè¿˜è®°å¾—å‰é¢è®²è¿‡çš„ base value çš„å–å€¼å¯èƒ½å—ï¼Ÿ åªå¯èƒ½æ˜¯ undefined, an Object, a Boolean, a String, a Number, å’Œ an environment record ä¸­çš„ä¸€ç§ã€‚</p>\n<p>IsPropertyReference(ref) çš„ç»“æœä¸º falseï¼Œè¿›å…¥ä¸‹ä¸ªåˆ¤æ–­ï¼š</p>\n<blockquote>\n<p>2.2 å¦‚æœ ref æ˜¯ Referenceï¼Œå¹¶ä¸” base value å€¼æ˜¯ Environment Record, é‚£ä¹ˆthisçš„å€¼ä¸º ImplicitThisValue(ref)</p>\n</blockquote>\n<p>base value æ­£æ˜¯ Environment Recordï¼Œæ‰€ä»¥ä¼šè°ƒç”¨ ImplicitThisValue(ref)</p>\n<p>æŸ¥çœ‹è§„èŒƒ 10.2.1.1.6ï¼ŒImplicitThisValue æ–¹æ³•çš„ä»‹ç»ï¼šè¯¥å‡½æ•°å§‹ç»ˆè¿”å› undefinedã€‚</p>\n<p>æ‰€ä»¥æœ€å this çš„å€¼å°±æ˜¯ undefinedã€‚</p>\n<h2 id=\"å¤šè¯´ä¸€å¥\"><a href=\"#å¤šè¯´ä¸€å¥\" class=\"headerlink\" title=\"å¤šè¯´ä¸€å¥\"></a>å¤šè¯´ä¸€å¥</h2><p>å°½ç®¡æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ this ä¸ºè°ƒç”¨å‡½æ•°çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œå¦‚ä½•è§£é‡Šä¸‹é¢è¿™ä¸ªä¾‹å­å‘¢ï¼Ÿ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var value &#x3D; 1;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">  value: 2,</span><br><span class=\"line\">  bar: function () &#123;</span><br><span class=\"line\">    return this.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log((false || foo.bar)()); &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<p>æ­¤å¤–ï¼Œåˆå¦‚ä½•ç¡®å®šè°ƒç”¨å‡½æ•°çš„å¯¹è±¡æ˜¯è°å‘¢ï¼Ÿåœ¨å†™æ–‡ç« ä¹‹åˆï¼Œæˆ‘å°±é¢ä¸´ç€è¿™äº›é—®é¢˜ï¼Œæœ€åè¿˜æ˜¯æ”¾å¼ƒä»å¤šä¸ªæƒ…å½¢ä¸‹ç»™å¤§å®¶è®²è§£ this æŒ‡å‘çš„æ€è·¯ï¼Œè€Œæ˜¯è¿½æ ¹æº¯æºçš„ä» ECMASciript è§„èŒƒè®²è§£ this çš„æŒ‡å‘ï¼Œå°½ç®¡ä»è¿™ä¸ªè§’åº¦å†™èµ·æ¥å’Œè¯»èµ·æ¥éƒ½æ¯”è¾ƒåƒåŠ›ï¼Œä½†æ˜¯ä¸€æ—¦å¤šè¯»å‡ éï¼Œæ˜ç™½åŸç†ï¼Œç»å¯¹ä¼šç»™ä½ ä¸€ä¸ªå…¨æ–°çš„è§†è§’çœ‹å¾… this ã€‚è€Œä½ ä¹Ÿå°±èƒ½æ˜ç™½ï¼Œå°½ç®¡ foo() å’Œ (foo.bar = foo.bar)() æœ€åç»“æœéƒ½æŒ‡å‘äº† undefinedï¼Œä½†æ˜¯ä¸¤è€…ä»è§„èŒƒçš„è§’åº¦ä¸Šå´æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ã€‚</p>\n<p>æ­¤ç¯‡è®²è§£æ‰§è¡Œä¸Šä¸‹æ–‡çš„ thisï¼Œå³ä¾¿ä¸æ˜¯å¾ˆç†è§£æ­¤ç¯‡çš„å†…å®¹ï¼Œä¾ç„¶ä¸å½±å“å¤§å®¶äº†è§£æ‰§è¡Œä¸Šä¸‹æ–‡è¿™ä¸ªä¸»é¢˜ä¸‹å…¶ä»–çš„å†…å®¹ã€‚æ‰€ä»¥ï¼Œä¾ç„¶å¯ä»¥å®‰å¿ƒçš„çœ‹ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚</p>\n<h1 id=\"7-ç«‹å³æ‰§è¡Œå‡½æ•°\"><a href=\"#7-ç«‹å³æ‰§è¡Œå‡½æ•°\" class=\"headerlink\" title=\"7.ç«‹å³æ‰§è¡Œå‡½æ•°\"></a>7.ç«‹å³æ‰§è¡Œå‡½æ•°</h1><p>å¯èƒ½ä½ å¹¶æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¯¹äºä¸“ä¸šæœ¯è¯­æœ‰ä¸€ç‚¹åšæŒç»†èŠ‚äººã€‚æ‰€æœ‰ï¼Œå½“æˆ‘å¬åˆ°æµè¡Œçš„ä½†æ˜¯è¿˜å­˜åœ¨è¯¯è§£çš„æœ¯è¯­â€œè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°â€å¤šæ¬¡æ—¶ï¼Œæˆ‘æœ€ç»ˆå†³å®šå°†æˆ‘çš„æƒ³æ³•å†™è¿›è¿™ç¯‡æ–‡ç« é‡Œã€‚</p>\n<p>é™¤äº†æä¾›å…³äºè¿™ç§æ¨¡å¼äº‹å®ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ä¸€äº›å…¨é¢çš„ä¿¡æ¯ï¼Œæ›´è¿›ä¸€æ­¥çš„ï¼Œå®é™…ä¸Šæˆ‘å»ºè®®æˆ‘ä»¬åº”è¯¥çŸ¥é“æˆ‘ä»¬åº”è¯¥å«å®ƒä»€ä¹ˆã€‚è€Œä¸”ï¼Œå¦‚æœä½ æƒ³è·³è¿‡è¿™é‡Œï¼Œä½ å¯ä»¥ç›´æ¥è·³åˆ°<strong>ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼</strong>è¿›è¡Œé˜…è¯»ï¼Œä½†æ˜¯æˆ‘å»ºè®®ä½ è¯»å®Œæ•´ç¯‡æ–‡ç« ã€‚</p>\n<h2 id=\"å®ƒæ˜¯ä»€ä¹ˆ\"><a href=\"#å®ƒæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"å®ƒæ˜¯ä»€ä¹ˆ\"></a>å®ƒæ˜¯ä»€ä¹ˆ</h2><p>åœ¨ JavaScript é‡Œï¼Œæ¯ä¸ªå‡½æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å› ä¸ºåœ¨å‡½æ•°é‡Œå®šä¹‰çš„å˜é‡å’Œå‡½æ•°æ˜¯å”¯ä¸€åœ¨å†…éƒ¨è¢«è®¿é—®çš„å˜é‡ï¼Œè€Œä¸æ˜¯åœ¨å¤–éƒ¨è¢«è®¿é—®çš„å˜é‡ï¼Œå½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°æä¾›çš„ä¸Šä¸‹æ–‡æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•åˆ›å»ºç§æœ‰å˜é‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function makeCounter() &#123;</span><br><span class=\"line\">    var i &#x3D; 0;</span><br><span class=\"line\">    return function()&#123;</span><br><span class=\"line\">        console.log(++i);</span><br><span class=\"line\">    &#125;;   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;è®°ä½ï¼š&#96;counter&#96;å’Œ&#96;counter2&#96;éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„å˜é‡ &#96;i&#96;</span><br><span class=\"line\"></span><br><span class=\"line\">var counter &#x3D; makeCounter();</span><br><span class=\"line\">counter();&#x2F;&#x2F;1</span><br><span class=\"line\">counter();&#x2F;&#x2F;2</span><br><span class=\"line\"></span><br><span class=\"line\">var counter2 &#x3D; makeCounter();</span><br><span class=\"line\">counter2();&#x2F;&#x2F;1</span><br><span class=\"line\">counter2();&#x2F;&#x2F;2</span><br><span class=\"line\"></span><br><span class=\"line\">i;&#x2F;&#x2F;ReferenceError: i is not defined(å®ƒåªå­˜åœ¨äºmakeCounteré‡Œ)</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¹¶ä¸éœ€è¦<code>makeWhatever</code>è¿™æ ·çš„å‡½æ•°è¿”å›å¤šæ¬¡ç´¯åŠ å€¼ï¼Œå¹¶ä¸”å¯ä»¥åªè°ƒç”¨ä¸€æ¬¡å¾—åˆ°ä¸€ä¸ªå•ä¸€çš„å€¼ï¼Œåœ¨å…¶ä»–ä¸€äº›æƒ…å†µé‡Œï¼Œä½ ç”šè‡³ä¸éœ€è¦æ˜ç¡®çš„çŸ¥é“è¿”å›å€¼ã€‚</p>\n<h3 id=\"å®ƒçš„æ ¸å¿ƒ\"><a href=\"#å®ƒçš„æ ¸å¿ƒ\" class=\"headerlink\" title=\"å®ƒçš„æ ¸å¿ƒ\"></a>å®ƒçš„æ ¸å¿ƒ</h3><p>ç°åœ¨ï¼Œæ— è®ºä½ å®šä¹‰ä¸€ä¸ªå‡½æ•°åƒè¿™æ ·<code>function foo()&#123;&#125;</code>æˆ–è€…<code>var foo = function()&#123;&#125;</code>ï¼Œè°ƒç”¨æ—¶ï¼Œä½ éƒ½éœ€è¦åœ¨åé¢åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ï¼Œåƒè¿™æ ·<code>foo()</code>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;å‘ä¸‹é¢è¿™æ ·å®šä¹‰çš„å‡½æ•°å¯ä»¥é€šè¿‡åœ¨å‡½æ•°åååŠ ä¸€å¯¹æ‹¬å·è¿›è¡Œè°ƒç”¨ï¼Œåƒè¿™æ ·&#96;foo()&#96;ï¼Œ</span><br><span class=\"line\">&#x2F;&#x2F;å› ä¸ºfooç›¸å¯¹äºå‡½æ•°è¡¨è¾¾å¼&#96;function()&#123;&#x2F;* code *&#x2F;&#125;&#96;åªæ˜¯ä¸€ä¸ªå¼•ç”¨å˜é‡</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; function()&#123;&#x2F;* code *&#x2F;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;é‚£è¿™å¯ä»¥è¯´æ˜å‡½æ•°è¡¨è¾¾å¼å¯ä»¥é€šè¿‡åœ¨å…¶ååŠ ä¸Šä¸€å¯¹æ‹¬å·è‡ªå·±è°ƒç”¨è‡ªå·±å—ï¼Ÿ</span><br><span class=\"line\"></span><br><span class=\"line\">function()&#123; &#x2F;* code *&#x2F;&#125;(); &#x2F;&#x2F;SyntaxError: Unexpected token (</span><br></pre></td></tr></table></figure>\n\n<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™é‡Œæ•è·äº†ä¸€ä¸ªé”™è¯¯ã€‚å½“åœ†æ‹¬å·ä¸ºäº†è°ƒç”¨å‡½æ•°å‡ºç°åœ¨å‡½æ•°åé¢æ—¶ï¼Œæ— è®ºåœ¨å…¨å±€ç¯å¢ƒæˆ–è€…å±€éƒ¨ç¯å¢ƒé‡Œé‡åˆ°äº†è¿™æ ·çš„<code>function</code>å…³é”®å­—ï¼Œé»˜è®¤çš„ï¼Œå®ƒä¼šå°†å®ƒå½“ä½œæ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œè€Œä¸æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼Œå¦‚æœä½ ä¸æ˜ç¡®çš„å‘Šè¯‰åœ†æ‹¬å·å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒä¼šå°†å…¶å½“ä½œæ²¡æœ‰åå­—çš„å‡½æ•°å£°æ˜å¹¶ä¸”æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå‡½æ•°å£°æ˜éœ€è¦ä¸€ä¸ªåå­—ã€‚</p>\n<p><strong>é—®é¢˜1ï¼š</strong>è¿™é‡Œæˆ‘ä¹ˆå¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥åƒè¿™æ ·ç›´æ¥è°ƒç”¨å‡½æ•° <code>var foo = function()&#123;console.log(1)&#125;()</code>ï¼Œç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚<br><strong>é—®é¢˜2ï¼š</strong>åŒæ ·çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œåƒè¿™æ ·çš„å‡½æ•°å£°æ˜åœ¨åé¢åŠ ä¸Šåœ†æ‹¬å·è¢«ç›´æ¥è°ƒç”¨ï¼Œåˆä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„è§£ç­”ã€‚</p>\n<h3 id=\"å‡½æ•°ï¼Œåœ†æ‹¬å·ï¼Œé”™è¯¯\"><a href=\"#å‡½æ•°ï¼Œåœ†æ‹¬å·ï¼Œé”™è¯¯\" class=\"headerlink\" title=\"å‡½æ•°ï¼Œåœ†æ‹¬å·ï¼Œé”™è¯¯\"></a>å‡½æ•°ï¼Œåœ†æ‹¬å·ï¼Œé”™è¯¯</h3><p>æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœä½ ä¸ºä¸€ä¸ªå‡½æ•°æŒ‡å®šä¸€ä¸ªåå­—å¹¶åœ¨å®ƒåé¢æ”¾ä¸€å¯¹åœ†æ‹¬å·ï¼ŒåŒæ ·çš„ä¹Ÿä¼šæŠ›å‡ºé”™è¯¯ï¼Œä½†è¿™æ¬¡æ˜¯å› ä¸ºå¦å¤–ä¸€ä¸ªåŸå› ã€‚å½“åœ†æ‹¬å·æ”¾åœ¨ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼åé¢æŒ‡æ˜äº†è¿™æ˜¯ä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œåœ†æ‹¬å·æ”¾åœ¨ä¸€ä¸ªå£°æ˜åé¢ä¾¿æ„å‘³ç€å®Œå…¨çš„å’Œå‰é¢çš„å‡½æ•°å£°æ˜åˆ†å¼€äº†ï¼Œæ­¤æ—¶åœ†æ‹¬å·åªæ˜¯ä¸€ä¸ªç®€å•çš„ä»£è¡¨ä¸€ä¸ªæ‹¬å·(ç”¨æ¥æ§åˆ¶è¿ç®—ä¼˜å…ˆçš„æ‹¬å·)ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;ç„¶è€Œå‡½æ•°å£°æ˜è¯­æ³•ä¸Šæ˜¯æ— æ•ˆçš„ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªå£°æ˜ï¼Œç´§è·Ÿç€çš„åœ†æ‹¬å·æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºåœ†æ‹¬å·é‡Œéœ€è¦åŒ…å«è¡¨è¾¾å¼</span><br><span class=\"line\"></span><br><span class=\"line\">function foo()&#123; &#x2F;* code *&#x2F; &#125;();&#x2F;&#x2F;SyntaxError: Unexpected token</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;ç°åœ¨ï¼Œä½ æŠŠä¸€ä¸ªè¡¨è¾¾å¼æ”¾åœ¨åœ†æ‹¬å·é‡Œï¼Œæ²¡æœ‰æŠ›å‡ºé”™è¯¯...,ä½†æ˜¯å‡½æ•°ä¹Ÿå¹¶æ²¡æœ‰æ‰§è¡Œï¼Œå› ä¸ºï¼š</span><br><span class=\"line\"></span><br><span class=\"line\">function foo()&#123;&#x2F;* code *&#x2F;&#125;(1)</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;å®ƒç­‰åŒäºå¦‚ä¸‹ï¼Œä¸€ä¸ªå‡½æ•°å£°æ˜è·Ÿç€ä¸€ä¸ªå®Œå…¨æ²¡æœ‰å…³ç³»çš„è¡¨è¾¾å¼:</span><br><span class=\"line\"></span><br><span class=\"line\">function foo()&#123;&#x2F;* code *&#x2F;&#125;</span><br><span class=\"line\">(1);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰\"><a href=\"#ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰\" class=\"headerlink\" title=\"ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰\"></a>ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰</h2><p>å¹¸è¿çš„æ˜¯ï¼Œä¿®æ­£è¯­æ³•é”™è¯¯å¾ˆç®€å•ã€‚æœ€æµè¡Œçš„ä¹Ÿæœ€è¢«æ¥å—çš„æ–¹æ³•æ˜¯å°†å‡½æ•°å£°æ˜åŒ…è£¹åœ¨åœ†æ‹¬å·é‡Œæ¥å‘Šè¯‰è¯­æ³•åˆ†æå™¨å»è¡¨è¾¾ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œå› ä¸ºåœ¨Javascripté‡Œï¼Œåœ†æ‹¬å·ä¸èƒ½<strong>åŒ…å«</strong>å£°æ˜ã€‚å› ä¸ºè¿™ç‚¹ï¼Œå½“åœ†æ‹¬å·ä¸ºäº†åŒ…è£¹å‡½æ•°ç¢°ä¸Šäº† <code>function</code>å…³é”®è¯ï¼Œå®ƒä¾¿çŸ¥é“å°†å®ƒä½œä¸ºä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å»è§£æè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚<strong>æ³¨æ„ç†è§£</strong>è¿™é‡Œçš„åœ†æ‹¬å·å’Œä¸Šé¢çš„åœ†æ‹¬å·é‡åˆ°å‡½æ•°æ—¶çš„è¡¨ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ã€‚</p>\n<ul>\n<li>å½“åœ†æ‹¬å·å‡ºç°åœ¨åŒ¿åå‡½æ•°çš„æœ«å°¾æƒ³è¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®ƒä¼šé»˜è®¤å°†å‡½æ•°å½“æˆæ˜¯å‡½æ•°å£°æ˜ã€‚</li>\n<li>å½“åœ†æ‹¬å·åŒ…è£¹å‡½æ•°æ—¶ï¼Œå®ƒä¼šé»˜è®¤å°†å‡½æ•°ä½œä¸ºè¡¨è¾¾å¼å»è§£æï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;è¿™ä¸¤ç§æ¨¡å¼éƒ½å¯ä»¥è¢«ç”¨æ¥ç«‹å³è°ƒç”¨ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ©ç”¨å‡½æ•°çš„æ‰§è¡Œæ¥åˆ›é€ ç§æœ‰å˜é‡</span><br><span class=\"line\"></span><br><span class=\"line\">(function()&#123;&#x2F;* code *&#x2F;&#125;());&#x2F;&#x2F;Crockford recommends this oneï¼Œæ‹¬å·å†…çš„è¡¨è¾¾å¼ä»£è¡¨å‡½æ•°ç«‹å³è°ƒç”¨è¡¨è¾¾å¼</span><br><span class=\"line\">(function()&#123;&#x2F;* code *&#x2F;&#125;)();&#x2F;&#x2F;But this one works just as wellï¼Œæ‹¬å·å†…çš„è¡¨è¾¾å¼ä»£è¡¨å‡½æ•°è¡¨è¾¾å¼</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; Because the point of the parens or coercing operators is to disambiguate</span><br><span class=\"line\">&#x2F;&#x2F; between function expressions and function declarations, they can be</span><br><span class=\"line\">&#x2F;&#x2F; omitted when the parser already expects an expression (but please see the</span><br><span class=\"line\">&#x2F;&#x2F; &quot;important note&quot; below).</span><br><span class=\"line\"></span><br><span class=\"line\">var i &#x3D; function()&#123;return 10;&#125;();</span><br><span class=\"line\">true &amp;&amp; function()&#123;&#x2F;*code*&#x2F;&#125;();</span><br><span class=\"line\">0,function()&#123;&#125;();</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;å¦‚æœä½ å¹¶ä¸å…³å¿ƒè¿”å›å€¼ï¼Œæˆ–è€…è®©ä½ çš„ä»£ç å°½å¯èƒ½çš„æ˜“è¯»ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„å‡½æ•°å‰é¢å¸¦ä¸Šä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦æ¥å­˜å‚¨å­—èŠ‚</span><br><span class=\"line\"></span><br><span class=\"line\">!function()&#123;&#x2F;* code *&#x2F;&#125;();</span><br><span class=\"line\">~function()&#123;&#x2F;* code *&#x2F;&#125;();</span><br><span class=\"line\">-function()&#123;&#x2F;* code *&#x2F;&#125;();</span><br><span class=\"line\">+function()&#123;&#x2F;* code *&#x2F;&#125;();</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; Here&#39;s another variation, from @kuvos - I&#39;m not sure of the performance</span><br><span class=\"line\">&#x2F;&#x2F; implications, if any, of using the &#96;new&#96; keyword, but it works.</span><br><span class=\"line\">&#x2F;&#x2F; http:&#x2F;&#x2F;twitter.com&#x2F;kuvos&#x2F;status&#x2F;18209252090847232</span><br><span class=\"line\"></span><br><span class=\"line\">new function()&#123; &#x2F;* code *&#x2F; &#125;</span><br><span class=\"line\">new function()&#123; &#x2F;* code *&#x2F; &#125;() &#x2F;&#x2F; Only need parens if passing arguments</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å…³äºæ‹¬å·çš„é‡è¦ç¬”è®°\"><a href=\"#å…³äºæ‹¬å·çš„é‡è¦ç¬”è®°\" class=\"headerlink\" title=\"å…³äºæ‹¬å·çš„é‡è¦ç¬”è®°\"></a>å…³äºæ‹¬å·çš„é‡è¦ç¬”è®°</h3><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå½“é¢å¤–çš„å¸¦ç€æ­§ä¹‰çš„æ‹¬å·å›´ç»•åœ¨å‡½æ•°è¡¨è¾¾å¼å‘¨å›´æ˜¯æ²¡æœ‰å¿…è¦çš„(å› ä¸ºè¿™æ—¶å€™çš„æ‹¬å·å·²ç»å°†å…¶ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼å»è¡¨è¾¾)ï¼Œä½†å½“æ‹¬å·ç”¨äºè°ƒç”¨å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p>\n<p>è¿™æ ·çš„æ‹¬å·æŒ‡æ˜å‡½æ•°è¡¨è¾¾å¼å°†ä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œå¹¶ä¸”å˜é‡å°†ä¼šå‚¨å­˜å‡½æ•°çš„ç»“æœï¼Œè€Œä¸æ˜¯å‡½æ•°æœ¬èº«ã€‚å½“è¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¿™å¯ä»¥èŠ‚çº¦æ¯”äººé˜…è¯»ä½ ä»£ç çš„æ—¶é—´ï¼Œä¸ç”¨æ»šåˆ°é¡µé¢åº•éƒ¨å»çœ‹è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ã€‚</p>\n<p>ä½œä¸ºè§„åˆ™ï¼Œå½“ä½ ä¹¦å†™æ¸…æ¥šæ˜æ™°çš„ä»£ç æ—¶ï¼Œæœ‰å¿…è¦é˜»æ­¢ JavaScript æŠ›å‡ºé”™è¯¯çš„ï¼ŒåŒæ ·ä¹Ÿæœ‰å¿…è¦é˜»æ­¢å…¶ä»–å¼€å‘è€…å¯¹ä½ æŠ›å‡ºé”™è¯¯ <code>WTFError</code>!</p>\n<h3 id=\"ä¿å­˜é—­åŒ…çš„çŠ¶æ€\"><a href=\"#ä¿å­˜é—­åŒ…çš„çŠ¶æ€\" class=\"headerlink\" title=\"ä¿å­˜é—­åŒ…çš„çŠ¶æ€\"></a>ä¿å­˜é—­åŒ…çš„çŠ¶æ€</h3><p>å°±åƒå½“å‡½æ•°é€šè¿‡ä»–ä»¬çš„åå­—è¢«è°ƒç”¨æ—¶ï¼Œå‚æ•°ä¼šè¢«ä¼ é€’ï¼Œè€Œå½“å‡½æ•°è¡¨è¾¾å¼è¢«ç«‹å³è°ƒç”¨æ—¶ï¼Œå‚æ•°ä¹Ÿä¼šè¢«ä¼ é€’ã€‚ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥é”å®šå€¼å¹¶ä¸”æœ‰æ•ˆçš„ä¿å­˜æ­¤æ—¶çš„çŠ¶æ€ï¼Œå› ä¸ºä»»ä½•å®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…çš„å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨å¤–é¢å‡½æ•°ä¼ é€’è¿›æ¥çš„å‚æ•°å’Œå˜é‡(è¿™ç§å…³ç³»è¢«å«åšé—­åŒ…)ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å®ƒçš„è¿è¡ŒåŸç†å¯èƒ½å¹¶ä¸åƒä½ æƒ³çš„é‚£æ ·ï¼Œå› ä¸º&#96;i&#96;çš„å€¼ä»æ¥æ²¡æœ‰è¢«é”å®šã€‚</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸åçš„ï¼Œæ¯ä¸ªé“¾æ¥ï¼Œå½“è¢«ç‚¹å‡»æ—¶ï¼ˆå¾ªç¯å·²ç»è¢«å¾ˆå¥½çš„æ‰§è¡Œå®Œæ¯•ï¼‰ï¼Œå› æ­¤ä¼šå¼¹å‡ºæ‰€æœ‰å…ƒç´ çš„æ€»æ•°ï¼Œ</span><br><span class=\"line\">&#x2F;&#x2F; å› ä¸ºè¿™æ˜¯ &#96;i&#96; æ­¤æ—¶çš„çœŸå®å€¼ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">var elems &#x3D; document.getElementsByTagName(&#39;a&#39;);</span><br><span class=\"line\">for(var i &#x3D; 0;i &lt; elems.length; i++ ) &#123;</span><br><span class=\"line\">    elems[i].addEventListener(&#39;click&#39;,function(e)&#123;</span><br><span class=\"line\">        e.preventDefault();</span><br><span class=\"line\">        alert(&#39;I am link #&#39; + i)</span><br><span class=\"line\">        &#125;,false);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è€Œåƒä¸‹é¢è¿™æ ·æ”¹å†™ï¼Œä¾¿å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨IIFEé‡Œï¼Œ&#96;i&#96;å€¼è¢«é”å®šåœ¨äº†&#96;lockedInIndex&#96;é‡Œã€‚</span><br><span class=\"line\">&#x2F;&#x2F; åœ¨å¾ªç¯ç»“æŸæ‰§è¡Œæ—¶ï¼Œå°½ç®¡&#96;i&#96;å€¼çš„æ•°å€¼æ˜¯æ‰€æœ‰å…ƒç´ çš„æ€»å’Œï¼Œä½†æ¯ä¸€æ¬¡å‡½æ•°è¡¨è¾¾å¼è¢«è°ƒç”¨æ—¶ï¼Œ</span><br><span class=\"line\">&#x2F;&#x2F; IIFE é‡Œçš„ &#96;lockedInIndex&#96; å€¼éƒ½æ˜¯&#96;i&#96;ä¼ ç»™å®ƒçš„å€¼,æ‰€ä»¥å½“é“¾æ¥è¢«ç‚¹å‡»æ—¶ï¼Œæ­£ç¡®çš„å€¼è¢«å¼¹å‡ºã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">var elems &#x3D; document.getElementsByTagName(&#39;a&#39;);</span><br><span class=\"line\">for(var i &#x3D; 0;i &lt; elems.length;i++) &#123;</span><br><span class=\"line\">    (function(lockedInIndex)&#123;</span><br><span class=\"line\">        elems[i].addEventListener(&#39;click&#39;,function(e)&#123;</span><br><span class=\"line\">            e.preventDefault();</span><br><span class=\"line\">            alert(&#39;I am link #&#39; + lockedInIndex);</span><br><span class=\"line\">            &#125;,false)</span><br><span class=\"line\">    &#125;)(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;ä½ åŒæ ·å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨IIFEï¼Œä»…ä»…åªç”¨æ‹¬å·åŒ…æ‹¬ç‚¹å‡»å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸åŒ…å«æ•´ä¸ª&#96;addEventListener&#96;ã€‚</span><br><span class=\"line\">&#x2F;&#x2F;æ— è®ºç”¨å“ªç§æ–¹å¼ï¼Œè¿™ä¸¤ä¸ªä¾‹å­éƒ½å¯ä»¥ç”¨IIFEå°†å€¼é”å®šï¼Œä¸è¿‡æˆ‘å‘ç°å‰é¢ä¸€ä¸ªä¾‹å­æ›´å¯è¯»</span><br><span class=\"line\"></span><br><span class=\"line\">var elems &#x3D; document.getElementsByTagName( &#39;a&#39; );</span><br><span class=\"line\"></span><br><span class=\"line\">for ( var i &#x3D; 0; i &lt; elems.length; i++ ) &#123;</span><br><span class=\"line\">    elems[ i ].addEventListener( &#39;click&#39;, (function( lockedInIndex )&#123;</span><br><span class=\"line\">        return function(e)&#123;</span><br><span class=\"line\">            e.preventDefault();</span><br><span class=\"line\">            alert( &#39;I am link #&#39; + lockedInIndex );</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        &#125;)( i ),false);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è®°ä½ï¼Œåœ¨è¿™æœ€åä¸¤ä¸ªä¾‹å­é‡Œï¼Œ<code>lockedInIndex</code>å¯ä»¥æ²¡æœ‰ä»»ä½•é—®é¢˜çš„è®¿é—®<code>i</code>,ä½†æ˜¯ä½œä¸ºå‡½æ•°çš„å‚æ•°ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„å‘½åæ ‡è¯†ç¬¦å¯ä»¥ä½¿æ¦‚å¿µæ›´åŠ å®¹æ˜“çš„è¢«è§£é‡Šã€‚</p>\n<p>ç«‹å³æ‰§è¡Œå‡½æ•°ä¸€ä¸ªæœ€æ˜¾è‘—çš„ä¼˜åŠ¿æ˜¯å°±ç®—å®ƒæ²¡æœ‰å‘½åæˆ–è€…è¯´æ˜¯åŒ¿åï¼Œå‡½æ•°è¡¨è¾¾å¼ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰ä½¿ç”¨æ ‡è¯†ç¬¦çš„æƒ…å†µä¸‹è¢«ç«‹å³è°ƒç”¨ï¼Œä¸€ä¸ªé—­åŒ…ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰å½“å‰å˜é‡æ±¡æŸ“çš„æƒ…å†µä¸‹è¢«ä½¿ç”¨ã€‚</p>\n<h4 id=\"è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°-â€œSelf-executing-anonymous-functionâ€-æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ\"><a href=\"#è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°-â€œSelf-executing-anonymous-functionâ€-æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°(â€œSelf-executing anonymous functionâ€)æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ\"></a>è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°(â€œSelf-executing anonymous functionâ€)æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</h4><p>ä½ çœ‹åˆ°å®ƒå·²ç»è¢«æåˆ°å¥½å‡ æ¬¡äº†ï¼Œä½†æ˜¯å®ƒä»ç„¶ä¸æ˜¯é‚£ä¹ˆæ¸…æ¥šçš„è¢«è§£é‡Šï¼Œæˆ‘æè®®å°†æœ¯è¯­æ”¹æˆ**â€Immediately-Invoked Function Expressionâ€<strong>ï¼Œæˆ–è€…ï¼Œ</strong>IIFE**ï¼Œå¦‚æœä½ å–œæ¬¢ç¼©å†™çš„è¯ã€‚</p>\n<p>ä»€ä¹ˆæ˜¯<strong>Immediately-Invoked Function Expression</strong>å‘¢ï¼Ÿå®ƒä½¿ä¸€ä¸ªè¢«ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ã€‚å°±åƒå¼•å¯¼ä½ å»è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ã€‚</p>\n<p>æˆ‘æƒ³Javascriptç¤¾åŒºçš„æˆå‘˜åº”è¯¥å¯ä»¥åœ¨ä»–ä»¬çš„æ–‡ç« é‡Œæˆ–è€…é™ˆè¿°é‡Œæ¥å—æœ¯è¯­ï¼Œ<strong>Immediately-Invoked Function Expression</strong>å’Œ <strong>IIFE</strong>ï¼Œå› ä¸ºæˆ‘æ„Ÿè§‰è¿™æ ·æ›´å®¹æ˜“è®©è¿™ä¸ªæ¦‚å¿µè¢«ç†è§£ï¼Œå¹¶ä¸”æœ¯è¯­â€self-executing anonymous functionâ€çœŸçš„ä¹Ÿä¸å¤Ÿç²¾ç¡®ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;ä¸‹é¢æ˜¯ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼Œé€’å½’çš„è°ƒç”¨è‡ªå·±æœ¬èº«</span><br><span class=\"line\"></span><br><span class=\"line\">function foo()&#123;foo();&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;è¿™æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ã€‚å› ä¸ºå®ƒæ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œå®ƒå¿…é¡»æ˜¯ä½¿ç”¨&#96;arguments.callee&#96;å±æ€§æ¥è°ƒç”¨å®ƒè‡ªå·±</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; function()&#123;arguments.callee();&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;è¿™ä¹Ÿè®¸ç®—æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œä½†æ˜¯ä»…ä»…å½“&#96;foo&#96;æ ‡è¯†ç¬¦ä½œä¸ºå®ƒçš„å¼•ç”¨æ—¶ï¼Œå¦‚æœä½ å°†å®ƒæ¢æˆç”¨&#96;foo&#96;æ¥è°ƒç”¨åŒæ ·å¯è¡Œ</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; function()&#123;foo();&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;æœ‰äº›äººåƒè¿™æ ·å«&#39;self-executing anonymous function&#39;ä¸‹é¢çš„å‡½æ•°,å³ä½¿å®ƒä¸æ˜¯è‡ªæ‰§è¡Œçš„ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰è°ƒç”¨å®ƒè‡ªå·±ã€‚ç„¶åï¼Œå®ƒåªæ˜¯è¢«ç«‹å³è°ƒç”¨äº†è€Œå·²ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">(function()&#123; &#x2F;*code*&#x2F; &#125;());</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;ä¸ºå‡½æ•°è¡¨è¾¾å¼å¢åŠ æ ‡è¯†ç¬¦(ä¹Ÿå°±æ˜¯è¯´åˆ›é€ ä¸€ä¸ªå‘½åå‡½æ•°)å¯¹æˆ‘ä»¬çš„è°ƒè¯•ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸€æ—¦å‘½åï¼Œå‡½æ•°å°†ä¸å†åŒ¿åã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">(function foo()&#123;&#x2F;* code *&#x2F;&#125;());</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F;IIFEsåŒæ ·ä¹Ÿå¯ä»¥è‡ªæ‰§è¡Œï¼Œå°½ç®¡ï¼Œä¹Ÿè®¸ä»–ä¸æ˜¯æœ€æœ‰ç”¨çš„æ¨¡å¼</span><br><span class=\"line\"></span><br><span class=\"line\">(function()&#123;arguments.callee();&#125;())</span><br><span class=\"line\">(function foo()&#123;foo();&#125;())</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; One last thing to note: this will cause an error in BlackBerry 5, because</span><br><span class=\"line\">&#x2F;&#x2F; inside a named function expression, that name is undefined. Awesome, huh?</span><br><span class=\"line\"></span><br><span class=\"line\">(function foo()&#123; foo(); &#125;());</span><br></pre></td></tr></table></figure>\n\n<p>å¸Œæœ›ä¸Šé¢çš„ä¾‹å­å¯ä»¥è®©ä½ æ›´åŠ æ¸…æ¥šçš„çŸ¥é“æœ¯è¯­â€™self-executingâ€™æ˜¯æœ‰ä¸€äº›è¯¯å¯¼çš„ï¼Œå› ä¸ºä»–å¹¶ä¸æ˜¯æ‰§è¡Œè‡ªå·±çš„å‡½æ•°ï¼Œå°½ç®¡å‡½æ•°å·²ç»è¢«æ‰§è¡Œã€‚åŒæ ·çš„ï¼ŒåŒ¿åå‡½æ•°ä¹Ÿæ²¡ç”¨å¿…è¦ç‰¹åˆ«æŒ‡å‡ºï¼Œå› ä¸ºï¼Œ<strong>Immediately Invoked Function Expression</strong>ï¼Œæ—¢å¯ä»¥æ˜¯å‘½åå‡½æ•°ä¹Ÿå¯ä»¥åŒ¿åå‡½æ•°ã€‚</p>\n<h2 id=\"æœ€åï¼šæ¨¡å—æ¨¡å¼\"><a href=\"#æœ€åï¼šæ¨¡å—æ¨¡å¼\" class=\"headerlink\" title=\"æœ€åï¼šæ¨¡å—æ¨¡å¼\"></a>æœ€åï¼šæ¨¡å—æ¨¡å¼</h2><p>å½“æˆ‘è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œå¦‚æœæˆ‘ä¸è‡³å°‘ä¸€æ¬¡çš„æé†’æˆ‘è‡ªå·±å…³äºæ¨¡å—æ¨¡å¼ï¼Œæˆ‘ä¾¿å¾ˆå¯èƒ½ä¼šå¿½ç•¥å®ƒã€‚å¦‚æœä½ å¹¶ä¸å±æ€§ JavaScript é‡Œçš„æ¨¡å—æ¨¡å¼ï¼Œå®ƒå’Œæˆ‘ä¸‹é¢çš„ä¾‹å­å¾ˆåƒï¼Œä½†æ˜¯è¿”å›å€¼ç”¨å¯¹è±¡ä»£æ›¿äº†å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var counter &#x3D; (function()&#123;</span><br><span class=\"line\">    var i &#x3D; 0;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">        get: function()&#123;</span><br><span class=\"line\">            return i;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        set: function(val)&#123;</span><br><span class=\"line\">            i &#x3D; val;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        increment: function()&#123;</span><br><span class=\"line\">            return ++i;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#125;());</span><br><span class=\"line\">    counter.get();&#x2F;&#x2F;0</span><br><span class=\"line\">    counter.set(3);</span><br><span class=\"line\">    counter.increment();&#x2F;&#x2F;4</span><br><span class=\"line\">    counter.increment();&#x2F;&#x2F;5</span><br><span class=\"line\"></span><br><span class=\"line\">    conuter.i;&#x2F;&#x2F;undefined (&#96;i&#96; is not a property of the returned object)</span><br><span class=\"line\">    i;&#x2F;&#x2F;ReferenceError: i is not defined (it only exists inside the closure)</span><br></pre></td></tr></table></figure>\n\n<p>æ¨¡å—æ¨¡å¼æ–¹æ³•ä¸ä»…ç›¸å½“çš„å‰å®³è€Œä¸”ç®€å•ã€‚éå¸¸å°‘çš„ä»£ç ï¼Œä½ å¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨ä¸æ–¹æ³•å’Œå±æ€§ç›¸å…³çš„å‘½åï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡é‡Œï¼Œç»„ç»‡å…¨éƒ¨çš„æ¨¡å—ä»£ç å³æœ€å°åŒ–äº†å…¨å±€å˜é‡çš„æ±¡æŸ“ä¹Ÿåˆ›é€ äº†ä½¿ç”¨å˜é‡ã€‚</p>\n<h1 id=\"8-instanceof-å’Œ-typeof-çš„å®ç°åŸç†\"><a href=\"#8-instanceof-å’Œ-typeof-çš„å®ç°åŸç†\" class=\"headerlink\" title=\"8.instanceof å’Œ typeof çš„å®ç°åŸç†\"></a>8.instanceof å’Œ typeof çš„å®ç°åŸç†</h1><h3 id=\"typeof-å®ç°åŸç†\"><a href=\"#typeof-å®ç°åŸç†\" class=\"headerlink\" title=\"typeof å®ç°åŸç†\"></a>typeof å®ç°åŸç†</h3><p><code>typeof</code> ä¸€èˆ¬è¢«ç”¨äºåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>typeof</code> æ¥åˆ¤æ–­<code>number</code>,  <code>string</code>,  <code>object</code>,  <code>boolean</code>,  <code>function</code>, <code>undefined</code>,  <code>symbol</code> è¿™ä¸ƒç§ç±»å‹ï¼Œè¿™ç§åˆ¤æ–­èƒ½å¸®åŠ©æˆ‘ä»¬æå®šä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚åœ¨åˆ¤æ–­ä¸æ˜¯ object ç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œ<code>typeof</code>èƒ½æ¯”è¾ƒæ¸…æ¥šçš„å‘Šè¯‰æˆ‘ä»¬å…·ä½“æ˜¯å“ªä¸€ç±»çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œå¾ˆé—æ†¾çš„ä¸€ç‚¹æ˜¯ï¼Œ<code>typeof</code> åœ¨åˆ¤æ–­ä¸€ä¸ª objectçš„æ•°æ®çš„æ—¶å€™åªèƒ½å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ•°æ®æ˜¯ object, è€Œä¸èƒ½ç»†è‡´çš„å…·ä½“åˆ°æ˜¯å“ªä¸€ç§ object, æ¯”å¦‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let s &#x3D; new String(&#39;abc&#39;);</span><br><span class=\"line\">typeof s &#x3D;&#x3D;&#x3D; &#39;object&#39;&#x2F;&#x2F; true</span><br><span class=\"line\">s instanceof String &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>è¦æƒ³åˆ¤æ–­ä¸€ä¸ªæ•°æ®å…·ä½“æ˜¯å“ªä¸€ç§ object çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ <code>instanceof</code> è¿™ä¸ªæ“ä½œç¬¦æ¥åˆ¤æ–­ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢ä¼šè¯´åˆ°ã€‚</p>\n<p>æ¥è°ˆè°ˆå…³äº <code>typeof</code> çš„åŸç†å§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæƒ³ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼Œjs åœ¨åº•å±‚æ˜¯æ€ä¹ˆå­˜å‚¨æ•°æ®çš„ç±»å‹ä¿¡æ¯å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œä¸€ä¸ª js çš„å˜é‡ï¼Œåœ¨å®ƒçš„åº•å±‚å®ç°ä¸­ï¼Œå®ƒçš„ç±»å‹ä¿¡æ¯æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>\n<p>å…¶å®ï¼Œjs åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ğŸ‘‰</p>\n<ul>\n<li>000ï¼šå¯¹è±¡</li>\n<li>010ï¼šæµ®ç‚¹æ•°</li>\n<li>100ï¼šå­—ç¬¦ä¸²</li>\n<li>110ï¼šå¸ƒå°”</li>\n<li>1ï¼šæ•´æ•°</li>\n</ul>\n<p>but, å¯¹äº <code>undefined</code> å’Œ <code>null</code> æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æ˜¯æœ‰ç‚¹ç‰¹æ®Šçš„ã€‚</p>\n<p><code>null</code>ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0</p>\n<p><code>undefined</code>ï¼šç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤º</p>\n<p>æ‰€ä»¥ï¼Œ<code>typeof</code> åœ¨åˆ¤æ–­ <code>null</code> çš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼Œç”±äº <code>null</code> çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º0ï¼Œå› æ­¤ç›´æ¥è¢«å½“åšäº†å¯¹è±¡æ¥çœ‹å¾…ã€‚</p>\n<p>ç„¶è€Œç”¨ <code>instanceof</code> æ¥åˆ¤æ–­çš„è¯</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">null instanceof null &#x2F;&#x2F; TypeError: Right-hand side of &#39;instanceof&#39; is not an object</span><br></pre></td></tr></table></figure>\n\n<p><code>null</code> ç›´æ¥è¢«åˆ¤æ–­ä¸ºä¸æ˜¯ objectï¼Œè¿™ä¹Ÿæ˜¯ JavaScript çš„å†å²é—ç•™bugï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof\">typeof</a>ã€‚</p>\n<p>å› æ­¤åœ¨ç”¨ <code>typeof</code> æ¥åˆ¤æ–­å˜é‡ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæœ€å¥½æ˜¯ç”¨ <code>typeof</code> æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬<code>symbol</code>ï¼‰ï¼Œé¿å…å¯¹ null çš„åˆ¤æ–­ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªä¸é”™çš„åˆ¤æ–­ç±»å‹çš„æ–¹æ³•ï¼Œå°±æ˜¯Object.prototype.toStringï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•æ¥å¯¹ä¸€ä¸ªå˜é‡çš„ç±»å‹æ¥è¿›è¡Œæ¯”è¾ƒå‡†ç¡®çš„åˆ¤æ–­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Object.prototype.toString.call(1) &#x2F;&#x2F; &quot;[object Number]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(&#39;hi&#39;) &#x2F;&#x2F; &quot;[object String]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(&#123;a:&#39;hi&#39;&#125;) &#x2F;&#x2F; &quot;[object Object]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call([1,&#39;a&#39;]) &#x2F;&#x2F; &quot;[object Array]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(true) &#x2F;&#x2F; &quot;[object Boolean]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(() &#x3D;&gt; &#123;&#125;) &#x2F;&#x2F; &quot;[object Function]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(null) &#x2F;&#x2F; &quot;[object Null]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(undefined) &#x2F;&#x2F; &quot;[object Undefined]&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Object.prototype.toString.call(Symbol(1)) &#x2F;&#x2F; &quot;[object Symbol]&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"instanceof-æ“ä½œç¬¦çš„å®ç°åŸç†\"><a href=\"#instanceof-æ“ä½œç¬¦çš„å®ç°åŸç†\" class=\"headerlink\" title=\"instanceof æ“ä½œç¬¦çš„å®ç°åŸç†\"></a>instanceof æ“ä½œç¬¦çš„å®ç°åŸç†</h3><p>ä¹‹å‰æˆ‘ä»¬æåˆ°äº† <code>instanceof</code> æ¥åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼Œå…¶å® <code>instanceof</code> ä¸»è¦çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸç§ç±»å‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let person &#x3D; function () &#123;&#125;</span><br><span class=\"line\">let nicole &#x3D; new person()</span><br><span class=\"line\">nicole instanceof person &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶ï¼Œ<code>instanceof</code> ä¹Ÿå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯å…¶çˆ¶ç±»å‹æˆ–è€…ç¥–å…ˆç±»å‹çš„å®ä¾‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let person &#x3D; function () &#123;&#125;</span><br><span class=\"line\">let programmer &#x3D; function () &#123;&#125;</span><br><span class=\"line\">programmer.prototype &#x3D; new person()</span><br><span class=\"line\">let nicole &#x3D; new programmer()</span><br><span class=\"line\">nicole instanceof person &#x2F;&#x2F; true</span><br><span class=\"line\">nicole instanceof programmer &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ˜¯ <code>instanceof</code> çš„ç”¨æ³•ï¼Œä½†æ˜¯ <code>instanceof</code> çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ ¹æ® ECMAScript è¯­è¨€è§„èŒƒï¼Œæˆ‘æ¢³ç†äº†ä¸€ä¸‹å¤§æ¦‚çš„æ€è·¯ï¼Œç„¶åæ•´ç†äº†ä¸€æ®µä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function new_instance_of(leftVaule, rightVaule) &#123; </span><br><span class=\"line\">    let rightProto &#x3D; rightVaule.prototype; &#x2F;&#x2F; å–å³è¡¨è¾¾å¼çš„ prototype å€¼</span><br><span class=\"line\">    leftVaule &#x3D; leftVaule.__proto__; &#x2F;&#x2F; å–å·¦è¡¨è¾¾å¼çš„__proto__å€¼</span><br><span class=\"line\">    while (true) &#123;</span><br><span class=\"line\">    \tif (leftVaule &#x3D;&#x3D;&#x3D; null) &#123;</span><br><span class=\"line\">            return false;\t</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (leftVaule &#x3D;&#x3D;&#x3D; rightProto) &#123;</span><br><span class=\"line\">            return true;\t</span><br><span class=\"line\">        &#125; </span><br><span class=\"line\">        leftVaule &#x3D; leftVaule.__proto__ </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å…¶å® <code>instanceof</code> ä¸»è¦çš„å®ç°åŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ <code>prototype</code> åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œ<code>instanceof</code> åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéå†å·¦è¾¹å˜é‡çš„åŸå‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„ <code>prototype</code>ï¼Œå¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™ä¼šè¿”å› falseï¼Œå‘Šè¯‰æˆ‘ä»¬å·¦è¾¹å˜é‡å¹¶éæ˜¯å³è¾¹å˜é‡çš„å®ä¾‹ã€‚</p>\n<p>çœ‹å‡ ä¸ªå¾ˆæœ‰è¶£çš„ä¾‹å­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Foo() &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Object instanceof Object &#x2F;&#x2F; true</span><br><span class=\"line\">Function instanceof Function &#x2F;&#x2F; true</span><br><span class=\"line\">Function instanceof Object &#x2F;&#x2F; true</span><br><span class=\"line\">Foo instanceof Foo &#x2F;&#x2F; false</span><br><span class=\"line\">Foo instanceof Object &#x2F;&#x2F; true</span><br><span class=\"line\">Foo instanceof Function &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>\n\n<p>è¦æƒ³å…¨éƒ¨ç†è§£ <code>instanceof</code> çš„åŸç†ï¼Œé™¤äº†æˆ‘ä»¬åˆšåˆšæåˆ°çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ JavaScript çš„åŸå‹ç»§æ‰¿åŸç†ã€‚</p>\n<p>å…³äºåŸå‹ç»§æ‰¿çš„åŸç†ï¼Œæˆ‘ç®€å•ç”¨ä¸€å¼ å›¾æ¥è¡¨ç¤º</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/5/28/163a55d5d35b866d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>æˆ‘ä»¬çŸ¥é“æ¯ä¸ª JavaScript å¯¹è±¡å‡æœ‰ä¸€ä¸ªéšå¼çš„ <code>__proto__</code> åŸå‹å±æ€§ï¼Œè€Œæ˜¾å¼çš„åŸå‹å±æ€§æ˜¯ <code>prototype</code>ï¼Œåªæœ‰ <code>Object.prototype.__proto__</code> å±æ€§åœ¨æœªä¿®æ”¹çš„æƒ…å†µä¸‹ä¸º null å€¼ã€‚æ ¹æ®å›¾ä¸Šçš„åŸç†ï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸Šé¢æåˆ°çš„å‡ ä¸ªæœ‰è¶£çš„ <code>instanceof</code> ä½¿ç”¨çš„ä¾‹å­ã€‚</p>\n<ul>\n<li><p><code>Object instanceof Object</code></p>\n<p>ç”±å›¾å¯çŸ¥ï¼ŒObject çš„ <code>prototype</code> å±æ€§æ˜¯ <code>Object.prototype</code>, è€Œç”±äº Object æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”± Function æ‰€åˆ›å»ºï¼Œæ‰€ä»¥ <code>Object.__proto__</code> çš„å€¼æ˜¯ <code>Function.prototype</code>ï¼Œè€Œ <code>Function.prototype</code> çš„ <code>__proto__</code> å±æ€§æ˜¯ <code>Object.prototype</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡ºï¼Œ<code>Object instanceof Object</code> çš„ç»“æœæ˜¯ true ã€‚ç”¨ä»£ç ç®€å•çš„è¡¨ç¤ºä¸€ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">leftValue &#x3D; Object.__proto__ &#x3D; Function.prototype;</span><br><span class=\"line\">rightValue &#x3D; Object.prototype;</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€æ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue !&#x3D; rightValue</span><br><span class=\"line\">leftValue &#x3D; Function.prototype.__proto__ &#x3D; Object.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒæ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue &#x3D;&#x3D;&#x3D; rightValue</span><br><span class=\"line\">&#x2F;&#x2F; è¿”å› true</span><br></pre></td></tr></table></figure>\n\n<p><code>Function instanceof Function</code> å’Œ <code>Function instanceof Object</code> çš„è¿è¡Œè¿‡ç¨‹ä¸ <code>Object instanceof Object</code> ç±»ä¼¼ï¼Œæ•…ä¸å†è¯¦è¯´ã€‚</p>\n</li>\n<li><p><code>Foo instanceof Foo</code></p>\n<p>Foo å‡½æ•°çš„ <code>prototype</code> å±æ€§æ˜¯ <code>Foo.prototype</code>ï¼Œè€Œ Foo çš„ <code>__proto__</code> å±æ€§æ˜¯ <code>Function.prototype</code>ï¼Œç”±å›¾å¯çŸ¥ï¼ŒFoo çš„åŸå‹é“¾ä¸Šå¹¶æ²¡æœ‰ <code>Foo.prototype</code> ï¼Œå› æ­¤ <code>Foo instanceof Foo</code> ä¹Ÿå°±è¿”å› false ã€‚</p>\n<p>æˆ‘ä»¬ç”¨ä»£ç ç®€å•çš„è¡¨ç¤ºä¸€ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">leftValue &#x3D; Foo, rightValue &#x3D; Foo</span><br><span class=\"line\">leftValue &#x3D; Foo.__proto &#x3D; Function.prototype</span><br><span class=\"line\">rightValue &#x3D; Foo.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€æ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue !&#x3D; rightValue</span><br><span class=\"line\">leftValue &#x3D; Function.prototype.__proto__ &#x3D; Object.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒæ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue !&#x3D; rightValue</span><br><span class=\"line\">leftValue &#x3D; Object.prototype &#x3D; null</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸‰æ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue &#x3D;&#x3D;&#x3D; null</span><br><span class=\"line\">&#x2F;&#x2F; è¿”å› false</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>Foo instanceof Object</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">leftValue &#x3D; Foo, rightValue &#x3D; Object</span><br><span class=\"line\">leftValue &#x3D; Foo.__proto__ &#x3D; Function.prototype</span><br><span class=\"line\">rightValue &#x3D; Object.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€æ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue !&#x3D; rightValue</span><br><span class=\"line\">leftValue &#x3D; Function.prototype.__proto__ &#x3D; Object.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒæ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue &#x3D;&#x3D;&#x3D; rightValue</span><br><span class=\"line\">&#x2F;&#x2F; è¿”å› true</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>Foo instanceof Function</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">leftValue &#x3D; Foo, rightValue &#x3D; Function</span><br><span class=\"line\">leftValue &#x3D; Foo.__proto__ &#x3D; Function.prototype</span><br><span class=\"line\">rightValue &#x3D; Function.prototype</span><br><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€æ¬¡åˆ¤æ–­</span><br><span class=\"line\">leftValue &#x3D;&#x3D;&#x3D; rightValue</span><br><span class=\"line\">&#x2F;&#x2F; è¿”å› true </span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>typeof</code> æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ ok çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„å½“ç”¨ <code>typeof</code> æ¥åˆ¤æ–­ <code>null</code> ç±»å‹æ—¶çš„é—®é¢˜ï¼Œå¦‚æœæƒ³è¦åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„å…·ä½“ç±»å‹å¯ä»¥è€ƒè™‘ç”¨ <code>instanceof</code>ï¼Œä½†æ˜¯ <code>instanceof</code> ä¹Ÿå¯èƒ½åˆ¤æ–­ä¸å‡†ç¡®ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°ç»„ï¼Œä»–å¯ä»¥è¢« <code>instanceof</code> åˆ¤æ–­ä¸º Objectã€‚æ‰€ä»¥æˆ‘ä»¬è¦æƒ³æ¯”è¾ƒå‡†ç¡®çš„åˆ¤æ–­å¯¹è±¡å®ä¾‹çš„ç±»å‹æ—¶ï¼Œå¯ä»¥é‡‡å– <code>Object.prototype.toString.call</code> æ–¹æ³•ã€‚</p>\n<h1 id=\"9-bindå®ç°\"><a href=\"#9-bindå®ç°\" class=\"headerlink\" title=\"9.bindå®ç°\"></a>9.bindå®ç°</h1><h2 id=\"å®šä¹‰-2\"><a href=\"#å®šä¹‰-2\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>ä¸€å¥è¯ä»‹ç» bind:</p>\n<blockquote>\n<p>bind() æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚å½“è¿™ä¸ªæ–°å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œbind() çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä½œä¸ºå®ƒè¿è¡Œæ—¶çš„ thisï¼Œä¹‹åçš„ä¸€åºåˆ—å‚æ•°å°†ä¼šåœ¨ä¼ é€’çš„å®å‚å‰ä¼ å…¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚(æ¥è‡ªäº MDN )</p>\n</blockquote>\n<p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥é¦–å…ˆå¾—å‡º bind å‡½æ•°çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>\n<ol>\n<li>è¿”å›ä¸€ä¸ªå‡½æ•°</li>\n<li>å¯ä»¥ä¼ å…¥å‚æ•°</li>\n</ol>\n<h2 id=\"è¿”å›å‡½æ•°çš„æ¨¡æ‹Ÿå®ç°\"><a href=\"#è¿”å›å‡½æ•°çš„æ¨¡æ‹Ÿå®ç°\" class=\"headerlink\" title=\"è¿”å›å‡½æ•°çš„æ¨¡æ‹Ÿå®ç°\"></a>è¿”å›å‡½æ•°çš„æ¨¡æ‹Ÿå®ç°</h2><p>ä»ç¬¬ä¸€ä¸ªç‰¹ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    value: 1</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function bar() &#123;</span><br><span class=\"line\">    console.log(this.value);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è¿”å›äº†ä¸€ä¸ªå‡½æ•°</span><br><span class=\"line\">var bindFoo &#x3D; bar.bind(foo); </span><br><span class=\"line\"></span><br><span class=\"line\">bindFoo(); &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<p>å…³äºæŒ‡å®š this çš„æŒ‡å‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ call æˆ–è€… apply å®ç°ï¼Œæ¥å†™ç¬¬ä¸€ç‰ˆçš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€ç‰ˆ</span><br><span class=\"line\">Function.prototype.bind2 &#x3D; function (context) &#123;</span><br><span class=\"line\">    var self &#x3D; this;</span><br><span class=\"line\">    return function () &#123;</span><br><span class=\"line\">        return self.apply(context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ­¤å¤–ï¼Œä¹‹æ‰€ä»¥ <code>return self.apply(context)</code>ï¼Œæ˜¯è€ƒè™‘åˆ°ç»‘å®šå‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œä¾ç„¶æ˜¯è¿™ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    value: 1</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function bar() &#123;</span><br><span class=\"line\">\treturn this.value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var bindFoo &#x3D; bar.bind(foo);</span><br><span class=\"line\">console.log(bindFoo()); &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°\"><a href=\"#ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°\" class=\"headerlink\" title=\"ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°\"></a>ä¼ å‚çš„æ¨¡æ‹Ÿå®ç°</h2><p>æ¥ä¸‹æ¥çœ‹ç¬¬äºŒç‚¹ï¼Œå¯ä»¥ä¼ å…¥å‚æ•°ã€‚è¿™ä¸ªå°±æœ‰ç‚¹è®©äººè´¹è§£äº†ï¼Œæˆ‘åœ¨ bind çš„æ—¶å€™ï¼Œæ˜¯å¦å¯ä»¥ä¼ å‚å‘¢ï¼Ÿæˆ‘åœ¨æ‰§è¡Œ bind è¿”å›çš„å‡½æ•°çš„æ—¶å€™ï¼Œå¯ä¸å¯ä»¥ä¼ å‚å‘¢ï¼Ÿè®©æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    value: 1</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function bar(name, age) &#123;</span><br><span class=\"line\">    console.log(this.value);</span><br><span class=\"line\">    console.log(name);</span><br><span class=\"line\">    console.log(age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var bindFoo &#x3D; bar.bind(foo, &#39;daisy&#39;);</span><br><span class=\"line\">bindFoo(&#39;18&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; 1</span><br><span class=\"line\">&#x2F;&#x2F; daisy</span><br><span class=\"line\">&#x2F;&#x2F; 18</span><br></pre></td></tr></table></figure>\n\n<p>å‡½æ•°éœ€è¦ä¼  name å’Œ age ä¸¤ä¸ªå‚æ•°ï¼Œç«Ÿç„¶è¿˜å¯ä»¥åœ¨ bind çš„æ—¶å€™ï¼Œåªä¼ ä¸€ä¸ª nameï¼Œåœ¨æ‰§è¡Œè¿”å›çš„å‡½æ•°çš„æ—¶å€™ï¼Œå†ä¼ å¦ä¸€ä¸ªå‚æ•° age!</p>\n<p>è¿™å¯å’‹åŠï¼Ÿä¸æ€¥ï¼Œæˆ‘ä»¬ç”¨ arguments è¿›è¡Œå¤„ç†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒç‰ˆ</span><br><span class=\"line\">Function.prototype.bind2 &#x3D; function (context) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    var self &#x3D; this;</span><br><span class=\"line\">    &#x2F;&#x2F; è·å–bind2å‡½æ•°ä»ç¬¬äºŒä¸ªå‚æ•°åˆ°æœ€åä¸€ä¸ªå‚æ•°</span><br><span class=\"line\">    var args &#x3D; Array.prototype.slice.call(arguments, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">    return function () &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; è¿™ä¸ªæ—¶å€™çš„argumentsæ˜¯æŒ‡bindè¿”å›çš„å‡½æ•°ä¼ å…¥çš„å‚æ•°</span><br><span class=\"line\">        var bindArgs &#x3D; Array.prototype.slice.call(arguments);</span><br><span class=\"line\">        return self.apply(context, args.concat(bindArgs));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ„é€ å‡½æ•°æ•ˆæœçš„æ¨¡æ‹Ÿå®ç°\"><a href=\"#æ„é€ å‡½æ•°æ•ˆæœçš„æ¨¡æ‹Ÿå®ç°\" class=\"headerlink\" title=\"æ„é€ å‡½æ•°æ•ˆæœçš„æ¨¡æ‹Ÿå®ç°\"></a>æ„é€ å‡½æ•°æ•ˆæœçš„æ¨¡æ‹Ÿå®ç°</h2><p>å®Œæˆäº†è¿™ä¸¤ç‚¹ï¼Œæœ€éš¾çš„éƒ¨åˆ†åˆ°å•¦ï¼å› ä¸º bind è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯</p>\n<blockquote>\n<p>ä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ã€‚æä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´å½“ bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var value &#x3D; 2;</span><br><span class=\"line\"></span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    value: 1</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function bar(name, age) &#123;</span><br><span class=\"line\">    this.habit &#x3D; &#39;shopping&#39;;</span><br><span class=\"line\">    console.log(this.value);</span><br><span class=\"line\">    console.log(name);</span><br><span class=\"line\">    console.log(age);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">bar.prototype.friend &#x3D; &#39;kevin&#39;;</span><br><span class=\"line\"></span><br><span class=\"line\">var bindFoo &#x3D; bar.bind(foo, &#39;daisy&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">var obj &#x3D; new bindFoo(&#39;18&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; undefined</span><br><span class=\"line\">&#x2F;&#x2F; daisy</span><br><span class=\"line\">&#x2F;&#x2F; 18</span><br><span class=\"line\">console.log(obj.habit);</span><br><span class=\"line\">console.log(obj.friend);</span><br><span class=\"line\">&#x2F;&#x2F; shopping</span><br><span class=\"line\">&#x2F;&#x2F; kevin</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šå°½ç®¡åœ¨å…¨å±€å’Œ foo ä¸­éƒ½å£°æ˜äº† value å€¼ï¼Œæœ€åä¾ç„¶è¿”å›äº† undefindï¼Œè¯´æ˜ç»‘å®šçš„ this å¤±æ•ˆäº†ï¼Œå¦‚æœå¤§å®¶äº†è§£ new çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°±ä¼šçŸ¥é“è¿™ä¸ªæ—¶å€™çš„ this å·²ç»æŒ‡å‘äº† objã€‚</p>\n<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è¿”å›çš„å‡½æ•°çš„åŸå‹æ¥å®ç°ï¼Œè®©æˆ‘ä»¬å†™ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸‰ç‰ˆ</span><br><span class=\"line\">Function.prototype.bind2 &#x3D; function (context) &#123;</span><br><span class=\"line\">    var self &#x3D; this;</span><br><span class=\"line\">    var args &#x3D; Array.prototype.slice.call(arguments, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">    var fBound &#x3D; function () &#123;</span><br><span class=\"line\">        var bindArgs &#x3D; Array.prototype.slice.call(arguments);</span><br><span class=\"line\">        &#x2F;&#x2F; å½“ä½œä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œthis æŒ‡å‘å®ä¾‹ï¼Œæ­¤æ—¶ç»“æœä¸º trueï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘è¯¥å®ä¾‹ï¼Œå¯ä»¥è®©å®ä¾‹è·å¾—æ¥è‡ªç»‘å®šå‡½æ•°çš„å€¼</span><br><span class=\"line\">        &#x2F;&#x2F; ä»¥ä¸Šé¢çš„æ˜¯ demo ä¸ºä¾‹ï¼Œå¦‚æœæ”¹æˆ &#96;this instanceof fBound ? null : context&#96;ï¼Œå®ä¾‹åªæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°† null æ”¹æˆ this ï¼Œå®ä¾‹ä¼šå…·æœ‰ habit å±æ€§</span><br><span class=\"line\">        &#x2F;&#x2F; å½“ä½œä¸ºæ™®é€šå‡½æ•°æ—¶ï¼Œthis æŒ‡å‘ windowï¼Œæ­¤æ—¶ç»“æœä¸º falseï¼Œå°†ç»‘å®šå‡½æ•°çš„ this æŒ‡å‘ context</span><br><span class=\"line\">        return self.apply(this instanceof fBound ? this : context, args.concat(bindArgs));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; ä¿®æ”¹è¿”å›å‡½æ•°çš„ prototype ä¸ºç»‘å®šå‡½æ•°çš„ prototypeï¼Œå®ä¾‹å°±å¯ä»¥ç»§æ‰¿ç»‘å®šå‡½æ•°çš„åŸå‹ä¸­çš„å€¼</span><br><span class=\"line\">    fBound.prototype &#x3D; this.prototype;</span><br><span class=\"line\">    return fBound;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ„é€ å‡½æ•°æ•ˆæœçš„ä¼˜åŒ–å®ç°\"><a href=\"#æ„é€ å‡½æ•°æ•ˆæœçš„ä¼˜åŒ–å®ç°\" class=\"headerlink\" title=\"æ„é€ å‡½æ•°æ•ˆæœçš„ä¼˜åŒ–å®ç°\"></a>æ„é€ å‡½æ•°æ•ˆæœçš„ä¼˜åŒ–å®ç°</h2><p>ä½†æ˜¯åœ¨è¿™ä¸ªå†™æ³•ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å°† fBound.prototype = this.prototypeï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹ fBound.prototype çš„æ—¶å€™ï¼Œä¹Ÿä¼šç›´æ¥ä¿®æ”¹ç»‘å®šå‡½æ•°çš„ prototypeã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç©ºå‡½æ•°æ¥è¿›è¡Œä¸­è½¬ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬å››ç‰ˆ</span><br><span class=\"line\">Function.prototype.bind2 &#x3D; function (context) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    var self &#x3D; this;</span><br><span class=\"line\">    var args &#x3D; Array.prototype.slice.call(arguments, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">    var fNOP &#x3D; function () &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    var fBound &#x3D; function () &#123;</span><br><span class=\"line\">        var bindArgs &#x3D; Array.prototype.slice.call(arguments);</span><br><span class=\"line\">        return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    fNOP.prototype &#x3D; this.prototype;</span><br><span class=\"line\">    fBound.prototype &#x3D; new fNOP();</span><br><span class=\"line\">    return fBound;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œå¤§çš„é—®é¢˜éƒ½å·²ç»è§£å†³ï¼Œç»™è‡ªå·±ä¸€ä¸ªèµï¼o(ï¿£â–½ï¿£)ï½„</p>\n<h2 id=\"ä¸‰ä¸ªå°é—®é¢˜\"><a href=\"#ä¸‰ä¸ªå°é—®é¢˜\" class=\"headerlink\" title=\"ä¸‰ä¸ªå°é—®é¢˜\"></a>ä¸‰ä¸ªå°é—®é¢˜</h2><p>æ¥ä¸‹æ¥å¤„ç†äº›å°é—®é¢˜:</p>\n<p><strong>1.apply è¿™æ®µä»£ç è·Ÿ MDN ä¸Šçš„ç¨æœ‰ä¸åŒ</strong></p>\n<p>åœ¨ MDN ä¸­æ–‡ç‰ˆè®² bind çš„æ¨¡æ‹Ÿå®ç°æ—¶ï¼Œapply è¿™é‡Œçš„ä»£ç æ˜¯ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">self.apply(<span class=\"built_in\">this</span> <span class=\"keyword\">instanceof</span> self ? <span class=\"built_in\">this</span> : context || <span class=\"built_in\">this</span>, args.concat(bindArgs))</span><br></pre></td></tr></table></figure>\n\n<p>å¤šäº†ä¸€ä¸ªå…³äº context æ˜¯å¦å­˜åœ¨çš„åˆ¤æ–­ï¼Œç„¶è€Œè¿™ä¸ªæ˜¯é”™è¯¯çš„ï¼</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var value &#x3D; 2;</span><br><span class=\"line\">var foo &#x3D; &#123;</span><br><span class=\"line\">    value: 1,</span><br><span class=\"line\">    bar: bar.bind(null)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function bar() &#123;</span><br><span class=\"line\">    console.log(this.value);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">foo.bar() &#x2F;&#x2F; 2</span><br></pre></td></tr></table></figure>\n\n<p>ä»¥ä¸Šä»£ç æ­£å¸¸æƒ…å†µä¸‹ä¼šæ‰“å° 2ï¼Œå¦‚æœæ¢æˆäº† context || thisï¼Œè¿™æ®µä»£ç å°±ä¼šæ‰“å° 1ï¼</p>\n<p>æ‰€ä»¥è¿™é‡Œä¸åº”è¯¥è¿›è¡Œ context çš„åˆ¤æ–­ï¼Œå¤§å®¶æŸ¥çœ‹ MDN åŒæ ·å†…å®¹çš„è‹±æ–‡ç‰ˆï¼Œå°±ä¸å­˜åœ¨è¿™ä¸ªåˆ¤æ–­ï¼</p>\n<p><strong>2.è°ƒç”¨ bind çš„ä¸æ˜¯å‡½æ•°å’‹åŠï¼Ÿ</strong></p>\n<p>ä¸è¡Œï¼Œæˆ‘ä»¬è¦æŠ¥é”™ï¼</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (typeof this !&#x3D;&#x3D; &quot;function&quot;) &#123;</span><br><span class=\"line\">  throw new Error(&quot;Function.prototype.bind - what is trying to be bound is not callable&quot;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>3.æˆ‘è¦åœ¨çº¿ä¸Šç”¨</strong></p>\n<p>é‚£åˆ«å¿˜äº†åšä¸ªå…¼å®¹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.prototype.bind &#x3D; Function.prototype.bind || function () &#123;</span><br><span class=\"line\">    â€¦â€¦</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶æœ€å¥½æ˜¯ç”¨ <a href=\"https://github.com/es-shims/es5-shim\">es5-shim</a> å•¦ã€‚</p>\n<h2 id=\"æœ€ç»ˆä»£ç \"><a href=\"#æœ€ç»ˆä»£ç \" class=\"headerlink\" title=\"æœ€ç»ˆä»£ç \"></a>æœ€ç»ˆä»£ç </h2><p>æ‰€ä»¥æœ€æœ€åçš„ä»£ç å°±æ˜¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.prototype.bind2 &#x3D; function (context) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (typeof this !&#x3D;&#x3D; &quot;function&quot;) &#123;</span><br><span class=\"line\">      throw new Error(&quot;Function.prototype.bind - what is trying to be bound is not callable&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    var self &#x3D; this;</span><br><span class=\"line\">    var args &#x3D; Array.prototype.slice.call(arguments, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">    var fNOP &#x3D; function () &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    var fBound &#x3D; function () &#123;</span><br><span class=\"line\">        var bindArgs &#x3D; Array.prototype.slice.call(arguments);</span><br><span class=\"line\">        return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    fNOP.prototype &#x3D; this.prototype;</span><br><span class=\"line\">    fBound.prototype &#x3D; new fNOP();</span><br><span class=\"line\">    return fBound;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é¢è¯•å¤Ÿç”¨ç‰ˆ\"><a href=\"#é¢è¯•å¤Ÿç”¨ç‰ˆ\" class=\"headerlink\" title=\"é¢è¯•å¤Ÿç”¨ç‰ˆ\"></a>é¢è¯•å¤Ÿç”¨ç‰ˆ</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.prototype.myBind &#x3D; function (context, ...args) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; ç¯å¢ƒ</span><br><span class=\"line\">    context &#x3D; context || window;</span><br><span class=\"line\">    &#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªSymbolå˜é‡ï¼Œè®©å½“å‰ç¯å¢ƒæŒ‡å‘å½“å‰ä½ç½®</span><br><span class=\"line\">    const fnSymbol &#x3D; Symbol(&quot;fn&quot;);</span><br><span class=\"line\">    &#x2F;&#x2F; é…ç½®ç¯å¢ƒ</span><br><span class=\"line\">    context[fnSymbol] &#x3D; this;</span><br><span class=\"line\">\t&#x2F;&#x2F; è¿”å›é—­åŒ…å‡½æ•°</span><br><span class=\"line\">    return function (..._args) &#123;</span><br><span class=\"line\">    \t&#x2F;&#x2F; ä¸å½“å‰å‚æ•°ç»„åˆ</span><br><span class=\"line\">        args &#x3D; args.concat(_args);</span><br><span class=\"line\">\t\t&#x2F;&#x2F; æ‰§è¡Œå‡½æ•°</span><br><span class=\"line\">        context[fnSymbol](...args);</span><br><span class=\"line\">        &#x2F;&#x2F; é¿å…é—­åŒ…çš„å†…å­˜æ³„éœ²</span><br><span class=\"line\">        delete context[fnSymbol];   </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"10-callå’Œapply\"><a href=\"#10-callå’Œapply\" class=\"headerlink\" title=\"10.callå’Œapply\"></a>10.callå’Œapply</h1><h2 id=\"call-å’Œ-apply-çš„å…±åŒç‚¹\"><a href=\"#call-å’Œ-apply-çš„å…±åŒç‚¹\" class=\"headerlink\" title=\"call å’Œ apply çš„å…±åŒç‚¹\"></a>call å’Œ apply çš„å…±åŒç‚¹</h2><p>å®ƒä»¬çš„å…±åŒç‚¹æ˜¯ï¼Œéƒ½èƒ½å¤Ÿ<strong>æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡</strong>ï¼Œå°†ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•äº¤ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥æ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚</p>\n<p>ä¸ºä½•è¦æ”¹å˜æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„å°ä¾‹å­ï¼šå¹³æ—¶æ²¡æ—¶é—´åšé¥­çš„æˆ‘ï¼Œå‘¨æœ«æƒ³ç»™å­©å­ç‚–ä¸ªè…Œç¬ƒé²œå°å°ã€‚ä½†æ˜¯æ²¡æœ‰é€‚åˆçš„é”…ï¼Œè€Œæˆ‘åˆä¸æƒ³å‡ºå»ä¹°ã€‚æ‰€ä»¥å°±é—®é‚»å±…å€Ÿäº†ä¸€ä¸ªé”…æ¥ç”¨ï¼Œè¿™æ ·æ—¢è¾¾åˆ°äº†ç›®çš„ï¼ŒåˆèŠ‚çœäº†å¼€æ”¯ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚</p>\n<p>æ”¹å˜æ‰§è¡Œä¸Šä¸‹æ–‡ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ŒA å¯¹è±¡æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œ B å¯¹è±¡å› ä¸ºæŸç§åŸå› ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°åŒæ ·çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬æ˜¯å•ç‹¬ä¸º B å¯¹è±¡æ‰©å±•ä¸€ä¸ªæ–¹æ³•å‘¢ï¼Œè¿˜æ˜¯å€Ÿç”¨ä¸€ä¸‹ A å¯¹è±¡çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æ˜¯å€Ÿç”¨ A å¯¹è±¡çš„å•¦ï¼Œæ—¢å®Œæˆäº†éœ€æ±‚ï¼Œåˆå‡å°‘äº†å†…å­˜çš„å ç”¨ã€‚</p>\n<p>å¦å¤–ï¼Œå®ƒä»¬çš„å†™æ³•ä¹Ÿå¾ˆç±»ä¼¼ï¼Œ<strong>è°ƒç”¨ call å’Œ apply çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•° Function</strong>ã€‚æ¥ä¸‹æ¥ï¼Œå°±ä¼šè¯´åˆ°å…·ä½“çš„å†™æ³•ï¼Œé‚£ä¹Ÿæ˜¯å®ƒä»¬åŒºåˆ«çš„ä¸»è¦ä½“ç°ã€‚</p>\n<h2 id=\"call-å’Œ-apply-çš„åŒºåˆ«\"><a href=\"#call-å’Œ-apply-çš„åŒºåˆ«\" class=\"headerlink\" title=\"call å’Œ apply çš„åŒºåˆ«\"></a>call å’Œ apply çš„åŒºåˆ«</h2><p>å®ƒä»¬çš„åŒºåˆ«ï¼Œä¸»è¦ä½“ç°åœ¨å‚æ•°çš„å†™æ³•ä¸Šã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒä»¬å„è‡ªçš„å…·ä½“å†™æ³•ã€‚</p>\n<h4 id=\"call-çš„å†™æ³•\"><a href=\"#call-çš„å†™æ³•\" class=\"headerlink\" title=\"call çš„å†™æ³•\"></a>call çš„å†™æ³•</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.call(obj,[param1[,param2[,â€¦[,paramN]]]])</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li>è°ƒç”¨ call çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸ªå‡½æ•° Functionã€‚</li>\n<li>call çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ Function çš„è°ƒç”¨è€…ï¼Œå°†ä¼šæŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœä¸ä¼ ï¼Œåˆ™é»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ windowã€‚</li>\n<li>ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œå¯ä»¥æ¥æ”¶ä»»æ„ä¸ªå‚æ•°ã€‚æ¯ä¸ªå‚æ•°ä¼šæ˜ å°„åˆ°ç›¸åº”ä½ç½®çš„ Function çš„å‚æ•°ä¸Šã€‚ä½†æ˜¯å¦‚æœå°†æ‰€æœ‰çš„å‚æ•°ä½œä¸ºæ•°ç»„ä¼ å…¥ï¼Œå®ƒä»¬ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“æ˜ å°„åˆ° Function å¯¹åº”çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼Œä¹‹åå‚æ•°éƒ½ä¸ºç©ºã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function func (a,b,c) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">func.call(obj, 1,2,3)</span><br><span class=\"line\">&#x2F;&#x2F; func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3</span><br><span class=\"line\"></span><br><span class=\"line\">func.call(obj, [1,2,3])</span><br><span class=\"line\">&#x2F;&#x2F; func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ [1,2,3],undefined,undefined</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"apply-çš„å†™æ³•\"><a href=\"#apply-çš„å†™æ³•\" class=\"headerlink\" title=\"apply çš„å†™æ³•\"></a>apply çš„å†™æ³•</h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Function.apply(obj[,argArray])</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>\n<ul>\n<li>å®ƒçš„è°ƒç”¨è€…å¿…é¡»æ˜¯å‡½æ•° Functionï¼Œå¹¶ä¸”åªæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„è§„åˆ™ä¸ call ä¸€è‡´ã€‚</li>\n<li>ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œå®ƒä»¬ä¼šè¢«è½¬æ¢æˆç±»æ•°ç»„ï¼Œä¼ å…¥ Function ä¸­ï¼Œå¹¶ä¸”ä¼šè¢«æ˜ å°„åˆ° Function å¯¹åº”çš„å‚æ•°ä¸Šã€‚è¿™ä¹Ÿæ˜¯ call å’Œ apply ä¹‹é—´ï¼Œå¾ˆé‡è¦çš„ä¸€ä¸ªåŒºåˆ«ã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">func.apply(obj, [1,2,3])</span><br><span class=\"line\">&#x2F;&#x2F; func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3</span><br><span class=\"line\"></span><br><span class=\"line\">func.apply(obj, &#123;</span><br><span class=\"line\">    0: 1,</span><br><span class=\"line\">    1: 2,</span><br><span class=\"line\">    2: 3,</span><br><span class=\"line\">    length: 3</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#x2F;&#x2F; func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä»€ä¹ˆæ˜¯ç±»æ•°ç»„ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯ç±»æ•°ç»„ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ç±»æ•°ç»„ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯ç±»æ•°ç»„ï¼Ÿ</h4><p>å…ˆè¯´æ•°ç»„ï¼Œè¿™æˆ‘ä»¬éƒ½ç†Ÿæ‚‰ã€‚å®ƒçš„ç‰¹å¾æœ‰ï¼šå¯ä»¥é€šè¿‡è§’æ ‡è°ƒç”¨ï¼Œå¦‚ array[0]ï¼›å…·æœ‰é•¿åº¦å±æ€§lengthï¼›å¯ä»¥é€šè¿‡ for å¾ªç¯æˆ–forEachæ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚</p>\n<p>é‚£ä¹ˆï¼Œç±»æ•°ç»„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯<strong>å…·å¤‡ä¸æ•°ç»„ç‰¹å¾ç±»ä¼¼çš„å¯¹è±¡</strong>ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let arrayLike &#x3D; &#123;</span><br><span class=\"line\">    0: 1,</span><br><span class=\"line\">    1: 2,</span><br><span class=\"line\">    2: 3,</span><br><span class=\"line\">    length: 3</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ç±»æ•°ç»„ arrayLike å¯ä»¥é€šè¿‡è§’æ ‡è¿›è¡Œè°ƒç”¨ï¼Œå…·æœ‰lengthå±æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ for å¾ªç¯è¿›è¡Œéå†ã€‚</p>\n<p>ç±»æ•°ç»„ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶å¯èƒ½æ²¡æ³¨æ„åˆ°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è·å– DOM èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚å†æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ arguments è·å–åˆ°çš„æ‰€æœ‰å‚æ•°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚</p>\n<p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>ç±»æ•°ç»„æ— æ³•ä½¿ç”¨ forEachã€spliceã€push ç­‰æ•°ç»„åŸå‹é“¾ä¸Šçš„æ–¹æ³•</strong>ï¼Œæ¯•ç«Ÿå®ƒä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚</p>\n<h2 id=\"call-å’Œ-apply-çš„ç”¨é€”\"><a href=\"#call-å’Œ-apply-çš„ç”¨é€”\" class=\"headerlink\" title=\"call å’Œ apply çš„ç”¨é€”\"></a>call å’Œ apply çš„ç”¨é€”</h2><p>ä¸‹é¢ä¼šåˆ†åˆ«åˆ—ä¸¾ call å’Œ apply çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ã€‚å£°æ˜ï¼šä¾‹å­ä¸­æ²¡æœ‰å“ªä¸ªåœºæ™¯æ˜¯å¿…é¡»ç”¨ call æˆ–è€…å¿…é¡»ç”¨ apply çš„ï¼Œåªæ˜¯ä¸ªäººä¹ æƒ¯è¿™ä¹ˆç”¨è€Œå·²ã€‚</p>\n<h4 id=\"call-çš„ä½¿ç”¨åœºæ™¯\"><a href=\"#call-çš„ä½¿ç”¨åœºæ™¯\" class=\"headerlink\" title=\"call çš„ä½¿ç”¨åœºæ™¯\"></a>call çš„ä½¿ç”¨åœºæ™¯</h4><p><strong>1ã€å¯¹è±¡çš„ç»§æ‰¿</strong>ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function superClass () &#123;</span><br><span class=\"line\">    this.a &#x3D; 1;</span><br><span class=\"line\">    this.print &#x3D; function () &#123;</span><br><span class=\"line\">        console.log(this.a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function subClass () &#123;</span><br><span class=\"line\">    superClass.call(this);</span><br><span class=\"line\">    this.print();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">subClass();</span><br><span class=\"line\">&#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<p>subClass é€šè¿‡ call æ–¹æ³•ï¼Œç»§æ‰¿äº† superClass çš„ print æ–¹æ³•å’Œ a å˜é‡ã€‚æ­¤å¤–ï¼ŒsubClass è¿˜å¯ä»¥æ‰©å±•è‡ªå·±çš„å…¶ä»–æ–¹æ³•ã€‚</p>\n<p><strong>2ã€å€Ÿç”¨æ–¹æ³•</strong>ã€‚è¿˜è®°å¾—åˆšæ‰çš„ç±»æ•°ç»„ä¹ˆï¼Ÿå¦‚æœå®ƒæƒ³ä½¿ç”¨ Array åŸå‹é“¾ä¸Šçš„æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let domNodes &#x3D; Array.prototype.slice.call(document.getElementsByTagName(&quot;*&quot;));</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·ï¼ŒdomNodes å°±å¯ä»¥åº”ç”¨ Array ä¸‹çš„æ‰€æœ‰æ–¹æ³•äº†ã€‚</p>\n<h4 id=\"apply-çš„ä¸€äº›å¦™ç”¨\"><a href=\"#apply-çš„ä¸€äº›å¦™ç”¨\" class=\"headerlink\" title=\"apply çš„ä¸€äº›å¦™ç”¨\"></a>apply çš„ä¸€äº›å¦™ç”¨</h4><p><strong>1ã€Math.max</strong>ã€‚ç”¨å®ƒæ¥è·å–æ•°ç»„ä¸­æœ€å¤§çš„ä¸€é¡¹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let max &#x3D; Math.max.apply(null, array);</span><br></pre></td></tr></table></figure>\n\n<p>åŒç†ï¼Œè¦è·å–æ•°ç»„ä¸­æœ€å°çš„ä¸€é¡¹ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let min &#x3D; Math.min.apply(null, array);</span><br></pre></td></tr></table></figure>\n\n<p><strong>2ã€å®ç°ä¸¤ä¸ªæ•°ç»„åˆå¹¶</strong>ã€‚åœ¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Array.prototype.pushæ¥å®ç°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let arr1 &#x3D; [1, 2, 3];</span><br><span class=\"line\">let arr2 &#x3D; [4, 5, 6];</span><br><span class=\"line\"></span><br><span class=\"line\">Array.prototype.push.apply(arr1, arr2);</span><br><span class=\"line\">console.log(arr1); &#x2F;&#x2F; [1, 2, 3, 4, 5, 6]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ‰‹å†™applyå’Œbind\"><a href=\"#æ‰‹å†™applyå’Œbind\" class=\"headerlink\" title=\"æ‰‹å†™applyå’Œbind\"></a>æ‰‹å†™applyå’Œbind</h2><p>callçš„æ‰‹å†™</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// call</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.myCall = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">context = <span class=\"built_in\">window</span>, ...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fn = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;fn&quot;</span>);</span><br><span class=\"line\">  context[fn] = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  <span class=\"comment\">// é‡ç‚¹ä»£ç ï¼Œåˆ©ç”¨thisæŒ‡å‘ï¼Œç›¸å½“äºcontext.caller(...args)</span></span><br><span class=\"line\">  context[fn](...args);</span><br><span class=\"line\">  <span class=\"keyword\">delete</span> context[fn];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>applyçš„æ‰‹å†™</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; apply</span><br><span class=\"line\">Function.prototype.myApply &#x3D; function (context &#x3D; window, argsArr) &#123;</span><br><span class=\"line\">  const fn &#x3D; Symbol(&quot;fn&quot;);</span><br><span class=\"line\">  context[fn] &#x3D; this;</span><br><span class=\"line\">  &#x2F;&#x2F; é‡ç‚¹ä»£ç ï¼Œåˆ©ç”¨thisæŒ‡å‘ï¼Œç›¸å½“äºcontext.caller(...args)</span><br><span class=\"line\">  context[fn](...argsArr);</span><br><span class=\"line\">  delete context[fn];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"11-å‡½æ•°æŸ¯é‡ŒåŒ–\"><a href=\"#11-å‡½æ•°æŸ¯é‡ŒåŒ–\" class=\"headerlink\" title=\"11.å‡½æ•°æŸ¯é‡ŒåŒ–\"></a>11.å‡½æ•°æŸ¯é‡ŒåŒ–</h1><h2 id=\"å®šä¹‰-3\"><a href=\"#å®šä¹‰-3\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>ç»´åŸºç™¾ç§‘ä¸­å¯¹æŸ¯é‡ŒåŒ– (Currying) çš„å®šä¹‰ä¸ºï¼š</p>\n<blockquote>\n<p>In mathematics and computer science, currying is the technique of translating the evaluation of a function that takes multiple arguments (or a tuple of arguments) into evaluating a sequence of functions, each with a single argument.</p>\n</blockquote>\n<p>ç¿»è¯‘æˆä¸­æ–‡ï¼š</p>\n<p>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function add(a, b) &#123;</span><br><span class=\"line\">    return a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æ‰§è¡Œ add å‡½æ•°ï¼Œä¸€æ¬¡ä¼ å…¥ä¸¤ä¸ªå‚æ•°å³å¯</span><br><span class=\"line\">add(1, 2) &#x2F;&#x2F; 3</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å‡è®¾æœ‰ä¸€ä¸ª curry å‡½æ•°å¯ä»¥åšåˆ°æŸ¯é‡ŒåŒ–</span><br><span class=\"line\">var addCurry &#x3D; curry(add);</span><br><span class=\"line\">addCurry(1)(2) &#x2F;&#x2F; 3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç”¨é€”\"><a href=\"#ç”¨é€”\" class=\"headerlink\" title=\"ç”¨é€”\"></a>ç”¨é€”</h2><p>æˆ‘ä»¬ä¼šè®²åˆ°å¦‚ä½•å†™å‡ºè¿™ä¸ª curry å‡½æ•°ï¼Œå¹¶ä¸”ä¼šå°†è¿™ä¸ª curry å‡½æ•°å†™çš„å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯åœ¨ç¼–å†™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æŸ¯é‡ŒåŒ–åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¤ºæ„è€Œå·²</span><br><span class=\"line\">function ajax(type, url, data) &#123;</span><br><span class=\"line\">    var xhr &#x3D; new XMLHttpRequest();</span><br><span class=\"line\">    xhr.open(type, url, true);</span><br><span class=\"line\">    xhr.send(data);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è™½ç„¶ ajax è¿™ä¸ªå‡½æ•°éå¸¸é€šç”¨ï¼Œä½†åœ¨é‡å¤è°ƒç”¨çš„æ—¶å€™å‚æ•°å†—ä½™</span><br><span class=\"line\">ajax(&#39;POST&#39;, &#39;www.test.com&#39;, &quot;name&#x3D;kevin&quot;)</span><br><span class=\"line\">ajax(&#39;POST&#39;, &#39;www.test2.com&#39;, &quot;name&#x3D;kevin&quot;)</span><br><span class=\"line\">ajax(&#39;POST&#39;, &#39;www.test3.com&#39;, &quot;name&#x3D;kevin&quot;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ©ç”¨ curry</span><br><span class=\"line\">var ajaxCurry &#x3D; curry(ajax);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä»¥ POST ç±»å‹è¯·æ±‚æ•°æ®</span><br><span class=\"line\">var post &#x3D; ajaxCurry(&#39;POST&#39;);</span><br><span class=\"line\">post(&#39;www.test.com&#39;, &quot;name&#x3D;kevin&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä»¥ POST ç±»å‹è¯·æ±‚æ¥è‡ªäº www.test.com çš„æ•°æ®</span><br><span class=\"line\">var postFromTest &#x3D; post(&#39;www.test.com&#39;);</span><br><span class=\"line\">postFromTest(&quot;name&#x3D;kevin&quot;);</span><br></pre></td></tr></table></figure>\n\n<p>æƒ³æƒ³ jQuery è™½ç„¶æœ‰ $.ajax è¿™æ ·é€šç”¨çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ $.get å’Œ $.post çš„è¯­æ³•ç³–ã€‚</p>\n<p>curry çš„è¿™ç§ç”¨é€”å¯ä»¥ç†è§£ä¸ºï¼šå‚æ•°å¤ç”¨ã€‚æœ¬è´¨ä¸Šæ˜¯é™ä½é€šç”¨æ€§ï¼Œæé«˜é€‚ç”¨æ€§ã€‚</p>\n<p>å¯æ˜¯å³ä¾¿å¦‚æ­¤ï¼Œæ˜¯ä¸æ˜¯ä¾ç„¶æ„Ÿè§‰æ²¡ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>\n<p>å¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯æŠŠå‚æ•°ä¸€ä¸ªä¸€ä¸ªä¼ è¿›å»ï¼Œæ„ä¹‰å¯èƒ½ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ˜¯æŠŠæŸ¯é‡ŒåŒ–åçš„å‡½æ•°ä¼ ç»™å…¶ä»–å‡½æ•°æ¯”å¦‚ map å‘¢ï¼Ÿ</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<p>æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€æ®µæ•°æ®ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var person &#x3D; [&#123;name: &#39;kevin&#39;&#125;, &#123;name: &#39;daisy&#39;&#125;]</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœæˆ‘ä»¬è¦è·å–æ‰€æœ‰çš„ name å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var name &#x3D; person.map(function (item) &#123;</span><br><span class=\"line\">    return item.name;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>ä¸è¿‡å¦‚æœæˆ‘ä»¬æœ‰ curry å‡½æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var prop &#x3D; curry(function (key, obj) &#123;</span><br><span class=\"line\">    return obj[key]</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">var name &#x3D; person.map(prop(&#39;name&#39;))</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ä¸ºäº†è·å– name å±æ€§è¿˜è¦å†ç¼–å†™ä¸€ä¸ª prop å‡½æ•°ï¼Œæ˜¯ä¸æ˜¯åˆéº»çƒ¦äº†äº›ï¼Ÿ</p>\n<p>ä½†æ˜¯è¦æ³¨æ„ï¼Œprop å‡½æ•°ç¼–å†™ä¸€æ¬¡åï¼Œä»¥åå¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œå®é™…ä¸Šä»£ç ä»åŸæœ¬çš„ä¸‰è¡Œç²¾ç®€æˆäº†ä¸€è¡Œï¼Œè€Œä¸”ä½ çœ‹ä»£ç æ˜¯ä¸æ˜¯æ›´åŠ æ˜“æ‡‚äº†ï¼Ÿ</p>\n<p><code>person.map(prop(&#39;name&#39;))</code> å°±å¥½åƒç›´ç™½çš„å‘Šè¯‰ä½ ï¼šperson å¯¹è±¡éå†(map)è·å–(prop) name å±æ€§ã€‚</p>\n<p>æ˜¯ä¸æ˜¯æ„Ÿè§‰æœ‰ç‚¹æ„æ€äº†å‘¢ï¼Ÿ</p>\n<h2 id=\"ç¬¬ä¸€ç‰ˆ\"><a href=\"#ç¬¬ä¸€ç‰ˆ\" class=\"headerlink\" title=\"ç¬¬ä¸€ç‰ˆ\"></a>ç¬¬ä¸€ç‰ˆ</h2><p>æœªæ¥æˆ‘ä»¬ä¼šæ¥è§¦åˆ°æ›´å¤šæœ‰å…³æŸ¯é‡ŒåŒ–çš„åº”ç”¨ï¼Œä¸è¿‡é‚£æ˜¯æœªæ¥çš„äº‹æƒ…äº†ï¼Œç°åœ¨æˆ‘ä»¬è¯¥ç¼–å†™è¿™ä¸ª curry å‡½æ•°äº†ã€‚</p>\n<p>ä¸€ä¸ªç»å¸¸ä¼šçœ‹åˆ°çš„ curry å‡½æ•°çš„å®ç°ä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€ç‰ˆ</span><br><span class=\"line\">var curry &#x3D; function (fn) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; ä¿å­˜å½“å‰å‚æ•°ï¼Œå‚æ•°æ˜¯ç±»æ•°ç»„</span><br><span class=\"line\">    var args &#x3D; [].slice.call(arguments, 1);</span><br><span class=\"line\">    &#x2F;&#x2F; è¿”å›é—­åŒ…</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">    \t&#x2F;&#x2F; æ‹¼æ¥æ–°çš„å‚æ•°</span><br><span class=\"line\">        var newArgs &#x3D; args.concat([].slice.call(arguments));</span><br><span class=\"line\">        &#x2F;&#x2F; è°ƒç”¨å‡½æ•°</span><br><span class=\"line\">        return fn.apply(this, newArgs);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function add(a, b) &#123;</span><br><span class=\"line\">    return a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var addCurry &#x3D; curry(add, 1, 2);</span><br><span class=\"line\">addCurry() &#x2F;&#x2F; 3</span><br><span class=\"line\">&#x2F;&#x2F;æˆ–è€…</span><br><span class=\"line\">var addCurry &#x3D; curry(add, 1);</span><br><span class=\"line\">addCurry(2) &#x2F;&#x2F; 3</span><br><span class=\"line\">&#x2F;&#x2F;æˆ–è€…</span><br><span class=\"line\">var addCurry &#x3D; curry(add);</span><br><span class=\"line\">addCurry(1, 2) &#x2F;&#x2F; 3</span><br></pre></td></tr></table></figure>\n\n<p>å·²ç»æœ‰æŸ¯é‡ŒåŒ–çš„æ„Ÿè§‰äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¾¾åˆ°è¦æ±‚ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°ç”¨ä½œè¾…åŠ©å‡½æ•°ï¼Œå¸®åŠ©æˆ‘ä»¬å†™çœŸæ­£çš„ curry å‡½æ•°ã€‚</p>\n<h2 id=\"ç¬¬äºŒç‰ˆ\"><a href=\"#ç¬¬äºŒç‰ˆ\" class=\"headerlink\" title=\"ç¬¬äºŒç‰ˆ\"></a>ç¬¬äºŒç‰ˆ</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒç‰ˆ</span><br><span class=\"line\">function sub_curry(fn) &#123;</span><br><span class=\"line\">    var args &#x3D; [].slice.call(arguments, 1);</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        return fn.apply(this, args.concat([].slice.call(arguments)));</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function curry(fn, length) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    length &#x3D; length || fn.length;</span><br><span class=\"line\"></span><br><span class=\"line\">    var slice &#x3D; Array.prototype.slice;</span><br><span class=\"line\"></span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        if (arguments.length &lt; length) &#123;</span><br><span class=\"line\">            var combined &#x3D; [fn].concat(slice.call(arguments));</span><br><span class=\"line\">            return curry(sub_curry.apply(this, combined), length - arguments.length);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            return fn.apply(this, arguments);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬éªŒè¯ä¸‹è¿™ä¸ªå‡½æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var fn &#x3D; curry(function(a, b, c) &#123;</span><br><span class=\"line\">    return [a, b, c];</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">fn(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;, &quot;b&quot;)(&quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;)(&quot;b&quot;)(&quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;)(&quot;b&quot;, &quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœå·²ç»è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸï¼Œç„¶è€Œè¿™ä¸ª curry å‡½æ•°çš„å®ç°å¥½éš¾ç†è§£å‘â€¦â€¦</p>\n<p>ä¸ºäº†è®©å¤§å®¶æ›´å¥½çš„ç†è§£è¿™ä¸ª curry å‡½æ•°ï¼Œæˆ‘ç»™å¤§å®¶å†™ä¸ªæç®€ç‰ˆçš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function sub_curry(fn)&#123;</span><br><span class=\"line\">    return function()&#123;</span><br><span class=\"line\">        return fn()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function curry(fn, length)&#123;</span><br><span class=\"line\">    length &#x3D; length || 4;</span><br><span class=\"line\">    return function()&#123;</span><br><span class=\"line\">        if (length &gt; 1) &#123;</span><br><span class=\"line\">            return curry(sub_curry(fn), --length)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else &#123;</span><br><span class=\"line\">            return fn()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var fn0 &#x3D; function()&#123;</span><br><span class=\"line\">    console.log(1)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var fn1 &#x3D; curry(fn0)</span><br><span class=\"line\"></span><br><span class=\"line\">fn1()()()() &#x2F;&#x2F; 1</span><br></pre></td></tr></table></figure>\n\n<p>å¤§å®¶å…ˆä»ç†è§£è¿™ä¸ª curry å‡½æ•°å¼€å§‹ã€‚</p>\n<p>å½“æ‰§è¡Œ fn1() æ—¶ï¼Œå‡½æ•°è¿”å›ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curry(sub_curry(fn0))</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(function()&#123;</span><br><span class=\"line\">    return fn0()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1()() æ—¶ï¼Œå‡½æ•°è¿”å›ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curry(sub_curry(function()&#123;</span><br><span class=\"line\">    return fn0()</span><br><span class=\"line\">&#125;))</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(function()&#123;</span><br><span class=\"line\">    return (function()&#123;</span><br><span class=\"line\">        return fn0()</span><br><span class=\"line\">    &#125;)()</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(function()&#123;</span><br><span class=\"line\">    return fn0()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1()()() æ—¶ï¼Œå‡½æ•°è¿”å›ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; è·Ÿ fn1()() çš„åˆ†æè¿‡ç¨‹ä¸€æ ·</span><br><span class=\"line\">curry(function()&#123;</span><br><span class=\"line\">    return fn0()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1()()()() æ—¶ï¼Œå› ä¸ºæ­¤æ—¶ length &gt; 2 ä¸º falseï¼Œæ‰€ä»¥æ‰§è¡Œ fn()ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fn()</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">(function()&#123;</span><br><span class=\"line\">    return fn0()</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">fn0()</span><br><span class=\"line\">&#x2F;&#x2F; æ‰§è¡Œ fn0 å‡½æ•°ï¼Œæ‰“å° 1</span><br></pre></td></tr></table></figure>\n\n<p>å†å›åˆ°çœŸæ­£çš„ curry å‡½æ•°ï¼Œæˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¾‹å­ä¸ºä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var fn0 &#x3D; function(a, b, c, d) &#123;</span><br><span class=\"line\">    return [a, b, c, d];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var fn1 &#x3D; curry(fn0);</span><br><span class=\"line\"></span><br><span class=\"line\">fn1(&quot;a&quot;, &quot;b&quot;)(&quot;c&quot;)(&quot;d&quot;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1(â€œaâ€, â€œbâ€) æ—¶ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">fn1(&quot;a&quot;, &quot;b&quot;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(fn0)(&quot;a&quot;, &quot;b&quot;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(sub_curry(fn0, &quot;a&quot;, &quot;b&quot;))</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">&#x2F;&#x2F; æ³¨æ„ ... åªæ˜¯ä¸€ä¸ªç¤ºæ„ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ‰§è¡Œæ—¶ä¼ å…¥çš„å‚æ•°ä¼šä½œä¸º fn0 åé¢çš„å‚æ•°ä¼ å…¥</span><br><span class=\"line\">curry(function(...)&#123;</span><br><span class=\"line\">    return fn0(&quot;a&quot;, &quot;b&quot;, ...)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1(â€œaâ€, â€œbâ€)(â€œcâ€) æ—¶ï¼Œå‡½æ•°è¿”å›ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">curry(sub_curry(function(...)&#123;</span><br><span class=\"line\">    return fn0(&quot;a&quot;, &quot;b&quot;, ...)</span><br><span class=\"line\">&#125;), &quot;c&quot;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(function(...)&#123;</span><br><span class=\"line\">    return (function(...) &#123;return fn0(&quot;a&quot;, &quot;b&quot;, ...)&#125;)(&quot;c&quot;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">curry(function(...)&#123;</span><br><span class=\"line\">     return fn0(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, ...)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å½“æ‰§è¡Œ fn1(â€œaâ€, â€œbâ€)(â€œcâ€)(â€œdâ€) æ—¶ï¼Œæ­¤æ—¶ arguments.length &lt; length ä¸º false ï¼Œæ‰§è¡Œ fn(arguments)ï¼Œç›¸å½“äºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">(function(...)&#123;</span><br><span class=\"line\">    return fn0(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, ...)</span><br><span class=\"line\">&#125;)(&quot;d&quot;)</span><br><span class=\"line\">&#x2F;&#x2F; ç›¸å½“äº</span><br><span class=\"line\">fn0(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)</span><br></pre></td></tr></table></figure>\n\n<p>å‡½æ•°æ‰§è¡Œç»“æŸã€‚</p>\n<p>æ‰€ä»¥ï¼Œå…¶å®æ•´æ®µä»£ç åˆå¾ˆå¥½ç†è§£ï¼š</p>\n<p>sub_curry çš„ä½œç”¨å°±æ˜¯ç”¨å‡½æ•°åŒ…è£¹åŸå‡½æ•°ï¼Œç„¶åç»™åŸå‡½æ•°ä¼ å…¥ä¹‹å‰çš„å‚æ•°ï¼Œå½“æ‰§è¡Œ fn0(â€¦)(â€¦) çš„æ—¶å€™ï¼Œæ‰§è¡ŒåŒ…è£¹å‡½æ•°ï¼Œè¿”å›åŸå‡½æ•°ï¼Œç„¶åå†è°ƒç”¨ sub_curry å†åŒ…è£¹åŸå‡½æ•°ï¼Œç„¶åå°†æ–°çš„å‚æ•°æ··åˆæ—§çš„å‚æ•°å†ä¼ å…¥åŸå‡½æ•°ï¼Œç›´åˆ°å‡½æ•°å‚æ•°çš„æ•°ç›®è¾¾åˆ°è¦æ±‚ä¸ºæ­¢ã€‚</p>\n<p>å¦‚æœè¦æ˜ç™½ curry å‡½æ•°çš„è¿è¡ŒåŸç†ï¼Œå¤§å®¶è¿˜æ˜¯è¦åŠ¨æ‰‹å†™ä¸€éï¼Œå°è¯•ç€åˆ†ææ‰§è¡Œæ­¥éª¤ã€‚</p>\n<h2 id=\"æ›´æ˜“æ‡‚çš„å®ç°\"><a href=\"#æ›´æ˜“æ‡‚çš„å®ç°\" class=\"headerlink\" title=\"æ›´æ˜“æ‡‚çš„å®ç°\"></a>æ›´æ˜“æ‡‚çš„å®ç°</h2><p>å½“ç„¶äº†ï¼Œå¦‚æœä½ è§‰å¾—è¿˜æ˜¯æ— æ³•ç†è§£ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸‹é¢è¿™ç§å®ç°æ–¹å¼ï¼Œå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function curry(fn, args) &#123;</span><br><span class=\"line\">    var length &#x3D; fn.length;</span><br><span class=\"line\"></span><br><span class=\"line\">    args &#x3D; args || [];</span><br><span class=\"line\"></span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        var _args &#x3D; args.slice(0),</span><br><span class=\"line\"></span><br><span class=\"line\">            arg, i;</span><br><span class=\"line\"></span><br><span class=\"line\">        for (i &#x3D; 0; i &lt; arguments.length; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            arg &#x3D; arguments[i];</span><br><span class=\"line\"></span><br><span class=\"line\">            _args.push(arg);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (_args.length &lt; length) &#123;</span><br><span class=\"line\">            return curry.call(this, fn, _args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else &#123;</span><br><span class=\"line\">            return fn.apply(this, _args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">var fn &#x3D; curry(function(a, b, c) &#123;</span><br><span class=\"line\">    console.log([a, b, c]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">fn(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;, &quot;b&quot;)(&quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;)(&quot;b&quot;)(&quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br><span class=\"line\">fn(&quot;a&quot;)(&quot;b&quot;, &quot;c&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>æˆ–è®¸å¤§å®¶è§‰å¾—è¿™ç§æ–¹å¼æ›´å¥½ç†è§£ï¼Œåˆèƒ½å®ç°ä¸€æ ·çš„æ•ˆæœï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å°±è®²è¿™ç§å‘¢ï¼Ÿ</p>\n<p>å› ä¸ºæƒ³ç»™å¤§å®¶ä»‹ç»å„ç§å®ç°çš„æ–¹æ³•å˜›ï¼Œä¸èƒ½å› ä¸ºéš¾ä»¥ç†è§£å°±ä¸ç»™å¤§å®¶ä»‹ç»å‘~</p>\n<h2 id=\"ç¬¬ä¸‰ç‰ˆ\"><a href=\"#ç¬¬ä¸‰ç‰ˆ\" class=\"headerlink\" title=\"ç¬¬ä¸‰ç‰ˆ\"></a>ç¬¬ä¸‰ç‰ˆ</h2><p>curry å‡½æ•°å†™åˆ°è¿™é‡Œå…¶å®å·²ç»å¾ˆå®Œå–„äº†ï¼Œä½†æ˜¯æ³¨æ„è¿™ä¸ªå‡½æ•°çš„ä¼ å‚é¡ºåºå¿…é¡»æ˜¯ä»å·¦åˆ°å³ï¼Œæ ¹æ®å½¢å‚çš„é¡ºåºä¾æ¬¡ä¼ å…¥ï¼Œå¦‚æœæˆ‘ä¸æƒ³æ ¹æ®è¿™ä¸ªé¡ºåºä¼ å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå ä½ç¬¦ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var fn &#x3D; curry(function(a, b, c) &#123;</span><br><span class=\"line\">    console.log([a, b, c]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">fn(&quot;a&quot;, _, &quot;c&quot;)(&quot;b&quot;) &#x2F;&#x2F; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ç›´æ¥çœ‹ç¬¬ä¸‰ç‰ˆçš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸‰ç‰ˆ</span><br><span class=\"line\">function curry(fn, args, holes) &#123;</span><br><span class=\"line\">    length &#x3D; fn.length;</span><br><span class=\"line\">    args &#x3D; args || [];</span><br><span class=\"line\">    holes &#x3D; holes || [];</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        var _args &#x3D; args.slice(0),</span><br><span class=\"line\">            _holes &#x3D; holes.slice(0),</span><br><span class=\"line\">            argsLen &#x3D; args.length,</span><br><span class=\"line\">            holesLen &#x3D; holes.length,</span><br><span class=\"line\">            arg, i, index &#x3D; 0;</span><br><span class=\"line\"></span><br><span class=\"line\">        for (i &#x3D; 0; i &lt; arguments.length; i++) &#123;</span><br><span class=\"line\">            arg &#x3D; arguments[i];</span><br><span class=\"line\">            &#x2F;&#x2F; å¤„ç†ç±»ä¼¼ fn(1, _, _, 4)(_, 3) è¿™ç§æƒ…å†µï¼Œindex éœ€è¦æŒ‡å‘ holes æ­£ç¡®çš„ä¸‹æ ‡</span><br><span class=\"line\">            if (arg &#x3D;&#x3D;&#x3D; _ &amp;&amp; holesLen) &#123;</span><br><span class=\"line\">                index++</span><br><span class=\"line\">                if (index &gt; holesLen) &#123;</span><br><span class=\"line\">                    _args.push(arg);</span><br><span class=\"line\">                    _holes.push(argsLen - 1 + index - holesLen)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            &#x2F;&#x2F; å¤„ç†ç±»ä¼¼ fn(1)(_) è¿™ç§æƒ…å†µ</span><br><span class=\"line\">            else if (arg &#x3D;&#x3D;&#x3D; _) &#123;</span><br><span class=\"line\">                _args.push(arg);</span><br><span class=\"line\">                _holes.push(argsLen + i);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            &#x2F;&#x2F; å¤„ç†ç±»ä¼¼ fn(_, 2)(1) è¿™ç§æƒ…å†µ</span><br><span class=\"line\">            else if (holesLen) &#123;</span><br><span class=\"line\">                &#x2F;&#x2F; fn(_, 2)(_, 3)</span><br><span class=\"line\">                if (index &gt;&#x3D; holesLen) &#123;</span><br><span class=\"line\">                    _args.push(arg);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                &#x2F;&#x2F; fn(_, 2)(1) ç”¨å‚æ•° 1 æ›¿æ¢å ä½ç¬¦</span><br><span class=\"line\">                else &#123;</span><br><span class=\"line\">                    _args.splice(_holes[index], 1, arg);</span><br><span class=\"line\">                    _holes.splice(index, 1)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            else &#123;</span><br><span class=\"line\">                _args.push(arg);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (_holes.length || _args.length &lt; length) &#123;</span><br><span class=\"line\">            return curry.call(this, fn, _args, _holes);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else &#123;</span><br><span class=\"line\">            return fn.apply(this, _args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var _ &#x3D; &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var fn &#x3D; curry(function(a, b, c, d, e) &#123;</span><br><span class=\"line\">    console.log([a, b, c, d, e]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; éªŒè¯ è¾“å‡ºå…¨éƒ¨éƒ½æ˜¯ [1, 2, 3, 4, 5]</span><br><span class=\"line\">fn(1, 2, 3, 4, 5);</span><br><span class=\"line\">fn(_, 2, 3, 4, 5)(1);</span><br><span class=\"line\">fn(1, _, 3, 4, 5)(2);</span><br><span class=\"line\">fn(1, _, 3)(_, 4)(2)(5);</span><br><span class=\"line\">fn(1, _, _, 4)(_, 3)(2)(5);</span><br><span class=\"line\">fn(_, 2)(_, _, 4)(1)(3)(5)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é¢è¯•å¤Ÿç”¨ç‰ˆ-1\"><a href=\"#é¢è¯•å¤Ÿç”¨ç‰ˆ-1\" class=\"headerlink\" title=\"é¢è¯•å¤Ÿç”¨ç‰ˆ\"></a>é¢è¯•å¤Ÿç”¨ç‰ˆ</h2><p>å°±æ˜¯ç¬¬äºŒç‰ˆ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€ç‰ˆ</span><br><span class=\"line\">var curry &#x3D; function (fn) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; ä¿å­˜å½“å‰å‚æ•°ï¼Œå‚æ•°æ˜¯ç±»æ•°ç»„</span><br><span class=\"line\">    var args &#x3D; [].slice.call(arguments, 1);</span><br><span class=\"line\">    &#x2F;&#x2F; è¿”å›é—­åŒ…</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">    \t&#x2F;&#x2F; æ‹¼æ¥æ–°çš„å‚æ•°</span><br><span class=\"line\">        var newArgs &#x3D; args.concat([].slice.call(arguments));</span><br><span class=\"line\">        &#x2F;&#x2F; è°ƒç”¨å‡½æ•°</span><br><span class=\"line\">        if (newArgs.length &lt; fn.length) &#123;</span><br><span class=\"line\">            return curry.call(this, fn, newArgs);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            return fn.apply(this, newArgs);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"12-V8å¼•æ“çš„åƒåœ¾å›æ”¶\"><a href=\"#12-V8å¼•æ“çš„åƒåœ¾å›æ”¶\" class=\"headerlink\" title=\"12.V8å¼•æ“çš„åƒåœ¾å›æ”¶\"></a>12.V8å¼•æ“çš„åƒåœ¾å›æ”¶</h1><h3 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h3><p>ä½œä¸ºç›®å‰æœ€æµè¡Œçš„JavaScriptå¼•æ“ï¼ŒV8å¼•æ“ä»å‡ºç°çš„é‚£ä¸€åˆ»èµ·ä¾¿å¹¿æ³›å—åˆ°äººä»¬çš„å…³æ³¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒJavaScriptå¯ä»¥é«˜æ•ˆåœ°è¿è¡Œåœ¨æµè§ˆå™¨å’ŒNodejsè¿™ä¸¤å¤§å®¿ä¸»ç¯å¢ƒä¸­ï¼Œä¹Ÿæ˜¯å› ä¸ºèƒŒåæœ‰å¼ºå¤§çš„V8å¼•æ“åœ¨ä¸ºå…¶ä¿é©¾æŠ¤èˆªï¼Œç”šè‡³æˆå°±äº†Chromeåœ¨æµè§ˆå™¨ä¸­çš„éœ¸ä¸»åœ°ä½ã€‚ä¸å¾—ä¸è¯´ï¼ŒV8å¼•æ“ä¸ºäº†è¿½æ±‚æè‡´çš„æ€§èƒ½å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œä¸ºæˆ‘ä»¬åšäº†å¤ªå¤šå¤ªå¤šï¼Œä»åŸå§‹çš„<code>Full-codegen</code>å’Œ<code>Crankshaft</code>ç¼–è¯‘å™¨å‡çº§ä¸º<code>Ignition</code>è§£é‡Šå™¨å’Œ<code>TurboFan</code>ç¼–è¯‘å™¨çš„å¼ºå¼ºç»„åˆï¼Œåˆ°éšè—ç±»ï¼Œå†…è”ç¼“å­˜å’Œ<code>HotSpot</code>çƒ­ç‚¹ä»£ç æ”¶é›†ç­‰ä¸€ç³»åˆ—å¼ºæœ‰åŠ›çš„ä¼˜åŒ–ç­–ç•¥ï¼ŒV8å¼•æ“æ­£åœ¨åŠªåŠ›é™ä½æ•´ä½“çš„å†…å­˜å ç”¨å’Œæå‡åˆ°æ›´é«˜çš„è¿è¡Œæ€§èƒ½ã€‚</p>\n<p>æœ¬ç¯‡ä¸»è¦æ˜¯ä»V8å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶å…¥æ‰‹ï¼Œè®²è§£ä¸€ä¸‹åœ¨JavaScriptä»£ç æ‰§è¡Œçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­V8å¼•æ“æ˜¯é‡‡å–æ€æ ·çš„åƒåœ¾å›æ”¶ç­–ç•¥æ¥å‡å°‘å†…å­˜å æ¯”çš„ï¼Œå½“ç„¶è¿™éƒ¨åˆ†çš„çŸ¥è¯†å¹¶ä¸å¤ªå½±å“æˆ‘ä»¬å†™ä»£ç çš„æµç¨‹ï¼Œæ¯•ç«Ÿåœ¨ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¾ˆå°‘ä¼šé‡åˆ°æµè§ˆå™¨ç«¯å‡ºç°å†…å­˜æº¢å‡ºè€Œå¯¼è‡´ç¨‹åºå´©æºƒçš„æƒ…å†µï¼Œä½†æ˜¯è‡³å°‘æˆ‘ä»¬å¯¹è¿™æ–¹é¢æœ‰ä¸€å®šçš„äº†è§£ä¹‹åï¼Œèƒ½å¢å¼ºæˆ‘ä»¬åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­å¯¹å‡å°‘å†…å­˜å ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼çš„ä¸»è§‚æ„è¯†ï¼Œä¹Ÿè®¸èƒ½å¤Ÿå¸®åŠ©ä½ å†™å‡ºæ›´åŠ å¥å£®å’Œå¯¹V8å¼•æ“æ›´åŠ å‹å¥½çš„ä»£ç ã€‚æœ¬æ–‡ä¹Ÿæ˜¯ç¬”è€…åœ¨æŸ¥é˜…èµ„æ–™å·©å›ºå¤ä¹ çš„è¿‡ç¨‹ä¸­æ…¢æ…¢æ€»ç»“å’Œæ•´ç†å‡ºæ¥çš„ï¼Œè‹¥æ–‡ä¸­æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿˜è¯·æŒ‡æ­£ã€‚</p>\n<h3 id=\"1ã€ä¸ºä½•éœ€è¦åƒåœ¾å›æ”¶\"><a href=\"#1ã€ä¸ºä½•éœ€è¦åƒåœ¾å›æ”¶\" class=\"headerlink\" title=\"1ã€ä¸ºä½•éœ€è¦åƒåœ¾å›æ”¶\"></a>1ã€ä¸ºä½•éœ€è¦åƒåœ¾å›æ”¶</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨V8å¼•æ“é€è¡Œæ‰§è¡ŒJavaScriptä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œå½“é‡åˆ°å‡½æ•°çš„æƒ…å†µæ—¶ï¼Œä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡(Context)ç¯å¢ƒå¹¶æ·»åŠ åˆ°è°ƒç”¨å †æ ˆçš„æ ˆé¡¶ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸ(handleScope)ä¸­åŒ…å«äº†è¯¥å‡½æ•°ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡ï¼Œå½“è¯¥å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºï¼Œå‡½æ•°çš„ä½œç”¨åŸŸä¼šéšä¹‹é”€æ¯ï¼Œå…¶åŒ…å«çš„æ‰€æœ‰å˜é‡ä¹Ÿä¼šç»Ÿä¸€é‡Šæ”¾å¹¶è¢«è‡ªåŠ¨å›æ”¶ã€‚è¯•æƒ³å¦‚æœåœ¨è¿™ä¸ªä½œç”¨åŸŸè¢«é”€æ¯çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä¸­çš„å˜é‡ä¸è¢«å›æ”¶ï¼Œå³æŒä¹…å ç”¨å†…å­˜ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´å†…å­˜æš´å¢ï¼Œä»è€Œå¼•å‘å†…å­˜æ³„æ¼å¯¼è‡´ç¨‹åºçš„æ€§èƒ½ç›´çº¿ä¸‹é™ç”šè‡³å´©æºƒï¼Œå› æ­¤å†…å­˜åœ¨ä½¿ç”¨å®Œæ¯•ä¹‹åç†å½“å½’è¿˜ç»™æ“ä½œç³»ç»Ÿä»¥ä¿è¯å†…å­˜çš„é‡å¤åˆ©ç”¨ã€‚</p>\n<blockquote>\n<p>è¿™ä¸ªè¿‡ç¨‹å°±å¥½æ¯”ä½ å‘äº²æˆšæœ‹å‹å€Ÿé’±ï¼Œå€Ÿå¾—å¤šäº†å´ä¸æŒ‰æ—¶å½’è¿˜ï¼Œé‚£ä¹ˆä½ å†ä¸‹æ¬¡å€Ÿé’±çš„æ—¶å€™è‚¯å®šæ²¡æœ‰é‚£ä¹ˆé¡ºåˆ©äº†ï¼Œæˆ–è€…è¯´ä½ çš„äº²æˆšæœ‹å‹ä¸æ„¿æ„å†å€Ÿä½ äº†ï¼Œå¯¼è‡´ä½ çš„æ‰‹å¤´æœ‰ç‚¹å„¿ç´§(å†…å­˜æ³„æ¼ï¼Œæ€§èƒ½ä¸‹é™)ï¼Œæ‰€ä»¥è¯´æœ‰å€Ÿæœ‰è¿˜ï¼Œå†å€Ÿä¸éš¾å˜›ï¼Œæ¯•ç«Ÿå‡ºæ¥æ··éƒ½æ˜¯è¦è¿˜çš„ã€‚</p>\n</blockquote>\n<p>ä½†æ˜¯JavaScriptä½œä¸ºä¸€é—¨é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶ä¸åƒCè¯­è¨€æˆ–C++è¯­è¨€ä¸­éœ€è¦æ‰‹åŠ¨åœ°ç”³è¯·åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼ŒV8å¼•æ“å·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œäº†å†…å­˜çš„åˆ†é…å’Œç®¡ç†ï¼Œå¥½è®©æˆ‘ä»¬æœ‰æ›´å¤šçš„ç²¾åŠ›å»ä¸“æ³¨äºä¸šåŠ¡å±‚é¢çš„å¤æ‚é€»è¾‘ï¼Œè¿™å¯¹äºæˆ‘ä»¬å‰ç«¯å¼€å‘äººå‘˜æ¥è¯´æ˜¯ä¸€é¡¹ç¦åˆ©ï¼Œä½†æ˜¯éšä¹‹å¸¦æ¥çš„é—®é¢˜ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œé‚£å°±æ˜¯ç”±äºä¸ç”¨å»æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œå¯¼è‡´å†™ä»£ç çš„è¿‡ç¨‹ä¸­ä¸å¤Ÿä¸¥è°¨ä»è€Œå®¹æ˜“å¼•å‘å†…å­˜æ³„æ¼(æ¯•ç«Ÿè¿™æ˜¯åˆ«äººå¯¹ä½ çš„å¥½ï¼Œä½ æ²¡æœ‰ä»˜å‡ºè¿‡ï¼Œåˆæ€èƒ½ä½“ä¼šå¾—åˆ°ï¼Ÿ)ã€‚</p>\n<h3 id=\"2ã€V8å¼•æ“çš„å†…å­˜é™åˆ¶\"><a href=\"#2ã€V8å¼•æ“çš„å†…å­˜é™åˆ¶\" class=\"headerlink\" title=\"2ã€V8å¼•æ“çš„å†…å­˜é™åˆ¶\"></a>2ã€V8å¼•æ“çš„å†…å­˜é™åˆ¶</h3><p>è™½ç„¶V8å¼•æ“å¸®åŠ©æˆ‘ä»¬å®ç°äº†è‡ªåŠ¨çš„åƒåœ¾å›æ”¶ç®¡ç†ï¼Œè§£æ”¾äº†æˆ‘ä»¬å‹¤åŠ³çš„åŒæ‰‹ï¼Œä½†V8å¼•æ“ä¸­çš„å†…å­˜ä½¿ç”¨ä¹Ÿå¹¶ä¸æ˜¯æ— é™åˆ¶çš„ã€‚å…·ä½“æ¥è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒV8å¼•æ“åœ¨<code>64</code>ä½ç³»ç»Ÿä¸‹æœ€å¤šåªèƒ½ä½¿ç”¨çº¦<code>1.4GB</code>çš„å†…å­˜ï¼Œåœ¨<code>32</code>ä½ç³»ç»Ÿä¸‹æœ€å¤šåªèƒ½ä½¿ç”¨çº¦<code>0.7GB</code>çš„å†…å­˜ï¼Œåœ¨è¿™æ ·çš„é™åˆ¶ä¸‹ï¼Œå¿…ç„¶ä¼šå¯¼è‡´åœ¨nodeä¸­æ— æ³•ç›´æ¥æ“ä½œå¤§å†…å­˜å¯¹è±¡ï¼Œæ¯”å¦‚å°†ä¸€ä¸ª<code>2GB</code>å¤§å°çš„æ–‡ä»¶å…¨éƒ¨è¯»å…¥å†…å­˜è¿›è¡Œå­—ç¬¦ä¸²åˆ†æå¤„ç†ï¼Œå³ä½¿ç‰©ç†å†…å­˜é«˜è¾¾<code>32GB</code>ä¹Ÿæ— æ³•å……åˆ†åˆ©ç”¨è®¡ç®—æœºçš„å†…å­˜èµ„æºï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§é™åˆ¶å‘¢ï¼Ÿè¿™ä¸ªè¦å›åˆ°V8å¼•æ“çš„è®¾è®¡ä¹‹åˆï¼Œèµ·åˆåªæ˜¯ä½œä¸ºæµè§ˆå™¨ç«¯JavaScriptçš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨æµè§ˆå™¨ç«¯æˆ‘ä»¬å…¶å®å¾ˆå°‘ä¼šé‡åˆ°ä½¿ç”¨å¤§é‡å†…å­˜çš„åœºæ™¯ï¼Œå› æ­¤ä¹Ÿå°±æ²¡æœ‰å¿…è¦å°†æœ€å¤§å†…å­˜è®¾ç½®å¾—è¿‡é«˜ã€‚ä½†è¿™åªæ˜¯ä¸€æ–¹é¢ï¼Œå…¶å®è¿˜æœ‰å¦å¤–ä¸¤ä¸ªä¸»è¦çš„åŸå› ï¼š</p>\n<ul>\n<li><code>JSå•çº¿ç¨‹æœºåˆ¶</code>ï¼šä½œä¸ºæµè§ˆå™¨çš„è„šæœ¬è¯­è¨€ï¼ŒJSçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº¤äº’ä»¥åŠæ“ä½œDOMï¼Œé‚£ä¹ˆè¿™ä¹Ÿå†³å®šäº†å…¶ä½œä¸ºå•çº¿ç¨‹çš„æœ¬è´¨ï¼Œå•çº¿ç¨‹æ„å‘³ç€æ‰§è¡Œçš„ä»£ç å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œåœ¨åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡ã€‚è¯•æƒ³å¦‚æœJSæ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨åˆ é™¤DOMå…ƒç´ çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¯¥å…ƒç´ è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´å¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ—¢ç„¶JSæ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€åœ¨V8æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œç¨‹åºä¸­çš„å…¶ä»–å„ç§é€»è¾‘éƒ½è¦è¿›å…¥æš‚åœç­‰å¾…é˜¶æ®µï¼Œç›´åˆ°åƒåœ¾å›æ”¶ç»“æŸåæ‰ä¼šå†æ¬¡é‡æ–°æ‰§è¡ŒJSé€»è¾‘ã€‚å› æ­¤ï¼Œç”±äºJSçš„å•çº¿ç¨‹æœºåˆ¶ï¼Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹é˜»ç¢äº†ä¸»çº¿ç¨‹é€»è¾‘çš„æ‰§è¡Œã€‚</li>\n</ul>\n<blockquote>\n<p>è™½ç„¶JSæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºäº†èƒ½å¤Ÿå……åˆ†åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„å¤šæ ¸CPUè®¡ç®—èƒ½åŠ›ï¼Œåœ¨HTML5ä¸­å¼•å…¥äº†æ–°çš„Web Workeræ ‡å‡†ï¼Œå…¶ä½œç”¨å°±æ˜¯ä¸ºJSåˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸ä¸»çº¿ç¨‹åˆ›å»ºWorkerçº¿ç¨‹ï¼Œå°†ä¸€äº›ä»»åŠ¡åˆ†é…ç»™åè€…è¿è¡Œã€‚åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„åŒæ—¶ï¼ŒWorkeråœ¨åå°è¿è¡Œï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ã€‚ç­‰åˆ°Workerçº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡ï¼Œå†æŠŠç»“æœè¿”å›ç»™ä¸»çº¿ç¨‹ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œ ä¸€äº›è®¡ç®—å¯†é›†å‹æˆ–é«˜å»¶è¿Ÿçš„ä»»åŠ¡ï¼Œè¢«Workerçº¿ç¨‹è´Ÿæ‹…ï¼Œä¸»çº¿ç¨‹(é€šå¸¸è´Ÿè´£UIäº¤äº’)å°±ä¼šå¾ˆæµç•…ï¼Œä¸ä¼šè¢«é˜»å¡æˆ–è€…æ‹–æ…¢ã€‚Web Workerä¸æ˜¯JSçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯é€šè¿‡JSè®¿é—®çš„æµè§ˆå™¨ç‰¹æ€§ï¼Œå…¶è™½ç„¶åˆ›é€ äº†ä¸€ä¸ªå¤šçº¿ç¨‹çš„æ‰§è¡Œç¯å¢ƒï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸èƒ½è®¿é—®æµè§ˆå™¨ç‰¹å®šçš„APIï¼Œä¾‹å¦‚æ“ä½œDOMï¼Œå› æ­¤è¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜JSå•çº¿ç¨‹çš„æœ¬è´¨ã€‚</p>\n</blockquote>\n<ul>\n<li><code>åƒåœ¾å›æ”¶æœºåˆ¶</code>ï¼šåƒåœ¾å›æ”¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä»¶éå¸¸è€—æ—¶çš„æ“ä½œï¼Œå‡è®¾V8çš„å †å†…å­˜ä¸º<code>1.5G</code>ï¼Œé‚£ä¹ˆV8åšä¸€æ¬¡å°çš„åƒåœ¾å›æ”¶éœ€è¦50msä»¥ä¸Šï¼Œè€Œåšä¸€æ¬¡éå¢é‡å¼å›æ”¶ç”šè‡³éœ€è¦1sä»¥ä¸Šï¼Œå¯è§å…¶è€—æ—¶ä¹‹ä¹…ï¼Œè€Œåœ¨è¿™1sçš„æ—¶é—´å†…ï¼Œæµè§ˆå™¨ä¸€ç›´å¤„äºç­‰å¾…çš„çŠ¶æ€ï¼ŒåŒæ—¶ä¼šå¤±å»å¯¹ç”¨æˆ·çš„å“åº”ï¼Œå¦‚æœæœ‰åŠ¨ç”»æ­£åœ¨è¿è¡Œï¼Œä¹Ÿä¼šé€ æˆåŠ¨ç”»å¡é¡¿æ‰å¸§çš„æƒ…å†µï¼Œä¸¥é‡å½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å› æ­¤å¦‚æœå†…å­˜ä½¿ç”¨è¿‡é«˜ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ç¼“æ…¢ï¼Œä¹Ÿå°±ä¼šå¯¼è‡´ä¸»çº¿ç¨‹çš„ç­‰å¾…æ—¶é—´è¶Šé•¿ï¼Œæµè§ˆå™¨ä¹Ÿå°±è¶Šé•¿æ—¶é—´å¾—ä¸åˆ°å“åº”ã€‚</li>\n</ul>\n<p>åŸºäºä»¥ä¸Šä¸¤ç‚¹ï¼ŒV8å¼•æ“ä¸ºäº†å‡å°‘å¯¹åº”ç”¨çš„æ€§èƒ½é€ æˆçš„å½±å“ï¼Œé‡‡ç”¨äº†ä¸€ç§æ¯”è¾ƒç²—æš´çš„æ‰‹æ®µï¼Œé‚£å°±æ˜¯ç›´æ¥é™åˆ¶å †å†…å­˜çš„å¤§å°ï¼Œæ¯•ç«Ÿåœ¨æµè§ˆå™¨ç«¯ä¸€èˆ¬ä¹Ÿä¸ä¼šé‡åˆ°éœ€è¦æ“ä½œå‡ ä¸ªGå†…å­˜è¿™æ ·çš„åœºæ™¯ã€‚ä½†æ˜¯åœ¨nodeç«¯ï¼Œæ¶‰åŠåˆ°çš„<code>I/O</code>æ“ä½œå¯èƒ½ä¼šæ¯”æµè§ˆå™¨ç«¯æ›´åŠ å¤æ‚å¤šæ ·ï¼Œå› æ­¤æ›´æœ‰å¯èƒ½å‡ºç°å†…å­˜æº¢å‡ºçš„æƒ…å†µã€‚ä¸è¿‡ä¹Ÿæ²¡å…³ç³»ï¼ŒV8ä¸ºæˆ‘ä»¬æä¾›äº†å¯é…ç½®é¡¹æ¥è®©æˆ‘ä»¬æ‰‹åŠ¨åœ°è°ƒæ•´å†…å­˜å¤§å°ï¼Œä½†æ˜¯éœ€è¦åœ¨nodeåˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥æ‰‹åŠ¨è®¾ç½®ã€‚</p>\n<p>æˆ‘ä»¬å°è¯•åœ¨nodeå‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<blockquote>\n<p>ç¬”è€…æœ¬åœ°å®‰è£…çš„nodeç‰ˆæœ¬ä¸º<code>v10.14.2</code>ï¼Œå¯é€šè¿‡<code>node -v</code>æŸ¥çœ‹æœ¬åœ°nodeçš„ç‰ˆæœ¬å·ï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½ä¼šå¯¼è‡´ä¸‹é¢çš„å‘½ä»¤ä¼šæœ‰æ‰€å·®å¼‚ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; è¯¥å‘½ä»¤å¯ä»¥ç”¨æ¥æŸ¥çœ‹nodeä¸­å¯ç”¨çš„V8å¼•æ“çš„é€‰é¡¹åŠå…¶å«ä¹‰</span><br><span class=\"line\">node --v8-options</span><br><span class=\"line\">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬ä¼šåœ¨å‘½ä»¤è¡Œçª—å£ä¸­çœ‹åˆ°å¤§é‡å…³äºV8çš„é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬æš‚ä¸”åªå…³æ³¨å›¾ä¸­çº¢è‰²é€‰æ¡†ä¸­çš„å‡ ä¸ªé€‰é¡¹ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/7/16edeb6f141feaac?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; è®¾ç½®æ–°ç”Ÿä»£å†…å­˜ä¸­å•ä¸ªåŠç©ºé—´çš„å†…å­˜æœ€å°å€¼ï¼Œå•ä½MB</span><br><span class=\"line\">node --min-semi-space-size&#x3D;1024 xxx.js</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è®¾ç½®æ–°ç”Ÿä»£å†…å­˜ä¸­å•ä¸ªåŠç©ºé—´çš„å†…å­˜æœ€å¤§å€¼ï¼Œå•ä½MB</span><br><span class=\"line\">node --max-semi-space-size&#x3D;1024 xxx.js</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; è®¾ç½®è€ç”Ÿä»£å†…å­˜æœ€å¤§å€¼ï¼Œå•ä½MB</span><br><span class=\"line\">node --max-old-space-size&#x3D;2048 xxx.js</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡ä»¥ä¸Šæ–¹æ³•ä¾¿å¯ä»¥æ‰‹åŠ¨æ”¾å®½V8å¼•æ“æ‰€ä½¿ç”¨çš„å†…å­˜é™åˆ¶ï¼ŒåŒæ—¶nodeä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†<code>process.memoryUsage()</code>æ–¹æ³•æ¥è®©æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å½“å‰nodeè¿›ç¨‹æ‰€å ç”¨çš„å®é™…å†…å­˜å¤§å°ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/7/16edf18bb16af64d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>åœ¨ä¸Šå›¾ä¸­ï¼ŒåŒ…å«çš„å‡ ä¸ªå­—æ®µçš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼Œå•ä½å‡ä¸ºå­—èŠ‚ï¼š</p>\n<ul>\n<li><code>heapTotal</code>ï¼šè¡¨ç¤ºV8å½“å‰ç”³è¯·åˆ°çš„å †å†…å­˜æ€»å¤§å°ã€‚</li>\n<li><code>heapUsed</code>ï¼šè¡¨ç¤ºå½“å‰å†…å­˜ä½¿ç”¨é‡ã€‚</li>\n<li><code>external</code>ï¼šè¡¨ç¤ºV8å†…éƒ¨çš„C++å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚</li>\n<li><code>rss(resident set size)</code>ï¼šè¡¨ç¤ºé©»ç•™é›†å¤§å°ï¼Œæ˜¯ç»™è¿™ä¸ªnodeè¿›ç¨‹åˆ†é…äº†å¤šå°‘ç‰©ç†å†…å­˜ï¼Œè¿™äº›ç‰©ç†å†…å­˜ä¸­åŒ…å«å †ï¼Œæ ˆå’Œä»£ç ç‰‡æ®µã€‚å¯¹è±¡ï¼Œé—­åŒ…ç­‰å­˜äºå †å†…å­˜ï¼Œå˜é‡å­˜äºæ ˆå†…å­˜ï¼Œå®é™…çš„JavaScriptæºä»£ç å­˜äºä»£ç æ®µå†…å­˜ã€‚ä½¿ç”¨Workerçº¿ç¨‹æ—¶ï¼Œ<code>rss</code>å°†ä¼šæ˜¯ä¸€ä¸ªå¯¹æ•´ä¸ªè¿›ç¨‹æœ‰æ•ˆçš„å€¼ï¼Œè€Œå…¶ä»–å­—æ®µåˆ™åªé’ˆå¯¹å½“å‰çº¿ç¨‹ã€‚</li>\n</ul>\n<blockquote>\n<p>åœ¨JSä¸­å£°æ˜å¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡çš„å†…å­˜å°±åˆ†é…åœ¨å †ä¸­ï¼Œå¦‚æœå½“å‰å·²ç”³è¯·çš„å †å†…å­˜å·²ç»ä¸å¤Ÿåˆ†é…æ–°çš„å¯¹è±¡ï¼Œåˆ™ä¼šç»§ç»­ç”³è¯·å †å†…å­˜ç›´åˆ°å †çš„å¤§å°è¶…è¿‡V8çš„é™åˆ¶ä¸ºæ­¢ã€‚</p>\n</blockquote>\n<h3 id=\"3ã€V8çš„åƒåœ¾å›æ”¶ç­–ç•¥\"><a href=\"#3ã€V8çš„åƒåœ¾å›æ”¶ç­–ç•¥\" class=\"headerlink\" title=\"3ã€V8çš„åƒåœ¾å›æ”¶ç­–ç•¥\"></a>3ã€V8çš„åƒåœ¾å›æ”¶ç­–ç•¥</h3><p>V8çš„åƒåœ¾å›æ”¶ç­–ç•¥ä¸»è¦æ˜¯åŸºäº<code>åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶</code>ï¼Œå…¶æ ¹æ®<strong>å¯¹è±¡çš„å­˜æ´»æ—¶é—´</strong>å°†å†…å­˜çš„åƒåœ¾å›æ”¶è¿›è¡Œä¸åŒçš„åˆ†ä»£ï¼Œç„¶åå¯¹ä¸åŒçš„åˆ†ä»£é‡‡ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚</p>\n<h4 id=\"3-1-V8çš„å†…å­˜ç»“æ„\"><a href=\"#3-1-V8çš„å†…å­˜ç»“æ„\" class=\"headerlink\" title=\"3.1 V8çš„å†…å­˜ç»“æ„\"></a>3.1 V8çš„å†…å­˜ç»“æ„</h4><p>åœ¨V8å¼•æ“çš„å †ç»“æ„ç»„æˆä¸­ï¼Œå…¶å®é™¤äº†<code>æ–°ç”Ÿä»£</code>å’Œ<code>è€ç”Ÿä»£</code>å¤–ï¼Œè¿˜åŒ…å«å…¶ä»–å‡ ä¸ªéƒ¨åˆ†ï¼Œä½†æ˜¯åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸»è¦å‡ºç°åœ¨æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ï¼Œæ‰€ä»¥å¯¹äºå…¶ä»–çš„éƒ¨åˆ†æˆ‘ä»¬æ²¡å¿…è¦åšå¤ªå¤šçš„æ·±å…¥ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å„¿å¯ä»¥æŸ¥é˜…ä¸‹ç›¸å…³èµ„æ–™ï¼ŒV8çš„å†…å­˜ç»“æ„ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>\n<ul>\n<li><code>æ–°ç”Ÿä»£(new_space)</code>ï¼šå¤§å¤šæ•°çš„å¯¹è±¡å¼€å§‹éƒ½ä¼šè¢«åˆ†é…åœ¨è¿™é‡Œï¼Œè¿™ä¸ªåŒºåŸŸç›¸å¯¹è¾ƒå°ä½†æ˜¯åƒåœ¾å›æ”¶ç‰¹åˆ«é¢‘ç¹ï¼Œè¯¥åŒºåŸŸè¢«åˆ†ä¸ºä¸¤åŠï¼Œä¸€åŠç”¨æ¥åˆ†é…å†…å­˜ï¼Œå¦ä¸€åŠç”¨äºåœ¨åƒåœ¾å›æ”¶æ—¶å°†éœ€è¦ä¿ç•™çš„å¯¹è±¡å¤åˆ¶è¿‡æ¥ã€‚</li>\n<li><code>è€ç”Ÿä»£(old_space)</code>ï¼šæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡åœ¨å­˜æ´»ä¸€æ®µæ—¶é—´åå°±ä¼šè¢«è½¬ç§»åˆ°è€ç”Ÿä»£å†…å­˜åŒºï¼Œç›¸å¯¹äºæ–°ç”Ÿä»£è¯¥å†…å­˜åŒºåŸŸçš„åƒåœ¾å›æ”¶é¢‘ç‡è¾ƒä½ã€‚è€ç”Ÿä»£åˆåˆ†ä¸º<code>è€ç”Ÿä»£æŒ‡é’ˆåŒº</code>å’Œ<code>è€ç”Ÿä»£æ•°æ®åŒº</code>ï¼Œå‰è€…åŒ…å«å¤§å¤šæ•°å¯èƒ½å­˜åœ¨æŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆçš„å¯¹è±¡ï¼Œåè€…åªä¿å­˜åŸå§‹æ•°æ®å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ²¡æœ‰æŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆã€‚</li>\n<li><code>å¤§å¯¹è±¡åŒº(large_object_space)</code>ï¼šå­˜æ”¾ä½“ç§¯è¶…è¶Šå…¶ä»–åŒºåŸŸå¤§å°çš„å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰è‡ªå·±çš„å†…å­˜ï¼Œåƒåœ¾å›æ”¶ä¸ä¼šç§»åŠ¨å¤§å¯¹è±¡åŒºã€‚</li>\n<li><code>ä»£ç åŒº(code_space)</code>ï¼šä»£ç å¯¹è±¡ï¼Œä¼šè¢«åˆ†é…åœ¨è¿™é‡Œï¼Œå”¯ä¸€æ‹¥æœ‰æ‰§è¡Œæƒé™çš„å†…å­˜åŒºåŸŸã€‚</li>\n<li><code>mapåŒº(map_space)</code>ï¼šå­˜æ”¾Cellå’ŒMapï¼Œæ¯ä¸ªåŒºåŸŸéƒ½æ˜¯å­˜æ”¾ç›¸åŒå¤§å°çš„å…ƒç´ ï¼Œç»“æ„ç®€å•(è¿™é‡Œæ²¡æœ‰åšå…·ä½“æ·±å…¥çš„äº†è§£ï¼Œæœ‰æ¸…æ¥šçš„å°ä¼™ä¼´å„¿è¿˜éº»çƒ¦è§£é‡Šä¸‹)ã€‚</li>\n</ul>\n<p>å†…å­˜ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee12280b78399d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>ä¸Šå›¾ä¸­çš„å¸¦æ–œçº¹çš„åŒºåŸŸä»£è¡¨æš‚æœªä½¿ç”¨çš„å†…å­˜ï¼Œæ–°ç”Ÿä»£(new_space)è¢«åˆ’åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å«åšinactive new spaceï¼Œè¡¨ç¤ºæš‚æœªæ¿€æ´»çš„å†…å­˜åŒºåŸŸï¼Œå¦ä¸€éƒ¨åˆ†ä¸ºæ¿€æ´»çŠ¶æ€ï¼Œä¸ºä»€ä¹ˆä¼šåˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†å‘¢ï¼Œåœ¨ä¸‹ä¸€å°èŠ‚æˆ‘ä»¬ä¼šè®²åˆ°ã€‚</p>\n<h4 id=\"3-2-æ–°ç”Ÿä»£\"><a href=\"#3-2-æ–°ç”Ÿä»£\" class=\"headerlink\" title=\"3.2 æ–°ç”Ÿä»£\"></a>3.2 æ–°ç”Ÿä»£</h4><p>åœ¨V8å¼•æ“çš„å†…å­˜ç»“æ„ä¸­ï¼Œæ–°ç”Ÿä»£ä¸»è¦ç”¨äºå­˜æ”¾å­˜æ´»æ—¶é—´è¾ƒçŸ­çš„å¯¹è±¡ã€‚æ–°ç”Ÿä»£å†…å­˜æ˜¯ç”±ä¸¤ä¸ª<code>semispace(åŠç©ºé—´)</code>æ„æˆçš„ï¼Œå†…å­˜æœ€å¤§å€¼åœ¨<code>64</code>ä½ç³»ç»Ÿå’Œ<code>32</code>ä½ç³»ç»Ÿä¸Šåˆ†åˆ«ä¸º<code>32MB</code>å’Œ<code>16MB</code>ï¼Œåœ¨æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ä¸»è¦é‡‡ç”¨äº†<code>Scavenge</code>ç®—æ³•ã€‚</p>\n<p><code>Scavenge</code>ç®—æ³•æ˜¯ä¸€ç§å…¸å‹çš„ç‰ºç‰²ç©ºé—´æ¢å–æ—¶é—´çš„ç®—æ³•ï¼Œå¯¹äºè€ç”Ÿä»£å†…å­˜æ¥è¯´ï¼Œå¯èƒ½ä¼šå­˜å‚¨å¤§é‡å¯¹è±¡ï¼Œå¦‚æœåœ¨è€ç”Ÿä»£ä¸­ä½¿ç”¨è¿™ç§ç®—æ³•ï¼ŒåŠ¿å¿…ä¼šé€ æˆå†…å­˜èµ„æºçš„æµªè´¹ï¼Œä½†æ˜¯åœ¨æ–°ç”Ÿä»£å†…å­˜ä¸­ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œåœ¨æ—¶é—´æ•ˆç‡ä¸Šè¡¨ç°å¯è§‚ï¼Œæ‰€ä»¥è¿˜æ˜¯æ¯”è¾ƒé€‚åˆè¿™ç§ç®—æ³•ã€‚</p>\n<blockquote>\n<p>åœ¨<code>Scavenge</code>ç®—æ³•çš„å…·ä½“å®ç°ä¸­ï¼Œä¸»è¦é‡‡ç”¨äº†<code>Cheney</code>ç®—æ³•ï¼Œå®ƒå°†æ–°ç”Ÿä»£å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œæ¯ä¸€ä¸ªéƒ¨åˆ†çš„ç©ºé—´ç§°ä¸º<code>semispace</code>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šå›¾ä¸­çœ‹è§çš„new_spaceä¸­åˆ’åˆ†çš„ä¸¤ä¸ªåŒºåŸŸï¼Œå…¶ä¸­å¤„äºæ¿€æ´»çŠ¶æ€çš„åŒºåŸŸæˆ‘ä»¬ç§°ä¸º<code>From</code>ç©ºé—´ï¼Œæœªæ¿€æ´»(inactive new space)çš„åŒºåŸŸæˆ‘ä»¬ç§°ä¸º<code>To</code>ç©ºé—´ã€‚è¿™ä¸¤ä¸ªç©ºé—´ä¸­ï¼Œå§‹ç»ˆåªæœ‰ä¸€ä¸ªå¤„äºä½¿ç”¨çŠ¶æ€ï¼Œå¦ä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€ã€‚æˆ‘ä»¬çš„ç¨‹åºä¸­å£°æ˜çš„å¯¹è±¡é¦–å…ˆä¼šè¢«åˆ†é…åˆ°<code>From</code>ç©ºé—´ï¼Œå½“è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¦‚æœ<code>From</code>ç©ºé—´ä¸­å°šæœ‰å­˜æ´»å¯¹è±¡ï¼Œåˆ™ä¼šè¢«å¤åˆ¶åˆ°<code>To</code>ç©ºé—´è¿›è¡Œä¿å­˜ï¼Œéå­˜æ´»çš„å¯¹è±¡ä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚å½“å¤åˆ¶å®Œæˆåï¼Œ<code>From</code>ç©ºé—´å’Œ<code>To</code>ç©ºé—´å®Œæˆä¸€æ¬¡è§’è‰²äº’æ¢ï¼Œ<code>To</code>ç©ºé—´ä¼šå˜ä¸ºæ–°çš„<code>From</code>ç©ºé—´ï¼ŒåŸæ¥çš„<code>From</code>ç©ºé—´åˆ™å˜ä¸º<code>To</code>ç©ºé—´ã€‚</p>\n</blockquote>\n<p>åŸºäºä»¥ä¸Šç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºå¦‚ä¸‹çš„æµç¨‹å›¾ï¼š</p>\n<ul>\n<li>å‡è®¾æˆ‘ä»¬åœ¨<code>From</code>ç©ºé—´ä¸­åˆ†é…äº†ä¸‰ä¸ªå¯¹è±¡Aã€Bã€C</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee172cf1a23c9a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>å½“ç¨‹åºä¸»çº¿ç¨‹ä»»åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•åè¿›å…¥åƒåœ¾å›æ”¶æ—¶ï¼Œå‘ç°å¯¹è±¡Aå·²ç»æ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼Œåˆ™è¡¨ç¤ºå¯ä»¥å¯¹å…¶è¿›è¡Œå›æ”¶</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee17a2fda2c461?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>å¯¹è±¡Bå’Œå¯¹è±¡Cæ­¤æ—¶ä¾æ—§å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå› æ­¤ä¼šè¢«å¤åˆ¶åˆ°<code>To</code>ç©ºé—´ä¸­è¿›è¡Œä¿å­˜</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee17decd1d9ed2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>æ¥ä¸‹æ¥å°†<code>From</code>ç©ºé—´ä¸­çš„æ‰€æœ‰éå­˜æ´»å¯¹è±¡å…¨éƒ¨æ¸…é™¤</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee1819dd9f5999?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>æ­¤æ—¶<code>From</code>ç©ºé—´ä¸­çš„å†…å­˜å·²ç»æ¸…ç©ºï¼Œå¼€å§‹å’Œ<code>To</code>ç©ºé—´å®Œæˆä¸€æ¬¡è§’è‰²äº’æ¢</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee18439a76a3eb?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>å½“ç¨‹åºä¸»çº¿ç¨‹åœ¨æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡æ—¶ï¼Œåœ¨<code>From</code>ç©ºé—´ä¸­åˆ†é…äº†ä¸€ä¸ªæ–°å¯¹è±¡D</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee1874b4c441d2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå†æ¬¡è¿›å…¥åƒåœ¾å›æ”¶ï¼Œå‘ç°å¯¹è±¡Då·²ç»æ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼Œè¡¨ç¤ºå¯ä»¥å¯¹å…¶è¿›è¡Œå›æ”¶</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee18969e114bc7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>å¯¹è±¡Bå’Œå¯¹è±¡Cæ­¤æ—¶ä¾æ—§å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå†æ¬¡è¢«å¤åˆ¶åˆ°<code>To</code>ç©ºé—´ä¸­è¿›è¡Œä¿å­˜</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee18cd2bff353c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>å†æ¬¡å°†<code>From</code>ç©ºé—´ä¸­çš„æ‰€æœ‰éå­˜æ´»å¯¹è±¡å…¨éƒ¨æ¸…é™¤</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee18f4a21c517e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li><code>From</code>ç©ºé—´å’Œ<code>To</code>ç©ºé—´ç»§ç»­å®Œæˆä¸€æ¬¡è§’è‰²äº’æ¢</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee191560b716c7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>é€šè¿‡ä»¥ä¸Šçš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°ï¼Œ<code>Scavenge</code>ç®—æ³•çš„åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸»è¦å°±æ˜¯å°†å­˜æ´»å¯¹è±¡åœ¨<code>From</code>ç©ºé—´å’Œ<code>To</code>ç©ºé—´ä¹‹é—´è¿›è¡Œå¤åˆ¶ï¼ŒåŒæ—¶å®Œæˆä¸¤ä¸ªç©ºé—´ä¹‹é—´çš„è§’è‰²äº’æ¢ï¼Œå› æ­¤è¯¥ç®—æ³•çš„ç¼ºç‚¹ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ï¼Œæµªè´¹äº†ä¸€åŠçš„å†…å­˜ç”¨äºå¤åˆ¶ã€‚</p>\n<h4 id=\"3-3-å¯¹è±¡æ™‹å‡\"><a href=\"#3-3-å¯¹è±¡æ™‹å‡\" class=\"headerlink\" title=\"3.3 å¯¹è±¡æ™‹å‡\"></a>3.3 å¯¹è±¡æ™‹å‡</h4><p>å½“ä¸€ä¸ªå¯¹è±¡åœ¨ç»è¿‡å¤šæ¬¡å¤åˆ¶ä¹‹åä¾æ—§å­˜æ´»ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€æ¬¡è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šè¢«ç›´æ¥è½¬ç§»åˆ°è€ç”Ÿä»£ä¸­ï¼Œè¿™ç§å¯¹è±¡ä»æ–°ç”Ÿä»£è½¬ç§»åˆ°è€ç”Ÿä»£çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸º<code>æ™‹å‡</code>ã€‚<br> å¯¹è±¡æ™‹å‡çš„æ¡ä»¶ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªï¼š</p>\n<ul>\n<li>å¯¹è±¡æ˜¯å¦ç»å†è¿‡ä¸€æ¬¡<code>Scavenge</code>ç®—æ³•</li>\n<li><code>To</code>ç©ºé—´çš„å†…å­˜å æ¯”æ˜¯å¦å·²ç»è¶…è¿‡<code>25%</code></li>\n</ul>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šåˆ†é…åœ¨<code>From</code>ç©ºé—´ä¸­ï¼Œå½“è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåœ¨å°†å¯¹è±¡ä»<code>From</code>ç©ºé—´å¤åˆ¶åˆ°<code>To</code>ç©ºé—´ä¹‹å‰ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥å¯¹è±¡çš„å†…å­˜åœ°å€æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ç»å†è¿‡ä¸€æ¬¡<code>Scavenge</code>ç®—æ³•ï¼Œå¦‚æœåœ°å€å·²ç»å‘ç”Ÿå˜åŠ¨åˆ™ä¼šå°†è¯¥å¯¹è±¡è½¬ç§»åˆ°è€ç”Ÿä»£ä¸­ï¼Œä¸ä¼šå†è¢«å¤åˆ¶åˆ°<code>To</code>ç©ºé—´ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„æµç¨‹å›¾æ¥è¡¨ç¤ºï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee3c5634e61f9e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å¦‚æœå¯¹è±¡æ²¡æœ‰ç»å†è¿‡<code>Scavenge</code>ç®—æ³•ï¼Œä¼šè¢«å¤åˆ¶åˆ°<code>To</code>ç©ºé—´ï¼Œä½†æ˜¯å¦‚æœæ­¤æ—¶<code>To</code>ç©ºé—´çš„å†…å­˜å æ¯”å·²ç»è¶…è¿‡<code>25%</code>ï¼Œåˆ™è¯¥å¯¹è±¡ä¾æ—§ä¼šè¢«è½¬ç§»åˆ°è€ç”Ÿä»£ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee3c90fedad146?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>ä¹‹æ‰€ä»¥æœ‰<code>25%</code>çš„å†…å­˜é™åˆ¶æ˜¯å› ä¸º<code>To</code>ç©ºé—´åœ¨ç»å†è¿‡ä¸€æ¬¡<code>Scavenge</code>ç®—æ³•åä¼šå’Œ<code>From</code>ç©ºé—´å®Œæˆè§’è‰²äº’æ¢ï¼Œä¼šå˜ä¸º<code>From</code>ç©ºé—´ï¼Œåç»­çš„å†…å­˜åˆ†é…éƒ½æ˜¯åœ¨<code>From</code>ç©ºé—´ä¸­è¿›è¡Œçš„ï¼Œå¦‚æœå†…å­˜ä½¿ç”¨è¿‡é«˜ç”šè‡³æº¢å‡ºï¼Œåˆ™ä¼šå½±å“åç»­å¯¹è±¡çš„åˆ†é…ï¼Œå› æ­¤è¶…è¿‡è¿™ä¸ªé™åˆ¶ä¹‹åå¯¹è±¡ä¼šè¢«ç›´æ¥è½¬ç§»åˆ°è€ç”Ÿä»£æ¥è¿›è¡Œç®¡ç†ã€‚</p>\n<h4 id=\"3-4-è€ç”Ÿä»£\"><a href=\"#3-4-è€ç”Ÿä»£\" class=\"headerlink\" title=\"3.4 è€ç”Ÿä»£\"></a>3.4 è€ç”Ÿä»£</h4><p>åœ¨è€ç”Ÿä»£ä¸­ï¼Œå› ä¸ºç®¡ç†ç€å¤§é‡çš„å­˜æ´»å¯¹è±¡ï¼Œå¦‚æœä¾æ—§ä½¿ç”¨<code>Scavenge</code>ç®—æ³•çš„è¯ï¼Œå¾ˆæ˜æ˜¾ä¼šæµªè´¹ä¸€åŠçš„å†…å­˜ï¼Œå› æ­¤å·²ç»ä¸å†ä½¿ç”¨<code>Scavenge</code>ç®—æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨æ–°çš„ç®—æ³•<code>Mark-Sweep(æ ‡è®°æ¸…é™¤)</code>å’Œ<code>Mark-Compact(æ ‡è®°æ•´ç†)</code>æ¥è¿›è¡Œç®¡ç†ã€‚</p>\n<p>åœ¨æ—©å‰æˆ‘ä»¬å¯èƒ½å¬è¯´è¿‡ä¸€ç§ç®—æ³•å«åš<code>å¼•ç”¨è®¡æ•°</code>ï¼Œè¯¥ç®—æ³•çš„åŸç†æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯çœ‹å¯¹è±¡æ˜¯å¦è¿˜æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘å®ƒï¼Œå¦‚æœæ²¡æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™è¯¥å¯¹è±¡ä¼šè¢«è§†ä¸ºåƒåœ¾å¹¶è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡obj1å’Œobj2ï¼Œå…¶ä¸­obj2ä½œä¸ºobj1çš„å±æ€§è¢«obj1å¼•ç”¨ï¼Œå› æ­¤ä¸ä¼šè¢«åƒåœ¾å›æ”¶</span><br><span class=\"line\">let obj1 &#x3D; &#123;</span><br><span class=\"line\">    obj2: &#123;</span><br><span class=\"line\">        a: 1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºobj3å¹¶å°†obj1èµ‹å€¼ç»™obj3ï¼Œè®©ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€</span><br><span class=\"line\">let obj3 &#x3D; obj1;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å°†obj1é‡æ–°èµ‹å€¼ï¼Œæ­¤æ—¶åŸæ¥obj1æŒ‡å‘çš„å¯¹è±¡ç°åœ¨åªç”±obj3æ¥è¡¨ç¤º</span><br><span class=\"line\">obj1 &#x3D; null;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºobj4å¹¶å°†obj3.obj2èµ‹å€¼ç»™obj4</span><br><span class=\"line\">&#x2F;&#x2F; æ­¤æ—¶obj2æ‰€æŒ‡å‘çš„å¯¹è±¡æœ‰ä¸¤ä¸ªå¼•ç”¨ï¼šä¸€ä¸ªæ˜¯ä½œä¸ºobj3çš„å±æ€§ï¼Œå¦ä¸€ä¸ªæ˜¯å˜é‡obj4</span><br><span class=\"line\">let obj4 &#x3D; obj3.obj2;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å°†obj3é‡æ–°èµ‹å€¼ï¼Œæ­¤æ—¶æœ¬å¯ä»¥å¯¹obj3æŒ‡å‘çš„å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œä½†æ˜¯å› ä¸ºobj3.obj2è¢«obj4æ‰€å¼•ç”¨ï¼Œå› æ­¤ä¾æ—§ä¸èƒ½è¢«å›æ”¶</span><br><span class=\"line\">obj3 &#x3D; null;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æ­¤æ—¶obj3.obj2å·²ç»æ²¡æœ‰æŒ‡å‘å®ƒçš„å¼•ç”¨ï¼Œå› æ­¤obj3æŒ‡å‘çš„å¯¹è±¡åœ¨æ­¤æ—¶å¯ä»¥è¢«å›æ”¶</span><br><span class=\"line\">obj4 &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šè¿°ä¾‹å­åœ¨ç»è¿‡ä¸€ç³»åˆ—æ“ä½œåæœ€ç»ˆå¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬ç¢°åˆ°<code>å¾ªç¯å¼•ç”¨</code>çš„åœºæ™¯ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    let a &#x3D; &#123;&#125;;</span><br><span class=\"line\">    let b &#x3D; &#123;&#125;;</span><br><span class=\"line\">    a.a1 &#x3D; b;</span><br><span class=\"line\">    b.b1 &#x3D; a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo();</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å°†å¯¹è±¡<code>a</code>çš„<code>a1</code>å±æ€§æŒ‡å‘å¯¹è±¡<code>b</code>ï¼Œå°†å¯¹è±¡<code>b</code>çš„<code>b1</code>å±æ€§æŒ‡å‘å¯¹è±¡<code>a</code>ï¼Œå½¢æˆä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œåœ¨<code>foo</code>å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå‡½æ•°çš„ä½œç”¨åŸŸå·²ç»è¢«é”€æ¯ï¼Œä½œç”¨åŸŸä¸­åŒ…å«çš„å˜é‡<code>a</code>å’Œ<code>b</code>æœ¬åº”è¯¥å¯ä»¥è¢«å›æ”¶ï¼Œä½†æ˜¯å› ä¸ºé‡‡ç”¨äº†<code>å¼•ç”¨è®¡æ•°</code>çš„ç®—æ³•ï¼Œä¸¤ä¸ªå˜é‡å‡å­˜åœ¨æŒ‡å‘è‡ªèº«çš„å¼•ç”¨ï¼Œå› æ­¤ä¾æ—§æ— æ³•è¢«å›æ”¶ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>\n<p>å› æ­¤ä¸ºäº†é¿å…å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œæˆªè‡³2012å¹´æ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨å‡æ”¾å¼ƒäº†è¿™ç§ç®—æ³•ï¼Œè½¬è€Œé‡‡ç”¨æ–°çš„<code>Mark-Sweep(æ ‡è®°æ¸…é™¤)</code>å’Œ<code>Mark-Compact(æ ‡è®°æ•´ç†)</code>ç®—æ³•ã€‚åœ¨ä¸Šé¢å¾ªç¯å¼•ç”¨çš„ä¾‹å­ä¸­ï¼Œå› ä¸ºå˜é‡<code>a</code>å’Œå˜é‡<code>b</code>æ— æ³•ä»<code>window</code>å…¨å±€å¯¹è±¡è®¿é—®åˆ°ï¼Œå› æ­¤æ— æ³•å¯¹å…¶è¿›è¡Œæ ‡è®°ï¼Œæ‰€ä»¥æœ€ç»ˆä¼šè¢«å›æ”¶ã€‚</p>\n<p><code>Mark-Sweep(æ ‡è®°æ¸…é™¤)</code>åˆ†ä¸º<code>æ ‡è®°</code>å’Œ<code>æ¸…é™¤</code>ä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨æ ‡è®°é˜¶æ®µä¼šéå†å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œç„¶åæ ‡è®°æ´»ç€çš„å¯¹è±¡ï¼Œåœ¨æ¸…é™¤é˜¶æ®µä¸­ï¼Œä¼šå°†æ­»äº¡çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ã€‚<code>Mark-Sweep</code>ç®—æ³•ä¸»è¦æ˜¯é€šè¿‡åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«è®¿é—®åˆ°ï¼Œä»è€ŒçŸ¥é“è¯¥å¯¹è±¡æ˜¯å¦åº”è¯¥è¢«å›æ”¶ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>åƒåœ¾å›æ”¶å™¨ä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ª<code>æ ¹åˆ—è¡¨</code>ï¼Œç”¨äºä»æ ¹èŠ‚ç‚¹å‡ºå‘å»å¯»æ‰¾é‚£äº›å¯ä»¥è¢«è®¿é—®åˆ°çš„å˜é‡ã€‚æ¯”å¦‚åœ¨JavaScriptä¸­ï¼Œ<code>window</code>å…¨å±€å¯¹è±¡å¯ä»¥çœ‹æˆä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚</li>\n<li>ç„¶åï¼Œåƒåœ¾å›æ”¶å™¨ä»æ‰€æœ‰æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œéå†å…¶å¯ä»¥è®¿é—®åˆ°çš„å­èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºæ´»åŠ¨çš„ï¼Œæ ¹èŠ‚ç‚¹ä¸èƒ½åˆ°è¾¾çš„åœ°æ–¹å³ä¸ºéæ´»åŠ¨çš„ï¼Œå°†ä¼šè¢«è§†ä¸ºåƒåœ¾ã€‚</li>\n<li>æœ€åï¼Œåƒåœ¾å›æ”¶å™¨å°†ä¼šé‡Šæ”¾æ‰€æœ‰éæ´»åŠ¨çš„å†…å­˜å—ï¼Œå¹¶å°†å…¶å½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚</li>\n</ul>\n<blockquote>\n<p>ä»¥ä¸‹å‡ ç§æƒ…å†µéƒ½å¯ä»¥ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼š</p>\n<ol>\n<li>å…¨å±€å¯¹è±¡</li>\n<li>æœ¬åœ°å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œå‚æ•°</li>\n<li>å½“å‰åµŒå¥—è°ƒç”¨é“¾ä¸Šçš„å…¶ä»–å‡½æ•°çš„å˜é‡å’Œå‚æ•°</li>\n</ol>\n</blockquote>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee468e85a1084d?imageslim\" alt=\"img\"></p>\n<p>ä½†æ˜¯<code>Mark-Sweep</code>ç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ç»å†è¿‡ä¸€æ¬¡æ ‡è®°æ¸…é™¤åï¼Œå†…å­˜ç©ºé—´å¯èƒ½ä¼šå‡ºç°ä¸è¿ç»­çš„çŠ¶æ€ï¼Œå› ä¸ºæˆ‘ä»¬æ‰€æ¸…ç†çš„å¯¹è±¡çš„å†…å­˜åœ°å€å¯èƒ½ä¸æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œå¯¼è‡´åé¢å¦‚æœéœ€è¦åˆ†é…ä¸€ä¸ªå¤§å¯¹è±¡è€Œç©ºé—²å†…å­˜ä¸è¶³ä»¥åˆ†é…ï¼Œå°±ä¼šæå‰è§¦å‘åƒåœ¾å›æ”¶ï¼Œè€Œè¿™æ¬¡åƒåœ¾å›æ”¶å…¶å®æ˜¯æ²¡å¿…è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç¡®å®æœ‰å¾ˆå¤šç©ºé—²å†…å­˜ï¼Œåªä¸è¿‡æ˜¯ä¸è¿ç»­çš„ã€‚</p>\n<p>ä¸ºäº†è§£å†³è¿™ç§å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Œ<code>Mark-Compact(æ ‡è®°æ•´ç†)</code>ç®—æ³•è¢«æäº†å‡ºæ¥ï¼Œè¯¥ç®—æ³•ä¸»è¦å°±æ˜¯ç”¨æ¥è§£å†³å†…å­˜çš„ç¢ç‰‡åŒ–é—®é¢˜çš„ï¼Œå›æ”¶è¿‡ç¨‹ä¸­å°†æ­»äº¡å¯¹è±¡æ¸…é™¤åï¼Œåœ¨æ•´ç†çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå°†æ´»åŠ¨çš„å¯¹è±¡å¾€å †å†…å­˜çš„ä¸€ç«¯è¿›è¡Œç§»åŠ¨ï¼Œç§»åŠ¨å®Œæˆåå†æ¸…ç†æ‰è¾¹ç•Œå¤–çš„å…¨éƒ¨å†…å­˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æµç¨‹å›¾æ¥è¡¨ç¤ºï¼š</p>\n<ul>\n<li>å‡è®¾åœ¨è€ç”Ÿä»£ä¸­æœ‰Aã€Bã€Cã€Då››ä¸ªå¯¹è±¡</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee47d9f933bfc1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>åœ¨åƒåœ¾å›æ”¶çš„<code>æ ‡è®°</code>é˜¶æ®µï¼Œå°†å¯¹è±¡Aå’Œå¯¹è±¡Cæ ‡è®°ä¸ºæ´»åŠ¨çš„</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee486ece5fda42?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>åœ¨åƒåœ¾å›æ”¶çš„<code>æ•´ç†</code>é˜¶æ®µï¼Œå°†æ´»åŠ¨çš„å¯¹è±¡å¾€å †å†…å­˜çš„ä¸€ç«¯ç§»åŠ¨</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee48f23fe98d7a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<ul>\n<li>åœ¨åƒåœ¾å›æ”¶çš„<code>æ¸…é™¤</code>é˜¶æ®µï¼Œå°†æ´»åŠ¨å¯¹è±¡å·¦ä¾§çš„å†…å­˜å…¨éƒ¨å›æ”¶</li>\n</ul>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/12/8/16ee490a8b9bf0af?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>è‡³æ­¤å°±å®Œæˆäº†ä¸€æ¬¡è€ç”Ÿä»£åƒåœ¾å›æ”¶çš„å…¨éƒ¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨å‰æ–‡ä¸­è¯´è¿‡ï¼Œç”±äºJSçš„å•çº¿ç¨‹æœºåˆ¶ï¼Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¼šé˜»ç¢ä¸»çº¿ç¨‹åŒæ­¥ä»»åŠ¡çš„æ‰§è¡Œï¼Œå¾…æ‰§è¡Œå®Œåƒåœ¾å›æ”¶åæ‰ä¼šå†æ¬¡æ¢å¤æ‰§è¡Œä¸»ä»»åŠ¡çš„é€»è¾‘ï¼Œè¿™ç§è¡Œä¸ºè¢«ç§°ä¸º<code>å…¨åœé¡¿(stop-the-world)</code>ã€‚åœ¨æ ‡è®°é˜¶æ®µåŒæ ·ä¼šé˜»ç¢ä¸»çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè€ç”Ÿä»£ä¼šä¿å­˜å¤§é‡å­˜æ´»çš„å¯¹è±¡ï¼Œå¦‚æœåœ¨æ ‡è®°é˜¶æ®µå°†æ•´ä¸ªå †å†…å­˜éå†ä¸€éï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé€ æˆä¸¥é‡çš„å¡é¡¿ã€‚</p>\n<p>å› æ­¤ï¼Œä¸ºäº†å‡å°‘åƒåœ¾å›æ”¶å¸¦æ¥çš„åœé¡¿æ—¶é—´ï¼ŒV8å¼•æ“åˆå¼•å…¥äº†<code>Incremental Marking(å¢é‡æ ‡è®°)</code>çš„æ¦‚å¿µï¼Œå³å°†åŸæœ¬éœ€è¦ä¸€æ¬¡æ€§éå†å †å†…å­˜çš„æ“ä½œæ”¹ä¸ºå¢é‡æ ‡è®°çš„æ–¹å¼ï¼Œå…ˆæ ‡è®°å †å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†å¯¹è±¡ï¼Œç„¶åæš‚åœï¼Œå°†æ‰§è¡Œæƒé‡æ–°äº¤ç»™JSä¸»çº¿ç¨‹ï¼Œå¾…ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå†ä»åŸæ¥æš‚åœæ ‡è®°çš„åœ°æ–¹ç»§ç»­æ ‡è®°ï¼Œç›´åˆ°æ ‡è®°å®Œæ•´ä¸ªå †å†…å­˜ã€‚è¿™ä¸ªç†å¿µå…¶å®æœ‰ç‚¹åƒ<code>React</code>æ¡†æ¶ä¸­çš„<code>Fiber</code>æ¶æ„ï¼Œåªæœ‰åœ¨æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´æ‰ä¼šå»éå†<code>Fiber Tree</code>æ‰§è¡Œå¯¹åº”çš„ä»»åŠ¡ï¼Œå¦åˆ™å»¶è¿Ÿæ‰§è¡Œï¼Œå°½å¯èƒ½å°‘åœ°å½±å“ä¸»çº¿ç¨‹çš„ä»»åŠ¡ï¼Œé¿å…åº”ç”¨å¡é¡¿ï¼Œæå‡åº”ç”¨æ€§èƒ½ã€‚</p>\n<p>å¾—ç›Šäºå¢é‡æ ‡è®°çš„å¥½å¤„ï¼ŒV8å¼•æ“åç»­ç»§ç»­å¼•å…¥äº†<code>å»¶è¿Ÿæ¸…ç†(lazy sweeping)</code>å’Œ<code>å¢é‡å¼æ•´ç†(incremental compaction)</code>ï¼Œè®©æ¸…ç†å’Œæ•´ç†çš„è¿‡ç¨‹ä¹Ÿå˜æˆå¢é‡å¼çš„ã€‚åŒæ—¶ä¸ºäº†å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„æ€§èƒ½ï¼Œä¹Ÿå°†å¼•å…¥<code>å¹¶è¡Œæ ‡è®°</code>å’Œ<code>å¹¶è¡Œæ¸…ç†</code>ï¼Œè¿›ä¸€æ­¥åœ°å‡å°‘åƒåœ¾å›æ”¶å¯¹ä¸»çº¿ç¨‹çš„å½±å“ï¼Œä¸ºåº”ç”¨æå‡æ›´å¤šçš„æ€§èƒ½ã€‚</p>\n<h3 id=\"4ã€å¦‚ä½•é¿å…å†…å­˜æ³„æ¼\"><a href=\"#4ã€å¦‚ä½•é¿å…å†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"4ã€å¦‚ä½•é¿å…å†…å­˜æ³„æ¼\"></a>4ã€å¦‚ä½•é¿å…å†…å­˜æ³„æ¼</h3><p>åœ¨æˆ‘ä»¬å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¸å¤ªä¼šå…³æ³¨å†™å‡ºæ€æ ·çš„ä»£ç æ‰èƒ½æœ‰æ•ˆåœ°é¿å…å†…å­˜æ³„æ¼ï¼Œæˆ–è€…è¯´æµè§ˆå™¨å’Œå¤§éƒ¨åˆ†çš„å‰ç«¯æ¡†æ¶åœ¨åº•å±‚å·²ç»å¸®åŠ©æˆ‘ä»¬å¤„ç†äº†å¸¸è§çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å¸¸è§çš„å‡ ç§é¿å…å†…å­˜æ³„æ¼çš„æ–¹å¼ï¼Œæ¯•ç«Ÿåœ¨é¢è¯•è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ç»å¸¸è€ƒå¯Ÿçš„è¦ç‚¹ã€‚</p>\n<h4 id=\"4-1-å°½å¯èƒ½å°‘åœ°åˆ›å»ºå…¨å±€å˜é‡\"><a href=\"#4-1-å°½å¯èƒ½å°‘åœ°åˆ›å»ºå…¨å±€å˜é‡\" class=\"headerlink\" title=\"4.1 å°½å¯èƒ½å°‘åœ°åˆ›å»ºå…¨å±€å˜é‡\"></a>4.1 å°½å¯èƒ½å°‘åœ°åˆ›å»ºå…¨å±€å˜é‡</h4><p>åœ¨ES5ä¸­ä»¥<code>var</code>å£°æ˜çš„æ–¹å¼åœ¨å…¨å±€ä½œç”¨åŸŸä¸­åˆ›å»ºä¸€ä¸ªå˜é‡æ—¶ï¼Œæˆ–è€…åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ä¸ä»¥ä»»ä½•å£°æ˜çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªå˜é‡æ—¶ï¼Œéƒ½ä¼šæ— å½¢åœ°æŒ‚è½½åˆ°<code>window</code>å…¨å±€å¯¹è±¡ä¸Šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var a &#x3D; 1; &#x2F;&#x2F; ç­‰ä»·äº window.a &#x3D; 1;</span><br><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    a &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰ä»·äº</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    window.a &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬åœ¨<code>foo</code>å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªå˜é‡<code>a</code>ä½†æ˜¯å¿˜è®°ä½¿ç”¨<code>var</code>æ¥å£°æ˜ï¼Œæ­¤æ—¶ä¼šæ„æƒ³ä¸åˆ°åœ°åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡å¹¶æŒ‚è½½åˆ°windowå¯¹è±¡ä¸Šï¼Œå¦å¤–è¿˜æœ‰ä¸€ç§æ¯”è¾ƒéšè”½çš„æ–¹å¼æ¥åˆ›å»ºå…¨å±€å˜é‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    this.a &#x3D; 1;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foo(); &#x2F;&#x2F; ç›¸å½“äº window.foo()</span><br></pre></td></tr></table></figure>\n\n<p>å½“<code>foo</code>å‡½æ•°åœ¨è°ƒç”¨æ—¶ï¼Œå®ƒæ‰€æŒ‡å‘çš„è¿è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒä¸º<code>window</code>å…¨å±€å¯¹è±¡ï¼Œå› æ­¤å‡½æ•°ä¸­çš„<code>this</code>æŒ‡å‘çš„å…¶å®æ˜¯<code>window</code>ï¼Œä¹Ÿå°±æ— æ„åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å½“è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåœ¨æ ‡è®°é˜¶æ®µå› ä¸º<code>window</code>å¯¹è±¡å¯ä»¥ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œåœ¨<code>window</code>ä¸ŠæŒ‚è½½çš„å±æ€§å‡å¯ä»¥è¢«è®¿é—®åˆ°ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºæ´»åŠ¨çš„ä»è€Œå¸¸é©»å†…å­˜ï¼Œå› æ­¤ä¹Ÿå°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œåªæœ‰åœ¨æ•´ä¸ªè¿›ç¨‹é€€å‡ºæ—¶å…¨å±€ä½œç”¨åŸŸæ‰ä¼šè¢«é”€æ¯ã€‚å¦‚æœä½ é‡åˆ°éœ€è¦å¿…é¡»ä½¿ç”¨å…¨å±€å˜é‡çš„åœºæ™¯ï¼Œé‚£ä¹ˆè¯·ä¿è¯ä¸€å®šè¦åœ¨å…¨å±€å˜é‡ä½¿ç”¨å®Œæ¯•åå°†å…¶è®¾ç½®ä¸º<code>null</code>ä»è€Œè§¦å‘å›æ”¶æœºåˆ¶ã€‚</p>\n<h4 id=\"4-2-æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨\"><a href=\"#4-2-æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨\" class=\"headerlink\" title=\"4.2 æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨\"></a>4.2 æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨</h4><p>åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ç»å¸¸ä¼šæœ‰ä½¿ç”¨<code>setTimeout</code>æˆ–è€…<code>setInterval</code>ç­‰å®šæ—¶å™¨çš„åœºæ™¯ï¼Œå®šæ—¶å™¨æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç¨ä¸æ³¨æ„ï¼Œå¿˜è®°åœ¨é€‚å½“çš„æ—¶é—´æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const numbers &#x3D; [];</span><br><span class=\"line\">const foo &#x3D; function() &#123;</span><br><span class=\"line\">    for(let i &#x3D; 0;i &lt; 100000;i++) &#123;</span><br><span class=\"line\">        numbers.push(i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">window.setInterval(foo, 1000);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨æ¸…é™¤å®šæ—¶å™¨ï¼Œå¯¼è‡´å›è°ƒä»»åŠ¡ä¼šä¸æ–­åœ°æ‰§è¡Œä¸‹å»ï¼Œå›è°ƒä¸­æ‰€å¼•ç”¨çš„<code>numbers</code>å˜é‡ä¹Ÿä¸ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œæœ€ç»ˆå¯¼è‡´<code>numbers</code>æ•°ç»„é•¿åº¦æ— é™é€’å¢ï¼Œä»è€Œå¼•å‘å†…å­˜æ³„æ¼ã€‚</p>\n<h4 id=\"4-3-å°‘ç”¨é—­åŒ…\"><a href=\"#4-3-å°‘ç”¨é—­åŒ…\" class=\"headerlink\" title=\"4.3 å°‘ç”¨é—­åŒ…\"></a>4.3 å°‘ç”¨é—­åŒ…</h4><p>é—­åŒ…æ˜¯JSä¸­çš„ä¸€ä¸ªé«˜çº§ç‰¹æ€§ï¼Œå·§å¦™åœ°åˆ©ç”¨é—­åŒ…å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¾ˆå¤šé«˜çº§åŠŸèƒ½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æŸ¥æ‰¾å˜é‡æ—¶ï¼Œåœ¨æœ¬åœ°ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ä¸åˆ°å°±ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾ä»å†…å‘å¤–å•å‘æŸ¥æ‰¾ï¼Œä½†æ˜¯é—­åŒ…çš„ç‰¹æ€§å¯ä»¥è®©æˆ‘ä»¬åœ¨å¤–éƒ¨ä½œç”¨åŸŸè®¿é—®å†…éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function foo() &#123;</span><br><span class=\"line\">    let local &#x3D; 123;</span><br><span class=\"line\">    return function() &#123;</span><br><span class=\"line\">        return local;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const bar &#x3D; foo();</span><br><span class=\"line\">console.log(bar()); &#x2F;&#x2F; -&gt; 123</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>foo</code>å‡½æ•°æ‰§è¡Œå®Œæ¯•åä¼šè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°å†…éƒ¨å¼•ç”¨äº†<code>foo</code>å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡<code>local</code>ï¼Œå¹¶ä¸”é€šè¿‡å˜é‡<code>bar</code>æ¥å¼•ç”¨è¿™ä¸ªåŒ¿åçš„å‡½æ•°å®šä¹‰ï¼Œé€šè¿‡è¿™ç§é—­åŒ…çš„æ–¹å¼æˆ‘ä»¬å°±å¯ä»¥åœ¨<code>foo</code>å‡½æ•°çš„å¤–éƒ¨ä½œç”¨åŸŸä¸­è®¿é—®åˆ°å®ƒçš„å±€éƒ¨å˜é‡<code>local</code>ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“<code>foo</code>å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå®ƒçš„ä½œç”¨åŸŸä¼šè¢«é”€æ¯ï¼Œä½†æ˜¯ç”±äºå­˜åœ¨å˜é‡å¼•ç”¨å…¶è¿”å›çš„åŒ¿åå‡½æ•°ï¼Œå¯¼è‡´ä½œç”¨åŸŸæ— æ³•å¾—åˆ°é‡Šæ”¾ï¼Œä¹Ÿå°±å¯¼è‡´<code>local</code>å˜é‡æ— æ³•å›æ”¶ï¼Œåªæœ‰å½“æˆ‘ä»¬å–æ¶ˆæ‰å¯¹åŒ¿åå‡½æ•°çš„å¼•ç”¨æ‰ä¼šè¿›å…¥åƒåœ¾å›æ”¶é˜¶æ®µã€‚</p>\n<h4 id=\"4-4-æ¸…é™¤DOMå¼•ç”¨\"><a href=\"#4-4-æ¸…é™¤DOMå¼•ç”¨\" class=\"headerlink\" title=\"4.4 æ¸…é™¤DOMå¼•ç”¨\"></a>4.4 æ¸…é™¤DOMå¼•ç”¨</h4><p>ä»¥å¾€æˆ‘ä»¬åœ¨æ“ä½œDOMå…ƒç´ æ—¶ï¼Œä¸ºäº†é¿å…å¤šæ¬¡è·å–DOMå…ƒç´ ï¼Œæˆ‘ä»¬ä¼šå°†DOMå…ƒç´ å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®å­—å…¸ä¸­ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const elements &#x3D; &#123;</span><br><span class=\"line\">    button: document.getElementById(&#39;button&#39;)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">function removeButton() &#123;</span><br><span class=\"line\">    document.body.removeChild(document.getElementById(&#39;button&#39;));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è°ƒç”¨<code>removeButton</code>æ–¹æ³•æ¥æ¸…é™¤<code>button</code>å…ƒç´ ï¼Œä½†æ˜¯ç”±äºåœ¨<code>elements</code>å­—å…¸ä¸­å­˜åœ¨å¯¹<code>button</code>å…ƒç´ çš„å¼•ç”¨ï¼Œæ‰€ä»¥å³ä½¿æˆ‘ä»¬é€šè¿‡<code>removeChild</code>æ–¹æ³•ç§»é™¤äº†<code>button</code>å…ƒç´ ï¼Œå®ƒå…¶å®è¿˜æ˜¯ä¾æ—§å­˜å‚¨åœ¨å†…å­˜ä¸­æ— æ³•å¾—åˆ°é‡Šæ”¾ï¼Œåªæœ‰æˆ‘ä»¬æ‰‹åŠ¨æ¸…é™¤å¯¹<code>button</code>å…ƒç´ çš„å¼•ç”¨æ‰ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</p>\n<h4 id=\"4-5-å¼±å¼•ç”¨\"><a href=\"#4-5-å¼±å¼•ç”¨\" class=\"headerlink\" title=\"4.5 å¼±å¼•ç”¨\"></a>4.5 å¼±å¼•ç”¨</h4><p>é€šè¿‡å‰å‡ ä¸ªç¤ºä¾‹æˆ‘ä»¬ä¼šå‘ç°å¦‚æœæˆ‘ä»¬ä¸€æ—¦ç–å¿½ï¼Œå°±ä¼šå®¹æ˜“åœ°å¼•å‘å†…å­˜æ³„æ¼çš„é—®é¢˜ï¼Œä¸ºæ­¤ï¼Œåœ¨ES6ä¸­ä¸ºæˆ‘ä»¬æ–°å¢äº†ä¸¤ä¸ªæœ‰æ•ˆçš„æ•°æ®ç»“æ„<code>WeakMap</code>å’Œ<code>WeakSet</code>ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³å†…å­˜æ³„æ¼çš„é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚å…¶è¡¨ç¤º<code>å¼±å¼•ç”¨</code>ï¼Œå®ƒçš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡å‡æ˜¯å¼±å¼•ç”¨ï¼Œå¼±å¼•ç”¨æ˜¯æŒ‡åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ä¸ä¼šå°†é”®åå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨è€ƒè™‘è¿›å»ï¼Œåªè¦æ‰€å¼•ç”¨çš„å¯¹è±¡æ²¡æœ‰å…¶ä»–çš„å¼•ç”¨äº†ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒ<code>WeakMap</code>ä¸­é”®åå¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨åœ°è¿›è¡Œå¼•ç”¨æ¸…é™¤ï¼Œæˆ‘ä»¬å°è¯•åœ¨nodeä¸­æ¼”ç¤ºä¸€ä¸‹è¿‡ç¨‹(å‚è€ƒé˜®ä¸€å³°ES6æ ‡å‡†å…¥é—¨ä¸­çš„ç¤ºä¾‹ï¼Œè‡ªå·±æ‰‹åŠ¨å®ç°äº†ä¸€é)ã€‚</p>\n<p>é¦–å…ˆæ‰“å¼€nodeå‘½ä»¤è¡Œï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">node --expose-gc &#x2F;&#x2F; --expose-gc è¡¨ç¤ºå…è®¸æ‰‹åŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶æœºåˆ¶</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ä¿è¯å†…å­˜æ•°æ®å‡†ç¡®</span><br><span class=\"line\">&gt; global.gc();</span><br><span class=\"line\">undefined</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æŸ¥çœ‹å½“å‰å ç”¨çš„å†…å­˜ï¼Œä¸»è¦å…³å¿ƒheapUsedå­—æ®µï¼Œå¤§å°çº¦ä¸º4.4MB</span><br><span class=\"line\">&gt; process.memoryUsage();</span><br><span class=\"line\">&#123; rss: 21626880,</span><br><span class=\"line\">  heapTotal: 7585792,</span><br><span class=\"line\">  heapUsed: 4708440,</span><br><span class=\"line\">  external: 8710 &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªWeakMap</span><br><span class=\"line\">&gt; let wm &#x3D; new WeakMap();</span><br><span class=\"line\">undefined</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªæ•°ç»„å¹¶èµ‹å€¼ç»™å˜é‡key</span><br><span class=\"line\">&gt; let key &#x3D; new Array(1000000);</span><br><span class=\"line\">undefined</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å°†WeakMapçš„é”®åæŒ‡å‘è¯¥æ•°ç»„</span><br><span class=\"line\">&#x2F;&#x2F; æ­¤æ—¶è¯¥æ•°ç»„å­˜åœ¨ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæ˜¯keyï¼Œä¸€ä¸ªæ˜¯WeakMapçš„é”®å</span><br><span class=\"line\">&#x2F;&#x2F; æ³¨æ„WeakMapæ˜¯å¼±å¼•ç”¨</span><br><span class=\"line\">&gt; wm.set(key, 1);</span><br><span class=\"line\">WeakMap &#123; [items unknown] &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶</span><br><span class=\"line\">&gt; global.gc();</span><br><span class=\"line\">undefined</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å†æ¬¡æŸ¥çœ‹å†…å­˜å ç”¨å¤§å°ï¼ŒheapUsedå·²ç»å¢åŠ åˆ°çº¦12MB</span><br><span class=\"line\">&gt; process.memoryUsage();</span><br><span class=\"line\">&#123; rss: 30232576,</span><br><span class=\"line\">  heapTotal: 17694720,</span><br><span class=\"line\">  heapUsed: 13068464,</span><br><span class=\"line\">  external: 8688 &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æ‰‹åŠ¨æ¸…é™¤å˜é‡keyå¯¹æ•°ç»„çš„å¼•ç”¨</span><br><span class=\"line\">&#x2F;&#x2F; æ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰æ¸…é™¤WeakMapä¸­é”®åå¯¹æ•°ç»„çš„å¼•ç”¨</span><br><span class=\"line\">&gt; key &#x3D; null;</span><br><span class=\"line\">null</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å†æ¬¡æ‰§è¡Œåƒåœ¾å›æ”¶</span><br><span class=\"line\">&gt; global.gc()</span><br><span class=\"line\">undefined</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; æŸ¥çœ‹å†…å­˜å ç”¨å¤§å°ï¼Œå‘ç°heapUsedå·²ç»å›åˆ°äº†ä¹‹å‰çš„å¤§å°(è¿™é‡Œçº¦ä¸º4.8Mï¼ŒåŸæ¥ä¸º4.4Mï¼Œç¨å¾®æœ‰äº›æµ®åŠ¨)</span><br><span class=\"line\">&gt; process.memoryUsage();</span><br><span class=\"line\">&#123; rss: 22110208,</span><br><span class=\"line\">  heapTotal: 9158656,</span><br><span class=\"line\">  heapUsed: 5089752,</span><br><span class=\"line\">  external: 8698 &#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°è™½ç„¶æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨æ¸…é™¤<code>WeakMap</code>ä¸­çš„é”®åå¯¹æ•°ç»„çš„å¼•ç”¨ï¼Œä½†æ˜¯å†…å­˜ä¾æ—§å·²ç»å›åˆ°åŸå§‹çš„å¤§å°ï¼Œè¯´æ˜è¯¥æ•°ç»„å·²ç»è¢«å›æ”¶ï¼Œé‚£ä¹ˆè¿™ä¸ªä¹Ÿå°±æ˜¯å¼±å¼•ç”¨çš„å…·ä½“å«ä¹‰äº†ã€‚</p>\n<h3 id=\"5ã€æ€»ç»“\"><a href=\"#5ã€æ€»ç»“\" class=\"headerlink\" title=\"5ã€æ€»ç»“\"></a>5ã€æ€»ç»“</h3><p>æœ¬æ–‡ä¸­ä¸»è¦è®²è§£äº†ä¸€ä¸‹V8å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¹¶åˆ†åˆ«ä»æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£è®²è¿°äº†ä¸åŒåˆ†ä»£ä¸­çš„åƒåœ¾å›æ”¶ç­–ç•¥ä»¥åŠå¯¹åº”çš„å›æ”¶ç®—æ³•ï¼Œä¹‹ååˆ—å‡ºäº†å‡ ç§å¸¸è§çš„é¿å…å†…å­˜æ³„æ¼çš„æ–¹å¼æ¥å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚å¦‚æœä½ å·²ç»äº†è§£è¿‡åƒåœ¾å›æ”¶ç›¸å…³çš„å†…å®¹ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ä½ ç®€å•å¤ä¹ åŠ æ·±å°è±¡ï¼Œå¦‚æœæ²¡æœ‰äº†è§£è¿‡ï¼Œé‚£ä¹ˆç¬”è€…ä¹Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ äº†è§£ä¸€äº›ä»£ç å±‚é¢ä¹‹å¤–çš„åº•å±‚çŸ¥è¯†ç‚¹ï¼Œç”±äºV8å¼•æ“çš„æºç æ˜¯ç”¨C++å®ç°çš„ï¼Œæ‰€ä»¥ç¬”è€…ä¹Ÿå°±æ²¡æœ‰åšè¿™æ–¹é¢çš„æ·±å…¥äº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å„¿å¯ä»¥è‡ªè¡Œæ¢ç©¶ï¼Œæ–‡ä¸­æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿˜å¸Œæœ›èƒ½å¤Ÿåœ¨è¯„è®ºåŒºæŒ‡æ­£ã€‚</p>\n<h1 id=\"13-æµ®ç‚¹æ•°ç²¾åº¦\"><a href=\"#13-æµ®ç‚¹æ•°ç²¾åº¦\" class=\"headerlink\" title=\"13.æµ®ç‚¹æ•°ç²¾åº¦\"></a>13.æµ®ç‚¹æ•°ç²¾åº¦</h1><h2 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>0.1 + 0.2 æ˜¯å¦ç­‰äº 0.3 ä½œä¸ºä¸€é“ç»å…¸çš„é¢è¯•é¢˜ï¼Œå·²ç»å¹¿å¤–ç†ŸçŸ¥ï¼Œè¯´èµ·åŸå› ï¼Œå¤§å®¶èƒ½å›ç­”å‡ºè¿™æ˜¯æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜å¯¼è‡´ï¼Œä¹Ÿèƒ½è¾©è¯çš„çœ‹å¾…è¿™å¹¶éæ˜¯ ECMAScript è¿™é—¨è¯­è¨€çš„é—®é¢˜ï¼Œä»Šå¤©å°±æ˜¯å…·ä½“çœ‹ä¸€ä¸‹èƒŒåçš„åŸå› ã€‚</p>\n<h2 id=\"æ•°å­—ç±»å‹\"><a href=\"#æ•°å­—ç±»å‹\" class=\"headerlink\" title=\"æ•°å­—ç±»å‹\"></a>æ•°å­—ç±»å‹</h2><p>ECMAScript ä¸­çš„ Number ç±»å‹ä½¿ç”¨ IEEE754 æ ‡å‡†æ¥è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹æ•°å€¼ã€‚æ‰€è°“ IEEE754 æ ‡å‡†ï¼Œå…¨ç§° IEEE äºŒè¿›åˆ¶æµ®ç‚¹æ•°ç®—æœ¯æ ‡å‡†ï¼Œè¿™ä¸ªæ ‡å‡†å®šä¹‰äº†è¡¨ç¤ºæµ®ç‚¹æ•°çš„æ ¼å¼ç­‰å†…å®¹ã€‚</p>\n<p>åœ¨ IEEE754 ä¸­ï¼Œè§„å®šäº†å››ç§è¡¨ç¤ºæµ®ç‚¹æ•°å€¼çš„æ–¹å¼ï¼šå•ç²¾ç¡®åº¦ï¼ˆ32ä½ï¼‰ã€åŒç²¾ç¡®åº¦ï¼ˆ64ä½ï¼‰ã€å»¶ä¼¸å•ç²¾ç¡®åº¦ã€ä¸å»¶ä¼¸åŒç²¾ç¡®åº¦ã€‚åƒ ECMAScript é‡‡ç”¨çš„å°±æ˜¯åŒç²¾ç¡®åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šç”¨ 64 ä½å­—èŠ‚æ¥å‚¨å­˜ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚</p>\n<h2 id=\"æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶\"><a href=\"#æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶\" class=\"headerlink\" title=\"æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶\"></a>æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ 1020 ç”¨åè¿›åˆ¶çš„è¡¨ç¤ºï¼š</p>\n<blockquote>\n<p>1020 = <strong>1</strong> * 10^3 + <strong>0</strong> * 10^2 + <strong>2</strong> * 10^1 + <strong>0</strong> * 10^0</p>\n</blockquote>\n<p>æ‰€ä»¥ 1020 ç”¨åè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 1020â€¦â€¦(å“ˆå“ˆ)</p>\n<p>å¦‚æœ 1020 ç”¨äºŒè¿›åˆ¶æ¥è¡¨ç¤ºå‘¢ï¼Ÿ</p>\n<blockquote>\n<p>1020 = <strong>1</strong> * 2^9 + <strong>1</strong> * 2^8 + <strong>1</strong> * 2^7 + <strong>1</strong> * 2^6 + <strong>1</strong> * 2^5 + <strong>1</strong> * 2^4 + <strong>1</strong> * 2^3 + <strong>1</strong> * 2^2 + <strong>0</strong> * 2^1 + <strong>0</strong> * 2^0</p>\n</blockquote>\n<p>æ‰€ä»¥ 1020 çš„äºŒè¿›åˆ¶ä¸º <code>1111111100</code></p>\n<p>é‚£å¦‚æœæ˜¯ 0.75 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå‘¢ï¼ŸåŒç†åº”è¯¥æ˜¯ï¼š</p>\n<blockquote>\n<p>0.75 = a * 2^-1 + b * 2^-2 + c * 2^-3 + d * 2^-4 + â€¦</p>\n</blockquote>\n<p>å› ä¸ºä½¿ç”¨çš„æ˜¯äºŒè¿›åˆ¶ï¼Œè¿™é‡Œçš„ abcdâ€¦â€¦çš„å€¼çš„è¦ä¹ˆæ˜¯ 0 è¦ä¹ˆæ˜¯ 1ã€‚</p>\n<p>é‚£æ€ä¹ˆç®—å‡º abcdâ€¦â€¦ çš„å€¼å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ä¸¤è¾¹ä¸åœçš„ä¹˜ä»¥ 2 ç®—å‡ºæ¥ï¼Œè§£æ³•å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>0.75 = a * 2^-1 + b * 2^-2 + c * 2^-3 + d * 2^-4â€¦</p>\n</blockquote>\n<p>ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥ 2</p>\n<blockquote>\n<p>1 + 0.5 = a * 2^0 + b * 2^-1 + c * 2^-2 + d * 2^-3â€¦ (æ‰€ä»¥ a = 1)</p>\n</blockquote>\n<p>å‰©ä¸‹çš„ï¼š</p>\n<blockquote>\n<p>0.5 = b * 2^-1 + c * 2^-2 + d * 2^-3â€¦</p>\n</blockquote>\n<p>å†åŒæ—¶ä¹˜ä»¥ 2</p>\n<blockquote>\n<p>1 + 0 = b * 2^0 + c * 2^-2 + d * 2^-3â€¦ (æ‰€ä»¥ b = 1)</p>\n</blockquote>\n<p>æ‰€ä»¥ 0.75 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 0.abï¼Œä¹Ÿå°±æ˜¯ 0.11</p>\n<p>ç„¶è€Œä¸æ˜¯æ‰€æœ‰çš„æ•°éƒ½åƒ 0.75 è¿™ä¹ˆå¥½ç®—ï¼Œæˆ‘ä»¬æ¥ç®—ä¸‹ 0.1ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">0.1 &#x3D; a * 2^-1 + b * 2^-2 + c * 2^-3 + d * 2^-4 + ...</span><br><span class=\"line\"></span><br><span class=\"line\">0 + 0.2 &#x3D; a * 2^0 + b * 2^-1 + c * 2^-2 + ...   (a &#x3D; 0)</span><br><span class=\"line\">0 + 0.4 &#x3D; b * 2^0 + c * 2^-1 + d * 2^-2 + ...   (b &#x3D; 0)</span><br><span class=\"line\">0 + 0.8 &#x3D; c * 2^0 + d * 2^-1 + e * 2^-2 + ...   (c &#x3D; 0)</span><br><span class=\"line\">1 + 0.6 &#x3D; d * 2^0 + e * 2^-1 + f * 2^-2 + ...   (d &#x3D; 1)</span><br><span class=\"line\">1 + 0.2 &#x3D; e * 2^0 + f * 2^-1 + g * 2^-2 + ...   (e &#x3D; 1)</span><br><span class=\"line\">0 + 0.4 &#x3D; f * 2^0 + g * 2^-1 + h * 2^-2 + ...   (f &#x3D; 0)</span><br><span class=\"line\">0 + 0.8 &#x3D; g * 2^0 + h * 2^-1 + i * 2^-2 + ...   (g &#x3D; 0)</span><br><span class=\"line\">1 + 0.6 &#x3D; h * 2^0 + i * 2^-1 + j * 2^-2 + ...   (h &#x3D; 1)</span><br><span class=\"line\">....</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åä½ å°±ä¼šå‘ç°ï¼Œè¿™ä¸ªè®¡ç®—åœ¨ä¸åœçš„å¾ªç¯ï¼Œæ‰€ä»¥ 0.1 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 0.00011001100110011â€¦â€¦</p>\n<h2 id=\"æµ®ç‚¹æ•°çš„å­˜å‚¨\"><a href=\"#æµ®ç‚¹æ•°çš„å­˜å‚¨\" class=\"headerlink\" title=\"æµ®ç‚¹æ•°çš„å­˜å‚¨\"></a>æµ®ç‚¹æ•°çš„å­˜å‚¨</h2><p>è™½ç„¶ 0.1 è½¬æˆäºŒè¿›åˆ¶æ—¶æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯çš„æ•°ï¼Œä½†è®¡ç®—æœºæ€»è¦å‚¨å­˜å§ï¼Œæˆ‘ä»¬çŸ¥é“ ECMAScript ä½¿ç”¨ 64 ä½å­—èŠ‚æ¥å‚¨å­˜ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œé‚£å…·ä½“æ˜¯æ€ä¹ˆå‚¨å­˜çš„å‘¢ï¼Ÿè¿™å°±è¦è¯´å› IEEE754 è¿™ä¸ªæ ‡å‡†äº†ï¼Œæ¯•ç«Ÿæ˜¯è¿™ä¸ªæ ‡å‡†è§„å®šäº†å­˜å‚¨çš„æ–¹å¼ã€‚</p>\n<p>è¿™ä¸ªæ ‡å‡†è®¤ä¸ºï¼Œä¸€ä¸ªæµ®ç‚¹æ•° (Value) å¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š</p>\n<blockquote>\n<p>Value = sign * exponent * fraction</p>\n</blockquote>\n<p>çœ‹èµ·æ¥å¾ˆæŠ½è±¡çš„æ ·å­ï¼Œç®€å•ç†è§£å°±æ˜¯ç§‘å­¦è®¡æ•°æ³•â€¦â€¦</p>\n<p>æ¯”å¦‚ -1020ï¼Œç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºå°±æ˜¯:</p>\n<blockquote>\n<p>-1 * 10^3 * 1.02</p>\n</blockquote>\n<p>sign å°±æ˜¯ -1ï¼Œexponent å°±æ˜¯ 10^3ï¼Œfraction å°±æ˜¯ 1.02</p>\n<p>å¯¹äºäºŒè¿›åˆ¶ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä»¥ 0.1 çš„äºŒè¿›åˆ¶ 0.00011001100110011â€¦â€¦ è¿™ä¸ªæ•°æ¥è¯´ï¼š</p>\n<p>å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>\n<blockquote>\n<p>1 * 2^-4 * 1.1001100110011â€¦â€¦</p>\n</blockquote>\n<p>å…¶ä¸­ sign å°±æ˜¯ 1ï¼Œexponent å°±æ˜¯ 2^-4ï¼Œfraction å°±æ˜¯ 1.1001100110011â€¦â€¦</p>\n<p>è€Œå½“åªåšäºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•çš„è¡¨ç¤ºæ—¶ï¼Œè¿™ä¸ª Value çš„è¡¨ç¤ºå¯ä»¥å†å…·ä½“ä¸€ç‚¹å˜æˆï¼š</p>\n<blockquote>\n<p>V = (-1)^S * (1 + Fraction) * 2^E</p>\n</blockquote>\n<p>(å¦‚æœæ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½å¯ä»¥è¿™æ ·è¡¨ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å­˜å‚¨çš„æ—¶å€™å°±æŠŠè¿™å…¶ä¸­ä¼šå˜åŒ–çš„ä¸€äº›å€¼å­˜å‚¨èµ·æ¥å°±å¥½äº†)</p>\n<p>æˆ‘ä»¬æ¥ä¸€ç‚¹ç‚¹çœ‹ï¼š</p>\n<p><code>(-1)^S</code> è¡¨ç¤ºç¬¦å·ä½ï¼Œå½“ S = 0ï¼ŒV ä¸ºæ­£æ•°ï¼›å½“ S = 1ï¼ŒV ä¸ºè´Ÿæ•°ã€‚</p>\n<p>å†çœ‹ <code>(1 + Fraction)</code>ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„æµ®ç‚¹æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸º 1.xxxx * 2^xxx çš„å½¢å¼ï¼Œå‰é¢çš„ä¸€å®šæ˜¯ 1.xxxï¼Œé‚£å¹²è„†æˆ‘ä»¬å°±ä¸å­˜å‚¨è¿™ä¸ª 1 äº†ï¼Œç›´æ¥å­˜åé¢çš„ xxxxx å¥½äº†ï¼Œè¿™ä¹Ÿå°±æ˜¯ Fraction çš„éƒ¨åˆ†ã€‚</p>\n<p>æœ€åå†çœ‹ <code>2^E</code></p>\n<p>å¦‚æœæ˜¯ 1020.75ï¼Œå¯¹åº”äºŒè¿›åˆ¶æ•°å°±æ˜¯ 1111111100.11ï¼Œå¯¹åº”äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•å°±æ˜¯ 1 * 1.11111110011 * 2^9ï¼ŒE çš„å€¼å°±æ˜¯ 9ï¼Œè€Œå¦‚æœæ˜¯ 0.1 ï¼Œå¯¹åº”äºŒè¿›åˆ¶æ˜¯ 1 * 1.1001100110011â€¦â€¦ * 2^-4ï¼Œ E çš„å€¼å°±æ˜¯ -4ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒE æ—¢å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œåˆå¯èƒ½æ˜¯æ­£æ•°ï¼Œé‚£é—®é¢˜å°±æ¥äº†ï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆå‚¨å­˜è¿™ä¸ª E å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬è¿™æ ·è§£å†³ï¼Œå‡å¦‚æˆ‘ä»¬ç”¨ 8 ä½å­—èŠ‚æ¥å­˜å‚¨ E è¿™ä¸ªæ•°ï¼Œå¦‚æœåªæœ‰æ­£æ•°çš„è¯ï¼Œå‚¨å­˜çš„å€¼çš„èŒƒå›´æ˜¯ 0 ~ 254ï¼Œè€Œå¦‚æœè¦å‚¨å­˜æ­£è´Ÿæ•°çš„è¯ï¼Œå€¼çš„èŒƒå›´å°±æ˜¯ -127~127ï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨çš„æ—¶å€™ï¼ŒæŠŠè¦å­˜å‚¨çš„æ•°å­—åŠ ä¸Š 127ï¼Œè¿™æ ·å½“æˆ‘ä»¬å­˜ -127 çš„æ—¶å€™ï¼Œæˆ‘ä»¬å­˜ 0ï¼Œå½“å­˜ 127 çš„æ—¶å€™ï¼Œå­˜ 254ï¼Œè¿™æ ·å°±è§£å†³äº†å­˜è´Ÿæ•°çš„é—®é¢˜ã€‚å¯¹åº”çš„ï¼Œå½“å–å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å†å‡å» 127ã€‚</p>\n<p>æ‰€ä»¥å‘¢ï¼ŒçœŸåˆ°å®é™…å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šç›´æ¥å­˜å‚¨ Eï¼Œè€Œæ˜¯ä¼šå­˜å‚¨ E + biasï¼Œå½“ç”¨ 8 ä¸ªå­—èŠ‚çš„æ—¶å€™ï¼Œè¿™ä¸ª bias å°±æ˜¯ 127ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå¦‚æœè¦å­˜å‚¨ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œæˆ‘ä»¬å­˜ S å’Œ Fraction å’Œ E + bias è¿™ä¸‰ä¸ªå€¼å°±å¥½äº†ï¼Œé‚£å…·ä½“è¦åˆ†é…å¤šå°‘ä¸ªå­—èŠ‚ä½æ¥å­˜å‚¨è¿™äº›æ•°å‘¢ï¼ŸIEEE754 ç»™å‡ºäº†æ ‡å‡†ï¼š</p>\n<p><a href=\"https://camo.githubusercontent.com/8a1cc45ff11a176af57f5cec9998addda44ebc193b2d19e7d103a37b6036686d/68747470733a2f2f67772e616c6963646e2e636f6d2f7466732f5442315666564579755432674b306a535a46765858586e465858612d3739302d3230352e6a7067\"><img data-src=\"https://camo.githubusercontent.com/8a1cc45ff11a176af57f5cec9998addda44ebc193b2d19e7d103a37b6036686d/68747470733a2f2f67772e616c6963646e2e636f6d2f7466732f5442315666564579755432674b306a535a46765858586e465858612d3739302d3230352e6a7067\" alt=\"IEEE754\"></a></p>\n<p>åœ¨è¿™ä¸ªæ ‡å‡†ä¸‹ï¼š</p>\n<p>æˆ‘ä»¬ä¼šç”¨ 1 ä½å­˜å‚¨ Sï¼Œ0 è¡¨ç¤ºæ­£æ•°ï¼Œ1 è¡¨ç¤ºè´Ÿæ•°ã€‚</p>\n<p>ç”¨ 11 ä½å­˜å‚¨ E + biasï¼Œå¯¹äº 11 ä½æ¥è¯´ï¼Œbias çš„å€¼æ˜¯ 2^(11-1) - 1ï¼Œä¹Ÿå°±æ˜¯ 1023ã€‚</p>\n<p>ç”¨ 52 ä½å­˜å‚¨ Fractionã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼Œå°±æ‹¿ 0.1 æ¥çœ‹ï¼Œå¯¹åº”äºŒè¿›åˆ¶æ˜¯ 1 * 1.1001100110011â€¦â€¦ * 2^-4ï¼Œ Sign æ˜¯ 0ï¼ŒE + bias æ˜¯ -4 + 1023 = 1019ï¼Œ1019 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ 1111111011ï¼ŒFraction æ˜¯ 1001100110011â€¦â€¦</p>\n<p>å¯¹åº” 64 ä¸ªå­—èŠ‚ä½çš„å®Œæ•´è¡¨ç¤ºå°±æ˜¯ï¼š</p>\n<blockquote>\n<p>0 01111111011 1001100110011001100110011001100110011001100110011010</p>\n</blockquote>\n<p>åŒç†, 0.2 è¡¨ç¤ºçš„å®Œæ•´è¡¨ç¤ºæ˜¯ï¼š</p>\n<blockquote>\n<p>0 01111111100 1001100110011001100110011001100110011001100110011010</p>\n</blockquote>\n<p>æ‰€ä»¥å½“ 0.1 å­˜ä¸‹æ¥çš„æ—¶å€™ï¼Œå°±å·²ç»å‘ç”Ÿäº†ç²¾åº¦ä¸¢å¤±ï¼Œå½“æˆ‘ä»¬ç”¨æµ®ç‚¹æ•°è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å…¶å®æ˜¯ç²¾åº¦ä¸¢å¤±åçš„æ•°ã€‚</p>\n<h2 id=\"æµ®ç‚¹æ•°çš„è¿ç®—\"><a href=\"#æµ®ç‚¹æ•°çš„è¿ç®—\" class=\"headerlink\" title=\"æµ®ç‚¹æ•°çš„è¿ç®—\"></a>æµ®ç‚¹æ•°çš„è¿ç®—</h2><p>å…³äºæµ®ç‚¹æ•°çš„è¿ç®—ï¼Œä¸€èˆ¬ç”±ä»¥ä¸‹äº”ä¸ªæ­¥éª¤å®Œæˆï¼šå¯¹é˜¶ã€å°¾æ•°è¿ç®—ã€è§„æ ¼åŒ–ã€èˆå…¥å¤„ç†ã€æº¢å‡ºåˆ¤æ–­ã€‚æˆ‘ä»¬æ¥ç®€å•çœ‹ä¸€ä¸‹ 0.1 å’Œ 0.2 çš„è®¡ç®—ã€‚</p>\n<p>é¦–å…ˆæ˜¯å¯¹é˜¶ï¼Œæ‰€è°“å¯¹é˜¶ï¼Œå°±æ˜¯æŠŠé˜¶ç è°ƒæ•´ä¸ºç›¸åŒï¼Œæ¯”å¦‚ 0.1 æ˜¯ <code>1.1001100110011â€¦â€¦ * 2^-4</code>ï¼Œé˜¶ç æ˜¯ -4ï¼Œè€Œ 0.2 å°±æ˜¯ <code>1.10011001100110...* 2^-3</code>ï¼Œé˜¶ç æ˜¯ -3ï¼Œä¸¤ä¸ªé˜¶ç ä¸åŒï¼Œæ‰€ä»¥å…ˆè°ƒæ•´ä¸ºç›¸åŒçš„é˜¶ç å†è¿›è¡Œè®¡ç®—ï¼Œè°ƒæ•´åŸåˆ™æ˜¯å°é˜¶å¯¹å¤§é˜¶ï¼Œä¹Ÿå°±æ˜¯ 0.1 çš„ -4 è°ƒæ•´ä¸º -3ï¼Œå¯¹åº”å˜æˆ <code>0.11001100110011â€¦â€¦ * 2^-3</code></p>\n<p>æ¥ä¸‹æ¥æ˜¯å°¾æ•°è®¡ç®—:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">  0.1100110011001100110011001100110011001100110011001101</span><br><span class=\"line\">+ 1.1001100110011001100110011001100110011001100110011010</span><br><span class=\"line\">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class=\"line\"> 10.0110011001100110011001100110011001100110011001100111</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¾—åˆ°ç»“æœä¸º <code>10.0110011001100110011001100110011001100110011001100111 * 2^-3</code></p>\n<p>å°†è¿™ä¸ªç»“æœå¤„ç†ä¸€ä¸‹ï¼Œå³ç»“æœè§„æ ¼åŒ–ï¼Œå˜æˆ <code>1.0011001100110011001100110011001100110011001100110011(1) * 2^-2</code></p>\n<p>æ‹¬å·é‡Œçš„ 1 æ„æ€æ˜¯è¯´è®¡ç®—åè¿™ä¸ª 1 è¶…å‡ºäº†èŒƒå›´ï¼Œæ‰€ä»¥è¦è¢«èˆå¼ƒäº†ã€‚</p>\n<p>å†ç„¶åæ˜¯èˆå…¥ï¼Œå››èˆäº”å…¥å¯¹åº”åˆ°äºŒè¿›åˆ¶ä¸­ï¼Œå°±æ˜¯ 0 èˆ 1 å…¥ï¼Œå› ä¸ºæˆ‘ä»¬è¦æŠŠæ‹¬å·é‡Œçš„ 1 ä¸¢äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¼šè¿›ä¸€ï¼Œç»“æœå˜æˆ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1.0011001100110011001100110011001100110011001100110100 * 2^-2</span><br></pre></td></tr></table></figure>\n\n<p>æœ¬æ¥è¿˜æœ‰ä¸€ä¸ªæº¢å‡ºåˆ¤æ–­ï¼Œå› ä¸ºè¿™é‡Œä¸æ¶‰åŠï¼Œå°±ä¸è®²äº†ã€‚</p>\n<p>æ‰€ä»¥æœ€ç»ˆçš„ç»“æœå­˜æˆ 64 ä½å°±æ˜¯</p>\n<blockquote>\n<p>0 01111111101 0011001100110011001100110011001100110011001100110100</p>\n</blockquote>\n<p>å°†å®ƒè½¬æ¢ä¸º10è¿›åˆ¶æ•°å°±å¾—åˆ° <code>0.30000000000000004440892098500626</code></p>\n<p>å› ä¸ºä¸¤æ¬¡å­˜å‚¨æ—¶çš„ç²¾åº¦ä¸¢å¤±åŠ ä¸Šä¸€æ¬¡è¿ç®—æ—¶çš„ç²¾åº¦ä¸¢å¤±ï¼Œæœ€ç»ˆå¯¼è‡´äº† 0.1 + 0.2 !== 0.3</p>\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</span><br><span class=\"line\">parseFloat(0.1).toString(2);</span><br><span class=\"line\">&#x3D;&gt; &quot;0.0001100110011001100110011001100110011001100110011001101&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; äºŒè¿›åˆ¶è½¬åè¿›åˆ¶</span><br><span class=\"line\">parseInt(1100100,2)</span><br><span class=\"line\">&#x3D;&gt; 100</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä»¥æŒ‡å®šçš„ç²¾åº¦è¿”å›è¯¥æ•°å€¼å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º</span><br><span class=\"line\">(0.1 + 0.2).toPrecision(21)</span><br><span class=\"line\">&#x3D;&gt; &quot;0.300000000000000044409&quot;</span><br><span class=\"line\">(0.3).toPrecision(21)</span><br><span class=\"line\">&#x3D;&gt; &quot;0.299999999999999988898&quot;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"14-new\"><a href=\"#14-new\" class=\"headerlink\" title=\"14.new\"></a>14.new</h1><h2 id=\"å®šä¹‰-4\"><a href=\"#å®šä¹‰-4\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h2><p>ä¸€å¥è¯ä»‹ç» new:</p>\n<blockquote>\n<p>new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€</p>\n</blockquote>\n<p>ä¹Ÿè®¸æœ‰ç‚¹éš¾æ‡‚ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ‹Ÿ new ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ new å®ç°äº†å“ªäº›åŠŸèƒ½ã€‚</p>\n<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Otaku å¾¡å®…æ—ï¼Œç®€ç§°å®…</span><br><span class=\"line\">function Otaku (name, age) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\"></span><br><span class=\"line\">    this.habit &#x3D; &#39;Games&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å› ä¸ºç¼ºä¹é”»ç‚¼çš„ç¼˜æ•…ï¼Œèº«ä½“å¼ºåº¦è®©äººæ‹…å¿§</span><br><span class=\"line\">Otaku.prototype.strength &#x3D; 60;</span><br><span class=\"line\"></span><br><span class=\"line\">Otaku.prototype.sayYourName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(&#39;I am &#39; + this.name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; new Otaku(&#39;Kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Kevin</span><br><span class=\"line\">console.log(person.habit) &#x2F;&#x2F; Games</span><br><span class=\"line\">console.log(person.strength) &#x2F;&#x2F; 60</span><br><span class=\"line\"></span><br><span class=\"line\">person.sayYourName(); &#x2F;&#x2F; I am Kevin</span><br></pre></td></tr></table></figure>\n\n<p>ä»è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ä¾‹ person å¯ä»¥ï¼š</p>\n<ol>\n<li>è®¿é—®åˆ° Otaku æ„é€ å‡½æ•°é‡Œçš„å±æ€§</li>\n<li>è®¿é—®åˆ° Otaku.prototype ä¸­çš„å±æ€§</li>\n</ol>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç€æ¨¡æ‹Ÿä¸€ä¸‹äº†ã€‚</p>\n<p>å› ä¸º new æ˜¯å…³é”®å­—ï¼Œæ‰€ä»¥æ— æ³•åƒ bind å‡½æ•°ä¸€æ ·ç›´æ¥è¦†ç›–ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°ï¼Œå‘½åä¸º objectFactoryï¼Œæ¥æ¨¡æ‹Ÿ new çš„æ•ˆæœã€‚ç”¨çš„æ—¶å€™æ˜¯è¿™æ ·çš„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Otaku () &#123;</span><br><span class=\"line\">    â€¦â€¦</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨ new</span><br><span class=\"line\">var person &#x3D; new Otaku(â€¦â€¦);</span><br><span class=\"line\">&#x2F;&#x2F; ä½¿ç”¨ objectFactory</span><br><span class=\"line\">var person &#x3D; objectFactory(Otaku, â€¦â€¦)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åˆæ­¥å®ç°\"><a href=\"#åˆæ­¥å®ç°\" class=\"headerlink\" title=\"åˆæ­¥å®ç°\"></a>åˆæ­¥å®ç°</h2><p>åˆ†æï¼š</p>\n<p>å› ä¸º new çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿè¦å»ºç«‹ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå‡è®¾è¿™ä¸ªå¯¹è±¡å« objï¼Œå› ä¸º obj ä¼šå…·æœ‰ Otaku æ„é€ å‡½æ•°é‡Œçš„å±æ€§ï¼Œæƒ³æƒ³ç»å…¸ç»§æ‰¿çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Otaku.apply(obj, arguments)æ¥ç»™ obj æ·»åŠ æ–°çš„å±æ€§ã€‚</p>\n<p>åœ¨ JavaScript æ·±å…¥ç³»åˆ—ç¬¬ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¾¿è®²äº†åŸå‹ä¸åŸå‹é“¾ï¼Œæˆ‘ä»¬çŸ¥é“å®ä¾‹çš„ <strong>proto</strong> å±æ€§ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„ prototypeï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºå»ºç«‹èµ·è¿™æ ·çš„å…³ç³»ï¼Œå®ä¾‹å¯ä»¥è®¿é—®åŸå‹ä¸Šçš„å±æ€§ã€‚</p>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç€å†™ç¬¬ä¸€ç‰ˆäº†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬ä¸€ç‰ˆä»£ç </span><br><span class=\"line\">function objectFactory() &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F; æ–°å»ºå¯¹è±¡</span><br><span class=\"line\">    var obj &#x3D; new Object();</span><br><span class=\"line\">    &#x2F;&#x2F; ç§»é™¤å‚æ•°é¦–ä¸ª</span><br><span class=\"line\">    Constructor &#x3D; [].shift.call(arguments);</span><br><span class=\"line\">    &#x2F;&#x2F; å®ä¾‹çš„ __proto__ å±æ€§ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„ prototype</span><br><span class=\"line\">    obj.__proto__ &#x3D; Constructor.prototype;</span><br><span class=\"line\">    &#x2F;&#x2F; è°ƒç”¨å¯¹è±¡</span><br><span class=\"line\">    Constructor.apply(obj, arguments);</span><br><span class=\"line\">    return obj;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸€ç‰ˆä¸­ï¼Œæˆ‘ä»¬ï¼š</p>\n<ol>\n<li>ç”¨new Object() çš„æ–¹å¼æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡ obj</li>\n<li>å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä¼ å…¥çš„æ„é€ å‡½æ•°ã€‚æ­¤å¤–å› ä¸º shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥ arguments ä¼šè¢«å»é™¤ç¬¬ä¸€ä¸ªå‚æ•°</li>\n<li>å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§</li>\n<li>ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§</li>\n<li>è¿”å› obj</li>\n</ol>\n<p><a href=\"https://github.com/mqyqingfeng/Blog/issues/16\">https://github.com/mqyqingfeng/Blog/issues/16</a>)</p>\n<p>å¤åˆ¶ä»¥ä¸‹çš„ä»£ç ï¼Œåˆ°æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸‹æµ‹è¯•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Otaku (name, age) &#123;</span><br><span class=\"line\">    this.name &#x3D; name;</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\"></span><br><span class=\"line\">    this.habit &#x3D; &#39;Games&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Otaku.prototype.strength &#x3D; 60;</span><br><span class=\"line\"></span><br><span class=\"line\">Otaku.prototype.sayYourName &#x3D; function () &#123;</span><br><span class=\"line\">    console.log(&#39;I am &#39; + this.name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function objectFactory() &#123;</span><br><span class=\"line\">    var obj &#x3D; new Object(),</span><br><span class=\"line\">    Constructor &#x3D; [].shift.call(arguments);</span><br><span class=\"line\">    obj.__proto__ &#x3D; Constructor.prototype;</span><br><span class=\"line\">    Constructor.apply(obj, arguments);</span><br><span class=\"line\">    return obj;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; objectFactory(Otaku, &#39;Kevin&#39;, &#39;18&#39;)</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Kevin</span><br><span class=\"line\">console.log(person.habit) &#x2F;&#x2F; Games</span><br><span class=\"line\">console.log(person.strength) &#x2F;&#x2F; 60</span><br><span class=\"line\"></span><br><span class=\"line\">person.sayYourName(); &#x2F;&#x2F; I am Kevin</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"è¿”å›å€¼æ•ˆæœå®ç°\"><a href=\"#è¿”å›å€¼æ•ˆæœå®ç°\" class=\"headerlink\" title=\"è¿”å›å€¼æ•ˆæœå®ç°\"></a>è¿”å›å€¼æ•ˆæœå®ç°</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ç§æƒ…å†µï¼Œå‡å¦‚æ„é€ å‡½æ•°æœ‰è¿”å›å€¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Otaku (name, age) &#123;</span><br><span class=\"line\">    this.strength &#x3D; 60;</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\"></span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">        name: name,</span><br><span class=\"line\">        habit: &#39;Games&#39;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; new Otaku(&#39;Kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; Kevin</span><br><span class=\"line\">console.log(person.habit) &#x2F;&#x2F; Games</span><br><span class=\"line\">console.log(person.strength) &#x2F;&#x2F; undefined</span><br><span class=\"line\">console.log(person.age) &#x2F;&#x2F; undefined</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å®ä¾‹ person ä¸­åªèƒ½è®¿é—®è¿”å›çš„å¯¹è±¡ä¸­çš„å±æ€§ã€‚</p>\n<p>è€Œä¸”è¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå‡å¦‚æˆ‘ä»¬åªæ˜¯è¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼å‘¢ï¼Ÿ</p>\n<p>å†ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Otaku (name, age) &#123;</span><br><span class=\"line\">    this.strength &#x3D; 60;</span><br><span class=\"line\">    this.age &#x3D; age;</span><br><span class=\"line\"></span><br><span class=\"line\">    return &#39;handsome boy&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var person &#x3D; new Otaku(&#39;Kevin&#39;, &#39;18&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(person.name) &#x2F;&#x2F; undefined</span><br><span class=\"line\">console.log(person.habit) &#x2F;&#x2F; undefined</span><br><span class=\"line\">console.log(person.strength) &#x2F;&#x2F; 60</span><br><span class=\"line\">console.log(person.age) &#x2F;&#x2F; 18</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœå®Œå…¨é¢ å€’è¿‡æ¥ï¼Œè¿™æ¬¡å°½ç®¡æœ‰è¿”å›å€¼ï¼Œä½†æ˜¯ç›¸å½“äºæ²¡æœ‰è¿”å›å€¼è¿›è¡Œå¤„ç†ã€‚</p>\n<p>æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­è¿”å›çš„å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬è¯¥è¿”å›ä»€ä¹ˆå°±è¿”å›ä»€ä¹ˆã€‚</p>\n<p>å†æ¥çœ‹ç¬¬äºŒç‰ˆçš„ä»£ç ï¼Œä¹Ÿæ˜¯æœ€åä¸€ç‰ˆçš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç¬¬äºŒç‰ˆçš„ä»£ç </span><br><span class=\"line\">function objectFactory() &#123;</span><br><span class=\"line\">    var obj &#x3D; new Object(),</span><br><span class=\"line\">    Constructor &#x3D; [].shift.call(arguments);</span><br><span class=\"line\">    obj.__proto__ &#x3D; Constructor.prototype;</span><br><span class=\"line\">    var ret &#x3D; Constructor.apply(obj, arguments);</span><br><span class=\"line\">    return typeof ret &#x3D;&#x3D;&#x3D; &#39;object&#39; ? ret : obj;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"15-Event-Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶\"><a href=\"#15-Event-Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶\" class=\"headerlink\" title=\"15.Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶\"></a>15.Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶</h1><h2 id=\"å‰è¨€-1\"><a href=\"#å‰è¨€-1\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjavascriptä»è¯ç”Ÿä¹‹æ—¥èµ·å°±æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„éé˜»å¡çš„è„šæœ¬è¯­è¨€ã€‚è¿™æ˜¯ç”±å…¶æœ€åˆçš„ç”¨é€”æ¥å†³å®šçš„ï¼šä¸æµè§ˆå™¨äº¤äº’ã€‚</p>\n<p>å•çº¿ç¨‹æ„å‘³ç€ï¼Œjavascriptä»£ç åœ¨æ‰§è¡Œçš„ä»»ä½•æ—¶å€™ï¼Œéƒ½åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹æ¥å¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ã€‚</p>\n<p>è€Œéé˜»å¡åˆ™æ˜¯å½“ä»£ç éœ€è¦è¿›è¡Œä¸€é¡¹å¼‚æ­¥ä»»åŠ¡ï¼ˆæ— æ³•ç«‹åˆ»è¿”å›ç»“æœï¼Œéœ€è¦èŠ±ä¸€å®šæ—¶é—´æ‰èƒ½è¿”å›çš„ä»»åŠ¡ï¼Œå¦‚I/Oäº‹ä»¶ï¼‰çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹ä¼šæŒ‚èµ·ï¼ˆpendingï¼‰è¿™ä¸ªä»»åŠ¡ï¼Œç„¶ååœ¨å¼‚æ­¥ä»»åŠ¡è¿”å›ç»“æœçš„æ—¶å€™å†æ ¹æ®ä¸€å®šè§„åˆ™å»æ‰§è¡Œç›¸åº”çš„å›è°ƒã€‚</p>\n<p>å•çº¿ç¨‹æ˜¯å¿…è¦çš„ï¼Œä¹Ÿæ˜¯javascriptè¿™é—¨è¯­è¨€çš„åŸºçŸ³ï¼ŒåŸå› ä¹‹ä¸€åœ¨å…¶æœ€åˆä¹Ÿæ˜¯æœ€ä¸»è¦çš„æ‰§è¡Œç¯å¢ƒâ€”â€”æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå„ç§å„æ ·çš„domæ“ä½œã€‚è¯•æƒ³ä¸€ä¸‹ å¦‚æœjavascriptæ˜¯å¤šçº¿ç¨‹çš„ï¼Œé‚£ä¹ˆå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹domè¿›è¡Œä¸€é¡¹æ“ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªå‘å…¶æ·»åŠ äº‹ä»¶ï¼Œè€Œå¦ä¸€ä¸ªåˆ é™¤äº†è¿™ä¸ªdomï¼Œæ­¤æ—¶è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå› æ­¤ï¼Œä¸ºäº†ä¿è¯ä¸ä¼š å‘ç”Ÿç±»ä¼¼äºè¿™ä¸ªä¾‹å­ä¸­çš„æƒ…æ™¯ï¼Œjavascripté€‰æ‹©åªç”¨ä¸€ä¸ªä¸»çº¿ç¨‹æ¥æ‰§è¡Œä»£ç ï¼Œè¿™æ ·å°±ä¿è¯äº†ç¨‹åºæ‰§è¡Œçš„ä¸€è‡´æ€§ã€‚</p>\n<p>å½“ç„¶ï¼Œç°å¦‚ä»Šäººä»¬ä¹Ÿæ„è¯†åˆ°ï¼Œå•çº¿ç¨‹åœ¨ä¿è¯äº†æ‰§è¡Œé¡ºåºçš„åŒæ—¶ä¹Ÿé™åˆ¶äº†javascriptçš„æ•ˆç‡ï¼Œå› æ­¤å¼€å‘å‡ºäº†web workeræŠ€æœ¯ã€‚è¿™é¡¹æŠ€æœ¯å·ç§°è®©javascriptæˆä¸ºä¸€é—¨å¤šçº¿ç¨‹è¯­è¨€ã€‚</p>\n<p>ç„¶è€Œï¼Œä½¿ç”¨web workeræŠ€æœ¯å¼€çš„å¤šçº¿ç¨‹æœ‰ç€è¯¸å¤šé™åˆ¶ï¼Œä¾‹å¦‚ï¼šæ‰€æœ‰æ–°çº¿ç¨‹éƒ½å—ä¸»çº¿ç¨‹çš„å®Œå…¨æ§åˆ¶ï¼Œä¸èƒ½ç‹¬ç«‹æ‰§è¡Œã€‚è¿™æ„å‘³ç€è¿™äº›â€œçº¿ç¨‹â€ å®é™…ä¸Šåº”å±äºä¸»çº¿ç¨‹çš„å­çº¿ç¨‹ã€‚å¦å¤–ï¼Œè¿™äº›å­çº¿ç¨‹å¹¶æ²¡æœ‰æ‰§è¡ŒI/Oæ“ä½œçš„æƒé™ï¼Œåªèƒ½ä¸ºä¸»çº¿ç¨‹åˆ†æ‹…ä¸€äº›è¯¸å¦‚è®¡ç®—ç­‰ä»»åŠ¡ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è®²è¿™äº›çº¿ç¨‹å¹¶æ²¡æœ‰å®Œæ•´çš„åŠŸèƒ½ï¼Œä¹Ÿå› æ­¤è¿™é¡¹æŠ€æœ¯å¹¶éæ”¹å˜äº†javascriptè¯­è¨€çš„å•çº¿ç¨‹æœ¬è´¨ã€‚</p>\n<p>å¯ä»¥é¢„è§ï¼Œæœªæ¥çš„javascriptä¹Ÿä¼šä¸€ç›´æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ã€‚</p>\n<p>è¯è¯´å›æ¥ï¼Œå‰é¢æåˆ°javascriptçš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯â€œéé˜»å¡â€ï¼Œé‚£ä¹ˆjavascriptå¼•æ“åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„è¿™ä¸€ç‚¹å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä»Šå¤©è¿™ç¯‡æ–‡ç« çš„ä¸»è§’â€”â€”event loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚</p>\n<p><em>æ³¨ï¼šè™½ç„¶nodejsä¸­çš„ä¹Ÿå­˜åœ¨ä¸ä¼ ç»Ÿæµè§ˆå™¨ç¯å¢ƒä¸‹çš„ç›¸ä¼¼çš„äº‹ä»¶å¾ªç¯ã€‚ç„¶è€Œä¸¤è€…é—´å´æœ‰ç€è¯¸å¤šä¸åŒï¼Œæ•…æŠŠä¸¤è€…åˆ†å¼€ï¼Œå•ç‹¬è§£é‡Šã€‚</em></p>\n<h2 id=\"æ­£æ–‡\"><a href=\"#æ­£æ–‡\" class=\"headerlink\" title=\"æ­£æ–‡\"></a>æ­£æ–‡</h2><h2 id=\"æµè§ˆå™¨ç¯å¢ƒä¸‹jså¼•æ“çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\"><a href=\"#æµè§ˆå™¨ç¯å¢ƒä¸‹jså¼•æ“çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\" class=\"headerlink\" title=\"æµè§ˆå™¨ç¯å¢ƒä¸‹jså¼•æ“çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\"></a><strong>æµè§ˆå™¨ç¯å¢ƒä¸‹jså¼•æ“çš„äº‹ä»¶å¾ªç¯æœºåˆ¶</strong></h2><h2 id=\"1-æ‰§è¡Œæ ˆä¸äº‹ä»¶é˜Ÿåˆ—\"><a href=\"#1-æ‰§è¡Œæ ˆä¸äº‹ä»¶é˜Ÿåˆ—\" class=\"headerlink\" title=\"1.æ‰§è¡Œæ ˆä¸äº‹ä»¶é˜Ÿåˆ—\"></a><strong>1.æ‰§è¡Œæ ˆä¸äº‹ä»¶é˜Ÿåˆ—</strong></h2><p>å½“javascriptä»£ç æ‰§è¡Œçš„æ—¶å€™ä¼šå°†ä¸åŒçš„å˜é‡å­˜äºå†…å­˜ä¸­çš„ä¸åŒä½ç½®ï¼šå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰ä¸­æ¥åŠ ä»¥åŒºåˆ†ã€‚å…¶ä¸­ï¼Œå †é‡Œå­˜æ”¾ç€ä¸€äº›å¯¹è±¡ã€‚è€Œæ ˆä¸­åˆ™å­˜æ”¾ç€ä¸€äº›åŸºç¡€ç±»å‹å˜é‡ä»¥åŠå¯¹è±¡çš„æŒ‡é’ˆã€‚ ä½†æ˜¯æˆ‘ä»¬è¿™é‡Œè¯´çš„æ‰§è¡Œæ ˆå’Œä¸Šé¢è¿™ä¸ªæ ˆçš„æ„ä¹‰å´æœ‰äº›ä¸åŒã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œjsä¼šç”Ÿæˆä¸€ä¸ªä¸è¿™ä¸ªæ–¹æ³•å¯¹åº”çš„æ‰§è¡Œç¯å¢ƒï¼ˆcontextï¼‰ï¼Œåˆå«æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸­å­˜åœ¨ç€è¿™ä¸ªæ–¹æ³•çš„ç§æœ‰ä½œç”¨åŸŸï¼Œä¸Šå±‚ä½œç”¨åŸŸçš„æŒ‡å‘ï¼Œæ–¹æ³•çš„å‚æ•°ï¼Œè¿™ä¸ªä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ä»¥åŠè¿™ä¸ªä½œç”¨åŸŸçš„thiså¯¹è±¡ã€‚ è€Œå½“ä¸€ç³»åˆ—æ–¹æ³•è¢«ä¾æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œå› ä¸ºjsæ˜¯å•çº¿ç¨‹çš„ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œäºæ˜¯è¿™äº›æ–¹æ³•è¢«æ’é˜Ÿåœ¨ä¸€ä¸ªå•ç‹¬çš„åœ°æ–¹ã€‚è¿™ä¸ªåœ°æ–¹è¢«ç§°ä¸ºæ‰§è¡Œæ ˆã€‚</p>\n<p>å½“ä¸€ä¸ªè„šæœ¬ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œjså¼•æ“ä¼šè§£æè¿™æ®µä»£ç ï¼Œå¹¶å°†å…¶ä¸­çš„åŒæ­¥ä»£ç æŒ‰ç…§æ‰§è¡Œé¡ºåºåŠ å…¥æ‰§è¡Œæ ˆä¸­ï¼Œç„¶åä»å¤´å¼€å§‹æ‰§è¡Œã€‚å¦‚æœå½“å‰æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆjsä¼šå‘æ‰§è¡Œæ ˆä¸­æ·»åŠ è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œç¯å¢ƒï¼Œç„¶åè¿›å…¥è¿™ä¸ªæ‰§è¡Œç¯å¢ƒç»§ç»­æ‰§è¡Œå…¶ä¸­çš„ä»£ç ã€‚å½“è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸­çš„ä»£ç  æ‰§è¡Œå®Œæ¯•å¹¶è¿”å›ç»“æœåï¼Œjsä¼šé€€å‡ºè¿™ä¸ªæ‰§è¡Œç¯å¢ƒå¹¶æŠŠè¿™ä¸ªæ‰§è¡Œç¯å¢ƒé”€æ¯ï¼Œå›åˆ°ä¸Šä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œç¯å¢ƒã€‚ã€‚è¿™ä¸ªè¿‡ç¨‹åå¤è¿›è¡Œï¼Œç›´åˆ°æ‰§è¡Œæ ˆä¸­çš„ä»£ç å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</p>\n<p>ä¸‹é¢è¿™ä¸ªå›¾ç‰‡éå¸¸ç›´è§‚çš„å±•ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ï¼Œå…¶ä¸­çš„globalå°±æ˜¯åˆæ¬¡è¿è¡Œè„šæœ¬æ—¶å‘æ‰§è¡Œæ ˆä¸­åŠ å…¥çš„ä»£ç ï¼š</p>\n<p><img data-src=\"https://pic2.zhimg.com/v2-2f761eb83b50f53d741e6aa1f15a9db1_b.jpg\" alt=\"img\"></p>\n<p>ä»å›¾ç‰‡å¯çŸ¥ï¼Œä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¼šå‘æ‰§è¡Œæ ˆä¸­åŠ å…¥è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸­è¿˜å¯ä»¥è°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œç”šè‡³æ˜¯è‡ªå·±ï¼Œå…¶ç»“æœä¸è¿‡æ˜¯åœ¨æ‰§è¡Œæ ˆä¸­å†æ·»åŠ ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ˜¯æ— é™è¿›è¡Œä¸‹å»çš„ï¼Œé™¤éå‘ç”Ÿäº†æ ˆæº¢å‡ºï¼Œå³è¶…è¿‡äº†æ‰€èƒ½ä½¿ç”¨å†…å­˜çš„æœ€å¤§å€¼ã€‚</p>\n<p>ä»¥ä¸Šçš„è¿‡ç¨‹è¯´çš„éƒ½æ˜¯åŒæ­¥ä»£ç çš„æ‰§è¡Œã€‚é‚£ä¹ˆå½“ä¸€ä¸ªå¼‚æ­¥ä»£ç ï¼ˆå¦‚å‘é€ajaxè¯·æ±‚æ•°æ®ï¼‰æ‰§è¡Œåä¼šå¦‚ä½•å‘¢ï¼Ÿå‰æ–‡æè¿‡ï¼Œjsçš„å¦ä¸€å¤§ç‰¹ç‚¹æ˜¯éé˜»å¡ï¼Œå®ç°è¿™ä¸€ç‚¹çš„å…³é”®åœ¨äºä¸‹é¢è¦è¯´çš„è¿™é¡¹æœºåˆ¶â€”â€”äº‹ä»¶é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ã€‚</p>\n<p>jså¼•æ“é‡åˆ°ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶åå¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šå°†è¿™ä¸ªäº‹ä»¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚å½“ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶è¿”å›ç»“æœåï¼Œjsä¼šå°†è¿™ä¸ªäº‹ä»¶åŠ å…¥ä¸å½“å‰æ‰§è¡Œæ ˆä¸åŒçš„å¦ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºäº‹ä»¶é˜Ÿåˆ—ã€‚è¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸ä¼šç«‹åˆ»æ‰§è¡Œå…¶å›è°ƒï¼Œè€Œæ˜¯ç­‰å¾…å½“å‰æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œ ä¸»çº¿ç¨‹å¤„äºé—²ç½®çŠ¶æ€æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šå»æŸ¥æ‰¾äº‹ä»¶é˜Ÿåˆ—æ˜¯å¦æœ‰ä»»åŠ¡ã€‚å¦‚æœæœ‰ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹ä¼šä»ä¸­å–å‡ºæ’åœ¨ç¬¬ä¸€ä½çš„äº‹ä»¶ï¼Œå¹¶æŠŠè¿™ä¸ªäº‹ä»¶å¯¹åº”çš„å›è°ƒæ”¾å…¥æ‰§è¡Œæ ˆä¸­ï¼Œç„¶åæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç â€¦ï¼Œå¦‚æ­¤åå¤ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªæ— é™çš„å¾ªç¯ã€‚è¿™å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºâ€œäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€çš„åŸå› ã€‚</p>\n<p>è¿™é‡Œè¿˜æœ‰ä¸€å¼ å›¾æ¥å±•ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼š</p>\n<p><img data-src=\"https://pic4.zhimg.com/80/v2-da078fa3eadf3db4bf455904ae06f84b_720w.jpg\" alt=\"img\"></p>\n<p>å›¾ä¸­çš„stackè¡¨ç¤ºæˆ‘ä»¬æ‰€è¯´çš„æ‰§è¡Œæ ˆï¼Œweb apisåˆ™æ˜¯ä»£è¡¨ä¸€äº›å¼‚æ­¥äº‹ä»¶ï¼Œè€Œcallback queueå³äº‹ä»¶é˜Ÿåˆ—ã€‚</p>\n<h2 id=\"2-macro-taskä¸micro-task\"><a href=\"#2-macro-taskä¸micro-task\" class=\"headerlink\" title=\"2.macro taskä¸micro task\"></a><strong>2.macro taskä¸micro task</strong></h2><p>ä»¥ä¸Šçš„äº‹ä»¶å¾ªç¯è¿‡ç¨‹æ˜¯ä¸€ä¸ªå®è§‚çš„è¡¨è¿°ï¼Œå®é™…ä¸Šå› ä¸ºå¼‚æ­¥ä»»åŠ¡ä¹‹é—´å¹¶ä¸ç›¸åŒï¼Œå› æ­¤ä»–ä»¬çš„æ‰§è¡Œä¼˜å…ˆçº§ä¹Ÿæœ‰åŒºåˆ«ã€‚ä¸åŒçš„å¼‚æ­¥ä»»åŠ¡è¢«åˆ†ä¸ºä¸¤ç±»ï¼šå¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰å’Œå®ä»»åŠ¡ï¼ˆmacro taskï¼‰ã€‚</p>\n<p>ä»¥ä¸‹äº‹ä»¶å±äºå®ä»»åŠ¡ï¼š</p>\n<ul>\n<li><code>setInterval()</code></li>\n<li><code>setTimeout()</code></li>\n</ul>\n<p>ä»¥ä¸‹äº‹ä»¶å±äºå¾®ä»»åŠ¡</p>\n<ul>\n<li><code>new Promise()</code></li>\n<li><code>new MutaionObserver()</code></li>\n</ul>\n<p>å‰é¢æˆ‘ä»¬ä»‹ç»è¿‡ï¼Œåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼Œå¼‚æ­¥äº‹ä»¶è¿”å›ç»“æœåä¼šè¢«æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ç„¶è€Œï¼Œæ ¹æ®è¿™ä¸ªå¼‚æ­¥äº‹ä»¶çš„ç±»å‹ï¼Œè¿™ä¸ªäº‹ä»¶å®é™…ä¸Šä¼šè¢«å¯¹åº”çš„å®ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­å»ã€‚å¹¶ä¸”åœ¨å½“å‰æ‰§è¡Œæ ˆä¸ºç©ºçš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹ä¼š æŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦æœ‰äº‹ä»¶å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶å¹¶æŠŠå¯¹åº”çš„å›åˆ°åŠ å…¥å½“å‰æ‰§è¡Œæ ˆï¼›å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šä¾æ¬¡æ‰§è¡Œé˜Ÿåˆ—ä¸­äº‹ä»¶å¯¹åº”çš„å›è°ƒï¼Œç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œç„¶åå»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„ä¸€ä¸ªäº‹ä»¶ï¼ŒæŠŠå¯¹åº”çš„å›è°ƒåŠ å…¥å½“å‰æ‰§è¡Œæ ˆâ€¦å¦‚æ­¤åå¤ï¼Œè¿›å…¥å¾ªç¯ã€‚</p>\n<p>æˆ‘ä»¬åªéœ€è®°ä½<strong>å½“å½“å‰æ‰§è¡Œæ ˆæ‰§è¡Œå®Œæ¯•æ—¶ä¼šç«‹åˆ»å…ˆå¤„ç†æ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼Œç„¶åå†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªäº‹ä»¶ã€‚åŒä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œå¾®ä»»åŠ¡æ°¸è¿œåœ¨å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œ</strong>ã€‚</p>\n<p>è¿™æ ·å°±èƒ½è§£é‡Šä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">setTimeout(function () &#123;</span><br><span class=\"line\">    console.log(1);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">new Promise(function(resolve,reject)&#123;</span><br><span class=\"line\">    console.log(2)</span><br><span class=\"line\">    resolve(3)</span><br><span class=\"line\">&#125;).then(function(val)&#123;</span><br><span class=\"line\">    console.log(val);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>ç»“æœä¸ºï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">1 </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nodeç¯å¢ƒä¸‹çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\"><a href=\"#nodeç¯å¢ƒä¸‹çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\" class=\"headerlink\" title=\"nodeç¯å¢ƒä¸‹çš„äº‹ä»¶å¾ªç¯æœºåˆ¶\"></a><strong>nodeç¯å¢ƒä¸‹çš„äº‹ä»¶å¾ªç¯æœºåˆ¶</strong></h2><h2 id=\"1-ä¸æµè§ˆå™¨ç¯å¢ƒæœ‰ä½•ä¸åŒ\"><a href=\"#1-ä¸æµè§ˆå™¨ç¯å¢ƒæœ‰ä½•ä¸åŒ\" class=\"headerlink\" title=\"1.ä¸æµè§ˆå™¨ç¯å¢ƒæœ‰ä½•ä¸åŒ?\"></a><strong>1.ä¸æµè§ˆå™¨ç¯å¢ƒæœ‰ä½•ä¸åŒ?</strong></h2><p>åœ¨nodeä¸­ï¼Œäº‹ä»¶å¾ªç¯è¡¨ç°å‡ºçš„çŠ¶æ€ä¸æµè§ˆå™¨ä¸­å¤§è‡´ç›¸åŒã€‚ä¸åŒçš„æ˜¯nodeä¸­æœ‰ä¸€å¥—è‡ªå·±çš„æ¨¡å‹ã€‚nodeä¸­äº‹ä»¶å¾ªç¯çš„å®ç°æ˜¯ä¾é çš„libuvå¼•æ“ã€‚æˆ‘ä»¬çŸ¥é“nodeé€‰æ‹©chrome v8å¼•æ“ä½œä¸ºjsè§£é‡Šå™¨ï¼Œv8å¼•æ“å°†jsä»£ç åˆ†æåå»è°ƒç”¨å¯¹åº”çš„node apiï¼Œè€Œè¿™äº›apiæœ€ååˆ™ç”±libuvå¼•æ“é©±åŠ¨ï¼Œæ‰§è¡Œå¯¹åº”çš„ä»»åŠ¡ï¼Œå¹¶æŠŠä¸åŒçš„äº‹ä»¶æ”¾åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¸­ç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ å› æ­¤å®é™…ä¸Šnodeä¸­çš„äº‹ä»¶å¾ªç¯å­˜åœ¨äºlibuvå¼•æ“ä¸­ã€‚</p>\n<h2 id=\"2-äº‹ä»¶å¾ªç¯æ¨¡å‹\"><a href=\"#2-äº‹ä»¶å¾ªç¯æ¨¡å‹\" class=\"headerlink\" title=\"2.äº‹ä»¶å¾ªç¯æ¨¡å‹\"></a><strong>2.äº‹ä»¶å¾ªç¯æ¨¡å‹</strong></h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªlibuvå¼•æ“ä¸­çš„äº‹ä»¶å¾ªç¯çš„æ¨¡å‹:</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\"> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">â”Œâ”€&gt;â”‚        timers         â”‚</span><br><span class=\"line\">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class=\"line\">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">â”‚  â”‚     I/O callbacks     â”‚</span><br><span class=\"line\">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class=\"line\">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">â”‚  â”‚     idle, prepare     â”‚</span><br><span class=\"line\">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   incoming:   â”‚</span><br><span class=\"line\">â”‚  â”‚         poll          â”‚&lt;â”€â”€connectionsâ”€â”€â”€     â”‚</span><br><span class=\"line\">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   data, etc.  â”‚</span><br><span class=\"line\">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class=\"line\">â”‚  â”‚        check          â”‚</span><br><span class=\"line\">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class=\"line\">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class=\"line\">â””â”€â”€â”¤    close callbacks    â”‚</span><br><span class=\"line\">   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>\n\n<p><em>æ³¨ï¼šæ¨¡å‹ä¸­çš„æ¯ä¸€ä¸ªæ–¹å—ä»£è¡¨äº‹ä»¶å¾ªç¯çš„ä¸€ä¸ªé˜¶æ®µ</em></p>\n<p>è¿™ä¸ªæ¨¡å‹æ˜¯nodeå®˜ç½‘ä¸Šçš„ä¸€ç¯‡æ–‡ç« ä¸­ç»™å‡ºçš„ï¼Œæˆ‘ä¸‹é¢çš„è§£é‡Šä¹Ÿéƒ½æ¥æºäºè¿™ç¯‡æ–‡ç« ã€‚æˆ‘ä¼šåœ¨æ–‡æœ«æŠŠæ–‡ç« åœ°å€è´´å‡ºæ¥ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥äº²è‡ªä¸çœ‹çœ‹åŸæ–‡ã€‚</p>\n<h2 id=\"3-äº‹ä»¶å¾ªç¯å„é˜¶æ®µè¯¦è§£\"><a href=\"#3-äº‹ä»¶å¾ªç¯å„é˜¶æ®µè¯¦è§£\" class=\"headerlink\" title=\"3.äº‹ä»¶å¾ªç¯å„é˜¶æ®µè¯¦è§£\"></a><strong>3.äº‹ä»¶å¾ªç¯å„é˜¶æ®µè¯¦è§£</strong></h2><p>ä»ä¸Šé¢è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´åˆ†æå‡ºnodeä¸­çš„äº‹ä»¶å¾ªç¯çš„é¡ºåºï¼š</p>\n<p>å¤–éƒ¨è¾“å…¥æ•°æ®â€“&gt;è½®è¯¢é˜¶æ®µ(poll)â€“&gt;æ£€æŸ¥é˜¶æ®µ(check)â€“&gt;å…³é—­äº‹ä»¶å›è°ƒé˜¶æ®µ(close callback)â€“&gt;å®šæ—¶å™¨æ£€æµ‹é˜¶æ®µ(timer)â€“&gt;I/Oäº‹ä»¶å›è°ƒé˜¶æ®µ(I/O callbacks)â€“&gt;é—²ç½®é˜¶æ®µ(idle, prepare)â€“&gt;è½®è¯¢é˜¶æ®µâ€¦</p>\n<p>ä»¥ä¸Šå„é˜¶æ®µçš„åç§°æ˜¯æ ¹æ®æˆ‘ä¸ªäººç†è§£çš„ç¿»è¯‘ï¼Œä¸ºäº†é¿å…é”™è¯¯å’Œæ­§ä¹‰ï¼Œä¸‹é¢è§£é‡Šçš„æ—¶å€™ä¼šç”¨è‹±æ–‡æ¥è¡¨ç¤ºè¿™äº›é˜¶æ®µã€‚</p>\n<p>è¿™äº›é˜¶æ®µå¤§è‡´çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>timers: è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå®šæ—¶å™¨é˜Ÿåˆ—ä¸­çš„å›è°ƒå¦‚ <code>setTimeout()</code> å’Œ <code>setInterval()</code>ã€‚</li>\n<li>I/O callbacks: è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå‡ ä¹æ‰€æœ‰çš„å›è°ƒã€‚ä½†æ˜¯ä¸åŒ…æ‹¬closeäº‹ä»¶ï¼Œå®šæ—¶å™¨å’Œ<code>setImmediate()</code>çš„å›è°ƒã€‚</li>\n<li>idle, prepare: è¿™ä¸ªé˜¶æ®µä»…åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå¯ä»¥ä¸å¿…ç†ä¼šã€‚</li>\n<li>poll: ç­‰å¾…æ–°çš„I/Oäº‹ä»¶ï¼Œnodeåœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ä¼šé˜»å¡åœ¨è¿™é‡Œã€‚</li>\n<li>check: <code>setImmediate()</code>çš„å›è°ƒä¼šåœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œã€‚</li>\n<li>close callbacks: ä¾‹å¦‚<code>socket.on(&#39;close&#39;, ...)</code>è¿™ç§closeäº‹ä»¶çš„å›è°ƒã€‚</li>\n</ul>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥æŒ‰ç…§ä»£ç ç¬¬ä¸€æ¬¡è¿›å…¥libuvå¼•æ“åçš„é¡ºåºæ¥è¯¦ç»†è§£è¯´è¿™äº›é˜¶æ®µï¼š</p>\n<h2 id=\"pollé˜¶æ®µ\"><a href=\"#pollé˜¶æ®µ\" class=\"headerlink\" title=\"pollé˜¶æ®µ\"></a><strong>pollé˜¶æ®µ</strong></h2><p>å½“ä¸ªv8å¼•æ“å°†jsä»£ç è§£æåä¼ å…¥libuvå¼•æ“åï¼Œå¾ªç¯é¦–å…ˆè¿›å…¥pollé˜¶æ®µã€‚pollé˜¶æ®µçš„æ‰§è¡Œé€»è¾‘å¦‚ä¸‹ï¼š å…ˆæŸ¥çœ‹poll queueä¸­æ˜¯å¦æœ‰äº‹ä»¶ï¼Œæœ‰ä»»åŠ¡å°±æŒ‰å…ˆè¿›å…ˆå‡ºçš„é¡ºåºä¾æ¬¡æ‰§è¡Œå›è°ƒã€‚ å½“queueä¸ºç©ºæ—¶ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰setImmediate()çš„callbackï¼Œå¦‚æœæœ‰å°±è¿›å…¥checké˜¶æ®µæ‰§è¡Œè¿™äº›callbackã€‚ä½†åŒæ—¶ä¹Ÿä¼šæ£€æŸ¥æ˜¯å¦æœ‰åˆ°æœŸçš„timerï¼Œå¦‚æœæœ‰ï¼Œå°±æŠŠè¿™äº›åˆ°æœŸçš„timerçš„callbackæŒ‰ç…§è°ƒç”¨é¡ºåºæ”¾åˆ°timer queueä¸­ï¼Œä¹‹åå¾ªç¯ä¼šè¿›å…¥timeré˜¶æ®µæ‰§è¡Œqueueä¸­çš„ callbackã€‚ è¿™ä¸¤è€…çš„é¡ºåºæ˜¯ä¸å›ºå®šçš„ï¼Œæ”¶åˆ°ä»£ç è¿è¡Œçš„ç¯å¢ƒçš„å½±å“ã€‚å¦‚æœä¸¤è€…çš„queueéƒ½æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆloopä¼šåœ¨pollé˜¶æ®µåœç•™ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªi/oäº‹ä»¶è¿”å›ï¼Œå¾ªç¯ä¼šè¿›å…¥i/o callbacké˜¶æ®µå¹¶ç«‹å³æ‰§è¡Œè¿™ä¸ªäº‹ä»¶çš„callbackã€‚</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œpollé˜¶æ®µåœ¨æ‰§è¡Œpoll queueä¸­çš„å›è°ƒæ—¶å®é™…ä¸Šä¸ä¼šæ— é™çš„æ‰§è¡Œä¸‹å»ã€‚æœ‰ä¸¤ç§æƒ…å†µpollé˜¶æ®µä¼šç»ˆæ­¢æ‰§è¡Œpoll queueä¸­çš„ä¸‹ä¸€ä¸ªå›è°ƒï¼š1.æ‰€æœ‰å›è°ƒæ‰§è¡Œå®Œæ¯•ã€‚2.æ‰§è¡Œæ•°è¶…è¿‡äº†nodeçš„é™åˆ¶ã€‚</p>\n<h2 id=\"checké˜¶æ®µ\"><a href=\"#checké˜¶æ®µ\" class=\"headerlink\" title=\"checké˜¶æ®µ\"></a><strong>checké˜¶æ®µ</strong></h2><p>checké˜¶æ®µä¸“é—¨ç”¨æ¥æ‰§è¡Œ<code>setImmediate()</code>æ–¹æ³•çš„å›è°ƒï¼Œå½“pollé˜¶æ®µè¿›å…¥ç©ºé—²çŠ¶æ€ï¼Œå¹¶ä¸”setImmediate queueä¸­æœ‰callbackæ—¶ï¼Œäº‹ä»¶å¾ªç¯è¿›å…¥è¿™ä¸ªé˜¶æ®µã€‚</p>\n<h2 id=\"closeé˜¶æ®µ\"><a href=\"#closeé˜¶æ®µ\" class=\"headerlink\" title=\"closeé˜¶æ®µ\"></a><strong>closeé˜¶æ®µ</strong></h2><p>å½“ä¸€ä¸ªsocketè¿æ¥æˆ–è€…ä¸€ä¸ªhandleè¢«çªç„¶å…³é—­æ—¶ï¼ˆä¾‹å¦‚è°ƒç”¨äº†<code>socket.destroy()</code>æ–¹æ³•ï¼‰ï¼Œcloseäº‹ä»¶ä¼šè¢«å‘é€åˆ°è¿™ä¸ªé˜¶æ®µæ‰§è¡Œå›è°ƒã€‚å¦åˆ™äº‹ä»¶ä¼šç”¨<code>process.nextTickï¼ˆï¼‰</code>æ–¹æ³•å‘é€å‡ºå»ã€‚</p>\n<h2 id=\"timeré˜¶æ®µ\"><a href=\"#timeré˜¶æ®µ\" class=\"headerlink\" title=\"timeré˜¶æ®µ\"></a><strong>timeré˜¶æ®µ</strong></h2><p>è¿™ä¸ªé˜¶æ®µä»¥å…ˆè¿›å…ˆå‡ºçš„æ–¹å¼æ‰§è¡Œæ‰€æœ‰åˆ°æœŸçš„timeråŠ å…¥timeré˜Ÿåˆ—é‡Œçš„callbackï¼Œä¸€ä¸ªtimer callbackæŒ‡å¾—æ˜¯ä¸€ä¸ªé€šè¿‡setTimeoutæˆ–è€…setIntervalå‡½æ•°è®¾ç½®çš„å›è°ƒå‡½æ•°ã€‚</p>\n<h2 id=\"I-O-callbacké˜¶æ®µ\"><a href=\"#I-O-callbacké˜¶æ®µ\" class=\"headerlink\" title=\"I/O callbacké˜¶æ®µ\"></a><strong>I/O callbacké˜¶æ®µ</strong></h2><p>å¦‚ä¸Šæ–‡æ‰€è¨€ï¼Œè¿™ä¸ªé˜¶æ®µä¸»è¦æ‰§è¡Œå¤§éƒ¨åˆ†I/Oäº‹ä»¶çš„å›è°ƒï¼ŒåŒ…æ‹¬ä¸€äº›ä¸ºæ“ä½œç³»ç»Ÿæ‰§è¡Œçš„å›è°ƒã€‚ä¾‹å¦‚ä¸€ä¸ªTCPè¿æ¥ç”Ÿé”™è¯¯æ—¶ï¼Œç³»ç»Ÿéœ€è¦æ‰§è¡Œå›è°ƒæ¥è·å¾—è¿™ä¸ªé”™è¯¯çš„æŠ¥å‘Šã€‚</p>\n<h2 id=\"4-process-nextTick-setTimeoutä¸setImmediateçš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯\"><a href=\"#4-process-nextTick-setTimeoutä¸setImmediateçš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯\" class=\"headerlink\" title=\"4.process.nextTick,setTimeoutä¸setImmediateçš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯\"></a><strong>4.process.nextTick,setTimeoutä¸setImmediateçš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯</strong></h2><p>åœ¨nodeä¸­æœ‰ä¸‰ä¸ªå¸¸ç”¨çš„ç”¨æ¥æ¨è¿Ÿä»»åŠ¡æ‰§è¡Œçš„æ–¹æ³•ï¼šprocess.nextTick,setTimeoutï¼ˆsetIntervalä¸ä¹‹ç›¸åŒï¼‰ä¸setImmediate</p>\n<p>è¿™ä¸‰è€…é—´å­˜åœ¨ç€ä¸€äº›éå¸¸ä¸åŒçš„åŒºåˆ«ï¼š</p>\n<h2 id=\"process-nextTick\"><a href=\"#process-nextTick\" class=\"headerlink\" title=\"process.nextTick()\"></a><strong>process.nextTick()</strong></h2><p>å°½ç®¡æ²¡æœ‰æåŠï¼Œä½†æ˜¯å®é™…ä¸Šnodeä¸­å­˜åœ¨ç€ä¸€ä¸ªç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œå³nextTick queueã€‚è¿™ä¸ªé˜Ÿåˆ—ä¸­çš„å›è°ƒæ‰§è¡Œè™½ç„¶æ²¡æœ‰è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªé˜¶æ®µï¼Œå½“æ—¶è¿™äº›äº‹ä»¶å´ä¼šåœ¨æ¯ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œå®Œæ¯•å‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µæ—¶ä¼˜å…ˆæ‰§è¡Œã€‚å½“äº‹ä»¶å¾ªç¯å‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µä¹‹å‰ï¼Œä¼šå…ˆæ£€æŸ¥nextTick queueä¸­æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆä¼šå…ˆæ¸…ç©ºè¿™ä¸ªé˜Ÿåˆ—ã€‚ä¸æ‰§è¡Œpoll queueä¸­çš„ä»»åŠ¡ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ“ä½œåœ¨é˜Ÿåˆ—æ¸…ç©ºå‰æ˜¯ä¸ä¼šåœæ­¢çš„ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œé”™è¯¯çš„ä½¿ç”¨<code>process.nextTick()</code>æ–¹æ³•ä¼šå¯¼è‡´nodeè¿›å…¥ä¸€ä¸ªæ­»å¾ªç¯ã€‚ã€‚ç›´åˆ°å†…å­˜æ³„æ¼ã€‚</p>\n<p>é‚£ä¹ˆåˆé€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿä¸‹é¢æœ‰ä¸€ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">const server = net.createServer(() =&gt; &#123;&#125;).listen(8080);</span><br><span class=\"line\"></span><br><span class=\"line\">server.on(&#x27;listening&#x27;, () =&gt; &#123;&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ä¸ªä¾‹å­ä¸­å½“ï¼Œå½“listenæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œé™¤éç«¯å£è¢«å ç”¨ï¼Œå¦åˆ™ä¼šç«‹åˆ»ç»‘å®šåœ¨å¯¹åº”çš„ç«¯å£ä¸Šã€‚è¿™æ„å‘³ç€æ­¤æ—¶è¿™ä¸ªç«¯å£å¯ä»¥ç«‹åˆ»è§¦å‘listeningäº‹ä»¶å¹¶æ‰§è¡Œå…¶å›è°ƒã€‚ç„¶è€Œï¼Œè¿™æ—¶å€™<code>on(&#39;listening)</code>è¿˜æ²¡æœ‰å°†callbackè®¾ç½®å¥½ï¼Œè‡ªç„¶æ²¡æœ‰callbackå¯ä»¥æ‰§è¡Œã€‚ä¸ºäº†é¿å…å‡ºç°è¿™ç§æƒ…å†µï¼Œnodeä¼šåœ¨listenäº‹ä»¶ä¸­ä½¿ç”¨<code>process.nextTick()</code>æ–¹æ³•ï¼Œç¡®ä¿äº‹ä»¶åœ¨å›è°ƒå‡½æ•°ç»‘å®šåè¢«è§¦å‘ã€‚</p>\n<h2 id=\"setTimeout-å’ŒsetImmediate\"><a href=\"#setTimeout-å’ŒsetImmediate\" class=\"headerlink\" title=\"setTimeout()å’ŒsetImmediate()\"></a><strong>setTimeout()å’ŒsetImmediate()</strong></h2><p>åœ¨ä¸‰ä¸ªæ–¹æ³•ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æœ€å®¹æ˜“è¢«å¼„æ··ã€‚å®é™…ä¸Šï¼ŒæŸäº›æƒ…å†µä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„è¡¨ç°ä¹Ÿéå¸¸ç›¸ä¼¼ã€‚ç„¶è€Œå®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„æ„ä¹‰å´å¤§ä¸ºä¸åŒã€‚</p>\n<p><code>setTimeout()</code>æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªå›è°ƒï¼Œå¹¶ä¸”å¸Œæœ›è¿™ä¸ªå›è°ƒåœ¨æˆ‘ä»¬æ‰€æŒ‡å®šçš„æ—¶é—´é—´éš”åç¬¬ä¸€æ—¶é—´å»æ‰§è¡Œã€‚æ³¨æ„è¿™ä¸ªâ€œç¬¬ä¸€æ—¶é—´æ‰§è¡Œâ€ï¼Œè¿™æ„å‘³ç€ï¼Œå—åˆ°æ“ä½œç³»ç»Ÿå’Œå½“å‰æ‰§è¡Œä»»åŠ¡çš„è¯¸å¤šå½±å“ï¼Œè¯¥å›è°ƒå¹¶ä¸ä¼šåœ¨æˆ‘ä»¬é¢„æœŸçš„æ—¶é—´é—´éš”åç²¾å‡†çš„æ‰§è¡Œã€‚æ‰§è¡Œçš„æ—¶é—´å­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿå’Œè¯¯å·®ï¼Œè¿™æ˜¯ä¸å¯é¿å…çš„ã€‚nodeä¼šåœ¨å¯ä»¥æ‰§è¡Œtimerå›è°ƒçš„ç¬¬ä¸€æ—¶é—´å»æ‰§è¡Œä½ æ‰€è®¾å®šçš„ä»»åŠ¡ã€‚</p>\n<p><code>setImmediate()</code>æ–¹æ³•ä»æ„ä¹‰ä¸Šå°†æ˜¯ç«‹åˆ»æ‰§è¡Œçš„æ„æ€ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒå´æ˜¯åœ¨ä¸€ä¸ªå›ºå®šçš„é˜¶æ®µæ‰ä¼šæ‰§è¡Œå›è°ƒï¼Œå³pollé˜¶æ®µä¹‹åã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸ªåå­—çš„æ„ä¹‰å’Œä¹‹å‰æåˆ°è¿‡çš„<code>process.nextTick()</code>æ–¹æ³•æ‰æ˜¯æœ€åŒ¹é…çš„ã€‚nodeçš„å¼€å‘è€…ä»¬ä¹Ÿæ¸…æ¥šè¿™ä¸¤ä¸ªæ–¹æ³•çš„å‘½åä¸Šå­˜åœ¨ä¸€å®šçš„æ··æ·†ï¼Œä»–ä»¬è¡¨ç¤ºä¸ä¼šæŠŠè¿™ä¸¤ä¸ªæ–¹æ³•çš„åå­—è°ƒæ¢è¿‡æ¥â€”å› ä¸ºæœ‰å¤§é‡çš„nodeç¨‹åºä½¿ç”¨ç€è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè°ƒæ¢å‘½åæ‰€å¸¦æ¥çš„å¥½å¤„ä¸å®ƒçš„å½±å“ç›¸æ¯”ä¸å€¼ä¸€æã€‚</p>\n<p><code>setTimeout()</code>å’Œä¸è®¾ç½®æ—¶é—´é—´éš”çš„<code>setImmediate()</code>è¡¨ç°ä¸ŠåŠå…¶ç›¸ä¼¼ã€‚çŒœçŒœä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">setTimeout(() =&gt; &#123;</span><br><span class=\"line\">    console.log(&#x27;timeout&#x27;);</span><br><span class=\"line\">&#125;, 0);</span><br><span class=\"line\"></span><br><span class=\"line\">setImmediate(() =&gt; &#123;</span><br><span class=\"line\">    console.log(&#x27;immediate&#x27;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å®é™…ä¸Šï¼Œç­”æ¡ˆæ˜¯ä¸ä¸€å®šã€‚æ²¡é”™ï¼Œå°±è¿nodeçš„å¼€å‘è€…éƒ½æ— æ³•å‡†ç¡®çš„åˆ¤æ–­è¿™ä¸¤è€…çš„é¡ºåºè°å‰è°åã€‚è¿™å–å†³äºè¿™æ®µä»£ç çš„è¿è¡Œç¯å¢ƒã€‚è¿è¡Œç¯å¢ƒä¸­çš„å„ç§å¤æ‚çš„æƒ…å†µä¼šå¯¼è‡´åœ¨åŒæ­¥é˜Ÿåˆ—é‡Œä¸¤ä¸ªæ–¹æ³•çš„é¡ºåºéšæœºå†³å®šã€‚ä½†æ˜¯ï¼Œåœ¨ä¸€ç§æƒ…å†µä¸‹å¯ä»¥å‡†ç¡®åˆ¤æ–­ä¸¤ä¸ªæ–¹æ³•å›è°ƒçš„æ‰§è¡Œé¡ºåºï¼Œé‚£å°±æ˜¯åœ¨ä¸€ä¸ªI/Oäº‹ä»¶çš„å›è°ƒä¸­ã€‚ä¸‹é¢è¿™æ®µä»£ç çš„é¡ºåºæ°¸è¿œæ˜¯å›ºå®šçš„ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">const fs = require(&#x27;fs&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">fs.readFile(__filename, () =&gt; &#123;</span><br><span class=\"line\">    setTimeout(() =&gt; &#123;</span><br><span class=\"line\">        console.log(&#x27;timeout&#x27;);</span><br><span class=\"line\">    &#125;, 0);</span><br><span class=\"line\">    setImmediate(() =&gt; &#123;</span><br><span class=\"line\">        console.log(&#x27;immediate&#x27;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç­”æ¡ˆæ°¸è¿œæ˜¯ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">immediate</span><br><span class=\"line\">timeout</span><br></pre></td></tr></table></figure>\n\n<p>å› ä¸ºåœ¨I/Oäº‹ä»¶çš„å›è°ƒä¸­ï¼ŒsetImmediateæ–¹æ³•çš„å›è°ƒæ°¸è¿œåœ¨timerçš„å›è°ƒå‰æ‰§è¡Œã€‚</p>\n<p><strong>å°¾å£°</strong></p>\n<p>javascritçš„äº‹ä»¶å¾ªç¯æ˜¯è¿™é—¨è¯­è¨€ä¸­éå¸¸é‡è¦ä¸”åŸºç¡€çš„æ¦‚å¿µã€‚æ¸…æ¥šçš„äº†è§£äº†äº‹ä»¶å¾ªç¯çš„æ‰§è¡Œé¡ºåºå’Œæ¯ä¸€ä¸ªé˜¶æ®µçš„ç‰¹ç‚¹ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬å¯¹ä¸€æ®µå¼‚æ­¥ä»£ç çš„æ‰§è¡Œé¡ºåºæœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ï¼Œä»è€Œå‡å°‘ä»£ç è¿è¡Œçš„ä¸ç¡®å®šæ€§ã€‚åˆç†çš„ä½¿ç”¨å„ç§å»¶è¿Ÿäº‹ä»¶çš„æ–¹æ³•ï¼Œæœ‰åŠ©äºä»£ç æ›´å¥½çš„æŒ‰ç…§å…¶ä¼˜å…ˆçº§å»æ‰§è¡Œã€‚è¿™ç¯‡æ–‡ç« æœŸæœ›ç”¨æœ€æ˜“ç†è§£çš„æ–¹å¼å’Œè¯­è¨€å‡†ç¡®æè¿°äº‹ä»¶å¾ªç¯è¿™ä¸ªå¤æ‚è¿‡ç¨‹ï¼Œä½†ç”±äºä½œè€…è‡ªå·±æ°´å¹³æœ‰é™ï¼Œæ–‡ç« ä¸­éš¾å…å‡ºç°ç–æ¼ã€‚å¦‚æœæ‚¨å‘ç°äº†æ–‡ç« ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œæ¬¢è¿åœ¨ç•™è¨€ä¸­æå‡ºï¼Œæˆ‘ä¼šå°½é‡å›å¤è¿™äº›è¯„è®ºï¼ŒæŠŠé”™è¯¯æ›´æ­£ã€‚</p>\n<h1 id=\"16-Promise-åŸç†\"><a href=\"#16-Promise-åŸç†\" class=\"headerlink\" title=\"16.Promise åŸç†\"></a>16.Promise åŸç†</h1><p>Promise å¿…é¡»ä¸ºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼šç­‰å¾…æ€ï¼ˆPendingï¼‰ã€æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰å’Œæ‹’ç»æ€ï¼ˆRejectedï¼‰ã€‚ä¸€æ—¦Promise è¢« resolve æˆ– rejectï¼Œä¸èƒ½å†è¿ç§»è‡³å…¶ä»–ä»»ä½•çŠ¶æ€ï¼ˆå³çŠ¶æ€ immutableï¼‰ã€‚</p>\n<p>åŸºæœ¬è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>åˆå§‹åŒ– Promise çŠ¶æ€ï¼ˆpendingï¼‰</li>\n<li>ç«‹å³æ‰§è¡Œ Promise ä¸­ä¼ å…¥çš„ fn å‡½æ•°ï¼Œå°†Promise å†…éƒ¨ resolveã€reject å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ fn ï¼ŒæŒ‰äº‹ä»¶æœºåˆ¶æ—¶æœºå¤„ç†</li>\n<li>æ‰§è¡Œ then(..) æ³¨å†Œå›è°ƒå¤„ç†æ•°ç»„ï¼ˆthen æ–¹æ³•å¯è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ï¼‰</li>\n<li>Promiseé‡Œçš„å…³é”®æ˜¯è¦ä¿è¯ï¼Œthenæ–¹æ³•ä¼ å…¥çš„å‚æ•° onFulfilled å’Œ onRejectedï¼Œå¿…é¡»åœ¨thenæ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</li>\n</ol>\n<p><strong>çœŸæ­£çš„é“¾å¼Promiseæ˜¯æŒ‡åœ¨å½“å‰promiseè¾¾åˆ°fulfilledçŠ¶æ€åï¼Œå³å¼€å§‹è¿›è¡Œä¸‹ä¸€ä¸ªpromise.</strong></p>\n<h3 id=\"é“¾å¼è°ƒç”¨\"><a href=\"#é“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"é“¾å¼è°ƒç”¨\"></a>é“¾å¼è°ƒç”¨</h3><p>å…ˆä» Promise æ‰§è¡Œç»“æœçœ‹ä¸€ä¸‹ï¼Œæœ‰å¦‚ä¸‹ä¸€æ®µä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        resolve(&#123; test: 1 &#125;)</span><br><span class=\"line\">        resolve(&#123; test: 2 &#125;)</span><br><span class=\"line\">        reject(&#123; test: 2 &#125;)</span><br><span class=\"line\">    &#125;, 1000)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result1&#39;, data)</span><br><span class=\"line\">&#125;,(data1)&#x3D;&gt;&#123;</span><br><span class=\"line\">    console.log(&#39;result2&#39;,data1)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result3&#39;, data)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#x2F;&#x2F;result1 &#123; test: 1 &#125;</span><br><span class=\"line\">&#x2F;&#x2F;result3 undefined</span><br></pre></td></tr></table></figure>\n\n<p>æ˜¾ç„¶è¿™é‡Œè¾“å‡ºäº†ä¸åŒçš„ dataã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºå‡ ç‚¹ï¼š</p>\n<ol>\n<li>å¯è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œä¸”æ¯æ¬¡ then è¿”å›äº†æ–°çš„ Promise(2æ¬¡æ‰“å°ç»“æœä¸ä¸€è‡´ï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œæ‰“å°ç»“æœåº”è¯¥ä¸€è‡´ã€‚</li>\n<li>åªè¾“å‡ºç¬¬ä¸€æ¬¡ resolve çš„å†…å®¹ï¼Œreject çš„å†…å®¹æ²¡æœ‰è¾“å‡ºï¼Œå³ Promise æ˜¯æœ‰çŠ¶æ€ä¸”çŠ¶æ€åªå¯ä»¥ç”±pending -&gt; fulfilledæˆ– pending-&gt; rejected,æ˜¯ä¸å¯é€†çš„ã€‚</li>\n<li>then ä¸­è¿”å›äº†æ–°çš„ Promise,ä½†æ˜¯thenä¸­æ³¨å†Œçš„å›è°ƒä»ç„¶æ˜¯å±äºä¸Šä¸€ä¸ª Promise çš„ã€‚</li>\n</ol>\n<p>åŸºäºä»¥ä¸Šå‡ ç‚¹ï¼Œæˆ‘ä»¬å…ˆå†™ä¸ªåŸºäº <a href=\"https://promisesaplus.com/\">PromiseA+</a> è§„èŒƒçš„åªå« resolve æ–¹æ³•çš„ Promise æ¨¡å‹:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    let state &#x3D; &#39;pending&#39;;</span><br><span class=\"line\">    let value &#x3D; null;</span><br><span class=\"line\">    const callbacks &#x3D; [];</span><br><span class=\"line\"></span><br><span class=\"line\">    this.then &#x3D; function (onFulfilled)&#123;</span><br><span class=\"line\">        return new Promise((resolve, reject)&#x3D;&gt;&#123;</span><br><span class=\"line\">            handle(&#123; &#x2F;&#x2F;æ¡¥æ¢ï¼Œå°†æ–° Promise çš„ resolve æ–¹æ³•ï¼Œæ”¾åˆ°å‰ä¸€ä¸ª promise çš„å›è°ƒå¯¹è±¡ä¸­</span><br><span class=\"line\">                onFulfilled, </span><br><span class=\"line\">                resolve</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function handle(callback)&#123;</span><br><span class=\"line\">        if(state &#x3D;&#x3D;&#x3D; &#39;pending&#39;)&#123;</span><br><span class=\"line\">            callbacks.push(callback)</span><br><span class=\"line\">            return;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        if(state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39;)&#123;</span><br><span class=\"line\">            if(!callback.onFulfilled)&#123;</span><br><span class=\"line\">                callback.resolve(value)</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            const ret &#x3D; callback.onFulfilled(value) &#x2F;&#x2F;å¤„ç†å›è°ƒ</span><br><span class=\"line\">            callback.resolve(ret) &#x2F;&#x2F;å¤„ç†ä¸‹ä¸€ä¸ª promise çš„resolve</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    function resolve(newValue)&#123;</span><br><span class=\"line\">        const fn &#x3D; ()&#x3D;&gt;&#123;</span><br><span class=\"line\">            if(state !&#x3D;&#x3D; &#39;pending&#39;)return</span><br><span class=\"line\"></span><br><span class=\"line\">            state &#x3D; &#39;fulfilled&#39;;</span><br><span class=\"line\">            value &#x3D; newValue</span><br><span class=\"line\">            handelCb()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        setTimeout(fn,0) &#x2F;&#x2F;åŸºäº PromiseA+ è§„èŒƒ</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    function handelCb()&#123;</span><br><span class=\"line\">        while(callbacks.length) &#123;</span><br><span class=\"line\">            const fulfiledFn &#x3D; callbacks.shift();</span><br><span class=\"line\">            handle(fulfiledFn);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    fn(resolve)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>è¿™ä¸ªæ¨¡å‹ç®€å•æ˜“æ‡‚ï¼Œè¿™é‡Œæœ€å…³é”®çš„ç‚¹å°±æ˜¯åœ¨ then ä¸­æ–°åˆ›å»ºçš„ Promiseï¼Œå®ƒçš„çŠ¶æ€å˜ä¸º fulfilled çš„èŠ‚ç‚¹æ˜¯åœ¨ä¸Šä¸€ä¸ª Promiseçš„å›è°ƒæ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ª Promise çš„çŠ¶æ€è¢« fulfilled ä¹‹åï¼Œä¼šæ‰§è¡Œå…¶å›è°ƒå‡½æ•°ï¼Œè€Œå›è°ƒå‡½æ•°è¿”å›çš„ç»“æœä¼šè¢«å½“ä½œ valueï¼Œè¿”å›ç»™ä¸‹ä¸€ä¸ª Promise(ä¹Ÿå°±æ˜¯then ä¸­äº§ç”Ÿçš„ Promise)ï¼ŒåŒæ—¶ä¸‹ä¸€ä¸ª Promiseçš„çŠ¶æ€ä¹Ÿä¼šè¢«æ”¹å˜(æ‰§è¡Œ resolve æˆ– reject)ï¼Œç„¶åå†å»æ‰§è¡Œå…¶å›è°ƒ,ä»¥æ­¤ç±»æ¨ä¸‹å»â€¦é“¾å¼è°ƒç”¨çš„æ•ˆåº”å°±å‡ºæ¥äº†ã€‚</strong></p>\n<p>ä½†æ˜¯å¦‚æœä»…ä»…æ˜¯ä¾‹å­ä¸­çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        resolve(&#123; test: 1 &#125;)</span><br><span class=\"line\">    &#125;, 1000)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result1&#39;, data)</span><br><span class=\"line\">    &#x2F;&#x2F;dosomething</span><br><span class=\"line\">    console.log(&#39;result3&#39;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#x2F;&#x2F;result1 &#123; test: 1 &#125;</span><br><span class=\"line\">&#x2F;&#x2F;result3</span><br></pre></td></tr></table></figure>\n\n<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¸¸ç”¨çš„é“¾å¼è°ƒç”¨ï¼Œæ˜¯ç”¨åœ¨å¼‚æ­¥å›è°ƒä¸­ï¼Œä»¥è§£å†³â€å›è°ƒåœ°ç‹±â€çš„é—®é¢˜ã€‚å¦‚ä¸‹ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">  setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">    resolve(&#123; test: 1 &#125;)</span><br><span class=\"line\">  &#125;, 1000)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">  console.log(&#39;result1&#39;, data)</span><br><span class=\"line\">  &#x2F;&#x2F;dosomething</span><br><span class=\"line\">  return test()</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">  console.log(&#39;result2&#39;, data)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">function test(id) &#123;</span><br><span class=\"line\">  return new Promise(((resolve) &#x3D;&gt; &#123;</span><br><span class=\"line\">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">      resolve(&#123; test: 2 &#125;)</span><br><span class=\"line\">    &#125;, 5000)</span><br><span class=\"line\">  &#125;))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F;åŸºäºç¬¬ä¸€ä¸ª Promise æ¨¡å‹ï¼Œæ‰§è¡Œåçš„è¾“å‡º</span><br><span class=\"line\">&#x2F;&#x2F;result1 &#123; test: 1 &#125;</span><br><span class=\"line\">&#x2F;&#x2F;result2 Promise &#123;then: Æ’&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç”¨ä¸Šé¢çš„ Promise æ¨¡å‹ï¼Œå¾—åˆ°çš„ç»“æœæ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è®¤çœŸçœ‹ä¸Šé¢çš„æ¨¡å‹ï¼Œæ‰§è¡Œ callback.resolve æ—¶ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ callback.onFulfilled æ‰§è¡Œå®Œæˆçš„è¿”å›ï¼Œæ˜¾ç„¶è¿™ä¸ªæµ‹è¯•ä¾‹å­è¿”å›çš„å°±æ˜¯ä¸€ä¸ª Promiseï¼Œè€Œæˆ‘ä»¬çš„ Promise æ¨¡å‹ä¸­çš„ resolve æ–¹æ³•å¹¶æ²¡æœ‰ç‰¹æ®Šå¤„ç†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°† resolve æ”¹ä¸€ä¸‹:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    function resolve(newValue)&#123;</span><br><span class=\"line\">        const fn &#x3D; ()&#x3D;&gt;&#123;</span><br><span class=\"line\">            if(state !&#x3D;&#x3D; &#39;pending&#39;)return</span><br><span class=\"line\"></span><br><span class=\"line\">            if(newValue &amp;&amp; (typeof newValue &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof newValue &#x3D;&#x3D;&#x3D; &#39;function&#39;))&#123;</span><br><span class=\"line\">                const &#123;then&#125; &#x3D; newValue</span><br><span class=\"line\">                if(typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;)&#123;</span><br><span class=\"line\">                    &#x2F;&#x2F; newValue ä¸ºæ–°äº§ç”Ÿçš„ Promise,æ­¤æ—¶resolveä¸ºä¸Šä¸ª promise çš„resolve</span><br><span class=\"line\">                    &#x2F;&#x2F;ç›¸å½“äºè°ƒç”¨äº†æ–°äº§ç”Ÿ Promise çš„thenæ–¹æ³•ï¼Œæ³¨å…¥äº†ä¸Šä¸ª promise çš„resolve ä¸ºå…¶å›è°ƒ</span><br><span class=\"line\">                    then.call(newValue,resolve)</span><br><span class=\"line\">                    return</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            state &#x3D; &#39;fulfilled&#39;;</span><br><span class=\"line\">            value &#x3D; newValue</span><br><span class=\"line\">            handelCb()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        setTimeout(fn,0)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå†æµ‹è¯•æˆ‘ä»¬çš„ä¾‹å­ï¼Œå°±å¾—åˆ°äº†æ­£ç¡®çš„ç»“æœï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        resolve(&#123; test: 1 &#125;)</span><br><span class=\"line\">    &#125;, 1000)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result1&#39;, data)</span><br><span class=\"line\">    &#x2F;&#x2F;dosomething</span><br><span class=\"line\">    return test()</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result2&#39;, data)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">function test(id) &#123;</span><br><span class=\"line\">    return new Promise(((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">        setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        resolve(&#123; test: 2 &#125;)</span><br><span class=\"line\">        &#125;, 5000)</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; result1 &#123; test: 1 &#125;</span><br><span class=\"line\">&#x2F;&#x2F; result2 &#123; test: 2 &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ˜¾ç„¶ï¼Œæ–°å¢çš„é€»è¾‘å°±æ˜¯é’ˆå¯¹ resolve å…¥å‚ä¸º Promise çš„æ—¶å€™çš„å¤„ç†ã€‚æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹ test é‡Œé¢åˆ›å»ºçš„ Promiseï¼Œå®ƒæ˜¯æ²¡æœ‰è°ƒç”¨ thenæ–¹æ³•çš„ã€‚ä»ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å·²ç»çŸ¥é“ Promise çš„å›è°ƒå‡½æ•°å°±æ˜¯é€šè¿‡è°ƒç”¨å…¶ then æ–¹æ³•æ³¨å†Œçš„ï¼Œå› æ­¤ test é‡Œé¢åˆ›å»ºçš„ Promise å…¶å›è°ƒå‡½æ•°ä¸ºç©ºã€‚</p>\n<p>æ˜¾ç„¶å¦‚æœæ²¡æœ‰å›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œ resolve çš„æ—¶å€™ï¼Œæ˜¯æ²¡åŠæ³•é“¾å¼ä¸‹å»çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨ä¸ºå…¶æ³¨å…¥å›è°ƒå‡½æ•°ã€‚</p>\n<p>æˆ‘ä»¬åªè¦æŠŠç¬¬ä¸€ä¸ª then ä¸­äº§ç”Ÿçš„ Promise çš„ resolve å‡½æ•°çš„æ‰§è¡Œï¼Œå»¶è¿Ÿåˆ° test é‡Œé¢çš„ Promise çš„çŠ¶æ€ä¸º onFulfilled çš„æ—¶å€™å†æ‰§è¡Œï¼Œé‚£ä¹ˆé“¾å¼å°±å¯ä»¥ç»§ç»­äº†ã€‚æ‰€ä»¥ï¼Œå½“ resolve å…¥å‚ä¸º Promise çš„æ—¶å€™ï¼Œè°ƒç”¨å…¶ then æ–¹æ³•ä¸ºå…¶æ³¨å…¥å›è°ƒå‡½æ•°ï¼Œè€Œæ³¨å…¥çš„æ˜¯å‰ä¸€ä¸ª Promise çš„ resolve æ–¹æ³•ï¼Œæ‰€ä»¥è¦ç”¨ call æ¥ç»‘å®š this çš„æŒ‡å‘ã€‚</p>\n<p>åŸºäºæ–°çš„ Promise æ¨¡å‹ï¼Œä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹äº§ç”Ÿçš„ Promise å®ä¾‹åŠå…¶å›è°ƒå‡½æ•°ï¼Œå¯ä»¥ç”¨çœ‹ä¸‹è¡¨ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Promise</th>\n<th>callback</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>P1</td>\n<td>[{onFulfilled:c1(ç¬¬ä¸€ä¸ªthenä¸­çš„fn),resolve:p2resolve}]</td>\n</tr>\n<tr>\n<td>P2 (P1 è°ƒç”¨ then æ—¶äº§ç”Ÿ)</td>\n<td>[{onFulfilled:c2(ç¬¬äºŒä¸ªthenä¸­çš„fn),resolve:p3resolve}]</td>\n</tr>\n<tr>\n<td>P3 (P2 è°ƒç”¨ then æ—¶äº§ç”Ÿ)</td>\n<td>[]</td>\n</tr>\n<tr>\n<td>P4 (æ‰§è¡Œc1ä¸­äº§ç”Ÿ[è°ƒç”¨ test ])</td>\n<td>[{onFulfilled:p2resolve,resolve:p5resolve}]</td>\n</tr>\n<tr>\n<td>P5 (è°ƒç”¨p2resolve æ—¶ï¼Œè¿›å…¥ then.call é€»è¾‘ä¸­äº§ç”Ÿ)</td>\n<td>[]</td>\n</tr>\n</tbody></table>\n<p>æœ‰äº†è¿™ä¸ªè¡¨æ ¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¸…æ™°çŸ¥é“å„ä¸ªå®ä¾‹ä¸­ callback æ‰§è¡Œçš„é¡ºåºæ˜¯ï¼š</p>\n<p>c1 -&gt; p2resolve -&gt; c2 -&gt; p3resolve -&gt; [] -&gt; p5resolve -&gt; []</p>\n<p>ä»¥ä¸Šå°±æ˜¯é“¾å¼è°ƒç”¨çš„åŸç†äº†ã€‚</p>\n<h3 id=\"reject\"><a href=\"#reject\" class=\"headerlink\" title=\"reject\"></a>reject</h3><p>ä¸‹é¢æˆ‘ä»¬å†æ¥è¡¥å…¨ reject çš„é€»è¾‘ã€‚åªéœ€è¦åœ¨æ³¨å†Œå›è°ƒã€çŠ¶æ€æ”¹å˜æ—¶åŠ ä¸Š reject çš„é€»è¾‘å³å¯ã€‚</p>\n<p>å®Œæ•´ä»£ç å¦‚ä¸‹:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    let state &#x3D; &#39;pending&#39;;</span><br><span class=\"line\">    let value &#x3D; null;</span><br><span class=\"line\">    const callbacks &#x3D; [];</span><br><span class=\"line\"></span><br><span class=\"line\">    this.then &#x3D; function (onFulfilled,onRejected)&#123;</span><br><span class=\"line\">        return new Promise((resolve, reject)&#x3D;&gt;&#123;</span><br><span class=\"line\">            handle(&#123;</span><br><span class=\"line\">                onFulfilled, </span><br><span class=\"line\">                onRejected,</span><br><span class=\"line\">                resolve, </span><br><span class=\"line\">                reject</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function handle(callback)&#123;</span><br><span class=\"line\">        if(state &#x3D;&#x3D;&#x3D; &#39;pending&#39;)&#123;</span><br><span class=\"line\">            callbacks.push(callback)</span><br><span class=\"line\">            return;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        const cb &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39; ? callback.onFulfilled : callback.onRejected;</span><br><span class=\"line\">        const next &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39; ? callback.resolve : callback.reject;</span><br><span class=\"line\"></span><br><span class=\"line\">        if(!cb)&#123;</span><br><span class=\"line\">            next(value)</span><br><span class=\"line\">            return;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        const ret &#x3D; cb(value)</span><br><span class=\"line\">        next(ret)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    function resolve(newValue)&#123;</span><br><span class=\"line\">        const fn &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">            if(state !&#x3D;&#x3D; &#39;pending&#39;)return</span><br><span class=\"line\"></span><br><span class=\"line\">            if(newValue &amp;&amp; (typeof newValue &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof newValue &#x3D;&#x3D;&#x3D; &#39;function&#39;))&#123;</span><br><span class=\"line\">                const &#123;then&#125; &#x3D; newValue</span><br><span class=\"line\">                if(typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;)&#123;</span><br><span class=\"line\">                    &#x2F;&#x2F; newValue ä¸ºæ–°äº§ç”Ÿçš„ Promise,æ­¤æ—¶resolveä¸ºä¸Šä¸ª promise çš„resolve</span><br><span class=\"line\">                    &#x2F;&#x2F;ç›¸å½“äºè°ƒç”¨äº†æ–°äº§ç”Ÿ Promise çš„thenæ–¹æ³•ï¼Œæ³¨å…¥äº†ä¸Šä¸ª promise çš„resolve ä¸ºå…¶å›è°ƒ</span><br><span class=\"line\">                    then.call(newValue,resolve, reject)</span><br><span class=\"line\">                    return</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            state &#x3D; &#39;fulfilled&#39;;</span><br><span class=\"line\">            value &#x3D; newValue</span><br><span class=\"line\">            handelCb()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        setTimeout(fn,0)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    function reject(error)&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        const fn &#x3D; ()&#x3D;&gt;&#123;</span><br><span class=\"line\">            if(state !&#x3D;&#x3D; &#39;pending&#39;)return</span><br><span class=\"line\"></span><br><span class=\"line\">            if(error &amp;&amp; (typeof error &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof error &#x3D;&#x3D;&#x3D; &#39;function&#39;))&#123;</span><br><span class=\"line\">                const &#123;then&#125; &#x3D; error</span><br><span class=\"line\">                if(typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;)&#123;</span><br><span class=\"line\">                    then.call(error,resolve, reject)</span><br><span class=\"line\">                    return</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            state &#x3D; &#39;rejected&#39;;</span><br><span class=\"line\">            value &#x3D; error</span><br><span class=\"line\">            handelCb()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        setTimeout(fn,0)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    function handelCb()&#123;</span><br><span class=\"line\">        while(callbacks.length) &#123;</span><br><span class=\"line\">            const fn &#x3D; callbacks.shift();</span><br><span class=\"line\">            handle(fn);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    fn(resolve, reject)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¼‚å¸¸å¤„ç†\"><a href=\"#å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å¼‚å¸¸å¤„ç†\"></a>å¼‚å¸¸å¤„ç†</h3><p>å¼‚å¸¸é€šå¸¸æ˜¯æŒ‡åœ¨æ‰§è¡ŒæˆåŠŸ/å¤±è´¥å›è°ƒæ—¶ä»£ç å‡ºé”™äº§ç”Ÿçš„é”™è¯¯ï¼Œå¯¹äºè¿™ç±»å¼‚å¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ try-catch æ¥æ•è·é”™è¯¯ï¼Œå¹¶å°† Promise è®¾ä¸º rejected çŠ¶æ€å³å¯ã€‚</p>\n<p>handleä»£ç æ”¹é€ å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function handle(callback)&#123;</span><br><span class=\"line\">    if(state &#x3D;&#x3D;&#x3D; &#39;pending&#39;)&#123;</span><br><span class=\"line\">        callbacks.push(callback)</span><br><span class=\"line\">        return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    const cb &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39; ? callback.onFulfilled : callback.onRejected;</span><br><span class=\"line\">    const next &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39;? callback.resolve : callback.reject;</span><br><span class=\"line\"></span><br><span class=\"line\">    if(!cb)&#123;</span><br><span class=\"line\">        next(value)</span><br><span class=\"line\">        return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">        const ret &#x3D; cb(value)</span><br><span class=\"line\">        next(ret)</span><br><span class=\"line\">    &#125; catch (e) &#123;</span><br><span class=\"line\">        callback.reject(e);</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å®é™…ä½¿ç”¨æ—¶ï¼Œå¸¸ä¹ æƒ¯æ³¨å†Œ catch æ–¹æ³•æ¥å¤„ç†é”™è¯¯ï¼Œä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">    setTimeout(() &#x3D;&gt; &#123;</span><br><span class=\"line\">        resolve(&#123; test: 1 &#125;)</span><br><span class=\"line\">    &#125;, 1000)</span><br><span class=\"line\">&#125;).then((data) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;result1&#39;, data)</span><br><span class=\"line\">    &#x2F;&#x2F;dosomething</span><br><span class=\"line\">    return test()</span><br><span class=\"line\">&#125;).catch((ex) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(&#39;error&#39;, ex)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>å®é™…ä¸Šï¼Œé”™è¯¯ä¹Ÿå¥½ï¼Œå¼‚å¸¸ä¹Ÿç½¢ï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡rejectå®ç°çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥é€šè¿‡ then ä¸­çš„é”™è¯¯å›è°ƒæ¥å¤„ç†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¢åŠ è¿™æ ·çš„ä¸€ä¸ª catch æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    this.then &#x3D; function (onFulfilled,onRejected)&#123;</span><br><span class=\"line\">        return new Promise((resolve, reject)&#x3D;&gt;&#123;</span><br><span class=\"line\">            handle(&#123;</span><br><span class=\"line\">                onFulfilled, </span><br><span class=\"line\">                onRejected,</span><br><span class=\"line\">                resolve, </span><br><span class=\"line\">                reject</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    this.catch &#x3D; function (onError)&#123;</span><br><span class=\"line\">        this.then(null,onError)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Finallyæ–¹æ³•\"><a href=\"#Finallyæ–¹æ³•\" class=\"headerlink\" title=\"Finallyæ–¹æ³•\"></a>Finallyæ–¹æ³•</h3><p>åœ¨å®é™…åº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ä¼šç¢°åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œä¸ç®¡Promiseæœ€åçš„çŠ¶æ€å¦‚ä½•ï¼Œéƒ½è¦æ‰§è¡Œä¸€äº›æœ€åçš„æ“ä½œã€‚æˆ‘ä»¬æŠŠè¿™äº›æ“ä½œæ”¾åˆ° finally ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ finally æ³¨å†Œçš„å‡½æ•°æ˜¯ä¸ Promise çš„çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ– Promise çš„æ‰§è¡Œç»“æœã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ finally çš„é€»è¾‘ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    this.catch &#x3D; function (onError)&#123;</span><br><span class=\"line\">        this.then(null,onError)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    this.finally &#x3D; function (onDone)&#123;</span><br><span class=\"line\">        this.then(onDone,onDone)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"resolve-æ–¹æ³•å’Œ-reject-æ–¹æ³•\"><a href=\"#resolve-æ–¹æ³•å’Œ-reject-æ–¹æ³•\" class=\"headerlink\" title=\"resolve æ–¹æ³•å’Œ reject æ–¹æ³•\"></a>resolve æ–¹æ³•å’Œ reject æ–¹æ³•</h3><p>å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Promise.resolve å’Œ Promise.reject æ–¹æ³•ï¼Œç”¨äºå°†äºå°†é Promise å®ä¾‹åŒ…è£…ä¸º Promise å®ä¾‹ã€‚å¦‚ä¸‹ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Promise.resolve(&#123;name:&#39;winty&#39;&#125;)</span><br><span class=\"line\">Promise.reject(&#123;name:&#39;winty&#39;&#125;)</span><br><span class=\"line\">&#x2F;&#x2F; ç­‰ä»·äº</span><br><span class=\"line\">new Promise(resolve &#x3D;&gt; resolve(&#123;name:&#39;winty&#39;&#125;))</span><br><span class=\"line\">new Promise((resolve,reject) &#x3D;&gt; reject(&#123;name:&#39;winty&#39;&#125;))</span><br></pre></td></tr></table></figure>\n\n<p>è¿™äº›æƒ…å†µä¸‹ï¼ŒPromise.resolve çš„å…¥å‚å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>\n<ul>\n<li>æ— å‚æ•° [ç›´æ¥è¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„ Promise å¯¹è±¡]</li>\n<li>æ™®é€šæ•°æ®å¯¹è±¡ [ç›´æ¥è¿”å›ä¸€ä¸ªresolvedçŠ¶æ€çš„ Promise å¯¹è±¡]</li>\n<li>ä¸€ä¸ªPromiseå®ä¾‹ [ç›´æ¥è¿”å›å½“å‰å®ä¾‹]</li>\n<li>ä¸€ä¸ªthenableå¯¹è±¡(thenableå¯¹è±¡æŒ‡çš„æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡) [è½¬ä¸º Promise å¯¹è±¡ï¼Œå¹¶ç«‹å³æ‰§è¡Œthenableå¯¹è±¡çš„thenæ–¹æ³•ã€‚]</li>\n</ul>\n<p>åŸºäºä»¥ä¸Šå‡ ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ª Promise.resolve æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    this.resolve &#x3D; function (value)&#123;</span><br><span class=\"line\">        if (value &amp;&amp; value instanceof Promise) &#123;</span><br><span class=\"line\">            return value;</span><br><span class=\"line\">        &#125; else if (value &amp;&amp; typeof value &#x3D;&#x3D;&#x3D; &#39;object&#39; &amp;&amp; typeof value.then &#x3D;&#x3D;&#x3D; &#39;function&#39;)&#123;</span><br><span class=\"line\">            let then &#x3D; value.then;</span><br><span class=\"line\">            return new Promise(resolve &#x3D;&gt; &#123;</span><br><span class=\"line\">                then(resolve);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125; else if (value) &#123;</span><br><span class=\"line\">            return new Promise(resolve &#x3D;&gt; resolve(value));</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            return new Promise(resolve &#x3D;&gt; resolve());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Promise.rejectä¸Promise.resolveç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºPromise.rejectå§‹ç»ˆè¿”å›ä¸€ä¸ªçŠ¶æ€çš„rejectedçš„Promiseå®ä¾‹ï¼Œè€ŒPromise.resolveçš„å‚æ•°å¦‚æœæ˜¯ä¸€ä¸ªPromiseå®ä¾‹çš„è¯ï¼Œè¿”å›çš„æ˜¯å‚æ•°å¯¹åº”çš„Promiseå®ä¾‹ï¼Œæ‰€ä»¥çŠ¶æ€ä¸ä¸€ å®šã€‚ å› æ­¤ï¼Œreject çš„å®ç°å°±ç®€å•å¤šäº†ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"> function Promise(fn)&#123; </span><br><span class=\"line\">     ...</span><br><span class=\"line\">     this.reject &#x3D; function (value)&#123;</span><br><span class=\"line\">         return new Promise(function(resolve, reject) &#123;</span><br><span class=\"line\">\treject(value);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     ...</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all\"></a>Promise.all</h3><p>å…¥å‚æ˜¯ä¸€ä¸ª Promise çš„å®ä¾‹æ•°ç»„ï¼Œç„¶åæ³¨å†Œä¸€ä¸ª then æ–¹æ³•ï¼Œç„¶åæ˜¯æ•°ç»„ä¸­çš„ Promise å®ä¾‹çš„çŠ¶æ€éƒ½è½¬ä¸º fulfilled ä¹‹ååˆ™æ‰§è¡Œ then æ–¹æ³•ã€‚è¿™é‡Œä¸»è¦å°±æ˜¯ä¸€ä¸ªè®¡æ•°é€»è¾‘ï¼Œæ¯å½“ä¸€ä¸ª Promise çš„çŠ¶æ€å˜ä¸º fulfilled ä¹‹åå°±ä¿å­˜è¯¥å®ä¾‹è¿”å›çš„æ•°æ®ï¼Œç„¶åå°†è®¡æ•°å‡ä¸€ï¼Œå½“è®¡æ•°å™¨å˜ä¸º 0 æ—¶ï¼Œä»£è¡¨æ•°ç»„ä¸­æ‰€æœ‰ Promise å®ä¾‹éƒ½æ‰§è¡Œå®Œæ¯•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    this.all &#x3D; function (arr)&#123;</span><br><span class=\"line\">        var args &#x3D; Array.prototype.slice.call(arr);</span><br><span class=\"line\">        return new Promise(function(resolve, reject) &#123;</span><br><span class=\"line\">        \t&#x2F;&#x2F; é•¿åº¦ä¸º0è¿”å›ç»“æœ</span><br><span class=\"line\">            if(args.length &#x3D;&#x3D;&#x3D; 0) return resolve([]);</span><br><span class=\"line\">            &#x2F;&#x2F; å‰©ä½™å‚æ•°æ•°ç»„é•¿åº¦</span><br><span class=\"line\">            var remaining &#x3D; args.length;</span><br><span class=\"line\">&#x2F;&#x2F; å‚æ•°å’Œå€¼</span><br><span class=\"line\">            function res(i, val) &#123;</span><br><span class=\"line\">                try &#123;</span><br><span class=\"line\">                    if(val &amp;&amp; (typeof val &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof val &#x3D;&#x3D;&#x3D; &#39;function&#39;)) &#123;</span><br><span class=\"line\">                        var then &#x3D; val.then;</span><br><span class=\"line\">                        &#x2F;&#x2F; è¿›è¡Œå‚æ•°åˆ†æ</span><br><span class=\"line\">                        if(typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class=\"line\">                            then.call(val, function(val) &#123;</span><br><span class=\"line\">                                res(i, val);</span><br><span class=\"line\">                            &#125;, reject);</span><br><span class=\"line\">                            return;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    args[i] &#x3D; val;</span><br><span class=\"line\">                    if(--remaining &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class=\"line\">                        resolve(args);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125; catch(ex) &#123;</span><br><span class=\"line\">                    reject(ex);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            &#x2F;&#x2F; éå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ </span><br><span class=\"line\">            for(var i &#x3D; 0; i &lt; args.length; i++) &#123;</span><br><span class=\"line\">                res(i, args[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a>Promise.race</h3><p>æœ‰äº† Promise.all çš„ç†è§£ï¼ŒPromise.race ç†è§£èµ·æ¥å°±æ›´å®¹æ˜“äº†ã€‚å®ƒçš„å…¥å‚ä¹Ÿæ˜¯ä¸€ä¸ª Promise å®ä¾‹æ•°ç»„ï¼Œç„¶åå…¶ then æ³¨å†Œçš„å›è°ƒæ–¹æ³•æ˜¯æ•°ç»„ä¸­çš„æŸä¸€ä¸ª Promise çš„çŠ¶æ€å˜ä¸º fulfilled çš„æ—¶å€™å°±æ‰§è¡Œã€‚å› ä¸º Promise çš„çŠ¶æ€åªèƒ½æ”¹å˜ä¸€æ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠ Promise.race ä¸­äº§ç”Ÿçš„ Promise å¯¹è±¡çš„ resolve æ–¹æ³•ï¼Œæ³¨å…¥åˆ°æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ª Promise å®ä¾‹ä¸­çš„å›è°ƒå‡½æ•°ä¸­å³å¯ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn)&#123; </span><br><span class=\"line\">    ...</span><br><span class=\"line\">    this.race &#x3D; function(values) &#123;</span><br><span class=\"line\">        return new Promise(function(resolve, reject) &#123;</span><br><span class=\"line\">            for(var i &#x3D; 0, len &#x3D; values.length; i &lt; len; i++) &#123;</span><br><span class=\"line\">                values[i].then(resolve, reject);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &#125;  </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ€»ç»“-1\"><a href=\"#æ€»ç»“-1\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>Promise æºç ä¸è¿‡å‡ ç™¾è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä»æ‰§è¡Œç»“æœå‡ºå‘ï¼Œåˆ†ææ¯ä¸€æ­¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œç„¶åæ€è€ƒå…¶ä½œç”¨å³å¯ã€‚å…¶ä¸­æœ€å…³é”®çš„ç‚¹å°±æ˜¯è¦ç†è§£ then å‡½æ•°æ˜¯è´Ÿè´£æ³¨å†Œå›è°ƒçš„ï¼ŒçœŸæ­£çš„æ‰§è¡Œæ˜¯åœ¨ Promise çš„çŠ¶æ€è¢«æ”¹å˜ä¹‹åã€‚è€Œå½“ resolve çš„å…¥å‚æ˜¯ä¸€ä¸ª Promise æ—¶ï¼Œè¦æƒ³é“¾å¼è°ƒç”¨èµ·æ¥ï¼Œå°±å¿…é¡»è°ƒç”¨å…¶ then æ–¹æ³•(then.call),å°†ä¸Šä¸€ä¸ª Promise çš„ resolve æ–¹æ³•æ³¨å…¥å…¶å›è°ƒæ•°ç»„ä¸­ã€‚</p>\n<h3 id=\"è¡¥å……è¯´æ˜\"><a href=\"#è¡¥å……è¯´æ˜\" class=\"headerlink\" title=\"è¡¥å……è¯´æ˜\"></a>è¡¥å……è¯´æ˜</h3><p>è™½ç„¶ then æ™®éè®¤ä¸ºæ˜¯å¾®ä»»åŠ¡ã€‚ä½†æ˜¯æµè§ˆå™¨æ²¡åŠæ³•æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼Œç›®å‰è¦ä¹ˆç”¨ setImmediate ï¼Œè¿™ä¸ªä¹Ÿæ˜¯å®ä»»åŠ¡ï¼Œä¸”ä¸å…¼å®¹çš„æƒ…å†µä¸‹è¿˜æ˜¯ç”¨ setTimeout æ‰“åº•çš„ã€‚è¿˜æœ‰ï¼Œpromise çš„ polyfill (es6-promise) é‡Œç”¨çš„ä¹Ÿæ˜¯ setTimeoutã€‚å› æ­¤è¿™é‡Œå°±ç›´æ¥ç”¨ setTimeout,ä»¥å®ä»»åŠ¡æ¥ä»£æ›¿å¾®ä»»åŠ¡äº†ã€‚</p>\n<h3 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h3><ul>\n<li><a href=\"https://promisesaplus.com/\">PromiseA+è§„èŒƒ</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/58428287\">Promise å®ç°åŸç†ç²¾è§£</a></li>\n<li><a href=\"https://mengera88.github.io/2017/05/18/Promise%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/\">30åˆ†é’Ÿï¼Œè®©ä½ å½»åº•æ˜ç™½PromiseåŸç†</a></li>\n</ul>\n<h3 id=\"å®Œæ•´-Promise-æ¨¡å‹\"><a href=\"#å®Œæ•´-Promise-æ¨¡å‹\" class=\"headerlink\" title=\"å®Œæ•´ Promise æ¨¡å‹\"></a>å®Œæ•´ Promise æ¨¡å‹</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function Promise(fn) &#123;</span><br><span class=\"line\">  let state &#x3D; &#39;pending&#39;</span><br><span class=\"line\">  let value &#x3D; null</span><br><span class=\"line\">  const callbacks &#x3D; []</span><br><span class=\"line\"></span><br><span class=\"line\">  this.then &#x3D; function (onFulfilled, onRejected) &#123;</span><br><span class=\"line\">    return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">      handle(&#123;</span><br><span class=\"line\">        onFulfilled,</span><br><span class=\"line\">        onRejected,</span><br><span class=\"line\">        resolve,</span><br><span class=\"line\">        reject,</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.catch &#x3D; function (onError) &#123;</span><br><span class=\"line\">    return this.then(null, onError)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.finally &#x3D; function (onDone) &#123;</span><br><span class=\"line\">    this.then(onDone, onError)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.resolve &#x3D; function (value) &#123;</span><br><span class=\"line\">    if (value &amp;&amp; value instanceof Promise) &#123;</span><br><span class=\"line\">      return value</span><br><span class=\"line\">    &#125; if (value &amp;&amp; typeof value &#x3D;&#x3D;&#x3D; &#39;object&#39; &amp;&amp; typeof value.then &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class=\"line\">      const &#123; then &#125; &#x3D; value</span><br><span class=\"line\">      return new Promise((resolve) &#x3D;&gt; &#123;</span><br><span class=\"line\">        then(resolve)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125; if (value) &#123;</span><br><span class=\"line\">      return new Promise(resolve &#x3D;&gt; resolve(value))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return new Promise(resolve &#x3D;&gt; resolve())</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.reject &#x3D; function (value) &#123;</span><br><span class=\"line\">    return new Promise(((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">      reject(value)</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.all &#x3D; function (arr) &#123;</span><br><span class=\"line\">    const args &#x3D; Array.prototype.slice.call(arr)</span><br><span class=\"line\">    return new Promise(((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">      if (args.length &#x3D;&#x3D;&#x3D; 0) return resolve([])</span><br><span class=\"line\">      let remaining &#x3D; args.length</span><br><span class=\"line\"></span><br><span class=\"line\">      function res(i, val) &#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">          if (val &amp;&amp; (typeof val &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof val &#x3D;&#x3D;&#x3D; &#39;function&#39;)) &#123;</span><br><span class=\"line\">            const &#123; then &#125; &#x3D; val</span><br><span class=\"line\">            if (typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class=\"line\">              then.call(val, (val) &#x3D;&gt; &#123;</span><br><span class=\"line\">                res(i, val)</span><br><span class=\"line\">              &#125;, reject)</span><br><span class=\"line\">              return</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          args[i] &#x3D; val</span><br><span class=\"line\">          if (--remaining &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class=\"line\">            resolve(args)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; catch (ex) &#123;</span><br><span class=\"line\">          reject(ex)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      for (let i &#x3D; 0; i &lt; args.length; i++) &#123;</span><br><span class=\"line\">        res(i, args[i])</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  this.race &#x3D; function (values) &#123;</span><br><span class=\"line\">    return new Promise(((resolve, reject) &#x3D;&gt; &#123;</span><br><span class=\"line\">      for (let i &#x3D; 0, len &#x3D; values.length; i &lt; len; i++) &#123;</span><br><span class=\"line\">        values[i].then(resolve, reject)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  function handle(callback) &#123;</span><br><span class=\"line\">    if (state &#x3D;&#x3D;&#x3D; &#39;pending&#39;) &#123;</span><br><span class=\"line\">      callbacks.push(callback)</span><br><span class=\"line\">      return</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    const cb &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39; ? callback.onFulfilled : callback.onRejected</span><br><span class=\"line\">    const next &#x3D; state &#x3D;&#x3D;&#x3D; &#39;fulfilled&#39; ? callback.resolve : callback.reject</span><br><span class=\"line\"></span><br><span class=\"line\">    if (!cb) &#123;</span><br><span class=\"line\">      next(value)</span><br><span class=\"line\">      return</span><br><span class=\"line\">    &#125;\t</span><br><span class=\"line\">    let ret;</span><br><span class=\"line\">    try &#123;</span><br><span class=\"line\">     ret &#x3D; cb(value)</span><br><span class=\"line\">    &#125; catch (e) &#123;</span><br><span class=\"line\">      callback.reject(e)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\tcallback.resolve(ret);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  function resolve(newValue) &#123;</span><br><span class=\"line\">    const fn &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">      if (state !&#x3D;&#x3D; &#39;pending&#39;) return</span><br><span class=\"line\"></span><br><span class=\"line\">      if (newValue &amp;&amp; (typeof newValue &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof newValue &#x3D;&#x3D;&#x3D; &#39;function&#39;)) &#123;</span><br><span class=\"line\">        const &#123; then &#125; &#x3D; newValue</span><br><span class=\"line\">        if (typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class=\"line\">          &#x2F;&#x2F; newValue ä¸ºæ–°äº§ç”Ÿçš„ Promise,æ­¤æ—¶resolveä¸ºä¸Šä¸ª promise çš„resolve</span><br><span class=\"line\">          &#x2F;&#x2F; ç›¸å½“äºè°ƒç”¨äº†æ–°äº§ç”Ÿ Promise çš„thenæ–¹æ³•ï¼Œæ³¨å…¥äº†ä¸Šä¸ª promise çš„resolve ä¸ºå…¶å›è°ƒ</span><br><span class=\"line\">          then.call(newValue, resolve, reject)</span><br><span class=\"line\">          return</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      state &#x3D; &#39;fulfilled&#39;</span><br><span class=\"line\">      value &#x3D; newValue</span><br><span class=\"line\">      handelCb()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    setTimeout(fn, 0)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  function reject(error) &#123;</span><br><span class=\"line\">    const fn &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">      if (state !&#x3D;&#x3D; &#39;pending&#39;) return</span><br><span class=\"line\"></span><br><span class=\"line\">      if (error &amp;&amp; (typeof error &#x3D;&#x3D;&#x3D; &#39;object&#39; || typeof error &#x3D;&#x3D;&#x3D; &#39;function&#39;)) &#123;</span><br><span class=\"line\">        const &#123; then &#125; &#x3D; error</span><br><span class=\"line\">        if (typeof then &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123;</span><br><span class=\"line\">          then.call(error, resolve, reject)</span><br><span class=\"line\">          return</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      state &#x3D; &#39;rejected&#39;</span><br><span class=\"line\">      value &#x3D; error</span><br><span class=\"line\">      handelCb()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    setTimeout(fn, 0)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  function handelCb() &#123;</span><br><span class=\"line\">    while (callbacks.length) &#123;</span><br><span class=\"line\">      const fn &#x3D; callbacks.shift()</span><br><span class=\"line\">      handle(fn)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  try &#123;</span><br><span class=\"line\">  fn(resolve, reject)</span><br><span class=\"line\">  &#125; catch(ex) &#123;</span><br><span class=\"line\">\treject(ex);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"17-GeneratorsåŸç†\"><a href=\"#17-GeneratorsåŸç†\" class=\"headerlink\" title=\"17.GeneratorsåŸç†\"></a>17.GeneratorsåŸç†</h1><p>éšç€ Javascript è¯­è¨€çš„å‘å±•ï¼ŒES6 è§„èŒƒä¸ºæˆ‘ä»¬å¸¦æ¥äº†è®¸å¤šæ–°çš„å†…å®¹ï¼Œå…¶ä¸­ç”Ÿæˆå™¨ Generators æ˜¯ä¸€é¡¹é‡è¦çš„ç‰¹æ€§ã€‚åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–è¿­ä»£å™¨çš„åˆ›å»ºï¼Œæ›´åŠ ä»¤äººå…´å¥‹çš„ï¼Œæ˜¯ Generators å…è®¸æˆ‘ä»¬åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœã€å¹¶åœ¨å°†æ¥æŸä¸€æ—¶åˆ»æ¢å¤æ‰§è¡Œã€‚è¿™ä¸€ç‰¹æ€§æ”¹å˜äº†ä»¥å¾€å‡½æ•°å¿…é¡»æ‰§è¡Œå®Œæˆæ‰è¿”å›çš„ç‰¹ç‚¹ï¼Œå°†è¿™ä¸€ç‰¹æ€§åº”ç”¨åˆ°å¼‚æ­¥ä»£ç ç¼–å†™ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆçš„ç®€åŒ–å¼‚æ­¥æ–¹æ³•çš„å†™æ³•ï¼ŒåŒæ—¶é¿å…é™·å…¥å›è°ƒåœ°ç‹±ã€‚</p>\n<p>æœ¬é‡ç‚¹æ¢è®¨ Generators è¿è¡Œæœºåˆ¶åŠåœ¨ ES5 çš„å®ç°åŸç†ã€‚</p>\n<h2 id=\"1-Generators-ç®€å•ä»‹ç»\"><a href=\"#1-Generators-ç®€å•ä»‹ç»\" class=\"headerlink\" title=\"1.Generators ç®€å•ä»‹ç»\"></a><strong>1.Generators ç®€å•ä»‹ç»</strong></h2><p>ä¸€ä¸ªç®€å•çš„ Generator å‡½æ•°ç¤ºä¾‹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">yield</span> <span class=\"number\">3</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> iter=example();</span><br><span class=\"line\">iter.next();<span class=\"comment\">//&#123;value:1ï¼Œdone:false&#125;</span></span><br><span class=\"line\">iter.next();<span class=\"comment\">//&#123;value:2ï¼Œdone:false&#125;</span></span><br><span class=\"line\">iter.next();<span class=\"comment\">//&#123;value:3ï¼Œdone:false&#125;</span></span><br><span class=\"line\">iter.next();<span class=\"comment\">//&#123;value:undefinedï¼Œdone:true&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>â€‹    ä¸Šè¿°ä»£ç ä¸­å®šä¹‰äº†ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå½“è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•° example() æ—¶ï¼Œå¹¶éç«‹å³æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚æ¯å½“è°ƒç”¨ç”Ÿæˆå™¨å¯¹è±¡çš„.next() æ–¹æ³•æ—¶ï¼Œå‡½æ•°å°†è¿è¡Œåˆ°ä¸‹ä¸€ä¸ª yield è¡¨è¾¾å¼ï¼Œè¿”å›è¡¨è¾¾å¼ç»“æœå¹¶æš‚åœè‡ªèº«ã€‚å½“æŠµè¾¾ç”Ÿæˆå™¨å‡½æ•°çš„æœ«å°¾æ—¶ï¼Œè¿”å›ç»“æœä¸­ done çš„å€¼ä¸º trueï¼Œvalue çš„å€¼ä¸º undefinedã€‚æˆ‘ä»¬å°†ä¸Šè¿° example() å‡½æ•°ç§°ä¹‹ä¸ºç”Ÿæˆå™¨å‡½æ•°ï¼Œä¸æ™®é€šå‡½æ•°ç›¸æ¯”äºŒè€…æœ‰å¦‚ä¸‹åŒºåˆ«</p>\n<ul>\n<li>æ™®é€šå‡½æ•°ä½¿ç”¨ function å£°æ˜ï¼Œç”Ÿæˆå™¨å‡½æ•°ç”¨ function*å£°æ˜</li>\n<li>æ™®é€šå‡½æ•°ä½¿ç”¨ return è¿”å›å€¼ï¼Œç”Ÿæˆå™¨å‡½æ•°ä½¿ç”¨ yield è¿”å›å€¼</li>\n<li>æ™®é€šå‡½æ•°æ˜¯ run to completion æ¨¡å¼ï¼Œå³æ™®é€šå‡½æ•°å¼€å§‹æ‰§è¡Œåï¼Œä¼šä¸€ç›´æ‰§è¡Œåˆ°è¯¥å‡½æ•°æ‰€æœ‰è¯­å¥å®Œæˆï¼Œåœ¨æ­¤æœŸé—´åˆ«çš„ä»£ç è¯­å¥æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ï¼›ç”Ÿæˆå™¨å‡½æ•°æ˜¯ run-pause-run æ¨¡å¼ï¼Œå³ç”Ÿæˆå™¨å‡½æ•°å¯ä»¥åœ¨å‡½æ•°è¿è¡Œä¸­è¢«æš‚åœä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œå¹¶ä¸”åœ¨åé¢å†æ¢å¤æ‰§è¡Œï¼Œåœ¨æš‚åœæœŸé—´å…è®¸å…¶ä»–ä»£ç è¯­å¥è¢«æ‰§è¡Œ</li>\n</ul>\n<h2 id=\"2-Generators-in-C\"><a href=\"#2-Generators-in-C\" class=\"headerlink\" title=\"2.Generators in C#\"></a><strong>2.Generators in C#</strong></h2><p>ç”Ÿæˆå™¨ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œæˆ‘æœ€åˆæ¥è§¦è¿™ä¸€æ¦‚å¿µæ˜¯åœ¨å­¦ä¹ ä½¿ç”¨ C#æ—¶ã€‚C#ä» 2.0 ç‰ˆæœ¬ä¾¿å¼•å…¥äº† yield å…³é”®å­—ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´ç®€å•çš„åˆ›å»ºæšä¸¾æ•°å’Œå¯æšä¸¾ç±»å‹ã€‚ä¸åŒçš„æ˜¯ C#ä¸­æœªå°†å…¶å‘½åä¸ºç”Ÿæˆå™¨ Generatorsï¼Œè€Œå°†å…¶ç§°ä¹‹ä¸ºè¿­ä»£å™¨ã€‚</p>\n<p>æœ¬æ–‡ä¸ä¼šä»‹ç» C#ä¸­å¯æšä¸¾ç±» IEnumerable å’Œæšä¸¾æ•° IEnumerator å†…å®¹ï¼Œå¦‚éœ€äº†è§£æ¨èé˜…è¯»ã€ŠC#4.0 å›¾è§£æ•™ç¨‹ã€‹ç›¸å…³ç« èŠ‚ã€‚</p>\n<p>2.1 C#è¿­ä»£å™¨ä»‹ç»</p>\n<p>è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œä¸‹é¢æ–¹æ³•å£°æ˜å®ç°äº†ä¸€ä¸ªäº§ç”Ÿå’Œè¿”å›æšä¸¾æ•°çš„è¿­ä»£å™¨</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">public IEnumerable &lt;int&gt; Example()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\tyield return 1;</span><br><span class=\"line\">\t\tyield return 2;</span><br><span class=\"line\">\t\tyield return 3;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ–¹æ³•å®šä¹‰ä¸ ES6 Generators å®šä¹‰å¾ˆæ¥è¿‘ï¼Œå®šä¹‰ä¸­å£°æ˜è¿”å›äº†ä¸€ä¸ª int ç±»å‹çš„æ³›å‹å¯æšä¸¾ç±»å‹ï¼Œæ–¹æ³•ä½“å†…é€šè¿‡ yield return è¯­å¥è¿”å›å€¼å¹¶å°†è‡ªèº«æš‚åœæ‰§è¡Œã€‚</p>\n<p>ä½¿ç”¨è¿­ä»£å™¨æ¥åˆ›å»ºå¯æšä¸¾ç±»å‹çš„ç±»</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class YieldClass</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public IEnumerable&lt;int&gt; Example()&#x2F;&#x2F;è¿­ä»£å™¨</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\tyield return 1;</span><br><span class=\"line\">\tyield return 2;</span><br><span class=\"line\">\tyield return 3;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">class Program</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    static void Main()</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">\tYieldClass yc&#x3D;new YieldClass ();</span><br><span class=\"line\">\tforeach(var a in yc.Example())</span><br><span class=\"line\">\t\tConsole.WriteLine(a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šè¿°ä»£ç ä¼šäº§ç”Ÿå¦‚ä¸‹è¾“å…¥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td></tr></table></figure>\n\n<p>2.2 C#è¿­ä»£å™¨åŸç†</p>\n<p>åœ¨.Net ä¸­ï¼Œyield å¹¶ä¸æ˜¯.Net runtime çš„ç‰¹æ€§ï¼Œè€Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä»£ç ç¼–è¯‘æ—¶ï¼Œè¿™ä¸€è¯­æ³•ç³–ä¼šè¢« C#ç¼–è¯‘å™¨ç¼–è¯‘æˆç®€å•çš„ IL ä»£ç ã€‚</p>\n<p>ç»§ç»­ç ”ç©¶ä¸Šè¿°ç¤ºä¾‹ï¼Œé€šè¿‡ Reflector åç¼–è¯‘å·¥å…·å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªå¸¦æœ‰å¦‚ä¸‹å£°æ˜çš„å†…éƒ¨ç±»</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[CompilerGenerated]</span><br><span class=\"line\">private sealed class YieldEnumerator : </span><br><span class=\"line\">   IEnumerable&lt;object&gt;, IEnumerator&lt;object&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &#x2F;&#x2F; Fieldså­—æ®µ</span><br><span class=\"line\">    private int state;</span><br><span class=\"line\">    private int current;</span><br><span class=\"line\">    public YieldClass owner;</span><br><span class=\"line\">    private int initialThreadId;</span><br><span class=\"line\"> </span><br><span class=\"line\">    &#x2F;&#x2F; Methodsæ–¹æ³•</span><br><span class=\"line\">    [DebuggerHidden]</span><br><span class=\"line\">    public YieldEnumerator(int state);</span><br><span class=\"line\">    private bool MoveNext();</span><br><span class=\"line\">    [DebuggerHidden]</span><br><span class=\"line\">    IEnumerator&lt;int&gt; IEnumerable&lt;int&gt;.GetEnumerator();</span><br><span class=\"line\">    [DebuggerHidden]</span><br><span class=\"line\">    IEnumerator IEnumerable.GetEnumerator();</span><br><span class=\"line\">    [DebuggerHidden]</span><br><span class=\"line\">    void IEnumerator.Reset();</span><br><span class=\"line\">    void IDisposable.Dispose();</span><br><span class=\"line\"> </span><br><span class=\"line\">    &#x2F;&#x2F; Propertieså±æ€§</span><br><span class=\"line\">    object IEnumerator&lt;object&gt;.Current </span><br><span class=\"line\">    &#123; [DebuggerHidden] get; &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    object IEnumerator.Current </span><br><span class=\"line\">    &#123; [DebuggerHidden] get; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åŸå§‹çš„ Example() æ–¹æ³•ä»…è¿”å›ä¸€ä¸ª YieldEnumerator çš„å®ä¾‹ï¼Œå¹¶å°†åˆå§‹çŠ¶æ€-2 ä¼ é€’ç»™å®ƒè‡ªèº«å’Œå…¶å¼•ç”¨è€…ï¼Œæ¯ä¸€ä¸ªè¿­ä»£å™¨ä¿å­˜ä¸€ä¸ªçŠ¶æ€æŒ‡ç¤º</p>\n<ul>\n<li>-2ï¼šåˆå§‹åŒ–ä¸ºå¯è¿­ä»£ç±» Enumerable</li>\n<li>-1: è¿­ä»£ç»“æŸ</li>\n<li>0: åˆå§‹åŒ–ä¸ºè¿­ä»£å™¨ Enumerator</li>\n<li>1-n: åŸå§‹ Example() æ–¹æ³•ä¸­çš„ yield return ç´¢å¼•å€¼</li>\n</ul>\n<p>Example() æ–¹æ³•ä¸­ä»£ç è¢«è½¬æ¢ä¸º YieldingEnumerator.MoveNext()ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­è½¬æ¢åä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bool MoveNext()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    switch (state)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        case 0:</span><br><span class=\"line\">            state &#x3D; -1;</span><br><span class=\"line\">            current &#x3D; 1;</span><br><span class=\"line\">            state &#x3D; 1;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        case 1:</span><br><span class=\"line\">            state &#x3D; -1;</span><br><span class=\"line\">            current &#x3D; 2;</span><br><span class=\"line\">            state &#x3D; 2;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        case 2:</span><br><span class=\"line\">            state &#x3D; -1;</span><br><span class=\"line\">            current &#x3D; 3;</span><br><span class=\"line\">            state &#x3D; 3;</span><br><span class=\"line\">            return true;</span><br><span class=\"line\">        case 3:</span><br><span class=\"line\">            state &#x3D; -1;</span><br><span class=\"line\">            break;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return false;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åˆ©ç”¨ä¸Šè¿°çš„ä»£ç è½¬æ¢ï¼Œç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ­£æ˜¯åŸºäºè¿™ä¸€çŠ¶æ€æœºæ¨¡å‹ï¼Œå®ç°äº† yield å…³é”®å­—çš„ç‰¹æ€§ã€‚</p>\n<p>è¿­ä»£å™¨çŠ¶æ€æœºæ¨¡å‹å¯å¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><a href=\"http://www.alloyteam.com/wp-content/uploads/2016/02/statemachine.png\"><img data-src=\"http://www.alloyteam.com/wp-content/uploads/2016/02/statemachine.png\" alt=\"statemachine\"></a></p>\n<ul>\n<li>Before ä¸ºè¿­ä»£å™¨åˆå§‹çŠ¶æ€</li>\n<li>Running ä¸ºè°ƒç”¨ MoveNext åè¿›å…¥è¿™ä¸ªçŠ¶æ€ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ï¼Œæšä¸¾æ•°æ£€æµ‹å¹¶è®¾ç½®ä¸‹ä¸€é¡¹çš„ä½ç½®ã€‚é‡åˆ° yield returnã€yield break æˆ–è€…è¿­ä»£ç»“æŸæ—¶ï¼Œé€€å‡ºè¯¥çŠ¶æ€</li>\n<li>Suspended ä¸ºçŠ¶æ€æœºç­‰å¾…ä¸‹æ¬¡è°ƒç”¨ MoveNext çš„çŠ¶æ€</li>\n<li>After ä¸ºè¿­ä»£ç»“æŸçš„çŠ¶æ€</li>\n</ul>\n<p><strong>3.Generators in Javascript</strong></p>\n<p>é€šè¿‡é˜…è¯»ä¸Šæ–‡ï¼Œæˆ‘ä»¬äº†è§£äº† Generator åœ¨ C#ä¸­çš„ä½¿ç”¨ï¼Œå¹¶ä¸”é€šè¿‡æŸ¥çœ‹ç¼–è¯‘å™¨ç”Ÿæˆçš„ IL ä»£ç ï¼Œå¾—çŸ¥ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªå†…éƒ¨ç±»æ¥ä¿å­˜ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç„¶åå°† yield return è¡¨è¾¾å¼è½¬æ¢æˆ switch caseï¼Œé€šè¿‡çŠ¶æ€æœºæ¨¡å¼å®ç° yield å…³é”®å­—çš„ç‰¹æ€§ã€‚</p>\n<p>3.1 Javascript Generators åŸç†æµ…æ</p>\n<p>yield å…³é”®å­—åœ¨ Javascript ä¸­å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p>\n<p>é¦–å…ˆï¼Œç”Ÿæˆå™¨ä¸æ˜¯çº¿ç¨‹ã€‚æ”¯æŒçº¿ç¨‹çš„è¯­è¨€ä¸­ï¼Œå¤šæ®µä¸åŒçš„ä»£ç å¯ä»¥åœ¨åŒä¸€æ—¶å€™è¿è¡Œï¼Œè¿™ç»å¸¸ä¼šå¯¼è‡´èµ„æºç«äº‰ï¼Œä½¿ç”¨å¾—å½“ä¼šæœ‰ä¸é”™çš„æ€§èƒ½æå‡ã€‚ç”Ÿæˆå™¨åˆ™å®Œå…¨ä¸åŒï¼ŒJavascript æ‰§è¡Œå¼•æ“ä»ç„¶æ˜¯ä¸€ä¸ªåŸºäºäº‹ä»¶å¾ªç¯çš„å•çº¿ç¨‹ç¯å¢ƒï¼Œå½“ç”Ÿæˆå™¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨å«åš caller çš„åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œã€‚æ‰§è¡Œçš„é¡ºåºæ˜¯æœ‰åºã€ç¡®å®šçš„ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šäº§ç”Ÿå¹¶å‘ã€‚ä¸åŒäºç³»ç»Ÿçš„çº¿ç¨‹ï¼Œç”Ÿæˆå™¨åªä¼šåœ¨å…¶å†…éƒ¨ç”¨åˆ° yield çš„æ—¶å€™æ‰ä¼šè¢«æŒ‚èµ·ã€‚</p>\n<p>æ—¢ç„¶ç”Ÿæˆå™¨å¹¶éç”±å¼•æ“ä»åº•å±‚æä¾›é¢å¤–çš„æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç”¨ä¸Šæ–‡åœ¨ C#ä¸­å¯¹ yield ç‰¹æ€§çš„åŸç†æ¢ç©¶çš„ç»éªŒï¼Œå°†ç”Ÿæˆå™¨è§†ä¸ºä¸€ä¸ªè¯­æ³•ç³–ï¼Œç”¨ä¸€ä¸ªè¾…åŠ©å·¥å…·å°†ç”Ÿæˆå™¨å‡½æ•°è½¬æ¢ä¸ºæ™®é€šçš„ Javascript ä»£ç ï¼Œåœ¨ç»è¿‡è½¬æ¢çš„ä»£ç ä¸­ï¼Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œä¸€æ˜¯è¦ä¿å­˜å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒäºŒæ˜¯å®ç°ä¸€ä¸ªå®Œå–„çš„è¿­ä»£æ–¹æ³•ï¼Œä½¿å¾—å¤šä¸ª yield è¡¨è¾¾å¼æŒ‰åºæ‰§è¡Œï¼Œä»è€Œå®ç°ç”Ÿæˆå™¨çš„ç‰¹æ€§ã€‚</p>\n<p>3.2 How Generators work in ES5</p>\n<p><a href=\"https://facebook.github.io/regenerator/\">Regenerator</a> å·¥å…·å·²ç»å®ç°äº†ä¸Šè¿°æ€è·¯ï¼Œå€ŸåŠ© Regenerator å·¥å…·ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨åŸç”Ÿ ES5 ä¸­ä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œæœ¬èŠ‚æˆ‘ä»¬æ¥åˆ†æ Regenerator å®ç°æ–¹å¼ä»¥æ·±å…¥ç†è§£ Generators è¿è¡ŒåŸç†ã€‚</p>\n<p>é€šè¿‡<a href=\"http://babeljs.io/repl/\">è¿™ä¸ªåœ¨çº¿åœ°å€</a>å¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹ç»è¿‡è½¬æ¢åçš„ä»£ç ï¼Œä»ç„¶ä»¥æ–‡ç« åˆå§‹ä¸ºä¾‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function* example() &#123;</span><br><span class=\"line\">  yield 1;</span><br><span class=\"line\">  yield 2;</span><br><span class=\"line\">  yield 3;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var iter&#x3D;example();</span><br><span class=\"line\">iter.next();</span><br></pre></td></tr></table></figure>\n\n<p>ç»è¿‡è½¬æ¢åä¸º</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var marked0$0 &#x3D; [example].map(regeneratorRuntime.mark);</span><br><span class=\"line\">function example() &#123;</span><br><span class=\"line\">  return regeneratorRuntime.wrap(function example$(context$1$0) &#123;</span><br><span class=\"line\">    while (1) switch (context$1$0.prev &#x3D; context$1$0.next) &#123;</span><br><span class=\"line\">      case 0:</span><br><span class=\"line\">        context$1$0.next &#x3D; 2;</span><br><span class=\"line\">        return 1;</span><br><span class=\"line\"> </span><br><span class=\"line\">      case 2:</span><br><span class=\"line\">        context$1$0.next &#x3D; 4;</span><br><span class=\"line\">        return 2;</span><br><span class=\"line\"> </span><br><span class=\"line\">      case 4:</span><br><span class=\"line\">        context$1$0.next &#x3D; 6;</span><br><span class=\"line\">        return 3;</span><br><span class=\"line\"> </span><br><span class=\"line\">      case 6:</span><br><span class=\"line\">      case &quot;end&quot;:</span><br><span class=\"line\">        return context$1$0.stop();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, marked0$0[0], this);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">var iter &#x3D; example();</span><br><span class=\"line\">iter.next();</span><br></pre></td></tr></table></figure>\n\n<p>ä»è½¬æ¢åçš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸ C#ç¼–è¯‘å™¨å¯¹ yield return è¡¨è¾¾å¼çš„è½¬æ¢ç›¸ä¼¼ï¼ŒRegenerator å°†ç”Ÿæˆå™¨å‡½æ•°ä¸­çš„ yield è¡¨è¾¾å¼é‡å†™ä¸º switch caseï¼ŒåŒæ—¶ï¼Œåœ¨æ¯ä¸ª case ä¸­ä½¿ç”¨ context$1$0 æ¥ä¿å­˜å‡½æ•°å½“å‰çš„ä¸Šä¸‹æ–‡çŠ¶æ€ã€‚</p>\n<p>switch case ä¹‹å¤–ï¼Œè¿­ä»£å™¨å‡½æ•° example è¢« regeneratorRuntime.mark åŒ…è£…ï¼Œè¿”å›ä¸€ä¸ªè¢« regeneratorRuntime.wrap åŒ…è£…çš„è¿­ä»£å™¨å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">runtime.mark &#x3D; function(genFun) &#123;</span><br><span class=\"line\">  if (Object.setPrototypeOf) &#123;</span><br><span class=\"line\">    Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);</span><br><span class=\"line\">  &#125; else &#123;</span><br><span class=\"line\">    genFun.__proto__ &#x3D; GeneratorFunctionPrototype;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  genFun.prototype &#x3D; Object.create(Gp);</span><br><span class=\"line\">  return genFun;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡ mark åŒ…è£…ï¼Œå°† example åŒ…è£…æˆå¦‚ä¸‹å¯¹è±¡</p>\n<p><a href=\"http://www.alloyteam.com/wp-content/uploads/2016/02/example.png\"><img data-src=\"http://www.alloyteam.com/wp-content/uploads/2016/02/example.png\" alt=\"example\"></a></p>\n<p>å½“è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•° example() æ—¶ï¼Œè¿”å›ä¸€ä¸ªè¢« wrap å‡½æ•°åŒ…è£…åçš„è¿­ä»£å™¨å¯¹è±¡</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">runtime.wrap&#x3D;function (innerFn, outerFn, self, tryLocsList) &#123;</span><br><span class=\"line\">  &#x2F;&#x2F; If outerFn provided, then outerFn.prototype instanceof Generator.</span><br><span class=\"line\">  var generator &#x3D; Object.create((outerFn || Generator).prototype);</span><br><span class=\"line\">  var context &#x3D; new Context(tryLocsList || []);</span><br><span class=\"line\"> </span><br><span class=\"line\">  &#x2F;&#x2F; The ._invoke method unifies the implementations of the .next,</span><br><span class=\"line\">  &#x2F;&#x2F; .throw, and .return methods.</span><br><span class=\"line\">  generator._invoke &#x3D; makeInvokeMethod(innerFn, self, context);</span><br><span class=\"line\"> </span><br><span class=\"line\">  return generator;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿”å›çš„è¿­ä»£å™¨å¯¹è±¡å¦‚ä¸‹æ‰€ç¤º</p>\n<p><a href=\"http://www.alloyteam.com/wp-content/uploads/2016/02/iter.png\"><img data-src=\"http://www.alloyteam.com/wp-content/uploads/2016/02/iter.png\" alt=\"iter\"></a></p>\n<p>å½“è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡ iter.next() æ–¹æ³•æ—¶ï¼Œå› ä¸ºæœ‰å¦‚ä¸‹ä»£ç ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ_invoke æ–¹æ³•ï¼Œè€Œæ ¹æ®å‰é¢ wrap æ–¹æ³•ä»£ç å¯çŸ¥ï¼Œæœ€ç»ˆæ˜¯è°ƒç”¨äº†è¿­ä»£å™¨å¯¹è±¡çš„ makeInvokeMethod (innerFn, self, context); æ–¹æ³•</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; Helper for defining the .next, .throw, and .return methods of the</span><br><span class=\"line\">&#x2F;&#x2F; Iterator interface in terms of a single ._invoke method.</span><br><span class=\"line\">function defineIteratorMethods(prototype) &#123;</span><br><span class=\"line\">  [&quot;next&quot;, &quot;throw&quot;, &quot;return&quot;].forEach(function(method) &#123;</span><br><span class=\"line\">    prototype[method] &#x3D; function(arg) &#123;</span><br><span class=\"line\">      return this._invoke(method, arg);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>makeInvokeMethod æ–¹æ³•å†…å®¹è¾ƒå¤šï¼Œè¿™é‡Œé€‰å–éƒ¨åˆ†åˆ†æã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å‘ç°ç”Ÿæˆå™¨å°†è‡ªèº«çŠ¶æ€åˆå§‹åŒ–ä¸ºâ€œSuspended Startâ€</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function makeInvokeMethod(innerFn, self, context) &#123;</span><br><span class=\"line\">  var state &#x3D; GenStateSuspendedStart;</span><br><span class=\"line\"> </span><br><span class=\"line\">  return function invoke(method, arg) &#123;</span><br></pre></td></tr></table></figure>\n\n<p>makeInvokeMethod è¿”å› invoke å‡½æ•°ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ.next æ–¹æ³•æ—¶ï¼Œå®é™…è°ƒç”¨çš„æ˜¯ invoke æ–¹æ³•ä¸­çš„ä¸‹é¢è¯­å¥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var record &#x3D; tryCatch(innerFn, self, context);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™é‡Œ tryCatch æ–¹æ³•ä¸­ fn ä¸ºç»è¿‡è½¬æ¢åçš„ example$æ–¹æ³•ï¼Œarg ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡ context, å› ä¸º invoke å‡½æ•°å†…éƒ¨å¯¹ context çš„å¼•ç”¨å½¢æˆé—­åŒ…å¼•ç”¨ï¼Œæ‰€ä»¥ context ä¸Šä¸‹æ–‡å¾—ä»¥åœ¨è¿­ä»£æœŸé—´ä¸€ç›´ä¿æŒã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function tryCatch(fn, obj, arg) &#123;</span><br><span class=\"line\">  try &#123;</span><br><span class=\"line\">    return &#123; type: &quot;normal&quot;, arg: fn.call(obj, arg) &#125;;</span><br><span class=\"line\">  &#125; catch (err) &#123;</span><br><span class=\"line\">    return &#123; type: &quot;throw&quot;, arg: err &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>tryCatch æ–¹æ³•ä¼šå®é™…è°ƒç”¨ example$æ–¹æ³•ï¼Œè¿›å…¥è½¬æ¢åçš„ switch case, æ‰§è¡Œä»£ç é€»è¾‘ã€‚å¦‚æœå¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ™®é€šç±»å‹çš„å€¼ï¼Œæˆ‘ä»¬å°†å®ƒåŒ…è£…æˆä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ ¼å¼ï¼Œå¹¶ä¸”æ›´æ–°ç”Ÿæˆå™¨çŠ¶æ€è‡³ GenStateCompleted æˆ–è€… GenStateSuspendedYield</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var record &#x3D; tryCatch(innerFn, self, context);</span><br><span class=\"line\">        if (record.type &#x3D;&#x3D;&#x3D; &quot;normal&quot;) &#123;</span><br><span class=\"line\">          &#x2F;&#x2F; If an exception is thrown from innerFn, we leave state &#x3D;&#x3D;&#x3D;</span><br><span class=\"line\">          &#x2F;&#x2F; GenStateExecuting and loop back for another invocation.</span><br><span class=\"line\">          state &#x3D; context.done</span><br><span class=\"line\">            ? GenStateCompleted</span><br><span class=\"line\">            : GenStateSuspendedYield;</span><br><span class=\"line\"> </span><br><span class=\"line\">          var info &#x3D; &#123;</span><br><span class=\"line\">            value: record.arg,</span><br><span class=\"line\">            done: context.done</span><br><span class=\"line\">          &#125;;</span><br></pre></td></tr></table></figure>\n\n<p><strong>4. æ€»ç»“</strong></p>\n<p>é€šè¿‡å¯¹ Regenerator è½¬æ¢åçš„ç”Ÿæˆå™¨ä»£ç åŠå·¥å…·æºç åˆ†æï¼Œæˆ‘ä»¬æ¢ç©¶äº†ç”Ÿæˆå™¨çš„è¿è¡ŒåŸç†ã€‚Regenerator é€šè¿‡å·¥å…·å‡½æ•°å°†ç”Ÿæˆå™¨å‡½æ•°åŒ…è£…ï¼Œä¸ºå…¶æ·»åŠ å¦‚ next/return ç­‰æ–¹æ³•ã€‚åŒæ—¶ä¹Ÿå¯¹è¿”å›çš„ç”Ÿæˆå™¨å¯¹è±¡è¿›è¡ŒåŒ…è£…ï¼Œä½¿å¾—å¯¹ next ç­‰æ–¹æ³•çš„è°ƒç”¨ï¼Œæœ€ç»ˆè¿›å…¥ç”± switch case ç»„æˆçš„çŠ¶æ€æœºæ¨¡å‹ä¸­ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåˆ©ç”¨é—­åŒ…æŠ€å·§ï¼Œä¿å­˜ç”Ÿæˆå™¨å‡½æ•°ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>\n<p>ä¸Šè¿°è¿‡ç¨‹ä¸ C#ä¸­ yield å…³é”®å­—çš„å®ç°åŸç†åŸºæœ¬ä¸€è‡´ï¼Œéƒ½é‡‡ç”¨äº†ç¼–è¯‘è½¬æ¢æ€è·¯ï¼Œè¿ç”¨çŠ¶æ€æœºæ¨¡å‹ï¼ŒåŒæ—¶ä¿å­˜å‡½æ•°ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæœ€ç»ˆå®ç°äº†æ–°çš„ yield å…³é”®å­—å¸¦æ¥çš„æ–°çš„è¯­è¨€ç‰¹æ€§ã€‚</p>\n<p>å‚è€ƒæ–‡ç« </p>\n<p>1.<a href=\"https://davidwalsh.name/es6-generators\">ES6 Generators:Complete Series ç³»åˆ—æ–‡ç« </a></p>\n<p>\\2. <a href=\"http://www.infoq.com/cn/articles/es6-in-depth-generators\">æ·±å…¥æµ…å‡º ES6 Generators</a></p>\n<p>3.<a href=\"http://www.ruanyifeng.com/blog/2015/04/generator.html\">ã€Šæ·±å…¥æŒæ¡ ECMAScript 6 å¼‚æ­¥ç¼–ç¨‹ã€‹ç³»åˆ—æ–‡ç« </a></p>\n<p>4.<a href=\"http://x-team.com/2015/04/generators-work/\">ES6 Generators:How do they work?</a></p>\n<p>5.<a href=\"https://startbigthinksmall.wordpress.com/2008/06/09/behind-the-scenes-of-the-c-yield-keyword/\">Behind the scenes of the C# yield keyword</a></p>\n","categories":["webå‰ç«¯"],"tags":["javascript","é¢è¯•","å‰ç«¯åŸºç¡€"]},{"title":"HTMLå’Œæµè§ˆå™¨","url":"/2021/03/09/HTML%E5%92%8C%E6%B5%8F%E8%A7%88%E5%99%A8/","content":"<p>HTMLä¹Ÿæ˜¯å­¦ä¹ å‰ç«¯æœ€å¼€å§‹å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶ä½¿ç”¨æ—¶å¼ºè°ƒå®ç”¨æ€§ï¼Œä½†ä¸€äº›å¸¸è§çš„é¢è¯•è€ƒç‚¹è¿˜æ˜¯è¦æŒæ¡çš„ï¼Œæµè§ˆå™¨çš„è¿è¡Œæœºåˆ¶ä¹Ÿéœ€è¦è¿›è¡Œäº†è§£ï¼Œæ¯”å¦‚æµè§ˆå™¨æ€ä¹ˆåŠ è½½é¡µé¢çš„ï¼Œå¯¹å‰ç«¯è€Œè¨€æ˜¯å¿…é¡»æŒæ¡çš„ã€‚</p>\n<a id=\"more\"></a>\n\n<h1 id=\"1-è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ \"><a href=\"#1-è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ \" class=\"headerlink\" title=\"1.è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ \"></a>1.è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ </h1><h3 id=\"åˆçª¥é—¨å¾„ï¼š\"><a href=\"#åˆçª¥é—¨å¾„ï¼š\" class=\"headerlink\" title=\"åˆçª¥é—¨å¾„ï¼š\"></a>åˆçª¥é—¨å¾„ï¼š</h3><p>ä»€ä¹ˆå«è¡Œå†…å…ƒç´ ï¼Ÿ</p>\n<p>å¸¸è§çš„spanã€aã€lableã€strongã€bç­‰htmlæ ‡ç­¾éƒ½æ˜¯è¡Œå†…å…ƒç´ </p>\n<p>ä»€ä¹ˆå«å—çº§å…ƒç´ ï¼Ÿ</p>\n<p>å¸¸è§çš„divã€pã€liã€h1ã€h2ã€h3ã€h4ç­‰htmlæ ‡ç­¾éƒ½æ˜¯å—çº§å…ƒç´ </p>\n<h3 id=\"ç•¥çŸ¥ä¸€äºŒï¼š\"><a href=\"#ç•¥çŸ¥ä¸€äºŒï¼š\" class=\"headerlink\" title=\"ç•¥çŸ¥ä¸€äºŒï¼š\"></a>ç•¥çŸ¥ä¸€äºŒï¼š</h3><p>è¡Œå†…å…ƒç´ æœ‰ï¼š<br>a, span, label, strong, em, br, img, input, select, textarea, cite,<br>å—çº§å…ƒç´ ï¼š<br>div, h1~h6, p, form, ul, li, ol, dl, address, hr, menu, table, fieldset</p>\n<h3 id=\"ç²—é€šçš®æ¯›ï¼š\"><a href=\"#ç²—é€šçš®æ¯›ï¼š\" class=\"headerlink\" title=\"ç²—é€šçš®æ¯›ï¼š\"></a>ç²—é€šçš®æ¯›ï¼š</h3><h4 id=\"ï¼ˆè¡Œå†…å…ƒç´ ï¼‰å†…è”å…ƒç´ -inline-element\"><a href=\"#ï¼ˆè¡Œå†…å…ƒç´ ï¼‰å†…è”å…ƒç´ -inline-element\" class=\"headerlink\" title=\"ï¼ˆè¡Œå†…å…ƒç´ ï¼‰å†…è”å…ƒç´ (inline element)\"></a>ï¼ˆè¡Œå†…å…ƒç´ ï¼‰å†…è”å…ƒç´ (inline element)</h4><ul>\n<li>a - é”šç‚¹</li>\n<li>abbr - ç¼©å†™</li>\n<li>acronym - é¦–å­—</li>\n<li>b - ç²—ä½“(ä¸æ¨è)</li>\n<li>bdo - bidi override</li>\n<li>big - å¤§å­—ä½“</li>\n<li>br - æ¢è¡Œ</li>\n<li>cite - å¼•ç”¨</li>\n<li>code - è®¡ç®—æœºä»£ç (åœ¨å¼•ç”¨æºç çš„æ—¶å€™éœ€è¦)</li>\n<li>dfn - å®šä¹‰å­—æ®µ</li>\n<li>em - å¼ºè°ƒ</li>\n<li>font - å­—ä½“è®¾å®š(ä¸æ¨è)</li>\n<li>i - æ–œä½“</li>\n<li>img - å›¾ç‰‡</li>\n<li>input - è¾“å…¥æ¡†</li>\n<li>kbd - å®šä¹‰é”®ç›˜æ–‡æœ¬</li>\n<li>label - è¡¨æ ¼æ ‡ç­¾</li>\n<li>q - çŸ­å¼•ç”¨</li>\n<li>s - ä¸­åˆ’çº¿(ä¸æ¨è)</li>\n<li>samp - å®šä¹‰èŒƒä¾‹è®¡ç®—æœºä»£ç </li>\n<li>select - é¡¹ç›®é€‰æ‹©</li>\n<li>small - å°å­—ä½“æ–‡æœ¬</li>\n<li>span - å¸¸ç”¨å†…è”å®¹å™¨ï¼Œå®šä¹‰æ–‡æœ¬å†…åŒºå—</li>\n<li>strike - ä¸­åˆ’çº¿</li>\n<li>strong - ç²—ä½“å¼ºè°ƒ</li>\n<li>sub - ä¸‹æ ‡</li>\n<li>sup - ä¸Šæ ‡</li>\n<li>textarea - å¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†</li>\n<li>tt - ç”µä¼ æ–‡æœ¬</li>\n<li>u - ä¸‹åˆ’çº¿</li>\n<li>var - å®šä¹‰å˜é‡</li>\n</ul>\n<h4 id=\"å—å…ƒç´ -block-element\"><a href=\"#å—å…ƒç´ -block-element\" class=\"headerlink\" title=\"å—å…ƒç´ (block element)\"></a>å—å…ƒç´ (block element)</h4><ul>\n<li>address - åœ°å€</li>\n<li>blockquote - å—å¼•ç”¨</li>\n<li>center - ä¸¾ä¸­å¯¹é½å—</li>\n<li>dir - ç›®å½•åˆ—è¡¨</li>\n<li>div - å¸¸ç”¨å—çº§å®¹æ˜“ï¼Œä¹Ÿæ˜¯css layoutçš„ä¸»è¦æ ‡ç­¾</li>\n<li>dl - å®šä¹‰åˆ—è¡¨</li>\n<li>fieldset - formæ§åˆ¶ç»„</li>\n<li>form - äº¤äº’è¡¨å•</li>\n<li>h1 - å¤§æ ‡é¢˜</li>\n<li>h2 - å‰¯æ ‡é¢˜</li>\n<li>h3 - 3çº§æ ‡é¢˜</li>\n<li>h4 - 4çº§æ ‡é¢˜</li>\n<li>h5 - 5çº§æ ‡é¢˜</li>\n<li>h6 - 6çº§æ ‡é¢˜</li>\n<li>hr - æ°´å¹³åˆ†éš”çº¿</li>\n<li>isindex - input prompt</li>\n<li>menu - èœå•åˆ—è¡¨</li>\n<li>noframes - frameså¯é€‰å†…å®¹ï¼Œï¼ˆå¯¹äºä¸æ”¯æŒframeçš„æµè§ˆå™¨æ˜¾ç¤ºæ­¤åŒºå—å†…å®¹</li>\n<li>noscript - ï¼‰å¯é€‰è„šæœ¬å†…å®¹ï¼ˆå¯¹äºä¸æ”¯æŒscriptçš„æµè§ˆå™¨æ˜¾ç¤ºæ­¤å†…å®¹ï¼‰</li>\n<li>ol - æ’åºè¡¨å•</li>\n<li>p - æ®µè½</li>\n<li>pre - æ ¼å¼åŒ–æ–‡æœ¬</li>\n<li>table - è¡¨æ ¼</li>\n<li>ul - éæ’åºåˆ—è¡¨</li>\n</ul>\n<h4 id=\"å¯å˜å…ƒç´ \"><a href=\"#å¯å˜å…ƒç´ \" class=\"headerlink\" title=\"å¯å˜å…ƒç´ \"></a>å¯å˜å…ƒç´ </h4><p>å¯å˜å…ƒç´ ä¸ºæ ¹æ®ä¸Šä¸‹æ–‡è¯­å¢ƒå†³å®šè¯¥å…ƒç´ ä¸ºå—å…ƒç´ æˆ–è€…è¡Œå†…å…ƒç´ ã€‚</p>\n<ul>\n<li>applet - java applet</li>\n<li>button - æŒ‰é’®</li>\n<li>del - åˆ é™¤æ–‡æœ¬</li>\n<li>iframe - inline frame</li>\n<li>ins - æ’å…¥çš„æ–‡æœ¬</li>\n<li>map - å›¾ç‰‡åŒºå—(map)</li>\n<li>object - objectå¯¹è±¡</li>\n<li>script - å®¢æˆ·ç«¯è„šæœ¬</li>\n</ul>\n<h3 id=\"é©¾è½»å°±ç†Ÿï¼š\"><a href=\"#é©¾è½»å°±ç†Ÿï¼š\" class=\"headerlink\" title=\"é©¾è½»å°±ç†Ÿï¼š\"></a>é©¾è½»å°±ç†Ÿï¼š</h3><h4 id=\"åŒºåˆ«ï¼š\"><a href=\"#åŒºåˆ«ï¼š\" class=\"headerlink\" title=\"åŒºåˆ«ï¼š\"></a>åŒºåˆ«ï¼š</h4><ol>\n<li>å—çº§å…ƒç´ ä¼šç‹¬å ä¸€è¡Œï¼Œå…¶å®½åº¦è‡ªåŠ¨å¡«æ»¡å…¶çˆ¶å…ƒç´ å®½åº¦<br>è¡Œå†…å…ƒç´ ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œç›¸é‚»çš„è¡Œå†…å…ƒç´ ä¼šæ’åˆ—åœ¨åŒä¸€è¡Œé‡Œï¼ŒçŸ¥é“ä¸€è¡Œæ’ä¸ä¸‹ï¼Œæ‰ä¼šæ¢è¡Œï¼Œå…¶å®½åº¦éšå…ƒç´ çš„å†…å®¹è€Œå˜åŒ–</li>\n<li>å—çº§å…ƒç´ å¯ä»¥è®¾ç½® width, heightå±æ€§ï¼Œã€æ³¨æ„ï¼šå—çº§å…ƒç´ å³ä½¿è®¾ç½®äº†å®½åº¦ï¼Œä»ç„¶æ˜¯ç‹¬å ä¸€è¡Œçš„ã€‘<br>è¡Œå†…å…ƒç´ è®¾ç½®width, heightæ— æ•ˆ;</li>\n<li>å—çº§å…ƒç´ å¯ä»¥è®¾ç½®margin å’Œ padding.<br>è¡Œå†…å…ƒç´ çš„æ°´å¹³æ–¹å‘çš„padding-left,padding-right,margin-left,margin-right éƒ½äº§ç”Ÿè¾¹è·æ•ˆæœï¼Œä½†æ˜¯ç«–ç›´æ–¹å‘çš„padding-top,padding-bottom,margin-top,margin-bottoméƒ½ä¸ä¼šäº§ç”Ÿè¾¹è·æ•ˆæœã€‚ï¼ˆæ°´å¹³æ–¹å‘æœ‰æ•ˆï¼Œç«–ç›´æ–¹å‘æ— æ•ˆï¼‰</li>\n</ol>\n<h3 id=\"é’å‡ºæ–¼è“\"><a href=\"#é’å‡ºæ–¼è“\" class=\"headerlink\" title=\"é’å‡ºæ–¼è“:\"></a>é’å‡ºæ–¼è“:</h3><ul>\n<li>è¡Œå†…å…ƒç´ ä¸å—çº§å…ƒç´ ç›´è§‚ä¸Šçš„åŒºåˆ«<br>è¡Œå†…å…ƒç´ ä¼šåœ¨ä¸€æ¡ç›´çº¿ä¸Šæ’åˆ—ï¼Œéƒ½æ˜¯åŒä¸€è¡Œçš„ï¼Œæ°´å¹³æ–¹å‘æ’åˆ—<br>å—çº§å…ƒç´ å„å æ®ä¸€è¡Œï¼Œå‚ç›´æ–¹å‘æ’åˆ—ã€‚å—çº§å…ƒç´ ä»æ–°è¡Œå¼€å§‹ç»“æŸæ¥ç€ä¸€ä¸ªæ–­è¡Œã€‚</li>\n<li>å—çº§å…ƒç´ å¯ä»¥åŒ…å«è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ ã€‚è¡Œå†…å…ƒç´ ä¸èƒ½åŒ…å«å—çº§å…ƒç´ ã€‚</li>\n<li>è¡Œå†…å…ƒç´ ä¸å—çº§å…ƒç´ å±æ€§çš„ä¸åŒï¼Œä¸»è¦æ˜¯ç›’æ¨¡å‹å±æ€§ä¸Š<br>è¡Œå†…å…ƒç´ è®¾ç½®widthæ— æ•ˆï¼Œheightæ— æ•ˆ(å¯ä»¥è®¾ç½®line-height)ï¼Œmarginä¸Šä¸‹æ— æ•ˆï¼Œpaddingä¸Šä¸‹æ— æ•ˆ</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">displayï¼šinline è¡Œå†…å…ƒç´ &#x2F;å†…è”å…ƒç´ </span><br><span class=\"line\">display: block å—çº§å…ƒç´ </span><br><span class=\"line\">display:inline-block è®¾ç½®æˆè¡Œå†…å—çº§å…ƒç´ ã€‚</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¡Œå†…å—çº§å…ƒç´ :å’Œå…¶ä»–å…ƒç´ åŒä¸€è¡Œï¼ˆè¡Œå†…å…ƒç´ ç‰¹ç‚¹ï¼‰ï¼Œå¯ä»¥è®¾ç½®å…ƒç´ çš„å®½é«˜ç­‰ï¼ˆå—çº§å…ƒç´ ç‰¹ç‚¹ï¼‰ï¼›è¿™æ ·çš„å…ƒç´ æœ‰img inputï¼›å®ƒä»¬ä¸ºè¡Œå†…å…ƒç´ ï¼Œä½†å¯ä»¥æ”¹å˜å®½å’Œé«˜ï¼›<br>ä½†æˆ‘åœ¨æˆ‘å°è±¡ä¸­ï¼Œè²Œä¼¼æ²¡æœ‰é»˜è®¤æ ·å¼æ˜¯inline-blockçš„å…ƒç´ ã€‚</p>\n</blockquote>\n<h3 id=\"èä¼šè´¯é€šï¼š\"><a href=\"#èä¼šè´¯é€šï¼š\" class=\"headerlink\" title=\"èä¼šè´¯é€šï¼š\"></a>èä¼šè´¯é€šï¼š</h3><ul>\n<li>è¡Œå†…å…ƒç´ å±æ€§<ol>\n<li>è¡Œå†…å…ƒç´ å±æ€§æ ‡ç­¾å®ƒå’Œå…¶å®ƒæ ‡ç­¾å¤„åœ¨åŒä¸€è¡Œå†…</li>\n<li>è¡Œå†…å…ƒç´ å±æ€§æ ‡ç­¾æ— æ³•è®¾ç½®å®½åº¦ï¼Œé«˜åº¦ è¡Œé«˜ è·é¡¶éƒ¨è·ç¦» è·åº•éƒ¨è·ç¦»</li>\n<li>è¡Œå†…å…ƒç´ å±æ€§æ ‡ç­¾çš„å®½åº¦æ˜¯ç›´æ¥ç”±å†…éƒ¨çš„æ–‡å­—æˆ–è€…å›¾ç‰‡ç­‰å†…å®¹æ’‘å¼€çš„</li>\n<li>è¡Œå†…å…ƒç´ å±æ€§æ ‡ç­¾å†…éƒ¨ä¸èƒ½åµŒå¥—è¡Œå±æ€§æ ‡ç­¾ï¼ˆaé“¾æ¥å†…ä¸èƒ½åµŒå¥—å…¶ä»–é“¾æ¥ï¼‰</li>\n</ol>\n</li>\n<li>å—çº§å…ƒç´ å±æ€§<ol>\n<li>æ¯ä¸€ä¸ªå—çº§å…ƒç´ å±æ€§æ ‡ç­¾éƒ½æ˜¯ä»æ–°çš„ä¸€è¡Œå¼€å§‹ï¼Œè€Œä¸”ä¹‹åçš„å…ƒç´ ä¹Ÿéƒ½ä¼šä»æ–°çš„ä¸€è¡Œå¼€å§‹ï¼ˆå› ä¸ºæ¯ä¸€ä¸ªå—å±æ€§æ ‡ç­¾éƒ½ä¼šç›´æ¥å æ®ä¸€æ•´è¡Œçš„å†…å®¹ï¼Œå¯¼è‡´ä¸‹é¢çš„å†…å®¹ä¹Ÿåªèƒ½ä»æ–°çš„ä¸€è¡Œå¼€å§‹ï¼‰</li>\n<li>å—çº§å…ƒç´ å±æ€§æ ‡ç­¾éƒ½æ˜¯å¯ä»¥è®¾ç½®å®½åº¦ã€é«˜åº¦ï¼Œè¡Œé«˜ï¼Œè·é¡¶éƒ¨è·ç¦»ï¼Œè·åº•éƒ¨è·ç¦»</li>\n<li>å—çº§å…ƒç´ å±æ€§æ ‡ç­¾çš„å®½åº¦å‡å¦‚ä¸åšè®¾ç½®ï¼Œä¼šç›´æ¥é»˜è®¤ä¸ºçˆ¶å…ƒç´ å®½åº¦çš„100%</li>\n<li>å—çº§å…ƒç´ å±æ€§æ ‡ç­¾æ˜¯å¯ä»¥ç›´æ¥åµŒå¥—çš„</li>\n<li>pæ ‡ç­¾ä¸­ä¸èƒ½åµŒå¥—divæ ‡ç­¾</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"å‡ºç±»æ‹”èƒï¼š\"><a href=\"#å‡ºç±»æ‹”èƒï¼š\" class=\"headerlink\" title=\"å‡ºç±»æ‹”èƒï¼š\"></a>å‡ºç±»æ‹”èƒï¼š</h3><ul>\n<li><p>CSSè®¾ç½®è¡Œå†…å…ƒç´ çš„</p>\n<ul>\n<li><p>æ°´å¹³å±…ä¸­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div&#123;text-align:center&#125; &#x2F;*DIVå†…çš„è¡Œå†…å…ƒç´ å‡ä¼šæ°´å¹³å±…ä¸­*&#x2F; </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>å‚ç›´å±…ä¸­</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div&#123;height:30px; line-height:30px&#125; &#x2F;*DIVå†…çš„è¡Œå†…å…ƒç´ å‡ä¼šå‚ç›´å±…ä¸­*&#x2F; </span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>CSSè®¾ç½®å—çº§å…ƒç´ çš„<br>- æ°´å¹³å±…ä¸­<br><code>div p&#123;margin:0 auto; width:500px&#125; /*å—çº§å…ƒç´ pä¸€å®šè¦è®¾ç½®å®½åº¦ï¼Œ æ‰èƒ½ç›¸å½“äºDIVçˆ¶å®¹å™¨æ°´å¹³å±…ä¸­*/</code><br>- å‚ç›´å±…ä¸­<br><code>div&#123;width:500px&#125; /*DIVçˆ¶å®¹å™¨è®¾ç½®å®½åº¦*/ div p&#123;margin:0 aut0; height:30px; line-height:30px&#125; /*å—çº§å…ƒç´ pä¹Ÿå¯ä»¥åŠ ä¸ªå®½åº¦ï¼Œ ä»¥è¾¾åˆ°ç›¸å¯¹äºDIVçˆ¶å®¹å™¨çš„æ°´å¹³å±…ä¸­æ•ˆæœ*/</code></p>\n</li>\n</ul>\n<blockquote>\n<p>åœ¨ä»¥åçš„å®é™…é¡¹ç›®ä¸­ï¼Œå—çº§å…ƒç´ çš„å‚ç›´å±…ä¸­å¸ƒå±€æ–¹å¼å¯èƒ½ä¼šç¢°åˆ°æ¯”è¿™ä¸ªæ›´å¤æ‚, ä¼šå°è¯•ç”¨inline-blockå»è§£å†³é—®é¢˜ï¼Œå¸Œæœ›åç»­å¤šå¤šå…³æ³¨ï¼›å¦å¤–æ¨èå„ä½ä¸€æœ¬ä¹¦è‚–å¿—åã€ŠCSSæ ¸å¿ƒæŠ€æœ¯è¯¦è§£ã€‹</p>\n</blockquote>\n<h3 id=\"è¿”ç’å½’çœŸï¼š\"><a href=\"#è¿”ç’å½’çœŸï¼š\" class=\"headerlink\" title=\"è¿”ç’å½’çœŸï¼š\"></a>è¿”ç’å½’çœŸï¼š</h3><p>åœ¨æ ‡å‡†æ–‡æ¡£æµé‡Œé¢ï¼Œå—çº§å…ƒç´ å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">â‘  æ€»æ˜¯åœ¨æ–°è¡Œä¸Šå¼€å§‹ï¼Œå æ®ä¸€æ•´è¡Œï¼›</span><br><span class=\"line\">â‘¡ é«˜åº¦ï¼Œè¡Œé«˜ä»¥åŠå¤–è¾¹è·å’Œå†…è¾¹è·éƒ½å¯æ§åˆ¶ï¼›</span><br><span class=\"line\">â‘¢ å®½å¸¦å§‹ç»ˆæ˜¯ä¸æµè§ˆå™¨å®½åº¦ä¸€æ ·ï¼Œä¸å†…å®¹æ— å…³ï¼›</span><br><span class=\"line\">â‘£ å®ƒå¯ä»¥å®¹çº³å†…è”å…ƒç´ å’Œå…¶ä»–å—å…ƒç´ ã€‚</span><br></pre></td></tr></table></figure>\n\n<p>è¡Œå†…å…ƒç´ çš„ç‰¹ç‚¹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">â‘  å’Œå…¶ä»–å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Šï¼›</span><br><span class=\"line\">â‘¡ é«˜ï¼Œè¡Œé«˜åŠå¤–è¾¹è·å’Œå†…è¾¹è·éƒ¨åˆ†å¯æ”¹å˜ï¼›</span><br><span class=\"line\">â‘¢ å®½åº¦åªä¸å†…å®¹æœ‰å…³ï¼›</span><br><span class=\"line\">â‘£ è¡Œå†…å…ƒç´ åªèƒ½å®¹çº³æ–‡æœ¬æˆ–è€…å…¶ä»–è¡Œå†…å…ƒç´ ã€‚</span><br><span class=\"line\">ä¸å¯ä»¥è®¾ç½®å®½é«˜ï¼Œå…¶å®½åº¦éšç€å†…å®¹å¢åŠ ï¼Œé«˜åº¦éšå­—ä½“å¤§å°è€Œæ”¹å˜ï¼Œå†…è”å…ƒç´ å¯ä»¥è®¾ç½®å¤–è¾¹ç•Œï¼Œä½†æ˜¯å¤–è¾¹ç•Œä¸å¯¹ä¸Šä¸‹èµ·ä½œç”¨ï¼Œåªèƒ½å¯¹å·¦å³èµ·ä½œç”¨ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å†…è¾¹ç•Œï¼Œä½†æ˜¯å†…è¾¹ç•Œåœ¨ie6ä¸­ä¸å¯¹ä¸Šä¸‹èµ·ä½œç”¨ï¼Œåªèƒ½å¯¹å·¦å³èµ·ä½œç”¨</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-è·¨é¡µé¢é€šä¿¡\"><a href=\"#2-è·¨é¡µé¢é€šä¿¡\" class=\"headerlink\" title=\"2.è·¨é¡µé¢é€šä¿¡\"></a>2.è·¨é¡µé¢é€šä¿¡</h1><h2 id=\"å¼•è¨€\"><a href=\"#å¼•è¨€\" class=\"headerlink\" title=\"å¼•è¨€\"></a>å¼•è¨€</h2><p>åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªTabé¡µï¼Œæ¯ä¸ªTabé¡µå¯ä»¥ç²—ç•¥ç†è§£ä¸ºä¸€ä¸ªâ€œç‹¬ç«‹â€çš„è¿è¡Œç¯å¢ƒï¼Œå³ä½¿æ˜¯å…¨å±€å¯¹è±¡ä¹Ÿä¸ä¼šåœ¨å¤šä¸ªTabé—´å…±äº«ã€‚ç„¶è€Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½åœ¨è¿™äº›â€œç‹¬ç«‹â€çš„Tabé¡µé¢ä¹‹é—´åŒæ­¥é¡µé¢çš„æ•°æ®ã€ä¿¡æ¯æˆ–çŠ¶æ€ã€‚</p>\n<p>æ­£å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šæˆ‘åœ¨åˆ—è¡¨é¡µç‚¹å‡»â€œæ”¶è—â€åï¼Œå¯¹åº”çš„è¯¦æƒ…é¡µæŒ‰é’®ä¼šè‡ªåŠ¨æ›´æ–°ä¸ºâ€œå·²æ”¶è—â€çŠ¶æ€ï¼›ç±»ä¼¼çš„ï¼Œåœ¨è¯¦æƒ…é¡µç‚¹å‡»â€œæ”¶è—â€åï¼Œåˆ—è¡¨é¡µä¸­æŒ‰é’®ä¹Ÿä¼šæ›´æ–°ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/4/1/169d767c01990c37?imageslim\" alt=\"è·¨é¡µé¢é€šä¿¡å®ä¾‹\"></p>\n<p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å‰ç«¯è·¨é¡µé¢é€šä¿¡ã€‚</p>\n<p>ä½ çŸ¥é“å“ªäº›è·¨é¡µé¢é€šä¿¡çš„æ–¹å¼å‘¢ï¼Ÿå¦‚æœä¸æ¸…æ¥šï¼Œä¸‹é¢æˆ‘å°±å¸¦å¤§å®¶æ¥çœ‹çœ‹ä¸ƒç§è·¨é¡µé¢é€šä¿¡çš„æ–¹å¼ã€‚</p>\n<hr>\n<h2 id=\"ä¸€ã€åŒæºé¡µé¢é—´çš„è·¨é¡µé¢é€šä¿¡\"><a href=\"#ä¸€ã€åŒæºé¡µé¢é—´çš„è·¨é¡µé¢é€šä¿¡\" class=\"headerlink\" title=\"ä¸€ã€åŒæºé¡µé¢é—´çš„è·¨é¡µé¢é€šä¿¡\"></a>ä¸€ã€åŒæºé¡µé¢é—´çš„è·¨é¡µé¢é€šä¿¡</h2><blockquote>\n<p>ä»¥ä¸‹å„ç§æ–¹å¼çš„ <a href=\"https://alienzhou.github.io/cross-tab-communication/\">åœ¨çº¿ Demo å¯ä»¥æˆ³è¿™é‡Œ &gt;&gt;</a></p>\n</blockquote>\n<p>æµè§ˆå™¨çš„<a href=\"https://en.wikipedia.org/wiki/Same-origin_policy\">åŒæºç­–ç•¥</a>åœ¨ä¸‹è¿°çš„ä¸€äº›è·¨é¡µé¢é€šä¿¡æ–¹æ³•ä¸­ä¾ç„¶å­˜åœ¨é™åˆ¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œåœ¨æ»¡è¶³åŒæºç­–ç•¥çš„æƒ…å†µä¸‹ï¼Œéƒ½æœ‰å“ªäº›æŠ€æœ¯å¯ä»¥ç”¨æ¥å®ç°è·¨é¡µé¢é€šä¿¡ã€‚</p>\n<h3 id=\"1-BroadCast-Channel\"><a href=\"#1-BroadCast-Channel\" class=\"headerlink\" title=\"1. BroadCast Channel\"></a>1. BroadCast Channel</h3><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel\">BroadCast Channel</a> å¯ä»¥å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºå¹¿æ’­çš„é€šä¿¡é¢‘é“ã€‚å½“æ‰€æœ‰é¡µé¢éƒ½ç›‘å¬åŒä¸€é¢‘é“çš„æ¶ˆæ¯æ—¶ï¼Œå…¶ä¸­æŸä¸€ä¸ªé¡µé¢é€šè¿‡å®ƒå‘é€çš„æ¶ˆæ¯å°±ä¼šè¢«å…¶ä»–æ‰€æœ‰é¡µé¢æ”¶åˆ°ã€‚å®ƒçš„APIå’Œç”¨æ³•éƒ½éå¸¸ç®€å•ã€‚</p>\n<p>ä¸‹é¢çš„æ–¹å¼å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ ‡è¯†ä¸º<code>AlienZHOU</code>çš„é¢‘é“ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">const bc &#x3D; new BroadcastChannel(&#39;AlienZHOU&#39;);</span><br></pre></td></tr></table></figure>\n\n<p>å„ä¸ªé¡µé¢å¯ä»¥é€šè¿‡<code>onmessage</code>æ¥ç›‘å¬è¢«å¹¿æ’­çš„æ¶ˆæ¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bc.onmessage &#x3D; function (e) &#123;</span><br><span class=\"line\">    const data &#x3D; e.data;</span><br><span class=\"line\">    const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">    console.log(&#39;[BroadcastChannel] receive message:&#39;, text);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>è¦å‘é€æ¶ˆæ¯æ—¶åªéœ€è¦è°ƒç”¨å®ä¾‹ä¸Šçš„<code>postMessage</code>æ–¹æ³•å³å¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bc.postMessage(mydata);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Broadcast Channel çš„å…·ä½“çš„ä½¿ç”¨æ–¹å¼å¯ä»¥çœ‹è¿™ç¯‡<a href=\"https://juejin.im/post/6844903811228663815\">ã€Šã€3åˆ†é’Ÿé€Ÿè§ˆã€‘å‰ç«¯å¹¿æ’­å¼é€šä¿¡ï¼šBroadcast Channelã€‹</a>ã€‚</p>\n</blockquote>\n<h3 id=\"2-Service-Worker\"><a href=\"#2-Service-Worker\" class=\"headerlink\" title=\"2. Service Worker\"></a>2. Service Worker</h3><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API\">Service Worker</a> æ˜¯ä¸€ä¸ªå¯ä»¥é•¿æœŸè¿è¡Œåœ¨åå°çš„ Workerï¼Œèƒ½å¤Ÿå®ç°ä¸é¡µé¢çš„åŒå‘é€šä¿¡ã€‚å¤šé¡µé¢å…±äº«é—´çš„ Service Worker å¯ä»¥å…±äº«ï¼Œå°† Service Worker ä½œä¸ºæ¶ˆæ¯çš„å¤„ç†ä¸­å¿ƒï¼ˆä¸­å¤®ç«™ï¼‰å³å¯å®ç°å¹¿æ’­æ•ˆæœã€‚</p>\n<blockquote>\n<p>Service Worker ä¹Ÿæ˜¯ PWA ä¸­çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œç”±äºæœ¬æ–‡é‡ç‚¹ä¸åœ¨ PWA ï¼Œå› æ­¤å¦‚æœæƒ³è¿›ä¸€æ­¥äº†è§£ Service Workerï¼Œå¯ä»¥é˜…è¯»æˆ‘ä¹‹å‰çš„æ–‡ç« <a href=\"https://juejin.im/post/6844903588691443725\">ã€PWAå­¦ä¹ ä¸å®è·µã€‘(3) è®©ä½ çš„WebAppç¦»çº¿å¯ç”¨</a>ã€‚</p>\n</blockquote>\n<p>é¦–å…ˆï¼Œéœ€è¦åœ¨é¡µé¢æ³¨å†Œ Service Workerï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* é¡µé¢é€»è¾‘ *&#x2F;</span><br><span class=\"line\">navigator.serviceWorker.register(&#39;..&#x2F;util.sw.js&#39;).then(function () &#123;</span><br><span class=\"line\">    console.log(&#39;Service Worker æ³¨å†ŒæˆåŠŸ&#39;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å…¶ä¸­<code>../util.sw.js</code>æ˜¯å¯¹åº”çš„ Service Worker è„šæœ¬ã€‚Service Worker æœ¬èº«å¹¶ä¸è‡ªåŠ¨å…·å¤‡â€œå¹¿æ’­é€šä¿¡â€çš„åŠŸèƒ½ï¼Œéœ€è¦æˆ‘ä»¬æ·»åŠ äº›ä»£ç ï¼Œå°†å…¶æ”¹é€ æˆæ¶ˆæ¯ä¸­è½¬ç«™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* ..&#x2F;util.sw.js Service Worker é€»è¾‘ *&#x2F;</span><br><span class=\"line\">self.addEventListener(&#39;message&#39;, function (e) &#123;</span><br><span class=\"line\">    console.log(&#39;service worker receive message&#39;, e.data);</span><br><span class=\"line\">    e.waitUntil(</span><br><span class=\"line\">        self.clients.matchAll().then(function (clients) &#123;</span><br><span class=\"line\">            if (!clients || clients.length &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            clients.forEach(function (client) &#123;</span><br><span class=\"line\">                client.postMessage(e.data);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    );</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬åœ¨ Service Worker ä¸­ç›‘å¬äº†<code>message</code>äº‹ä»¶ï¼Œè·å–é¡µé¢ï¼ˆä» Service Worker çš„è§’åº¦å« clientï¼‰å‘é€çš„ä¿¡æ¯ã€‚ç„¶åé€šè¿‡<code>self.clients.matchAll()</code>è·å–å½“å‰æ³¨å†Œäº†è¯¥ Service Worker çš„æ‰€æœ‰é¡µé¢ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ªclientï¼ˆå³é¡µé¢ï¼‰çš„<code>postMessage</code>æ–¹æ³•ï¼Œå‘é¡µé¢å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å°±æŠŠä»ä¸€å¤„ï¼ˆæŸä¸ªTabé¡µé¢ï¼‰æ”¶åˆ°çš„æ¶ˆæ¯é€šçŸ¥ç»™äº†å…¶ä»–é¡µé¢ã€‚</p>\n<p>å¤„ç†å®Œ Service Workerï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ç›‘å¬ Service Worker å‘é€æ¥çš„æ¶ˆæ¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* é¡µé¢é€»è¾‘ *&#x2F;</span><br><span class=\"line\">navigator.serviceWorker.addEventListener(&#39;message&#39;, function (e) &#123;</span><br><span class=\"line\">    const data &#x3D; e.data;</span><br><span class=\"line\">    const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">    console.log(&#39;[Service Worker] receive message:&#39;, text);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æœ€åï¼Œå½“éœ€è¦åŒæ­¥æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥è°ƒç”¨ Service Worker çš„<code>postMessage</code>æ–¹æ³•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* é¡µé¢é€»è¾‘ *&#x2F;</span><br><span class=\"line\">navigator.serviceWorker.controller.postMessage(mydata);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-LocalStorage\"><a href=\"#3-LocalStorage\" class=\"headerlink\" title=\"3. LocalStorage\"></a>3. LocalStorage</h3><p>LocalStorage ä½œä¸ºå‰ç«¯æœ€å¸¸ç”¨çš„æœ¬åœ°å­˜å‚¨ï¼Œå¤§å®¶åº”è¯¥å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼›ä½†<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent\"><code>StorageEvent</code></a>è¿™ä¸ªä¸å®ƒç›¸å…³çš„äº‹ä»¶æœ‰äº›åŒå­¦å¯èƒ½ä¼šæ¯”è¾ƒé™Œç”Ÿã€‚</p>\n<p>å½“ LocalStorage å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘<code>storage</code>äº‹ä»¶ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼ŒæŠŠæ¶ˆæ¯å†™å…¥åˆ°æŸä¸ª LocalStorage ä¸­ï¼›ç„¶ååœ¨å„ä¸ªé¡µé¢å†…ï¼Œé€šè¿‡ç›‘å¬<code>storage</code>äº‹ä»¶å³å¯æ”¶åˆ°é€šçŸ¥ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.addEventListener(&#39;storage&#39;, function (e) &#123;</span><br><span class=\"line\">    if (e.key &#x3D;&#x3D;&#x3D; &#39;ctc-msg&#39;) &#123;</span><br><span class=\"line\">        const data &#x3D; JSON.parse(e.newValue);</span><br><span class=\"line\">        const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">        console.log(&#39;[Storage I] receive message:&#39;, text);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å„ä¸ªé¡µé¢æ·»åŠ å¦‚ä¸Šçš„ä»£ç ï¼Œå³å¯ç›‘å¬åˆ° LocalStorage çš„å˜åŒ–ã€‚å½“æŸä¸ªé¡µé¢éœ€è¦å‘é€æ¶ˆæ¯æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>setItem</code>æ–¹æ³•å³å¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">mydata.st &#x3D; +(new Date);</span><br><span class=\"line\">window.localStorage.setItem(&#39;ctc-msg&#39;, JSON.stringify(mydata));</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼šæˆ‘ä»¬åœ¨mydataä¸Šæ·»åŠ äº†ä¸€ä¸ªå–å½“å‰æ¯«ç§’æ—¶é—´æˆ³çš„<code>.st</code>å±æ€§ã€‚è¿™æ˜¯å› ä¸ºï¼Œ<code>storage</code>äº‹ä»¶åªæœ‰åœ¨å€¼çœŸæ­£æ”¹å˜æ—¶æ‰ä¼šè§¦å‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.localStorage.setItem(&#39;test&#39;, &#39;123&#39;);</span><br><span class=\"line\">window.localStorage.setItem(&#39;test&#39;, &#39;123&#39;);</span><br></pre></td></tr></table></figure>\n\n<p>ç”±äºç¬¬äºŒæ¬¡çš„å€¼<code>&#39;123&#39;</code>ä¸ç¬¬ä¸€æ¬¡çš„å€¼ç›¸åŒï¼Œæ‰€ä»¥ä»¥ä¸Šçš„ä»£ç åªä¼šåœ¨ç¬¬ä¸€æ¬¡<code>setItem</code>æ—¶è§¦å‘<code>storage</code>äº‹ä»¶ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡è®¾ç½®<code>st</code>æ¥ä¿è¯æ¯æ¬¡è°ƒç”¨æ—¶ä¸€å®šä¼šè§¦å‘<code>storage</code>äº‹ä»¶ã€‚</p>\n<h3 id=\"å°æ†©ä¸€ä¸‹\"><a href=\"#å°æ†©ä¸€ä¸‹\" class=\"headerlink\" title=\"å°æ†©ä¸€ä¸‹\"></a>å°æ†©ä¸€ä¸‹</h3><p>ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†ä¸‰ç§å®ç°è·¨é¡µé¢é€šä¿¡çš„æ–¹å¼ï¼Œä¸è®ºæ˜¯å»ºç«‹å¹¿æ’­é¢‘é“çš„ Broadcast Channelï¼Œè¿˜æ˜¯ä½¿ç”¨ Service Worker çš„æ¶ˆæ¯ä¸­è½¬ç«™ï¼ŒæŠ‘æˆ–æ˜¯äº› tricky çš„<code>storage</code>äº‹ä»¶ï¼Œå…¶éƒ½æ˜¯â€œå¹¿æ’­æ¨¡å¼â€ï¼šä¸€ä¸ªé¡µé¢å°†æ¶ˆæ¯é€šçŸ¥ç»™ä¸€ä¸ªâ€œä¸­å¤®ç«™â€ï¼Œå†ç”±â€œä¸­å¤®ç«™â€é€šçŸ¥ç»™å„ä¸ªé¡µé¢ã€‚</p>\n<blockquote>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¿™ä¸ªâ€œä¸­å¤®ç«™â€å¯ä»¥æ˜¯ä¸€ä¸ª BroadCast Channel å®ä¾‹ã€ä¸€ä¸ª Service Worker æˆ–æ˜¯ LocalStorageã€‚</p>\n</blockquote>\n<p>ä¸‹é¢æˆ‘ä»¬ä¼šçœ‹åˆ°å¦å¤–ä¸¤ç§è·¨é¡µé¢é€šä¿¡æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºâ€œå…±äº«å­˜å‚¨+è½®è¯¢æ¨¡å¼â€ã€‚</p>\n<hr>\n<h3 id=\"4-Shared-Worker\"><a href=\"#4-Shared-Worker\" class=\"headerlink\" title=\"4. Shared Worker\"></a>4. Shared Worker</h3><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker\">Shared Worker</a> æ˜¯ Worker å®¶æ—çš„å¦ä¸€ä¸ªæˆå‘˜ã€‚æ™®é€šçš„ Worker ä¹‹é—´æ˜¯ç‹¬ç«‹è¿è¡Œã€æ•°æ®äº’ä¸ç›¸é€šï¼›è€Œå¤šä¸ª Tab æ³¨å†Œçš„ Shared Worker åˆ™å¯ä»¥å®ç°æ•°æ®å…±äº«ã€‚</p>\n<p>Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„é—®é¢˜åœ¨äºï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è½®è¯¢çš„æ–¹å¼ï¼Œæ¥æ‹‰å–æœ€æ–°çš„æ•°æ®ã€‚æ€è·¯å¦‚ä¸‹ï¼š</p>\n<p>è®© Shared Worker æ”¯æŒä¸¤ç§æ¶ˆæ¯ã€‚ä¸€ç§æ˜¯ postï¼ŒShared Worker æ”¶åˆ°åä¼šå°†è¯¥æ•°æ®ä¿å­˜ä¸‹æ¥ï¼›å¦ä¸€ç§æ˜¯ getï¼ŒShared Worker æ”¶åˆ°è¯¥æ¶ˆæ¯åä¼šå°†ä¿å­˜çš„æ•°æ®é€šè¿‡<code>postMessage</code>ä¼ ç»™æ³¨å†Œå®ƒçš„é¡µé¢ã€‚ä¹Ÿå°±æ˜¯è®©é¡µé¢é€šè¿‡ get æ¥ä¸»åŠ¨è·å–ï¼ˆåŒæ­¥ï¼‰æœ€æ–°æ¶ˆæ¯ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šåœ¨é¡µé¢ä¸­å¯åŠ¨ä¸€ä¸ª Shared Workerï¼Œå¯åŠ¨æ–¹å¼éå¸¸ç®€å•ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ Shared Worker åç§°ï¼Œä¹Ÿå¯ä»¥ç•™ç©º</span><br><span class=\"line\">const sharedWorker &#x3D; new SharedWorker(&#39;..&#x2F;util.shared.js&#39;, &#39;ctc&#39;);</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åï¼Œåœ¨è¯¥ Shared Worker ä¸­æ”¯æŒ get ä¸ post å½¢å¼çš„æ¶ˆæ¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* ..&#x2F;util.shared.js: Shared Worker ä»£ç  *&#x2F;</span><br><span class=\"line\">let data &#x3D; null;</span><br><span class=\"line\">self.addEventListener(&#39;connect&#39;, function (e) &#123;</span><br><span class=\"line\">    const port &#x3D; e.ports[0];</span><br><span class=\"line\">    port.addEventListener(&#39;message&#39;, function (event) &#123;</span><br><span class=\"line\">        &#x2F;&#x2F; get æŒ‡ä»¤åˆ™è¿”å›å­˜å‚¨çš„æ¶ˆæ¯æ•°æ®</span><br><span class=\"line\">        if (event.data.get) &#123;</span><br><span class=\"line\">            data &amp;&amp; port.postMessage(data);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#x2F;&#x2F; é get æŒ‡ä»¤åˆ™å­˜å‚¨è¯¥æ¶ˆæ¯æ•°æ®</span><br><span class=\"line\">        else &#123;</span><br><span class=\"line\">            data &#x3D; event.data;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    port.start();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä¹‹åï¼Œé¡µé¢å®šæ—¶å‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯ç»™ Shared Workerï¼Œè½®è¯¢æœ€æ–°çš„æ¶ˆæ¯æ•°æ®ï¼Œå¹¶åœ¨é¡µé¢ç›‘å¬è¿”å›ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å®šæ—¶è½®è¯¢ï¼Œå‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯</span><br><span class=\"line\">setInterval(function () &#123;</span><br><span class=\"line\">    sharedWorker.port.postMessage(&#123;get: true&#125;);</span><br><span class=\"line\">&#125;, 1000);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ç›‘å¬ get æ¶ˆæ¯çš„è¿”å›æ•°æ®</span><br><span class=\"line\">sharedWorker.port.addEventListener(&#39;message&#39;, (e) &#x3D;&gt; &#123;</span><br><span class=\"line\">    const data &#x3D; e.data;</span><br><span class=\"line\">    const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">    console.log(&#39;[Shared Worker] receive message:&#39;, text);</span><br><span class=\"line\">&#125;, false);</span><br><span class=\"line\">sharedWorker.port.start();</span><br></pre></td></tr></table></figure>\n\n<p>æœ€åï¼Œå½“è¦è·¨é¡µé¢é€šä¿¡æ—¶ï¼Œåªéœ€ç»™ Shared Worker <code>postMessage</code>å³å¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">sharedWorker.port.postMessage(mydata);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨<code>addEventListener</code>æ¥æ·»åŠ  Shared Worker çš„æ¶ˆæ¯ç›‘å¬ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨<code>MessagePort.start</code>æ–¹æ³•ï¼Œå³ä¸Šæ–‡ä¸­çš„<code>sharedWorker.port.start()</code>ï¼›å¦‚æœä½¿ç”¨<code>onmessage</code>ç»‘å®šç›‘å¬åˆ™ä¸éœ€è¦ã€‚</p>\n</blockquote>\n<h3 id=\"5-IndexedDB\"><a href=\"#5-IndexedDB\" class=\"headerlink\" title=\"5. IndexedDB\"></a>5. IndexedDB</h3><p>é™¤äº†å¯ä»¥åˆ©ç”¨ Shared Worker æ¥å…±äº«å­˜å‚¨æ•°æ®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸€äº›â€œå…¨å±€æ€§â€ï¼ˆæ”¯æŒè·¨é¡µé¢ï¼‰çš„å­˜å‚¨æ–¹æ¡ˆã€‚ä¾‹å¦‚ <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a> æˆ– cookieã€‚</p>\n<blockquote>\n<p>é‰´äºå¤§å®¶å¯¹ cookie å·²ç»å¾ˆç†Ÿæ‚‰ï¼ŒåŠ ä¹‹ä½œä¸ºâ€œäº’è”ç½‘æœ€æ—©æœŸçš„å­˜å‚¨æ–¹æ¡ˆä¹‹ä¸€â€ï¼Œcookie å·²ç»åœ¨å®é™…åº”ç”¨ä¸­æ‰¿å—äº†è¿œå¤šäºå…¶è®¾è®¡ä¹‹åˆçš„è´£ä»»ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼šä½¿ç”¨ IndexedDB æ¥å®ç°ã€‚</p>\n</blockquote>\n<p>å…¶æ€è·¯å¾ˆç®€å•ï¼šä¸ Shared Worker æ–¹æ¡ˆç±»ä¼¼ï¼Œæ¶ˆæ¯å‘é€æ–¹å°†æ¶ˆæ¯å­˜è‡³ IndexedDB ä¸­ï¼›æ¥æ”¶æ–¹ï¼ˆä¾‹å¦‚æ‰€æœ‰é¡µé¢ï¼‰åˆ™é€šè¿‡è½®è¯¢å»è·å–æœ€æ–°çš„ä¿¡æ¯ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•å°è£…å‡ ä¸ª IndexedDB çš„å·¥å…·æ–¹æ³•ã€‚</p>\n<ul>\n<li><p>æ‰“å¼€æ•°æ®åº“è¿æ¥ï¼š</p>\n<p>function openStore() { const storeName = â€˜ctc_aleinzhouâ€™; return new Promise(function (resolve, reject) { if (!(â€˜indexedDBâ€™ in window)) { return reject(â€˜donâ€™t support indexedDBâ€™); } const request = indexedDB.open(â€˜CTC_DBâ€™, 1); request.onerror = reject; request.onsuccess =  e =&gt; resolve(e.target.result); request.onupgradeneeded = function (e) { const db = e.srcElement.result; if (e.oldVersion === 0 &amp;&amp; !db.objectStoreNames.contains(storeName)) { const store = db.createObjectStore(storeName, {keyPath: â€˜tagâ€™}); store.createIndex(storeName + â€˜Indexâ€™, â€˜tagâ€™, {unique: false}); } } }); }</p>\n</li>\n<li><p>å­˜å‚¨æ•°æ®</p>\n<p>function saveData(db, data) { return new Promise(function (resolve, reject) { const STORE_NAME = â€˜ctc_aleinzhouâ€™; const tx = db.transaction(STORE_NAME, â€˜readwriteâ€™); const store = tx.objectStore(STORE_NAME); const request = store.put({tag: â€˜ctc_dataâ€™, data}); request.onsuccess = () =&gt; resolve(db); request.onerror = reject; }); }</p>\n</li>\n<li><p>æŸ¥è¯¢/è¯»å–æ•°æ®</p>\n<p>function query(db) { const STORE_NAME = â€˜ctc_aleinzhouâ€™; return new Promise(function (resolve, reject) { try { const tx = db.transaction(STORE_NAME, â€˜readonlyâ€™); const store = tx.objectStore(STORE_NAME); const dbRequest = store.get(â€˜ctc_dataâ€™); dbRequest.onsuccess = e =&gt; resolve(e.target.result); dbRequest.onerror = reject; } catch (err) { reject(err); } }); }</p>\n</li>\n</ul>\n<p>å‰©ä¸‹çš„å·¥ä½œå°±éå¸¸ç®€å•äº†ã€‚é¦–å…ˆæ‰“å¼€æ•°æ®è¿æ¥ï¼Œå¹¶åˆå§‹åŒ–æ•°æ®ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openStore().then(db &#x3D;&gt; saveData(db, null))</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹äºæ¶ˆæ¯è¯»å–ï¼Œå¯ä»¥åœ¨è¿æ¥ä¸åˆå§‹åŒ–åè½®è¯¢ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openStore().then(db &#x3D;&gt; saveData(db, null)).then(function (db) &#123;</span><br><span class=\"line\">    setInterval(function () &#123;</span><br><span class=\"line\">        query(db).then(function (res) &#123;</span><br><span class=\"line\">            if (!res || !res.data) &#123;</span><br><span class=\"line\">                return;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            const data &#x3D; res.data;</span><br><span class=\"line\">            const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">            console.log(&#39;[Storage I] receive message:&#39;, text);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;, 1000);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æœ€åï¼Œè¦å‘é€æ¶ˆæ¯æ—¶ï¼Œåªéœ€å‘ IndexedDB å­˜å‚¨æ•°æ®å³å¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">openStore().then(db &#x3D;&gt; saveData(db, null)).then(function (db) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; â€¦â€¦ çœç•¥ä¸Šé¢çš„è½®è¯¢ä»£ç </span><br><span class=\"line\">    &#x2F;&#x2F; è§¦å‘ saveData çš„æ–¹æ³•å¯ä»¥æ”¾åœ¨ç”¨æˆ·æ“ä½œçš„äº‹ä»¶ç›‘å¬å†…</span><br><span class=\"line\">    saveData(db, mydata);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å°æ†©ä¸€ä¸‹-1\"><a href=\"#å°æ†©ä¸€ä¸‹-1\" class=\"headerlink\" title=\"å°æ†©ä¸€ä¸‹\"></a>å°æ†©ä¸€ä¸‹</h3><p>åœ¨â€œå¹¿æ’­æ¨¡å¼â€å¤–ï¼Œæˆ‘ä»¬åˆäº†è§£äº†â€œå…±äº«å­˜å‚¨+é•¿è½®è¯¢â€è¿™ç§æ¨¡å¼ã€‚ä¹Ÿè®¸ä½ ä¼šè®¤ä¸ºé•¿è½®è¯¢æ²¡æœ‰ç›‘å¬æ¨¡å¼ä¼˜é›…ï¼Œä½†å®é™…ä¸Šï¼Œæœ‰äº›æ—¶å€™ä½¿ç”¨â€œå…±äº«å­˜å‚¨â€çš„å½¢å¼æ—¶ï¼Œä¸ä¸€å®šè¦æ­é…é•¿è½®è¯¢ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œåœ¨å¤š Tab åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç¦»å¼€ Tab A åˆ°å¦ä¸€ä¸ª Tab B ä¸­æ“ä½œï¼›è¿‡äº†ä¸€ä¼šæˆ‘ä»¬ä» Tab B åˆ‡æ¢å› Tab A æ—¶ï¼Œå¸Œæœ›å°†ä¹‹å‰åœ¨ Tab B ä¸­çš„æ“ä½œçš„ä¿¡æ¯åŒæ­¥å›æ¥ã€‚è¿™æ—¶å€™ï¼Œå…¶å®åªç”¨åœ¨ Tab A ä¸­ç›‘å¬<code>visibilitychange</code>è¿™æ ·çš„äº‹ä»¶ï¼Œæ¥åšä¸€æ¬¡ä¿¡æ¯åŒæ­¥å³å¯ã€‚</p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä¼šå†ä»‹ç»ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºâ€œå£å£ç›¸ä¼ â€æ¨¡å¼ã€‚</p>\n<hr>\n<h3 id=\"6-window-open-window-opener\"><a href=\"#6-window-open-window-opener\" class=\"headerlink\" title=\"6. window.open + window.opener\"></a>6. window.open + window.opener</h3><p>å½“æˆ‘ä»¬ä½¿ç”¨<code>window.open</code>æ‰“å¼€é¡µé¢æ—¶ï¼Œæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¢«æ‰“å¼€é¡µé¢<code>window</code>çš„å¼•ç”¨ã€‚è€Œåœ¨æœªæ˜¾ç¤ºæŒ‡å®š<code>noopener</code>æ—¶ï¼Œè¢«æ‰“å¼€çš„é¡µé¢å¯ä»¥é€šè¿‡<code>window.opener</code>è·å–åˆ°æ‰“å¼€å®ƒçš„é¡µé¢çš„å¼•ç”¨ â€”â€” é€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬å°±å°†è¿™äº›é¡µé¢å»ºç«‹èµ·äº†è”ç³»ï¼ˆä¸€ç§æ ‘å½¢ç»“æ„ï¼‰ã€‚</p>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠ<code>window.open</code>æ‰“å¼€çš„é¡µé¢çš„<code>window</code>å¯¹è±¡æ”¶é›†èµ·æ¥ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let childWins &#x3D; [];</span><br><span class=\"line\">document.getElementById(&#39;btn&#39;).addEventListener(&#39;click&#39;, function () &#123;</span><br><span class=\"line\">    const win &#x3D; window.open(&#39;.&#x2F;some&#x2F;sample&#39;);</span><br><span class=\"line\">    childWins.push(win);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åï¼Œå½“æˆ‘ä»¬éœ€è¦å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œä½œä¸ºæ¶ˆæ¯çš„å‘èµ·æ–¹ï¼Œä¸€ä¸ªé¡µé¢éœ€è¦åŒæ—¶é€šçŸ¥å®ƒæ‰“å¼€çš„é¡µé¢ä¸æ‰“å¼€å®ƒçš„é¡µé¢ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; è¿‡æ»¤æ‰å·²ç»å…³é—­çš„çª—å£</span><br><span class=\"line\">childWins &#x3D; childWins.filter(w &#x3D;&gt; !w.closed);</span><br><span class=\"line\">if (childWins.length &gt; 0) &#123;</span><br><span class=\"line\">    mydata.fromOpenner &#x3D; false;</span><br><span class=\"line\">    childWins.forEach(w &#x3D;&gt; w.postMessage(mydata));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">if (window.opener &amp;&amp; !window.opener.closed) &#123;</span><br><span class=\"line\">    mydata.fromOpenner &#x3D; true;</span><br><span class=\"line\">    window.opener.postMessage(mydata);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼Œæˆ‘è¿™é‡Œå…ˆç”¨<code>.closed</code>å±æ€§è¿‡æ»¤æ‰å·²ç»è¢«å…³é—­çš„ Tab çª—å£ã€‚è¿™æ ·ï¼Œä½œä¸ºæ¶ˆæ¯å‘é€æ–¹çš„ä»»åŠ¡å°±å®Œæˆäº†ã€‚ä¸‹é¢çœ‹çœ‹ï¼Œä½œä¸ºæ¶ˆæ¯æ¥æ”¶æ–¹ï¼Œå®ƒéœ€è¦åšä»€ä¹ˆã€‚</p>\n<p>æ­¤æ—¶ï¼Œä¸€ä¸ªæ”¶åˆ°æ¶ˆæ¯çš„é¡µé¢å°±ä¸èƒ½é‚£ä¹ˆè‡ªç§äº†ï¼Œé™¤äº†å±•ç¤ºæ”¶åˆ°çš„æ¶ˆæ¯ï¼Œå®ƒè¿˜éœ€è¦å°†æ¶ˆæ¯å†ä¼ é€’ç»™å®ƒæ‰€â€œçŸ¥é“çš„äººâ€ï¼ˆæ‰“å¼€ä¸è¢«å®ƒæ‰“å¼€çš„é¡µé¢ï¼‰:</p>\n<blockquote>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘è¿™é‡Œé€šè¿‡åˆ¤æ–­æ¶ˆæ¯æ¥æºï¼Œé¿å…å°†æ¶ˆæ¯å›ä¼ ç»™å‘é€æ–¹ï¼Œé˜²æ­¢æ¶ˆæ¯åœ¨ä¸¤è€…é—´æ­»å¾ªç¯çš„ä¼ é€’ã€‚ï¼ˆè¯¥æ–¹æ¡ˆä¼šæœ‰äº›å…¶ä»–å°é—®é¢˜ï¼Œå®é™…ä¸­å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.addEventListener(&#39;message&#39;, function (e) &#123;</span><br><span class=\"line\">    const data &#x3D; e.data;</span><br><span class=\"line\">    const text &#x3D; &#39;[receive] &#39; + data.msg + &#39; â€”â€” tab &#39; + data.from;</span><br><span class=\"line\">    console.log(&#39;[Cross-document Messaging] receive message:&#39;, text);</span><br><span class=\"line\">    &#x2F;&#x2F; é¿å…æ¶ˆæ¯å›ä¼ </span><br><span class=\"line\">    if (window.opener &amp;&amp; !window.opener.closed &amp;&amp; data.fromOpenner) &#123;</span><br><span class=\"line\">        window.opener.postMessage(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#x2F;&#x2F; è¿‡æ»¤æ‰å·²ç»å…³é—­çš„çª—å£</span><br><span class=\"line\">    childWins &#x3D; childWins.filter(w &#x3D;&gt; !w.closed);</span><br><span class=\"line\">    &#x2F;&#x2F; é¿å…æ¶ˆæ¯å›ä¼ </span><br><span class=\"line\">    if (childWins &amp;&amp; !data.fromOpenner) &#123;</span><br><span class=\"line\">        childWins.forEach(w &#x3D;&gt; w.postMessage(data));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆé¡µé¢ï¼‰éƒ½è‚©è´Ÿèµ·äº†ä¼ é€’æ¶ˆæ¯çš„è´£ä»»ï¼Œä¹Ÿå°±æ˜¯æˆ‘è¯´çš„â€œå£å£ç›¸ä¼ â€ï¼Œè€Œæ¶ˆæ¯å°±åœ¨è¿™ä¸ªæ ‘çŠ¶ç»“æ„ä¸­æµè½¬äº†èµ·æ¥ã€‚</p>\n<h3 id=\"å°æ†©ä¸€ä¸‹-2\"><a href=\"#å°æ†©ä¸€ä¸‹-2\" class=\"headerlink\" title=\"å°æ†©ä¸€ä¸‹\"></a>å°æ†©ä¸€ä¸‹</h3><p>æ˜¾ç„¶ï¼Œâ€œå£å£ç›¸ä¼ â€çš„æ¨¡å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœé¡µé¢ä¸æ˜¯é€šè¿‡åœ¨å¦ä¸€ä¸ªé¡µé¢å†…çš„<code>window.open</code>æ‰“å¼€çš„ï¼ˆä¾‹å¦‚ç›´æ¥åœ¨åœ°å€æ è¾“å…¥ï¼Œæˆ–ä»å…¶ä»–ç½‘ç«™é“¾æ¥è¿‡æ¥ï¼‰ï¼Œè¿™ä¸ªè”ç³»å°±è¢«æ‰“ç ´äº†ã€‚</p>\n<p>é™¤äº†ä¸Šé¢è¿™å…­ä¸ªå¸¸è§æ–¹æ³•ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§ï¼ˆç¬¬ä¸ƒç§ï¼‰åšæ³•æ˜¯é€šè¿‡ WebSocket è¿™ç±»çš„â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯æ¥è¿›è¡ŒåŒæ­¥ã€‚è¿™å¥½æ¯”å°†æˆ‘ä»¬çš„â€œä¸­å¤®ç«™â€ä»å‰ç«¯ç§»åˆ°äº†åç«¯ã€‚</p>\n<p>å…³äº WebSocket ä¸å…¶ä»–â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯ï¼Œä¸äº†è§£çš„åŒå­¦å¯ä»¥é˜…è¯»è¿™ç¯‡<a href=\"https://juejin.im/post/6844903618043183111\">ã€Šå„ç±»â€œæœåŠ¡å™¨æ¨â€æŠ€æœ¯åŸç†ä¸å®ä¾‹ï¼ˆPolling/COMET/SSE/WebSocketï¼‰ã€‹</a></p>\n<p>æ­¤å¤–ï¼Œæˆ‘è¿˜é’ˆå¯¹ä»¥ä¸Šå„ç§æ–¹å¼å†™äº†ä¸€ä¸ª <a href=\"https://alienzhou.github.io/cross-tab-communication/\">åœ¨çº¿æ¼”ç¤ºçš„ Demo &gt;&gt;</a></p>\n<p>![Demoé¡µé¢](data:image/svg+xml;utf8,<?xml version=\"1.0\"?><svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"1280\" height=\"567\"></svg>)</p>\n<h2 id=\"äºŒã€éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡\"><a href=\"#äºŒã€éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡\" class=\"headerlink\" title=\"äºŒã€éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡\"></a>äºŒã€éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡</h2><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä¸ƒç§å‰ç«¯è·¨é¡µé¢é€šä¿¡çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬å¤§éƒ½å—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ã€‚ç„¶è€Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸åŒåŸŸåçš„äº§å“çº¿ï¼Œä¹Ÿå¸Œæœ›å®ƒä»¬ä¸‹é¢çš„æ‰€æœ‰é¡µé¢ä¹‹é—´èƒ½æ— éšœç¢åœ°é€šä¿¡ã€‚é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<p>è¦å®ç°è¯¥åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç”¨æˆ·ä¸å¯è§çš„ iframe ä½œä¸ºâ€œæ¡¥â€ã€‚ç”±äº iframe ä¸çˆ¶é¡µé¢é—´å¯ä»¥é€šè¿‡æŒ‡å®š<code>origin</code>æ¥å¿½ç•¥åŒæºé™åˆ¶ï¼Œå› æ­¤å¯ä»¥åœ¨æ¯ä¸ªé¡µé¢ä¸­åµŒå…¥ä¸€ä¸ª iframe ï¼ˆä¾‹å¦‚ï¼š<code>http://sample.com/bridge.html</code>ï¼‰ï¼Œè€Œè¿™äº› iframe ç”±äºä½¿ç”¨çš„æ˜¯ä¸€ä¸ª urlï¼Œå› æ­¤å±äºåŒæºé¡µé¢ï¼Œå…¶é€šä¿¡æ–¹å¼å¯ä»¥å¤ç”¨ä¸Šé¢ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„å„ç§æ–¹å¼ã€‚</p>\n<p>é¡µé¢ä¸ iframe é€šä¿¡éå¸¸ç®€å•ï¼Œé¦–å…ˆéœ€è¦åœ¨é¡µé¢ä¸­ç›‘å¬ iframe å‘æ¥çš„æ¶ˆæ¯ï¼Œåšç›¸åº”çš„ä¸šåŠ¡å¤„ç†ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* ä¸šåŠ¡é¡µé¢ä»£ç  *&#x2F;</span><br><span class=\"line\">window.addEventListener(&#39;message&#39;, function (e) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; â€¦â€¦ do something</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åï¼Œå½“é¡µé¢è¦ä¸å…¶ä»–çš„åŒæºæˆ–éåŒæºé¡µé¢é€šä¿¡æ—¶ï¼Œä¼šå…ˆç»™ iframe å‘é€æ¶ˆæ¯ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* ä¸šåŠ¡é¡µé¢ä»£ç  *&#x2F;</span><br><span class=\"line\">window.frames[0].window.postMessage(mydata, &#39;*&#39;);</span><br></pre></td></tr></table></figure>\n\n<p>å…¶ä¸­ä¸ºäº†ç®€ä¾¿æ­¤å¤„å°†<code>postMessage</code>çš„ç¬¬äºŒä¸ªå‚æ•°è®¾ä¸ºäº†<code>&#39;*&#39;</code>ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ä¸º iframe çš„ URLã€‚iframe æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šä½¿ç”¨æŸç§è·¨é¡µé¢æ¶ˆæ¯é€šä¿¡æŠ€æœ¯åœ¨æ‰€æœ‰ iframe é—´åŒæ­¥æ¶ˆæ¯ï¼Œä¾‹å¦‚ä¸‹é¢ä½¿ç”¨çš„ Broadcast Channelï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* iframe å†…ä»£ç  *&#x2F;</span><br><span class=\"line\">const bc &#x3D; new BroadcastChannel(&#39;AlienZHOU&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; æ”¶åˆ°æ¥è‡ªé¡µé¢çš„æ¶ˆæ¯åï¼Œåœ¨ iframe é—´è¿›è¡Œå¹¿æ’­</span><br><span class=\"line\">window.addEventListener(&#39;message&#39;, function (e) &#123;</span><br><span class=\"line\">    bc.postMessage(e.data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å…¶ä»– iframe æ”¶åˆ°é€šçŸ¥åï¼Œåˆ™ä¼šå°†è¯¥æ¶ˆæ¯åŒæ­¥ç»™æ‰€å±çš„é¡µé¢ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;* iframe å†…ä»£ç  *&#x2F;</span><br><span class=\"line\">&#x2F;&#x2F; å¯¹äºæ”¶åˆ°çš„ï¼ˆiframeï¼‰å¹¿æ’­æ¶ˆæ¯ï¼Œé€šçŸ¥ç»™æ‰€å±çš„ä¸šåŠ¡é¡µé¢</span><br><span class=\"line\">bc.onmessage &#x3D; function (e) &#123;</span><br><span class=\"line\">    window.parent.postMessage(e.data, &#39;*&#39;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸‹å›¾å°±æ˜¯ä½¿ç”¨ iframe ä½œä¸ºâ€œæ¡¥â€çš„éåŒæºé¡µé¢é—´é€šä¿¡æ¨¡å¼å›¾ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2019/3/31/169d468988a6ba8f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å…¶ä¸­â€œåŒæºè·¨åŸŸé€šä¿¡æ–¹æ¡ˆâ€å¯ä»¥ä½¿ç”¨æ–‡ç« ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„æŸç§æŠ€æœ¯ã€‚</p>\n<hr>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>ä»Šå¤©å’Œå¤§å®¶åˆ†äº«äº†ä¸€ä¸‹è·¨é¡µé¢é€šä¿¡çš„å„ç§æ–¹å¼ã€‚</p>\n<p>å¯¹äºåŒæºé¡µé¢ï¼Œå¸¸è§çš„æ–¹å¼åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>å¹¿æ’­æ¨¡å¼ï¼šBroadcast Channe / Service Worker / LocalStorage + StorageEvent</li>\n<li>å…±äº«å­˜å‚¨æ¨¡å¼ï¼šShared Worker / IndexedDB / cookie</li>\n<li>å£å£ç›¸ä¼ æ¨¡å¼ï¼šwindow.open + window.opener</li>\n<li>åŸºäºæœåŠ¡ç«¯ï¼šWebsocket / Comet / SSE ç­‰</li>\n</ul>\n<p>è€Œå¯¹äºéåŒæºé¡µé¢ï¼Œåˆ™å¯ä»¥é€šè¿‡åµŒå…¥åŒæº iframe ä½œä¸ºâ€œæ¡¥â€ï¼Œå°†éåŒæºé¡µé¢é€šä¿¡è½¬æ¢ä¸ºåŒæºé¡µé¢é€šä¿¡ã€‚</p>\n<h1 id=\"3-å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ-historyæ¨¡å¼\"><a href=\"#3-å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ-historyæ¨¡å¼\" class=\"headerlink\" title=\"3.å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ historyæ¨¡å¼\"></a>3.å‰ç«¯è·¯ç”±çš„ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œ historyæ¨¡å¼</h1><h2 id=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è·¯ç”±\"><a href=\"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è·¯ç”±\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è·¯ç”±\"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è·¯ç”±</h2><p>ç°åœ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºè¶Šæ¥è¶Šå¤šçš„ä½¿ç”¨AJAXå¼‚æ­¥è¯·æ±‚å®Œæˆé¡µé¢çš„æ— ç¼åˆ·æ–°ï¼Œå¯¼è‡´æµè§ˆå™¨çš„URLä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–è€Œå®Œæˆäº†è¯·æ±‚ï¼Œä»è€Œæé«˜äº†ç”¨æˆ·æµè§ˆä½“éªŒã€‚åŒæ—¶æœ¬æ¬¡æµè§ˆçš„é¡µé¢å†…å®¹åœ¨ç”¨æˆ·ä¸‹æ¬¡ä½¿ç”¨URLè®¿é—®æ—¶å°†æ— æ³•é‡æ–°å‘ˆç°ï¼Œä½¿ç”¨è·¯ç”±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>å•é¡µé¢åº”ç”¨åˆ©ç”¨äº†JavaScriptåŠ¨æ€å˜æ¢ç½‘é¡µå†…å®¹ï¼Œé¿å…äº†é¡µé¢é‡è½½ï¼›è·¯ç”±åˆ™æä¾›äº†æµè§ˆå™¨åœ°å€å˜åŒ–ï¼Œç½‘é¡µå†…å®¹ä¹Ÿè·Ÿéšå˜åŒ–ï¼Œä¸¤è€…ç»“åˆèµ·æ¥åˆ™ä¸ºæˆ‘ä»¬æä¾›äº†ä½“éªŒè‰¯å¥½çš„å•é¡µé¢webåº”ç”¨ã€‚</p>\n<h2 id=\"å‰ç«¯è·¯ç”±å®ç°æ–¹å¼\"><a href=\"#å‰ç«¯è·¯ç”±å®ç°æ–¹å¼\" class=\"headerlink\" title=\"å‰ç«¯è·¯ç”±å®ç°æ–¹å¼\"></a>å‰ç«¯è·¯ç”±å®ç°æ–¹å¼</h2><p>è·¯ç”±éœ€è¦å®ç°ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>\n<ol>\n<li>å½“æµè§ˆå™¨åœ°å€å˜åŒ–æ—¶ï¼Œåˆ‡æ¢é¡µé¢ï¼›</li>\n<li>ç‚¹å‡»æµè§ˆå™¨ã€åé€€ã€‘ã€ã€å‰è¿›ã€‘æŒ‰é’®ï¼Œç½‘é¡µå†…å®¹è·Ÿéšå˜åŒ–ï¼›</li>\n<li>åˆ·æ–°æµè§ˆå™¨ï¼Œç½‘é¡µåŠ è½½å½“å‰è·¯ç”±å¯¹åº”å†…å®¹ï¼›</li>\n</ol>\n<p>åœ¨å•é¡µé¢webç½‘é¡µä¸­, å•çº¯çš„æµè§ˆå™¨åœ°å€æ”¹å˜, ç½‘é¡µä¸ä¼šé‡è½½ï¼Œå¦‚å•çº¯çš„hashç½‘å€æ”¹å˜ç½‘é¡µä¸ä¼šå˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬çš„è·¯ç”±ä¸»è¦æ˜¯é€šè¿‡ç›‘å¬äº‹ä»¶ï¼Œå¹¶åˆ©ç”¨jså®ç°åŠ¨æ€æ”¹å˜ç½‘é¡µå†…å®¹ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>\n<ul>\n<li>hashæ¨¡å¼ï¼šç›‘å¬æµè§ˆå™¨åœ°å€hashå€¼å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”çš„jsåˆ‡æ¢ç½‘é¡µï¼›</li>\n<li>historyæ¨¡å¼ï¼šåˆ©ç”¨history APIå®ç°urlåœ°å€æ”¹å˜ï¼Œç½‘é¡µå†…å®¹æ”¹å˜ï¼›</li>\n</ul>\n<p>å®ƒä»¬çš„åŒºåˆ«æœ€æ˜æ˜¾çš„å°±æ˜¯hashä¼šåœ¨æµè§ˆå™¨åœ°å€åé¢å¢åŠ #å·ï¼Œè€Œhistoryå¯ä»¥è‡ªå®šä¹‰åœ°å€ã€‚</p>\n<h2 id=\"hashæ¨¡å¼\"><a href=\"#hashæ¨¡å¼\" class=\"headerlink\" title=\"hashæ¨¡å¼\"></a>hashæ¨¡å¼</h2><p>ä½¿ç”¨window.location.hashå±æ€§åŠçª—å£çš„onhashchangeäº‹ä»¶ï¼Œå¯ä»¥å®ç°ç›‘å¬æµè§ˆå™¨åœ°å€hashå€¼å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”çš„jsåˆ‡æ¢ç½‘é¡µã€‚ä¸‹é¢å…·ä½“ä»‹ç»å‡ ä¸ªä½¿ç”¨è¿‡ç¨‹ä¸­å¿…é¡»ç†è§£çš„è¦ç‚¹ï¼š</p>\n<ol>\n<li>hashæŒ‡çš„æ˜¯åœ°å€ä¸­#å·ä»¥åŠåé¢çš„å­—ç¬¦ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—å€¼ã€‚hashä¹Ÿç§°ä½œé”šç‚¹ï¼Œæœ¬èº«æ˜¯ç”¨æ¥åšé¡µé¢è·³è½¬å®šä½çš„ã€‚å¦‚<a href=\"http://localhost/index.html#abc%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84#abc%E5%B0%B1%E6%98%AFhash%EF%BC%9B\">http://localhost/index.html#abcï¼Œè¿™é‡Œçš„#abcå°±æ˜¯hashï¼›</a></li>\n<li>æ•£åˆ—å€¼æ˜¯ä¸ä¼šéšè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ç«¯çš„ï¼Œæ‰€ä»¥æ”¹å˜hashï¼Œä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ï¼›</li>\n<li>ç›‘å¬ window çš„ hashchange äº‹ä»¶ï¼Œå½“æ•£åˆ—å€¼æ”¹å˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ location.hash æ¥è·å–å’Œè®¾ç½®hashå€¼ï¼›</li>\n<li>location.hashå€¼çš„å˜åŒ–ä¼šç›´æ¥ååº”åˆ°æµè§ˆå™¨åœ°å€æ ï¼›</li>\n</ol>\n<h2 id=\"è§¦å‘hashchangeäº‹ä»¶çš„å‡ ç§æƒ…å†µï¼š\"><a href=\"#è§¦å‘hashchangeäº‹ä»¶çš„å‡ ç§æƒ…å†µï¼š\" class=\"headerlink\" title=\"è§¦å‘hashchangeäº‹ä»¶çš„å‡ ç§æƒ…å†µï¼š\"></a>è§¦å‘hashchangeäº‹ä»¶çš„å‡ ç§æƒ…å†µï¼š</h2><ul>\n<li>æµè§ˆå™¨åœ°å€æ æ•£åˆ—å€¼çš„å˜åŒ–ï¼ˆåŒ…æ‹¬æµè§ˆå™¨çš„å‰è¿›ã€åé€€ï¼‰ä¼šè§¦å‘window.location.hashå€¼çš„å˜åŒ–ï¼Œä»è€Œè§¦å‘onhashchangeäº‹ä»¶ï¼›</li>\n<li>å½“æµè§ˆå™¨åœ°å€æ ä¸­URLåŒ…å«å“ˆå¸Œå¦‚ <a href=\"http://www.baidu.com/#home%EF%BC%8C%E8%BF%99%E6%97%B6%E6%8C%89%E4%B8%8B%E8%BE%93%E5%85%A5%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%91%E9%80%81http://www.baidu.com/%E8%AF%B7%E6%B1%82%E8%87%B3%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E8%AF%B7%E6%B1%82%E5%AE%8C%E6%AF%95%E4%B9%8B%E5%90%8E%E8%AE%BE%E7%BD%AE%E6%95%A3%E5%88%97%E5%80%BC%E4%B8%BA#home%EF%BC%8C%E8%BF%9B%E8%80%8C%E8%A7%A6%E5%8F%91onhashchange%E4%BA%8B%E4%BB%B6%EF%BC%9B\">http://www.baidu.com/#homeï¼Œè¿™æ—¶æŒ‰ä¸‹è¾“å…¥ï¼Œæµè§ˆå™¨å‘é€http://www.baidu.com/è¯·æ±‚è‡³æœåŠ¡å™¨ï¼Œè¯·æ±‚å®Œæ¯•ä¹‹åè®¾ç½®æ•£åˆ—å€¼ä¸º#homeï¼Œè¿›è€Œè§¦å‘onhashchangeäº‹ä»¶ï¼›</a></li>\n<li>å½“åªæ”¹å˜æµè§ˆå™¨åœ°å€æ URLçš„å“ˆå¸Œéƒ¨åˆ†ï¼Œè¿™æ—¶æŒ‰ä¸‹å›è½¦ï¼Œæµè§ˆå™¨ä¸ä¼šå‘é€ä»»ä½•è¯·æ±‚è‡³æœåŠ¡å™¨ï¼Œè¿™æ—¶å‘ç”Ÿçš„åªæ˜¯è®¾ç½®æ•£åˆ—å€¼æ–°ä¿®æ”¹çš„å“ˆå¸Œå€¼ï¼Œå¹¶è§¦å‘onhashchangeäº‹ä»¶ï¼›</li>\n<li>htmlä¸­<a>æ ‡ç­¾çš„å±æ€§ href å¯ä»¥è®¾ç½®ä¸ºé¡µé¢çš„å…ƒç´ IDå¦‚ #topï¼Œå½“ç‚¹å‡»è¯¥é“¾æ¥æ—¶é¡µé¢è·³è½¬è‡³è¯¥idå…ƒç´ æ‰€åœ¨åŒºåŸŸï¼ŒåŒæ—¶æµè§ˆå™¨è‡ªåŠ¨è®¾ç½® window.location.hash å±æ€§ï¼Œåœ°å€æ ä¸­çš„å“ˆå¸Œå€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¹¶è§¦å‘onhashchangeäº‹ä»¶ï¼›</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;è®¾ç½® url çš„ hashï¼Œä¼šåœ¨å½“å‰urlååŠ ä¸Š&#39;#abc&#39;</span><br><span class=\"line\">window.location.hash&#x3D;&#39;abc&#39;;</span><br><span class=\"line\">let hash &#x3D; window.location.hash &#x2F;&#x2F;&#39;#abc&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">window.addEventListener(&#39;hashchange&#39;,function()&#123;</span><br><span class=\"line\">\t&#x2F;&#x2F;ç›‘å¬hashå˜åŒ–ï¼Œç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›åé€€ä¼šè§¦å‘</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"historyæ¨¡å¼\"><a href=\"#historyæ¨¡å¼\" class=\"headerlink\" title=\"historyæ¨¡å¼\"></a>historyæ¨¡å¼</h2><p>æ¦‚è¿°<br>window.history å±æ€§æŒ‡å‘ History å¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºå½“å‰çª—å£çš„æµè§ˆå†å²ã€‚å½“å‘ç”Ÿæ”¹å˜æ—¶ï¼Œåªä¼šæ”¹å˜é¡µé¢çš„è·¯å¾„ï¼Œä¸ä¼šåˆ·æ–°é¡µé¢ã€‚<br>History å¯¹è±¡ä¿å­˜äº†å½“å‰çª—å£è®¿é—®è¿‡çš„æ‰€æœ‰é¡µé¢ç½‘å€ã€‚é€šè¿‡ history.length å¯ä»¥å¾—å‡ºå½“å‰çª—å£ä¸€å…±è®¿é—®è¿‡å‡ ä¸ªç½‘å€ã€‚<br>ç”±äºå®‰å…¨åŸå› ï¼Œæµè§ˆå™¨ä¸å…è®¸è„šæœ¬è¯»å–è¿™äº›åœ°å€ï¼Œä½†æ˜¯å…è®¸åœ¨åœ°å€ä¹‹é—´å¯¼èˆªã€‚<br>æµè§ˆå™¨å·¥å…·æ çš„â€œå‰è¿›â€å’Œâ€œåé€€â€æŒ‰é’®ï¼Œå…¶å®å°±æ˜¯å¯¹ History å¯¹è±¡è¿›è¡Œæ“ä½œã€‚<br>å±æ€§<br>History å¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªå±æ€§ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">History.lengthï¼šå½“å‰çª—å£è®¿é—®è¿‡çš„ç½‘å€æ•°é‡ï¼ˆåŒ…æ‹¬å½“å‰ç½‘é¡µï¼‰</span><br><span class=\"line\">History.stateï¼šHistory å †æ ˆæœ€ä¸Šå±‚çš„çŠ¶æ€å€¼ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰</span><br><span class=\"line\">&#x2F;&#x2F; å½“å‰çª—å£è®¿é—®è¿‡å¤šå°‘ä¸ªç½‘é¡µ</span><br><span class=\"line\">history.length &#x2F;&#x2F; 1</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; History å¯¹è±¡çš„å½“å‰çŠ¶æ€</span><br><span class=\"line\">&#x2F;&#x2F; é€šå¸¸æ˜¯ undefinedï¼Œå³æœªè®¾ç½®</span><br><span class=\"line\">history.state &#x2F;&#x2F; undefined</span><br></pre></td></tr></table></figure>\n\n\n<p>æ–¹æ³•<br>History.back()ã€History.forward()ã€History.go()<br>è¿™ä¸‰ä¸ªæ–¹æ³•ç”¨äºåœ¨å†å²ä¹‹ä¸­ç§»åŠ¨ã€‚</p>\n<p>æ–¹æ³•<br>History.back()ã€History.forward()ã€History.go()<br>è¿™ä¸‰ä¸ªæ–¹æ³•ç”¨äºåœ¨å†å²ä¹‹ä¸­ç§»åŠ¨ã€‚</p>\n<p>History.back()ï¼šç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªç½‘å€ï¼Œç­‰åŒäºç‚¹å‡»æµè§ˆå™¨çš„åé€€é”®ã€‚å¯¹äºç¬¬ä¸€ä¸ªè®¿é—®çš„ç½‘å€ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœã€‚<br>History.forward()ï¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç½‘å€ï¼Œç­‰åŒäºç‚¹å‡»æµè§ˆå™¨çš„å‰è¿›é”®ã€‚å¯¹äºæœ€åä¸€ä¸ªè®¿é—®çš„ç½‘å€ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœã€‚<br>History.go()ï¼šæ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œä»¥å½“å‰ç½‘å€ä¸ºåŸºå‡†ï¼Œç§»åŠ¨åˆ°å‚æ•°æŒ‡å®šçš„ç½‘å€ã€‚å¦‚æœå‚æ•°è¶…è¿‡å®é™…å­˜åœ¨çš„ç½‘å€èŒƒå›´ï¼Œè¯¥æ–¹æ³•æ— æ•ˆæœï¼›å¦‚æœä¸æŒ‡å®šå‚æ•°ï¼Œé»˜è®¤å‚æ•°ä¸º0ï¼Œç›¸å½“äºåˆ·æ–°å½“å‰é¡µé¢ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">history.back();</span><br><span class=\"line\">history.forward();</span><br><span class=\"line\">history.go(1);&#x2F;&#x2F;ç›¸å½“äºhistory.forward()</span><br><span class=\"line\">history.go(-1);&#x2F;&#x2F;ç›¸å½“äºhistory.back()</span><br><span class=\"line\">history.go(0); &#x2F;&#x2F; åˆ·æ–°å½“å‰é¡µé¢</span><br></pre></td></tr></table></figure>\n\n\n<p>æ³¨æ„ï¼šç§»åŠ¨åˆ°ä»¥å‰è®¿é—®è¿‡çš„é¡µé¢æ—¶ï¼Œé¡µé¢é€šå¸¸æ˜¯ä»æµè§ˆå™¨ç¼“å­˜ä¹‹ä¸­åŠ è½½ï¼Œè€Œä¸æ˜¯é‡æ–°è¦æ±‚æœåŠ¡å™¨å‘é€æ–°çš„ç½‘é¡µã€‚</p>\n<p>æ³¨æ„ï¼šç§»åŠ¨åˆ°ä»¥å‰è®¿é—®è¿‡çš„é¡µé¢æ—¶ï¼Œé¡µé¢é€šå¸¸æ˜¯ä»æµè§ˆå™¨ç¼“å­˜ä¹‹ä¸­åŠ è½½ï¼Œè€Œä¸æ˜¯é‡æ–°è¦æ±‚æœåŠ¡å™¨å‘é€æ–°çš„ç½‘é¡µã€‚</p>\n<p>History.pushState()<br>è¯¥æ–¹æ³•ç”¨äºåœ¨å†å²ä¸­æ·»åŠ ä¸€æ¡è®°å½•ã€‚pushState()æ–¹æ³•ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°ï¼Œåªæ˜¯å¯¼è‡´ History å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œåœ°å€æ ä¼šæœ‰å˜åŒ–ã€‚</p>\n<p>è¯­æ³•ï¼šhistory.pushState(object, title, url)</p>\n<p>è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºï¼š</p>\n<p>objectï¼šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ pushState æ–¹æ³•å¯ä»¥å°†è¯¥å¯¹è±¡å†…å®¹ä¼ é€’åˆ°æ–°é¡µé¢ä¸­ã€‚å¦‚æœä¸éœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œæ­¤å¤„å¯ä»¥å¡« nullã€‚<br>titleï¼šæŒ‡æ ‡é¢˜ï¼Œå‡ ä¹æ²¡æœ‰æµè§ˆå™¨æ”¯æŒè¯¥å‚æ•°ï¼Œä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ¯”è¾ƒå®‰å…¨ã€‚<br>urlï¼šæ–°çš„ç½‘å€ï¼Œå¿…é¡»ä¸å½“å‰é¡µé¢å¤„åœ¨åŒä¸€ä¸ªåŸŸã€‚ä¸æŒ‡å®šçš„è¯åˆ™ä¸ºå½“å‰çš„è·¯å¾„ï¼Œå¦‚æœè®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var data &#x3D; &#123; foo: &#39;bar&#39; &#125;;</span><br><span class=\"line\">history.pushState(data, &#39;&#39;, &#39;2.html&#39;);</span><br><span class=\"line\">console.log(history.state) &#x2F;&#x2F; &#123;foo: &quot;bar&quot;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šå¦‚æœ pushState çš„ URL å‚æ•°è®¾ç½®äº†ä¸€ä¸ªæ–°çš„é”šç‚¹å€¼ï¼ˆå³ hashï¼‰ï¼Œå¹¶ä¸ä¼šè§¦å‘ hashchange äº‹ä»¶ã€‚åè¿‡æ¥ï¼Œå¦‚æœ URL çš„é”šç‚¹å€¼å˜äº†ï¼Œåˆ™ä¼šåœ¨ History å¯¹è±¡åˆ›å»ºä¸€æ¡æµè§ˆè®°å½•ã€‚</p>\n<p>æ³¨æ„ï¼šå¦‚æœ pushState çš„ URL å‚æ•°è®¾ç½®äº†ä¸€ä¸ªæ–°çš„é”šç‚¹å€¼ï¼ˆå³ hashï¼‰ï¼Œå¹¶ä¸ä¼šè§¦å‘ hashchange äº‹ä»¶ã€‚åè¿‡æ¥ï¼Œå¦‚æœ URL çš„é”šç‚¹å€¼å˜äº†ï¼Œåˆ™ä¼šåœ¨ History å¯¹è±¡åˆ›å»ºä¸€æ¡æµè§ˆè®°å½•ã€‚</p>\n<p>å¦‚æœ pushState() æ–¹æ³•è®¾ç½®äº†ä¸€ä¸ªè·¨åŸŸç½‘å€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; æŠ¥é”™</span><br><span class=\"line\">&#x2F;&#x2F; å½“å‰ç½‘å€ä¸º http:&#x2F;&#x2F;example.com</span><br><span class=\"line\">history.pushState(null, &#39;&#39;, &#39;https:&#x2F;&#x2F;twitter.com&#x2F;hello&#39;);</span><br></pre></td></tr></table></figure>\n\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒpushState æƒ³è¦æ’å…¥ä¸€ä¸ªè·¨åŸŸçš„ç½‘å€ï¼Œå¯¼è‡´æŠ¥é”™ã€‚è¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ï¼Œé˜²æ­¢æ¶æ„ä»£ç è®©ç”¨æˆ·ä»¥ä¸ºä»–ä»¬æ˜¯åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¯¼è‡´é¡µé¢è·³è½¬ã€‚</p>\n<p>History.replaceState()<br>è¯¥æ–¹æ³•ç”¨æ¥ä¿®æ”¹ History å¯¹è±¡çš„å½“å‰è®°å½•ï¼Œç”¨æ³•ä¸ pushState() æ–¹æ³•ä¸€æ ·ã€‚</p>\n<p>å‡å®šå½“å‰ç½‘é¡µæ˜¯ example.com/example.htmlã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">history.pushState(&#123;page: 1&#125;, &#39;&#39;, &#39;?page&#x3D;1&#39;)</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html?page&#x3D;1</span><br><span class=\"line\"></span><br><span class=\"line\">history.pushState(&#123;page: 2&#125;, &#39;&#39;, &#39;?page&#x3D;2&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html?page&#x3D;2</span><br><span class=\"line\"></span><br><span class=\"line\">history.replaceState(&#123;page: 3&#125;, &#39;&#39;, &#39;?page&#x3D;3&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html?page&#x3D;3</span><br><span class=\"line\"></span><br><span class=\"line\">history.back()</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html?page&#x3D;1</span><br><span class=\"line\"></span><br><span class=\"line\">history.back()</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html</span><br><span class=\"line\"></span><br><span class=\"line\">history.go(2)</span><br><span class=\"line\">&#x2F;&#x2F; URL æ˜¾ç¤ºä¸º http:&#x2F;&#x2F;example.com&#x2F;example.html?page&#x3D;3</span><br></pre></td></tr></table></figure>\n\n\n<p>popstate äº‹ä»¶<br>æ¯å½“ history å¯¹è±¡å‡ºç°å˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚</p>\n<p>æ³¨æ„ï¼š</p>\n<p>ä»…ä»…è°ƒç”¨pushState()æ–¹æ³•æˆ–replaceState()æ–¹æ³• ï¼Œå¹¶ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶;<br>åªæœ‰ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨å€’é€€æŒ‰é’®å’Œå‰è¿›æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨ JavaScript è°ƒç”¨History.back()ã€History.forward()ã€History.go()æ–¹æ³•æ—¶æ‰ä¼šè§¦å‘ã€‚<br>å¦å¤–ï¼Œè¯¥äº‹ä»¶åªé’ˆå¯¹åŒä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœæµè§ˆå†å²çš„åˆ‡æ¢ï¼Œå¯¼è‡´åŠ è½½ä¸åŒçš„æ–‡æ¡£ï¼Œè¯¥äº‹ä»¶ä¹Ÿä¸ä¼šè§¦å‘ã€‚<br>é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸ä¼šè§¦å‘popstateäº‹ä»¶ã€‚<br>ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä¸ºpopstateäº‹ä»¶æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª event äº‹ä»¶å¯¹è±¡ï¼Œå®ƒçš„ state å±æ€§æŒ‡å‘å½“å‰çš„ state å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.addEventListener(&#39;popstate&#39;, function(e) &#123;</span><br><span class=\"line\">\t&#x2F;&#x2F;e.state ç›¸å½“äº history.state</span><br><span class=\"line\">\tconsole.log(&#39;state: &#39; + JSON.stringify(e.state));</span><br><span class=\"line\">\tconsole.log(history.state);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n<p>ç‚¹å‡»æŸ¥çœ‹ é€šè¿‡history.pushState å®ç°é¡µé¢ tab åˆ‡æ¢çš„åŠŸèƒ½ã€‚</p>\n<p>history è‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯å½“æ”¹å˜é¡µé¢åœ°å€åï¼Œå¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨æ—¶ï¼Œï¼ˆå¦‚æœåç«¯æ²¡æœ‰åšå‡†å¤‡çš„è¯ï¼‰ä¼šæŠ¥é”™ï¼Œå› ä¸ºåˆ·æ–°æ˜¯æ‹¿å½“å‰åœ°å€å»è¯·æ±‚æœåŠ¡å™¨çš„ï¼Œå¦‚æœæœåŠ¡å™¨ä¸­æ²¡æœ‰ç›¸åº”çš„å“åº”ï¼Œä¼šå‡ºç° 404 é¡µé¢ã€‚</p>\n<h1 id=\"4-DOMæ ‘ï¼šJavaScriptæ˜¯å¦‚ä½•å½±å“DOMæ ‘æ„å»ºçš„\"><a href=\"#4-DOMæ ‘ï¼šJavaScriptæ˜¯å¦‚ä½•å½±å“DOMæ ‘æ„å»ºçš„\" class=\"headerlink\" title=\"4.DOMæ ‘ï¼šJavaScriptæ˜¯å¦‚ä½•å½±å“DOMæ ‘æ„å»ºçš„\"></a>4.DOMæ ‘ï¼šJavaScriptæ˜¯å¦‚ä½•å½±å“DOMæ ‘æ„å»ºçš„</h1><p>ç»­æ²¿ç€ç½‘ç»œæ•°æ®æµè·¯å¾„æ¥ä»‹ç» DOM æ ‘æ˜¯æ€ä¹ˆç”Ÿæˆçš„ã€‚ç„¶åå†åŸºäº DOM æ ‘çš„è§£ææµç¨‹ä»‹ç»ä¸¤å—å†…å®¹ï¼šç¬¬ä¸€ä¸ªæ˜¯åœ¨è§£æè¿‡ç¨‹ä¸­é‡åˆ° JavaScript è„šæœ¬ï¼ŒDOM è§£æå™¨æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿç¬¬äºŒä¸ªæ˜¯ DOM è§£æå™¨æ˜¯å¦‚ä½•å¤„ç†è·¨ç«™ç‚¹èµ„æºçš„ï¼Ÿ</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯-DOM\"><a href=\"#ä»€ä¹ˆæ˜¯-DOM\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ DOM\"></a>ä»€ä¹ˆæ˜¯ DOM</h2><p>ä»ç½‘ç»œä¼ ç»™æ¸²æŸ“å¼•æ“çš„ HTML æ–‡ä»¶å­—èŠ‚æµæ˜¯æ— æ³•ç›´æ¥è¢«æ¸²æŸ“å¼•æ“ç†è§£çš„ï¼Œæ‰€ä»¥è¦å°†å…¶è½¬åŒ–ä¸ºæ¸²æŸ“å¼•æ“èƒ½å¤Ÿç†è§£çš„å†…éƒ¨ç»“æ„ï¼Œè¿™ä¸ªç»“æ„å°±æ˜¯ DOMã€‚DOM æä¾›äº†å¯¹ HTML æ–‡æ¡£ç»“æ„åŒ–çš„è¡¨è¿°ã€‚åœ¨æ¸²æŸ“å¼•æ“ä¸­ï¼ŒDOM æœ‰ä¸‰ä¸ªå±‚é¢çš„ä½œç”¨</p>\n<ul>\n<li>ä»é¡µé¢çš„è§†è§’æ¥çœ‹ï¼ŒDOM æ˜¯ç”Ÿæˆé¡µé¢çš„åŸºç¡€æ•°æ®ç»“æ„ã€‚</li>\n<li>ä» JavaScript è„šæœ¬è§†è§’æ¥çœ‹ï¼ŒDOM æä¾›ç»™ JavaScript è„šæœ¬æ“ä½œçš„æ¥å£ï¼Œé€šè¿‡è¿™å¥—æ¥å£ï¼ŒJavaScript å¯ä»¥å¯¹ DOM ç»“æ„è¿›è¡Œè®¿é—®ï¼Œä»è€Œæ”¹å˜æ–‡æ¡£çš„ç»“æ„ã€æ ·å¼å’Œå†…å®¹ã€‚</li>\n<li>ä»å®‰å…¨è§†è§’æ¥çœ‹ï¼ŒDOM æ˜¯ä¸€é“å®‰å…¨é˜²æŠ¤çº¿ï¼Œä¸€äº›ä¸å®‰å…¨çš„å†…å®¹åœ¨ DOM è§£æé˜¶æ®µå°±è¢«æ‹’ä¹‹é—¨å¤–äº†ã€‚</li>\n</ul>\n<p>ç®€è¨€ä¹‹ï¼ŒDOM æ˜¯è¡¨è¿° HTML çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå®ƒä¼šå°† Web é¡µé¢å’Œ JavaScript è„šæœ¬è¿æ¥èµ·æ¥ï¼Œå¹¶è¿‡æ»¤ä¸€äº›ä¸å®‰å…¨çš„å†…å®¹ã€‚</p>\n<h2 id=\"DOM-æ ‘å¦‚ä½•ç”Ÿæˆ\"><a href=\"#DOM-æ ‘å¦‚ä½•ç”Ÿæˆ\" class=\"headerlink\" title=\"DOM æ ‘å¦‚ä½•ç”Ÿæˆ\"></a>DOM æ ‘å¦‚ä½•ç”Ÿæˆ</h2><p>åœ¨æ¸²æŸ“å¼•æ“å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå«HTML è§£æå™¨ï¼ˆHTMLParserï¼‰çš„æ¨¡å—ï¼Œå®ƒçš„èŒè´£å°±æ˜¯è´Ÿè´£å°† HTML å­—èŠ‚æµè½¬æ¢ä¸º DOM ç»“æ„ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å…ˆè¦ææ¸…æ¥š HTML è§£æå™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>\n<p>åœ¨å¼€å§‹ä»‹ç» HTML è§£æå™¨ä¹‹å‰ï¼Œæˆ‘è¦å…ˆè§£é‡Šä¸€ä¸ªå¤§å®¶åœ¨ç•™è¨€åŒºé—®åˆ°è¿‡å¥½å¤šæ¬¡çš„é—®é¢˜ï¼šHTML è§£æå™¨æ˜¯ç­‰æ•´ä¸ª HTML æ–‡æ¡£åŠ è½½å®Œæˆä¹‹åå¼€å§‹è§£æçš„ï¼Œè¿˜æ˜¯éšç€ HTML æ–‡æ¡£è¾¹åŠ è½½è¾¹è§£æçš„ï¼Ÿ</p>\n<p>åœ¨è¿™é‡Œæˆ‘ç»Ÿä¸€è§£ç­”ä¸‹ï¼ŒHTML è§£æå™¨å¹¶ä¸æ˜¯ç­‰æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆä¹‹åå†è§£æçš„ï¼Œè€Œæ˜¯ç½‘ç»œè¿›ç¨‹åŠ è½½äº†å¤šå°‘æ•°æ®ï¼ŒHTML è§£æå™¨ä¾¿è§£æå¤šå°‘æ•°æ®ã€‚</p>\n<p>é‚£è¯¦ç»†çš„æµç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°å“åº”å¤´ä¹‹åï¼Œä¼šæ ¹æ®å“åº”å¤´ä¸­çš„ content-type å­—æ®µæ¥åˆ¤æ–­æ–‡ä»¶çš„ç±»å‹ï¼Œæ¯”å¦‚ content-type çš„å€¼æ˜¯â€œtext/htmlâ€ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ª HTML ç±»å‹çš„æ–‡ä»¶ï¼Œç„¶åä¸ºè¯¥è¯·æ±‚é€‰æ‹©æˆ–è€…åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½ä¹‹åï¼Œç½‘ç»œè¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´ä¼šå»ºç«‹ä¸€ä¸ªå…±äº«æ•°æ®çš„ç®¡é“ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°æ•°æ®åå°±å¾€è¿™ä¸ªç®¡é“é‡Œé¢æ”¾ï¼Œè€Œæ¸²æŸ“è¿›ç¨‹åˆ™ä»ç®¡é“çš„å¦å¤–ä¸€ç«¯ä¸æ–­åœ°è¯»å–æ•°æ®ï¼Œå¹¶åŒæ—¶å°†è¯»å–çš„æ•°æ®â€œå–‚â€ç»™ HTML è§£æå™¨ã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ªç®¡é“æƒ³è±¡æˆä¸€ä¸ªâ€œæ°´ç®¡â€ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°çš„å­—èŠ‚æµåƒæ°´ä¸€æ ·å€’è¿›è¿™ä¸ªâ€œæ°´ç®¡â€ï¼Œè€Œâ€œæ°´ç®¡â€çš„å¦å¤–ä¸€ç«¯æ˜¯æ¸²æŸ“è¿›ç¨‹çš„ HTML è§£æå™¨ï¼Œå®ƒä¼šåŠ¨æ€æ¥æ”¶å­—èŠ‚æµï¼Œå¹¶å°†å…¶è§£æä¸º DOMã€‚</p>\n<p>è§£ç­”å®Œè¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥è¯¦ç»†èŠèŠ DOM çš„å…·ä½“ç”Ÿæˆæµç¨‹äº†ã€‚</p>\n<p>å‰é¢æˆ‘ä»¬è¯´è¿‡ä»£ç ä»ç½‘ç»œä¼ è¾“è¿‡æ¥æ˜¯å­—èŠ‚æµçš„å½¢å¼ï¼Œé‚£ä¹ˆåç»­å­—èŠ‚æµæ˜¯å¦‚ä½•è½¬æ¢ä¸º DOM çš„å‘¢ï¼Ÿä½ å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/57.png\" alt=\"img\"></p>\n<p>ä»å›¾ä¸­ä½ å¯ä»¥çœ‹å‡ºï¼Œå­—èŠ‚æµè½¬æ¢ä¸º DOM éœ€è¦ä¸‰ä¸ªé˜¶æ®µã€‚</p>\n<p><strong>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡åˆ†è¯å™¨å°†å­—èŠ‚æµè½¬æ¢ä¸º Tokenã€‚</strong></p>\n<p>å‰é¢ã€Š14 | ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ï¼šV8 æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ®µ JavaScript ä»£ç çš„ï¼Ÿã€‹æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»è¿‡ï¼ŒV8 ç¼–è¯‘ JavaScript è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€æ­¥æ˜¯åšè¯æ³•åˆ†æï¼Œå°† JavaScript å…ˆåˆ†è§£ä¸ºä¸€ä¸ªä¸ª Tokenã€‚è§£æ HTML ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦é€šè¿‡åˆ†è¯å™¨å…ˆå°†å­—èŠ‚æµè½¬æ¢ä¸ºä¸€ä¸ªä¸ª Tokenï¼Œåˆ†ä¸º Tag Token å’Œæ–‡æœ¬ Tokenã€‚ä¸Šè¿° HTML ä»£ç é€šè¿‡è¯æ³•åˆ†æç”Ÿæˆçš„ Token å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/58.png\" alt=\"img\"></p>\n<p>ç”±å›¾å¯ä»¥çœ‹å‡ºï¼ŒTag Token åˆåˆ† StartTag å’Œ EndTagï¼Œæ¯”å¦‚</p>\n<p>å°±æ˜¯ StartTag ï¼Œå°±æ˜¯EndTagï¼Œåˆ†åˆ«å¯¹äºå›¾ä¸­çš„è“è‰²å’Œçº¢è‰²å—ï¼Œæ–‡æœ¬ Token å¯¹åº”çš„ç»¿è‰²å—ã€‚</p>\n<p><strong>è‡³äºåç»­çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé˜¶æ®µæ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œéœ€è¦å°† Token è§£æä¸º DOM èŠ‚ç‚¹ï¼Œå¹¶å°† DOM èŠ‚ç‚¹æ·»åŠ åˆ° DOM æ ‘ä¸­</strong>ã€‚</p>\n<blockquote>\n<p>HTML è§£æå™¨ç»´æŠ¤äº†ä¸€ä¸ªToken æ ˆç»“æ„ï¼Œè¯¥ Token æ ˆä¸»è¦ç”¨æ¥è®¡ç®—èŠ‚ç‚¹ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œåœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µä¸­ç”Ÿæˆçš„ Token ä¼šè¢«æŒ‰ç…§é¡ºåºå‹åˆ°è¿™ä¸ªæ ˆä¸­ã€‚å…·ä½“çš„å¤„ç†è§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n</blockquote>\n<ul>\n<li>å¦‚æœå‹å…¥åˆ°æ ˆä¸­çš„æ˜¯StartTag Tokenï¼ŒHTML è§£æå™¨ä¼šä¸ºè¯¥ Token åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ° DOM æ ‘ä¸­ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±æ˜¯æ ˆä¸­ç›¸é‚»çš„é‚£ä¸ªå…ƒç´ ç”Ÿæˆçš„èŠ‚ç‚¹ã€‚</li>\n<li>å¦‚æœåˆ†è¯å™¨è§£æå‡ºæ¥æ˜¯æ–‡æœ¬ Tokenï¼Œé‚£ä¹ˆä¼šç”Ÿæˆä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ° DOM æ ‘ä¸­ï¼Œæ–‡æœ¬ Token æ˜¯ä¸éœ€è¦å‹å…¥åˆ°æ ˆä¸­ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±æ˜¯å½“å‰æ ˆé¡¶ Token æ‰€å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚</li>\n<li>å¦‚æœåˆ†è¯å™¨è§£æå‡ºæ¥çš„æ˜¯EndTag æ ‡ç­¾ï¼Œæ¯”å¦‚æ˜¯ EndTag divï¼ŒHTML è§£æå™¨ä¼šæŸ¥çœ‹ Token æ ˆé¡¶çš„å…ƒç´ æ˜¯å¦æ˜¯ StarTag divï¼Œå¦‚æœæ˜¯ï¼Œå°±å°† StartTag div ä»æ ˆä¸­å¼¹å‡ºï¼Œè¡¨ç¤ºè¯¥ div å…ƒç´ è§£æå®Œæˆã€‚</li>\n</ul>\n<p>é€šè¿‡åˆ†è¯å™¨äº§ç”Ÿçš„æ–° Token å°±è¿™æ ·ä¸åœåœ°å‹æ ˆå’Œå‡ºæ ˆï¼Œæ•´ä¸ªè§£æè¿‡ç¨‹å°±è¿™æ ·ä¸€ç›´æŒç»­ä¸‹å»ï¼Œç›´åˆ°åˆ†è¯å™¨å°†æ‰€æœ‰å­—èŠ‚æµåˆ†è¯å®Œæˆã€‚</p>\n<p>ä¸ºäº†æ›´åŠ ç›´è§‚åœ°ç†è§£æ•´ä¸ªè¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬ç»“åˆä¸€æ®µ HTML ä»£ç ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œæ¥ä¸€æ­¥æ­¥åˆ†æ DOM æ ‘çš„ç”Ÿæˆè¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ®µä»£ç ä»¥å­—èŠ‚æµçš„å½¢å¼ä¼ ç»™äº† HTML è§£æå™¨ï¼Œç»è¿‡åˆ†è¯å™¨å¤„ç†ï¼Œè§£æå‡ºæ¥çš„ç¬¬ä¸€ä¸ª Token æ˜¯ StartTag htmlï¼Œè§£æå‡ºæ¥çš„ Token ä¼šè¢«å‹å…¥åˆ°æ ˆä¸­ï¼Œå¹¶åŒæ—¶åˆ›å»ºä¸€ä¸ª html çš„ DOM èŠ‚ç‚¹ï¼Œå°†å…¶åŠ å…¥åˆ° DOM æ ‘ä¸­ã€‚</p>\n<p>è¿™é‡Œéœ€è¦è¡¥å……è¯´æ˜ä¸‹ï¼ŒHTML è§£æå™¨å¼€å§‹å·¥ä½œæ—¶ï¼Œä¼šé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªæ ¹ä¸º document çš„ç©º DOM ç»“æ„ï¼ŒåŒæ—¶ä¼šå°†ä¸€ä¸ª StartTag document çš„ Token å‹å…¥æ ˆåº•ã€‚ç„¶åç»è¿‡åˆ†è¯å™¨è§£æå‡ºæ¥çš„ç¬¬ä¸€ä¸ª StartTag html Token ä¼šè¢«å‹å…¥åˆ°æ ˆä¸­ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª html çš„ DOM èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ° document ä¸Šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/59.png\" alt=\"img\"></p>\n<p>ç„¶åæŒ‰ç…§åŒæ ·çš„æµç¨‹è§£æå‡ºæ¥ StartTag body å’Œ StartTag divï¼Œå…¶ Token æ ˆå’Œ DOM çš„çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/60.png\" alt=\"img\"></p>\n<p>æ¥ä¸‹æ¥è§£æå‡ºæ¥çš„æ˜¯ç¬¬ä¸€ä¸ª div çš„æ–‡æœ¬ Tokenï¼Œæ¸²æŸ“å¼•æ“ä¼šä¸ºè¯¥ Token åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¹¶å°†è¯¥ Token æ·»åŠ åˆ° DOM ä¸­ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹å°±æ˜¯å½“å‰ Token æ ˆé¡¶å…ƒç´ å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/61.png\" alt=\"img\"></p>\n<p>å†æ¥ä¸‹æ¥ï¼Œåˆ†è¯å™¨è§£æå‡ºæ¥ç¬¬ä¸€ä¸ª EndTag divï¼Œè¿™æ—¶å€™ HTML è§£æå™¨ä¼šå»åˆ¤æ–­å½“å‰æ ˆé¡¶çš„å…ƒç´ æ˜¯å¦æ˜¯ StartTag divï¼Œå¦‚æœæ˜¯åˆ™ä»æ ˆé¡¶å¼¹å‡º StartTag divï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/62.png\" alt=\"img\"></p>\n<p>æŒ‰ç…§åŒæ ·çš„è§„åˆ™ï¼Œä¸€è·¯è§£æï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/63.png\" alt=\"img\"></p>\n<p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œç›¸ä¿¡ä½ å·²ç»æ¸…æ¥š DOM æ˜¯æ€ä¹ˆç”Ÿæˆçš„äº†ã€‚ä¸è¿‡åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒHTML æºæ–‡ä»¶ä¸­æ—¢åŒ…å« CSS å’Œ JavaScriptï¼ŒåˆåŒ…å«å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰æ–‡ä»¶ï¼Œæ‰€ä»¥å¤„ç†è¿‡ç¨‹è¿œæ¯”ä¸Šé¢è¿™ä¸ªç¤ºèŒƒ Demo å¤æ‚ã€‚ä¸è¿‡ç†è§£äº†è¿™ä¸ªç®€å•çš„ Demo ç”Ÿæˆè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾€ä¸‹åˆ†ææ›´åŠ å¤æ‚çš„åœºæ™¯äº†ã€‚</p>\n<h2 id=\"JavaScript-æ˜¯å¦‚ä½•å½±å“-DOM-ç”Ÿæˆçš„\"><a href=\"#JavaScript-æ˜¯å¦‚ä½•å½±å“-DOM-ç”Ÿæˆçš„\" class=\"headerlink\" title=\"JavaScript æ˜¯å¦‚ä½•å½±å“ DOM ç”Ÿæˆçš„\"></a>JavaScript æ˜¯å¦‚ä½•å½±å“ DOM ç”Ÿæˆçš„</h2><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ç¨å¾®å¤æ‚ç‚¹çš„ HTML æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> div1 = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&#x27;div&#x27;</span>)[<span class=\"number\">0</span>]</span></span><br><span class=\"line\"><span class=\"javascript\">    div1.innerText = <span class=\"string\">&#x27;time.geekbang&#x27;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘åœ¨ä¸¤æ®µ div ä¸­é—´æ’å…¥äº†ä¸€æ®µ JavaScript è„šæœ¬ï¼Œè¿™æ®µè„šæœ¬çš„è§£æè¿‡ç¨‹å°±æœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚scriptæ ‡ç­¾ä¹‹å‰ï¼Œæ‰€æœ‰çš„è§£ææµç¨‹è¿˜æ˜¯å’Œä¹‹å‰ä»‹ç»çš„ä¸€æ ·ï¼Œä½†æ˜¯è§£æåˆ°scriptæ ‡ç­¾æ—¶ï¼Œæ¸²æŸ“å¼•æ“åˆ¤æ–­è¿™æ˜¯ä¸€æ®µè„šæœ¬ï¼Œæ­¤æ—¶ HTML è§£æå™¨å°±ä¼šæš‚åœ DOM çš„è§£æï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„ JavaScript å¯èƒ½è¦ä¿®æ”¹å½“å‰å·²ç»ç”Ÿæˆçš„ DOM ç»“æ„ã€‚</p>\n<p>é€šè¿‡å‰é¢ DOM ç”Ÿæˆæµç¨‹åˆ†æï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å½“è§£æåˆ° script è„šæœ¬æ ‡ç­¾æ—¶ï¼Œå…¶ DOM æ ‘ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img data-src=\"http://blog.poetries.top/img-repo/2019/11/64.png\" alt=\"img\"></p>\n<p>è¿™æ—¶å€™ HTML è§£æå™¨æš‚åœå·¥ä½œï¼ŒJavaScript å¼•æ“ä»‹å…¥ï¼Œå¹¶æ‰§è¡Œ script æ ‡ç­¾ä¸­çš„è¿™æ®µè„šæœ¬ï¼Œå› ä¸ºè¿™æ®µ JavaScript è„šæœ¬ä¿®æ”¹äº† DOM ä¸­ç¬¬ä¸€ä¸ª div ä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥æ‰§è¡Œè¿™æ®µè„šæœ¬ä¹‹åï¼Œdiv èŠ‚ç‚¹å†…å®¹å·²ç»ä¿®æ”¹ä¸º time.geekbang äº†ã€‚è„šæœ¬æ‰§è¡Œå®Œæˆä¹‹åï¼ŒHTML è§£æå™¨æ¢å¤è§£æè¿‡ç¨‹ï¼Œç»§ç»­è§£æåç»­çš„å†…å®¹ï¼Œç›´è‡³ç”Ÿæˆæœ€ç»ˆçš„ DOMã€‚</p>\n<p>ä»¥ä¸Šè¿‡ç¨‹åº”è¯¥è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œä¸è¿‡é™¤äº†åœ¨é¡µé¢ä¸­ç›´æ¥å†…åµŒ JavaScript è„šæœ¬ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜é€šå¸¸éœ€è¦åœ¨é¡µé¢ä¸­å¼•å…¥ JavaScript æ–‡ä»¶ï¼Œè¿™ä¸ªè§£æè¿‡ç¨‹å°±ç¨å¾®å¤æ‚äº†äº›ï¼Œå¦‚ä¸‹é¢ä»£ç ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//foo.js</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> div1 = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&#x27;div&#x27;</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">div1.innerText = <span class=\"string\">&#x27;time.geekbang&#x27;</span></span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div&gt;<span class=\"number\">1</span>&lt;/div&gt;</span><br><span class=\"line\">    &lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&#x27;foo.js&#x27;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;div&gt;test&lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ®µä»£ç çš„åŠŸèƒ½è¿˜æ˜¯å’Œå‰é¢é‚£æ®µä»£ç æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™é‡Œæˆ‘æŠŠå†…åµŒ JavaScript è„šæœ¬ä¿®æ”¹æˆäº†é€šè¿‡ JavaScript æ–‡ä»¶åŠ è½½ã€‚å…¶æ•´ä¸ªæ‰§è¡Œæµç¨‹è¿˜æ˜¯ä¸€æ ·çš„ï¼Œæ‰§è¡Œåˆ° JavaScript æ ‡ç­¾æ—¶ï¼Œæš‚åœæ•´ä¸ª DOM çš„è§£æï¼Œæ‰§è¡Œ JavaScript ä»£ç ï¼Œä¸è¿‡è¿™é‡Œæ‰§è¡Œ JavaScript æ—¶ï¼Œéœ€è¦å…ˆä¸‹è½½è¿™æ®µ JavaScript ä»£ç ã€‚è¿™é‡Œéœ€è¦é‡ç‚¹å…³æ³¨ä¸‹è½½ç¯å¢ƒï¼Œå› ä¸ºJavaScript æ–‡ä»¶çš„ä¸‹è½½è¿‡ç¨‹ä¼šé˜»å¡ DOM è§£æï¼Œè€Œé€šå¸¸ä¸‹è½½åˆæ˜¯éå¸¸è€—æ—¶çš„ï¼Œä¼šå—åˆ°ç½‘ç»œç¯å¢ƒã€JavaScript æ–‡ä»¶å¤§å°ç­‰å› ç´ çš„å½±å“ã€‚</p>\n<p>ä¸è¿‡ Chrome æµè§ˆå™¨åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå…¶ä¸­ä¸€ä¸ªä¸»è¦çš„ä¼˜åŒ–æ˜¯é¢„è§£ææ“ä½œã€‚å½“æ¸²æŸ“å¼•æ“æ”¶åˆ°å­—èŠ‚æµä¹‹åï¼Œä¼šå¼€å¯ä¸€ä¸ªé¢„è§£æçº¿ç¨‹ï¼Œç”¨æ¥åˆ†æ HTML æ–‡ä»¶ä¸­åŒ…å«çš„ JavaScriptã€CSS ç­‰ç›¸å…³æ–‡ä»¶ï¼Œè§£æåˆ°ç›¸å…³æ–‡ä»¶ä¹‹åï¼Œé¢„è§£æçº¿ç¨‹ä¼šæå‰ä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚</p>\n<p>å†å›åˆ° DOM è§£æä¸Šï¼Œæˆ‘ä»¬çŸ¥é“å¼•å…¥ JavaScript çº¿ç¨‹ä¼šé˜»å¡ DOMï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›ç›¸å…³çš„ç­–ç•¥æ¥è§„é¿ï¼Œæ¯”å¦‚ä½¿ç”¨ CDN æ¥åŠ é€Ÿ JavaScript æ–‡ä»¶çš„åŠ è½½ï¼Œå‹ç¼© JavaScript æ–‡ä»¶çš„ä½“ç§¯ã€‚å¦å¤–ï¼Œå¦‚æœ JavaScript æ–‡ä»¶ä¸­æ²¡æœ‰æ“ä½œ DOM ç›¸å…³ä»£ç ï¼Œå°±å¯ä»¥å°†è¯¥ JavaScript è„šæœ¬è®¾ç½®ä¸ºå¼‚æ­¥åŠ è½½ï¼Œé€šè¿‡ async æˆ– defer æ¥æ ‡è®°ä»£ç ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script async type=&quot;text/javascript&quot; src=&#x27;foo.js&#x27;&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script defer type=&quot;text/javascript&quot; src=&#x27;foo.js&#x27;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>async å’Œ defer è™½ç„¶éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸è¿‡è¿˜æœ‰ä¸€äº›å·®å¼‚ï¼Œä½¿ç”¨ async æ ‡å¿—çš„è„šæœ¬æ–‡ä»¶ä¸€æ—¦åŠ è½½å®Œæˆï¼Œä¼šç«‹å³æ‰§è¡Œï¼›è€Œä½¿ç”¨äº† defer æ ‡è®°çš„è„šæœ¬æ–‡ä»¶ï¼Œéœ€è¦åœ¨ DOMContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† JavaScript æ˜¯å¦‚ä½•é˜»å¡ DOM è§£æçš„äº†ï¼Œé‚£æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ç»“åˆæ–‡ä¸­ä»£ç çœ‹çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;style src=&#x27;theme.css&#x27;&gt;&lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div&gt;1&lt;/div&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">            let div1 = document.getElementsByTagName(&#x27;div&#x27;)[0]</span><br><span class=\"line\">            div1.innerText = &#x27;time.geekbang&#x27; // éœ€è¦ DOM</span><br><span class=\"line\">            div1.style.color = &#x27;red&#x27;  // éœ€è¦ CSSOM</span><br><span class=\"line\">        &lt;/script&gt;</span><br><span class=\"line\">    &lt;div&gt;test&lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¯¥ç¤ºä¾‹ä¸­ï¼ŒJavaScript ä»£ç å‡ºç°äº† div1.style.color = â€˜redâ€™ çš„è¯­å¥ï¼Œå®ƒæ˜¯ç”¨æ¥æ“çºµ CSSOM çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ JavaScript ä¹‹å‰ï¼Œéœ€è¦å…ˆè§£æ JavaScript è¯­å¥ä¹‹ä¸Šæ‰€æœ‰çš„ CSS æ ·å¼ã€‚æ‰€ä»¥å¦‚æœä»£ç é‡Œå¼•ç”¨äº†å¤–éƒ¨çš„ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ JavaScript ä¹‹å‰ï¼Œè¿˜éœ€è¦ç­‰å¾…å¤–éƒ¨çš„ CSS æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå¹¶è§£æç”Ÿæˆ CSSOM å¯¹è±¡ä¹‹åï¼Œæ‰èƒ½æ‰§è¡Œ JavaScript è„šæœ¬ã€‚</p>\n<p>è€Œ JavaScript å¼•æ“åœ¨è§£æ JavaScript ä¹‹å‰ï¼Œæ˜¯ä¸çŸ¥é“ JavaScript æ˜¯å¦æ“çºµäº† CSSOM çš„ï¼Œæ‰€ä»¥æ¸²æŸ“å¼•æ“åœ¨é‡åˆ° JavaScript è„šæœ¬æ—¶ï¼Œä¸ç®¡è¯¥è„šæœ¬æ˜¯å¦æ“çºµäº† CSSOMï¼Œéƒ½ä¼šæ‰§è¡Œ CSS æ–‡ä»¶ä¸‹è½½ï¼Œè§£ææ“ä½œï¼Œå†æ‰§è¡Œ JavaScript è„šæœ¬ã€‚</p>\n<p>æ‰€ä»¥è¯´ JavaScript è„šæœ¬æ˜¯ä¾èµ–æ ·å¼è¡¨çš„ï¼Œè¿™åˆå¤šäº†ä¸€ä¸ªé˜»å¡è¿‡ç¨‹ã€‚è‡³äºå¦‚ä½•ä¼˜åŒ–ï¼Œæˆ‘ä»¬åœ¨ä¸‹ç¯‡æ–‡ç« ä¸­å†æ¥æ·±å…¥æ¢è®¨ã€‚</p>\n<p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“äº† JavaScript ä¼šé˜»å¡ DOM ç”Ÿæˆï¼Œè€Œæ ·å¼æ–‡ä»¶åˆä¼šé˜»å¡ JavaScript çš„æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨å®é™…çš„å·¥ç¨‹ä¸­éœ€è¦é‡ç‚¹å…³æ³¨ JavaScript æ–‡ä»¶å’Œæ ·å¼è¡¨æ–‡ä»¶ï¼Œä½¿ç”¨ä¸å½“ä¼šå½±å“åˆ°é¡µé¢æ€§èƒ½çš„</p>\n<h2 id=\"æ€»ç»“-1\"><a href=\"#æ€»ç»“-1\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©å°±è®²åˆ°è¿™é‡Œï¼Œä¸‹é¢æˆ‘æ¥æ€»ç»“ä¸‹ä»Šå¤©çš„å†…å®¹ã€‚</p>\n<p>é¦–å…ˆæˆ‘ä»¬ä»‹ç»äº† DOM æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œç„¶ååˆåŸºäº DOM çš„ç”Ÿæˆè¿‡ç¨‹åˆ†æäº† JavaScript æ˜¯å¦‚ä½•å½±å“åˆ° DOM ç”Ÿæˆçš„ã€‚å› ä¸º CSS å’Œ JavaScript éƒ½ä¼šå½±å“åˆ° DOM çš„ç”Ÿæˆï¼Œæ‰€ä»¥æˆ‘ä»¬åˆä»‹ç»äº†ä¸€äº›åŠ é€Ÿç”Ÿæˆ DOM çš„æ–¹æ¡ˆï¼Œç†è§£äº†è¿™äº›ï¼Œèƒ½è®©ä½ æ›´åŠ æ·±åˆ»åœ°ç†è§£å¦‚ä½•å»ä¼˜åŒ–é¦–æ¬¡é¡µé¢æ¸²æŸ“ã€‚</p>\n<p>é¢å¤–è¯´æ˜ä¸€ä¸‹ï¼Œæ¸²æŸ“å¼•æ“è¿˜æœ‰ä¸€ä¸ªå®‰å…¨æ£€æŸ¥æ¨¡å—å« XSSAuditorï¼Œæ˜¯ç”¨æ¥æ£€æµ‹è¯æ³•å®‰å…¨çš„ã€‚åœ¨åˆ†è¯å™¨è§£æå‡ºæ¥ Token ä¹‹åï¼Œå®ƒä¼šæ£€æµ‹è¿™äº›æ¨¡å—æ˜¯å¦å®‰å…¨ï¼Œæ¯”å¦‚æ˜¯å¦å¼•ç”¨äº†å¤–éƒ¨è„šæœ¬ï¼Œæ˜¯å¦ç¬¦åˆ CSP è§„èŒƒï¼Œæ˜¯å¦å­˜åœ¨è·¨ç«™ç‚¹è¯·æ±‚ç­‰ã€‚å¦‚æœå‡ºç°ä¸ç¬¦åˆè§„èŒƒçš„å†…å®¹ï¼ŒXSSAuditor ä¼šå¯¹è¯¥è„šæœ¬æˆ–è€…ä¸‹è½½ä»»åŠ¡è¿›è¡Œæ‹¦æˆªã€‚è¯¦ç»†å†…å®¹æˆ‘ä»¬ä¼šåœ¨åé¢çš„å®‰å…¨æ¨¡å—ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†</p>\n<h1 id=\"5-äº‹ä»¶æ¨¡å‹\"><a href=\"#5-äº‹ä»¶æ¨¡å‹\" class=\"headerlink\" title=\"5.äº‹ä»¶æ¨¡å‹\"></a>5.äº‹ä»¶æ¨¡å‹</h1><p>äº‹ä»¶çš„æœ¬è´¨æ˜¯ç¨‹åºå„ä¸ªç»„æˆéƒ¨åˆ†ä¹‹é—´çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œä¹Ÿæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§å®ç°ã€‚DOM æ”¯æŒå¤§é‡çš„äº‹ä»¶ï¼Œæœ¬ç« ä»‹ç» DOM çš„äº‹ä»¶ç¼–ç¨‹ã€‚</p>\n<h2 id=\"EventTarget-æ¥å£\"><a href=\"#EventTarget-æ¥å£\" class=\"headerlink\" title=\"EventTarget æ¥å£\"></a>EventTarget æ¥å£</h2><p>DOM çš„äº‹ä»¶æ“ä½œï¼ˆç›‘å¬å’Œè§¦å‘ï¼‰ï¼Œéƒ½å®šä¹‰åœ¨<code>EventTarget</code>æ¥å£ã€‚æ‰€æœ‰èŠ‚ç‚¹å¯¹è±¡éƒ½éƒ¨ç½²äº†è¿™ä¸ªæ¥å£ï¼Œå…¶ä»–ä¸€äº›éœ€è¦äº‹ä»¶é€šä¿¡çš„æµè§ˆå™¨å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼Œ<code>XMLHttpRequest</code>ã€<code>AudioNode</code>ã€<code>AudioContext</code>ï¼‰ä¹Ÿéƒ¨ç½²äº†è¿™ä¸ªæ¥å£ã€‚</p>\n<p>è¯¥æ¥å£ä¸»è¦æä¾›ä¸‰ä¸ªå®ä¾‹æ–¹æ³•ã€‚</p>\n<ul>\n<li><code>addEventListener</code>ï¼šç»‘å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•°</li>\n<li><code>removeEventListener</code>ï¼šç§»é™¤äº‹ä»¶çš„ç›‘å¬å‡½æ•°</li>\n<li><code>dispatchEvent</code>ï¼šè§¦å‘äº‹ä»¶</li>\n</ul>\n<h3 id=\"EventTarget-addEventListener\"><a href=\"#EventTarget-addEventListener\" class=\"headerlink\" title=\"EventTarget.addEventListener()\"></a>EventTarget.addEventListener()</h3><p><code>EventTarget.addEventListener()</code>ç”¨äºåœ¨å½“å‰èŠ‚ç‚¹æˆ–å¯¹è±¡ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªç‰¹å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¸€æ—¦è¿™ä¸ªäº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œç›‘å¬å‡½æ•°ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">target.addEventListener(type, listener[, useCapture]);</span><br></pre></td></tr></table></figure>\n\n<p>è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ã€‚</p>\n<ul>\n<li><code>type</code>ï¼šäº‹ä»¶åç§°ï¼Œå¤§å°å†™æ•æ„Ÿã€‚</li>\n<li><code>listener</code>ï¼šç›‘å¬å‡½æ•°ã€‚äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šè°ƒç”¨è¯¥ç›‘å¬å‡½æ•°ã€‚</li>\n<li><code>useCapture</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åœ¨æ•è·é˜¶æ®µï¼ˆcaptureï¼‰è§¦å‘ï¼ˆå‚è§åæ–‡ã€Šäº‹ä»¶çš„ä¼ æ’­ã€‹éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼ˆç›‘å¬å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè¢«è§¦å‘ï¼‰ã€‚è¯¥å‚æ•°å¯é€‰ã€‚</li>\n</ul>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function hello() &#123;</span><br><span class=\"line\">  console.log(&#39;Hello world&#39;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var button &#x3D; document.getElementById(&#39;btn&#39;);</span><br><span class=\"line\">button.addEventListener(&#39;click&#39;, hello, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>button</code>èŠ‚ç‚¹çš„<code>addEventListener</code>æ–¹æ³•ç»‘å®š<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°<code>hello</code>ï¼Œè¯¥å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p>\n<p>å…³äºå‚æ•°ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ã€‚</p>\n<p>é¦–å…ˆï¼Œç¬¬äºŒä¸ªå‚æ•°é™¤äº†ç›‘å¬å‡½æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå…·æœ‰<code>handleEvent</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">buttonElement.addEventListener(&#39;click&#39;, &#123;</span><br><span class=\"line\">  handleEvent: function (event) &#123;</span><br><span class=\"line\">    console.log(&#39;click&#39;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>addEventListener</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªå…·æœ‰<code>handleEvent</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p>\n<p>å…¶æ¬¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°é™¤äº†å¸ƒå°”å€¼<code>useCapture</code>ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ‰ä»¥ä¸‹å±æ€§ã€‚</p>\n<blockquote>\n<ul>\n<li><code>capture</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦åœ¨<code>æ•è·é˜¶æ®µ</code>è§¦å‘ç›‘å¬å‡½æ•°ã€‚</li>\n<li><code>once</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åªè§¦å‘ä¸€æ¬¡ï¼Œç„¶åå°±è‡ªåŠ¨ç§»é™¤ã€‚</li>\n<li><code>passive</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°ä¸ä¼šè°ƒç”¨äº‹ä»¶çš„<code>preventDefault</code>æ–¹æ³•ã€‚å¦‚æœç›‘å¬å‡½æ•°è°ƒç”¨äº†ï¼Œæµè§ˆå™¨å°†å¿½ç•¥è¿™ä¸ªè¦æ±‚ï¼Œå¹¶åœ¨ç›‘æ§å°è¾“å‡ºä¸€è¡Œè­¦å‘Šã€‚</li>\n</ul>\n</blockquote>\n<p><code>addEventListener</code>æ–¹æ³•å¯ä»¥ä¸ºé’ˆå¯¹å½“å‰å¯¹è±¡çš„åŒä¸€ä¸ªäº‹ä»¶ï¼Œæ·»åŠ å¤šä¸ªä¸åŒçš„ç›‘å¬å‡½æ•°ã€‚è¿™äº›å‡½æ•°æŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘ï¼Œå³å…ˆæ·»åŠ å…ˆè§¦å‘ã€‚å¦‚æœä¸ºåŒä¸€ä¸ªäº‹ä»¶å¤šæ¬¡æ·»åŠ åŒä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œè¯¥å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¤šä½™çš„æ·»åŠ å°†è‡ªåŠ¨è¢«å»é™¤ï¼ˆä¸å¿…ä½¿ç”¨<code>removeEventListener</code>æ–¹æ³•æ‰‹åŠ¨å»é™¤ï¼‰ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function hello() &#123;</span><br><span class=\"line\">  console.log(&#39;Hello world&#39;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">document.addEventListener(&#39;click&#39;, hello, false);</span><br><span class=\"line\">document.addEventListener(&#39;click&#39;, hello, false);</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»æ–‡æ¡£åªä¼šè¾“å‡ºä¸€è¡Œ<code>Hello world</code>ã€‚</p>\n<p>å¦‚æœå¸Œæœ›å‘ç›‘å¬å‡½æ•°ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ç”¨åŒ¿åå‡½æ•°åŒ…è£…ä¸€ä¸‹ç›‘å¬å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function print(x) &#123;</span><br><span class=\"line\">  console.log(x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var el &#x3D; document.getElementById(&#39;div1&#39;);</span><br><span class=\"line\">el.addEventListener(&#39;click&#39;, function () &#123; print(&#39;Hello&#39;); &#125;, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç é€šè¿‡åŒ¿åå‡½æ•°ï¼Œå‘ç›‘å¬å‡½æ•°<code>print</code>ä¼ é€’äº†ä¸€ä¸ªå‚æ•°ã€‚</p>\n<p>ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>ï¼ŒæŒ‡å‘å½“å‰äº‹ä»¶æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç å¦‚ä¸‹</span><br><span class=\"line\">&#x2F;&#x2F; &lt;p id&#x3D;&quot;para&quot;&gt;Hello&lt;&#x2F;p&gt;</span><br><span class=\"line\">var para &#x3D; document.getElementById(&#39;para&#39;);</span><br><span class=\"line\">para.addEventListener(&#39;click&#39;, function (e) &#123;</span><br><span class=\"line\">  console.log(this.nodeName); &#x2F;&#x2F; &quot;P&quot;</span><br><span class=\"line\">&#125;, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘äº‹ä»¶æ‰€åœ¨çš„å¯¹è±¡<code>para</code>ã€‚</p>\n<h3 id=\"EventTarget-removeEventListener\"><a href=\"#EventTarget-removeEventListener\" class=\"headerlink\" title=\"EventTarget.removeEventListener()\"></a>EventTarget.removeEventListener()</h3><p><code>EventTarget.removeEventListener</code>æ–¹æ³•ç”¨æ¥ç§»é™¤<code>addEventListener</code>æ–¹æ³•æ·»åŠ çš„äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div.addEventListener(&#39;click&#39;, listener, false);</span><br><span class=\"line\">div.removeEventListener(&#39;click&#39;, listener, false);</span><br></pre></td></tr></table></figure>\n\n<p><code>removeEventListener</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¸<code>addEventListener</code>æ–¹æ³•å®Œå…¨ä¸€è‡´ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°â€œäº‹ä»¶ç±»å‹â€ï¼Œå¤§å°å†™æ•æ„Ÿã€‚</p>\n<p>æ³¨æ„ï¼Œ<code>removeEventListener</code>æ–¹æ³•ç§»é™¤çš„ç›‘å¬å‡½æ•°ï¼Œå¿…é¡»æ˜¯<code>addEventListener</code>æ–¹æ³•æ·»åŠ çš„é‚£ä¸ªç›‘å¬å‡½æ•°ï¼Œè€Œä¸”å¿…é¡»åœ¨åŒä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¦åˆ™æ— æ•ˆã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div.addEventListener(&#39;click&#39;, function (e) &#123;&#125;, false);</span><br><span class=\"line\">div.removeEventListener(&#39;click&#39;, function (e) &#123;&#125;, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>removeEventListener</code>æ–¹æ³•æ— æ•ˆï¼Œå› ä¸ºç›‘å¬å‡½æ•°ä¸æ˜¯åŒä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">element.addEventListener(&#39;mousedown&#39;, handleMouseDown, true);</span><br><span class=\"line\">element.removeEventListener(&quot;mousedown&quot;, handleMouseDown, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>removeEventListener</code>æ–¹æ³•ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¸ä¸€æ ·ã€‚</p>\n<h3 id=\"EventTarget-dispatchEvent\"><a href=\"#EventTarget-dispatchEvent\" class=\"headerlink\" title=\"EventTarget.dispatchEvent()\"></a>EventTarget.dispatchEvent()</h3><p><code>EventTarget.dispatchEvent</code>æ–¹æ³•åœ¨å½“å‰èŠ‚ç‚¹ä¸Šè§¦å‘æŒ‡å®šäº‹ä»¶ï¼Œä»è€Œè§¦å‘ç›‘å¬å‡½æ•°çš„æ‰§è¡Œã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåªè¦æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†<code>Event.preventDefault()</code>ï¼Œåˆ™è¿”å›å€¼ä¸º<code>false</code>ï¼Œå¦åˆ™ä¸º<code>true</code>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">target.dispatchEvent(event)</span><br></pre></td></tr></table></figure>\n\n<p><code>dispatchEvent</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>Event</code>å¯¹è±¡çš„å®ä¾‹ï¼ˆè¯¦è§ã€ŠEvent å¯¹è±¡ã€‹ç« èŠ‚ï¼‰ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">para.addEventListener(&#39;click&#39;, hello, false);</span><br><span class=\"line\">var event &#x3D; new Event(&#39;click&#39;);</span><br><span class=\"line\">para.dispatchEvent(event);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç åœ¨å½“å‰èŠ‚ç‚¹è§¦å‘äº†<code>click</code>äº‹ä»¶ã€‚</p>\n<p>å¦‚æœ<code>dispatchEvent</code>æ–¹æ³•çš„å‚æ•°ä¸ºç©ºï¼Œæˆ–è€…ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äº‹ä»¶å¯¹è±¡ï¼Œå°†æŠ¥é”™ã€‚</p>\n<p>ä¸‹é¢ä»£ç æ ¹æ®<code>dispatchEvent</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œåˆ¤æ–­äº‹ä»¶æ˜¯å¦è¢«å–æ¶ˆäº†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var canceled &#x3D; !cb.dispatchEvent(event);</span><br><span class=\"line\">if (canceled) &#123;</span><br><span class=\"line\">  console.log(&#39;äº‹ä»¶å–æ¶ˆ&#39;);</span><br><span class=\"line\">&#125; else &#123;</span><br><span class=\"line\">  console.log(&#39;äº‹ä»¶æœªå–æ¶ˆ&#39;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç›‘å¬å‡½æ•°\"><a href=\"#ç›‘å¬å‡½æ•°\" class=\"headerlink\" title=\"ç›‘å¬å‡½æ•°\"></a>ç›‘å¬å‡½æ•°</h2><p>æµè§ˆå™¨çš„äº‹ä»¶æ¨¡å‹ï¼Œå°±æ˜¯é€šè¿‡ç›‘å¬å‡½æ•°ï¼ˆlistenerï¼‰å¯¹äº‹ä»¶åšå‡ºååº”ã€‚äº‹ä»¶å‘ç”Ÿåï¼Œæµè§ˆå™¨ç›‘å¬åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ç›‘å¬å‡½æ•°ã€‚è¿™æ˜¯äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å¼ï¼ˆevent-drivenï¼‰çš„ä¸»è¦ç¼–ç¨‹æ–¹å¼ã€‚</p>\n<p>JavaScript æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥ä¸ºäº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°ã€‚</p>\n<h3 id=\"HTML-çš„-on-å±æ€§\"><a href=\"#HTML-çš„-on-å±æ€§\" class=\"headerlink\" title=\"HTML çš„ on- å±æ€§\"></a>HTML çš„ on- å±æ€§</h3><p>HTML è¯­è¨€å…è®¸åœ¨å…ƒç´ çš„å±æ€§ä¸­ï¼Œç›´æ¥å®šä¹‰æŸäº›äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body onload&#x3D;&quot;doSomething()&quot;&gt;</span><br><span class=\"line\">&lt;div onclick&#x3D;&quot;console.log(&#39;è§¦å‘äº‹ä»¶&#39;)&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸º<code>body</code>èŠ‚ç‚¹çš„<code>load</code>äº‹ä»¶ã€<code>div</code>èŠ‚ç‚¹çš„<code>click</code>äº‹ä»¶ï¼ŒæŒ‡å®šäº†ç›‘å¬ä»£ç ã€‚ä¸€æ—¦äº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚</p>\n<p>å…ƒç´ çš„äº‹ä»¶ç›‘å¬å±æ€§ï¼Œéƒ½æ˜¯<code>on</code>åŠ ä¸Šäº‹ä»¶åï¼Œæ¯”å¦‚<code>onload</code>å°±æ˜¯<code>on + load</code>ï¼Œè¡¨ç¤º<code>load</code>äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p>\n<p>æ³¨æ„ï¼Œè¿™äº›å±æ€§çš„å€¼æ˜¯å°†ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- æ­£ç¡® --&gt;</span><br><span class=\"line\">&lt;body onload&#x3D;&quot;doSomething()&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- é”™è¯¯ --&gt;</span><br><span class=\"line\">&lt;body onload&#x3D;&quot;doSomething&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸€æ—¦æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œ<code>on-</code>å±æ€§çš„å€¼æ˜¯åŸæ ·ä¼ å…¥ JavaScript å¼•æ“æ‰§è¡Œã€‚å› æ­¤å¦‚æœè¦æ‰§è¡Œå‡½æ•°ï¼Œä¸è¦å¿˜è®°åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚</p>\n<p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬ä»£ç ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div onClick&#x3D;&quot;console.log(2)&quot;&gt;</span><br><span class=\"line\">  &lt;button onClick&#x3D;&quot;console.log(1)&quot;&gt;ç‚¹å‡»&lt;&#x2F;button&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;button&gt;</code>æ˜¯<code>&lt;div&gt;</code>çš„å­å…ƒç´ ã€‚<code>&lt;button&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼Œä¹Ÿä¼šè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚ç”±äº<code>on-</code>å±æ€§çš„ç›‘å¬ä»£ç ï¼Œåªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼Œæ‰€ä»¥ç‚¹å‡»ç»“æœæ˜¯å…ˆè¾“å‡º<code>1</code>ï¼Œå†è¾“å‡º<code>2</code>ï¼Œå³äº‹ä»¶ä»å­å…ƒç´ å¼€å§‹å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚</p>\n<p>ç›´æ¥è®¾ç½®<code>on-</code>å±æ€§ï¼Œä¸é€šè¿‡å…ƒç´ èŠ‚ç‚¹çš„<code>setAttribute</code>æ–¹æ³•è®¾ç½®<code>on-</code>å±æ€§ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">el.setAttribute(&#39;onclick&#39;, &#39;doSomething()&#39;);</span><br><span class=\"line\">&#x2F;&#x2F; ç­‰åŒäº</span><br><span class=\"line\">&#x2F;&#x2F; &lt;Element onclick&#x3D;&quot;doSomething()&quot;&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§\"><a href=\"#å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§\" class=\"headerlink\" title=\"å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§\"></a>å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§</h3><p>å…ƒç´ èŠ‚ç‚¹å¯¹è±¡çš„äº‹ä»¶å±æ€§ï¼ŒåŒæ ·å¯ä»¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.onload &#x3D; doSomething;</span><br><span class=\"line\"></span><br><span class=\"line\">div.onclick &#x3D; function (event) &#123;</span><br><span class=\"line\">  console.log(&#39;è§¦å‘äº‹ä»¶&#39;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬å‡½æ•°ï¼Œä¹Ÿæ˜¯åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p>\n<p>æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸ HTML çš„<code>on-</code>å±æ€§çš„å·®å¼‚æ˜¯ï¼Œå®ƒçš„å€¼æ˜¯å‡½æ•°åï¼ˆ<code>doSomething</code>ï¼‰ï¼Œè€Œä¸åƒåè€…ï¼Œå¿…é¡»ç»™å‡ºå®Œæ•´çš„ç›‘å¬ä»£ç ï¼ˆ<code>doSomething()</code>ï¼‰ã€‚</p>\n<h3 id=\"EventTarget-addEventListener-1\"><a href=\"#EventTarget-addEventListener-1\" class=\"headerlink\" title=\"EventTarget.addEventListener()\"></a>EventTarget.addEventListener()</h3><p>æ‰€æœ‰ DOM èŠ‚ç‚¹å®ä¾‹éƒ½æœ‰<code>addEventListener</code>æ–¹æ³•ï¼Œç”¨æ¥ä¸ºè¯¥èŠ‚ç‚¹å®šä¹‰äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">window.addEventListener(&#39;load&#39;, doSomething, false);</span><br></pre></td></tr></table></figure>\n\n<p><code>addEventListener</code>æ–¹æ³•çš„è¯¦ç»†ä»‹ç»ï¼Œå‚è§<code>EventTarget</code>ç« èŠ‚ã€‚</p>\n<h3 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h3><p>ä¸Šé¢ä¸‰ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§â€œHTML çš„ on- å±æ€§â€ï¼Œè¿åäº† HTML ä¸ JavaScript ä»£ç ç›¸åˆ†ç¦»çš„åŸåˆ™ï¼Œå°†ä¸¤è€…å†™åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºä»£ç åˆ†å·¥ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ã€‚</p>\n<p>ç¬¬äºŒç§â€œå…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§â€çš„ç¼ºç‚¹åœ¨äºï¼ŒåŒä¸€ä¸ªäº‹ä»¶åªèƒ½å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®šä¹‰ä¸¤æ¬¡<code>onclick</code>å±æ€§ï¼Œåä¸€æ¬¡å®šä¹‰ä¼šè¦†ç›–å‰ä¸€æ¬¡ã€‚å› æ­¤ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚</p>\n<p>ç¬¬ä¸‰ç§<code>EventTarget.addEventListener</code>æ˜¯æ¨èçš„æŒ‡å®šç›‘å¬å‡½æ•°çš„æ–¹æ³•ã€‚å®ƒæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>åŒä¸€ä¸ªäº‹ä»¶å¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ã€‚</li>\n<li>èƒ½å¤ŸæŒ‡å®šåœ¨å“ªä¸ªé˜¶æ®µï¼ˆæ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µï¼‰è§¦å‘ç›‘å¬å‡½æ•°ã€‚</li>\n<li>é™¤äº† DOM èŠ‚ç‚¹ï¼Œå…¶ä»–å¯¹è±¡ï¼ˆæ¯”å¦‚<code>window</code>ã€<code>XMLHttpRequest</code>ç­‰ï¼‰ä¹Ÿæœ‰è¿™ä¸ªæ¥å£ï¼Œå®ƒç­‰äºæ˜¯æ•´ä¸ª JavaScript ç»Ÿä¸€çš„ç›‘å¬å‡½æ•°æ¥å£ã€‚</li>\n</ul>\n<h2 id=\"this-çš„æŒ‡å‘\"><a href=\"#this-çš„æŒ‡å‘\" class=\"headerlink\" title=\"this çš„æŒ‡å‘\"></a>this çš„æŒ‡å‘</h2><p>ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘è§¦å‘äº‹ä»¶çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;button id&#x3D;&quot;btn&quot; onclick&#x3D;&quot;console.log(this.id)&quot;&gt;ç‚¹å‡»&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»åä¼šè¾“å‡º<code>btn</code>ã€‚</p>\n<p>å…¶ä»–ä¸¤ç§ç›‘å¬å‡½æ•°çš„å†™æ³•ï¼Œ<code>this</code>çš„æŒ‡å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç å¦‚ä¸‹</span><br><span class=\"line\">&#x2F;&#x2F; &lt;button id&#x3D;&quot;btn&quot;&gt;ç‚¹å‡»&lt;&#x2F;button&gt;</span><br><span class=\"line\">var btn &#x3D; document.getElementById(&#39;btn&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å†™æ³•ä¸€</span><br><span class=\"line\">btn.onclick &#x3D; function () &#123;</span><br><span class=\"line\">  console.log(this.id);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; å†™æ³•äºŒ</span><br><span class=\"line\">btn.addEventListener(</span><br><span class=\"line\">  &#39;click&#39;,</span><br><span class=\"line\">  function (e) &#123;</span><br><span class=\"line\">    console.log(this.id);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  false</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åä¹Ÿæ˜¯è¾“å‡º<code>btn</code>ã€‚</p>\n<h2 id=\"äº‹ä»¶çš„ä¼ æ’­\"><a href=\"#äº‹ä»¶çš„ä¼ æ’­\" class=\"headerlink\" title=\"äº‹ä»¶çš„ä¼ æ’­\"></a>äº‹ä»¶çš„ä¼ æ’­</h2><p>ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä¼šåœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é—´ä¼ æ’­ï¼ˆpropagationï¼‰ã€‚è¿™ç§ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µã€‚</p>\n<ul>\n<li><strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼šä»<code>window</code>å¯¹è±¡ä¼ å¯¼åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆä¸Šå±‚ä¼ åˆ°åº•å±‚ï¼‰ï¼Œç§°ä¸ºâ€œæ•è·é˜¶æ®µâ€ï¼ˆcapture phaseï¼‰ã€‚</li>\n<li><strong>ç¬¬äºŒé˜¶æ®µ</strong>ï¼šåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œç§°ä¸ºâ€œç›®æ ‡é˜¶æ®µâ€ï¼ˆtarget phaseï¼‰ã€‚</li>\n<li><strong>ç¬¬ä¸‰é˜¶æ®µ</strong>ï¼šä»ç›®æ ‡èŠ‚ç‚¹ä¼ å¯¼å›<code>window</code>å¯¹è±¡ï¼ˆä»åº•å±‚ä¼ å›ä¸Šå±‚ï¼‰ï¼Œç§°ä¸ºâ€œå†’æ³¡é˜¶æ®µâ€ï¼ˆbubbling phaseï¼‰ã€‚</li>\n</ul>\n<p>è¿™ç§ä¸‰é˜¶æ®µçš„ä¼ æ’­æ¨¡å‹ï¼Œä½¿å¾—åŒä¸€ä¸ªäº‹ä»¶ä¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè§¦å‘ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">  &lt;p&gt;ç‚¹å‡»&lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;div&gt;</code>èŠ‚ç‚¹ä¹‹ä¸­æœ‰ä¸€ä¸ª<code>&lt;p&gt;</code>èŠ‚ç‚¹ã€‚</p>\n<p>å¦‚æœå¯¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéƒ½è®¾ç½®<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œç›‘å¬é˜¶æ®µï¼Œå„è®¾ç½®ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå…±è®¡è®¾ç½®å››ä¸ªç›‘å¬å‡½æ•°ã€‚ç„¶åï¼Œå¯¹<code>&lt;p&gt;</code>ç‚¹å‡»ï¼Œ<code>click</code>äº‹ä»¶ä¼šè§¦å‘å››æ¬¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var phases &#x3D; &#123;</span><br><span class=\"line\">  1: &#39;capture&#39;,</span><br><span class=\"line\">  2: &#39;target&#39;,</span><br><span class=\"line\">  3: &#39;bubble&#39;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var div &#x3D; document.querySelector(&#39;div&#39;);</span><br><span class=\"line\">var p &#x3D; document.querySelector(&#39;p&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">div.addEventListener(&#39;click&#39;, callback, true);</span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, callback, true);</span><br><span class=\"line\">div.addEventListener(&#39;click&#39;, callback, false);</span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, callback, false);</span><br><span class=\"line\"></span><br><span class=\"line\">function callback(event) &#123;</span><br><span class=\"line\">  var tag &#x3D; event.currentTarget.tagName;</span><br><span class=\"line\">  var phase &#x3D; phases[event.eventPhase];</span><br><span class=\"line\">  console.log(&quot;Tag: &#39;&quot; + tag + &quot;&#39;. EventPhase: &#39;&quot; + phase + &quot;&#39;&quot;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; ç‚¹å‡»ä»¥åçš„ç»“æœ</span><br><span class=\"line\">&#x2F;&#x2F; Tag: &#39;DIV&#39;. EventPhase: &#39;capture&#39;</span><br><span class=\"line\">&#x2F;&#x2F; Tag: &#39;P&#39;. EventPhase: &#39;target&#39;</span><br><span class=\"line\">&#x2F;&#x2F; Tag: &#39;P&#39;. EventPhase: &#39;target&#39;</span><br><span class=\"line\">&#x2F;&#x2F; Tag: &#39;DIV&#39;. EventPhase: &#39;bubble&#39;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>click</code>äº‹ä»¶è¢«è§¦å‘äº†å››æ¬¡ï¼š<code>&lt;div&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µå„1æ¬¡ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„ç›®æ ‡é˜¶æ®µè§¦å‘äº†2æ¬¡ã€‚</p>\n<ol>\n<li>æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>å‘<code>&lt;p&gt;</code>ä¼ æ’­æ—¶ï¼Œè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li>\n<li>ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>åˆ°è¾¾<code>&lt;p&gt;</code>æ—¶ï¼Œè§¦å‘<code>&lt;p&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li>\n<li>å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;p&gt;</code>ä¼ å›<code>&lt;div&gt;</code>æ—¶ï¼Œå†æ¬¡è§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚</li>\n</ol>\n<p>å…¶ä¸­ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼ˆ<code>addEventListener</code>æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´ç»‘å®šä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šå› ä¸º<code>click</code>äº‹ä»¶è§¦å‘ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œ<code>&lt;p&gt;</code>ä¼šåœ¨<code>target</code>é˜¶æ®µæœ‰ä¸¤æ¬¡è¾“å‡ºã€‚</p>\n<p>æ³¨æ„ï¼Œæµè§ˆå™¨æ€»æ˜¯å‡å®š<code>click</code>äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œå°±æ˜¯ç‚¹å‡»ä½ç½®åµŒå¥—æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ˆæœ¬ä¾‹æ˜¯<code>&lt;div&gt;</code>èŠ‚ç‚¹é‡Œé¢çš„<code>&lt;p&gt;</code>èŠ‚ç‚¹ï¼‰ã€‚æ‰€ä»¥ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œéƒ½ä¼šæ˜¾ç¤ºä¸º<code>target</code>é˜¶æ®µã€‚</p>\n<p>äº‹ä»¶ä¼ æ’­çš„æœ€ä¸Šå±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œæ¥ç€ä¾æ¬¡æ˜¯<code>document</code>ï¼Œ<code>html</code>ï¼ˆ<code>document.documentElement</code>ï¼‰å’Œ<code>body</code>ï¼ˆ<code>document.body</code>ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¾‹çš„äº‹ä»¶ä¼ æ’­é¡ºåºï¼Œåœ¨æ•è·é˜¶æ®µä¾æ¬¡ä¸º<code>window</code>ã€<code>document</code>ã€<code>html</code>ã€<code>body</code>ã€<code>div</code>ã€<code>p</code>ï¼Œåœ¨å†’æ³¡é˜¶æ®µä¾æ¬¡ä¸º<code>p</code>ã€<code>div</code>ã€<code>body</code>ã€<code>html</code>ã€<code>document</code>ã€<code>window</code>ã€‚</p>\n<h2 id=\"äº‹ä»¶çš„ä»£ç†\"><a href=\"#äº‹ä»¶çš„ä»£ç†\" class=\"headerlink\" title=\"äº‹ä»¶çš„ä»£ç†\"></a>äº‹ä»¶çš„ä»£ç†</h2><p>ç”±äºäº‹ä»¶ä¼šåœ¨å†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠå­èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç”±çˆ¶èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚è¿™ç§æ–¹æ³•å«åšäº‹ä»¶çš„ä»£ç†ï¼ˆdelegationï¼‰ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var ul &#x3D; document.querySelector(&#39;ul&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">ul.addEventListener(&#39;click&#39;, function (event) &#123;</span><br><span class=\"line\">  if (event.target.tagName.toLowerCase() &#x3D;&#x3D;&#x3D; &#39;li&#39;) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; some code</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨<code>&lt;ul&gt;</code>èŠ‚ç‚¹ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¤„ç†çš„æ˜¯å­èŠ‚ç‚¹<code>&lt;li&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œå°±èƒ½å¤„ç†å¤šä¸ªå­èŠ‚ç‚¹çš„äº‹ä»¶ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸ª<code>&lt;li&gt;</code>èŠ‚ç‚¹ä¸Šå®šä¹‰ç›‘å¬å‡½æ•°ã€‚è€Œä¸”ä»¥åå†æ·»åŠ å­èŠ‚ç‚¹ï¼Œç›‘å¬å‡½æ•°ä¾ç„¶æœ‰æ•ˆã€‚</p>\n<p>å¦‚æœå¸Œæœ›äº‹ä»¶åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºæ­¢ï¼Œä¸å†ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„<code>stopPropagation</code>æ–¹æ³•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; äº‹ä»¶ä¼ æ’­åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸‹ä¼ æ’­äº†</span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, function (event) &#123;</span><br><span class=\"line\">  event.stopPropagation();</span><br><span class=\"line\">&#125;, true);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; äº‹ä»¶å†’æ³¡åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸Šå†’æ³¡äº†</span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, function (event) &#123;</span><br><span class=\"line\">  event.stopPropagation();</span><br><span class=\"line\">&#125;, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopPropagation</code>æ–¹æ³•åˆ†åˆ«åœ¨æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œé˜»æ­¢äº†äº‹ä»¶çš„ä¼ æ’­ã€‚</p>\n<p>ä½†æ˜¯ï¼Œ<code>stopPropagation</code>æ–¹æ³•åªä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œä¸ä¼šé˜»æ­¢è¯¥äº‹ä»¶è§¦å‘<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„å…¶ä»–<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å½»åº•å–æ¶ˆ<code>click</code>äº‹ä»¶ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">p.addEventListener(&#39;click&#39;, function (event) &#123;</span><br><span class=\"line\">  event.stopPropagation();</span><br><span class=\"line\">  console.log(1);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, function(event) &#123;</span><br><span class=\"line\">  &#x2F;&#x2F; ä¼šè§¦å‘</span><br><span class=\"line\">  console.log(2);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>å…ƒç´ ç»‘å®šäº†ä¸¤ä¸ª<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚<code>stopPropagation</code>æ–¹æ³•åªèƒ½é˜»æ­¢è¿™ä¸ªäº‹ä»¶å‘å…¶ä»–å…ƒç´ ä¼ æ’­ã€‚å› æ­¤ï¼Œç¬¬äºŒä¸ªç›‘å¬å‡½æ•°ä¼šè§¦å‘ã€‚è¾“å‡ºç»“æœä¼šå…ˆæ˜¯1ï¼Œç„¶åæ˜¯2ã€‚</p>\n<p>å¦‚æœæƒ³è¦å½»åº•é˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­ï¼Œä¸å†è§¦å‘åé¢æ‰€æœ‰<code>click</code>çš„ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>stopImmediatePropagation</code>æ–¹æ³•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">p.addEventListener(&#39;click&#39;, function (event) &#123;</span><br><span class=\"line\">  event.stopImmediatePropagation();</span><br><span class=\"line\">  console.log(1);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.addEventListener(&#39;click&#39;, function(event) &#123;</span><br><span class=\"line\">  &#x2F;&#x2F; ä¸ä¼šè¢«è§¦å‘</span><br><span class=\"line\">  console.log(2);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopImmediatePropagation</code>æ–¹æ³•å¯ä»¥å½»åº•é˜»æ­¢è¿™ä¸ªäº‹ä»¶ä¼ æ’­ï¼Œä½¿å¾—åé¢ç»‘å®šçš„æ‰€æœ‰<code>click</code>ç›‘å¬å‡½æ•°éƒ½ä¸å†è§¦å‘ã€‚æ‰€ä»¥ï¼Œåªä¼šè¾“å‡º1ï¼Œä¸ä¼šè¾“å‡º2ã€‚</p>\n<h2 id=\"Event-å¯¹è±¡æ¦‚è¿°\"><a href=\"#Event-å¯¹è±¡æ¦‚è¿°\" class=\"headerlink\" title=\"Event å¯¹è±¡æ¦‚è¿°\"></a>Event å¯¹è±¡æ¦‚è¿°</h2><p>äº‹ä»¶å‘ç”Ÿä»¥åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ä¼ ç»™ç›‘å¬å‡½æ•°ã€‚æµè§ˆå™¨åŸç”Ÿæä¾›ä¸€ä¸ª<code>Event</code>å¯¹è±¡ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œæˆ–è€…è¯´ç»§æ‰¿äº†<code>Event.prototype</code>å¯¹è±¡ã€‚</p>\n<p><code>Event</code>å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">event &#x3D; new Event(type, options);</span><br></pre></td></tr></table></figure>\n\n<p><code>Event</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°<code>type</code>æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°<code>options</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡çš„é…ç½®ã€‚è¯¥å¯¹è±¡ä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªå±æ€§ã€‚</p>\n<ul>\n<li><code>bubbles</code>ï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡æ˜¯å¦å†’æ³¡ã€‚</li>\n<li><code>cancelable</code>ï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥è¢«å–æ¶ˆï¼Œå³èƒ½å¦ç”¨<code>Event.preventDefault()</code>å–æ¶ˆè¿™ä¸ªäº‹ä»¶ã€‚ä¸€æ—¦äº‹ä»¶è¢«å–æ¶ˆï¼Œå°±å¥½åƒä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ï¼Œä¸ä¼šè§¦å‘æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var ev &#x3D; new Event(</span><br><span class=\"line\">  &#39;look&#39;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    &#39;bubbles&#39;: true,</span><br><span class=\"line\">    &#39;cancelable&#39;: false</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\">document.dispatchEvent(ev);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç æ–°å»ºä¸€ä¸ª<code>look</code>äº‹ä»¶å®ä¾‹ï¼Œç„¶åä½¿ç”¨<code>dispatchEvent</code>æ–¹æ³•è§¦å‘è¯¥äº‹ä»¶ã€‚</p>\n<p>æ³¨æ„ï¼Œå¦‚æœä¸æ˜¯æ˜¾å¼æŒ‡å®š<code>bubbles</code>å±æ€§ä¸º<code>true</code>ï¼Œç”Ÿæˆçš„äº‹ä»¶å°±åªèƒ½åœ¨â€œæ•è·é˜¶æ®µâ€è§¦å‘ç›‘å¬å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç ä¸º</span><br><span class=\"line\">&#x2F;&#x2F; &lt;div&gt;&lt;p&gt;Hello&lt;&#x2F;p&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">var div &#x3D; document.querySelector(&#39;div&#39;);</span><br><span class=\"line\">var p &#x3D; document.querySelector(&#39;p&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">function callback(event) &#123;</span><br><span class=\"line\">  var tag &#x3D; event.currentTarget.tagName;</span><br><span class=\"line\">  console.log(&#39;Tag: &#39; + tag); &#x2F;&#x2F; æ²¡æœ‰ä»»ä½•è¾“å‡º</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">div.addEventListener(&#39;click&#39;, callback, false);</span><br><span class=\"line\"></span><br><span class=\"line\">var click &#x3D; new Event(&#39;click&#39;);</span><br><span class=\"line\">p.dispatchEvent(click);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>å…ƒç´ å‘å‡ºä¸€ä¸ª<code>click</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶é»˜è®¤ä¸ä¼šå†’æ³¡ã€‚<code>div.addEventListener</code>æ–¹æ³•æŒ‡å®šåœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œå› æ­¤ç›‘å¬å‡½æ•°ä¸ä¼šè§¦å‘ã€‚å¦‚æœå†™æˆ<code>div.addEventListener(&#39;click&#39;, callback, true)</code>ï¼Œé‚£ä¹ˆåœ¨â€œæ•è·é˜¶æ®µâ€å¯ä»¥ç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ã€‚</p>\n<p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶åœ¨<code>div</code>å…ƒç´ ä¸Šè§¦å‘ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div.dispatchEvent(click);</span><br></pre></td></tr></table></figure>\n\n<p>é‚£ä¹ˆï¼Œä¸ç®¡<code>div</code>å…ƒç´ æ˜¯åœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œè¿˜æ˜¯åœ¨æ•è·é˜¶æ®µç›‘å¬ï¼Œéƒ½ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚å› ä¸ºè¿™æ—¶<code>div</code>å…ƒç´ æ˜¯äº‹ä»¶çš„ç›®æ ‡ï¼Œä¸å­˜åœ¨æ˜¯å¦å†’æ³¡çš„é—®é¢˜ï¼Œ<code>div</code>å…ƒç´ æ€»æ˜¯ä¼šæ¥æ”¶åˆ°äº‹ä»¶ï¼Œå› æ­¤å¯¼è‡´ç›‘å¬å‡½æ•°ç”Ÿæ•ˆã€‚</p>\n<h2 id=\"Event-å¯¹è±¡çš„å®ä¾‹å±æ€§\"><a href=\"#Event-å¯¹è±¡çš„å®ä¾‹å±æ€§\" class=\"headerlink\" title=\"Event å¯¹è±¡çš„å®ä¾‹å±æ€§\"></a>Event å¯¹è±¡çš„å®ä¾‹å±æ€§</h2><h3 id=\"Event-bubblesï¼ŒEvent-eventPhase\"><a href=\"#Event-bubblesï¼ŒEvent-eventPhase\" class=\"headerlink\" title=\"Event.bubblesï¼ŒEvent.eventPhase\"></a>Event.bubblesï¼ŒEvent.eventPhase</h3><p><code>Event.bubbles</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰äº‹ä»¶æ˜¯å¦ä¼šå†’æ³¡ã€‚è¯¥å±æ€§ä¸ºåªè¯»å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹æ˜¯å¦å¯ä»¥å†’æ³¡ã€‚å‰é¢è¯´è¿‡ï¼Œé™¤éæ˜¾å¼å£°æ˜ï¼Œ<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å†’æ³¡çš„ã€‚</p>\n<p><code>Event.eventPhase</code>å±æ€§è¿”å›ä¸€ä¸ªæ•´æ•°å¸¸é‡ï¼Œè¡¨ç¤ºäº‹ä»¶ç›®å‰æ‰€å¤„çš„é˜¶æ®µã€‚è¯¥å±æ€§åªè¯»ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var phase &#x3D; event.eventPhase;</span><br></pre></td></tr></table></figure>\n\n<p><code>Event.eventPhase</code>çš„è¿”å›å€¼æœ‰å››ç§å¯èƒ½ã€‚</p>\n<ul>\n<li>0.äº‹ä»¶ç›®å‰æ²¡æœ‰å‘ç”Ÿã€‚</li>\n<li>1.äº‹ä»¶ç›®å‰å¤„äºæ•è·é˜¶æ®µï¼Œå³å¤„äºä»ç¥–å…ˆèŠ‚ç‚¹å‘ç›®æ ‡èŠ‚ç‚¹çš„ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚</li>\n<li>2.äº‹ä»¶åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹ï¼Œå³<code>Event.target</code>å±æ€§æŒ‡å‘çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚</li>\n<li>3.äº‹ä»¶å¤„äºå†’æ³¡é˜¶æ®µï¼Œå³å¤„äºä»ç›®æ ‡èŠ‚ç‚¹å‘ç¥–å…ˆèŠ‚ç‚¹çš„åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚</li>\n</ul>\n<h3 id=\"Event-cancelableï¼ŒEvent-cancelBubbleï¼Œevent-defaultPrevented\"><a href=\"#Event-cancelableï¼ŒEvent-cancelBubbleï¼Œevent-defaultPrevented\" class=\"headerlink\" title=\"Event.cancelableï¼ŒEvent.cancelBubbleï¼Œevent.defaultPrevented\"></a>Event.cancelableï¼ŒEvent.cancelBubbleï¼Œevent.defaultPrevented</h3><p><code>Event.cancelable</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚è¯¥å±æ€§ä¸ºåªè¯»å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹çš„ç‰¹æ€§ã€‚</p>\n<p>å¤§å¤šæ•°æµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶æ˜¯å¯ä»¥å–æ¶ˆçš„ã€‚æ¯”å¦‚ï¼Œå–æ¶ˆ<code>click</code>äº‹ä»¶ï¼Œç‚¹å‡»é“¾æ¥å°†æ— æ•ˆã€‚ä½†æ˜¯é™¤éæ˜¾å¼å£°æ˜ï¼Œ<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å¯ä»¥å–æ¶ˆçš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var evt &#x3D; new Event(&#39;foo&#39;);</span><br><span class=\"line\">evt.cancelable  &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>\n\n<p>å½“<code>Event.cancelable</code>å±æ€§ä¸º<code>true</code>æ—¶ï¼Œè°ƒç”¨<code>Event.preventDefault()</code>å°±å¯ä»¥å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œé˜»æ­¢æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</p>\n<p>å¦‚æœäº‹ä»¶ä¸èƒ½å–æ¶ˆï¼Œè°ƒç”¨<code>Event.preventDefault()</code>ä¼šæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæœ€å¥½ç”¨<code>Event.cancelable</code>å±æ€§åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function preventEvent(event) &#123;</span><br><span class=\"line\">  if (event.cancelable) &#123;</span><br><span class=\"line\">    event.preventDefault();</span><br><span class=\"line\">  &#125; else &#123;</span><br><span class=\"line\">    console.warn(&#39;This event couldn\\&#39;t be canceled.&#39;);</span><br><span class=\"line\">    console.dir(event);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>Event.cancelBubble</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœè®¾ä¸º<code>true</code>ï¼Œç›¸å½“äºæ‰§è¡Œ<code>Event.stopPropagation()</code>ï¼Œå¯ä»¥é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ã€‚</p>\n<p><code>Event.defaultPrevented</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦è°ƒç”¨è¿‡<code>Event.preventDefault</code>æ–¹æ³•ã€‚è¯¥å±æ€§åªè¯»ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (event.defaultPrevented) &#123;</span><br><span class=\"line\">  console.log(&#39;è¯¥äº‹ä»¶å·²ç»å–æ¶ˆäº†&#39;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Event-currentTargetï¼ŒEvent-target\"><a href=\"#Event-currentTargetï¼ŒEvent-target\" class=\"headerlink\" title=\"Event.currentTargetï¼ŒEvent.target\"></a>Event.currentTargetï¼ŒEvent.target</h3><p><code>Event.currentTarget</code>å±æ€§è¿”å›äº‹ä»¶å½“å‰æ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå³æ­£åœ¨æ‰§è¡Œçš„ç›‘å¬å‡½æ•°æ‰€ç»‘å®šçš„é‚£ä¸ªèŠ‚ç‚¹ã€‚</p>\n<p><code>Event.target</code>å±æ€§è¿”å›åŸå§‹è§¦å‘äº‹ä»¶çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå³äº‹ä»¶æœ€åˆå‘ç”Ÿçš„èŠ‚ç‚¹ã€‚äº‹ä»¶ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œä¸åŒèŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>Event.target</code>ä¸<code>Event.currentTarget</code>å±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…æ€»æ˜¯ä¸å˜çš„ï¼Œåè€…åˆ™æ˜¯æŒ‡å‘ç›‘å¬å‡½æ•°æ‰€åœ¨çš„é‚£ä¸ªèŠ‚ç‚¹å¯¹è±¡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTMLä»£ç ä¸º</span><br><span class=\"line\">&#x2F;&#x2F; &lt;p id&#x3D;&quot;para&quot;&gt;Hello &lt;em&gt;World&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;</span><br><span class=\"line\">function hide(e) &#123;</span><br><span class=\"line\">  console.log(this &#x3D;&#x3D;&#x3D; e.currentTarget);  &#x2F;&#x2F; æ€»æ˜¯ true</span><br><span class=\"line\">  console.log(this &#x3D;&#x3D;&#x3D; e.target);  &#x2F;&#x2F; æœ‰å¯èƒ½ä¸æ˜¯ true</span><br><span class=\"line\">  e.target.style.visibility &#x3D; &#39;hidden&#39;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">para.addEventListener(&#39;click&#39;, hide, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåœ¨<code>para</code>èŠ‚ç‚¹çš„<code>&lt;em&gt;</code>å­èŠ‚ç‚¹ä¸Šé¢ç‚¹å‡»ï¼Œåˆ™<code>e.target</code>æŒ‡å‘<code>&lt;em&gt;</code>å­èŠ‚ç‚¹ï¼Œå¯¼è‡´<code>&lt;em&gt;</code>å­èŠ‚ç‚¹ï¼ˆå³ World éƒ¨åˆ†ï¼‰ä¼šä¸å¯è§ã€‚å¦‚æœç‚¹å‡» Hello éƒ¨åˆ†ï¼Œåˆ™æ•´ä¸ª<code>para</code>éƒ½å°†ä¸å¯è§ã€‚</p>\n<h3 id=\"Event-type\"><a href=\"#Event-type\" class=\"headerlink\" title=\"Event.type\"></a>Event.type</h3><p><code>Event.type</code>å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ã€‚äº‹ä»¶çš„ç±»å‹æ˜¯åœ¨ç”Ÿæˆäº‹ä»¶çš„æ—¶å€™ã€‚è¯¥å±æ€§åªè¯»ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var evt &#x3D; new Event(&#39;foo&#39;);</span><br><span class=\"line\">evt.type &#x2F;&#x2F; &quot;foo&quot;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Event-timeStamp\"><a href=\"#Event-timeStamp\" class=\"headerlink\" title=\"Event.timeStamp\"></a>Event.timeStamp</h3><p><code>Event.timeStamp</code>å±æ€§è¿”å›ä¸€ä¸ªæ¯«ç§’æ—¶é—´æˆ³ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ã€‚å®ƒæ˜¯ç›¸å¯¹äºç½‘é¡µåŠ è½½æˆåŠŸå¼€å§‹è®¡ç®—çš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var evt &#x3D; new Event(&#39;foo&#39;);</span><br><span class=\"line\">evt.timeStamp &#x2F;&#x2F; 3683.6999999995896</span><br></pre></td></tr></table></figure>\n\n<p>å®ƒçš„è¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°æ•°ï¼ˆé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼‰ï¼Œå–å†³äºæµè§ˆå™¨çš„è®¾ç½®ã€‚</p>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦çš„ä¾‹å­ï¼Œæ˜¾ç¤ºæ¯ç§’ç§»åŠ¨çš„åƒç´ æ•°é‡ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var previousX;</span><br><span class=\"line\">var previousY;</span><br><span class=\"line\">var previousT;</span><br><span class=\"line\"></span><br><span class=\"line\">window.addEventListener(&#39;mousemove&#39;, function(event) &#123;</span><br><span class=\"line\">  if (</span><br><span class=\"line\">    previousX !&#x3D;&#x3D; undefined &amp;&amp;</span><br><span class=\"line\">    previousY !&#x3D;&#x3D; undefined &amp;&amp;</span><br><span class=\"line\">    previousT !&#x3D;&#x3D; undefined</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    var deltaX &#x3D; event.screenX - previousX;</span><br><span class=\"line\">    var deltaY &#x3D; event.screenY - previousY;</span><br><span class=\"line\">    var deltaD &#x3D; Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));</span><br><span class=\"line\"></span><br><span class=\"line\">    var deltaT &#x3D; event.timeStamp - previousT;</span><br><span class=\"line\">    console.log(deltaD &#x2F; deltaT * 1000);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  previousX &#x3D; event.screenX;</span><br><span class=\"line\">  previousY &#x3D; event.screenY;</span><br><span class=\"line\">  previousT &#x3D; event.timeStamp;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Event-isTrusted\"><a href=\"#Event-isTrusted\" class=\"headerlink\" title=\"Event.isTrusted\"></a>Event.isTrusted</h3><p><code>Event.isTrusted</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦ç”±çœŸå®çš„ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥ä¼šäº§ç”Ÿä¸€ä¸ª<code>click</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶æ˜¯ç”¨æˆ·äº§ç”Ÿçš„ï¼›<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œåˆ™æ˜¯è„šæœ¬äº§ç”Ÿçš„ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var evt &#x3D; new Event(&#39;foo&#39;);</span><br><span class=\"line\">evt.isTrusted &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>evt</code>å¯¹è±¡æ˜¯è„šæœ¬äº§ç”Ÿçš„ï¼Œæ‰€ä»¥<code>isTrusted</code>å±æ€§è¿”å›<code>false</code>ã€‚</p>\n<h3 id=\"Event-detail\"><a href=\"#Event-detail\" class=\"headerlink\" title=\"Event.detail\"></a>Event.detail</h3><p><code>Event.detail</code>å±æ€§åªæœ‰æµè§ˆå™¨çš„ UI ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰äº‹ä»¶æ‰å…·æœ‰ã€‚è¯¥å±æ€§è¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶çš„æŸç§ä¿¡æ¯ã€‚å…·ä½“å«ä¹‰ä¸äº‹ä»¶ç±»å‹ç›¸å…³ã€‚æ¯”å¦‚ï¼Œå¯¹äº<code>click</code>å’Œ<code>dbclick</code>äº‹ä»¶ï¼Œ<code>Event.detail</code>æ˜¯é¼ æ ‡æŒ‰ä¸‹çš„æ¬¡æ•°ï¼ˆ<code>1</code>è¡¨ç¤ºå•å‡»ï¼Œ<code>2</code>è¡¨ç¤ºåŒå‡»ï¼Œ<code>3</code>è¡¨ç¤ºä¸‰å‡»ï¼‰ï¼›å¯¹äºé¼ æ ‡æ»šè½®äº‹ä»¶ï¼Œ<code>Event.detail</code>æ˜¯æ»šè½®æ­£å‘æ»šåŠ¨çš„è·ç¦»ï¼Œè´Ÿå€¼å°±æ˜¯è´Ÿå‘æ»šåŠ¨çš„è·ç¦»ï¼Œè¿”å›å€¼æ€»æ˜¯3çš„å€æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç å¦‚ä¸‹</span><br><span class=\"line\">&#x2F;&#x2F; &lt;p&gt;Hello&lt;&#x2F;p&gt;</span><br><span class=\"line\">function giveDetails(e) &#123;</span><br><span class=\"line\">  console.log(e.detail);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">document.querySelector(&#39;p&#39;).onclick &#x3D; giveDetails;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Event-å¯¹è±¡çš„å®ä¾‹æ–¹æ³•\"><a href=\"#Event-å¯¹è±¡çš„å®ä¾‹æ–¹æ³•\" class=\"headerlink\" title=\"Event å¯¹è±¡çš„å®ä¾‹æ–¹æ³•\"></a>Event å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</h2><h3 id=\"Event-preventDefault\"><a href=\"#Event-preventDefault\" class=\"headerlink\" title=\"Event.preventDefault()\"></a>Event.preventDefault()</h3><p><code>Event.preventDefault</code>æ–¹æ³•å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚æ¯”å¦‚ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨é»˜è®¤ä¼šè·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œå°±ä¸ä¼šè·³è½¬äº†ï¼›å†æ¯”å¦‚ï¼ŒæŒ‰ä¸€ä¸‹ç©ºæ ¼é”®ï¼Œé¡µé¢å‘ä¸‹æ»šåŠ¨ä¸€æ®µè·ç¦»ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åä¹Ÿä¸ä¼šæ»šåŠ¨äº†ã€‚è¯¥æ–¹æ³•ç”Ÿæ•ˆçš„å‰ææ˜¯ï¼Œäº‹ä»¶å¯¹è±¡çš„<code>cancelable</code>å±æ€§ä¸º<code>true</code>ï¼Œå¦‚æœä¸º<code>false</code>ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</p>\n<p>æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªæ˜¯å–æ¶ˆäº‹ä»¶å¯¹å½“å‰å…ƒç´ çš„é»˜è®¤å½±å“ï¼Œä¸ä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ã€‚å¦‚æœè¦é˜»æ­¢ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨<code>stopPropagation()</code>æˆ–<code>stopImmediatePropagation()</code>æ–¹æ³•ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç ä¸º</span><br><span class=\"line\">&#x2F;&#x2F; &lt;input type&#x3D;&quot;checkbox&quot; id&#x3D;&quot;my-checkbox&quot; &#x2F;&gt;</span><br><span class=\"line\">var cb &#x3D; document.getElementById(&#39;my-checkbox&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">cb.addEventListener(</span><br><span class=\"line\">  &#39;click&#39;,</span><br><span class=\"line\">  function (e)&#123; e.preventDefault(); &#125;,</span><br><span class=\"line\">  false</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºæ˜¯å•å‡»ä¼šé€‰ä¸­å•é€‰æ¡†ï¼Œå–æ¶ˆè¿™ä¸ªè¡Œä¸ºï¼Œå°±å¯¼è‡´æ— æ³•é€‰ä¸­å•é€‰æ¡†ã€‚</p>\n<p>åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¸ºæ–‡æœ¬è¾“å…¥æ¡†è®¾ç½®æ ¡éªŒæ¡ä»¶ã€‚å¦‚æœç”¨æˆ·çš„è¾“å…¥ä¸ç¬¦åˆæ¡ä»¶ï¼Œå°±æ— æ³•å°†å­—ç¬¦è¾“å…¥æ–‡æœ¬æ¡†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç ä¸º</span><br><span class=\"line\">&#x2F;&#x2F; &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;my-input&quot; &#x2F;&gt;</span><br><span class=\"line\">var input &#x3D; document.getElementById(&#39;my-input&#39;);</span><br><span class=\"line\">input.addEventListener(&#39;keypress&#39;, checkName, false);</span><br><span class=\"line\"></span><br><span class=\"line\">function checkName(e) &#123;</span><br><span class=\"line\">  if (e.charCode &lt; 97 || e.charCode &gt; 122) &#123;</span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸ºæ–‡æœ¬æ¡†çš„<code>keypress</code>äº‹ä»¶è®¾å®šç›‘å¬å‡½æ•°åï¼Œå°†åªèƒ½è¾“å…¥å°å†™å­—æ¯ï¼Œå¦åˆ™è¾“å…¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå†™å…¥æ–‡æœ¬æ¡†ï¼‰å°†è¢«å–æ¶ˆï¼Œå¯¼è‡´ä¸èƒ½å‘æ–‡æœ¬æ¡†è¾“å…¥å†…å®¹ã€‚</p>\n<h3 id=\"Event-stopPropagation\"><a href=\"#Event-stopPropagation\" class=\"headerlink\" title=\"Event.stopPropagation()\"></a>Event.stopPropagation()</h3><p><code>stopPropagation</code>æ–¹æ³•é˜»æ­¢äº‹ä»¶åœ¨ DOM ä¸­ç»§ç»­ä¼ æ’­ï¼Œé˜²æ­¢å†è§¦å‘å®šä¹‰åœ¨åˆ«çš„èŠ‚ç‚¹ä¸Šçš„ç›‘å¬å‡½æ•°ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬åœ¨å½“å‰èŠ‚ç‚¹ä¸Šå…¶ä»–çš„äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function stopEvent(e) &#123;</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">el.addEventListener(&#39;click&#39;, stopEvent, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶å°†ä¸ä¼šè¿›ä¸€æ­¥å†’æ³¡åˆ°<code>el</code>èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</p>\n<h3 id=\"Event-stopImmediatePropagation\"><a href=\"#Event-stopImmediatePropagation\" class=\"headerlink\" title=\"Event.stopImmediatePropagation()\"></a>Event.stopImmediatePropagation()</h3><p><code>Event.stopImmediatePropagation</code>æ–¹æ³•é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨ï¼Œä¸ç®¡ç›‘å¬å‡½æ•°å®šä¹‰åœ¨å½“å‰èŠ‚ç‚¹è¿˜æ˜¯å…¶ä»–èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œæ¯”<code>Event.stopPropagation()</code>æ›´å½»åº•ã€‚</p>\n<p>å¦‚æœåŒä¸€ä¸ªèŠ‚ç‚¹å¯¹äºåŒä¸€ä¸ªäº‹ä»¶æŒ‡å®šäº†å¤šä¸ªç›‘å¬å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šæ ¹æ®æ·»åŠ çš„é¡ºåºä¾æ¬¡è°ƒç”¨ã€‚åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†<code>Event.stopImmediatePropagation</code>æ–¹æ³•ï¼Œå…¶ä»–çš„ç›‘å¬å‡½æ•°å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function l1(e)&#123;</span><br><span class=\"line\">  e.stopImmediatePropagation();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function l2(e)&#123;</span><br><span class=\"line\">  console.log(&#39;hello world&#39;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">el.addEventListener(&#39;click&#39;, l1, false);</span><br><span class=\"line\">el.addEventListener(&#39;click&#39;, l2, false);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç åœ¨<code>el</code>èŠ‚ç‚¹ä¸Šï¼Œä¸º<code>click</code>äº‹ä»¶æ·»åŠ äº†ä¸¤ä¸ªç›‘å¬å‡½æ•°<code>l1</code>å’Œ<code>l2</code>ã€‚ç”±äº<code>l1</code>è°ƒç”¨äº†<code>event.stopImmediatePropagation</code>æ–¹æ³•ï¼Œæ‰€ä»¥<code>l2</code>ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>\n<h3 id=\"Event-composedPath\"><a href=\"#Event-composedPath\" class=\"headerlink\" title=\"Event.composedPath()\"></a>Event.composedPath()</h3><p><code>Event.composedPath()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹å’Œä¾æ¬¡å†’æ³¡ç»è¿‡çš„æ‰€æœ‰ä¸Šå±‚èŠ‚ç‚¹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; HTML ä»£ç å¦‚ä¸‹</span><br><span class=\"line\">&#x2F;&#x2F; &lt;div&gt;</span><br><span class=\"line\">&#x2F;&#x2F;   &lt;p&gt;Hello&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#x2F;&#x2F; &lt;&#x2F;div&gt;</span><br><span class=\"line\">var div &#x3D; document.querySelector(&#39;div&#39;);</span><br><span class=\"line\">var p &#x3D; document.querySelector(&#39;p&#39;);</span><br><span class=\"line\"></span><br><span class=\"line\">div.addEventListener(&#39;click&#39;, function (e) &#123;</span><br><span class=\"line\">  console.log(e.composedPath());</span><br><span class=\"line\">&#125;, false);</span><br><span class=\"line\">&#x2F;&#x2F; [p, div, body, html, document, Window]</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹æ˜¯<code>p</code>ï¼Œå‘ä¸Šä¾æ¬¡æ˜¯<code>div</code>ã€<code>body</code>ã€<code>html</code>ã€<code>document</code>ã€<code>Window</code>ã€‚</p>\n<h2 id=\"CustomEvent-æ¥å£\"><a href=\"#CustomEvent-æ¥å£\" class=\"headerlink\" title=\"CustomEvent æ¥å£\"></a>CustomEvent æ¥å£</h2><p>CustomEvent æ¥å£ç”¨äºç”Ÿæˆè‡ªå®šä¹‰çš„äº‹ä»¶å®ä¾‹ã€‚é‚£äº›æµè§ˆå™¨é¢„å®šä¹‰çš„äº‹ä»¶ï¼Œè™½ç„¶å¯ä»¥æ‰‹åŠ¨ç”Ÿæˆï¼Œä½†æ˜¯å¾€å¾€ä¸èƒ½åœ¨äº‹ä»¶ä¸Šç»‘å®šæ•°æ®ã€‚å¦‚æœéœ€è¦åœ¨è§¦å‘äº‹ä»¶çš„åŒæ—¶ï¼Œä¼ å…¥æŒ‡å®šçš„æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ CustomEvent æ¥å£ç”Ÿæˆçš„è‡ªå®šä¹‰äº‹ä»¶å¯¹è±¡ã€‚</p>\n<p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>CustomEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ CustomEvent äº‹ä»¶å®ä¾‹ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new CustomEvent(type, options)</span><br></pre></td></tr></table></figure>\n\n<p><code>CustomEvent()</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åå­—ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„é…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚<code>CustomEvent</code>çš„é…ç½®å¯¹è±¡é™¤äº†æ¥å— Event äº‹ä»¶çš„é…ç½®å±æ€§ï¼Œåªæœ‰ä¸€ä¸ªè‡ªå·±çš„å±æ€§ã€‚</p>\n<ul>\n<li><code>detail</code>ï¼šè¡¨ç¤ºäº‹ä»¶çš„é™„å¸¦æ•°æ®ï¼Œé»˜è®¤ä¸º<code>null</code>ã€‚</li>\n</ul>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var event &#x3D; new CustomEvent(&#39;build&#39;, &#123; &#39;detail&#39;: &#39;hello&#39; &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">function eventHandler(e) &#123;</span><br><span class=\"line\">  console.log(e.detail);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">document.body.addEventListener(&#39;build&#39;, function (e) &#123;</span><br><span class=\"line\">  console.log(e.detail);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">document.body.dispatchEvent(event);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰äº†<code>build</code>äº‹ä»¶ã€‚è¯¥äº‹ä»¶è§¦å‘åï¼Œä¼šè¢«ç›‘å¬åˆ°ï¼Œä»è€Œè¾“å‡ºè¯¥äº‹ä»¶å®ä¾‹çš„<code>detail</code>å±æ€§ï¼ˆå³å­—ç¬¦ä¸²<code>hello</code>ï¼‰ã€‚</p>\n<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">var myEvent &#x3D; new CustomEvent(&#39;myevent&#39;, &#123;</span><br><span class=\"line\">  detail: &#123;</span><br><span class=\"line\">    foo: &#39;bar&#39;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  bubbles: true,</span><br><span class=\"line\">  cancelable: false</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">el.addEventListener(&#39;myevent&#39;, function (event) &#123;</span><br><span class=\"line\">  console.log(&#39;Hello &#39; + event.detail.foo);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">el.dispatchEvent(myEvent);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç ä¹Ÿè¯´æ˜ï¼ŒCustomEvent çš„äº‹ä»¶å®ä¾‹ï¼Œé™¤äº†å…·æœ‰ Event æ¥å£çš„å®ä¾‹å±æ€§ï¼Œè¿˜å…·æœ‰<code>detail</code>å±æ€§ã€‚</p>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><ul>\n<li>Wilson Page, <a href=\"http://coding.smashingmagazine.com/2013/11/12/an-introduction-to-dom-events/\">An Introduction To DOM Events</a></li>\n<li>Mozilla Developer Network, <a href=\"https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching\">Using Firefox 1.5 caching</a></li>\n<li>Craig Buckler, <a href=\"http://www.sitepoint.com/css3-animation-javascript-event-handlers/\">How to Capture CSS3 Animation Events in JavaScript</a></li>\n<li>Ray Nicholus, <a href=\"http://blog.garstasio.com/you-dont-need-jquery/events/\">You Donâ€™t Need jQuery!: Events</a></li>\n</ul>\n<h1 id=\"6-å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶\"><a href=\"#6-å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶\" class=\"headerlink\" title=\"6.å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶\"></a>6.å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</h1><h2 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h2><p>æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„HTTPç¼“å­˜æœºåˆ¶ï¼Œå…¶æœºåˆ¶æ˜¯æ ¹æ®HTTPæŠ¥æ–‡çš„ç¼“å­˜æ ‡è¯†è¿›è¡Œçš„ï¼Œæ‰€ä»¥åœ¨åˆ†ææµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨å›¾æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹HTTPæŠ¥æ–‡ï¼ŒHTTPæŠ¥æ–‡åˆ†ä¸ºä¸¤ç§ï¼š</p>\n<p>HTTPè¯·æ±‚(Request)æŠ¥æ–‡ï¼ŒæŠ¥æ–‡æ ¼å¼ä¸ºï¼šè¯·æ±‚è¡Œ â€“ HTTPå¤´(é€šç”¨ä¿¡æ¯å¤´ï¼Œè¯·æ±‚å¤´ï¼Œå®ä½“å¤´) â€“ è¯·æ±‚æŠ¥æ–‡ä¸»ä½“(åªæœ‰POSTæ‰æœ‰æŠ¥æ–‡ä¸»ä½“)ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db6358082ff05?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db6358033cdc4?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>HTTPå“åº”(Response)æŠ¥æ–‡ï¼ŒæŠ¥æ–‡æ ¼å¼ä¸ºï¼šçŠ¶æ€è¡Œ â€“ HTTPå¤´(é€šç”¨ä¿¡æ¯å¤´ï¼Œå“åº”å¤´ï¼Œå®ä½“å¤´) â€“ å“åº”æŠ¥æ–‡ä¸»ä½“ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635806ca887?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db6358079780e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>æ³¨ï¼šé€šç”¨ä¿¡æ¯å¤´æŒ‡çš„æ˜¯è¯·æ±‚å’Œå“åº”æŠ¥æ–‡éƒ½æ”¯æŒçš„å¤´åŸŸï¼Œåˆ†åˆ«ä¸ºCache-Controlã€Connectionã€Dateã€Pragmaã€Transfer-Encodingã€Upgradeã€Viaï¼›å®ä½“å¤´åˆ™æ˜¯å®ä½“ä¿¡æ¯çš„å®ä½“å¤´åŸŸï¼Œåˆ†åˆ«ä¸ºAllowã€Content-Baseã€Content-Encodingã€Content-Languageã€Content-Lengthã€Content-Locationã€Content-MD5ã€Content-Rangeã€Content-Typeã€Etagã€Expiresã€Last-Modifiedã€extension-headerã€‚è¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå°†é€šç”¨ä¿¡æ¯å¤´ï¼Œå“åº”å¤´/è¯·æ±‚å¤´ï¼Œå®ä½“å¤´éƒ½å½’ä¸ºäº†HTTPå¤´ã€‚</p>\n<p>ä»¥ä¸Šçš„æ¦‚å¿µåœ¨è¿™é‡Œæˆ‘ä»¬ä¸åšå¤šè®²è§£ï¼Œåªç®€å•ä»‹ç»ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚</p>\n<h2 id=\"ç¼“å­˜è¿‡ç¨‹åˆ†æ\"><a href=\"#ç¼“å­˜è¿‡ç¨‹åˆ†æ\" class=\"headerlink\" title=\"ç¼“å­˜è¿‡ç¨‹åˆ†æ\"></a>ç¼“å­˜è¿‡ç¨‹åˆ†æ</h2><p>æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šä¿¡çš„æ–¹å¼ä¸ºåº”ç­”æ¨¡å¼ï¼Œå³æ˜¯ï¼šæµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚ â€“ æœåŠ¡å™¨å“åº”è¯¥è¯·æ±‚ã€‚é‚£ä¹ˆæµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯¥è¯·æ±‚åæ‹¿åˆ°è¯·æ±‚ç»“æœï¼Œä¼šæ ¹æ®å“åº”æŠ¥æ–‡ä¸­HTTPå¤´çš„ç¼“å­˜æ ‡è¯†ï¼Œå†³å®šæ˜¯å¦ç¼“å­˜ç»“æœï¼Œæ˜¯åˆ™å°†è¯·æ±‚ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ï¼Œç®€å•çš„è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db6359673e7d0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p>\n<ul>\n<li>æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æœä»¥åŠç¼“å­˜æ ‡è¯†</li>\n<li>æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›çš„è¯·æ±‚ç»“æœéƒ½ä¼šå°†è¯¥ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­</li>\n</ul>\n<p>ä»¥ä¸Šä¸¤ç‚¹ç»“è®ºå°±æ˜¯æµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„å…³é”®ï¼Œä»–ç¡®ä¿äº†æ¯ä¸ªè¯·æ±‚çš„ç¼“å­˜å­˜å…¥ä¸è¯»å–ï¼Œåªè¦æˆ‘ä»¬å†ç†è§£æµè§ˆå™¨ç¼“å­˜çš„ä½¿ç”¨è§„åˆ™ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ï¼Œæœ¬æ–‡ä¹Ÿå°†å›´ç»•ç€è¿™ç‚¹è¿›è¡Œè¯¦ç»†åˆ†æã€‚ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œè¿™é‡Œæˆ‘ä»¬æ ¹æ®æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨é‡æ–°å‘èµ·HTTPè¯·æ±‚å°†ç¼“å­˜è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚</p>\n<h2 id=\"å¼ºåˆ¶ç¼“å­˜\"><a href=\"#å¼ºåˆ¶ç¼“å­˜\" class=\"headerlink\" title=\"å¼ºåˆ¶ç¼“å­˜\"></a>å¼ºåˆ¶ç¼“å­˜</h2><p>å¼ºåˆ¶ç¼“å­˜å°±æ˜¯å‘æµè§ˆå™¨ç¼“å­˜æŸ¥æ‰¾è¯¥è¯·æ±‚ç»“æœï¼Œå¹¶æ ¹æ®è¯¥ç»“æœçš„ç¼“å­˜è§„åˆ™æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¯¥ç¼“å­˜ç»“æœçš„è¿‡ç¨‹ï¼Œå¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§(æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š</p>\n<p>ä¸å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ç›´æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆè·Ÿç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚ä¸€è‡´ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db63596c9de23?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä½†è¯¥ç»“æœå·²å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ä½¿ç”¨åå•†ç¼“å­˜(æš‚ä¸åˆ†æ)ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db63597182316?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä¸”è¯¥ç»“æœå°šæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›è¯¥ç»“æœï¼Œå¦‚ä¸‹å›¾</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db6359acd19d3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<blockquote>\n<p>é‚£ä¹ˆå¼ºåˆ¶ç¼“å­˜çš„ç¼“å­˜è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n</blockquote>\n<p>å½“æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ç¼“å­˜è§„åˆ™æ”¾å…¥HTTPå“åº”æŠ¥æ–‡çš„HTTPå¤´ä¸­å’Œè¯·æ±‚ç»“æœä¸€èµ·è¿”å›ç»™æµè§ˆå™¨ï¼Œæ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯Expireså’ŒCache-Controlï¼Œå…¶ä¸­Cache-Controlä¼˜å…ˆçº§æ¯”Expiresé«˜ã€‚</p>\n<h3 id=\"Expires\"><a href=\"#Expires\" class=\"headerlink\" title=\"Expires\"></a>Expires</h3><p>Expiresæ˜¯HTTP/1.0æ§åˆ¶ç½‘é¡µç¼“å­˜çš„å­—æ®µï¼Œå…¶å€¼ä¸ºæœåŠ¡å™¨è¿”å›è¯¥è¯·æ±‚ç»“æœç¼“å­˜çš„åˆ°æœŸæ—¶é—´ï¼Œå³å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œå¦‚æœå®¢æˆ·ç«¯çš„æ—¶é—´å°äºExpiresçš„å€¼æ—¶ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ç»“æœã€‚</p>\n<blockquote>\n<p>Expiresæ˜¯HTTP/1.0çš„å­—æ®µï¼Œä½†æ˜¯ç°åœ¨æµè§ˆå™¨é»˜è®¤ä½¿ç”¨çš„æ˜¯HTTP/1.1ï¼Œé‚£ä¹ˆåœ¨HTTP/1.1ä¸­ç½‘é¡µç¼“å­˜è¿˜æ˜¯å¦ç”±Expiresæ§åˆ¶ï¼Ÿ</p>\n</blockquote>\n<p>åˆ°äº†HTTP/1.1ï¼ŒExpireå·²ç»è¢«Cache-Controlæ›¿ä»£ï¼ŒåŸå› åœ¨äºExpiresæ§åˆ¶ç¼“å­˜çš„åŸç†æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯çš„æ—¶é—´ä¸æœåŠ¡ç«¯è¿”å›çš„æ—¶é—´åšå¯¹æ¯”ï¼Œé‚£ä¹ˆå¦‚æœå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„æ—¶é—´å› ä¸ºæŸäº›åŸå› ï¼ˆä¾‹å¦‚æ—¶åŒºä¸åŒï¼›å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æœ‰ä¸€æ–¹çš„æ—¶é—´ä¸å‡†ç¡®ï¼‰å‘ç”Ÿè¯¯å·®ï¼Œé‚£ä¹ˆå¼ºåˆ¶ç¼“å­˜åˆ™ä¼šç›´æ¥å¤±æ•ˆï¼Œè¿™æ ·çš„è¯å¼ºåˆ¶ç¼“å­˜çš„å­˜åœ¨åˆ™æ¯«æ— æ„ä¹‰ï¼Œé‚£ä¹ˆCache-Controlåˆæ˜¯å¦‚ä½•æ§åˆ¶çš„å‘¢ï¼Ÿ</p>\n<h3 id=\"Cache-Control\"><a href=\"#Cache-Control\" class=\"headerlink\" title=\"Cache-Control\"></a>Cache-Control</h3><p>åœ¨HTTP/1.1ä¸­ï¼ŒCache-Controlæ˜¯æœ€é‡è¦çš„è§„åˆ™ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ç½‘é¡µç¼“å­˜ï¼Œä¸»è¦å–å€¼ä¸ºï¼š</p>\n<ul>\n<li>publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰</li>\n<li>privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Controlçš„é»˜è®¤å–å€¼</li>\n<li>no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š</li>\n<li>no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜</li>\n<li>max-age=xxx (xxx is numeric)ï¼šç¼“å­˜å†…å®¹å°†åœ¨xxxç§’åå¤±æ•ˆ</li>\n</ul>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635aa7b772b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>ç”±ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p>\n<ul>\n<li>HTTPå“åº”æŠ¥æ–‡ä¸­expiresçš„æ—¶é—´å€¼ï¼Œæ˜¯ä¸€ä¸ªç»å¯¹å€¼</li>\n<li>HTTPå“åº”æŠ¥æ–‡ä¸­Cache-Controlä¸ºmax-age=600ï¼Œæ˜¯ç›¸å¯¹å€¼</li>\n</ul>\n<p>ç”±äºCache-Controlçš„ä¼˜å…ˆçº§æ¯”expiresï¼Œé‚£ä¹ˆç›´æ¥æ ¹æ®Cache-Controlçš„å€¼è¿›è¡Œç¼“å­˜ï¼Œæ„æ€å°±æ˜¯è¯´åœ¨600ç§’å†…å†æ¬¡å‘èµ·è¯¥è¯·æ±‚ï¼Œåˆ™ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ç»“æœï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆã€‚</p>\n<p>æ³¨ï¼šåœ¨æ— æ³•ç¡®å®šå®¢æˆ·ç«¯çš„æ—¶é—´æ˜¯å¦ä¸æœåŠ¡ç«¯çš„æ—¶é—´åŒæ­¥çš„æƒ…å†µä¸‹ï¼ŒCache-Controlç›¸æ¯”äºexpiresæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œæ‰€ä»¥åŒæ—¶å­˜åœ¨æ—¶ï¼Œåªæœ‰Cache-Controlç”Ÿæ•ˆã€‚</p>\n<p>äº†è§£å¼ºåˆ¶ç¼“å­˜çš„è¿‡ç¨‹åï¼Œæˆ‘ä»¬æ‹“å±•æ€§çš„æ€è€ƒä¸€ä¸‹ï¼š</p>\n<blockquote>\n<p>æµè§ˆå™¨çš„ç¼“å­˜å­˜æ”¾åœ¨å“ªé‡Œï¼Œå¦‚ä½•åœ¨æµè§ˆå™¨ä¸­åˆ¤æ–­å¼ºåˆ¶ç¼“å­˜æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</p>\n</blockquote>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635afa6f7f7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>è¿™é‡Œæˆ‘ä»¬ä»¥åšå®¢çš„è¯·æ±‚ä¸ºä¾‹ï¼ŒçŠ¶æ€ç ä¸ºç°è‰²çš„è¯·æ±‚åˆ™ä»£è¡¨ä½¿ç”¨äº†å¼ºåˆ¶ç¼“å­˜ï¼Œè¯·æ±‚å¯¹åº”çš„Sizeå€¼åˆ™ä»£è¡¨è¯¥ç¼“å­˜å­˜æ”¾çš„ä½ç½®ï¼Œåˆ†åˆ«ä¸ºfrom memory cache å’Œ from disk cacheã€‚</p>\n<blockquote>\n<p>é‚£ä¹ˆfrom memory cache å’Œ from disk cacheåˆåˆ†åˆ«ä»£è¡¨çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨from disk cacheï¼Œä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨from memory cacheå‘¢ï¼Ÿ</p>\n</blockquote>\n<p>from memory cacheä»£è¡¨ä½¿ç”¨å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œfrom disk cacheåˆ™ä»£è¡¨ä½¿ç”¨çš„æ˜¯ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œæµè§ˆå™¨è¯»å–ç¼“å­˜çš„é¡ºåºä¸ºmemory â€“&gt; diskã€‚</p>\n<p>è™½ç„¶æˆ‘å·²ç»ç›´æ¥æŠŠç»“è®ºè¯´å‡ºæ¥äº†ï¼Œä½†æ˜¯ç›¸ä¿¡æœ‰ä¸å°‘äººå¯¹æ­¤ä¸èƒ½ç†è§£ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·è¯¦ç»†åˆ†æä¸€ä¸‹ç¼“å­˜è¯»å–é—®é¢˜ï¼Œè¿™é‡Œä»è®©ä»¥æˆ‘çš„åšå®¢ä¸ºä¾‹è¿›è¡Œåˆ†æï¼š</p>\n<p>è®¿é—®<a href=\"https://heyingye.github.io/\">heyingye.github.io/ </a> â€“&gt;200 â€“&gt; å…³é—­åšå®¢çš„æ ‡ç­¾é¡µ â€“&gt; é‡æ–°æ‰“å¼€<a href=\"https://heyingye.github.io>/\">heyingye.github.io&gt;</a> â€“&gt;200(from disk cache) â€“&gt; åˆ·æ–° â€“&gt; 200(from memory cache)</p>\n<p>è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li><p>è®¿é—®<a href=\"https://heyingye.github.io/\">heyingye.github.io/</a></p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635b40660cd?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n</li>\n<li><p>å…³é—­åšå®¢çš„æ ‡ç­¾é¡µ</p>\n</li>\n<li><p>é‡æ–°æ‰“å¼€<a href=\"https://heyingye.github.io/\">heyingye.github.io/</a></p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635b4f0233b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n</li>\n<li><p>åˆ·æ–°</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635bd572192?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>from disk memory</p>\n</li>\n</ul>\n<blockquote>\n<p>çœ‹åˆ°è¿™é‡Œå¯èƒ½æœ‰äººå°ä¼™ä¼´é—®äº†ï¼Œæœ€åä¸€ä¸ªæ­¥éª¤åˆ·æ–°çš„æ—¶å€™ï¼Œä¸æ˜¯åŒæ—¶å­˜åœ¨ç€from disk cacheå’Œfrom memory cacheå—ï¼Ÿ</p>\n</blockquote>\n<p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å†…å­˜ç¼“å­˜(from memory cache)å’Œç¡¬ç›˜ç¼“å­˜(from disk cache)ï¼Œå¦‚ä¸‹:</p>\n<ul>\n<li>å†…å­˜ç¼“å­˜(from memory cache)ï¼šå†…å­˜ç¼“å­˜å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œåˆ†åˆ«æ˜¯å¿«é€Ÿè¯»å–å’Œæ—¶æ•ˆæ€§ï¼š</li>\n<li>å¿«é€Ÿè¯»å–ï¼šå†…å­˜ç¼“å­˜ä¼šå°†ç¼–è¯‘è§£æåçš„æ–‡ä»¶ï¼Œç›´æ¥å­˜å…¥è¯¥è¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œå æ®è¯¥è¿›ç¨‹ä¸€å®šçš„å†…å­˜èµ„æºï¼Œä»¥æ–¹ä¾¿ä¸‹æ¬¡è¿è¡Œä½¿ç”¨æ—¶çš„å¿«é€Ÿè¯»å–ã€‚</li>\n<li>æ—¶æ•ˆæ€§ï¼šä¸€æ—¦è¯¥è¿›ç¨‹å…³é—­ï¼Œåˆ™è¯¥è¿›ç¨‹çš„å†…å­˜åˆ™ä¼šæ¸…ç©ºã€‚</li>\n<li>ç¡¬ç›˜ç¼“å­˜(from disk cache)ï¼šç¡¬ç›˜ç¼“å­˜åˆ™æ˜¯ç›´æ¥å°†ç¼“å­˜å†™å…¥ç¡¬ç›˜æ–‡ä»¶ä¸­ï¼Œè¯»å–ç¼“å­˜éœ€è¦å¯¹è¯¥ç¼“å­˜å­˜æ”¾çš„ç¡¬ç›˜æ–‡ä»¶è¿›è¡ŒI/Oæ“ä½œï¼Œç„¶åé‡æ–°è§£æè¯¥ç¼“å­˜å†…å®¹ï¼Œè¯»å–å¤æ‚ï¼Œé€Ÿåº¦æ¯”å†…å­˜ç¼“å­˜æ…¢ã€‚</li>\n</ul>\n<p>åœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨ä¼šåœ¨jså’Œå›¾ç‰‡ç­‰æ–‡ä»¶è§£ææ‰§è¡Œåç›´æ¥å­˜å…¥å†…å­˜ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆå½“åˆ·æ–°é¡µé¢æ—¶åªéœ€ç›´æ¥ä»å†…å­˜ç¼“å­˜ä¸­è¯»å–(from memory cache)ï¼›è€Œcssæ–‡ä»¶åˆ™ä¼šå­˜å…¥ç¡¬ç›˜æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥æ¯æ¬¡æ¸²æŸ“é¡µé¢éƒ½éœ€è¦ä»ç¡¬ç›˜è¯»å–ç¼“å­˜(from disk cache)ã€‚</p>\n<h2 id=\"åå•†ç¼“å­˜\"><a href=\"#åå•†ç¼“å­˜\" class=\"headerlink\" title=\"åå•†ç¼“å­˜\"></a>åå•†ç¼“å­˜</h2><p>åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>\n<p>åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304ï¼Œå¦‚ä¸‹</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635cbfff69d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>304</p>\n<p>åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å’Œè¯·æ±‚ç»“æœç»“æœï¼Œå¦‚ä¸‹</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635cf070ff5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>200</p>\n<p>åŒæ ·ï¼Œåå•†ç¼“å­˜çš„æ ‡è¯†ä¹Ÿæ˜¯åœ¨å“åº”æŠ¥æ–‡çš„HTTPå¤´ä¸­å’Œè¯·æ±‚ç»“æœä¸€èµ·è¿”å›ç»™æµè§ˆå™¨çš„ï¼Œæ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼šLast-Modified / If-Modified-Sinceå’ŒEtag / If-None-Matchï¼Œå…¶ä¸­Etag / If-None-Matchçš„ä¼˜å…ˆçº§æ¯”Last-Modified / If-Modified-Sinceé«˜ã€‚</p>\n<h3 id=\"Last-Modified-If-Modified-Since\"><a href=\"#Last-Modified-If-Modified-Since\" class=\"headerlink\" title=\"Last-Modified / If-Modified-Since\"></a>Last-Modified / If-Modified-Since</h3><p>Last-Modifiedæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›è¯¥èµ„æºæ–‡ä»¶åœ¨æœåŠ¡å™¨æœ€åè¢«ä¿®æ”¹çš„æ—¶é—´ï¼Œå¦‚ä¸‹ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635d2a88984?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>last-modify</p>\n<p>If-Modified-Sinceåˆ™æ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„Last-Modifiedå€¼ï¼Œé€šè¿‡æ­¤å­—æ®µå€¼å‘Šè¯‰æœåŠ¡å™¨è¯¥èµ„æºä¸Šæ¬¡è¯·æ±‚è¿”å›çš„æœ€åè¢«ä¿®æ”¹æ—¶é—´ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚ï¼Œå‘ç°è¯·æ±‚å¤´å«æœ‰If-Modified-Sinceå­—æ®µï¼Œåˆ™ä¼šæ ¹æ®If-Modified-Sinceçš„å­—æ®µå€¼ä¸è¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„æœ€åè¢«ä¿®æ”¹æ—¶é—´åšå¯¹æ¯”ï¼Œè‹¥æœåŠ¡å™¨çš„èµ„æºæœ€åè¢«ä¿®æ”¹æ—¶é—´å¤§äºIf-Modified-Sinceçš„å­—æ®µå€¼ï¼Œåˆ™é‡æ–°è¿”å›èµ„æºï¼ŒçŠ¶æ€ç ä¸º200ï¼›å¦åˆ™åˆ™è¿”å›304ï¼Œä»£è¡¨èµ„æºæ— æ›´æ–°ï¼Œå¯ç»§ç»­ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼Œå¦‚ä¸‹ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635db6d62fe?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>If-Modified-Since</p>\n<h3 id=\"Etag-If-None-Match\"><a href=\"#Etag-If-None-Match\" class=\"headerlink\" title=\"Etag / If-None-Match\"></a>Etag / If-None-Match</h3><p>Etagæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›å½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†(ç”±æœåŠ¡å™¨ç”Ÿæˆ)ï¼Œå¦‚ä¸‹ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635e4dd628b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>Etag</p>\n<p>If-None-Matchæ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„å”¯ä¸€æ ‡è¯†Etagå€¼ï¼Œé€šè¿‡æ­¤å­—æ®µå€¼å‘Šè¯‰æœåŠ¡å™¨è¯¥èµ„æºä¸Šæ¬¡è¯·æ±‚è¿”å›çš„å”¯ä¸€æ ‡è¯†å€¼ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œå‘ç°è¯¥è¯·æ±‚å¤´ä¸­å«æœ‰If-None-Matchï¼Œåˆ™ä¼šæ ¹æ®If-None-Matchçš„å­—æ®µå€¼ä¸è¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„Etagå€¼åšå¯¹æ¯”ï¼Œä¸€è‡´åˆ™è¿”å›304ï¼Œä»£è¡¨èµ„æºæ— æ›´æ–°ï¼Œç»§ç»­ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼›ä¸ä¸€è‡´åˆ™é‡æ–°è¿”å›èµ„æºæ–‡ä»¶ï¼ŒçŠ¶æ€ç ä¸º200ï¼Œå¦‚ä¸‹ã€‚</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635ecb2cae0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<p>Etag-match</p>\n<p>æ³¨ï¼šEtag / If-None-Matchä¼˜å…ˆçº§é«˜äºLast-Modified / If-Modified-Sinceï¼ŒåŒæ—¶å­˜åœ¨åˆ™åªæœ‰Etag / If-None-Matchç”Ÿæ•ˆã€‚</p>\n<h2 id=\"æ€»ç»“-2\"><a href=\"#æ€»ç»“-2\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºåå•†ç¼“å­˜è¿›è¡Œï¼Œè‹¥å¼ºåˆ¶ç¼“å­˜(Expireså’ŒCache-Control)ç”Ÿæ•ˆåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥ä¸ç”Ÿæ•ˆåˆ™è¿›è¡Œåå•†ç¼“å­˜(Last-Modified / If-Modified-Sinceå’ŒEtag / If-None-Match)ï¼Œåå•†ç¼“å­˜ç”±æœåŠ¡å™¨å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥åå•†ç¼“å­˜å¤±æ•ˆï¼Œé‚£ä¹ˆä»£è¡¨è¯¥è¯·æ±‚çš„ç¼“å­˜å¤±æ•ˆï¼Œé‡æ–°è·å–è¯·æ±‚ç»“æœï¼Œå†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ï¼›ç”Ÿæ•ˆåˆ™è¿”å›304ï¼Œç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œä¸»è¦è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://user-gold-cdn.xitu.io/2018/4/19/162db635ed5f6d26?imageView2/0/w/1280/h/960/format/webp/ignore-error/1\" alt=\"img\"></p>\n<h1 id=\"7-Chrome-æµè§ˆå™¨æ¶æ„\"><a href=\"#7-Chrome-æµè§ˆå™¨æ¶æ„\" class=\"headerlink\" title=\"7.Chrome æµè§ˆå™¨æ¶æ„\"></a>7.Chrome æµè§ˆå™¨æ¶æ„</h1><h2 id=\"CPUä¸GPU\"><a href=\"#CPUä¸GPU\" class=\"headerlink\" title=\"CPUä¸GPU\"></a>CPUä¸GPU</h2><p>ï»¿CPUå’ŒGPUä½œä¸ºè®¡ç®—æœºä¸­æœ€é‡è¦çš„ä¸¤ä¸ªè®¡ç®—å•å…ƒç›´æ¥å†³å®šäº†è®¡ç®—æ€§èƒ½ã€‚</p>\n<h3 id=\"CPU\"><a href=\"#CPU\" class=\"headerlink\" title=\"CPU\"></a>CPU</h3><p><img data-src=\"https://static001.geekbang.org/infoq/94/9407812940681a84a4b4661b551da819.png\" alt=\"img\"></p>\n<p>CPUæ˜¯è®¡ç®—æœºçš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†å„ç§ä¸åŒçš„ä»»åŠ¡ã€‚åœ¨è¿‡å»ï¼Œå¤§å¤šæ•°CPUæ˜¯å•èŠ¯ç‰‡çš„ï¼Œæ ¸å¿ƒè¢«å®‰ç½®åœ¨åŒä¸€ä¸ªèŠ¯ç‰‡ä¸Šã€‚æ›´æ–°çš„CPUå¯ä»¥æ”¯æŒå¤šæ ¸å¿ƒï¼Œè¿ç®—èƒ½åŠ›å¤§å¤§åŠ å¼ºã€‚è€Œæœ€æ–°çš„çš„cpuå·²ç»è¾¾åˆ°10æ ¸å¿ƒ20çº¿ç¨‹æ•°çš„èƒ½åŠ›äº†ã€‚</p>\n<h3 id=\"GPU\"><a href=\"#GPU\" class=\"headerlink\" title=\"GPU\"></a>GPU</h3><p><img data-src=\"https://static001.geekbang.org/infoq/8f/8fc555c4a70f7f844dbb34edec74cf1f.png\" alt=\"img\"></p>\n<p>GPUæ˜¯å¦ä¸€ä¸ªè®¡ç®—æœºçš„ç»„æˆéƒ¨åˆ†ï¼Œä¸CPUä¸åŒï¼ŒGPUæ›´æ“…é•¿åˆ©ç”¨å¤šæ ¸å¿ƒåŒæ—¶å¤„ç†å•ä¸€çš„ä»»åŠ¡ã€‚åƒå‘½åé‚£æ ·ï¼ŒGPUæœ€åˆè¢«ç”¨äºå¤„ç†å›¾åƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨GPUå¯ä»¥æ›´å¿«ã€æ›´é¡ºç•…çš„æ¸²æŸ“é¡µé¢å†…å®¹ã€‚éšç€GPUçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„è®¡ç®—ä»»åŠ¡ä¹Ÿå¯ä»¥ä½¿ç”¨GPUæ¥å¤„ç†ã€‚ç”šè‡³æœ‰äººè¯´GPUæ˜¯äººå·¥æ™ºèƒ½çš„å¤§åŠŸè‡£ï¼Œå¯è§GPUå·²ç»ä¸å†ä»…ç”¨äºå›¾åƒå¤„ç†ä¸Šäº†ã€‚</p>\n<h2 id=\"è®¡ç®—æœºæ¶æ„\"><a href=\"#è®¡ç®—æœºæ¶æ„\" class=\"headerlink\" title=\"è®¡ç®—æœºæ¶æ„\"></a>è®¡ç®—æœºæ¶æ„</h2><p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/2a/2af38ddf296b92cd6bbbf97322774c33.png\" alt=\"img\"></p>\n<p>æˆ‘ä»¬å¯ä»¥æŠŠè®¡ç®—æœºè‡ªä¸‹è€Œä¸Šåˆ†æˆä¸‰å±‚ï¼šç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ã€‚æœ‰äº†æ“ä½œç³»ç»Ÿçš„å­˜åœ¨ï¼Œä¸Šå±‚è¿è¡Œçš„åº”ç”¨å¯ä»¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„èƒ½åŠ›ä½¿ç”¨ç¡¬ä»¶èµ„æºè€Œä¸ä¼šç›´æ¥è®¿é—®ç¡¬ä»¶èµ„æºã€‚</p>\n<h2 id=\"è¿›ç¨‹ä¸çº¿ç¨‹\"><a href=\"#è¿›ç¨‹ä¸çº¿ç¨‹\" class=\"headerlink\" title=\"è¿›ç¨‹ä¸çº¿ç¨‹\"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h2><p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/97/97afac83d32e43397ea484653bb6b1ec.png\" alt=\"img\"></p>\n<p>ä¸€ä¸ªè¿›ç¨‹æ˜¯åº”ç”¨æ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚è€Œçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­æ›´å°çš„ä¸€éƒ¨åˆ†ã€‚å½“åº”ç”¨è¢«å¯åŠ¨ï¼Œè¿›ç¨‹å°±è¢«åˆ›å»ºå‡ºæ¥ã€‚ç¨‹åºå¯ä»¥åˆ›å»ºçº¿ç¨‹æ¥å¸®åŠ©å…¶å·¥ä½œã€‚æ“ä½œç³»ç»Ÿä¼šä¸ºè¿›ç¨‹åˆ†é…ç§æœ‰çš„å†…å­˜ç©ºé—´ä»¥ä¾›ä½¿ç”¨ï¼Œå½“å…³é—­ç¨‹åºæ—¶ï¼Œè¿™æ®µç§æœ‰çš„å†…å­˜ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚å…¶å®è¿˜æœ‰æ¯”çº¿ç¨‹æ›´å°çš„å­˜åœ¨å°±æ˜¯<strong>åç¨‹ï¼Œè€Œåæˆæ˜¯è¿è¡Œåœ¨çº¿ç¨‹ä¸­æ›´å°çš„å•ä½ã€‚async/awaitå°±æ˜¯åŸºäºåç¨‹å®ç°çš„ã€‚</strong></p>\n<h2 id=\"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰\"><a href=\"#è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰\" class=\"headerlink\" title=\"è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰\"></a>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</h2><p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/b8/b8306ca61a00c7ccfa68476e61a0b105.png\" alt=\"img\"></p>\n<p>ï»¿</p>\n<p>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è®©æ“ä½œç³»ç»Ÿå¼€å¯å¦ä¸€ä¸ªè¿›ç¨‹å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚å½“ä¸¤ä¸ªè¿›ç¨‹éœ€è¦é€šä¿¡æ—¶ï¼Œå¯ä»¥æ—¶ç”¨IPC(Inter Process Communication)ã€‚</p>\n<p>ï»¿å¤šæ•°ç¨‹åºè¢«è®¾è®¡æˆä½¿ç”¨IPCæ¥è¿›è¡Œè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œå¥½å¤„åœ¨äºå½“ä¸€ä¸ªè¿›ç¨‹ç»™å¦ä¸€ä¸ªè¿›ç¨‹å‘æ¶ˆæ¯è€Œæ²¡æœ‰å›åº”æ—¶ï¼Œå¹¶ä¸å½±å“å½“å‰çš„è¿›ç¨‹ç»§ç»­å·¥ä½œã€‚</p>\n<h2 id=\"æµè§ˆå™¨æ¶æ„\"><a href=\"#æµè§ˆå™¨æ¶æ„\" class=\"headerlink\" title=\"æµè§ˆå™¨æ¶æ„\"></a>æµè§ˆå™¨æ¶æ„</h2><p>ï»¿</p>\n<p>å€ŸåŠ©è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œæµè§ˆå™¨å¯ä»¥è¢«è®¾è®¡æˆå•è¿›ç¨‹ã€å¤šçº¿ç¨‹æ¶æ„ï¼Œæˆ–è€…åˆ©ç”¨IPCå®ç°å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹æ¶æ„ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/23/23162955642bb163b16a5d08bdbb3288.png\" alt=\"img\"></p>\n<p>è¿™é‡Œæˆ‘ä»¬ä»¥Chromeå¤šè¿›ç¨‹æ¶æ„ä»‹ç»ï¼Œåœ¨Chromeä¸­å­˜åœ¨è¿™ä¸åŒç§ç±»å‹çš„è¿›ç¨‹ï¼Œå®ƒä»¬å„å¸å…¶èŒã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/89/898bb4e5c529e5d3280b6787a7d261a3.png\" alt=\"img\"></p>\n<p>æµè§ˆå™¨è¿›ç¨‹åšä¸ºChromeä¸­æœ€æ ¸å¿ƒçš„è¿›ç¨‹ç®¡ç†ç€Chromeä¸­çš„å…¶ä»–è¿›ç¨‹ï¼Œè€ŒRendereråˆ™è´Ÿè´£æ¸²æŸ“ä¸åŒçš„ç«™ç‚¹ã€‚</p>\n<h3 id=\"è¿›ç¨‹å·¥ä½œå†…å®¹\"><a href=\"#è¿›ç¨‹å·¥ä½œå†…å®¹\" class=\"headerlink\" title=\"è¿›ç¨‹å·¥ä½œå†…å®¹\"></a>è¿›ç¨‹å·¥ä½œå†…å®¹</h3><p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/7b/7bc84e5abe039f836a0af8002d4a63fd.png\" alt=\"img\"></p>\n<p>ï»¿</p>\n<h4 id=\"æµè§ˆå™¨è¿›ç¨‹ï¼ˆBrowser-processï¼‰\"><a href=\"#æµè§ˆå™¨è¿›ç¨‹ï¼ˆBrowser-processï¼‰\" class=\"headerlink\" title=\"æµè§ˆå™¨è¿›ç¨‹ï¼ˆBrowser processï¼‰\"></a>æµè§ˆå™¨è¿›ç¨‹ï¼ˆBrowser processï¼‰</h4><p>æµè§ˆå™¨è¿›ç¨‹è´Ÿè´£ç®¡ç†Chromeåº”ç”¨æœ¬èº«ï¼ŒåŒ…æ‹¬åœ°å€æ ã€ä¹¦ç­¾ã€å‰è¿›å’Œåé€€æŒ‰é’®ã€‚åŒæ—¶ä¹Ÿè´Ÿè´£å¯ä¸è§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æŒ‰è®¿é—®ç­‰ï¼Œä¹Ÿè´Ÿè´£å…¶ä»–è¿›ç¨‹çš„è°ƒåº¦ã€‚</p>\n<h4 id=\"æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer-processï¼‰\"><a href=\"#æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer-processï¼‰\" class=\"headerlink\" title=\"æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer processï¼‰\"></a>æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer processï¼‰</h4><p>æ¸²æŸ“è¿›ç¨‹è´Ÿè´£ç«™ç‚¹çš„æ¸²æŸ“ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬JavaScriptä»£ç çš„è¿è¡Œï¼Œweb workerçš„ç®¡ç†ç­‰ã€‚</p>\n<h4 id=\"æ’ä»¶è¿›ç¨‹ï¼ˆPlugin-processï¼‰\"><a href=\"#æ’ä»¶è¿›ç¨‹ï¼ˆPlugin-processï¼‰\" class=\"headerlink\" title=\"æ’ä»¶è¿›ç¨‹ï¼ˆPlugin processï¼‰\"></a>æ’ä»¶è¿›ç¨‹ï¼ˆPlugin processï¼‰</h4><p>æ’ä»¶è¿›ç¨‹è´Ÿè´£ä¸ºæµè§ˆå™¨æä¾›å„ç§é¢å¤–çš„æ’ä»¶åŠŸèƒ½ï¼Œä¾‹å¦‚flashã€‚</p>\n<h4 id=\"GPUè¿›ç¨‹ï¼ˆGPU-processï¼‰\"><a href=\"#GPUè¿›ç¨‹ï¼ˆGPU-processï¼‰\" class=\"headerlink\" title=\"GPUè¿›ç¨‹ï¼ˆGPU processï¼‰\"></a>GPUè¿›ç¨‹ï¼ˆGPU processï¼‰</h4><p>GPUè¿›ç¨‹è´Ÿè´£æä¾›æˆåƒçš„åŠŸèƒ½ã€‚</p>\n<p>å½“ç„¶è¿˜æœ‰å…¶ä»–åƒæ‰©å±•è¿›ç¨‹æˆ–å·¥å…·è¿›ç¨‹ç­‰å…¶ä»–è¿›ç¨‹ï¼Œå¯ä»¥åœ¨Chromeçš„Task Manageré¢æ¿ä¸­æŸ¥çœ‹ï¼Œé¢æ¿ä¸­åˆ—å‡ºäº†è¿è¡Œçš„è¿›ç¨‹å’Œå…¶å ç”¨çš„CPUã€å†…å­˜æƒ…å†µã€‚</p>\n<h3 id=\"å¤šè¿›ç¨‹æ¶æ„çš„å¥½å¤„\"><a href=\"#å¤šè¿›ç¨‹æ¶æ„çš„å¥½å¤„\" class=\"headerlink\" title=\"å¤šè¿›ç¨‹æ¶æ„çš„å¥½å¤„\"></a>å¤šè¿›ç¨‹æ¶æ„çš„å¥½å¤„</h3><p>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªç«™ç‚¹æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šè´Ÿè´£è¿è¡Œç«™ç‚¹çš„ä»£ç ï¼Œæ¸²æŸ“ç«™ç‚¹çš„é¡µé¢ï¼ŒåŒæ—¶å“åº”ç”¨æˆ·çš„äº¤äº’åŠ¨ä½œï¼Œå½“æˆ‘ä»¬åœ¨Chromeä¸­æ‰“å¼€ä¸‰ä¸ªé¡µç­¾åŒæ—¶è®¿é—®ä¸‰ä¸ªç«™ç‚¹æ—¶ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ²¡æœ‰å“åº”ï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­å®ƒç„¶åä½¿ç”¨å…¶ä»–çš„é¡µç­¾ï¼Œè¿™æ˜¯å› ä¸ºChromeä¸ºæ¯ä¸ªç«™ç‚¹åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹ï¼Œä¸“é—¨å¤„ç†å½“å‰ç«™ç‚¹çš„æ¸²æŸ“å·¥ä½œã€‚å¦‚æœæ‰€æœ‰çš„é¡µé¢è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå½“æœ‰ä¸€ä¸ªé¡µé¢æ²¡æœ‰å“åº”æ—¶ï¼Œæ‰€æœ‰çš„é¡µé¢å°±éƒ½å¡ä½äº†ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/0e/0e8966939127660cee3f7aa05303721b.png\" alt=\"img\"></p>\n<p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå€ŸåŠ©æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹å®‰å…¨çš„æ§åˆ¶ï¼Œæµè§ˆå™¨å¯ä»¥å°†é¡µé¢æ”¾ç½®åœ¨æ²™ç®±ä¸­ï¼Œç«™ç‚¹çš„ä»£ç å¯ä»¥è¿è¡Œåœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ï¼Œä¿è¯æ ¸å¿ƒè¿›ç¨‹çš„å®‰å…¨ã€‚</p>\n<p>ï»¿</p>\n<p>è™½ç„¶å¤šè¿›ç¨‹çš„æ¶æ„ä¼˜äºå•è¿›ç¨‹æ¶æ„ï¼Œä½†ç”±äºè¿›ç¨‹ç‹¬äº«è‡ªå·±çš„ç§æœ‰å†…å­˜ï¼Œä»¥æ¸²æŸ“è¿›ç¨‹ä¸ºä¾‹ï¼Œè™½ç„¶æ¸²æŸ“çš„ç«™ç‚¹ä¸åŒï¼Œä½†å·¥ä½œå†…å®¹å¤§ä½“ç›¸ä¼¼ï¼Œä¸ºäº†å®Œæˆæ¸²æŸ“å·¥ä½œå®ƒä»¬ä¼šåœ¨è‡ªå·±çš„å†…å­˜ä¸­åŒ…å«ç›¸åŒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚V8å¼•æ“ï¼ˆç”¨äºè§£æå’Œè¿è¡ŒJavascriptï¼‰ï¼Œè¿™æ„å‘³ç€è¿™éƒ¨åˆ†ç›¸åŒçš„åŠŸèƒ½éœ€è¦å ç”¨æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´ã€‚ä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒChromeé™åˆ¶äº†æœ€å¤§è¿›ç¨‹æ•°ï¼Œæœ€å¤§è¿›ç¨‹æ•°å–å†³äºç¡¬ä»¶çš„èƒ½åŠ›ï¼ŒåŒæ—¶<strong>å½“ä½¿ç”¨å¤šä¸ªé¡µç­¾è®¿é—®ç›¸åŒçš„ç«™ç‚¹æ—¶æµè§ˆå™¨ä¸ä¼šåˆ›å»ºæ–°çš„æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</p>\n<h3 id=\"é¢å‘æœåŠ¡çš„æ¶æ„\"><a href=\"#é¢å‘æœåŠ¡çš„æ¶æ„\" class=\"headerlink\" title=\"é¢å‘æœåŠ¡çš„æ¶æ„\"></a>é¢å‘æœåŠ¡çš„æ¶æ„</h3><p>Chromeå°†æ¶æ„ä»å¤šè¿›ç¨‹æ¨¡å‹è½¬å˜æˆé¢å‘æœåŠ¡ã€‚æµè§ˆå™¨å°†åŠŸèƒ½ä»¥æœåŠ¡çš„æ–¹å¼æä¾›ï¼Œä»¥è§£å†³å¤šè¿›ç¨‹æ¶æ„ä¸­çš„é—®é¢˜ã€‚</p>\n<p>å½“Chromeè¿è¡Œåœ¨æ‹¥æœ‰å¼ºå¤§ç¡¬ä»¶çš„è®¡ç®—æœºä¸Šæ—¶ï¼Œä¼šå°†ä¸€ä¸ªæœåŠ¡ä»¥å¤šä¸ªè¿›ç¨‹çš„æ–¹å¼å®ç°ï¼Œæé«˜ç¨³å®šæ€§ï¼Œå½“è®¡ç®—æœºç¡¬ä»¶èµ„æºç´§å¼ æ—¶ï¼Œåˆ™å¯ä»¥å°†å¤šä¸ªæœåŠ¡æ”¾åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­èŠ‚çœèµ„æºã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/72/72ab917eee34ffd4b8bb1352a8f73ad6.png\" alt=\"img\"></p>\n<h3 id=\"åŸºäºç«™ç‚¹éš”ç¦»çš„æ¸²æŸ“è¿›ç¨‹\"><a href=\"#åŸºäºç«™ç‚¹éš”ç¦»çš„æ¸²æŸ“è¿›ç¨‹\" class=\"headerlink\" title=\"åŸºäºç«™ç‚¹éš”ç¦»çš„æ¸²æŸ“è¿›ç¨‹\"></a>åŸºäºç«™ç‚¹éš”ç¦»çš„æ¸²æŸ“è¿›ç¨‹</h3><p>ï»¿åˆ©ç”¨iframeæˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªé¡µé¢è®¿é—®ä¸åŒç«™ç‚¹çš„èµ„æºï¼Œä½†ä»å®‰å…¨çš„è§’åº¦è€ƒè™‘ï¼ŒåŒæºç­–ç•¥ä¸å…è®¸ä¸€ä¸ªç«™ç‚¹åœ¨æœªå¾—åˆ°åŒæ„çš„æƒ…å†µä¸‹è®¿é—®å…¶ä»–ç«™ç‚¹çš„èµ„æºï¼Œæ‰€ä»¥ä»Chrome 67å¼€å§‹æ¯ä¸ªç«™ç‚¹ç”±ç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹å¤„ç†è¢«é»˜è®¤å¯ç”¨ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/fa/fa70a857e645bec8876257580a935282.png\" alt=\"img\"></p>\n<h3 id=\"æµè§ˆå™¨è¿›ç¨‹\"><a href=\"#æµè§ˆå™¨è¿›ç¨‹\" class=\"headerlink\" title=\"æµè§ˆå™¨è¿›ç¨‹\"></a>æµè§ˆå™¨è¿›ç¨‹</h3><p><img data-src=\"https://static001.geekbang.org/infoq/40/4006973a23f68ec28402353d48f91a57.png\" alt=\"img\"></p>\n<p>æµè§ˆå™¨è¿›ç¨‹è´Ÿè´£å¤„ç†é™¤äº†æ¸²æŸ“å¤–çš„å¤§éƒ¨åˆ†å·¥ä½œï¼Œæµè§ˆå™¨è¿›ç¨‹åŒ…æ‹¬å‡ ä¸ªçº¿ç¨‹ï¼š</p>\n<ul>\n<li>UI çº¿ç¨‹è´Ÿè´£ç»˜åˆ¶å·¥å…·æ ä¸­çš„æŒ‰é’®ã€åœ°å€æ ç­‰ã€‚</li>\n<li>ç½‘ç»œçº¿ç¨‹è´Ÿè´£ä»ç½‘ç»œä¸­è·å–æ•°æ®ã€‚</li>\n<li>å­˜å‚¨çº¿ç¨‹è´Ÿè´£æ–‡ä»¶ç­‰åŠŸèƒ½ã€‚</li>\n</ul>\n<p>å½“æˆ‘ä»¬åœ¨åœ°å€æ ä¸­è¾“å…¥ä¸€ä¸ªåœ°å€æ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¸­çš„UIçº¿ç¨‹æœ€å…ˆå¾—çŸ¥è¿™ä¸ªåŠ¨ä½œï¼Œå¹¶å¼€å§‹å¤„ç†ã€‚</p>\n<h2 id=\"ä¸€æ¬¡è®¿é—®\"><a href=\"#ä¸€æ¬¡è®¿é—®\" class=\"headerlink\" title=\"ä¸€æ¬¡è®¿é—®\"></a>ä¸€æ¬¡è®¿é—®</h2><p>ä¸‹é¢æˆ‘ä»¬å°±ä»ä¸€æ¬¡å¸¸è§çš„è®¿é—®å…¥æ‰‹ï¼Œé€æ­¥äº†è§£æµè§ˆå™¨æ˜¯å¦‚ä½•å±•ç¤ºé¡µé¢çš„ã€‚</p>\n<h3 id=\"Step-1ï¼šè¾“å…¥å¤„ç†\"><a href=\"#Step-1ï¼šè¾“å…¥å¤„ç†\" class=\"headerlink\" title=\"Step 1ï¼šè¾“å…¥å¤„ç†\"></a>Step 1ï¼šè¾“å…¥å¤„ç†</h3><p>å½“æˆ‘ä»¬åœ¨åœ°å€æ ä¸­è¾“å…¥æ—¶ï¼ŒUIçº¿ç¨‹ä¼šå…ˆåˆ¤æ–­æˆ‘ä»¬è¾“å…¥çš„å†…å®¹æ˜¯è¦æœç´¢çš„å†…å®¹è¿˜æ˜¯è¦è®¿é—®ä¸€ä¸ªç«™ç‚¹ï¼Œå› ä¸ºåœ°å€æ åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæœç´¢æ¡†ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/d6/d619ac67749e633ae020812aa0b09bdd.png\" alt=\"img\"></p>\n<h3 id=\"Step-2ï¼šè®¿é—®å¼€å§‹\"><a href=\"#Step-2ï¼šè®¿é—®å¼€å§‹\" class=\"headerlink\" title=\"Step 2ï¼šè®¿é—®å¼€å§‹\"></a>Step 2ï¼šè®¿é—®å¼€å§‹</h3><p>å½“æˆ‘ä»¬æŒ‰ä¸‹å›è½¦å¼€å§‹è®¿é—®æ—¶ï¼ŒUIçº¿ç¨‹å°†å€ŸåŠ©ç½‘ç»œçº¿ç¨‹è®¿é—®ç«™ç‚¹èµ„æº. æµè§ˆå™¨é¡µç­¾çš„æ ‡é¢˜ä¸Šä¼šå‡ºç°åŠ è½½ä¸­çš„å›¾æ ‡ï¼ŒåŒæ—¶ç½‘ç»œçº¿ç¨‹ä¼šæ ¹æ®é€‚å½“çš„ç½‘ç»œåè®®ï¼Œä¾‹å¦‚DNS lookupå’ŒTLSä¸ºè¿™æ¬¡è¯·æ±‚å»ºç«‹è¿æ¥ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/74/749ccda4aca068ed34465407973dc3f9.png\" alt=\"img\"></p>\n<p>å½“æœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨é‡å®šå‘è¯·æ±‚æ—¶ï¼Œç½‘ç»œçº¿ç¨‹ä¼šé€šçŸ¥UIçº¿ç¨‹éœ€è¦é‡å®šå‘ï¼Œç„¶åä¼šä»¥æ–°çš„åœ°å€åšå¼€å§‹è¯·æ±‚èµ„æºã€‚</p>\n<h3 id=\"Step-3ï¼šå¤„ç†å“åº”æ•°æ®\"><a href=\"#Step-3ï¼šå¤„ç†å“åº”æ•°æ®\" class=\"headerlink\" title=\"Step 3ï¼šå¤„ç†å“åº”æ•°æ®\"></a>Step 3ï¼šå¤„ç†å“åº”æ•°æ®</h3><p><img data-src=\"https://static001.geekbang.org/infoq/a0/a049bd54e903004676c6f75ec11d373b.png\" alt=\"img\"></p>\n<p>å½“ç½‘ç»œçº¿ç¨‹æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„æ•°æ®æ—¶ï¼Œä¼šè¯•å›¾ä»æ•°æ®ä¸­çš„å‰é¢çš„ä¸€äº›å­—èŠ‚ä¸­å¾—åˆ°æ•°æ®çš„ç±»å‹ï¼ˆ<strong>Content-Type</strong>ï¼‰ï¼Œä»¥è¯•å›¾äº†è§£æ•°æ®çš„æ ¼å¼ã€‚</p>\n<p>å½“è¿”å›çš„æ•°æ®ç±»å‹æ˜¯HTMLæ—¶ï¼Œä¼šå°†æ•°æ®ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹åšè¿›ä¸€æ­¥çš„æ¸²æŸ“å·¥ä½œã€‚ä½†æ˜¯å¦‚æœæ•°æ®ç±»å‹æ˜¯zipæ–‡ä»¶æˆ–è€…å…¶ä»–æ–‡ä»¶æ ¼å¼æ—¶ï¼Œä¼šå°†æ•°æ®ä¼ é€’ç»™ä¸‹è½½ç®¡ç†å™¨åšè¿›ä¸€æ­¥çš„æ–‡ä»¶é¢„è§ˆæˆ–è€…ä¸‹è½½å·¥ä½œã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/b4/b4797a3b5023a9de4ac03ad174e9bd3f.png\" alt=\"img\"></p>\n<p>åœ¨å¼€å§‹æ¸²æŸ“ä¹‹å‰ï¼Œç½‘ç»œçº¿ç¨‹è¦å…ˆæ£€æŸ¥æ•°æ®çš„å®‰å…¨æ€§ï¼Œè¿™é‡Œä¹Ÿæ˜¯æµè§ˆå™¨ä¿è¯å®‰å…¨çš„åœ°æ–¹ã€‚å¦‚æœè¿”å›çš„æ•°æ®æ¥è‡ªä¸€äº›æ¶æ„çš„ç«™ç‚¹ï¼Œç½‘ç»œçº¿ç¨‹ä¼šæ˜¾ç¤ºè­¦å‘Šçš„é¡µé¢ã€‚åŒæ—¶ï¼ŒCross Origin Read Blocking(CORB)ç­–ç•¥ä¹Ÿä¼šç¡®ä¿è·¨åŸŸçš„æ•æ„Ÿæ•°æ®ä¸ä¼šè¢«ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</p>\n<h3 id=\"Step-4ï¼šæ¸²æŸ“è¿‡ç¨‹\"><a href=\"#Step-4ï¼šæ¸²æŸ“è¿‡ç¨‹\" class=\"headerlink\" title=\"Step 4ï¼šæ¸²æŸ“è¿‡ç¨‹\"></a>Step 4ï¼šæ¸²æŸ“è¿‡ç¨‹</h3><p>å½“æ‰€æœ‰çš„æ£€æŸ¥ç»“æŸåï¼Œç½‘ç»œçº¿ç¨‹ç¡®ä¿¡æµè§ˆå™¨å¯ä»¥è®¿é—®ç«™ç‚¹æ—¶ï¼Œç½‘ç»œçº¿ç¨‹é€šçŸ¥UIçº¿ç¨‹æ•°æ®å·²ç»å‡†å¤‡å¥½äº†ã€‚UIçº¿ç¨‹ä¼šæ ¹æ®å½“å‰çš„ç«™ç‚¹æ‰¾åˆ°ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹å®Œæˆæ¥ä¸‹æ¥çš„æ¸²æŸ“å·¥ä½œã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/32/320ebdce97d9fb29329fd47c0c5f0c07.png\" alt=\"img\"></p>\n<p>åœ¨ç¬¬äºŒæ­¥ï¼ŒUIçº¿ç¨‹å°†è¯·æ±‚åœ°å€ä¼ é€’ç»™ç½‘ç»œçº¿ç¨‹æ—¶ï¼ŒUIçº¿ç¨‹å°±å·²ç»çŸ¥é“äº†è¦è®¿é—®çš„ç«™ç‚¹ã€‚æ­¤æ—¶UIçº¿ç¨‹å°±å¯ä»¥å¼€å§‹æŸ¥æ‰¾æˆ–å¯åŠ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œè¿™ä¸ªåŠ¨ä½œä¸è®©ç½‘ç»œçº¿ç¨‹ä¸‹è½½æ•°æ®æ˜¯åŒæ—¶çš„ã€‚å¦‚æœç½‘ç»œçº¿ç¨‹æŒ‰ç…§é¢„æœŸè·å–åˆ°æ•°æ®ï¼Œåˆ™æ¸²æŸ“è¿›ç¨‹å°±å·²ç»å¯ä»¥å¼€å§‹æ¸²æŸ“äº†ï¼Œè¿™ä¸ªåŠ¨ä½œå‡å°‘äº†ä»ç½‘ç»œçº¿ç¨‹å¼€å§‹è¯·æ±‚æ•°æ®åˆ°æ¸²æŸ“è¿›ç¨‹å¯ä»¥å¼€å§‹æ¸²æŸ“é¡µé¢çš„æ—¶é—´ã€‚å½“ç„¶ï¼Œå¦‚æœå‡ºç°é‡å®šå‘çš„è¯·æ±‚æ—¶ï¼Œæå‰åˆå§‹åŒ–çš„æ¸²æŸ“è¿›ç¨‹å¯èƒ½å°±ä¸ä¼šè¢«ä½¿ç”¨äº†ï¼Œä½†ç›¸æ¯”æ­£å¸¸è®¿é—®ç«™ç‚¹çš„åœºæ™¯ï¼Œé‡å®šå‘å¾€å¾€æ˜¯å°‘æ•°ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä¹Ÿéœ€è¦æ ¹æ®ç‰¹å®šçš„åœºæ™¯ç»™å‡ºç‰¹å®šçš„æ–¹æ¡ˆï¼Œä¸å¿…è¿½æ±‚å®Œç¾çš„æ–¹æ¡ˆã€‚</p>\n<h3 id=\"Step-5ï¼šæäº¤è®¿é—®\"><a href=\"#Step-5ï¼šæäº¤è®¿é—®\" class=\"headerlink\" title=\"Step 5ï¼šæäº¤è®¿é—®\"></a>Step 5ï¼šæäº¤è®¿é—®</h3><p>ç»å†å‰é¢çš„æ­¥éª¤ï¼Œæ•°æ®å’Œæ¸²æŸ“è¿›ç¨‹éƒ½å·²ç»å‡†å¤‡å¥½äº†ã€‚æµè§ˆå™¨è¿›ç¨‹ä¼šé€šè¿‡IPCå‘æ¸²æŸ“è¿›ç¨‹æäº¤è¿™æ¬¡è®¿é—®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¿è¯æ¸²æŸ“è¿›ç¨‹å¯ä»¥é€šè¿‡ç½‘ç»œçº¿ç¨‹ç»§ç»­è·å–æ•°æ®ã€‚ä¸€æ—¦æµè§ˆå™¨è¿›ç¨‹æ”¶åˆ°æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„ç¡®è®¤å®Œæ¯•çš„æ¶ˆæ¯ï¼Œå°±æ„å‘³ç€è®¿é—®çš„è¿‡ç¨‹ç»“æŸäº†ï¼Œæ–‡æ¡£æ¸²æŸ“çš„è¿‡ç¨‹å°±å¼€å§‹äº†ã€‚</p>\n<p>è¿™æ—¶ï¼Œåœ°å€æ æ˜¾ç¤ºå‡ºè¡¨æ˜å®‰å…¨çš„å›¾æ ‡ï¼ŒåŒæ—¶æ˜¾ç¤ºå‡ºç«™ç‚¹çš„ä¿¡æ¯ã€‚è®¿é—®å†å²ä¸­ä¹Ÿä¼šåŠ å…¥å½“å‰çš„ç«™ç‚¹ä¿¡æ¯ã€‚ä¸ºäº†èƒ½æ¢å¤è®¿é—®å†å²ä¿¡æ¯ï¼Œå½“é¡µç­¾æˆ–çª—å£è¢«å…³é—­æ—¶ï¼Œè®¿é—®å†å²çš„ä¿¡æ¯ä¼šè¢«å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/b9/b9882cfdfbc700b2698116669bf40d4e.png\" alt=\"img\"></p>\n<h3 id=\"Extra-Stepï¼šåŠ è½½å®Œæ¯•\"><a href=\"#Extra-Stepï¼šåŠ è½½å®Œæ¯•\" class=\"headerlink\" title=\"Extra Stepï¼šåŠ è½½å®Œæ¯•\"></a>Extra Stepï¼šåŠ è½½å®Œæ¯•</h3><p>å½“è®¿é—®è¢«æäº¤ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šç»§ç»­åŠ è½½é¡µé¢èµ„æºå¹¶ä¸”æ¸²æŸ“é¡µé¢ã€‚å½“æ¸²æŸ“è¿›ç¨‹â€ç»“æŸâ€æ¸²æŸ“å·¥ä½œï¼Œä¼šç»™æµè§ˆå™¨è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¼šåœ¨é¡µé¢ä¸­æ‰€æœ‰å­é¡µé¢ï¼ˆframeï¼‰ç»“æŸåŠ è½½åå‘å‡ºï¼Œä¹Ÿå°±æ˜¯onLoadäº‹ä»¶è§¦å‘åå‘é€ã€‚å½“æ”¶åˆ°â€ç»“æŸâ€æ¶ˆæ¯åï¼ŒUIçº¿ç¨‹ä¼šéšè—é¡µç­¾æ ‡é¢˜ä¸Šçš„åŠ è½½çŠ¶æ€å›¾æ ‡ï¼Œè¡¨æ˜é¡µé¢åŠ è½½å®Œæ¯•ã€‚</p>\n<p>ä½†è¿™é‡Œâ€ç»“æŸâ€å¹¶ä¸æ„å‘³ç€æ‰€æœ‰çš„åŠ è½½å·¥ä½œéƒ½ç»“æŸäº†ï¼Œå› ä¸ºå¯èƒ½è¿˜æœ‰JavaScriptåœ¨åŠ è½½é¢å¤–çš„èµ„æºæˆ–è€…æ¸²æŸ“æ–°çš„è§†å›¾ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/b9/b93f199ad2138be6e445d1ceb4416033.png\" alt=\"img\"></p>\n<h2 id=\"è®¿é—®ä¸åŒçš„ç«™ç‚¹\"><a href=\"#è®¿é—®ä¸åŒçš„ç«™ç‚¹\" class=\"headerlink\" title=\"è®¿é—®ä¸åŒçš„ç«™ç‚¹\"></a>è®¿é—®ä¸åŒçš„ç«™ç‚¹</h2><p>ï»¿ä¸€æ¬¡æ™®é€šçš„è®¿é—®åˆ°æ­¤å°±ç»“æŸäº†ã€‚å½“æˆ‘ä»¬è¾“å…¥å¦å¤–ä¸€ä¸ªåœ°å€æ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šé‡å¤ä¸Šé¢çš„è¿‡ç¨‹ã€‚ä½†æ˜¯åœ¨å¼€å§‹æ–°çš„è®¿é—®å‰ï¼Œä¼šç¡®è®¤å½“å‰çš„ç«™ç‚¹æ˜¯å¦å…³å¿ƒ<code>beforeunload</code>äº‹ä»¶ã€‚</p>\n<p><code>beforeunload</code>äº‹ä»¶å¯ä»¥æé†’ç”¨æˆ·æ˜¯å¦è¦è®¿é—®æ–°çš„ç«™ç‚¹æˆ–è€…å…³é—­é¡µç­¾ï¼Œå¦‚æœç”¨æˆ·æ‹’ç»åˆ™æ–°çš„è®¿é—®æˆ–å…³é—­ä¼šè¢«é˜»æ­¢ã€‚</p>\n<p>ç”±äºæ‰€æœ‰çš„åŒ…æ‹¬æ¸²æŸ“ã€è¿è¡ŒJavascriptçš„å·¥ä½œéƒ½å‘ç”Ÿåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œæµè§ˆå™¨è¿›ç¨‹éœ€è¦åœ¨æ–°çš„è®¿é—®å¼€å§‹å‰ä¸æ¸²æŸ“è¿›ç¨‹ç¡®è®¤å½“å‰çš„ç«™ç‚¹æ˜¯å¦å…³å¿ƒ<code>unload</code>ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/71/71402d5b3a3f7d5629a242727e606079.png\" alt=\"img\"></p>\n<p>å¦‚æœä¸€æ¬¡è®¿é—®æ˜¯ä»ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­å‘èµ·çš„ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–è€…è¿è¡ŒJavaScriptä»£ç <code>location = &#39;http://newsite.com&#39;</code>æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹é¦–å…ˆæ£€æŸ¥<code>beforeunload</code>ã€‚ç„¶åå†æ‰§è¡Œå’Œæµè§ˆå™¨è¿›ç¨‹åˆå§‹åŒ–è®¿é—®åŒæ ·çš„æ­¥éª¤ï¼Œåªä¸è¿‡åŒºåˆ«åœ¨äºè¿™æ ·çš„è®¿é—®è¯·æ±‚æ˜¯ç”±æ¸²æŸ“è¿›ç¨‹å‘æµè§ˆå™¨è¿›ç¨‹å‘èµ·çš„ã€‚</p>\n<p>å½“æ–°çš„ç«™ç‚¹è¯·æ±‚è¢«åˆ›å»ºæ—¶ï¼Œä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹å°†è¢«ç”¨äºå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ä¸ºäº†æ”¯æŒåƒ<code>unload</code>çš„äº‹ä»¶è§¦å‘ï¼Œè€çš„æ¸²æŸ“è¿›ç¨‹éœ€è¦ä¿æŒä½å½“å‰çš„çŠ¶æ€ã€‚æ›´è¯¦ç»†çš„ç”Ÿå‘½å‘¨æœŸä»‹ç»å¯ä»¥å‚è€ƒ<a href=\"https://developers.google.com/web/updates/2018/07/page-lifecycle-api#overview_of_page_lifecycle_states_and_events\">Page lifecycle</a>ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/e0/e074926b6b24cae624f6c1c906c16616.png\" alt=\"img\"></p>\n<h2 id=\"Service-worker\"><a href=\"#Service-worker\" class=\"headerlink\" title=\"Service worker\"></a>Service worker</h2><p>Service workeræ˜¯ä¸€ç§å¯ä»¥webå¼€å‘è€…æ§åˆ¶ç¼“å­˜çš„æŠ€æœ¯ã€‚å¦‚æœService workerè¢«å®ç°æˆä»æœ¬åœ°å­˜å‚¨è·å–æ•°æ®æ—¶ï¼Œé‚£ä¹ˆåŸæœ¬çš„è¯·æ±‚å°±ä¸ä¼šè¢«æµè§ˆå™¨å‘é€ç»™æœåŠ¡å™¨äº†ã€‚</p>\n<p>ï»¿</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒService workerä¸­çš„ä»£ç æ˜¯è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„ã€‚å½“è®¿é—®å¼€å§‹æ—¶ï¼Œç½‘ç»œçº¿ç¨‹ä¼šæ ¹æ®åŸŸåæ£€æŸ¥æ˜¯å¦æœ‰Service workerä¼šå¤„ç†å½“å‰åœ°å€çš„è¯·æ±‚ï¼Œå¦‚æœæœ‰ï¼Œåˆ™UIçº¿ç¨‹ä¼šæ‰¾åˆ°å¯¹åº”çš„æ¸²æŸ“è¿›ç¨‹å»æ‰§è¡ŒService workerçš„ä»£ç ï¼Œè€ŒService workerå¯ä»¥è®©å¼€å‘è€…å†³å®šè¿™ä¸ªè¯·æ±‚æ˜¯ä»æœ¬åœ°å­˜å‚¨è¿˜æ˜¯ä»ç½‘ç»œä¸­è·å–æ•°æ®ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/8c/8c45c55d238b901239d0eb4bd40f2892.png\" alt=\"img\"></p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/fd/fdeaee16c665e81bc59f42122080916f.png\" alt=\"img\"></p>\n<h3 id=\"è®¿é—®é¢„åŠ è½½\"><a href=\"#è®¿é—®é¢„åŠ è½½\" class=\"headerlink\" title=\"è®¿é—®é¢„åŠ è½½\"></a>è®¿é—®é¢„åŠ è½½</h3><p>å¦‚æœService workeræœ€ç»ˆå†³å®šè¦ä»ç½‘ç»œä¸­è·å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿™ç§è·¨è¿›ç¨‹çš„é€šä¿¡ä¼šé€ æˆä¸€äº›å»¶è¿Ÿã€‚<a href=\"https://developers.google.com/web/updates/2017/02/navigation-preload\">Navigation Preload</a>æ˜¯ä¸€ç§å¯ä»¥åœ¨Service workerå¯åŠ¨çš„åŒæ—¶åŠ è½½èµ„æºçš„ä¼˜åŒ–æœºåˆ¶ã€‚å€ŸåŠ©ç‰¹æ®Šçš„è¯·æ±‚å¤´ï¼ŒæœåŠ¡å™¨å¯ä»¥å†³å®šè¿”å›ä»€ä¹ˆæ ·çš„å†…å®¹ç»™æµè§ˆå™¨ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/21/212631fa2520d730f17b0461ddae71d6.png\" alt=\"img\"></p>\n<h3 id=\"æ¸²æŸ“è¿›ç¨‹è´Ÿè´£é¡µé¢çš„å†…å®¹\"><a href=\"#æ¸²æŸ“è¿›ç¨‹è´Ÿè´£é¡µé¢çš„å†…å®¹\" class=\"headerlink\" title=\"æ¸²æŸ“è¿›ç¨‹è´Ÿè´£é¡µé¢çš„å†…å®¹\"></a>æ¸²æŸ“è¿›ç¨‹è´Ÿè´£é¡µé¢çš„å†…å®¹</h3><p>æ¸²æŸ“è¿›ç¨‹è´Ÿè´£æ‰€æœ‰å‘ç”Ÿåœ¨æµè§ˆå™¨é¡µç­¾ä¸­çš„äº‹æƒ…ã€‚åœ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹è´Ÿè´£è§£æï¼Œç¼–è¯‘æˆ–è¿è¡Œä»£ç ç­‰å·¥ä½œï¼Œå½“æˆ‘ä»¬ä½¿ç”¨Workeræ—¶ï¼ŒWorkerçº¿ç¨‹ä¼šè´Ÿè´£è¿è¡Œä¸€éƒ¨åˆ†ä»£ç ã€‚åˆæˆçº¿ç¨‹å’Œå…‰æ …çº¿ç¨‹æ˜¯ä¹Ÿæ˜¯è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­çš„ï¼Œè´Ÿè´£æ›´é«˜æ•ˆå’Œé¡ºç•…çš„æ¸²æŸ“é¡µé¢ã€‚</p>\n<p>æ¸²æŸ“è¿›ç¨‹æœ€é‡è¦çš„å·¥ä½œå°±æ˜¯å°†HTMLã€CSSå’ŒJavascriptä»£ç è½¬æ¢æˆä¸€ä¸ªå¯ä»¥ä¸ç”¨æˆ·äº§ç”Ÿäº¤äº’çš„é¡µé¢ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/bd/bdfa66a4ef1fbd2805797bc4cd90f8d8.png\" alt=\"img\"></p>\n<h3 id=\"è§£æè¿‡ç¨‹\"><a href=\"#è§£æè¿‡ç¨‹\" class=\"headerlink\" title=\"è§£æè¿‡ç¨‹\"></a>è§£æè¿‡ç¨‹</h3><p>ä¸‹é¢çš„ç« èŠ‚ä¸»è¦ä»‹ç»æ¸²æŸ“è¿›ç¨‹å¦‚ä½•å°†ä»ç½‘ç»œçº¿ç¨‹ä¸­è·å–çš„æ–‡æœ¬è½¬åŒ–æˆå›¾åƒçš„è¿‡ç¨‹ã€‚</p>\n<h4 id=\"DOMçš„åˆ›å»º\"><a href=\"#DOMçš„åˆ›å»º\" class=\"headerlink\" title=\"DOMçš„åˆ›å»º\"></a>DOMçš„åˆ›å»º</h4><p>å½“æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°æ¥è‡ªæµè§ˆå™¨è¿›ç¨‹æäº¤è®¿é—®çš„æ¶ˆæ¯åå°±å¼€å§‹æ¥å—HTMLæ•°æ®ï¼Œä¸»çº¿ç¨‹å¼€å§‹è§£æHTMLæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å°†å…¶è½¬åŒ–æˆ<strong>Document Object Modelï¼ˆDOMï¼‰</strong>ã€‚</p>\n<p>DOMæ˜¯ä¸€ç§æµè§ˆå™¨å†…éƒ¨ç”¨äºè¡¨è¾¾é¡µé¢ç»“æ„çš„æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿä¸ºWebå¼€å‘è€…æä¾›äº†æ“ä½œé¡µé¢å…ƒç´ çš„æ¥å£ï¼Œè®©webå¼€å‘è€…å¯ä»¥åœ¨Javascriptä»£ç ä¸­è·å–å’Œæ“ä½œé¡µé¢ä¸­çš„å…ƒç´ ã€‚</p>\n<p>å°†HTMLæ–‡æœ¬è½¬åŒ–æˆDOMçš„æ ‡å‡†è¢«<a href=\"https://html.spec.whatwg.org/\">HTML Standard</a>å®šä¹‰ã€‚æˆ‘ä»¬ä¼šå‘ç°åœ¨è½¬åŒ–è¿‡ç¨‹ä¸­æµè§ˆå™¨ä»æ¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç±»ä¼¼å…³é—­æ ‡ç­¾çš„ä¸¢å¤±ï¼Œå¼€å§‹ã€å…³é—­æ ‡ç­¾åŒ¹é…é”™è¯¯ç­‰ç­‰ã€‚è¿™æ˜¯å› ä¸ºHTMLæ ‡å‡†ä¸­å®šä¹‰äº†è¦é™é»˜çš„å¤„ç†è¿™äº›é”™è¯¯ï¼Œå¦‚æœå¯¹æ­¤æ„Ÿå…´è¶£å¯ä»¥é˜…è¯»<a href=\"https://html.spec.whatwg.org/multipage/parsing.html#an-introduction-to-error-handling-and-strange-cases-in-the-parser\">An introduction to error handling and strange cases in the parser</a>ã€‚</p>\n<h4 id=\"é¢å¤–èµ„æºçš„åŠ è½½\"><a href=\"#é¢å¤–èµ„æºçš„åŠ è½½\" class=\"headerlink\" title=\"é¢å¤–èµ„æºçš„åŠ è½½\"></a>é¢å¤–èµ„æºçš„åŠ è½½</h4><p>ä¸€ä¸ªç½‘ç«™é€šå¸¸è¿˜ä¼šä½¿ç”¨ç±»ä¼¼å›¾ç‰‡ï¼Œæ ·å¼æ–‡ä»¶å’ŒJavaScriptä»£ç ç­‰é¢å¤–çš„èµ„æºã€‚è¿™äº›èµ„æºä¹Ÿéœ€è¦ä»ç½‘ç»œæˆ–ç¼“å­˜ä¸­è·å–ã€‚ä¸»çº¿ç¨‹åœ¨è½¬åŒ–HTMLçš„è¿‡ç¨‹ä¸­ç†åº”æŒ¨ä¸ªåŠ è½½å®ƒä»¬ï¼Œä½†æ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œé¢„åŠ è½½æ‰«æï¼ˆPreload Scannerï¼‰ä¸è½¬æ¢è¿‡ç¨‹ä¼šåŒæ—¶è¿è¡Œç€ã€‚å½“é¢„åŠ è½½æ‰«æåœ¨åˆ†æå™¨åˆ†æHTMLè¿‡ç¨‹ä¸­å‘ç°äº†ç±»ä¼¼imgæˆ–linkè¿™æ ·çš„æ ‡ç­¾æ—¶ï¼Œå°±ä¼šå‘é€è¯·æ±‚ç»™æµè§ˆå™¨è¿›ç¨‹çš„ç½‘ç»œçº¿ç¨‹ï¼Œè€Œä¸»çº¿ç¨‹ä¼šæ ¹æ®è¿™äº›é¢å¤–èµ„æºæ˜¯å¦ä¼šé˜»å¡è½¬åŒ–è¿‡ç¨‹è€Œå†³å®šæ˜¯å¦ç­‰å¾…èµ„æºåŠ è½½å®Œæ¯•ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/fa/fa689d6a31b8687522c58774c8d9d064.png\" alt=\"img\"></p>\n<h4 id=\"JavaScriptä¼šé˜»å¡è½¬åŒ–è¿‡ç¨‹\"><a href=\"#JavaScriptä¼šé˜»å¡è½¬åŒ–è¿‡ç¨‹\" class=\"headerlink\" title=\"JavaScriptä¼šé˜»å¡è½¬åŒ–è¿‡ç¨‹\"></a>JavaScriptä¼šé˜»å¡è½¬åŒ–è¿‡ç¨‹</h4><p>å½“HTMLåˆ†æå™¨å‘ç°<code>&lt;script&gt;</code>æ ‡ç­¾æ—¶ï¼Œä¼šæš‚åœæ¥ä¸‹æ¥çš„HTMLè½¬åŒ–å·¥ä½œï¼Œç„¶ååŠ è½½ã€è§£æå¹¶ä¸”è¿è¡ŒJavascriptä»£ç ã€‚å› ä¸ºåœ¨Javascriptä»£ç ä¸­å¯èƒ½ä¼šä½¿ç”¨ç±»ä¼¼<code>document.write</code>è¿™æ ·çš„APIå»æ”¹å˜DOMçš„ç»“æ„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆHTMLåˆ†æå™¨å¿…é¡»ç­‰å¾…Javascriptä»£ç è¿è¡Œç»“æŸæ‰èƒ½ç»§ç»­åˆ†æçš„åŸå› ã€‚</p>\n<h4 id=\"å‘Šè¯‰æµè§ˆå™¨è¦å¦‚ä½•åŠ è½½èµ„æº\"><a href=\"#å‘Šè¯‰æµè§ˆå™¨è¦å¦‚ä½•åŠ è½½èµ„æº\" class=\"headerlink\" title=\"å‘Šè¯‰æµè§ˆå™¨è¦å¦‚ä½•åŠ è½½èµ„æº\"></a>å‘Šè¯‰æµè§ˆå™¨è¦å¦‚ä½•åŠ è½½èµ„æº</h4><p>å¦‚æœæˆ‘ä»¬çš„Javascriptä»£ç å¹¶ä¸éœ€è¦æ”¹å˜DOMï¼Œå¯ä»¥ä¸º<code>&lt;script&gt;</code>æ ‡ç­¾æ·»åŠ <code>async</code>æˆ–<code>defer</code>å±æ€§ï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¼šå¼‚æ­¥çš„åŠ è½½è¿™äº›èµ„æºå¹¶ä¸”ä¸ä¼šé˜»å¡HTMLè½¬åŒ–è¿‡ç¨‹ã€‚<strong>å¦‚æœscriptæ ‡ç­¾æ˜¯ç”±JavaScriptä»£ç åˆ›å»ºçš„ï¼Œæ ‡ç­¾çš„asyncå±æ€§ä¼šé»˜è®¤ä¸ºtrueã€‚</strong>åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›é¢„åŠ è½½æŠ€æœ¯ï¼Œæ¯”å¦‚<code>&lt;link ref=&quot;preload&quot;&gt;</code>æ¥é€šçŸ¥æµè§ˆå™¨è¿™äº›èµ„æºéœ€è¦è¶Šå¿«ä¸‹è½½è¶Šå¥½ã€‚</p>\n<h4 id=\"æ ·å¼è®¡ç®—ï¼ˆStyle-calculationï¼‰\"><a href=\"#æ ·å¼è®¡ç®—ï¼ˆStyle-calculationï¼‰\" class=\"headerlink\" title=\"æ ·å¼è®¡ç®—ï¼ˆStyle calculationï¼‰\"></a>æ ·å¼è®¡ç®—ï¼ˆStyle calculationï¼‰</h4><p>å¯¹äºå±•ç¤ºä¸€ä¸ªé¡µé¢ï¼Œå…‰æœ‰DOMæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦æ ·å¼æ¥è®©é¡µé¢å˜å¾—æ›´ç¾è§‚ã€‚ä¸»çº¿ç¨‹ä¼šè§£ææ ·å¼ï¼ˆCSSï¼‰å¹¶å†³å®šæ¯ä¸ªDOMå…ƒç´ çš„æ ·å¼ã€‚è¿™äº›æ ·å¼å–å†³äºCSSé€‰æ‹©å™¨çš„èŒƒå›´ï¼Œåœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›ä¿¡æ¯ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/fb/fb7d195814a04c6ed98eab8dbda477c6.png\" alt=\"img\"></p>\n<p>å³ä½¿æˆ‘ä»¬æ²¡æœ‰ç»™DOMæŒ‡å®šä»»ä½•çš„æ ·å¼ï¼Œ<code>&lt;h1&gt;</code>æ ‡ç­¾ä¹Ÿä¼šæ¯”<code>&lt;h2&gt;</code>æ ‡ç­¾æ˜¾ç¤ºçš„å¤§ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨ä¸ºä¸åŒçš„æ ‡ç­¾å†…ç½®äº†ä¸åŒçš„æ ·å¼ã€‚å¯ä»¥é€šè¿‡<a href=\"https://source.chromium.org/chromium/chromium/src/+/master:third_party/blink/renderer/core/html/resources/html.css\">Chromiumæºä»£ç </a>å¾—åˆ°è¿™äº›é»˜è®¤æ ·å¼ã€‚</p>\n<h4 id=\"å¸ƒå±€ï¼ˆlayoutï¼‰\"><a href=\"#å¸ƒå±€ï¼ˆlayoutï¼‰\" class=\"headerlink\" title=\"å¸ƒå±€ï¼ˆlayoutï¼‰\"></a>å¸ƒå±€ï¼ˆlayoutï¼‰</h4><p>å®Œæˆäº†æ ·å¼è®¡ç®—å·¥ä½œåï¼Œæ¸²æŸ“è¿›ç¨‹å·²ç»çŸ¥é“äº†DOMçš„ç»“æ„å’Œæ¯ä¸ªèŠ‚ç‚¹çš„æ ·å¼ï¼Œä½†æ˜¯ä¾ç„¶ä¸è¶³ä»¥æ¸²æŸ“ä¸€ä¸ªé¡µé¢ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œè®©ä½ åœ¨ç”µè¯ä¸­å‘æœ‹å‹æè¿°ä¸€å¼ å›¾ï¼šâ€œå›¾ä¸­æœ‰ä¸€ä¸ªå¤§çº¢è‰²åœ†å’Œä¸€ä¸ªå°çš„ã€è“è‰²çš„æ–¹å—â€æ˜¯ä¸è¶³ä»¥è®©æœ‹å‹çŸ¥é“è¿™å¼ å›¾åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/06/0658494542e14f7db66b913c02c03202.png\" alt=\"img\"></p>\n<p>å¸ƒå±€æ˜¯ä¸ºå…ƒç´ æŒ‡å®šå‡ ä½•ä¿¡æ¯çš„è¿‡ç¨‹ã€‚ä¸»çº¿ç¨‹éå†DOMç»“æ„ä¸­çš„å…ƒç´ åŠå…¶æ ·å¼ï¼ŒåŒæ—¶åˆ›å»ºå‡ºå¸¦æœ‰åæ ‡å’Œå…ƒç´ å°ºå¯¸ä¿¡æ¯çš„å¸ƒå±€æ ‘ï¼ˆLayout treeï¼‰ã€‚å¸ƒå±€æ ‘çš„ç»“æ„ä¸DOMæ ‘çš„ç»“æ„ååˆ†ç›¸ä¼¼ï¼Œä½†åªåŒ…å«å°†ä¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤ºçš„å…ƒç´ ã€‚<strong>å½“ä¸€ä¸ªå…ƒç´ çš„æ ·å¼è¢«è®¾ç½®æˆdisplay: noneæ—¶ï¼Œå…ƒç´ å°±ä¸ä¼šå‡ºç°åœ¨å¸ƒå±€æ ‘ä¸­ï¼Œä½†é‚£äº›æ ·å¼è¢«è®¾ç½®æˆvisiblilityï¼šhiddençš„å…ƒç´ ä¼šå‡ºç°åœ¨å¸ƒå±€æ ‘ä¸­ã€‚</strong>ç›¸ä¼¼çš„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåŒ…å«å†…å®¹çš„ä¼ªå…ƒç´ ï¼ˆä¾‹å¦‚<code>p::before &#123; content: &#39;Hi!&#39; &#125;</code>ï¼‰æ—¶ï¼Œå…ƒç´ ä¼šå‡ºç°åœ¨å¸ƒå±€æ ‘ä¸­å³ä½¿è¿™ä¸ªå…ƒç´ ä¸å­˜åœ¨äºDOMæ ‘ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬<strong>ä½¿ç”¨DOMæä¾›çš„APIæ— æ³•è·å–ä¼ªå…ƒç´ </strong>çš„åŸå› ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/0c/0c1de85206f0d177f93a70931a0f8272.png\" alt=\"img\"></p>\n<p>æè¿°é¡µé¢å¸ƒå±€ä¿¡æ¯æ˜¯ä¸€é¡¹å…·æœ‰æŒ‘æˆ˜æ€§çš„å·¥ä½œï¼Œå³ä½¿åœ¨åªæœ‰å—å…ƒç´ çš„é¡µé¢ä¸­ä¹Ÿå¿…é¡»è¦è€ƒè™‘å­—ä½“çš„å¤§å°å’Œåœ¨å“ªé‡Œæ¢è¡Œï¼Œå› ä¸ºåœ¨è®¡ç®—ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®æ—¶éœ€è¦çŸ¥é“ä¸Šä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸å’Œå½¢çŠ¶ã€‚</p>\n<p>CSSå¯ä»¥è®©å…ƒç´ æµ®åŠ¨ã€å¯ä»¥è®©å…ƒç´ åœ¨çˆ¶å…ƒç´ ä¸­æº¢å‡ºï¼Œå¯ä»¥æ”¹å˜æ–‡å­—çš„æ–¹å‘ã€‚å¯ä»¥æƒ³è±¡ï¼Œåœ¨å¸ƒå±€è¿™ä¸ªé˜¶æ®µæ˜¯å¤šä¹ˆç¹é‡çš„å·¥ä½œã€‚åœ¨Chromeä¸­ï¼Œæœ‰ä¸€æ•´ä¸ªå›¢é˜Ÿåœ¨ç»´æŠ¤å¸ƒå±€å·¥ä½œï¼Œæ›´è¯¦ç»†çš„ä¿¡æ¯å¯ä»¥è§‚çœ‹<a href=\"https://www.youtube.com/watch?v=Y5Xa4H2wtVA\">è§†é¢‘</a>ã€‚</p>\n<h4 id=\"ç»˜åˆ¶ï¼ˆPaintï¼‰\"><a href=\"#ç»˜åˆ¶ï¼ˆPaintï¼‰\" class=\"headerlink\" title=\"ç»˜åˆ¶ï¼ˆPaintï¼‰\"></a>ç»˜åˆ¶ï¼ˆPaintï¼‰</h4><p><img data-src=\"https://static001.geekbang.org/infoq/d8/d8fe81b968531c8b3d4767006ea9725d.png\" alt=\"img\"></p>\n<p>æœ‰äº†DOMã€æ ·å¼å’Œå¸ƒå±€è¿˜æ˜¯æ— æ³•å®Œæˆæ¸²æŸ“å·¥ä½œã€‚è¯•æƒ³ï¼Œå½“æˆ‘ä»¬è¯•å›¾å¤åˆ¶ä¸€å¼ å›¾ç”»ã€‚æˆ‘ä»¬çŸ¥é“å›¾ç”»ä¸­å…ƒç´ çš„å°ºå¯¸ã€å½¢çŠ¶å’Œä½ç½®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ç»˜åˆ¶è¿™äº›å…ƒç´ çš„é¡ºåºã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªå…ƒç´ z-indexå±æ€§è¢«è®¾ç½®åï¼Œç»˜åˆ¶çš„é¡ºåºä¼šå¯¼è‡´æ¸²æŸ“æˆé”™è¯¯çš„ç»“æœã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/11/116fb1ec64e618a7562788911bca8d75.png\" alt=\"img\"></p>\n<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä¸»çº¿ç¨‹éå†å¸ƒå±€æ ‘å¹¶åˆ›å»ºç»˜åˆ¶è®°å½•ï¼Œç»˜åˆ¶è®°å½•æ˜¯ä¸€ç³»åˆ—ç”±ç»˜åˆ¶æ­¥éª¤ç»„æˆçš„æµç¨‹ï¼Œä¾‹å¦‚å…ˆç»˜åˆ¶èƒŒæ™¯ï¼Œç„¶åæ˜¯æ–‡å­—ï¼Œç„¶åæ˜¯å½¢çŠ¶ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/a6/a68fd128fc59b9b2bed3511fcf223c94.png\" alt=\"img\"></p>\n<h4 id=\"æ¸²æŸ“è¿‡ç¨‹æ˜¯æ˜‚è´µçš„\"><a href=\"#æ¸²æŸ“è¿‡ç¨‹æ˜¯æ˜‚è´µçš„\" class=\"headerlink\" title=\"æ¸²æŸ“è¿‡ç¨‹æ˜¯æ˜‚è´µçš„\"></a>æ¸²æŸ“è¿‡ç¨‹æ˜¯æ˜‚è´µçš„</h4><p>åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä»»ä½•ä¸€ä¸ªæ­¥éª¤ä¸­äº§ç”Ÿçš„æ•°æ®å˜åŒ–éƒ½ä¼šå¼•èµ·åç»­ä¸€ç³»åˆ—çš„çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå½“å¸ƒå±€æ ‘æ”¹å˜æ—¶ï¼Œç»˜åˆ¶éœ€è¦é‡æ„é¡µé¢ä¸­å˜åŒ–çš„éƒ¨åˆ†ã€‚</p>\n<p>å½“ä¸€äº›å…ƒç´ æœ‰åŠ¨ç”»å‘ç”Ÿæ—¶ï¼Œæµè§ˆå™¨éœ€è¦åœ¨æ¯ä¸€å¸§ä¸­ç»˜åˆ¶è¿™äº›å…ƒç´ ã€‚å½“æ— æ³•ä¿è¯æ¯ä¸€å¸§ç»˜åˆ¶çš„è¿ç»­æ€§æ—¶ï¼Œç”¨æˆ·å°±ä¼šæ„Ÿè§‰åˆ°å¡é¡¿ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/54/54a9da693ebba8579317ff57be2993ea.png\" alt=\"img\"></p>\n<p>æ­£å¸¸æƒ…å†µä¸‹æ¸²æŸ“æ“ä½œå¯ä»¥ä¸å±å¹•åˆ·æ–°ä¿æŒåŒæ­¥ï¼Œä½†ç”±äºè¿™äº›æ“ä½œè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œä¹Ÿå°±æ„å‘³è¿™äº›æ“ä½œå¯èƒ½è¢«æ­£åœ¨è¿è¡Œçš„Javascriptä»£ç æ‰€é˜»å¡ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/6b/6bd8886a8c2b26a72105c7a2fba7bf3a.png\" alt=\"img\"></p>\n<p>ä¸ºäº†ä¸å½±å“æ¸²æŸ“æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†Javascriptæ“ä½œä¼˜åŒ–æˆå°å—ï¼Œç„¶åä½¿ç”¨<code>requestAnimationFrame()</code>ï¼Œå…³äºå¦‚ä½•ä¼˜åŒ–å¯ä»¥å‚è€ƒ<a href=\"https://developers.google.com/web/fundamentals/performance/rendering/optimize-javascript-execution\">Optimize JavaScript Exectuion</a>ã€‚å½“éœ€è¦å¤§é‡è®¡ç®—æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Workeræ¥é¿å…é˜»å¡ä¸»è¿›ç¨‹ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/45/45d6db6a394174c914eb37e13743f94d.png\" alt=\"img\"></p>\n<h4 id=\"åˆæˆï¼ˆCompositingï¼‰\"><a href=\"#åˆæˆï¼ˆCompositingï¼‰\" class=\"headerlink\" title=\"åˆæˆï¼ˆCompositingï¼‰\"></a>åˆæˆï¼ˆCompositingï¼‰</h4><p>ç°åœ¨ï¼Œæµè§ˆå™¨å·²ç»çŸ¥é“äº†æ–‡æ¡£ç»“æ„ã€æ¯ä¸€ä¸ªå…ƒç´ çš„æ ·å¼ï¼Œå…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼Œç»˜åˆ¶çš„é¡ºåºã€‚å°†è¿™äº›ä¿¡æ¯è½¬åŒ–æˆå±å¹•ä¸Šåƒç´ çš„è¿‡ç¨‹å«åšå…‰æ …åŒ–ï¼Œå…‰æ …åŒ–æ˜¯å›¾å½¢å­¦çš„èŒƒç•´ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/9e/9ed512afc63c664458faf1bd42247cc0.gif\" alt=\"img\"></p>\n<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯å°†å¯è§†åŒºåŸŸçš„å†…å®¹è¿›è¡Œå…‰æ …åŒ–ã€‚éšç€ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œä¸æ–­çš„å…‰æ …åŒ–æ›´å¤šçš„åŒºåŸŸã€‚ç„¶è€Œå¯¹äºç°ä»£æµè§ˆå™¨ï¼Œæœ‰ç€æ›´å¤æ‚çš„çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°åšåˆæˆã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/ae/ae1b6d19e8aeb45841f04bbfa72760dd.gif\" alt=\"img\"></p>\n<p>åˆæˆæ˜¯ä¸€ç§å°†é¡µé¢æ‹†åˆ†æˆå¤šå±‚çš„æŠ€æœ¯ï¼Œåˆæˆçº¿ç¨‹å¯ä»¥å°†å„ä¸ªå±‚åœ¨ä¸åŒçº¿ç¨‹ä¸­å…‰æ …åŒ–ï¼Œå†ç»„åˆæˆä¸€ä¸ªé¡µé¢ã€‚å½“æ»šåŠ¨æ—¶ï¼Œå¦‚æœå±‚å·²ç»è¢«å…‰æ …åŒ–ï¼Œåˆ™ä¼šä½¿ç”¨å·²ç»å­˜åœ¨çš„å±‚åˆæˆæ–°çš„å¸§ï¼ŒåŠ¨ç”»åˆ™å¯ä»¥é€šè¿‡ç§»åŠ¨å±‚æ¥å®ç°ã€‚</p>\n<p>ï»¿</p>\n<h4 id=\"å±‚ï¼ˆLayerï¼‰\"><a href=\"#å±‚ï¼ˆLayerï¼‰\" class=\"headerlink\" title=\"å±‚ï¼ˆLayerï¼‰\"></a>å±‚ï¼ˆLayerï¼‰</h4><p>ï»¿</p>\n<p>ä¸ºäº†å†³å®šå±‚åŒ…å«å“ªäº›å…ƒç´ ï¼Œä¸»çº¿ç¨‹éœ€è¦éå†å¸ƒå±€æ ‘ä»¥æ‰¾åˆ°éœ€è¦ç”Ÿæˆçš„éƒ¨åˆ†ã€‚å¯¹å¼€å‘è€…æ¥è¯´ï¼Œå½“æŸä¸€éƒ¨åˆ†éœ€è¦ç”¨ç‹¬ç«‹çš„å±‚æ¸²æŸ“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨csså±æ€§<code>will-change</code>è®©æµè§ˆå™¨åˆ›å»ºå±‚ï¼Œå…³äºæµè§ˆå™¨å¦‚ä½•ç”Ÿæˆå±‚çš„æ ‡å‡†å¯è‡ªè¡ŒæŸ¥é˜…ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/b0/b08901dee7af151982f600e6a7a6ba43.png\" alt=\"img\"></p>\n<p>layer.png</p>\n<p>è™½ç„¶é€šè¿‡åˆ†å±‚å¯ä»¥ä¼˜åŒ–æµè§ˆå™¨æ€§èƒ½ï¼Œä½†å¹¶ä¸æ„å‘³ç€åº”è¯¥ç»™æ¯ä¸ªå…ƒç´ ä¸€ä¸ªå±‚ï¼Œè¿‡å¤šçš„å±‚åè€Œå½±å“æ€§èƒ½ï¼Œæ‰€ä»¥åœ¨å±‚çš„åˆ’åˆ†ä¸Šåº”è¯¥å…·ä½“å½¢å†µå…·ä½“åˆ†æã€‚</p>\n<p>ï»¿</p>\n<h4 id=\"æ …æ ¼çº¿ç¨‹ä¸åˆæˆçº¿ç¨‹\"><a href=\"#æ …æ ¼çº¿ç¨‹ä¸åˆæˆçº¿ç¨‹\" class=\"headerlink\" title=\"æ …æ ¼çº¿ç¨‹ä¸åˆæˆçº¿ç¨‹\"></a>æ …æ ¼çº¿ç¨‹ä¸åˆæˆçº¿ç¨‹</h4><p>å½“å¸ƒå±€æ ‘å’Œç»˜åˆ¶é¡ºåºç¡®å®šä»¥åï¼Œä¸»çº¿ç¨‹ä¼šå°†è¿™äº›ä¿¡æ¯æäº¤ç»™åˆæˆçº¿ç¨‹ã€‚åˆæˆçº¿ç¨‹ä¼šå…‰æ …åŒ–å„ä¸ªå±‚ã€‚ä¸€ä¸ªå±‚åŒ…å«çš„å†…å®¹å¯èƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡µé¢ï¼Œä¹Ÿå¯èƒ½æ˜¯é¡µé¢çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥åˆæˆçº¿ç¨‹å°†å±‚æ‹†åˆ†æˆè®¸å¤šå—ï¼Œå¹¶å°†å®ƒä»¬å‘é€ç»™æ …æ ¼çº¿ç¨‹ã€‚æ …æ ¼çº¿ç¨‹å…‰æ …åŒ–è¿™äº›å—å¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨GPUç¼“å­˜ä¸­ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/37/371b5fa654d59f0c8ccb2f4f0658c20a.png\" alt=\"img\"></p>\n<p>åˆæˆçº¿ç¨‹å¯ä»¥å†³å®šæ …æ ¼çº¿ç¨‹å…‰æ …å—çš„ä¼˜å…ˆçº§ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·èƒ½çœ‹åˆ°çš„éƒ¨åˆ†å¯ä»¥å…ˆè¢«å…‰æ …åŒ–ã€‚ä¸€ä¸ªå±‚ä¹Ÿä¼šåŒ…å«å¤šç§å—ä»¥æ”¯æŒç±»ä¼¼ç¼©æ”¾è¿™æ ·çš„åŠŸèƒ½ã€‚</p>\n<p>å½“å—è¢«å…‰æ …åŒ–åï¼Œåˆæˆçº¿ç¨‹ä¼šä½¿ç”¨draw quadsæ”¶é›†è¿™äº›ä¿¡æ¯å¹¶åˆ›å»ºåˆæˆå¸§ï¼ˆCompositor frameï¼‰ã€‚</p>\n<h4 id=\"Draw-quads\"><a href=\"#Draw-quads\" class=\"headerlink\" title=\"Draw quads\"></a>Draw quads</h4><p>å­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼ŒåŒ…å«ç±»ä¼¼å—ä½ç½®è¿™æ ·çš„ä¿¡æ¯ï¼Œç”¨äºæè¿°å¦‚ä½•ä½¿ç”¨å—åˆæˆé¡µé¢ã€‚</p>\n<h4 id=\"Compositor-frame\"><a href=\"#Compositor-frame\" class=\"headerlink\" title=\"Compositor frame\"></a>Compositor frame</h4><p>ç”¨äºå­˜å‚¨è¡¨ç°é¡µé¢ä¸€å¸§ä¸­åŒ…å«å“ªäº›Draw quadsçš„é›†åˆã€‚</p>\n<p>ç„¶åä¸€ä¸ªåˆæˆå¸§è¢«æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ã€‚è¿™æ—¶å¦‚æœæµè§ˆå™¨UIæœ‰å˜åŒ–ï¼Œæˆ–è€…æ’ä»¶çš„UIæœ‰å˜åŒ–æ—¶ï¼Œå¦ä¸€ä¸ªåˆæˆå¸§å°±ä¼šè¢«åˆ›å»ºå‡ºæ¥ã€‚æ‰€ä»¥æ¯å½“æœ‰äº¤äº’å‘ç”Ÿæ—¶ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šåˆ›å»ºæ›´å¤šçš„åˆæˆå¸§ç„¶åé€šè¿‡GPUå°†æ–°çš„éƒ¨åˆ†æ¸²æŸ“å‡ºæ¥ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/39/397d4949099dd6d1aaffcb55e8678e37.png\" alt=\"img\"></p>\n<p>åˆæˆçš„å¥½å¤„åœ¨äºå…¶ç‹¬ç«‹äºä¸»çº¿ç¨‹ã€‚åˆæˆçº¿ç¨‹ä¸éœ€è¦ç­‰å¾…æ ·å¼è®¡ç®—å’ŒJavascriptä»£ç çš„è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåˆæˆæ›´é€‚åˆä¼˜åŒ–äº¤äº’æ€§èƒ½ï¼Œä½†å¦‚æœå¸ƒå±€æˆ–è€…ç»˜åˆ¶éœ€è¦é‡æ–°è®¡ç®—åˆ™ä¸»çº¿ç¨‹æ˜¯å¿…é¡»è¦å‚ä¸çš„ã€‚</p>\n<p>ï»¿</p>\n<p>æœ¬è´¨ä¸Šï¼Œæµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹å°±æ˜¯å°†æ–‡æœ¬è½¬æ¢æˆå›¾åƒçš„è¿‡ç¨‹ï¼Œè€Œå½“ç”¨æˆ·ä¸é¡µé¢å‘ç”Ÿäº¤äº’åŠ¨ä½œæ—¶ï¼Œåˆ™æ˜¾ç¤ºæ–°çš„å›¾åƒã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç”±æ¸²æŸ“è¿›ç¨‹ä¸­çš„ä¸»çº¿ç¨‹å®Œæˆè®¡ç®—å·¥ä½œï¼Œç”±åˆæˆçº¿ç¨‹å’Œæ …æ ¼çº¿ç¨‹å®Œæˆå›¾åƒçš„ç»˜åˆ¶å·¥ä½œã€‚è€Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œè¿˜æœ‰å¼ºåˆ¶å¸ƒå±€ã€é‡æ’ã€é‡ç»˜ç­‰æ›´åŠ ç»†èŠ‚çš„æ¦‚å¿µä¼šåœ¨åé¢çš„æ–‡ç« ä¸­åšè®²è§£ã€‚</p>\n<h3 id=\"ä»æµè§ˆå™¨çš„è§’åº¦çœ‹äº‹ä»¶\"><a href=\"#ä»æµè§ˆå™¨çš„è§’åº¦çœ‹äº‹ä»¶\" class=\"headerlink\" title=\"ä»æµè§ˆå™¨çš„è§’åº¦çœ‹äº‹ä»¶\"></a>ä»æµè§ˆå™¨çš„è§’åº¦çœ‹äº‹ä»¶</h3><p>å½“æˆ‘ä»¬å¬åˆ°äº‹ä»¶æ—¶ï¼Œé€šå¸¸ä¼šè”æƒ³åˆ°åœ¨ä¸€ä¸ªæ–‡æœ¬æ¡†ä¸­è¾“å…¥æˆ–è€…å•å‡»é¼ æ ‡ï¼Œä½†ä»æµè§ˆå™¨çš„è§’åº¦çœ‹ï¼Œè¾“å…¥äº‹ä»¶æ„å‘³ç€æ‰€æœ‰çš„ç”¨æˆ·åŠ¨ä½œã€‚é¼ æ ‡æ»šè½®æ»šåŠ¨æˆ–è€…å±å¹•è§¦æ‘¸éƒ½æ˜¯è¾“å…¥äº‹ä»¶ã€‚</p>\n<p>ï»¿</p>\n<p>å½“ç”¨æˆ·ä¸é¡µé¢å‘ç”Ÿäº¤äº’æ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹é¦–å…ˆæ¥æ”¶åˆ°äº‹ä»¶ï¼Œç„¶è€Œï¼Œæµè§ˆå™¨è¿›ç¨‹åªå…³å¿ƒäº‹ä»¶å‘ç”Ÿæ—¶æ˜¯åœ¨å“ªä¸ªé¡µç­¾ä¸­ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿›ç¨‹ä¼šå°†äº‹ä»¶ç±»å‹å’Œä½ç½®ä¿¡æ¯ç­‰å‘é€ç»™è´Ÿè´£å½“å‰é¡µç­¾çš„æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šæ°å½“çš„æ‰¾åˆ°äº‹ä»¶å‘ç”Ÿçš„å…ƒç´ å¹¶ä¸”è§¦å‘äº‹ä»¶ç›‘å¬å™¨ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/7f/7f8581ec78d48302c8ea81f713cdfa56.png\" alt=\"img\"></p>\n<h3 id=\"åˆæˆçº¿ç¨‹å¯¹äº‹ä»¶çš„å¤„ç†\"><a href=\"#åˆæˆçº¿ç¨‹å¯¹äº‹ä»¶çš„å¤„ç†\" class=\"headerlink\" title=\"åˆæˆçº¿ç¨‹å¯¹äº‹ä»¶çš„å¤„ç†\"></a>åˆæˆçº¿ç¨‹å¯¹äº‹ä»¶çš„å¤„ç†</h3><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†åˆæˆçº¿ç¨‹å¯ä»¥é€šè¿‡åˆæˆæŠ€æœ¯åˆæˆä¸åŒçš„å…‰æ …å±‚ä¼˜åŒ–æ€§èƒ½ï¼Œå¦‚æœé¡µé¢å¹¶ä¸ç›‘å¬ä»»ä½•äº‹ä»¶ï¼Œåˆæˆçº¿ç¨‹å¯ä»¥å®Œå…¨ç‹¬ç«‹äºä¸»çº¿ç¨‹ç”Ÿæˆæ–°çš„åˆæˆå¸§ã€‚ä½†å¦‚æœé¡µé¢ç›‘å¬äº†äº‹ä»¶å‘¢ï¼Ÿ</p>\n<h4 id=\"æ ‡è®°â€œæ…¢æ»šåŠ¨â€åŒºåŸŸ\"><a href=\"#æ ‡è®°â€œæ…¢æ»šåŠ¨â€åŒºåŸŸ\" class=\"headerlink\" title=\"æ ‡è®°â€œæ…¢æ»šåŠ¨â€åŒºåŸŸ\"></a>æ ‡è®°â€œæ…¢æ»šåŠ¨â€åŒºåŸŸ</h4><p>ç”±äºè¿è¡ŒJavascriptæ˜¯ä¸»çº¿ç¨‹çš„å·¥ä½œï¼Œå½“é¡µé¢è¢«åˆæˆçº¿ç¨‹åˆæˆè¿‡ï¼Œåˆæˆçº¿ç¨‹ä¼šæ ‡è®°é‚£äº›æœ‰äº‹ä»¶ç›‘å¬çš„åŒºåŸŸã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œå½“äº‹ä»¶å‘ç”Ÿåœ¨å“åº”çš„åŒºåŸŸæ—¶ï¼Œåˆæˆçº¿ç¨‹å°±ä¼šå°†äº‹ä»¶å‘é€ç»™ä¸»çº¿ç¨‹å¤„ç†ã€‚å¦‚æœåœ¨éäº‹ä»¶ç›‘å¬åŒºåŸŸï¼Œåˆ™æ¸²æŸ“è¿›ç¨‹ç›´æ¥åˆ›å»ºæ–°çš„å¸§è€Œä¸å…³å¿ƒä¸»çº¿ç¨‹ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/6f/6fda6b7355162ca393787e870630a083.png\" alt=\"img\"></p>\n<h4 id=\"åœ¨äº‹ä»¶ç›‘å¬æ—¶æ ‡è®°\"><a href=\"#åœ¨äº‹ä»¶ç›‘å¬æ—¶æ ‡è®°\" class=\"headerlink\" title=\"åœ¨äº‹ä»¶ç›‘å¬æ—¶æ ‡è®°\"></a>åœ¨äº‹ä»¶ç›‘å¬æ—¶æ ‡è®°</h4><p>åœ¨webå¼€å‘ä¸­å¸¸è§çš„æ–¹å¼å°±æ˜¯äº‹ä»¶ä»£ç†ã€‚åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç›®æ ‡å…ƒç´ çš„ä¸Šå±‚å…ƒç´ ä¸­ç›‘å¬äº‹ä»¶ã€‚å‚ç…§ä¸‹é¢çš„ä»£ç ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">document.body.addEventListener(&#39;touchstart&#39;, event &#x3D;&gt; &#123;</span><br><span class=\"line\">  if (event.target &#x3D;&#x3D;&#x3D; area) &#123;</span><br><span class=\"line\">    event.preventDefault();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ï»¿é€šè¿‡è¿™ç§å†™æ³•ï¼Œå¯ä»¥æ›´é«˜æ•ˆçš„ç›‘å¬äº‹ä»¶ã€‚ä½†å¦‚æœä»æµè§ˆå™¨çš„è§’åº¦çœ‹ï¼Œæ­¤æ—¶æ•´ä¸ªé¡µé¢ä¼šè¢«æ ‡è®°æˆâ€œæ…¢æ»šåŠ¨â€åŒºåŸŸã€‚è¿™æ„å‘³ç€è™½ç„¶é¡µé¢ä¸­çš„æŸäº›éƒ¨åˆ†å¹¶ä¸éœ€è¦äº‹ä»¶ç›‘å¬ï¼Œä½†åˆæˆçº¿ç¨‹ä¾ç„¶è¦åœ¨æ¯æ¬¡äº¤äº’å‘ç”Ÿåç­‰å¾…ä¸»çº¿ç¨‹å¤„ç†äº‹ä»¶ï¼Œåˆæˆçº¿ç¨‹çš„ä¼˜åŒ–æ•ˆæœä¸å¤å­˜åœ¨ã€‚</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/f2/f2e60c76e1cb2b104a46c0da8787d229.png\" alt=\"img\"></p>\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯åœ¨äº‹ä»¶ä»£ç†æ—¶ä¼ å…¥<code>passive: true</code><strong>ï¼ˆIEä¸æ”¯æŒï¼‰</strong>å‚æ•°ã€‚è¿™æ ·å‘Šè¯‰æ¸²æŸ“çº¿ç¨‹ï¼Œä¾ç„¶éœ€è¦å°†äº‹ä»¶å‘é€ç»™ä¸»çº¿ç¨‹å¤„ç†ï¼Œä½†ä¸éœ€è¦ç­‰å¾…ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">document.body.addEventListener(&#39;touchstart&#39;, event &#x3D;&gt; &#123;</span><br><span class=\"line\">    if (event.target &#x3D;&#x3D;&#x3D; area) &#123;</span><br><span class=\"line\">        event.preventDefault()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;, &#123;passive: true&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å…³äºä½¿ç”¨passiveæ”¹å–„æ»šå±æ€§èƒ½ï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#%E4%BD%BF%E7%94%A8_passive_%E6%94%B9%E5%96%84%E7%9A%84%E6%BB%9A%E5%B1%8F%E6%80%A7%E8%83%BD\">MDN ä½¿ç”¨passiveæ”¹å–„æ»šå±æ€§èƒ½</a>ã€‚</p>\n<h4 id=\"æŸ¥æ‰¾äº‹ä»¶ç›®æ ‡\"><a href=\"#æŸ¥æ‰¾äº‹ä»¶ç›®æ ‡\" class=\"headerlink\" title=\"æŸ¥æ‰¾äº‹ä»¶ç›®æ ‡\"></a>æŸ¥æ‰¾äº‹ä»¶ç›®æ ‡</h4><p><img data-src=\"https://static001.geekbang.org/infoq/0e/0eb159798080da4adc7ffb76cf184ffa.png\" alt=\"img\"></p>\n<p>å½“æ¸²æŸ“çº¿ç¨‹å°†äº‹ä»¶å‘é€ç»™ä¸»çº¿ç¨‹åï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ‰¾åˆ°äº‹ä»¶è§¦å‘çš„ç›®æ ‡ã€‚é€šè¿‡åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç»˜åˆ¶ä¿¡æ¯ï¼Œå¯ä»¥æ ¹æ®åæ ‡æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚</p>\n<h4 id=\"å‡å°‘å‘é€ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶æ•°é‡\"><a href=\"#å‡å°‘å‘é€ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶æ•°é‡\" class=\"headerlink\" title=\"å‡å°‘å‘é€ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶æ•°é‡\"></a>å‡å°‘å‘é€ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶æ•°é‡</h4><p>ä¸ºäº†ä¿è¯åŠ¨ç”»çš„é¡ºç•…ï¼Œéœ€è¦æ˜¾ç¤ºå™¨åœ¨æ¯ç§’åˆ·æ–°60æ¬¡ã€‚å¯¹äºå…¸å‹çš„è§¦æ‘¸äº‹ä»¶ç”±åˆæˆçº¿ç¨‹æäº¤ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶é¢‘ç‡å¯ä»¥è¾¾åˆ°æ¯ç§’60-120æ¬¡ï¼Œå¯¹äºå…¸å‹çš„é¼ æ ‡äº‹ä»¶æ¯ç§’ä¼šå‘é€100æ¬¡ã€‚äº‹ä»¶å‘é€çš„é¢‘ç‡é€šå¸¸æ¯”å±å¹•åˆ·æ–°é¢‘ç‡è¦é«˜ã€‚</p>\n<p>å¦‚æœç±»ä¼¼<code>touchmove</code>è¿™æ ·çš„äº‹ä»¶æ¯ç§’å‘ä¸»çº¿ç¨‹å‘é€120æ¬¡å¯èƒ½ä¼šé€ æˆä¸»çº¿ç¨‹æ‰§è¡Œæ—¶é—´è¿‡é•¿è€Œå½±å“æ€§èƒ½ã€‚</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/61/6101cc07df5e744efb2a88208f1d1e52.png\" alt=\"img\"></p>\n<p>ä¸ºäº†å‡å°‘å‘é€ç»™ä¸»çº¿ç¨‹çš„äº‹ä»¶æ•°é‡ï¼ŒChromeåˆå¹¶äº†è¿ç»­çš„äº‹ä»¶ã€‚ç±»ä¼¼<code>wheel</code>ï¼Œ<code>mousewheel</code>ï¼Œ<code>mousemove</code>ï¼Œ<code>pointermove</code>ï¼Œ<code>touchmove</code>è¿™æ ·çš„äº‹ä»¶ä¼šè¢«å»¶è¿Ÿåˆ°ä¸‹ä¸€æ¬¡<code>requestAnimationFrame</code>å‰è§¦å‘.</p>\n<p>ï»¿</p>\n<p><img data-src=\"https://static001.geekbang.org/infoq/53/53005a8114a736ca071a333946664ffd.png\" alt=\"img\"></p>\n<p>è€Œä»»ä½•çš„ç¦»æ•£äº‹ä»¶ï¼Œç±»ä¼¼<code>keydown</code>, <code>keyup</code>, <code>mouseup</code>, <code>mousedown</code>, <code>touchstart</code>å’Œ <code>touchend</code>éƒ½ä¼šç«‹å³è¢«å‘é€ç»™ä¸»çº¿ç¨‹å¤„ç†ã€‚</p>\n<h3 id=\"æ€»ç»“-3\"><a href=\"#æ€»ç»“-3\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ä»ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ ä¸­çš„ä¸€æ¬¡è¾“å…¥åˆ°é¡µé¢å›¾åƒçš„æ˜¾ç¤ºäº†è§£æµè§ˆå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™é‡Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ã€‚</p>\n<ul>\n<li>æµè§ˆå™¨è¿›ç¨‹åšä¸ºæœ€é‡è¦çš„è¿›ç¨‹è´Ÿè´£å¤§å¤šæ•°é¡µç­¾å¤–éƒ¨çš„å·¥ä½œï¼ŒåŒ…æ‹¬åœ°å€æ æ˜¾ç¤ºã€ç½‘ç»œè¯·æ±‚ã€é¡µç­¾çŠ¶æ€ç®¡ç†ç­‰ã€‚</li>\n<li>ä¸åŒçš„æ¸²æŸ“è¿›ç¨‹è´Ÿè´£ä¸åŒçš„ç«™ç‚¹æ¸²æŸ“å·¥ä½œï¼Œæ¸²æŸ“è¿›ç¨‹é—´å½¼æ­¤ç‹¬ç«‹ã€‚</li>\n<li>æ¸²æŸ“è¿›ç¨‹åœ¨æ¸²æŸ“é¡µé¢çš„è¿‡ç¨‹ä¸­ä¼šé€šè¿‡æµè§ˆå™¨è¿›ç¨‹è·å–ç«™ç‚¹èµ„æºï¼Œåªæœ‰å®‰å…¨çš„èµ„æºæ‰ä¼šè¢«æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°ã€‚</li>\n<li>æ¸²æŸ“è¿›ç¨‹ä¸­ä¸»çº¿ç¨‹è´Ÿè´£é™¤äº†å›¾åƒç”Ÿæˆå¤–ç»å¤§å¤šæ•°å·¥ä½œï¼Œå¦‚ä½•å‡å°‘ä¸»çº¿ç¨‹ä¸Šä»£ç çš„è¿è¡Œæ˜¯äº¤äº’æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ã€‚</li>\n<li>æ¸²æŸ“è¿›ç¨‹ä¸­çš„åˆæˆçº¿ç¨‹å’Œæ …æ ¼çº¿ç¨‹è´Ÿè´£å›¾åƒç”Ÿæˆï¼Œåˆ©ç”¨åˆ†å±‚æŠ€æœ¯å¯ä»¥ä¼˜åŒ–å›¾åƒç”Ÿæˆçš„æ•ˆç‡ã€‚</li>\n<li>å½“ç”¨æˆ·ä¸é¡µé¢å‘ç”Ÿäº¤äº’æ—¶ï¼Œäº‹ä»¶çš„ä¼ æ’­é€”å¾„ä»æµè§ˆå™¨è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹çš„åˆæˆçº¿ç¨‹å†æ ¹æ®äº‹ä»¶ç›‘å¬çš„åŒºåŸŸå†³å®šæ˜¯å¦è¦ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹çš„ä¸»çº¿ç¨‹å¤„ç†ã€‚</li>\n</ul>\n<h1 id=\"8-æµè§ˆå™¨çš„å·¥ä½œåŸç†\"><a href=\"#8-æµè§ˆå™¨çš„å·¥ä½œåŸç†\" class=\"headerlink\" title=\"ï»¿8.æµè§ˆå™¨çš„å·¥ä½œåŸç†\"></a>ï»¿8.æµè§ˆå™¨çš„å·¥ä½œåŸç†</h1><h2 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h2><p>æµè§ˆå™¨å¾ˆå¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿çš„è½¯ä»¶ã€‚åœ¨è¿™ç¯‡å…¥é—¨æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šä»‹ç»å®ƒä»¬çš„å¹•åå·¥ä½œåŸç†ã€‚æˆ‘ä»¬ä¼šäº†è§£åˆ°ï¼Œä»æ‚¨åœ¨åœ°å€æ è¾“å…¥ <code>google.com</code> ç›´åˆ°æ‚¨åœ¨æµè§ˆå™¨å±å¹•ä¸Šçœ‹åˆ° Google é¦–é¡µçš„æ•´ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†äº›ä»€ä¹ˆã€‚</p>\n<h3 id=\"æˆ‘ä»¬è¦è®¨è®ºçš„æµè§ˆå™¨\"><a href=\"#æˆ‘ä»¬è¦è®¨è®ºçš„æµè§ˆå™¨\" class=\"headerlink\" title=\"æˆ‘ä»¬è¦è®¨è®ºçš„æµè§ˆå™¨\"></a>æˆ‘ä»¬è¦è®¨è®ºçš„æµè§ˆå™¨</h3><p>ç›®å‰ä½¿ç”¨çš„ä¸»æµæµè§ˆå™¨æœ‰äº”ä¸ªï¼šInternet Explorerã€Firefoxã€Safariã€Chrome æµè§ˆå™¨å’Œ Operaã€‚æœ¬æ–‡ä¸­ä»¥å¼€æ”¾æºä»£ç æµè§ˆå™¨ä¸ºä¾‹ï¼Œå³ Firefoxã€Chrome æµè§ˆå™¨å’Œ Safariï¼ˆéƒ¨åˆ†å¼€æºï¼‰ã€‚æ ¹æ® <a href=\"http://gs.statcounter.com/\">StatCounter æµè§ˆå™¨ç»Ÿè®¡æ•°æ®</a>ï¼Œç›®å‰ï¼ˆ2011 å¹´ 8 æœˆï¼‰Firefoxã€Safari å’Œ Chrome æµè§ˆå™¨çš„æ€»å¸‚åœºå æœ‰ç‡å°†è¿‘ 60%ã€‚ç”±æ­¤å¯è§ï¼Œå¦‚ä»Šå¼€æ”¾æºä»£ç æµè§ˆå™¨åœ¨æµè§ˆå™¨å¸‚åœºä¸­å æ®äº†éå¸¸åšå®çš„éƒ¨åˆ†ã€‚</p>\n<h3 id=\"æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½\"><a href=\"#æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½\"></a>æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½</h3><p>æµè§ˆå™¨çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œåœ¨æµè§ˆå™¨çª—å£ä¸­å±•ç¤ºæ‚¨é€‰æ‹©çš„ç½‘ç»œèµ„æºã€‚è¿™é‡Œæ‰€è¯´çš„èµ„æºä¸€èˆ¬æ˜¯æŒ‡ HTML æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ˜¯ PDFã€å›¾ç‰‡æˆ–å…¶ä»–çš„ç±»å‹ã€‚èµ„æºçš„ä½ç½®ç”±ç”¨æˆ·ä½¿ç”¨ URIï¼ˆç»Ÿä¸€èµ„æºæ ‡ç¤ºç¬¦ï¼‰æŒ‡å®šã€‚</p>\n<p>æµè§ˆå™¨è§£é‡Šå¹¶æ˜¾ç¤º HTML æ–‡ä»¶çš„æ–¹å¼æ˜¯åœ¨ HTML å’Œ CSS è§„èŒƒä¸­æŒ‡å®šçš„ã€‚è¿™äº›è§„èŒƒç”±ç½‘ç»œæ ‡å‡†åŒ–ç»„ç»‡ W3Cï¼ˆä¸‡ç»´ç½‘è”ç›Ÿï¼‰è¿›è¡Œç»´æŠ¤ã€‚<br>å¤šå¹´ä»¥æ¥ï¼Œå„æµè§ˆå™¨éƒ½æ²¡æœ‰å®Œå…¨éµä»è¿™äº›è§„èŒƒï¼ŒåŒæ—¶è¿˜åœ¨å¼€å‘è‡ªå·±ç‹¬æœ‰çš„æ‰©å±•ç¨‹åºï¼Œè¿™ç»™ç½‘ç»œå¼€å‘äººå‘˜å¸¦æ¥äº†ä¸¥é‡çš„å…¼å®¹æ€§é—®é¢˜ã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°çš„æµè§ˆå™¨éƒ½æ˜¯æˆ–å¤šæˆ–å°‘åœ°éµä»è§„èŒƒã€‚</p>\n<p>æµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢æœ‰å¾ˆå¤šå½¼æ­¤ç›¸åŒçš„å…ƒç´ ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>ç”¨æ¥è¾“å…¥ URI çš„åœ°å€æ </li>\n<li>å‰è¿›å’Œåé€€æŒ‰é’®</li>\n<li>ä¹¦ç­¾è®¾ç½®é€‰é¡¹</li>\n<li>ç”¨äºåˆ·æ–°å’Œåœæ­¢åŠ è½½å½“å‰æ–‡æ¡£çš„åˆ·æ–°å’Œåœæ­¢æŒ‰é’®</li>\n<li>ç”¨äºè¿”å›ä¸»é¡µçš„ä¸»é¡µæŒ‰é’®</li>\n</ul>\n<p>å¥‡æ€ªçš„æ˜¯ï¼Œæµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢å¹¶æ²¡æœ‰ä»»ä½•æ­£å¼çš„è§„èŒƒï¼Œè¿™æ˜¯å¤šå¹´æ¥çš„æœ€ä½³å®è·µè‡ªç„¶å‘å±•ä»¥åŠå½¼æ­¤ä¹‹é—´ç›¸äº’æ¨¡ä»¿çš„ç»“æœã€‚HTML5 ä¹Ÿæ²¡æœ‰å®šä¹‰æµè§ˆå™¨å¿…é¡»å…·æœ‰çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œä½†åˆ—å‡ºäº†ä¸€äº›é€šç”¨çš„å…ƒç´ ï¼Œä¾‹å¦‚åœ°å€æ ã€çŠ¶æ€æ å’Œå·¥å…·æ ç­‰ã€‚å½“ç„¶ï¼Œå„æµè§ˆå™¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ Firefox çš„ä¸‹è½½ç®¡ç†å™¨ã€‚</p>\n<h3 id=\"æµè§ˆå™¨çš„é«˜å±‚ç»“æ„\"><a href=\"#æµè§ˆå™¨çš„é«˜å±‚ç»“æ„\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„é«˜å±‚ç»“æ„\"></a>æµè§ˆå™¨çš„é«˜å±‚ç»“æ„</h3><p>æµè§ˆå™¨çš„ä¸»è¦ç»„ä»¶ä¸º (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#1_1\">1.1</a>)ï¼š</p>\n<ol>\n<li><strong>ç”¨æˆ·ç•Œé¢</strong> - åŒ…æ‹¬åœ°å€æ ã€å‰è¿›/åé€€æŒ‰é’®ã€ä¹¦ç­¾èœå•ç­‰ã€‚é™¤äº†æµè§ˆå™¨ä¸»çª—å£æ˜¾ç¤ºçš„æ‚¨è¯·æ±‚çš„é¡µé¢å¤–ï¼Œå…¶ä»–æ˜¾ç¤ºçš„å„ä¸ªéƒ¨åˆ†éƒ½å±äºç”¨æˆ·ç•Œé¢ã€‚</li>\n<li><strong>æµè§ˆå™¨å¼•æ“</strong> - åœ¨ç”¨æˆ·ç•Œé¢å’Œå‘ˆç°å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚</li>\n<li><strong>å‘ˆç°å¼•æ“</strong> - è´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚å¦‚æœè¯·æ±‚çš„å†…å®¹æ˜¯ HTMLï¼Œå®ƒå°±è´Ÿè´£è§£æ HTML å’Œ CSS å†…å®¹ï¼Œå¹¶å°†è§£æåçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li>\n<li><strong>ç½‘ç»œ</strong> - ç”¨äºç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€‚å…¶æ¥å£ä¸å¹³å°æ— å…³ï¼Œå¹¶ä¸ºæ‰€æœ‰å¹³å°æä¾›åº•å±‚å®ç°ã€‚</li>\n<li><strong>ç”¨æˆ·ç•Œé¢åç«¯</strong> - ç”¨äºç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ï¼Œæ¯”å¦‚ç»„åˆæ¡†å’Œçª—å£ã€‚å…¶å…¬å¼€äº†ä¸å¹³å°æ— å…³çš„é€šç”¨æ¥å£ï¼Œè€Œåœ¨åº•å±‚ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ã€‚</li>\n<li><strong>JavaScript è§£é‡Šå™¨</strong>ã€‚ç”¨äºè§£æå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚</li>\n<li><strong>æ•°æ®å­˜å‚¨</strong>ã€‚è¿™æ˜¯æŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸Šä¿å­˜å„ç§æ•°æ®ï¼Œä¾‹å¦‚ Cookieã€‚æ–°çš„ HTML è§„èŒƒ (HTML5) å®šä¹‰äº†â€œç½‘ç»œæ•°æ®åº“â€ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ï¼ˆä½†æ˜¯è½»ä¾¿ï¼‰çš„æµè§ˆå™¨å†…æ•°æ®åº“ã€‚</li>\n</ol>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/layers.png\" alt=\"img\">å›¾ï¼šæµè§ˆå™¨çš„ä¸»è¦ç»„ä»¶ã€‚</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå’Œå¤§å¤šæ•°æµè§ˆå™¨ä¸åŒï¼ŒChrome æµè§ˆå™¨çš„æ¯ä¸ªæ ‡ç­¾é¡µéƒ½åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå‘ˆç°å¼•æ“å®ä¾‹ã€‚æ¯ä¸ªæ ‡ç­¾é¡µéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚</p>\n<h2 id=\"å‘ˆç°å¼•æ“\"><a href=\"#å‘ˆç°å¼•æ“\" class=\"headerlink\" title=\"å‘ˆç°å¼•æ“\"></a>å‘ˆç°å¼•æ“</h2><p>å‘ˆç°å¼•æ“çš„ä½œç”¨å˜›â€¦å½“ç„¶å°±æ˜¯â€œå‘ˆç°â€äº†ï¼Œä¹Ÿå°±æ˜¯åœ¨æµè§ˆå™¨çš„å±å¹•ä¸Šæ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ã€‚</p>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘ˆç°å¼•æ“å¯æ˜¾ç¤º HTML å’Œ XML æ–‡æ¡£ä¸å›¾ç‰‡ã€‚é€šè¿‡æ’ä»¶ï¼ˆæˆ–æµè§ˆå™¨æ‰©å±•ç¨‹åºï¼‰ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºå…¶ä»–ç±»å‹çš„å†…å®¹ï¼›ä¾‹å¦‚ï¼Œä½¿ç”¨ PDF æŸ¥çœ‹å™¨æ’ä»¶å°±èƒ½æ˜¾ç¤º PDF æ–‡æ¡£ã€‚ä½†æ˜¯åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é›†ä¸­ä»‹ç»å…¶ä¸»è¦ç”¨é€”ï¼šæ˜¾ç¤ºä½¿ç”¨ CSS æ ¼å¼åŒ–çš„ HTML å†…å®¹å’Œå›¾ç‰‡ã€‚</p>\n<h3 id=\"å‘ˆç°å¼•æ“-1\"><a href=\"#å‘ˆç°å¼•æ“-1\" class=\"headerlink\" title=\"å‘ˆç°å¼•æ“\"></a>å‘ˆç°å¼•æ“</h3><p>æœ¬æ–‡æ‰€è®¨è®ºçš„æµè§ˆå™¨ï¼ˆFirefoxã€Chrome æµè§ˆå™¨å’Œ Safariï¼‰æ˜¯åŸºäºä¸¤ç§å‘ˆç°å¼•æ“æ„å»ºçš„ã€‚Firefox ä½¿ç”¨çš„æ˜¯ Geckoï¼Œè¿™æ˜¯ Mozilla å…¬å¸â€œè‡ªåˆ¶â€çš„å‘ˆç°å¼•æ“ã€‚è€Œ Safari å’Œ Chrome æµè§ˆå™¨ä½¿ç”¨çš„éƒ½æ˜¯ WebKitã€‚</p>\n<p>WebKit æ˜¯ä¸€ç§å¼€æ”¾æºä»£ç å‘ˆç°å¼•æ“ï¼Œèµ·åˆç”¨äº Linux å¹³å°ï¼Œéšåç”± Apple å…¬å¸è¿›è¡Œä¿®æ”¹ï¼Œä»è€Œæ”¯æŒè‹¹æœæœºå’Œ Windowsã€‚æœ‰å…³è¯¦æƒ…ï¼Œè¯·å‚é˜… <a href=\"http://webkit.org/\">webkit.org</a>ã€‚</p>\n<h3 id=\"ä¸»æµç¨‹\"><a href=\"#ä¸»æµç¨‹\" class=\"headerlink\" title=\"ä¸»æµç¨‹\"></a>ä¸»æµç¨‹</h3><p>å‘ˆç°å¼•æ“ä¸€å¼€å§‹ä¼šä»ç½‘ç»œå±‚è·å–è¯·æ±‚æ–‡æ¡£çš„å†…å®¹ï¼Œå†…å®¹çš„å¤§å°ä¸€èˆ¬é™åˆ¶åœ¨ 8000 ä¸ªå—ä»¥å†…ã€‚</p>\n<p>ç„¶åè¿›è¡Œå¦‚ä¸‹æ‰€ç¤ºçš„åŸºæœ¬æµç¨‹ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/flow.png\" alt=\"img\">å›¾ï¼šå‘ˆç°å¼•æ“çš„åŸºæœ¬æµç¨‹ã€‚</p>\n<p>å‘ˆç°å¼•æ“å°†å¼€å§‹è§£æ HTML æ–‡æ¡£ï¼Œå¹¶å°†å„æ ‡è®°é€ä¸ªè½¬åŒ–æˆâ€œå†…å®¹æ ‘â€ä¸Šçš„ <a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#DOM\">DOM</a> èŠ‚ç‚¹ã€‚åŒæ—¶ä¹Ÿä¼šè§£æå¤–éƒ¨ CSS æ–‡ä»¶ä»¥åŠæ ·å¼å…ƒç´ ä¸­çš„æ ·å¼æ•°æ®ã€‚HTML ä¸­è¿™äº›å¸¦æœ‰è§†è§‰æŒ‡ä»¤çš„æ ·å¼ä¿¡æ¯å°†ç”¨äºåˆ›å»ºå¦ä¸€ä¸ªæ ‘ç»“æ„ï¼š<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#Render_tree_construction\">å‘ˆç°æ ‘</a>ã€‚</p>\n<p>å‘ˆç°æ ‘åŒ…å«å¤šä¸ªå¸¦æœ‰è§†è§‰å±æ€§ï¼ˆå¦‚é¢œè‰²å’Œå°ºå¯¸ï¼‰çš„çŸ©å½¢ã€‚è¿™äº›çŸ©å½¢çš„æ’åˆ—é¡ºåºå°±æ˜¯å®ƒä»¬å°†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„é¡ºåºã€‚</p>\n<p>å‘ˆç°æ ‘æ„å»ºå®Œæ¯•ä¹‹åï¼Œè¿›å…¥â€œ<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#layout\">å¸ƒå±€</a>â€å¤„ç†é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ªåº”å‡ºç°åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åæ ‡ã€‚ä¸‹ä¸€ä¸ªé˜¶æ®µæ˜¯<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#Painting\">ç»˜åˆ¶</a> - å‘ˆç°å¼•æ“ä¼šéå†å‘ˆç°æ ‘ï¼Œç”±ç”¨æˆ·ç•Œé¢åç«¯å±‚å°†æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶å‡ºæ¥ã€‚</p>\n<p>éœ€è¦ç€é‡æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ã€‚ä¸ºè¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå‘ˆç°å¼•æ“ä¼šåŠ›æ±‚å°½å¿«å°†å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚å®ƒä¸å¿…ç­‰åˆ°æ•´ä¸ª HTML æ–‡æ¡£è§£æå®Œæ¯•ä¹‹åï¼Œå°±ä¼šå¼€å§‹æ„å»ºå‘ˆç°æ ‘å’Œè®¾ç½®å¸ƒå±€ã€‚åœ¨ä¸æ–­æ¥æ”¶å’Œå¤„ç†æ¥è‡ªç½‘ç»œçš„å…¶ä½™å†…å®¹çš„åŒæ—¶ï¼Œå‘ˆç°å¼•æ“ä¼šå°†éƒ¨åˆ†å†…å®¹è§£æå¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<h4 id=\"ä¸»æµç¨‹ç¤ºä¾‹\"><a href=\"#ä¸»æµç¨‹ç¤ºä¾‹\" class=\"headerlink\" title=\"ä¸»æµç¨‹ç¤ºä¾‹\"></a>ä¸»æµç¨‹ç¤ºä¾‹</h4><p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/webkitflow.png\" alt=\"img\">å›¾ï¼šWebKit ä¸»æµç¨‹</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image008.jpg\" alt=\"img\">å›¾ï¼šMozilla çš„ Gecko å‘ˆç°å¼•æ“ä¸»æµç¨‹ (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#3_6\">3.6</a>)</p>\n<p>ä»å›¾ 3 å’Œå›¾ 4 å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ WebKit å’Œ Gecko ä½¿ç”¨çš„æœ¯è¯­ç•¥æœ‰ä¸åŒï¼Œä½†æ•´ä½“æµç¨‹æ˜¯åŸºæœ¬ç›¸åŒçš„ã€‚</p>\n<p>Gecko å°†è§†è§‰æ ¼å¼åŒ–å…ƒç´ ç»„æˆçš„æ ‘ç§°ä¸ºâ€œæ¡†æ¶æ ‘â€ã€‚æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ¡†æ¶ã€‚WebKit ä½¿ç”¨çš„æœ¯è¯­æ˜¯â€œå‘ˆç°æ ‘â€ï¼Œå®ƒç”±â€œå‘ˆç°å¯¹è±¡â€ç»„æˆã€‚å¯¹äºå…ƒç´ çš„æ”¾ç½®ï¼ŒWebKit ä½¿ç”¨çš„æœ¯è¯­æ˜¯â€œå¸ƒå±€â€ï¼Œè€Œ Gecko ç§°ä¹‹ä¸ºâ€œé‡æ’â€ã€‚å¯¹äºè¿æ¥ DOM èŠ‚ç‚¹å’Œå¯è§†åŒ–ä¿¡æ¯ä»è€Œåˆ›å»ºå‘ˆç°æ ‘çš„è¿‡ç¨‹ï¼ŒWebKit ä½¿ç”¨çš„æœ¯è¯­æ˜¯â€œé™„åŠ â€ã€‚æœ‰ä¸€ä¸ªç»†å¾®çš„éè¯­ä¹‰å·®åˆ«ï¼Œå°±æ˜¯ Gecko åœ¨ HTML ä¸ DOM æ ‘ä¹‹é—´è¿˜æœ‰ä¸€ä¸ªç§°ä¸ºâ€œå†…å®¹æ§½â€çš„å±‚ï¼Œç”¨äºç”Ÿæˆ DOM å…ƒç´ ã€‚æˆ‘ä»¬ä¼šé€ä¸€è®ºè¿°æµç¨‹ä¸­çš„æ¯ä¸€éƒ¨åˆ†ï¼š</p>\n<h3 id=\"è§£æ-ç»¼è¿°\"><a href=\"#è§£æ-ç»¼è¿°\" class=\"headerlink\" title=\"è§£æ - ç»¼è¿°\"></a>è§£æ - ç»¼è¿°</h3><p>è§£ææ˜¯å‘ˆç°å¼•æ“ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼Œå› æ­¤æˆ‘ä»¬è¦æ›´æ·±å…¥åœ°è®²è§£ã€‚é¦–å…ˆï¼Œæ¥ä»‹ç»ä¸€ä¸‹è§£æã€‚</p>\n<p>è§£ææ–‡æ¡£æ˜¯æŒ‡å°†æ–‡æ¡£è½¬åŒ–æˆä¸ºæœ‰æ„ä¹‰çš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯å¯è®©ä»£ç ç†è§£å’Œä½¿ç”¨çš„ç»“æ„ã€‚è§£æå¾—åˆ°çš„ç»“æœé€šå¸¸æ˜¯ä»£è¡¨äº†æ–‡æ¡£ç»“æ„çš„èŠ‚ç‚¹æ ‘ï¼Œå®ƒç§°ä½œè§£ææ ‘æˆ–è€…è¯­æ³•æ ‘ã€‚</p>\n<p>ç¤ºä¾‹ - è§£æ 2 + 3 - 1 è¿™ä¸ªè¡¨è¾¾å¼ï¼Œä¼šè¿”å›ä¸‹é¢çš„æ ‘ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image009.png\" alt=\"img\">å›¾ï¼šæ•°å­¦è¡¨è¾¾å¼æ ‘èŠ‚ç‚¹</p>\n<h4 id=\"è¯­æ³•\"><a href=\"#è¯­æ³•\" class=\"headerlink\" title=\"è¯­æ³•\"></a>è¯­æ³•</h4><p>è§£ææ˜¯ä»¥æ–‡æ¡£æ‰€éµå¾ªçš„è¯­æ³•è§„åˆ™ï¼ˆç¼–å†™æ–‡æ¡£æ‰€ç”¨çš„è¯­è¨€æˆ–æ ¼å¼ï¼‰ä¸ºåŸºç¡€çš„ã€‚æ‰€æœ‰å¯ä»¥è§£æçš„æ ¼å¼éƒ½å¿…é¡»å¯¹åº”ç¡®å®šçš„è¯­æ³•ï¼ˆç”±è¯æ±‡å’Œè¯­æ³•è§„åˆ™æ„æˆï¼‰ã€‚è¿™ç§°ä¸º<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#context_free_grammar\">ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•</a>ã€‚äººç±»è¯­è¨€å¹¶ä¸å±äºè¿™æ ·çš„è¯­è¨€ï¼Œå› æ­¤æ— æ³•ç”¨å¸¸è§„çš„è§£ææŠ€æœ¯è¿›è¡Œè§£æã€‚</p>\n<h4 id=\"è§£æå™¨å’Œè¯æ³•åˆ†æå™¨çš„ç»„åˆ\"><a href=\"#è§£æå™¨å’Œè¯æ³•åˆ†æå™¨çš„ç»„åˆ\" class=\"headerlink\" title=\"è§£æå™¨å’Œè¯æ³•åˆ†æå™¨çš„ç»„åˆ\"></a>è§£æå™¨å’Œè¯æ³•åˆ†æå™¨çš„ç»„åˆ</h4><p>è§£æçš„è¿‡ç¨‹å¯ä»¥åˆ†æˆä¸¤ä¸ªå­è¿‡ç¨‹ï¼šè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚</p>\n<p>è¯æ³•åˆ†ææ˜¯å°†è¾“å…¥å†…å®¹åˆ†å‰²æˆå¤§é‡æ ‡è®°çš„è¿‡ç¨‹ã€‚æ ‡è®°æ˜¯è¯­è¨€ä¸­çš„è¯æ±‡ï¼Œå³æ„æˆå†…å®¹çš„å•ä½ã€‚åœ¨äººç±»è¯­è¨€ä¸­ï¼Œå®ƒç›¸å½“äºè¯­è¨€å­—å…¸ä¸­çš„å•è¯ã€‚</p>\n<p>è¯­æ³•åˆ†ææ˜¯åº”ç”¨è¯­è¨€çš„è¯­æ³•è§„åˆ™çš„è¿‡ç¨‹ã€‚</p>\n<p>è§£æå™¨é€šå¸¸å°†è§£æå·¥ä½œåˆ†ç»™ä»¥ä¸‹ä¸¤ä¸ªç»„ä»¶æ¥å¤„ç†ï¼š<strong>è¯æ³•åˆ†æå™¨</strong>ï¼ˆæœ‰æ—¶ä¹Ÿç§°ä¸ºæ ‡è®°ç”Ÿæˆå™¨ï¼‰ï¼Œè´Ÿè´£å°†è¾“å…¥å†…å®¹åˆ†è§£æˆä¸€ä¸ªä¸ªæœ‰æ•ˆæ ‡è®°ï¼›è€Œ<strong>è§£æå™¨</strong>è´Ÿè´£æ ¹æ®è¯­è¨€çš„è¯­æ³•è§„åˆ™åˆ†ææ–‡æ¡£çš„ç»“æ„ï¼Œä»è€Œæ„å»ºè§£ææ ‘ã€‚è¯æ³•åˆ†æå™¨çŸ¥é“å¦‚ä½•å°†æ— å…³çš„å­—ç¬¦ï¼ˆæ¯”å¦‚ç©ºæ ¼å’Œæ¢è¡Œç¬¦ï¼‰åˆ†ç¦»å‡ºæ¥ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image011.png\" alt=\"img\">å›¾ï¼šä»æºæ–‡æ¡£åˆ°è§£ææ ‘</p>\n<p>è§£ææ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ã€‚é€šå¸¸ï¼Œè§£æå™¨ä¼šå‘è¯æ³•åˆ†æå™¨è¯·æ±‚ä¸€ä¸ªæ–°æ ‡è®°ï¼Œå¹¶å°è¯•å°†å…¶ä¸æŸæ¡è¯­æ³•è§„åˆ™è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœå‘ç°äº†åŒ¹é…è§„åˆ™ï¼Œè§£æå™¨ä¼šå°†ä¸€ä¸ªå¯¹åº”äºè¯¥æ ‡è®°çš„èŠ‚ç‚¹æ·»åŠ åˆ°è§£ææ ‘ä¸­ï¼Œç„¶åç»§ç»­è¯·æ±‚ä¸‹ä¸€ä¸ªæ ‡è®°ã€‚</p>\n<p>å¦‚æœæ²¡æœ‰è§„åˆ™å¯ä»¥åŒ¹é…ï¼Œè§£æå™¨å°±ä¼šå°†æ ‡è®°å­˜å‚¨åˆ°å†…éƒ¨ï¼Œå¹¶ç»§ç»­è¯·æ±‚æ ‡è®°ï¼Œç›´è‡³æ‰¾åˆ°å¯ä¸æ‰€æœ‰å†…éƒ¨å­˜å‚¨çš„æ ‡è®°åŒ¹é…çš„è§„åˆ™ã€‚å¦‚æœæ‰¾ä¸åˆ°ä»»ä½•åŒ¹é…è§„åˆ™ï¼Œè§£æå™¨å°±ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚è¿™æ„å‘³ç€æ–‡æ¡£æ— æ•ˆï¼ŒåŒ…å«è¯­æ³•é”™è¯¯ã€‚</p>\n<h4 id=\"ç¿»è¯‘\"><a href=\"#ç¿»è¯‘\" class=\"headerlink\" title=\"ç¿»è¯‘\"></a>ç¿»è¯‘</h4><p>å¾ˆå¤šæ—¶å€™ï¼Œè§£ææ ‘è¿˜ä¸æ˜¯æœ€ç»ˆäº§å“ã€‚è§£æé€šå¸¸æ˜¯åœ¨ç¿»è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ï¼Œè€Œç¿»è¯‘æ˜¯æŒ‡å°†è¾“å…¥æ–‡æ¡£è½¬æ¢æˆå¦ä¸€ç§æ ¼å¼ã€‚ç¼–è¯‘å°±æ˜¯è¿™æ ·ä¸€ä¸ªä¾‹å­ã€‚ç¼–è¯‘å™¨å¯å°†æºä»£ç ç¼–è¯‘æˆæœºå™¨ä»£ç ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯é¦–å…ˆå°†æºä»£ç è§£ææˆè§£ææ ‘ï¼Œç„¶åå°†è§£ææ ‘ç¿»è¯‘æˆæœºå™¨ä»£ç æ–‡æ¡£ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image013.png\" alt=\"img\">å›¾ï¼šç¼–è¯‘æµç¨‹</p>\n<h4 id=\"è§£æç¤ºä¾‹\"><a href=\"#è§£æç¤ºä¾‹\" class=\"headerlink\" title=\"è§£æç¤ºä¾‹\"></a>è§£æç¤ºä¾‹</h4><p>åœ¨å›¾ 5 ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼å»ºç«‹äº†è§£ææ ‘ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯•ç€å®šä¹‰ä¸€ä¸ªç®€å•çš„æ•°å­¦è¯­è¨€ï¼Œç”¨æ¥æ¼”ç¤ºè§£æçš„è¿‡ç¨‹ã€‚</p>\n<p>è¯æ±‡ï¼šæˆ‘ä»¬ç”¨çš„è¯­è¨€å¯åŒ…å«æ•´æ•°ã€åŠ å·å’Œå‡å·ã€‚</p>\n<p>è¯­æ³•ï¼š</p>\n<ol>\n<li>æ„æˆè¯­è¨€çš„è¯­æ³•å•ä½æ˜¯è¡¨è¾¾å¼ã€é¡¹å’Œè¿ç®—ç¬¦ã€‚</li>\n<li>æˆ‘ä»¬ç”¨çš„è¯­è¨€å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„è¡¨è¾¾å¼ã€‚</li>\n<li>è¡¨è¾¾å¼çš„å®šä¹‰æ˜¯ï¼šä¸€ä¸ªâ€œé¡¹â€æ¥ä¸€ä¸ªâ€œè¿ç®—ç¬¦â€ï¼Œç„¶åå†æ¥ä¸€ä¸ªâ€œé¡¹â€ã€‚</li>\n<li>è¿ç®—ç¬¦æ˜¯åŠ å·æˆ–å‡å·ã€‚</li>\n<li>é¡¹æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–ä¸€ä¸ªè¡¨è¾¾å¼</li>\n</ol>\n<p>è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹ 2 + 3 - 1ã€‚<br>åŒ¹é…è¯­æ³•è§„åˆ™çš„ç¬¬ä¸€ä¸ªå­ä¸²æ˜¯ 2ï¼Œè€Œæ ¹æ®ç¬¬ 5 æ¡è¯­æ³•è§„åˆ™ï¼Œè¿™æ˜¯ä¸€ä¸ªé¡¹ã€‚åŒ¹é…è¯­æ³•è§„åˆ™çš„ç¬¬äºŒä¸ªå­ä¸²æ˜¯ 2 + 3ï¼Œè€Œæ ¹æ®ç¬¬ 3 æ¡è§„åˆ™ï¼ˆä¸€ä¸ªé¡¹æ¥ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç„¶åå†æ¥ä¸€ä¸ªé¡¹ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹å·²ç»åˆ°äº†è¾“å…¥çš„ç»“æŸã€‚2 + 3 - 1 æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“ 2 + 3 æ˜¯ä¸€ä¸ªé¡¹ï¼Œè¿™æ ·å°±ç¬¦åˆâ€œä¸€ä¸ªé¡¹æ¥ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç„¶åå†æ¥ä¸€ä¸ªé¡¹â€çš„è§„åˆ™ã€‚2 + + ä¸ä¸ä»»ä½•è§„åˆ™åŒ¹é…ï¼Œå› æ­¤æ˜¯æ— æ•ˆçš„è¾“å…¥ã€‚</p>\n<h4 id=\"è¯æ±‡å’Œè¯­æ³•çš„æ­£å¼å®šä¹‰\"><a href=\"#è¯æ±‡å’Œè¯­æ³•çš„æ­£å¼å®šä¹‰\" class=\"headerlink\" title=\"è¯æ±‡å’Œè¯­æ³•çš„æ­£å¼å®šä¹‰\"></a>è¯æ±‡å’Œè¯­æ³•çš„æ­£å¼å®šä¹‰</h4><p>è¯æ±‡é€šå¸¸ç”¨<a href=\"http://www.regular-expressions.info/\">æ­£åˆ™è¡¨è¾¾å¼</a>è¡¨ç¤ºã€‚</p>\n<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹è¯­è¨€å¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">INTEGER :0|[1-9][0-9]*</span><br><span class=\"line\">PLUS : +</span><br><span class=\"line\">MINUS: -</span><br></pre></td></tr></table></figure>\n\n<p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™é‡Œç”¨æ­£åˆ™è¡¨è¾¾å¼ç»™å‡ºäº†æ•´æ•°çš„å®šä¹‰ã€‚</p>\n<p>è¯­æ³•é€šå¸¸ä½¿ç”¨ä¸€ç§ç§°ä¸º <a href=\"http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form\">BNF</a> çš„æ ¼å¼æ¥å®šä¹‰ã€‚æˆ‘ä»¬çš„ç¤ºä¾‹è¯­è¨€å¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">expression :&#x3D;  term  operation  term</span><br><span class=\"line\">operation :&#x3D;  PLUS | MINUS</span><br><span class=\"line\">term :&#x3D; INTEGER | expression</span><br></pre></td></tr></table></figure>\n\n<p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œå¦‚æœè¯­è¨€çš„è¯­æ³•æ˜¯ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ï¼Œå°±å¯ä»¥ç”±å¸¸è§„è§£æå™¨è¿›è¡Œè§£æã€‚ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•çš„ç›´è§‚å®šä¹‰å°±æ˜¯å¯ä»¥å®Œå…¨ç”¨ BNF æ ¼å¼è¡¨è¾¾çš„è¯­æ³•ã€‚æœ‰å…³æ­£å¼å®šä¹‰ï¼Œè¯·å‚é˜…<a href=\"http://en.wikipedia.org/wiki/Context-free_grammar\">å…³äºä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•çš„ç»´åŸºç™¾ç§‘æ–‡ç« </a>ã€‚</p>\n<h4 id=\"è§£æå™¨ç±»å‹\"><a href=\"#è§£æå™¨ç±»å‹\" class=\"headerlink\" title=\"è§£æå™¨ç±»å‹\"></a>è§£æå™¨ç±»å‹</h4><p>æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹çš„è§£æå™¨ï¼šè‡ªä¸Šè€Œä¸‹è§£æå™¨å’Œè‡ªä¸‹è€Œä¸Šè§£æå™¨ã€‚ç›´è§‚åœ°æ¥è¯´ï¼Œè‡ªä¸Šè€Œä¸‹çš„è§£æå™¨ä»è¯­æ³•çš„é«˜å±‚ç»“æ„å‡ºå‘ï¼Œå°è¯•ä»ä¸­æ‰¾åˆ°åŒ¹é…çš„ç»“æ„ã€‚è€Œè‡ªä¸‹è€Œä¸Šçš„è§£æå™¨ä»ä½å±‚è§„åˆ™å‡ºå‘ï¼Œå°†è¾“å…¥å†…å®¹é€æ­¥è½¬åŒ–ä¸ºè¯­æ³•è§„åˆ™ï¼Œç›´è‡³æ»¡è¶³é«˜å±‚è§„åˆ™ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸¤ç§è§£æå™¨ä¼šå¦‚ä½•è§£ææˆ‘ä»¬çš„ç¤ºä¾‹ï¼š</p>\n<p>è‡ªä¸Šè€Œä¸‹çš„è§£æå™¨ä¼šä»é«˜å±‚çš„è§„åˆ™å¼€å§‹ï¼šé¦–å…ˆå°† 2 + 3 æ ‡è¯†ä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç„¶åå°† 2 + 3 - 1 æ ‡è¯†ä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆæ ‡è¯†è¡¨è¾¾å¼çš„è¿‡ç¨‹æ¶‰åŠåˆ°åŒ¹é…å…¶ä»–è§„åˆ™ï¼Œä½†æ˜¯èµ·ç‚¹æ˜¯æœ€é«˜çº§åˆ«çš„è§„åˆ™ï¼‰ã€‚</p>\n<p>è‡ªä¸‹è€Œä¸Šçš„è§£æå™¨å°†æ‰«æè¾“å…¥å†…å®¹ï¼Œæ‰¾åˆ°åŒ¹é…çš„è§„åˆ™åï¼Œå°†åŒ¹é…çš„è¾“å…¥å†…å®¹æ›¿æ¢æˆè§„åˆ™ã€‚å¦‚æ­¤ç»§ç»­æ›¿æ¢ï¼Œç›´åˆ°è¾“å…¥å†…å®¹çš„ç»“å°¾ã€‚éƒ¨åˆ†åŒ¹é…çš„è¡¨è¾¾å¼ä¿å­˜åœ¨è§£æå™¨çš„å †æ ˆä¸­ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>å †æ ˆ</th>\n<th>è¾“å…¥</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>2 + 3 - 1</td>\n</tr>\n<tr>\n<td>é¡¹</td>\n<td>+ 3 - 1</td>\n</tr>\n<tr>\n<td>é¡¹è¿ç®—</td>\n<td>3 - 1</td>\n</tr>\n<tr>\n<td>è¡¨è¾¾å¼</td>\n<td>- 1</td>\n</tr>\n<tr>\n<td>è¡¨è¾¾å¼è¿ç®—ç¬¦</td>\n<td>1</td>\n</tr>\n<tr>\n<td>è¡¨è¾¾å¼</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>è¿™ç§è‡ªä¸‹è€Œä¸Šçš„è§£æå™¨ç§°ä¸ºç§»ä½å½’çº¦è§£æå™¨ï¼Œå› ä¸ºè¾“å…¥åœ¨å‘å³ç§»ä½ï¼ˆè®¾æƒ³æœ‰ä¸€ä¸ªæŒ‡é’ˆä»è¾“å…¥å†…å®¹çš„å¼€å¤´ç§»åŠ¨åˆ°ç»“å°¾ï¼‰ï¼Œå¹¶ä¸”é€æ¸å½’çº¦åˆ°è¯­æ³•è§„åˆ™ä¸Šã€‚</p>\n<h4 id=\"è‡ªåŠ¨ç”Ÿæˆè§£æå™¨\"><a href=\"#è‡ªåŠ¨ç”Ÿæˆè§£æå™¨\" class=\"headerlink\" title=\"è‡ªåŠ¨ç”Ÿæˆè§£æå™¨\"></a>è‡ªåŠ¨ç”Ÿæˆè§£æå™¨</h4><p>æœ‰ä¸€äº›å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨ç”Ÿæˆè§£æå™¨ï¼Œå®ƒä»¬ç§°ä¸ºè§£æå™¨ç”Ÿæˆå™¨ã€‚æ‚¨åªè¦å‘å…¶æä¾›æ‚¨æ‰€ç”¨è¯­è¨€çš„è¯­æ³•ï¼ˆè¯æ±‡å’Œè¯­æ³•è§„åˆ™ï¼‰ï¼Œå®ƒå°±ä¼šç”Ÿæˆç›¸åº”çš„è§£æå™¨ã€‚åˆ›å»ºè§£æå™¨éœ€è¦å¯¹è§£ææœ‰æ·±åˆ»ç†è§£ï¼Œè€Œäººå·¥åˆ›å»ºå¹¶ä¼˜åŒ–è§£æå™¨å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œæ‰€ä»¥è§£æå™¨ç”Ÿæˆå™¨æ˜¯éå¸¸å®ç”¨çš„ã€‚</p>\n<p>WebKit ä½¿ç”¨äº†ä¸¤ç§éå¸¸æœ‰åçš„è§£æå™¨ç”Ÿæˆå™¨ï¼šç”¨äºåˆ›å»ºè¯æ³•åˆ†æå™¨çš„ <a href=\"http://en.wikipedia.org/wiki/Flex_lexical_analyser\">Flex</a> ä»¥åŠç”¨äºåˆ›å»ºè§£æå™¨çš„ <a href=\"http://www.gnu.org/software/bison/\">Bison</a>ï¼ˆæ‚¨ä¹Ÿå¯èƒ½é‡åˆ° Lex å’Œ Yacc è¿™æ ·çš„åˆ«åï¼‰ã€‚Flex çš„è¾“å…¥æ˜¯åŒ…å«æ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰çš„æ–‡ä»¶ã€‚Bison çš„è¾“å…¥æ˜¯é‡‡ç”¨ BNF æ ¼å¼çš„è¯­è¨€è¯­æ³•è§„åˆ™ã€‚</p>\n<h3 id=\"HTML-è§£æå™¨\"><a href=\"#HTML-è§£æå™¨\" class=\"headerlink\" title=\"HTML è§£æå™¨\"></a>HTML è§£æå™¨</h3><p>HTML è§£æå™¨çš„ä»»åŠ¡æ˜¯å°† HTML æ ‡è®°è§£ææˆè§£ææ ‘ã€‚</p>\n<h4 id=\"HTML-è¯­æ³•å®šä¹‰\"><a href=\"#HTML-è¯­æ³•å®šä¹‰\" class=\"headerlink\" title=\"HTML è¯­æ³•å®šä¹‰\"></a>HTML è¯­æ³•å®šä¹‰</h4><p>HTML çš„è¯æ±‡å’Œè¯­æ³•åœ¨ W3C ç»„ç»‡åˆ›å»ºçš„<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#w3c\">è§„èŒƒ</a>ä¸­è¿›è¡Œäº†å®šä¹‰ã€‚å½“å‰çš„ç‰ˆæœ¬æ˜¯ HTML4ï¼ŒHTML5 æ­£åœ¨å¤„ç†è¿‡ç¨‹ä¸­ã€‚</p>\n<h4 id=\"éä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•\"><a href=\"#éä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•\" class=\"headerlink\" title=\"éä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•\"></a>éä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•</h4><p>æ­£å¦‚æˆ‘ä»¬åœ¨è§£æè¿‡ç¨‹çš„ç®€ä»‹ä¸­å·²ç»äº†è§£åˆ°çš„ï¼Œè¯­æ³•å¯ä»¥ç”¨ BNF ç­‰æ ¼å¼è¿›è¡Œæ­£å¼å®šä¹‰ã€‚</p>\n<p>å¾ˆé—æ†¾ï¼Œæ‰€æœ‰çš„å¸¸è§„è§£æå™¨éƒ½ä¸é€‚ç”¨äº HTMLï¼ˆæˆ‘å¹¶ä¸æ˜¯å¼€ç©ç¬‘ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºè§£æ CSS å’Œ JavaScriptï¼‰ã€‚HTML å¹¶ä¸èƒ½å¾ˆå®¹æ˜“åœ°ç”¨è§£æå™¨æ‰€éœ€çš„ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•æ¥å®šä¹‰ã€‚</p>\n<p>æœ‰ä¸€ç§å¯ä»¥å®šä¹‰ HTML çš„æ­£è§„æ ¼å¼ï¼šDTDï¼ˆDocument Type Definitionï¼Œæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰ï¼Œä½†å®ƒä¸æ˜¯ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ã€‚</p>\n<p>è¿™åˆçœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼šHTML å’Œ XML éå¸¸ç›¸ä¼¼ã€‚æœ‰å¾ˆå¤š XML è§£æå™¨å¯ä»¥ä½¿ç”¨ã€‚HTML å­˜åœ¨ä¸€ä¸ª XML å˜ä½“ (XHTML)ï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆå¤§çš„åŒºåˆ«å‘¢ï¼Ÿ</p>\n<p>åŒºåˆ«åœ¨äº HTML çš„å¤„ç†æ›´ä¸ºâ€œå®½å®¹â€ï¼Œå®ƒå…è®¸æ‚¨çœç•¥æŸäº›éšå¼æ·»åŠ çš„æ ‡è®°ï¼Œæœ‰æ—¶è¿˜èƒ½çœç•¥ä¸€äº›èµ·å§‹æˆ–è€…ç»“æŸæ ‡è®°ç­‰ç­‰ã€‚å’Œ XML ä¸¥æ ¼çš„è¯­æ³•ä¸åŒï¼ŒHTML æ•´ä½“æ¥çœ‹æ˜¯ä¸€ç§â€œè½¯æ€§â€çš„è¯­æ³•ã€‚</p>\n<p>æ˜¾ç„¶ï¼Œè¿™ç§çœ‹ä¸Šå»ç»†å¾®çš„å·®åˆ«å®é™…ä¸Šå´å¸¦æ¥äº†å·¨å¤§çš„å½±å“ã€‚ä¸€æ–¹é¢ï¼Œè¿™æ˜¯ HTML å¦‚æ­¤æµè¡Œçš„åŸå› ï¼šå®ƒèƒ½åŒ…å®¹æ‚¨çš„é”™è¯¯ï¼Œç®€åŒ–ç½‘ç»œå¼€å‘ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä½¿å¾—å®ƒå¾ˆéš¾ç¼–å†™æ­£å¼çš„è¯­æ³•ã€‚æ¦‚æ‹¬åœ°è¯´ï¼ŒHTML æ— æ³•å¾ˆå®¹æ˜“åœ°é€šè¿‡å¸¸è§„è§£æå™¨è§£æï¼ˆå› ä¸ºå®ƒçš„è¯­æ³•ä¸æ˜¯ä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ï¼‰ï¼Œä¹Ÿæ— æ³•é€šè¿‡ XML è§£æå™¨æ¥è§£æã€‚</p>\n<h4 id=\"HTML-DTD\"><a href=\"#HTML-DTD\" class=\"headerlink\" title=\"HTML DTD\"></a>HTML DTD</h4><p>HTML çš„å®šä¹‰é‡‡ç”¨äº† DTD æ ¼å¼ã€‚æ­¤æ ¼å¼å¯ç”¨äºå®šä¹‰ <a href=\"http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language\">SGML</a> æ—çš„è¯­è¨€ã€‚å®ƒåŒ…æ‹¬æ‰€æœ‰å…è®¸ä½¿ç”¨çš„å…ƒç´ åŠå…¶å±æ€§å’Œå±‚æ¬¡ç»“æ„çš„å®šä¹‰ã€‚å¦‚ä¸Šæ–‡æ‰€è¿°ï¼ŒHTML DTD æ— æ³•æ„æˆä¸ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ã€‚</p>\n<p>DTD å­˜åœ¨ä¸€äº›å˜ä½“ã€‚ä¸¥æ ¼æ¨¡å¼å®Œå…¨éµå®ˆ HTML è§„èŒƒï¼Œè€Œå…¶ä»–æ¨¡å¼å¯æ”¯æŒä»¥å‰çš„æµè§ˆå™¨æ‰€ä½¿ç”¨çš„æ ‡è®°ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿å‘ä¸‹å…¼å®¹ä¸€äº›æ—©æœŸç‰ˆæœ¬çš„å†…å®¹ã€‚æœ€æ–°çš„ä¸¥æ ¼æ¨¡å¼ DTD å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href=\"http://www.w3.org/TR/html4/strict.dtd\">www.w3.org/TR/html4/strict.dtd</a></p>\n<h4 id=\"DOM\"><a href=\"#DOM\" class=\"headerlink\" title=\"DOM\"></a>DOM</h4><p>è§£æå™¨çš„è¾“å‡ºâ€œè§£ææ ‘â€æ˜¯ç”± DOM å…ƒç´ å’Œå±æ€§èŠ‚ç‚¹æ„æˆçš„æ ‘ç»“æ„ã€‚DOM æ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ (Document Object Model) çš„ç¼©å†™ã€‚å®ƒæ˜¯ HTML æ–‡æ¡£çš„å¯¹è±¡è¡¨ç¤ºï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¤–éƒ¨å†…å®¹ï¼ˆä¾‹å¦‚ JavaScriptï¼‰ä¸ HTML å…ƒç´ ä¹‹é—´çš„æ¥å£ã€‚<br>è§£ææ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯â€œ<a href=\"http://www.w3.org/TR/1998/REC-DOM-Level-1-19981001/level-one-core.html#i-Document\">Document</a>â€å¯¹è±¡ã€‚</p>\n<p>DOM ä¸æ ‡è®°ä¹‹é—´å‡ ä¹æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µæ ‡è®°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;p&gt;</span><br><span class=\"line\">      Hello World</span><br><span class=\"line\">    &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;div&gt; &lt;img src&#x3D;&quot;example.png&quot;&#x2F;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ç¿»è¯‘æˆå¦‚ä¸‹çš„ DOM æ ‘ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image015.png\" alt=\"img\">å›¾ï¼šç¤ºä¾‹æ ‡è®°çš„ DOM æ ‘</p>\n<p>å’Œ HTML ä¸€æ ·ï¼ŒDOM ä¹Ÿæ˜¯ç”± W3C ç»„ç»‡æŒ‡å®šçš„ã€‚è¯·å‚è§ <a href=\"http://www.w3.org/DOM/DOMTR\">www.w3.org/DOM/DOMTR</a>ã€‚è¿™æ˜¯å…³äºæ–‡æ¡£æ“ä½œçš„é€šç”¨è§„èŒƒã€‚å…¶ä¸­ä¸€ä¸ªç‰¹å®šæ¨¡å—æè¿°é’ˆå¯¹ HTML çš„å…ƒç´ ã€‚HTML çš„å®šä¹‰å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š<a href=\"http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/idl-definitions.html\">www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/idl-definitions.html</a>ã€‚</p>\n<p>æˆ‘æ‰€è¯´çš„æ ‘åŒ…å« DOM èŠ‚ç‚¹ï¼ŒæŒ‡çš„æ˜¯æ ‘æ˜¯ç”±å®ç°äº†æŸä¸ª DOM æ¥å£çš„å…ƒç´ æ„æˆçš„ã€‚æµè§ˆå™¨åœ¨å…·ä½“çš„å®ç°ä¸­ä¼šæœ‰ä¸€äº›ä¾›å†…éƒ¨ä½¿ç”¨çš„å…¶ä»–å±æ€§ã€‚</p>\n<h4 id=\"è§£æç®—æ³•\"><a href=\"#è§£æç®—æ³•\" class=\"headerlink\" title=\"è§£æç®—æ³•\"></a>è§£æç®—æ³•</h4><p>æˆ‘ä»¬åœ¨ä¹‹å‰ç« èŠ‚å·²ç»è¯´è¿‡ï¼ŒHTML æ— æ³•ç”¨å¸¸è§„çš„è‡ªä¸Šè€Œä¸‹æˆ–è‡ªä¸‹è€Œä¸Šçš„è§£æå™¨è¿›è¡Œè§£æã€‚</p>\n<p>åŸå› åœ¨äºï¼š</p>\n<ol>\n<li>è¯­è¨€çš„å®½å®¹æœ¬è´¨ã€‚</li>\n<li>æµè§ˆå™¨å†æ¥å¯¹ä¸€äº›å¸¸è§çš„æ— æ•ˆ HTML ç”¨æ³•é‡‡å–åŒ…å®¹æ€åº¦ã€‚</li>\n<li>è§£æè¿‡ç¨‹éœ€è¦ä¸æ–­åœ°åå¤ã€‚æºå†…å®¹åœ¨è§£æè¿‡ç¨‹ä¸­é€šå¸¸ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯åœ¨ HTML ä¸­ï¼Œè„šæœ¬æ ‡è®°å¦‚æœåŒ…å« <code>document.write</code>ï¼Œå°±ä¼šæ·»åŠ é¢å¤–çš„æ ‡è®°ï¼Œè¿™æ ·è§£æè¿‡ç¨‹å®é™…ä¸Šå°±æ›´æ”¹äº†è¾“å…¥å†…å®¹ã€‚</li>\n</ol>\n<p>ç”±äºä¸èƒ½ä½¿ç”¨å¸¸è§„çš„è§£ææŠ€æœ¯ï¼Œæµè§ˆå™¨å°±åˆ›å»ºäº†è‡ªå®šä¹‰çš„è§£æå™¨æ¥è§£æ HTMLã€‚</p>\n<p><a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\">HTML5 è§„èŒƒè¯¦ç»†åœ°æè¿°äº†è§£æç®—æ³•</a>ã€‚æ­¤ç®—æ³•ç”±ä¸¤ä¸ªé˜¶æ®µç»„æˆï¼šæ ‡è®°åŒ–å’Œæ ‘æ„å»ºã€‚</p>\n<p>æ ‡è®°åŒ–æ˜¯è¯æ³•åˆ†æè¿‡ç¨‹ï¼Œå°†è¾“å…¥å†…å®¹è§£ææˆå¤šä¸ªæ ‡è®°ã€‚HTML æ ‡è®°åŒ…æ‹¬èµ·å§‹æ ‡è®°ã€ç»“æŸæ ‡è®°ã€å±æ€§åç§°å’Œå±æ€§å€¼ã€‚</p>\n<p>æ ‡è®°ç”Ÿæˆå™¨è¯†åˆ«æ ‡è®°ï¼Œä¼ é€’ç»™æ ‘æ„é€ å™¨ï¼Œç„¶åæ¥å—ä¸‹ä¸€ä¸ªå­—ç¬¦ä»¥è¯†åˆ«ä¸‹ä¸€ä¸ªæ ‡è®°ï¼›å¦‚æ­¤åå¤ç›´åˆ°è¾“å…¥çš„ç»“æŸã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image017.png\" alt=\"img\">å›¾ï¼šHTML è§£ææµç¨‹ï¼ˆæ‘˜è‡ª HTML5 è§„èŒƒï¼‰</p>\n<h4 id=\"æ ‡è®°åŒ–ç®—æ³•\"><a href=\"#æ ‡è®°åŒ–ç®—æ³•\" class=\"headerlink\" title=\"æ ‡è®°åŒ–ç®—æ³•\"></a>æ ‡è®°åŒ–ç®—æ³•</h4><p>è¯¥ç®—æ³•çš„è¾“å‡ºç»“æœæ˜¯ HTML æ ‡è®°ã€‚è¯¥ç®—æ³•ä½¿ç”¨çŠ¶æ€æœºæ¥è¡¨ç¤ºã€‚æ¯ä¸€ä¸ªçŠ¶æ€æ¥æ”¶æ¥è‡ªè¾“å…¥ä¿¡æ¯æµçš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œå¹¶æ ¹æ®è¿™äº›å­—ç¬¦æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚å½“å‰çš„æ ‡è®°åŒ–çŠ¶æ€å’Œæ ‘ç»“æ„çŠ¶æ€ä¼šå½±å“è¿›å…¥ä¸‹ä¸€çŠ¶æ€çš„å†³å®šã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿æ¥æ”¶çš„å­—ç¬¦ç›¸åŒï¼Œå¯¹äºä¸‹ä¸€ä¸ªæ­£ç¡®çš„çŠ¶æ€ä¹Ÿä¼šäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œå…·ä½“å–å†³äºå½“å‰çš„çŠ¶æ€ã€‚è¯¥ç®—æ³•ç›¸å½“å¤æ‚ï¼Œæ— æ³•åœ¨æ­¤è¯¦è¿°ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥å¸®åŠ©å¤§å®¶ç†è§£å…¶åŸç†ã€‚</p>\n<p>åŸºæœ¬ç¤ºä¾‹ - å°†ä¸‹é¢çš„ HTML ä»£ç æ ‡è®°åŒ–ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    Hello world</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>åˆå§‹çŠ¶æ€æ˜¯æ•°æ®çŠ¶æ€ã€‚é‡åˆ°å­—ç¬¦ <code>&lt;</code> æ—¶ï¼ŒçŠ¶æ€æ›´æ”¹ä¸º<strong>â€œæ ‡è®°æ‰“å¼€çŠ¶æ€â€</strong>ã€‚æ¥æ”¶ä¸€ä¸ª <code>a-z</code> å­—ç¬¦ä¼šåˆ›å»ºâ€œèµ·å§‹æ ‡è®°â€ï¼ŒçŠ¶æ€æ›´æ”¹ä¸º<strong>â€œæ ‡è®°åç§°çŠ¶æ€â€</strong>ã€‚è¿™ä¸ªçŠ¶æ€ä¼šä¸€ç›´ä¿æŒåˆ°æ¥æ”¶ <code>&gt;</code> å­—ç¬¦ã€‚åœ¨æ­¤æœŸé—´æ¥æ”¶çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šé™„åŠ åˆ°æ–°çš„æ ‡è®°åç§°ä¸Šã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ ‡è®°æ˜¯ <code>html</code> æ ‡è®°ã€‚</p>\n<p>é‡åˆ° <code>&gt;</code> æ ‡è®°æ—¶ï¼Œä¼šå‘é€å½“å‰çš„æ ‡è®°ï¼ŒçŠ¶æ€æ”¹å›<strong>â€œæ•°æ®çŠ¶æ€â€</strong>ã€‚<code>&lt;body&gt;</code> æ ‡è®°ä¹Ÿä¼šè¿›è¡ŒåŒæ ·çš„å¤„ç†ã€‚ç›®å‰ <code>html</code> å’Œ <code>body</code> æ ‡è®°å‡å·²å‘å‡ºã€‚ç°åœ¨æˆ‘ä»¬å›åˆ°<strong>â€œæ•°æ®çŠ¶æ€â€</strong>ã€‚æ¥æ”¶åˆ° <code>Hello world</code> ä¸­çš„ <code>H</code> å­—ç¬¦æ—¶ï¼Œå°†åˆ›å»ºå¹¶å‘é€å­—ç¬¦æ ‡è®°ï¼Œç›´åˆ°æ¥æ”¶ <code>&lt;/body&gt;</code> ä¸­çš„ <code>&lt;</code>ã€‚æˆ‘ä»¬å°†ä¸º <code>Hello world</code> ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½å‘é€ä¸€ä¸ªå­—ç¬¦æ ‡è®°ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬å›åˆ°<strong>â€œæ ‡è®°æ‰“å¼€çŠ¶æ€â€</strong>ã€‚æ¥æ”¶ä¸‹ä¸€ä¸ªè¾“å…¥å­—ç¬¦ <code>/</code> æ—¶ï¼Œä¼šåˆ›å»º <code>end tag token</code> å¹¶æ”¹ä¸º<strong>â€œæ ‡è®°åç§°çŠ¶æ€â€</strong>ã€‚æˆ‘ä»¬ä¼šå†æ¬¡ä¿æŒè¿™ä¸ªçŠ¶æ€ï¼Œç›´åˆ°æ¥æ”¶ <code>&gt;</code>ã€‚ç„¶åå°†å‘é€æ–°çš„æ ‡è®°ï¼Œå¹¶å›åˆ°<strong>â€œæ•°æ®çŠ¶æ€â€</strong>ã€‚<code>&lt;/html&gt;</code> è¾“å…¥ä¹Ÿä¼šè¿›è¡ŒåŒæ ·çš„å¤„ç†ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image019.png\" alt=\"img\">å›¾ï¼šå¯¹ç¤ºä¾‹è¾“å…¥è¿›è¡Œæ ‡è®°åŒ–</p>\n<h4 id=\"æ ‘æ„å»ºç®—æ³•\"><a href=\"#æ ‘æ„å»ºç®—æ³•\" class=\"headerlink\" title=\"æ ‘æ„å»ºç®—æ³•\"></a>æ ‘æ„å»ºç®—æ³•</h4><p>åœ¨åˆ›å»ºè§£æå™¨çš„åŒæ—¶ï¼Œä¹Ÿä¼šåˆ›å»º Document å¯¹è±¡ã€‚åœ¨æ ‘æ„å»ºé˜¶æ®µï¼Œä»¥ Document ä¸ºæ ¹èŠ‚ç‚¹çš„ DOM æ ‘ä¹Ÿä¼šä¸æ–­è¿›è¡Œä¿®æ”¹ï¼Œå‘å…¶ä¸­æ·»åŠ å„ç§å…ƒç´ ã€‚æ ‡è®°ç”Ÿæˆå™¨å‘é€çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šç”±æ ‘æ„å»ºå™¨è¿›è¡Œå¤„ç†ã€‚è§„èŒƒä¸­å®šä¹‰äº†æ¯ä¸ªæ ‡è®°æ‰€å¯¹åº”çš„ DOM å…ƒç´ ï¼Œè¿™äº›å…ƒç´ ä¼šåœ¨æ¥æ”¶åˆ°ç›¸åº”çš„æ ‡è®°æ—¶åˆ›å»ºã€‚è¿™äº›å…ƒç´ ä¸ä»…ä¼šæ·»åŠ åˆ° DOM æ ‘ä¸­ï¼Œè¿˜ä¼šæ·»åŠ åˆ°å¼€æ”¾å…ƒç´ çš„å †æ ˆä¸­ã€‚æ­¤å †æ ˆç”¨äºçº æ­£åµŒå¥—é”™è¯¯å’Œå¤„ç†æœªå…³é—­çš„æ ‡è®°ã€‚å…¶ç®—æ³•ä¹Ÿå¯ä»¥ç”¨çŠ¶æ€æœºæ¥æè¿°ã€‚è¿™äº›çŠ¶æ€ç§°ä¸ºâ€œæ’å…¥æ¨¡å¼â€ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ç¤ºä¾‹è¾“å…¥çš„æ ‘æ„å»ºè¿‡ç¨‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    Hello world</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>æ ‘æ„å»ºé˜¶æ®µçš„è¾“å…¥æ˜¯ä¸€ä¸ªæ¥è‡ªæ ‡è®°åŒ–é˜¶æ®µçš„æ ‡è®°åºåˆ—ã€‚ç¬¬ä¸€ä¸ªæ¨¡å¼æ˜¯<strong>â€œinitial modeâ€</strong>ã€‚æ¥æ”¶ HTML æ ‡è®°åè½¬ä¸º<strong>â€œbefore htmlâ€</strong>æ¨¡å¼ï¼Œå¹¶åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹é‡æ–°å¤„ç†æ­¤æ ‡è®°ã€‚è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ª HTMLHtmlElement å…ƒç´ ï¼Œå¹¶å°†å…¶é™„åŠ åˆ° Document æ ¹å¯¹è±¡ä¸Šã€‚</p>\n<p>ç„¶åçŠ¶æ€å°†æ”¹ä¸º<strong>â€œbefore headâ€</strong>ã€‚æ­¤æ—¶æˆ‘ä»¬æ¥æ”¶â€œbodyâ€æ ‡è®°ã€‚å³ä½¿æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­æ²¡æœ‰â€œheadâ€æ ‡è®°ï¼Œç³»ç»Ÿä¹Ÿä¼šéšå¼åˆ›å»ºä¸€ä¸ª HTMLHeadElementï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ ‘ä¸­ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬è¿›å…¥äº†<strong>â€œin headâ€</strong>æ¨¡å¼ï¼Œç„¶åè½¬å…¥<strong>â€œafter headâ€</strong>æ¨¡å¼ã€‚ç³»ç»Ÿå¯¹ body æ ‡è®°è¿›è¡Œé‡æ–°å¤„ç†ï¼Œåˆ›å»ºå¹¶æ’å…¥ HTMLBodyElementï¼ŒåŒæ—¶æ¨¡å¼è½¬å˜ä¸º<strong>â€œin bodyâ€</strong>ã€‚</p>\n<p>ç°åœ¨ï¼Œæ¥æ”¶ç”±â€œHello worldâ€å­—ç¬¦ä¸²ç”Ÿæˆçš„ä¸€ç³»åˆ—å­—ç¬¦æ ‡è®°ã€‚æ¥æ”¶ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶ä¼šåˆ›å»ºå¹¶æ’å…¥â€œTextâ€èŠ‚ç‚¹ï¼Œè€Œå…¶ä»–å­—ç¬¦ä¹Ÿå°†é™„åŠ åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>\n<p>æ¥æ”¶ body ç»“æŸæ ‡è®°ä¼šè§¦å‘<strong>â€œafter bodyâ€</strong>æ¨¡å¼ã€‚ç°åœ¨æˆ‘ä»¬å°†æ¥æ”¶ HTML ç»“æŸæ ‡è®°ï¼Œç„¶åè¿›å…¥<strong>â€œafter after bodyâ€</strong>æ¨¡å¼ã€‚æ¥æ”¶åˆ°æ–‡ä»¶ç»“æŸæ ‡è®°åï¼Œè§£æè¿‡ç¨‹å°±æ­¤ç»“æŸã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image022.gif\" alt=\"img\">å›¾ï¼šç¤ºä¾‹ HTML çš„æ ‘æ„å»º</p>\n<h4 id=\"è§£æç»“æŸåçš„æ“ä½œ\"><a href=\"#è§£æç»“æŸåçš„æ“ä½œ\" class=\"headerlink\" title=\"è§£æç»“æŸåçš„æ“ä½œ\"></a>è§£æç»“æŸåçš„æ“ä½œ</h4><p>åœ¨æ­¤é˜¶æ®µï¼Œæµè§ˆå™¨ä¼šå°†æ–‡æ¡£æ ‡æ³¨ä¸ºäº¤äº’çŠ¶æ€ï¼Œå¹¶å¼€å§‹è§£æé‚£äº›å¤„äºâ€œdeferredâ€æ¨¡å¼çš„è„šæœ¬ï¼Œä¹Ÿå°±æ˜¯é‚£äº›åº”åœ¨æ–‡æ¡£è§£æå®Œæˆåæ‰æ‰§è¡Œçš„è„šæœ¬ã€‚ç„¶åï¼Œæ–‡æ¡£çŠ¶æ€å°†è®¾ç½®ä¸ºâ€œå®Œæˆâ€ï¼Œä¸€ä¸ªâ€œåŠ è½½â€äº‹ä»¶å°†éšä¹‹è§¦å‘ã€‚</p>\n<p>æ‚¨å¯ä»¥<a href=\"http://www.w3.org/TR/html5/syntax.html#html-parser\">åœ¨ HTML5 è§„èŒƒä¸­æŸ¥çœ‹æ ‡è®°åŒ–å’Œæ ‘æ„å»ºçš„å®Œæ•´ç®—æ³•</a></p>\n<h4 id=\"æµè§ˆå™¨çš„å®¹é”™æœºåˆ¶\"><a href=\"#æµè§ˆå™¨çš„å®¹é”™æœºåˆ¶\" class=\"headerlink\" title=\"æµè§ˆå™¨çš„å®¹é”™æœºåˆ¶\"></a>æµè§ˆå™¨çš„å®¹é”™æœºåˆ¶</h4><p>æ‚¨åœ¨æµè§ˆ HTML ç½‘é¡µæ—¶ä»æ¥ä¸ä¼šçœ‹åˆ°â€œè¯­æ³•æ— æ•ˆâ€çš„é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨ä¼šçº æ­£ä»»ä½•æ— æ•ˆå†…å®¹ï¼Œç„¶åç»§ç»­å·¥ä½œã€‚</p>\n<p>ä»¥ä¸‹é¢çš„ HTML ä»£ç ä¸ºä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;mytag&gt;</span><br><span class=\"line\">  &lt;&#x2F;mytag&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">  &lt;p&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">    Really lousy HTML</span><br><span class=\"line\">  &lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘å·²ç»è¿åäº†å¾ˆå¤šè¯­æ³•è§„åˆ™ï¼ˆâ€œmytagâ€ä¸æ˜¯æ ‡å‡†çš„æ ‡è®°ï¼Œâ€œpâ€å’Œâ€œdivâ€å…ƒç´ ä¹‹é—´çš„åµŒå¥—æœ‰è¯¯ç­‰ç­‰ï¼‰ï¼Œä½†æ˜¯æµè§ˆå™¨ä»ç„¶ä¼šæ­£ç¡®åœ°æ˜¾ç¤ºè¿™äº›å†…å®¹ï¼Œå¹¶ä¸”æ¯«æ— æ€¨è¨€ã€‚å› ä¸ºæœ‰å¤§é‡çš„è§£æå™¨ä»£ç ä¼šçº æ­£ HTML ç½‘é¡µä½œè€…çš„é”™è¯¯ã€‚</p>\n<p>ä¸åŒæµè§ˆå™¨çš„é”™è¯¯å¤„ç†æœºåˆ¶ç›¸å½“ä¸€è‡´ï¼Œä½†ä»¤äººç§°å¥‡çš„æ˜¯ï¼Œè¿™ç§æœºåˆ¶å¹¶ä¸æ˜¯ HTML å½“å‰è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚å’Œä¹¦ç­¾ç®¡ç†ä»¥åŠå‰è¿›/åé€€æŒ‰é’®ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯æµè§ˆå™¨åœ¨å¤šå¹´å‘å±•ä¸­çš„äº§ç‰©ã€‚å¾ˆå¤šç½‘ç«™éƒ½æ™®éå­˜åœ¨ç€ä¸€äº›å·²çŸ¥çš„æ— æ•ˆ HTML ç»“æ„ï¼Œæ¯ä¸€ç§æµè§ˆå™¨éƒ½ä¼šå°è¯•é€šè¿‡å’Œå…¶ä»–æµè§ˆå™¨ä¸€æ ·çš„æ–¹å¼æ¥ä¿®å¤è¿™äº›æ— æ•ˆç»“æ„ã€‚</p>\n<p>HTML5 è§„èŒƒå®šä¹‰äº†ä¸€éƒ¨åˆ†è¿™æ ·çš„è¦æ±‚ã€‚WebKit åœ¨ HTML è§£æå™¨ç±»çš„å¼€å¤´æ³¨é‡Šä¸­å¯¹æ­¤åšäº†å¾ˆå¥½çš„æ¦‚æ‹¬ã€‚</p>\n<blockquote>\n<p>è§£æå™¨å¯¹æ ‡è®°åŒ–è¾“å…¥å†…å®¹è¿›è¡Œè§£æï¼Œä»¥æ„å»ºæ–‡æ¡£æ ‘ã€‚å¦‚æœæ–‡æ¡£çš„æ ¼å¼æ­£ç¡®ï¼Œå°±ç›´æ¥è¿›è¡Œè§£æã€‚</p>\n<p>é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¤„ç†å¾ˆå¤šæ ¼å¼é”™è¯¯çš„ HTML æ–‡æ¡£ï¼Œæ‰€ä»¥è§£æå™¨å¿…é¡»å…·å¤‡ä¸€å®šçš„å®¹é”™æ€§ã€‚</p>\n<p>æˆ‘ä»¬è‡³å°‘è¦èƒ½å¤Ÿå¤„ç†ä»¥ä¸‹é”™è¯¯æƒ…å†µï¼š</p>\n<ol>\n<li>æ˜æ˜¾ä¸èƒ½åœ¨æŸäº›å¤–éƒ¨æ ‡è®°ä¸­æ·»åŠ çš„å…ƒç´ ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å…³é—­æ‰€æœ‰æ ‡è®°ï¼Œç›´åˆ°å‡ºç°ç¦æ­¢æ·»åŠ çš„å…ƒç´ ï¼Œç„¶åå†åŠ å…¥è¯¥å…ƒç´ ã€‚</li>\n<li>æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ·»åŠ çš„å…ƒç´ ã€‚è¿™å¾ˆå¯èƒ½æ˜¯ç½‘é¡µä½œè€…å¿˜è®°æ·»åŠ äº†å…¶ä¸­çš„ä¸€äº›æ ‡è®°ï¼ˆæˆ–è€…å…¶ä¸­çš„æ ‡è®°æ˜¯å¯é€‰çš„ï¼‰ã€‚è¿™äº›æ ‡ç­¾å¯èƒ½åŒ…æ‹¬ï¼šHTML HEAD BODY TBODY TR TD LIï¼ˆè¿˜æœ‰é—æ¼çš„å—ï¼Ÿï¼‰ã€‚</li>\n<li>å‘ inline å…ƒç´ å†…æ·»åŠ  block å…ƒç´ ã€‚å…³é—­æ‰€æœ‰ inline å…ƒç´ ï¼Œç›´åˆ°å‡ºç°ä¸‹ä¸€ä¸ªè¾ƒé«˜çº§çš„ block å…ƒç´ ã€‚</li>\n<li>å¦‚æœè¿™æ ·ä»ç„¶æ— æ•ˆï¼Œå¯å…³é—­æ‰€æœ‰å…ƒç´ ï¼Œç›´åˆ°å¯ä»¥æ·»åŠ å…ƒç´ ä¸ºæ­¢ï¼Œæˆ–è€…å¿½ç•¥è¯¥æ ‡è®°ã€‚</li>\n</ol>\n</blockquote>\n<p>è®©æˆ‘ä»¬çœ‹ä¸€äº› WebKit å®¹é”™çš„ç¤ºä¾‹ï¼š</p>\n<h5 id=\"ä½¿ç”¨äº†-è€Œä¸æ˜¯\"><a href=\"#ä½¿ç”¨äº†-è€Œä¸æ˜¯\" class=\"headerlink\" title=\"ä½¿ç”¨äº†  è€Œä¸æ˜¯ \"></a>ä½¿ç”¨äº† </br> è€Œä¸æ˜¯ <br></h5><p>æœ‰äº›ç½‘ç«™ä½¿ç”¨äº† </br> è€Œä¸æ˜¯ <br>ã€‚ä¸ºäº†ä¸ IE å’Œ Firefox å…¼å®¹ï¼ŒWebKit å°†å…¶ä¸ <br> åšåŒæ ·çš„å¤„ç†ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (t-&gt;isCloseTag(brTag) &amp;&amp; m_document-&gt;inCompatMode()) &#123;</span><br><span class=\"line\">     reportError(MalformedBRError);</span><br><span class=\"line\">     t-&gt;beginTag &#x3D; true;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¯·æ³¨æ„ï¼Œé”™è¯¯å¤„ç†æ˜¯åœ¨å†…éƒ¨è¿›è¡Œçš„ï¼Œç”¨æˆ·å¹¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹ã€‚</p>\n<h5 id=\"ç¦»æ•£è¡¨æ ¼\"><a href=\"#ç¦»æ•£è¡¨æ ¼\" class=\"headerlink\" title=\"ç¦»æ•£è¡¨æ ¼\"></a>ç¦»æ•£è¡¨æ ¼</h5><p>ç¦»æ•£è¡¨æ ¼æ˜¯æŒ‡ä½äºå…¶ä»–è¡¨æ ¼å†…å®¹ä¸­ï¼Œä½†åˆä¸åœ¨ä»»ä½•ä¸€ä¸ªå•å…ƒæ ¼å†…çš„è¡¨æ ¼ã€‚<br>æ¯”å¦‚ä»¥ä¸‹çš„ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;table&gt;</span><br><span class=\"line\">    &lt;table&gt;</span><br><span class=\"line\">        &lt;tr&gt;&lt;td&gt;inner table&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;</span><br><span class=\"line\">    &lt;&#x2F;table&gt;</span><br><span class=\"line\">    &lt;tr&gt;&lt;td&gt;outer table&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;</span><br><span class=\"line\">&lt;&#x2F;table&gt;</span><br></pre></td></tr></table></figure>\n\n<p>WebKit ä¼šå°†å…¶å±‚æ¬¡ç»“æ„æ›´æ”¹ä¸ºä¸¤ä¸ªåŒçº§è¡¨æ ¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;table&gt;</span><br><span class=\"line\">    &lt;tr&gt;&lt;td&gt;outer table&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;</span><br><span class=\"line\">&lt;&#x2F;table&gt;</span><br><span class=\"line\">&lt;table&gt;</span><br><span class=\"line\">    &lt;tr&gt;&lt;td&gt;inner table&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;</span><br><span class=\"line\">&lt;&#x2F;table&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (m_inStrayTableContent &amp;&amp; localName &#x3D;&#x3D; tableTag)</span><br><span class=\"line\">        popBlock(tableTag);</span><br></pre></td></tr></table></figure>\n\n<p>WebKit ä½¿ç”¨ä¸€ä¸ªå †æ ˆæ¥ä¿å­˜å½“å‰çš„å…ƒç´ å†…å®¹ï¼Œå®ƒä¼šä»å¤–éƒ¨è¡¨æ ¼çš„å †æ ˆä¸­å¼¹å‡ºå†…éƒ¨è¡¨æ ¼ã€‚ç°åœ¨ï¼Œè¿™ä¸¤ä¸ªè¡¨æ ¼å°±å˜æˆäº†åŒçº§å…³ç³»ã€‚</p>\n<h5 id=\"åµŒå¥—çš„è¡¨å•å…ƒç´ \"><a href=\"#åµŒå¥—çš„è¡¨å•å…ƒç´ \" class=\"headerlink\" title=\"åµŒå¥—çš„è¡¨å•å…ƒç´ \"></a>åµŒå¥—çš„è¡¨å•å…ƒç´ </h5><p>å¦‚æœç”¨æˆ·åœ¨ä¸€ä¸ªè¡¨å•å…ƒç´ ä¸­åˆæ”¾å…¥äº†å¦ä¸€ä¸ªè¡¨å•ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªè¡¨å•å°†è¢«å¿½ç•¥ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (!m_currentFormElement) &#123;</span><br><span class=\"line\">        m_currentFormElement &#x3D; new HTMLFormElement(formTag,    m_document);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"è¿‡äºå¤æ‚çš„æ ‡è®°å±‚æ¬¡ç»“æ„\"><a href=\"#è¿‡äºå¤æ‚çš„æ ‡è®°å±‚æ¬¡ç»“æ„\" class=\"headerlink\" title=\"è¿‡äºå¤æ‚çš„æ ‡è®°å±‚æ¬¡ç»“æ„\"></a>è¿‡äºå¤æ‚çš„æ ‡è®°å±‚æ¬¡ç»“æ„</h5><p>ä»£ç çš„æ³¨é‡Šå·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†ã€‚</p>\n<blockquote>\n<p>ç¤ºä¾‹ç½‘ç«™ <a href=\"http://www.liceo.edu.mx/\">www.liceo.edu.mx</a> åµŒå¥—äº†çº¦ 1500 ä¸ªæ ‡è®°ï¼Œå…¨éƒ½æ¥è‡ªä¸€å † <b> æ ‡è®°ã€‚æˆ‘ä»¬åªå…è®¸æœ€å¤š 20 å±‚åŒç±»å‹æ ‡è®°çš„åµŒå¥—ï¼Œå¦‚æœå†åµŒå¥—æ›´å¤šï¼Œå°±ä¼šå…¨éƒ¨å¿½ç•¥ã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">bool HTMLParser::allowNestedRedundantTag(const AtomicString&amp; tagName)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">unsigned i &#x3D; 0;</span><br><span class=\"line\">for (HTMLStackElem* curr &#x3D; m_blockStack;</span><br><span class=\"line\">         i &lt; cMaxRedundantTagDepth &amp;&amp; curr &amp;&amp; curr-&gt;tagName &#x3D;&#x3D; tagName;</span><br><span class=\"line\">     curr &#x3D; curr-&gt;next, i++) &#123; &#125;</span><br><span class=\"line\">return i !&#x3D; cMaxRedundantTagDepth;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"æ”¾é”™ä½ç½®çš„-html-æˆ–è€…-body-ç»“æŸæ ‡è®°\"><a href=\"#æ”¾é”™ä½ç½®çš„-html-æˆ–è€…-body-ç»“æŸæ ‡è®°\" class=\"headerlink\" title=\"æ”¾é”™ä½ç½®çš„ html æˆ–è€… body ç»“æŸæ ‡è®°\"></a>æ”¾é”™ä½ç½®çš„ html æˆ–è€… body ç»“æŸæ ‡è®°</h5><p>åŒæ ·ï¼Œä»£ç çš„æ³¨é‡Šå·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†ã€‚</p>\n<blockquote>\n<p>æ”¯æŒæ ¼å¼éå¸¸ç³Ÿç³•çš„ HTML ä»£ç ã€‚æˆ‘ä»¬ä»ä¸å…³é—­ body æ ‡è®°ï¼Œå› ä¸ºä¸€äº›æ„šè ¢çš„ç½‘é¡µä¼šåœ¨å®é™…æ–‡æ¡£ç»“æŸä¹‹å‰å°±å…³é—­ã€‚æˆ‘ä»¬é€šè¿‡è°ƒç”¨ end() æ¥æ‰§è¡Œå…³é—­æ“ä½œã€‚</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (t-&gt;tagName &#x3D;&#x3D; htmlTag || t-&gt;tagName &#x3D;&#x3D; bodyTag )</span><br><span class=\"line\">        return;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥ç½‘é¡µä½œè€…éœ€è¦æ³¨æ„ï¼Œé™¤éæ‚¨æƒ³ä½œä¸ºåé¢æ•™æå‡ºç°åœ¨ WebKit å®¹é”™ä»£ç æ®µçš„ç¤ºä¾‹ä¸­ï¼Œå¦åˆ™è¿˜è¯·ç¼–å†™æ ¼å¼æ­£ç¡®çš„ HTML ä»£ç ã€‚</p>\n<h3 id=\"CSS-è§£æ\"><a href=\"#CSS-è§£æ\" class=\"headerlink\" title=\"CSS è§£æ\"></a>CSS è§£æ</h3><p>è¿˜è®°å¾—ç®€ä»‹ä¸­è§£æçš„æ¦‚å¿µå—ï¼Ÿå’Œ HTML ä¸åŒï¼ŒCSS æ˜¯ä¸Šä¸‹æ–‡æ— å…³çš„è¯­æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç®€ä»‹ä¸­æè¿°çš„å„ç§è§£æå™¨è¿›è¡Œè§£æã€‚äº‹å®ä¸Šï¼Œ<a href=\"http://www.w3.org/TR/CSS2/grammar.html\">CSS è§„èŒƒå®šä¹‰äº† CSS çš„è¯æ³•å’Œè¯­æ³•</a>ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ç¤ºä¾‹ï¼š<br>è¯æ³•è¯­æ³•ï¼ˆè¯æ±‡ï¼‰æ˜¯é’ˆå¯¹å„ä¸ªæ ‡è®°ç”¨æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰çš„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">comment   \\&#x2F;\\*[^*]*\\*+([^&#x2F;*][^*]*\\*+)*\\&#x2F;</span><br><span class=\"line\">num   [0-9]+|[0-9]*&quot;.&quot;[0-9]+</span><br><span class=\"line\">nonascii  [\\200-\\377]</span><br><span class=\"line\">nmstart   [_a-z]|&#123;nonascii&#125;|&#123;escape&#125;</span><br><span class=\"line\">nmchar    [_a-z0-9-]|&#123;nonascii&#125;|&#123;escape&#125;</span><br><span class=\"line\">name    &#123;nmchar&#125;+</span><br><span class=\"line\">ident   &#123;nmstart&#125;&#123;nmchar&#125;*</span><br></pre></td></tr></table></figure>\n\n<p>â€œidentâ€æ˜¯æ ‡è¯†ç¬¦ (identifier) çš„ç¼©å†™ï¼Œæ¯”å¦‚ç±»åã€‚â€œnameâ€æ˜¯å…ƒç´ çš„ IDï¼ˆé€šè¿‡â€œ#â€æ¥å¼•ç”¨ï¼‰ã€‚</p>\n<p>è¯­æ³•æ˜¯é‡‡ç”¨ BNF æ ¼å¼æè¿°çš„ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">ruleset</span></span><br><span class=\"line\">  : <span class=\"selector-tag\">selector</span> <span class=\"selector-attr\">[ <span class=\"string\">&#x27;,&#x27;</span> S* selector ]</span>*</span><br><span class=\"line\">    &#x27;&#123;&#x27; S* declaration [ &#x27;;&#x27; S* declaration ]* &#x27;&#125;&#x27; S*</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">selector</span></span><br><span class=\"line\">  : <span class=\"selector-tag\">simple_selector</span> <span class=\"selector-attr\">[ combinator selector | S+ [ combinator? selector ]</span>? ]?</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">simple_selector</span></span><br><span class=\"line\">  : <span class=\"selector-tag\">element_name</span> <span class=\"selector-attr\">[ HASH | class | attrib | pseudo ]</span>*</span><br><span class=\"line\">  | [ HASH | class | attrib | pseudo ]+</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">class</span></span><br><span class=\"line\">  : &#x27;.&#x27; IDENT</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">element_name</span></span><br><span class=\"line\">  : IDENT | &#x27;*&#x27;</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">attrib</span></span><br><span class=\"line\">  : &#x27;[&#x27; S* IDENT S* [ [ &#x27;=&#x27; | INCLUDES | DASHMATCH ] S*</span><br><span class=\"line\">    [ IDENT | STRING ] S* ] &#x27;]&#x27;</span><br><span class=\"line\">  ;</span><br><span class=\"line\"><span class=\"selector-tag\">pseudo</span></span><br><span class=\"line\">  : &#x27;:&#x27; [ IDENT | FUNCTION S* [IDENT S*] &#x27;)&#x27; ]</span><br><span class=\"line\">  ;</span><br></pre></td></tr></table></figure>\n\n<p>è§£é‡Šï¼šè¿™æ˜¯ä¸€ä¸ªè§„åˆ™é›†çš„ç»“æ„ï¼š</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span><span class=\"selector-class\">.error</span> , <span class=\"selector-tag\">a</span><span class=\"selector-class\">.error</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>:red;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>:bold;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>div.error å’Œ a.error æ˜¯é€‰æ‹©å™¨ã€‚å¤§æ‹¬å·å†…çš„éƒ¨åˆ†åŒ…å«äº†ç”±æ­¤è§„åˆ™é›†åº”ç”¨çš„è§„åˆ™ã€‚æ­¤ç»“æ„çš„æ­£å¼å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">ruleset</span></span><br><span class=\"line\">  : <span class=\"selector-tag\">selector</span> <span class=\"selector-attr\">[ <span class=\"string\">&#x27;,&#x27;</span> S* selector ]</span>*</span><br><span class=\"line\">    &#x27;&#123;&#x27; S* declaration [ &#x27;;&#x27; S* declaration ]* &#x27;&#125;&#x27; S*</span><br><span class=\"line\">  ;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™è¡¨ç¤ºä¸€ä¸ªè§„åˆ™é›†å°±æ˜¯ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œæˆ–è€…ç”±é€—å·å’Œç©ºæ ¼ï¼ˆS è¡¨ç¤ºç©ºæ ¼ï¼‰åˆ†éš”çš„å¤šä¸ªï¼ˆæ•°é‡å¯é€‰ï¼‰é€‰æ‹©å™¨ã€‚è§„åˆ™é›†åŒ…å«äº†å¤§æ‹¬å·ï¼Œä»¥åŠå…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆæ•°é‡å¯é€‰ï¼‰ç”±åˆ†å·åˆ†éš”çš„å£°æ˜ã€‚â€œå£°æ˜â€å’Œâ€œé€‰æ‹©å™¨â€å°†ç”±ä¸‹é¢çš„ BNF æ ¼å¼å®šä¹‰ã€‚</p>\n<h4 id=\"WebKit-CSS-è§£æå™¨\"><a href=\"#WebKit-CSS-è§£æå™¨\" class=\"headerlink\" title=\"WebKit CSS è§£æå™¨\"></a>WebKit CSS è§£æå™¨</h4><p>WebKit ä½¿ç”¨ <a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#parser_generators\">Flex å’Œ Bison</a> è§£æå™¨ç”Ÿæˆå™¨ï¼Œé€šè¿‡ CSS è¯­æ³•æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºè§£æå™¨ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰åœ¨è§£æå™¨ç®€ä»‹ä¸­æ‰€è¯´ï¼ŒBison ä¼šåˆ›å»ºè‡ªä¸‹è€Œä¸Šçš„ç§»ä½å½’çº¦è§£æå™¨ã€‚Firefox ä½¿ç”¨çš„æ˜¯äººå·¥ç¼–å†™çš„è‡ªä¸Šè€Œä¸‹çš„è§£æå™¨ã€‚è¿™ä¸¤ç§è§£æå™¨éƒ½ä¼šå°† CSS æ–‡ä»¶è§£ææˆ StyleSheet å¯¹è±¡ï¼Œä¸”æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å« CSS è§„åˆ™ã€‚CSS è§„åˆ™å¯¹è±¡åˆ™åŒ…å«é€‰æ‹©å™¨å’Œå£°æ˜å¯¹è±¡ï¼Œä»¥åŠå…¶ä»–ä¸ CSS è¯­æ³•å¯¹åº”çš„å¯¹è±¡ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image023.png\" alt=\"img\">å›¾ï¼šè§£æ CSS</p>\n<h3 id=\"å¤„ç†è„šæœ¬å’Œæ ·å¼è¡¨çš„é¡ºåº\"><a href=\"#å¤„ç†è„šæœ¬å’Œæ ·å¼è¡¨çš„é¡ºåº\" class=\"headerlink\" title=\"å¤„ç†è„šæœ¬å’Œæ ·å¼è¡¨çš„é¡ºåº\"></a>å¤„ç†è„šæœ¬å’Œæ ·å¼è¡¨çš„é¡ºåº</h3><h4 id=\"è„šæœ¬\"><a href=\"#è„šæœ¬\" class=\"headerlink\" title=\"è„šæœ¬\"></a>è„šæœ¬</h4><p>ç½‘ç»œçš„æ¨¡å‹æ˜¯åŒæ­¥çš„ã€‚ç½‘é¡µä½œè€…å¸Œæœ›è§£æå™¨é‡åˆ° <script> æ ‡è®°æ—¶ç«‹å³è§£æå¹¶æ‰§è¡Œè„šæœ¬ã€‚æ–‡æ¡£çš„è§£æå°†åœæ­¢ï¼Œç›´åˆ°è„šæœ¬æ‰§è¡Œå®Œæ¯•ã€‚å¦‚æœè„šæœ¬æ˜¯å¤–éƒ¨çš„ï¼Œé‚£ä¹ˆè§£æè¿‡ç¨‹ä¼šåœæ­¢ï¼Œç›´åˆ°ä»ç½‘ç»œåŒæ­¥æŠ“å–èµ„æºå®Œæˆåå†ç»§ç»­ã€‚æ­¤æ¨¡å‹å·²ç»ä½¿ç”¨äº†å¤šå¹´ï¼Œä¹Ÿåœ¨ HTML4 å’Œ HTML5 è§„èŒƒä¸­è¿›è¡Œäº†æŒ‡å®šã€‚ä½œè€…ä¹Ÿå¯ä»¥å°†è„šæœ¬æ ‡æ³¨ä¸ºâ€œdeferâ€ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šåœæ­¢æ–‡æ¡£è§£æï¼Œè€Œæ˜¯ç­‰åˆ°è§£æç»“æŸæ‰æ‰§è¡Œã€‚HTML5 å¢åŠ äº†ä¸€ä¸ªé€‰é¡¹ï¼Œå¯å°†è„šæœ¬æ ‡è®°ä¸ºå¼‚æ­¥ï¼Œä»¥ä¾¿ç”±å…¶ä»–çº¿ç¨‹è§£æå’Œæ‰§è¡Œã€‚</p>\n<h4 id=\"é¢„è§£æ\"><a href=\"#é¢„è§£æ\" class=\"headerlink\" title=\"é¢„è§£æ\"></a>é¢„è§£æ</h4><p>WebKit å’Œ Firefox éƒ½è¿›è¡Œäº†è¿™é¡¹ä¼˜åŒ–ã€‚åœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¼šè§£ææ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ï¼Œæ‰¾å‡ºå¹¶åŠ è½½éœ€è¦é€šè¿‡ç½‘ç»œåŠ è½½çš„å…¶ä»–èµ„æºã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œèµ„æºå¯ä»¥åœ¨å¹¶è¡Œè¿æ¥ä¸ŠåŠ è½½ï¼Œä»è€Œæé«˜æ€»ä½“é€Ÿåº¦ã€‚è¯·æ³¨æ„ï¼Œé¢„è§£æå™¨ä¸ä¼šä¿®æ”¹ DOM æ ‘ï¼Œè€Œæ˜¯å°†è¿™é¡¹å·¥ä½œäº¤ç”±ä¸»è§£æå™¨å¤„ç†ï¼›é¢„è§£æå™¨åªä¼šè§£æå¤–éƒ¨èµ„æºï¼ˆä¾‹å¦‚å¤–éƒ¨è„šæœ¬ã€æ ·å¼è¡¨å’Œå›¾ç‰‡ï¼‰çš„å¼•ç”¨ã€‚</p>\n<h4 id=\"æ ·å¼è¡¨\"><a href=\"#æ ·å¼è¡¨\" class=\"headerlink\" title=\"æ ·å¼è¡¨\"></a>æ ·å¼è¡¨</h4><p>å¦ä¸€æ–¹é¢ï¼Œæ ·å¼è¡¨æœ‰ç€ä¸åŒçš„æ¨¡å‹ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œåº”ç”¨æ ·å¼è¡¨ä¸ä¼šæ›´æ”¹ DOM æ ‘ï¼Œå› æ­¤ä¼¼ä¹æ²¡æœ‰å¿…è¦ç­‰å¾…æ ·å¼è¡¨å¹¶åœæ­¢æ–‡æ¡£è§£æã€‚ä½†è¿™æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è„šæœ¬åœ¨æ–‡æ¡£è§£æé˜¶æ®µä¼šè¯·æ±‚æ ·å¼ä¿¡æ¯ã€‚å¦‚æœå½“æ—¶è¿˜æ²¡æœ‰åŠ è½½å’Œè§£ææ ·å¼ï¼Œè„šæœ¬å°±ä¼šè·å¾—é”™è¯¯çš„å›å¤ï¼Œè¿™æ ·æ˜¾ç„¶ä¼šäº§ç”Ÿå¾ˆå¤šé—®é¢˜ã€‚è¿™çœ‹ä¸Šå»æ˜¯ä¸€ä¸ªéå…¸å‹æ¡ˆä¾‹ï¼Œä½†äº‹å®ä¸Šéå¸¸æ™®éã€‚Firefox åœ¨æ ·å¼è¡¨åŠ è½½å’Œè§£æçš„è¿‡ç¨‹ä¸­ï¼Œä¼šç¦æ­¢æ‰€æœ‰è„šæœ¬ã€‚è€Œå¯¹äº WebKit è€Œè¨€ï¼Œä»…å½“è„šæœ¬å°è¯•è®¿é—®çš„æ ·å¼å±æ€§å¯èƒ½å—å°šæœªåŠ è½½çš„æ ·å¼è¡¨å½±å“æ—¶ï¼Œå®ƒæ‰ä¼šç¦æ­¢è¯¥è„šæœ¬ã€‚</p>\n<h3 id=\"å‘ˆç°æ ‘æ„å»º\"><a href=\"#å‘ˆç°æ ‘æ„å»º\" class=\"headerlink\" title=\"å‘ˆç°æ ‘æ„å»º\"></a>å‘ˆç°æ ‘æ„å»º</h3><p>åœ¨ DOM æ ‘æ„å»ºçš„åŒæ—¶ï¼Œæµè§ˆå™¨è¿˜ä¼šæ„å»ºå¦ä¸€ä¸ªæ ‘ç»“æ„ï¼šå‘ˆç°æ ‘ã€‚è¿™æ˜¯ç”±å¯è§†åŒ–å…ƒç´ æŒ‰ç…§å…¶æ˜¾ç¤ºé¡ºåºè€Œç»„æˆçš„æ ‘ï¼Œä¹Ÿæ˜¯æ–‡æ¡£çš„å¯è§†åŒ–è¡¨ç¤ºã€‚å®ƒçš„ä½œç”¨æ˜¯è®©æ‚¨æŒ‰ç…§æ­£ç¡®çš„é¡ºåºç»˜åˆ¶å†…å®¹ã€‚</p>\n<p>Firefox å°†å‘ˆç°æ ‘ä¸­çš„å…ƒç´ ç§°ä¸ºâ€œæ¡†æ¶â€ã€‚WebKit ä½¿ç”¨çš„æœ¯è¯­æ˜¯å‘ˆç°å™¨æˆ–å‘ˆç°å¯¹è±¡ã€‚<br>å‘ˆç°å™¨çŸ¥é“å¦‚ä½•å¸ƒå±€å¹¶å°†è‡ªèº«åŠå…¶å­å…ƒç´ ç»˜åˆ¶å‡ºæ¥ã€‚<br>WebKits RenderObject ç±»æ˜¯æ‰€æœ‰å‘ˆç°å™¨çš„åŸºç±»ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class RenderObject&#123;</span><br><span class=\"line\">  virtual void layout();</span><br><span class=\"line\">  virtual void paint(PaintInfo);</span><br><span class=\"line\">  virtual void rect repaintRect();</span><br><span class=\"line\">  Node* node;  &#x2F;&#x2F;the DOM node</span><br><span class=\"line\">  RenderStyle* style;  &#x2F;&#x2F; the computed style</span><br><span class=\"line\">  RenderLayer* containgLayer; &#x2F;&#x2F;the containing z-index layer</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¯ä¸€ä¸ªå‘ˆç°å™¨éƒ½ä»£è¡¨äº†ä¸€ä¸ªçŸ©å½¢çš„åŒºåŸŸï¼Œé€šå¸¸å¯¹åº”äºç›¸å…³èŠ‚ç‚¹çš„ CSS æ¡†ï¼Œè¿™ä¸€ç‚¹åœ¨ CSS2 è§„èŒƒä¸­æœ‰æ‰€æè¿°ã€‚å®ƒåŒ…å«è¯¸å¦‚å®½åº¦ã€é«˜åº¦å’Œä½ç½®ç­‰å‡ ä½•ä¿¡æ¯ã€‚<br>æ¡†çš„ç±»å‹ä¼šå—åˆ°ä¸èŠ‚ç‚¹ç›¸å…³çš„â€œdisplayâ€æ ·å¼å±æ€§çš„å½±å“ï¼ˆè¯·å‚é˜…<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#style_computation\">æ ·å¼è®¡ç®—</a>ç« èŠ‚ï¼‰ã€‚ä¸‹é¢è¿™æ®µ WebKit ä»£ç æè¿°äº†æ ¹æ® display å±æ€§çš„ä¸åŒï¼Œé’ˆå¯¹åŒä¸€ä¸ª DOM èŠ‚ç‚¹åº”åˆ›å»ºä»€ä¹ˆç±»å‹çš„å‘ˆç°å™¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">RenderObject* RenderObject::createObject(Node* node, RenderStyle* style)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Document* doc &#x3D; node-&gt;document();</span><br><span class=\"line\">    RenderArena* arena &#x3D; doc-&gt;renderArena();</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    RenderObject* o &#x3D; 0;</span><br><span class=\"line\"></span><br><span class=\"line\">    switch (style-&gt;display()) &#123;</span><br><span class=\"line\">        case NONE:</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        case INLINE:</span><br><span class=\"line\">            o &#x3D; new (arena) RenderInline(node);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        case BLOCK:</span><br><span class=\"line\">            o &#x3D; new (arena) RenderBlock(node);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        case INLINE_BLOCK:</span><br><span class=\"line\">            o &#x3D; new (arena) RenderBlock(node);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">        case LIST_ITEM:</span><br><span class=\"line\">            o &#x3D; new (arena) RenderListItem(node);</span><br><span class=\"line\">            break;</span><br><span class=\"line\">       ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    return o;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å…ƒç´ ç±»å‹ä¹Ÿæ˜¯è€ƒè™‘å› ç´ ä¹‹ä¸€ï¼Œä¾‹å¦‚è¡¨å•æ§ä»¶å’Œè¡¨æ ¼éƒ½å¯¹åº”ç‰¹æ®Šçš„æ¡†æ¶ã€‚<br>åœ¨ WebKit ä¸­ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ éœ€è¦åˆ›å»ºç‰¹æ®Šçš„å‘ˆç°å™¨ï¼Œå°±ä¼šæ›¿æ¢ <code>createRenderer</code> æ–¹æ³•ã€‚å‘ˆç°å™¨æ‰€æŒ‡å‘çš„æ ·å¼å¯¹è±¡ä¸­åŒ…å«äº†ä¸€äº›å’Œå‡ ä½•æ— å…³çš„ä¿¡æ¯ã€‚</p>\n<h5 id=\"å‘ˆç°æ ‘å’Œ-DOM-æ ‘çš„å…³ç³»\"><a href=\"#å‘ˆç°æ ‘å’Œ-DOM-æ ‘çš„å…³ç³»\" class=\"headerlink\" title=\"å‘ˆç°æ ‘å’Œ DOM æ ‘çš„å…³ç³»\"></a>å‘ˆç°æ ‘å’Œ DOM æ ‘çš„å…³ç³»</h5><p>å‘ˆç°å™¨æ˜¯å’Œ DOM å…ƒç´ ç›¸å¯¹åº”çš„ï¼Œä½†å¹¶éä¸€ä¸€å¯¹åº”ã€‚éå¯è§†åŒ–çš„ DOM å…ƒç´ ä¸ä¼šæ’å…¥å‘ˆç°æ ‘ä¸­ï¼Œä¾‹å¦‚â€œheadâ€å…ƒç´ ã€‚å¦‚æœå…ƒç´ çš„ display å±æ€§å€¼ä¸ºâ€œnoneâ€ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šæ˜¾ç¤ºåœ¨å‘ˆç°æ ‘ä¸­ï¼ˆä½†æ˜¯ visibility å±æ€§å€¼ä¸ºâ€œhiddenâ€çš„å…ƒç´ ä»ä¼šæ˜¾ç¤ºï¼‰ã€‚</p>\n<p>æœ‰ä¸€äº› DOM å…ƒç´ å¯¹åº”å¤šä¸ªå¯è§†åŒ–å¯¹è±¡ã€‚å®ƒä»¬å¾€å¾€æ˜¯å…·æœ‰å¤æ‚ç»“æ„çš„å…ƒç´ ï¼Œæ— æ³•ç”¨å•ä¸€çš„çŸ©å½¢æ¥æè¿°ã€‚ä¾‹å¦‚ï¼Œâ€œselectâ€å…ƒç´ æœ‰ 3 ä¸ªå‘ˆç°å™¨ï¼šä¸€ä¸ªç”¨äºæ˜¾ç¤ºåŒºåŸŸï¼Œä¸€ä¸ªç”¨äºä¸‹æ‹‰åˆ—è¡¨æ¡†ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äºæŒ‰é’®ã€‚å¦‚æœç”±äºå®½åº¦ä¸å¤Ÿï¼Œæ–‡æœ¬æ— æ³•åœ¨ä¸€è¡Œä¸­æ˜¾ç¤ºè€Œåˆ†ä¸ºå¤šè¡Œï¼Œé‚£ä¹ˆæ–°çš„è¡Œä¹Ÿä¼šä½œä¸ºæ–°çš„å‘ˆç°å™¨è€Œæ·»åŠ ã€‚<br>å¦ä¸€ä¸ªå…³äºå¤šå‘ˆç°å™¨çš„ä¾‹å­æ˜¯æ ¼å¼æ— æ•ˆçš„ HTMLã€‚æ ¹æ® CSS è§„èŒƒï¼Œinline å…ƒç´ åªèƒ½åŒ…å« block å…ƒç´ æˆ– inline å…ƒç´ ä¸­çš„ä¸€ç§ã€‚å¦‚æœå‡ºç°äº†æ··åˆå†…å®¹ï¼Œåˆ™åº”åˆ›å»ºåŒ¿åçš„ block å‘ˆç°å™¨ï¼Œä»¥åŒ…è£¹ inline å…ƒç´ ã€‚</p>\n<p>æœ‰ä¸€äº›å‘ˆç°å¯¹è±¡å¯¹åº”äº DOM èŠ‚ç‚¹ï¼Œä½†åœ¨æ ‘ä¸­æ‰€åœ¨çš„ä½ç½®ä¸ DOM èŠ‚ç‚¹ä¸åŒã€‚æµ®åŠ¨å®šä½å’Œç»å¯¹å®šä½çš„å…ƒç´ å°±æ˜¯è¿™æ ·ï¼Œå®ƒä»¬å¤„äºæ­£å¸¸çš„æµç¨‹ä¹‹å¤–ï¼Œæ”¾ç½®åœ¨æ ‘ä¸­çš„å…¶ä»–åœ°æ–¹ï¼Œå¹¶æ˜ å°„åˆ°çœŸæ­£çš„æ¡†æ¶ï¼Œè€Œæ”¾åœ¨åŸä½çš„æ˜¯å ä½æ¡†æ¶ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image025.png\" alt=\"img\">å›¾ï¼šå‘ˆç°æ ‘åŠå…¶å¯¹åº”çš„ DOM æ ‘ (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#3_1\">3.1</a>)ã€‚åˆå§‹å®¹å™¨ block ä¸ºâ€œviewportâ€ï¼Œè€Œåœ¨ WebKit ä¸­åˆ™ä¸ºâ€œRenderViewâ€å¯¹è±¡ã€‚</p>\n<h5 id=\"æ„å»ºå‘ˆç°æ ‘çš„æµç¨‹\"><a href=\"#æ„å»ºå‘ˆç°æ ‘çš„æµç¨‹\" class=\"headerlink\" title=\"æ„å»ºå‘ˆç°æ ‘çš„æµç¨‹\"></a>æ„å»ºå‘ˆç°æ ‘çš„æµç¨‹</h5><p>åœ¨ Firefox ä¸­ï¼Œç³»ç»Ÿä¼šé’ˆå¯¹ DOM æ›´æ–°æ³¨å†Œå±•ç¤ºå±‚ï¼Œä½œä¸ºä¾¦å¬å™¨ã€‚å±•ç¤ºå±‚å°†æ¡†æ¶åˆ›å»ºå·¥ä½œå§”æ‰˜ç»™ <code>FrameConstructor</code>ï¼Œç”±è¯¥æ„é€ å™¨è§£ææ ·å¼ï¼ˆè¯·å‚é˜…<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#style\">æ ·å¼è®¡ç®—</a>ï¼‰å¹¶åˆ›å»ºæ¡†æ¶ã€‚</p>\n<p>åœ¨ WebKit ä¸­ï¼Œè§£ææ ·å¼å’Œåˆ›å»ºå‘ˆç°å™¨çš„è¿‡ç¨‹ç§°ä¸ºâ€œé™„åŠ â€ã€‚æ¯ä¸ª DOM èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªâ€œattachâ€æ–¹æ³•ã€‚é™„åŠ æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œå°†èŠ‚ç‚¹æ’å…¥ DOM æ ‘éœ€è¦è°ƒç”¨æ–°çš„èŠ‚ç‚¹â€œattachâ€æ–¹æ³•ã€‚</p>\n<p>å¤„ç† html å’Œ body æ ‡è®°å°±ä¼šæ„å»ºå‘ˆç°æ ‘æ ¹èŠ‚ç‚¹ã€‚è¿™ä¸ªæ ¹èŠ‚ç‚¹å‘ˆç°å¯¹è±¡å¯¹åº”äº CSS è§„èŒƒä¸­æ‰€è¯´çš„å®¹å™¨ blockï¼Œè¿™æ˜¯æœ€ä¸Šå±‚çš„ blockï¼ŒåŒ…å«äº†å…¶ä»–æ‰€æœ‰ blockã€‚å®ƒçš„å°ºå¯¸å°±æ˜¯è§†å£ï¼Œå³æµè§ˆå™¨çª—å£æ˜¾ç¤ºåŒºåŸŸçš„å°ºå¯¸ã€‚Firefox ç§°ä¹‹ä¸º <code>ViewPortFrame</code>ï¼Œè€Œ WebKit ç§°ä¹‹ä¸º <code>RenderView</code>ã€‚è¿™å°±æ˜¯æ–‡æ¡£æ‰€æŒ‡å‘çš„å‘ˆç°å¯¹è±¡ã€‚å‘ˆç°æ ‘çš„å…¶ä½™éƒ¨åˆ†ä»¥ DOM æ ‘èŠ‚ç‚¹æ’å…¥çš„å½¢å¼æ¥æ„å»ºã€‚</p>\n<p>è¯·å‚é˜…<a href=\"http://www.w3.org/TR/CSS21/intro.html#processing-model\">å…³äºå¤„ç†æ¨¡å‹çš„ CSS2 è§„èŒƒ</a>ã€‚</p>\n<h4 id=\"æ ·å¼è®¡ç®—\"><a href=\"#æ ·å¼è®¡ç®—\" class=\"headerlink\" title=\"æ ·å¼è®¡ç®—\"></a>æ ·å¼è®¡ç®—</h4><p>æ„å»ºå‘ˆç°æ ‘æ—¶ï¼Œéœ€è¦è®¡ç®—æ¯ä¸€ä¸ªå‘ˆç°å¯¹è±¡çš„å¯è§†åŒ–å±æ€§ã€‚è¿™æ˜¯é€šè¿‡è®¡ç®—æ¯ä¸ªå…ƒç´ çš„æ ·å¼å±æ€§æ¥å®Œæˆçš„ã€‚</p>\n<p>æ ·å¼åŒ…æ‹¬æ¥è‡ªå„ç§æ¥æºçš„æ ·å¼è¡¨ã€inline æ ·å¼å…ƒç´ å’Œ HTML ä¸­çš„å¯è§†åŒ–å±æ€§ï¼ˆä¾‹å¦‚â€œbgcolorâ€å±æ€§ï¼‰ã€‚å…¶ä¸­åè€…å°†ç»è¿‡è½¬åŒ–ä»¥åŒ¹é… CSS æ ·å¼å±æ€§ã€‚</p>\n<p>æ ·å¼è¡¨çš„æ¥æºåŒ…æ‹¬æµè§ˆå™¨çš„é»˜è®¤æ ·å¼è¡¨ã€ç”±ç½‘é¡µä½œè€…æä¾›çš„æ ·å¼è¡¨ä»¥åŠç”±æµè§ˆå™¨ç”¨æˆ·æä¾›çš„ç”¨æˆ·æ ·å¼è¡¨ï¼ˆæµè§ˆå™¨å…è®¸æ‚¨å®šä¹‰è‡ªå·±å–œæ¬¢çš„æ ·å¼ã€‚ä»¥ Firefox ä¸ºä¾‹ï¼Œç”¨æˆ·å¯ä»¥å°†è‡ªå·±å–œæ¬¢çš„æ ·å¼è¡¨æ”¾åœ¨â€œFirefox Profileâ€æ–‡ä»¶å¤¹ä¸‹ï¼‰ã€‚</p>\n<p>æ ·å¼è®¡ç®—å­˜åœ¨ä»¥ä¸‹éš¾ç‚¹ï¼š</p>\n<ol>\n<li><p>æ ·å¼æ•°æ®æ˜¯ä¸€ä¸ªè¶…å¤§çš„ç»“æ„ï¼Œå­˜å‚¨äº†æ— æ•°çš„æ ·å¼å±æ€§ï¼Œè¿™å¯èƒ½é€ æˆå†…å­˜é—®é¢˜ã€‚</p>\n</li>\n<li><p>å¦‚æœä¸è¿›è¡Œä¼˜åŒ–ï¼Œä¸ºæ¯ä¸€ä¸ªå…ƒç´ æŸ¥æ‰¾åŒ¹é…çš„è§„åˆ™ä¼šé€ æˆæ€§èƒ½é—®é¢˜ã€‚è¦ä¸ºæ¯ä¸€ä¸ªå…ƒç´ éå†æ•´ä¸ªè§„åˆ™åˆ—è¡¨æ¥å¯»æ‰¾åŒ¹é…è§„åˆ™ï¼Œè¿™æ˜¯ä¸€é¡¹æµ©å¤§çš„å·¥ç¨‹ã€‚é€‰æ‹©å™¨ä¼šå…·æœ‰å¾ˆå¤æ‚çš„ç»“æ„ï¼Œè¿™å°±ä¼šå¯¼è‡´æŸä¸ªåŒ¹é…è¿‡ç¨‹ä¸€å¼€å§‹çœ‹èµ·æ¥å¾ˆå¯èƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æœ€ç»ˆå‘ç°å…¶å®æ˜¯å¾’åŠ³çš„ï¼Œå¿…é¡»å°è¯•å…¶ä»–åŒ¹é…è·¯å¾„ã€‚</p>\n<p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç»„åˆé€‰æ‹©å™¨ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">div div div div&#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ„å‘³ç€è§„åˆ™é€‚ç”¨äºä½œä¸º 3 ä¸ª div å…ƒç´ çš„å­ä»£çš„</p>\n</li>\n</ol>\n   <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>   ã€‚å¦‚æœæ‚¨è¦æ£€æŸ¥è§„åˆ™æ˜¯å¦é€‚ç”¨äºæŸä¸ªæŒ‡å®šçš„</p>\n   <figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>   å…ƒç´ ï¼Œåº”é€‰æ‹©æ ‘ä¸Šçš„ä¸€æ¡å‘ä¸Šè·¯å¾„è¿›è¡Œæ£€æŸ¥ã€‚æ‚¨å¯èƒ½éœ€è¦å‘ä¸Šéå†èŠ‚ç‚¹æ ‘ï¼Œç»“æœå‘ç°åªæœ‰ä¸¤ä¸ª divï¼Œè€Œä¸”è§„åˆ™å¹¶ä¸é€‚ç”¨ã€‚ç„¶åï¼Œæ‚¨å¿…é¡»å°è¯•æ ‘ä¸­çš„å…¶ä»–è·¯å¾„ã€‚</p>\n<ol start=\"3\">\n<li>åº”ç”¨è§„åˆ™æ¶‰åŠåˆ°ç›¸å½“å¤æ‚çš„å±‚å è§„åˆ™ï¼ˆç”¨äºå®šä¹‰è¿™äº›è§„åˆ™çš„å±‚æ¬¡ï¼‰ã€‚</li>\n</ol>\n<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹æµè§ˆå™¨æ˜¯å¦‚ä½•å¤„ç†è¿™äº›é—®é¢˜çš„ï¼š</p>\n<h5 id=\"å…±äº«æ ·å¼æ•°æ®\"><a href=\"#å…±äº«æ ·å¼æ•°æ®\" class=\"headerlink\" title=\"å…±äº«æ ·å¼æ•°æ®\"></a>å…±äº«æ ·å¼æ•°æ®</h5><p>WebKit èŠ‚ç‚¹ä¼šå¼•ç”¨æ ·å¼å¯¹è±¡ (RenderStyle)ã€‚è¿™äº›å¯¹è±¡åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ç”±ä¸åŒèŠ‚ç‚¹å…±äº«ã€‚è¿™äº›èŠ‚ç‚¹æ˜¯åŒçº§å…³ç³»ï¼Œå¹¶ä¸”ï¼š</p>\n<ol>\n<li>è¿™äº›å…ƒç´ å¿…é¡»å¤„äºç›¸åŒçš„é¼ æ ‡çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼Œä¸å…è®¸å…¶ä¸­ä¸€ä¸ªæ˜¯â€œ:hoverâ€çŠ¶æ€ï¼Œè€Œå¦ä¸€ä¸ªä¸æ˜¯ï¼‰</li>\n<li>ä»»ä½•å…ƒç´ éƒ½æ²¡æœ‰ ID</li>\n<li>æ ‡è®°åç§°åº”åŒ¹é…</li>\n<li>ç±»å±æ€§åº”åŒ¹é…</li>\n<li>æ˜ å°„å±æ€§çš„é›†åˆå¿…é¡»æ˜¯å®Œå…¨ç›¸åŒçš„</li>\n<li>é“¾æ¥çŠ¶æ€å¿…é¡»åŒ¹é…</li>\n<li>ç„¦ç‚¹çŠ¶æ€å¿…é¡»åŒ¹é…</li>\n<li>ä»»ä½•å…ƒç´ éƒ½ä¸åº”å—å±æ€§é€‰æ‹©å™¨çš„å½±å“ï¼Œè¿™é‡Œæ‰€è¯´çš„â€œå½±å“â€æ˜¯æŒ‡åœ¨é€‰æ‹©å™¨ä¸­çš„ä»»ä½•ä½ç½®æœ‰ä»»ä½•ä½¿ç”¨äº†å±æ€§é€‰æ‹©å™¨çš„é€‰æ‹©å™¨åŒ¹é…</li>\n<li>å…ƒç´ ä¸­ä¸èƒ½æœ‰ä»»ä½• inline æ ·å¼å±æ€§</li>\n<li>ä¸èƒ½ä½¿ç”¨ä»»ä½•åŒçº§é€‰æ‹©å™¨ã€‚WebCore åœ¨é‡åˆ°ä»»ä½•åŒçº§é€‰æ‹©å™¨æ—¶ï¼Œåªä¼šå¼•å‘ä¸€ä¸ªå…¨å±€å¼€å…³ï¼Œå¹¶åœç”¨æ•´ä¸ªæ–‡æ¡£çš„æ ·å¼å…±äº«ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚è¿™åŒ…æ‹¬ + é€‰æ‹©å™¨ä»¥åŠ :first-child å’Œ :last-child ç­‰é€‰æ‹©å™¨ã€‚</li>\n</ol>\n<h5 id=\"Firefox-è§„åˆ™æ ‘\"><a href=\"#Firefox-è§„åˆ™æ ‘\" class=\"headerlink\" title=\"Firefox è§„åˆ™æ ‘\"></a>Firefox è§„åˆ™æ ‘</h5><p>ä¸ºäº†ç®€åŒ–æ ·å¼è®¡ç®—ï¼ŒFirefox è¿˜é‡‡ç”¨äº†å¦å¤–ä¸¤ç§æ ‘ï¼šè§„åˆ™æ ‘å’Œæ ·å¼ä¸Šä¸‹æ–‡æ ‘ã€‚WebKit ä¹Ÿæœ‰æ ·å¼å¯¹è±¡ï¼Œä½†å®ƒä»¬ä¸æ˜¯ä¿å­˜åœ¨ç±»ä¼¼æ ·å¼ä¸Šä¸‹æ–‡æ ‘è¿™æ ·çš„æ ‘ç»“æ„ä¸­ï¼Œåªæ˜¯ç”± DOM èŠ‚ç‚¹æŒ‡å‘æ­¤ç±»å¯¹è±¡çš„ç›¸å…³æ ·å¼ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image035.png\" alt=\"img\">å›¾ï¼šFirefox æ ·å¼ä¸Šä¸‹æ–‡æ ‘ (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#2_2\">2.2</a>)</p>\n<p>æ ·å¼ä¸Šä¸‹æ–‡åŒ…å«ç«¯å€¼ã€‚è¦è®¡ç®—å‡ºè¿™äº›å€¼ï¼Œåº”æŒ‰ç…§æ­£ç¡®é¡ºåºåº”ç”¨æ‰€æœ‰çš„åŒ¹é…è§„åˆ™ï¼Œå¹¶å°†å…¶ä»é€»è¾‘å€¼è½¬åŒ–ä¸ºå…·ä½“çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé€»è¾‘å€¼æ˜¯å±å¹•å¤§å°çš„ç™¾åˆ†æ¯”ï¼Œåˆ™éœ€è¦æ¢ç®—æˆç»å¯¹çš„å•ä½ã€‚è§„åˆ™æ ‘çš„ç‚¹å­çœŸçš„å¾ˆå·§å¦™ï¼Œå®ƒä½¿å¾—èŠ‚ç‚¹ä¹‹é—´å¯ä»¥å…±äº«è¿™äº›å€¼ï¼Œä»¥é¿å…é‡å¤è®¡ç®—ï¼Œè¿˜å¯ä»¥èŠ‚çº¦ç©ºé—´ã€‚</p>\n<p>æ‰€æœ‰åŒ¹é…çš„è§„åˆ™éƒ½å­˜å‚¨åœ¨æ ‘ä¸­ã€‚è·¯å¾„ä¸­çš„åº•å±‚èŠ‚ç‚¹æ‹¥æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚è§„åˆ™æ ‘åŒ…å«äº†æ‰€æœ‰å·²çŸ¥è§„åˆ™åŒ¹é…çš„è·¯å¾„ã€‚è§„åˆ™çš„å­˜å‚¨æ˜¯å»¶è¿Ÿè¿›è¡Œçš„ã€‚è§„åˆ™æ ‘ä¸ä¼šåœ¨å¼€å§‹çš„æ—¶å€™å°±ä¸ºæ‰€æœ‰çš„èŠ‚ç‚¹è¿›è¡Œè®¡ç®—ï¼Œè€Œæ˜¯åªæœ‰å½“æŸä¸ªèŠ‚ç‚¹æ ·å¼éœ€è¦è¿›è¡Œè®¡ç®—æ—¶ï¼Œæ‰ä¼šå‘è§„åˆ™æ ‘æ·»åŠ è®¡ç®—çš„è·¯å¾„ã€‚</p>\n<p>è¿™ä¸ªæƒ³æ³•ç›¸å½“äºå°†è§„åˆ™æ ‘è·¯å¾„è§†ä¸ºè¯å…¸ä¸­çš„å•è¯ã€‚å¦‚æœæˆ‘ä»¬å·²ç»è®¡ç®—å‡ºå¦‚ä¸‹çš„è§„åˆ™æ ‘ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/tree.png\" alt=\"img\"></p>\n<p>å‡è®¾æˆ‘ä»¬éœ€è¦ä¸ºå†…å®¹æ ‘ä¸­çš„å¦ä¸€ä¸ªå…ƒç´ åŒ¹é…è§„åˆ™ï¼Œå¹¶ä¸”æ‰¾åˆ°åŒ¹é…è·¯å¾„æ˜¯ B - E - Iï¼ˆæŒ‰ç…§æ­¤é¡ºåºï¼‰ã€‚ç”±äºæˆ‘ä»¬åœ¨æ ‘ä¸­å·²ç»è®¡ç®—å‡ºäº†è·¯å¾„ A - B - E - I - Lï¼Œå› æ­¤å°±å·²ç»æœ‰äº†æ­¤è·¯å¾„ï¼Œè¿™å°±å‡å°‘äº†ç°åœ¨æ‰€éœ€çš„å·¥ä½œé‡ã€‚</p>\n<p>è®©æˆ‘ä»¬çœ‹çœ‹è§„åˆ™æ ‘å¦‚ä½•å¸®åŠ©æˆ‘ä»¬å‡å°‘å·¥ä½œã€‚</p>\n<h5 id=\"ç»“æ„åˆ’åˆ†\"><a href=\"#ç»“æ„åˆ’åˆ†\" class=\"headerlink\" title=\"ç»“æ„åˆ’åˆ†\"></a>ç»“æ„åˆ’åˆ†</h5><p>æ ·å¼ä¸Šä¸‹æ–‡å¯åˆ†å‰²æˆå¤šä¸ªç»“æ„ã€‚è¿™äº›ç»“æ„ä½“åŒ…å«äº†ç‰¹å®šç±»åˆ«ï¼ˆå¦‚ border æˆ– colorï¼‰çš„æ ·å¼ä¿¡æ¯ã€‚ç»“æ„ä¸­çš„å±æ€§éƒ½æ˜¯ç»§æ‰¿çš„æˆ–éç»§æ‰¿çš„ã€‚ç»§æ‰¿å±æ€§å¦‚æœæœªç”±å…ƒç´ å®šä¹‰ï¼Œåˆ™ç»§æ‰¿è‡ªå…¶çˆ¶ä»£ã€‚éç»§æ‰¿å±æ€§ï¼ˆä¹Ÿç§°ä¸ºâ€œé‡ç½®â€å±æ€§ï¼‰å¦‚æœæœªè¿›è¡Œå®šä¹‰ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>\n<p>è§„åˆ™æ ‘é€šè¿‡ç¼“å­˜æ•´ä¸ªç»“æ„ï¼ˆåŒ…å«è®¡ç®—å‡ºçš„ç«¯å€¼ï¼‰ä¸ºæˆ‘ä»¬æä¾›å¸®åŠ©ã€‚è¿™ä¸€æƒ³æ³•å‡å®šåº•å±‚èŠ‚ç‚¹æ²¡æœ‰æä¾›ç»“æ„çš„å®šä¹‰ï¼Œåˆ™å¯ä½¿ç”¨ä¸Šå±‚èŠ‚ç‚¹ä¸­çš„ç¼“å­˜ç»“æ„ã€‚</p>\n<h5 id=\"ä½¿ç”¨è§„åˆ™æ ‘è®¡ç®—æ ·å¼ä¸Šä¸‹æ–‡\"><a href=\"#ä½¿ç”¨è§„åˆ™æ ‘è®¡ç®—æ ·å¼ä¸Šä¸‹æ–‡\" class=\"headerlink\" title=\"ä½¿ç”¨è§„åˆ™æ ‘è®¡ç®—æ ·å¼ä¸Šä¸‹æ–‡\"></a>ä½¿ç”¨è§„åˆ™æ ‘è®¡ç®—æ ·å¼ä¸Šä¸‹æ–‡</h5><p>åœ¨è®¡ç®—æŸä¸ªç‰¹å®šå…ƒç´ çš„æ ·å¼ä¸Šä¸‹æ–‡æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆè®¡ç®—è§„åˆ™æ ‘ä¸­çš„å¯¹åº”è·¯å¾„ï¼Œæˆ–è€…ä½¿ç”¨ç°æœ‰çš„è·¯å¾„ã€‚ç„¶åæˆ‘ä»¬æ²¿æ­¤è·¯å¾„åº”ç”¨è§„åˆ™ï¼Œåœ¨æ–°çš„æ ·å¼ä¸Šä¸‹æ–‡ä¸­å¡«å……ç»“æ„ã€‚æˆ‘ä»¬ä»è·¯å¾„ä¸­æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„åº•å±‚èŠ‚ç‚¹ï¼ˆé€šå¸¸ä¹Ÿæ˜¯æœ€ç‰¹æ®Šçš„é€‰æ‹©å™¨ï¼‰å¼€å§‹ï¼Œå¹¶å‘ä¸Šéå†è§„åˆ™æ ‘ï¼Œç›´åˆ°ç»“æ„å¡«å……å®Œæ¯•ã€‚å¦‚æœè¯¥è§„åˆ™èŠ‚ç‚¹å¯¹äºæ­¤ç»“æ„æ²¡æœ‰ä»»ä½•è§„èŒƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¥½çš„ä¼˜åŒ–ï¼šå¯»æ‰¾è·¯å¾„æ›´ä¸Šå±‚çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°åæŒ‡å®šå®Œæ•´çš„è§„èŒƒå¹¶æŒ‡å‘ç›¸å…³èŠ‚ç‚¹å³å¯ã€‚è¿™æ˜¯æœ€å¥½çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå› ä¸ºæ•´ä¸ªç»“æ„éƒ½èƒ½å…±äº«ã€‚è¿™å¯ä»¥å‡å°‘ç«¯å€¼çš„è®¡ç®—é‡å¹¶èŠ‚çº¦å†…å­˜ã€‚<br>å¦‚æœæˆ‘ä»¬æ‰¾åˆ°äº†éƒ¨åˆ†å®šä¹‰ï¼Œå°±ä¼šå‘ä¸Šéå†è§„åˆ™æ ‘ï¼Œç›´åˆ°ç»“æ„å¡«å……å®Œæ¯•ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬æ‰¾ä¸åˆ°ç»“æ„çš„ä»»ä½•å®šä¹‰ï¼Œé‚£ä¹ˆå‡å¦‚è¯¥ç»“æ„æ˜¯â€œç»§æ‰¿â€ç±»å‹ï¼Œæˆ‘ä»¬ä¼šåœ¨<strong>ä¸Šä¸‹æ–‡æ ‘</strong>ä¸­æŒ‡å‘çˆ¶ä»£çš„ç»“æ„ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å…±äº«ç»“æ„ã€‚å¦‚æœæ˜¯ reset ç±»å‹çš„ç»“æ„ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚</p>\n<p>å¦‚æœæœ€ç‰¹æ®Šçš„èŠ‚ç‚¹ç¡®å®æ·»åŠ äº†å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¦å¤–è¿›è¡Œä¸€äº›è®¡ç®—ï¼Œä»¥ä¾¿å°†è¿™äº›å€¼è½¬åŒ–æˆå®é™…å€¼ã€‚ç„¶åæˆ‘ä»¬å°†ç»“æœç¼“å­˜åœ¨æ ‘èŠ‚ç‚¹ä¸­ï¼Œä¾›å­ä»£ä½¿ç”¨ã€‚</p>\n<p>å¦‚æœæŸä¸ªå…ƒç´ ä¸å…¶åŒçº§å…ƒç´ éƒ½æŒ‡å‘åŒä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥å…±äº«<strong>æ•´ä¸ªæ ·å¼ä¸Šä¸‹æ–‡</strong>ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ HTML ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;err&quot; id&#x3D;&quot;div1&quot;&gt;</span><br><span class=\"line\">      &lt;p&gt;</span><br><span class=\"line\">        this is a &lt;span class&#x3D;&quot;big&quot;&gt; big error &lt;&#x2F;span&gt;</span><br><span class=\"line\">        this is also a</span><br><span class=\"line\">        &lt;span class&#x3D;&quot;big&quot;&gt; very  big  error&lt;&#x2F;span&gt; error</span><br><span class=\"line\">      &lt;&#x2F;p&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;div class&#x3D;&quot;err&quot; id&#x3D;&quot;div2&quot;&gt;another error&lt;&#x2F;div&gt;</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>è¿˜æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;<span class=\"attribute\">margin</span>:<span class=\"number\">5px</span>;<span class=\"attribute\">color</span>:black&#125;<span class=\"selector-class\">.err</span> &#123;<span class=\"attribute\">color</span>:red&#125;<span class=\"selector-class\">.big</span> &#123;<span class=\"attribute\">margin-top</span>:<span class=\"number\">3px</span>&#125;<span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span> &#123;<span class=\"attribute\">margin-bottom</span>:<span class=\"number\">4px</span>&#125;<span class=\"selector-id\">#div1</span> &#123;<span class=\"attribute\">color</span>:blue&#125;<span class=\"selector-id\">#div2</span> &#123;<span class=\"attribute\">color</span>:green&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åªéœ€è¦å¡«å……ä¸¤ä¸ªç»“æ„ï¼šcolor ç»“æ„å’Œ margin ç»“æ„ã€‚color ç»“æ„åªåŒ…å«ä¸€ä¸ªæˆå‘˜ï¼ˆå³â€œcolorâ€ï¼‰ï¼Œè€Œ margin ç»“æ„åŒ…å«å››æ¡è¾¹ã€‚<br>å½¢æˆçš„è§„åˆ™æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆèŠ‚ç‚¹çš„æ ‡è®°æ–¹å¼ä¸ºâ€œèŠ‚ç‚¹å : æŒ‡å‘çš„è§„åˆ™åºå·â€ï¼‰ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image027.png\" alt=\"img\">å›¾ï¼šè§„åˆ™æ ‘</p>\n<p>ä¸Šä¸‹æ–‡æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆèŠ‚ç‚¹å : æŒ‡å‘çš„è§„åˆ™èŠ‚ç‚¹ï¼‰ï¼š</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/image029.png\" alt=\"img\">å›¾ï¼šä¸Šä¸‹æ–‡æ ‘</p>\n<p>å‡è®¾æˆ‘ä»¬è§£æ HTML æ—¶é‡åˆ°äº†ç¬¬äºŒä¸ª <div> æ ‡è®°ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ­¤èŠ‚ç‚¹åˆ›å»ºæ ·å¼ä¸Šä¸‹æ–‡ï¼Œå¹¶å¡«å……å…¶æ ·å¼ç»“æ„ã€‚<br>ç»è¿‡è§„åˆ™åŒ¹é…ï¼Œæˆ‘ä»¬å‘ç°è¯¥ <div> çš„åŒ¹é…è§„åˆ™æ˜¯ç¬¬ 1ã€2 å’Œ 6 æ¡ã€‚è¿™æ„å‘³ç€è§„åˆ™æ ‘ä¸­å·²æœ‰ä¸€æ¡è·¯å¾„å¯ä¾›æˆ‘ä»¬çš„å…ƒç´ ä½¿ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å†ä¸ºå…¶æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ä»¥åŒ¹é…ç¬¬ 6 æ¡è§„åˆ™ï¼ˆè§„åˆ™æ ‘ä¸­çš„ F èŠ‚ç‚¹ï¼‰ã€‚<br>æˆ‘ä»¬å°†åˆ›å»ºæ ·å¼ä¸Šä¸‹æ–‡å¹¶å°†å…¶æ”¾å…¥ä¸Šä¸‹æ–‡æ ‘ä¸­ã€‚æ–°çš„æ ·å¼ä¸Šä¸‹æ–‡å°†æŒ‡å‘è§„åˆ™æ ‘ä¸­çš„ F èŠ‚ç‚¹ã€‚</p>\n<p>ç°åœ¨æˆ‘ä»¬éœ€è¦å¡«å……æ ·å¼ç»“æ„ã€‚é¦–å…ˆè¦å¡«å……çš„æ˜¯ margin ç»“æ„ã€‚ç”±äºæœ€åçš„è§„åˆ™èŠ‚ç‚¹ (F) å¹¶æ²¡æœ‰æ·»åŠ åˆ° margin ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦ä¸Šæº¯è§„åˆ™æ ‘ï¼Œç›´è‡³æ‰¾åˆ°åœ¨å…ˆå‰èŠ‚ç‚¹æ’å…¥ä¸­è®¡ç®—è¿‡çš„ç¼“å­˜ç»“æ„ï¼Œç„¶åä½¿ç”¨è¯¥ç»“æ„ã€‚æˆ‘ä»¬ä¼šåœ¨æŒ‡å®š margin è§„åˆ™çš„æœ€ä¸Šå±‚èŠ‚ç‚¹ï¼ˆå³ B èŠ‚ç‚¹ï¼‰ä¸Šæ‰¾åˆ°è¯¥ç»“æ„ã€‚</p>\n<p>æˆ‘ä»¬å·²ç»æœ‰äº† color ç»“æ„çš„å®šä¹‰ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ç¼“å­˜çš„ç»“æ„ã€‚ç”±äº color æœ‰ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬æ— éœ€ä¸Šæº¯è§„åˆ™æ ‘ä»¥å¡«å……å…¶ä»–å±æ€§ã€‚æˆ‘ä»¬å°†è®¡ç®—ç«¯å€¼ï¼ˆå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸º RGB ç­‰ï¼‰å¹¶åœ¨æ­¤èŠ‚ç‚¹ä¸Šç¼“å­˜ç»è¿‡è®¡ç®—çš„ç»“æ„ã€‚</p>\n<p>ç¬¬äºŒä¸ª <span> å…ƒç´ å¤„ç†èµ·æ¥æ›´åŠ ç®€å•ã€‚æˆ‘ä»¬å°†åŒ¹é…è§„åˆ™ï¼Œæœ€ç»ˆå‘ç°å®ƒå’Œä¹‹å‰çš„ span ä¸€æ ·æŒ‡å‘è§„åˆ™ Gã€‚ç”±äºæˆ‘ä»¬æ‰¾åˆ°äº†æŒ‡å‘åŒä¸€èŠ‚ç‚¹çš„åŒçº§ï¼Œå°±å¯ä»¥å…±äº«æ•´ä¸ªæ ·å¼ä¸Šä¸‹æ–‡äº†ï¼Œåªéœ€æŒ‡å‘ä¹‹å‰ span çš„ä¸Šä¸‹æ–‡å³å¯ã€‚</p>\n<p>å¯¹äºåŒ…å«äº†ç»§æ‰¿è‡ªçˆ¶ä»£çš„è§„åˆ™çš„ç»“æ„ï¼Œç¼“å­˜æ˜¯åœ¨ä¸Šä¸‹æ–‡æ ‘ä¸­è¿›è¡Œçš„ï¼ˆäº‹å®ä¸Š color å±æ€§æ˜¯ç»§æ‰¿çš„ï¼Œä½†æ˜¯ Firefox å°†å…¶è§†ä¸º reset å±æ€§ï¼Œå¹¶ç¼“å­˜åˆ°è§„åˆ™æ ‘ä¸Šï¼‰ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ®µè½ä¸­æ·»åŠ  font è§„åˆ™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">p &#123;font-family:Verdana;font size:10px;font-weight:bold&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é‚£ä¹ˆï¼Œè¯¥æ®µè½å…ƒç´ ä½œä¸ºä¸Šä¸‹æ–‡æ ‘ä¸­çš„ div çš„å­ä»£ï¼Œå°±ä¼šå…±äº«ä¸å…¶çˆ¶ä»£ç›¸åŒçš„ font ç»“æ„ï¼ˆå‰ææ˜¯è¯¥æ®µè½æ²¡æœ‰æŒ‡å®š font è§„åˆ™ï¼‰ã€‚</p>\n<p>åœ¨ WebKit ä¸­æ²¡æœ‰è§„åˆ™æ ‘ï¼Œå› æ­¤ä¼šå¯¹åŒ¹é…çš„å£°æ˜éå† 4 æ¬¡ã€‚é¦–å…ˆåº”ç”¨éé‡è¦é«˜ä¼˜å…ˆçº§çš„å±æ€§ï¼ˆç”±äºä½œä¸ºå…¶ä»–å±æ€§çš„ä¾æ®è€Œåº”é¦–å…ˆåº”ç”¨çš„å±æ€§ï¼Œä¾‹å¦‚ displayï¼‰ï¼Œæ¥ç€æ˜¯é«˜ä¼˜å…ˆçº§é‡è¦è§„åˆ™ï¼Œç„¶åæ˜¯æ™®é€šä¼˜å…ˆçº§éé‡è¦è§„åˆ™ï¼Œæœ€åæ˜¯æ™®é€šä¼˜å…ˆçº§é‡è¦è§„åˆ™ã€‚è¿™æ„å‘³ç€å¤šæ¬¡å‡ºç°çš„å±æ€§ä¼šæ ¹æ®æ­£ç¡®çš„å±‚å é¡ºåºè¿›è¡Œè§£æã€‚æœ€åå‡ºç°çš„æœ€ç»ˆç”Ÿæ•ˆã€‚</p>\n<p>å› æ­¤æ¦‚æ‹¬æ¥è¯´ï¼Œå…±äº«æ ·å¼å¯¹è±¡ï¼ˆæ•´ä¸ªå¯¹è±¡æˆ–è€…å¯¹è±¡ä¸­çš„éƒ¨åˆ†ç»“æ„ï¼‰å¯ä»¥è§£å†³é—®é¢˜ <a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#issue1\">1</a> å’Œé—®é¢˜ <a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#issue3\">3</a>ã€‚Firefox è§„åˆ™æ ‘è¿˜æœ‰åŠ©äºæŒ‰ç…§æ­£ç¡®çš„é¡ºåºåº”ç”¨å±æ€§ã€‚</p>\n<h5 id=\"å¯¹è§„åˆ™è¿›è¡Œå¤„ç†ä»¥ç®€åŒ–åŒ¹é…\"><a href=\"#å¯¹è§„åˆ™è¿›è¡Œå¤„ç†ä»¥ç®€åŒ–åŒ¹é…\" class=\"headerlink\" title=\"å¯¹è§„åˆ™è¿›è¡Œå¤„ç†ä»¥ç®€åŒ–åŒ¹é…\"></a>å¯¹è§„åˆ™è¿›è¡Œå¤„ç†ä»¥ç®€åŒ–åŒ¹é…</h5><p>æ ·å¼è§„åˆ™æœ‰ä¸€äº›æ¥æºï¼š</p>\n<ul>\n<li><p>å¤–éƒ¨æ ·å¼è¡¨æˆ–æ ·å¼å…ƒç´ ä¸­çš„ CSS è§„åˆ™</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">p &#123;color:blue&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>inline æ ·å¼å±æ€§åŠç±»ä¼¼å†…å®¹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p style&#x3D;&quot;color:blue&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>HTML å¯è§†åŒ–å±æ€§ï¼ˆæ˜ å°„åˆ°ç›¸å…³çš„æ ·å¼è§„åˆ™ï¼‰</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p bgcolor&#x3D;&quot;blue&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>åä¸¤ç§å¾ˆå®¹æ˜“å’Œå…ƒç´ è¿›è¡ŒåŒ¹é…ï¼Œå› ä¸ºå…ƒç´ æ‹¥æœ‰æ ·å¼å±æ€§ï¼Œè€Œä¸” HTML å±æ€§å¯ä»¥ä½¿ç”¨å…ƒç´ ä½œä¸ºé”®å€¼è¿›è¡Œæ˜ å°„ã€‚</p>\n<p>æˆ‘ä»¬ä¹‹å‰åœ¨<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#issue2\">ç¬¬ 2 ä¸ªé—®é¢˜</a>ä¸­æåˆ°è¿‡ï¼ŒCSS è§„åˆ™åŒ¹é…å¯èƒ½æ¯”è¾ƒæ£˜æ‰‹ã€‚ä¸ºäº†è§£å†³è¿™ä¸€éš¾é¢˜ï¼Œå¯ä»¥å¯¹ CSS è§„åˆ™è¿›è¡Œä¸€äº›å¤„ç†ï¼Œä»¥ä¾¿è®¿é—®ã€‚</p>\n<p>æ ·å¼è¡¨è§£æå®Œæ¯•åï¼Œç³»ç»Ÿä¼šæ ¹æ®é€‰æ‹©å™¨å°† CSS è§„åˆ™æ·»åŠ åˆ°æŸä¸ªå“ˆå¸Œè¡¨ä¸­ã€‚è¿™äº›å“ˆå¸Œè¡¨çš„é€‰æ‹©å™¨å„ä¸ç›¸åŒï¼ŒåŒ…æ‹¬ IDã€ç±»åç§°ã€æ ‡è®°åç§°ç­‰ï¼Œè¿˜æœ‰ä¸€ç§é€šç”¨å“ˆå¸Œè¡¨ï¼Œé€‚åˆä¸å±äºä¸Šè¿°ç±»åˆ«çš„è§„åˆ™ã€‚å¦‚æœé€‰æ‹©å™¨æ˜¯ IDï¼Œè§„åˆ™å°±ä¼šæ·»åŠ åˆ° ID è¡¨ä¸­ï¼›å¦‚æœé€‰æ‹©å™¨æ˜¯ç±»ï¼Œè§„åˆ™å°±ä¼šæ·»åŠ åˆ°ç±»è¡¨ä¸­ï¼Œä¾æ­¤ç±»æ¨ã€‚<br>è¿™ç§å¤„ç†å¯ä»¥å¤§å¤§ç®€åŒ–è§„åˆ™åŒ¹é…ã€‚æˆ‘ä»¬æ— éœ€æŸ¥çœ‹æ¯ä¸€æ¡å£°æ˜ï¼Œåªè¦ä»å“ˆå¸Œè¡¨ä¸­æå–å…ƒç´ çš„ç›¸å…³è§„åˆ™å³å¯ã€‚è¿™ç§ä¼˜åŒ–æ–¹æ³•å¯æ’é™¤æ‰ 95% ä»¥ä¸Šè§„åˆ™ï¼Œå› æ­¤åœ¨åŒ¹é…è¿‡ç¨‹ä¸­æ ¹æœ¬å°±ä¸ç”¨è€ƒè™‘è¿™äº›è§„åˆ™äº† (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#4_1\">4.1</a>)ã€‚</p>\n<p>æˆ‘ä»¬ä»¥å¦‚ä¸‹çš„æ ·å¼è§„åˆ™ä¸ºä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">p.error &#123;color:red&#125;</span><br><span class=\"line\">#messageDiv &#123;height:50px&#125;</span><br><span class=\"line\">div &#123;margin:5px&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¬¬ä¸€æ¡è§„åˆ™å°†æ’å…¥ç±»è¡¨ï¼Œç¬¬äºŒæ¡å°†æ’å…¥ ID è¡¨ï¼Œè€Œç¬¬ä¸‰æ¡å°†æ’å…¥æ ‡è®°è¡¨ã€‚<br>å¯¹äºä¸‹é¢çš„ HTML ä»£ç æ®µï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;p class&#x3D;&quot;error&quot;&gt;an error occurred &lt;&#x2F;p&gt;</span><br><span class=\"line\">&lt;div id&#x3D;&quot;messageDiv&quot;&gt;this is a message&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>æˆ‘ä»¬é¦–å…ˆä¼šä¸º p å…ƒç´ å¯»æ‰¾åŒ¹é…çš„è§„åˆ™ã€‚ç±»è¡¨ä¸­æœ‰ä¸€ä¸ªâ€œerrorâ€é”®ï¼Œåœ¨ä¸‹é¢å¯ä»¥æ‰¾åˆ°â€œp.errorâ€çš„è§„åˆ™ã€‚div å…ƒç´ åœ¨ ID è¡¨ï¼ˆé”®ä¸º IDï¼‰å’Œæ ‡è®°è¡¨ä¸­æœ‰ç›¸å…³çš„è§„åˆ™ã€‚å‰©ä¸‹çš„å·¥ä½œå°±æ˜¯æ‰¾å‡ºå“ªäº›æ ¹æ®é”®æå–çš„è§„åˆ™æ˜¯çœŸæ­£åŒ¹é…çš„äº†ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœ div çš„å¯¹åº”è§„åˆ™å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">table div &#123;margin:5px&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ¡è§„åˆ™ä»ç„¶ä¼šä»æ ‡è®°è¡¨ä¸­æå–å‡ºæ¥ï¼Œå› ä¸ºé”®æ˜¯æœ€å³è¾¹çš„é€‰æ‹©å™¨ï¼Œä½†è¿™æ¡è§„åˆ™å¹¶ä¸åŒ¹é…æˆ‘ä»¬çš„ div å…ƒç´ ï¼Œå› ä¸º div æ²¡æœ‰ table ç¥–å…ˆã€‚</p>\n<p>WebKit å’Œ Firefox éƒ½è¿›è¡Œäº†è¿™ä¸€å¤„ç†ã€‚</p>\n<h5 id=\"ä»¥æ­£ç¡®çš„å±‚å é¡ºåºåº”ç”¨è§„åˆ™\"><a href=\"#ä»¥æ­£ç¡®çš„å±‚å é¡ºåºåº”ç”¨è§„åˆ™\" class=\"headerlink\" title=\"ä»¥æ­£ç¡®çš„å±‚å é¡ºåºåº”ç”¨è§„åˆ™\"></a>ä»¥æ­£ç¡®çš„å±‚å é¡ºåºåº”ç”¨è§„åˆ™</h5><p>æ ·å¼å¯¹è±¡å…·æœ‰ä¸æ¯ä¸ªå¯è§†åŒ–å±æ€§ä¸€ä¸€å¯¹åº”çš„å±æ€§ï¼ˆå‡ä¸º CSS å±æ€§ä½†æ›´ä¸ºé€šç”¨ï¼‰ã€‚å¦‚æœæŸä¸ªå±æ€§æœªç”±ä»»ä½•åŒ¹é…è§„åˆ™æ‰€å®šä¹‰ï¼Œé‚£ä¹ˆéƒ¨åˆ†å±æ€§å°±å¯ç”±çˆ¶ä»£å…ƒç´ æ ·å¼å¯¹è±¡ç»§æ‰¿ã€‚å…¶ä»–å±æ€§å…·æœ‰é»˜è®¤å€¼ã€‚</p>\n<p>å¦‚æœå®šä¹‰ä¸æ­¢ä¸€ä¸ªï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œéœ€è¦é€šè¿‡å±‚å é¡ºåºæ¥è§£å†³ã€‚</p>\n<h5 id=\"æ ·å¼è¡¨å±‚å é¡ºåº\"><a href=\"#æ ·å¼è¡¨å±‚å é¡ºåº\" class=\"headerlink\" title=\"æ ·å¼è¡¨å±‚å é¡ºåº\"></a>æ ·å¼è¡¨å±‚å é¡ºåº</h5><p>æŸä¸ªæ ·å¼å±æ€§çš„å£°æ˜å¯èƒ½ä¼šå‡ºç°åœ¨å¤šä¸ªæ ·å¼è¡¨ä¸­ï¼Œä¹Ÿå¯èƒ½åœ¨åŒä¸€ä¸ªæ ·å¼è¡¨ä¸­å‡ºç°å¤šæ¬¡ã€‚è¿™æ„å‘³ç€åº”ç”¨è§„åˆ™çš„é¡ºåºæä¸ºé‡è¦ã€‚è¿™ç§°ä¸ºâ€œå±‚å â€é¡ºåºã€‚æ ¹æ® CSS2 è§„èŒƒï¼Œå±‚å çš„é¡ºåºä¸ºï¼ˆä¼˜å…ˆçº§ä»ä½åˆ°é«˜ï¼‰ï¼š</p>\n<ol>\n<li>æµè§ˆå™¨å£°æ˜</li>\n<li>ç”¨æˆ·æ™®é€šå£°æ˜</li>\n<li>ä½œè€…æ™®é€šå£°æ˜</li>\n<li>ä½œè€…é‡è¦å£°æ˜</li>\n<li>ç”¨æˆ·é‡è¦å£°æ˜</li>\n</ol>\n<p>æµè§ˆå™¨å£°æ˜æ˜¯é‡è¦ç¨‹åº¦æœ€ä½çš„ï¼Œè€Œç”¨æˆ·åªæœ‰å°†è¯¥å£°æ˜æ ‡è®°ä¸ºâ€œé‡è¦â€æ‰å¯ä»¥æ›¿æ¢ç½‘é¡µä½œè€…çš„å£°æ˜ã€‚åŒæ ·é¡ºåºçš„å£°æ˜ä¼šæ ¹æ®<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#Specificity\">ç‰¹å¼‚æ€§</a>è¿›è¡Œæ’åºï¼Œç„¶åå†æ˜¯å…¶æŒ‡å®šé¡ºåºã€‚HTML å¯è§†åŒ–å±æ€§ä¼šè½¬æ¢æˆåŒ¹é…çš„ CSS å£°æ˜ã€‚å®ƒä»¬è¢«è§†ä¸ºä½ä¼˜å…ˆçº§çš„ç½‘é¡µä½œè€…è§„åˆ™ã€‚</p>\n<h5 id=\"ç‰¹å¼‚æ€§\"><a href=\"#ç‰¹å¼‚æ€§\" class=\"headerlink\" title=\"ç‰¹å¼‚æ€§\"></a>ç‰¹å¼‚æ€§</h5><p>é€‰æ‹©å™¨çš„ç‰¹å¼‚æ€§ç”± <a href=\"http://www.w3.org/TR/CSS2/cascade.html#specificity\">CSS2 è§„èŒƒ</a>å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å¦‚æœå£°æ˜æ¥è‡ªäºâ€œstyleâ€å±æ€§ï¼Œè€Œä¸æ˜¯å¸¦æœ‰é€‰æ‹©å™¨çš„è§„åˆ™ï¼Œåˆ™è®°ä¸º 1ï¼Œå¦åˆ™è®°ä¸º 0 (= a)</li>\n<li>è®°ä¸ºé€‰æ‹©å™¨ä¸­ ID å±æ€§çš„ä¸ªæ•° (= b)</li>\n<li>è®°ä¸ºé€‰æ‹©å™¨ä¸­å…¶ä»–å±æ€§å’Œä¼ªç±»çš„ä¸ªæ•° (= c)</li>\n<li>è®°ä¸ºé€‰æ‹©å™¨ä¸­å…ƒç´ åç§°å’Œä¼ªå…ƒç´ çš„ä¸ªæ•° (= d)</li>\n</ul>\n<p>å°†å››ä¸ªæ•°å­—æŒ‰ a-b-c-d è¿™æ ·è¿æ¥èµ·æ¥ï¼ˆä½äºå¤§æ•°è¿›åˆ¶çš„æ•°å­—ç³»ç»Ÿä¸­ï¼‰ï¼Œæ„æˆç‰¹å¼‚æ€§ã€‚</p>\n<p>æ‚¨ä½¿ç”¨çš„è¿›åˆ¶å–å†³äºä¸Šè¿°ç±»åˆ«ä¸­çš„æœ€é«˜è®¡æ•°ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœ a=14ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶ã€‚å¦‚æœ a=17ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦ä½¿ç”¨åä¸ƒè¿›åˆ¶ï¼›å½“ç„¶ä¸å¤ªå¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼Œé™¤éæ˜¯å­˜åœ¨å¦‚ä¸‹çš„é€‰æ‹©å™¨ï¼šhtml body div div p â€¦ï¼ˆåœ¨é€‰æ‹©å™¨ä¸­å‡ºç°äº† 17 ä¸ªæ ‡è®°ï¼Œè¿™æ ·çš„å¯èƒ½æ€§æä½ï¼‰ã€‚</p>\n<p>ä¸€äº›ç¤ºä¾‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">*             &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;0 d&#x3D;0 -&gt; specificity &#x3D; 0,0,0,0 *&#x2F;</span><br><span class=\"line\">li            &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;0 d&#x3D;1 -&gt; specificity &#x3D; 0,0,0,1 *&#x2F;</span><br><span class=\"line\">li:first-line &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;0 d&#x3D;2 -&gt; specificity &#x3D; 0,0,0,2 *&#x2F;</span><br><span class=\"line\">ul li         &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;0 d&#x3D;2 -&gt; specificity &#x3D; 0,0,0,2 *&#x2F;</span><br><span class=\"line\">ul ol+li      &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;0 d&#x3D;3 -&gt; specificity &#x3D; 0,0,0,3 *&#x2F;</span><br><span class=\"line\">h1 + *[rel&#x3D;up]&#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;1 d&#x3D;1 -&gt; specificity &#x3D; 0,0,1,1 *&#x2F;</span><br><span class=\"line\">ul ol li.red  &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;1 d&#x3D;3 -&gt; specificity &#x3D; 0,0,1,3 *&#x2F;</span><br><span class=\"line\">li.red.level  &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;0 c&#x3D;2 d&#x3D;1 -&gt; specificity &#x3D; 0,0,2,1 *&#x2F;</span><br><span class=\"line\">#x34y         &#123;&#125;  &#x2F;* a&#x3D;0 b&#x3D;1 c&#x3D;0 d&#x3D;0 -&gt; specificity &#x3D; 0,1,0,0 *&#x2F;</span><br><span class=\"line\">style&#x3D;&quot;&quot;          &#x2F;* a&#x3D;1 b&#x3D;0 c&#x3D;0 d&#x3D;0 -&gt; specificity &#x3D; 1,0,0,0 *&#x2F;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"è§„åˆ™æ’åº\"><a href=\"#è§„åˆ™æ’åº\" class=\"headerlink\" title=\"è§„åˆ™æ’åº\"></a>è§„åˆ™æ’åº</h5><p>æ‰¾åˆ°åŒ¹é…çš„è§„åˆ™ä¹‹åï¼Œåº”æ ¹æ®çº§è”é¡ºåºå°†å…¶æ’åºã€‚WebKit å¯¹äºè¾ƒå°çš„åˆ—è¡¨ä¼šä½¿ç”¨å†’æ³¡æ’åºï¼Œè€Œå¯¹è¾ƒå¤§çš„åˆ—è¡¨åˆ™ä½¿ç”¨å½’å¹¶æ’åºã€‚å¯¹äºä»¥ä¸‹è§„åˆ™ï¼ŒWebKit é€šè¿‡æ›¿æ¢â€œ&gt;â€è¿ç®—ç¬¦æ¥å®ç°æ’åºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">static bool operator &gt;(CSSRuleData&amp; r1, CSSRuleData&amp; r2)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    int spec1 &#x3D; r1.selector()-&gt;specificity();</span><br><span class=\"line\">    int spec2 &#x3D; r2.selector()-&gt;specificity();</span><br><span class=\"line\">    return (spec1 &#x3D;&#x3D; spec2) : r1.position() &gt; r2.position() : spec1 &gt; spec2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"æ¸è¿›å¼å¤„ç†\"><a href=\"#æ¸è¿›å¼å¤„ç†\" class=\"headerlink\" title=\"æ¸è¿›å¼å¤„ç†\"></a>æ¸è¿›å¼å¤„ç†</h4><p>WebKit ä½¿ç”¨ä¸€ä¸ªæ ‡è®°æ¥è¡¨ç¤ºæ˜¯å¦æ‰€æœ‰çš„é¡¶çº§æ ·å¼è¡¨ï¼ˆåŒ…æ‹¬ @importsï¼‰å‡å·²åŠ è½½å®Œæ¯•ã€‚å¦‚æœåœ¨é™„åŠ è¿‡ç¨‹ä¸­å°šæœªå®Œå…¨åŠ è½½æ ·å¼ï¼Œåˆ™ä½¿ç”¨å ä½ç¬¦ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­è¿›è¡Œæ ‡æ³¨ï¼Œç­‰æ ·å¼è¡¨åŠ è½½å®Œæ¯•åå†é‡æ–°è®¡ç®—ã€‚</p>\n<h3 id=\"å¸ƒå±€\"><a href=\"#å¸ƒå±€\" class=\"headerlink\" title=\"å¸ƒå±€\"></a>å¸ƒå±€</h3><p>å‘ˆç°å™¨åœ¨åˆ›å»ºå®Œæˆå¹¶æ·»åŠ åˆ°å‘ˆç°æ ‘æ—¶ï¼Œå¹¶ä¸åŒ…å«ä½ç½®å’Œå¤§å°ä¿¡æ¯ã€‚è®¡ç®—è¿™äº›å€¼çš„è¿‡ç¨‹ç§°ä¸ºå¸ƒå±€æˆ–é‡æ’ã€‚</p>\n<p>HTML é‡‡ç”¨åŸºäºæµçš„å¸ƒå±€æ¨¡å‹ï¼Œè¿™æ„å‘³ç€å¤§å¤šæ•°æƒ…å†µä¸‹åªè¦ä¸€æ¬¡éå†å°±èƒ½è®¡ç®—å‡ºå‡ ä½•ä¿¡æ¯ã€‚å¤„äºæµä¸­é åä½ç½®å…ƒç´ é€šå¸¸ä¸ä¼šå½±å“é å‰ä½ç½®å…ƒç´ çš„å‡ ä½•ç‰¹å¾ï¼Œå› æ­¤å¸ƒå±€å¯ä»¥æŒ‰ä»å·¦è‡³å³ã€ä»ä¸Šè‡³ä¸‹çš„é¡ºåºéå†æ–‡æ¡£ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µï¼Œæ¯”å¦‚ HTML è¡¨æ ¼çš„è®¡ç®—å°±éœ€è¦ä¸æ­¢ä¸€æ¬¡çš„éå† (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#3_5\">3.5</a>)ã€‚</p>\n<p>åæ ‡ç³»æ˜¯ç›¸å¯¹äºæ ¹æ¡†æ¶è€Œå»ºç«‹çš„ï¼Œä½¿ç”¨çš„æ˜¯ä¸Šåæ ‡å’Œå·¦åæ ‡ã€‚</p>\n<p>å¸ƒå±€æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚å®ƒä»æ ¹å‘ˆç°å™¨ï¼ˆå¯¹åº”äº HTML æ–‡æ¡£çš„ <code>&lt;html&gt;</code> å…ƒç´ ï¼‰å¼€å§‹ï¼Œç„¶åé€’å½’éå†éƒ¨åˆ†æˆ–æ‰€æœ‰çš„æ¡†æ¶å±‚æ¬¡ç»“æ„ï¼Œä¸ºæ¯ä¸€ä¸ªéœ€è¦è®¡ç®—çš„å‘ˆç°å™¨è®¡ç®—å‡ ä½•ä¿¡æ¯ã€‚</p>\n<p>æ ¹å‘ˆç°å™¨çš„ä½ç½®å·¦è¾¹æ˜¯ 0,0ï¼Œå…¶å°ºå¯¸ä¸ºè§†å£ï¼ˆä¹Ÿå°±æ˜¯æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸï¼‰ã€‚</p>\n<p>æ‰€æœ‰çš„å‘ˆç°å™¨éƒ½æœ‰ä¸€ä¸ªâ€œlayoutâ€æˆ–è€…â€œreflowâ€æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªå‘ˆç°å™¨éƒ½ä¼šè°ƒç”¨å…¶éœ€è¦è¿›è¡Œå¸ƒå±€çš„å­ä»£çš„ layout æ–¹æ³•ã€‚</p>\n<h4 id=\"Dirty-ä½ç³»ç»Ÿ\"><a href=\"#Dirty-ä½ç³»ç»Ÿ\" class=\"headerlink\" title=\"Dirty ä½ç³»ç»Ÿ\"></a>Dirty ä½ç³»ç»Ÿ</h4><p>ä¸ºé¿å…å¯¹æ‰€æœ‰ç»†å°æ›´æ”¹éƒ½è¿›è¡Œæ•´ä½“å¸ƒå±€ï¼Œæµè§ˆå™¨é‡‡ç”¨äº†ä¸€ç§â€œdirty ä½â€ç³»ç»Ÿã€‚å¦‚æœæŸä¸ªå‘ˆç°å™¨å‘ç”Ÿäº†æ›´æ”¹ï¼Œæˆ–è€…å°†è‡ªèº«åŠå…¶å­ä»£æ ‡æ³¨ä¸ºâ€œdirtyâ€ï¼Œåˆ™éœ€è¦è¿›è¡Œå¸ƒå±€ã€‚</p>\n<p>æœ‰ä¸¤ç§æ ‡è®°ï¼šâ€œdirtyâ€å’Œâ€œchildren are dirtyâ€ã€‚â€œchildren are dirtyâ€è¡¨ç¤ºå°½ç®¡å‘ˆç°å™¨è‡ªèº«æ²¡æœ‰å˜åŒ–ï¼Œä½†å®ƒè‡³å°‘æœ‰ä¸€ä¸ªå­ä»£éœ€è¦å¸ƒå±€ã€‚</p>\n<h4 id=\"å…¨å±€å¸ƒå±€å’Œå¢é‡å¸ƒå±€\"><a href=\"#å…¨å±€å¸ƒå±€å’Œå¢é‡å¸ƒå±€\" class=\"headerlink\" title=\"å…¨å±€å¸ƒå±€å’Œå¢é‡å¸ƒå±€\"></a>å…¨å±€å¸ƒå±€å’Œå¢é‡å¸ƒå±€</h4><p>å…¨å±€å¸ƒå±€æ˜¯æŒ‡è§¦å‘äº†æ•´ä¸ªå‘ˆç°æ ‘èŒƒå›´çš„å¸ƒå±€ï¼Œè§¦å‘åŸå› å¯èƒ½åŒ…æ‹¬ï¼š</p>\n<ol>\n<li>å½±å“æ‰€æœ‰å‘ˆç°å™¨çš„å…¨å±€æ ·å¼æ›´æ”¹ï¼Œä¾‹å¦‚å­—ä½“å¤§å°æ›´æ”¹ã€‚</li>\n<li>å±å¹•å¤§å°è°ƒæ•´ã€‚</li>\n</ol>\n<p>å¸ƒå±€å¯ä»¥é‡‡ç”¨å¢é‡æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åªå¯¹ dirty å‘ˆç°å™¨è¿›è¡Œå¸ƒå±€ï¼ˆè¿™æ ·å¯èƒ½å­˜åœ¨éœ€è¦è¿›è¡Œé¢å¤–å¸ƒå±€çš„å¼Šç«¯ï¼‰ã€‚<br>å½“å‘ˆç°å™¨ä¸º dirty æ—¶ï¼Œä¼šå¼‚æ­¥è§¦å‘å¢é‡å¸ƒå±€ã€‚ä¾‹å¦‚ï¼Œå½“æ¥è‡ªç½‘ç»œçš„é¢å¤–å†…å®¹æ·»åŠ åˆ° DOM æ ‘ä¹‹åï¼Œæ–°çš„å‘ˆç°å™¨é™„åŠ åˆ°äº†å‘ˆç°æ ‘ä¸­ã€‚</p>\n<p><img data-src=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/reflow.png\" alt=\"img\">å›¾ï¼šå¢é‡å¸ƒå±€ - åªæœ‰ dirty å‘ˆç°å™¨åŠå…¶å­ä»£è¿›è¡Œå¸ƒå±€ (<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#3_6\">3.6</a>)ã€‚</p>\n<h4 id=\"å¼‚æ­¥å¸ƒå±€å’ŒåŒæ­¥å¸ƒå±€\"><a href=\"#å¼‚æ­¥å¸ƒå±€å’ŒåŒæ­¥å¸ƒå±€\" class=\"headerlink\" title=\"å¼‚æ­¥å¸ƒå±€å’ŒåŒæ­¥å¸ƒå±€\"></a>å¼‚æ­¥å¸ƒå±€å’ŒåŒæ­¥å¸ƒå±€</h4><p>å¢é‡å¸ƒå±€æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚Firefox å°†å¢é‡å¸ƒå±€çš„â€œreflow å‘½ä»¤â€åŠ å…¥é˜Ÿåˆ—ï¼Œè€Œè°ƒåº¦ç¨‹åºä¼šè§¦å‘è¿™äº›å‘½ä»¤çš„æ‰¹é‡æ‰§è¡Œã€‚WebKit ä¹Ÿæœ‰ç”¨äºæ‰§è¡Œå¢é‡å¸ƒå±€çš„è®¡æ—¶å™¨ï¼šå¯¹å‘ˆç°æ ‘è¿›è¡Œéå†ï¼Œå¹¶å¯¹ dirty å‘ˆç°å™¨è¿›è¡Œå¸ƒå±€ã€‚<br>è¯·æ±‚æ ·å¼ä¿¡æ¯ï¼ˆä¾‹å¦‚â€œoffsetHeightâ€ï¼‰çš„è„šæœ¬å¯åŒæ­¥è§¦å‘å¢é‡å¸ƒå±€ã€‚<br>å…¨å±€å¸ƒå±€å¾€å¾€æ˜¯åŒæ­¥è§¦å‘çš„ã€‚<br>æœ‰æ—¶ï¼Œå½“åˆå§‹å¸ƒå±€å®Œæˆä¹‹åï¼Œå¦‚æœä¸€äº›å±æ€§ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ï¼‰å‘ç”Ÿå˜åŒ–ï¼Œå¸ƒå±€å°±ä¼šä½œä¸ºå›è°ƒè€Œè§¦å‘ã€‚</p>\n<h4 id=\"ä¼˜åŒ–\"><a href=\"#ä¼˜åŒ–\" class=\"headerlink\" title=\"ä¼˜åŒ–\"></a>ä¼˜åŒ–</h4><p>å¦‚æœå¸ƒå±€æ˜¯ç”±â€œå¤§å°è°ƒæ•´â€æˆ–å‘ˆç°å™¨çš„ä½ç½®ï¼ˆè€Œéå¤§å°ï¼‰æ”¹å˜è€Œè§¦å‘çš„ï¼Œé‚£ä¹ˆå¯ä»¥ä»ç¼“å­˜ä¸­è·å–å‘ˆç°å™¨çš„å¤§å°ï¼Œè€Œæ— éœ€é‡æ–°è®¡ç®—ã€‚<br>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€ä¸ªå­æ ‘è¿›è¡Œäº†ä¿®æ”¹ï¼Œå› æ­¤æ— éœ€ä»æ ¹èŠ‚ç‚¹å¼€å§‹å¸ƒå±€ã€‚è¿™é€‚ç”¨äºåœ¨æœ¬åœ°è¿›è¡Œæ›´æ”¹è€Œä¸å½±å“å‘¨å›´å…ƒç´ çš„æƒ…å†µï¼Œä¾‹å¦‚åœ¨æ–‡æœ¬å­—æ®µä¸­æ’å…¥æ–‡æœ¬ï¼ˆå¦åˆ™æ¯æ¬¡é”®ç›˜è¾“å…¥éƒ½å°†è§¦å‘ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„å¸ƒå±€ï¼‰ã€‚</p>\n<h4 id=\"å¸ƒå±€å¤„ç†\"><a href=\"#å¸ƒå±€å¤„ç†\" class=\"headerlink\" title=\"å¸ƒå±€å¤„ç†\"></a>å¸ƒå±€å¤„ç†</h4><p>å¸ƒå±€é€šå¸¸å…·æœ‰ä»¥ä¸‹æ¨¡å¼ï¼š</p>\n<ol>\n<li>çˆ¶å‘ˆç°å™¨ç¡®å®šè‡ªå·±çš„å®½åº¦ã€‚</li>\n<li>çˆ¶å‘ˆç°å™¨ä¾æ¬¡å¤„ç†å­å‘ˆç°å™¨ï¼Œå¹¶ä¸”ï¼š<ol>\n<li>æ”¾ç½®å­å‘ˆç°å™¨ï¼ˆè®¾ç½® x,y åæ ‡ï¼‰ã€‚</li>\n<li>å¦‚æœæœ‰å¿…è¦ï¼Œè°ƒç”¨å­å‘ˆç°å™¨çš„å¸ƒå±€ï¼ˆå¦‚æœå­å‘ˆç°å™¨æ˜¯ dirty çš„ï¼Œæˆ–è€…è¿™æ˜¯å…¨å±€å¸ƒå±€ï¼Œæˆ–å‡ºäºå…¶ä»–æŸäº›åŸå› ï¼‰ï¼Œè¿™ä¼šè®¡ç®—å­å‘ˆç°å™¨çš„é«˜åº¦ã€‚</li>\n</ol>\n</li>\n<li>çˆ¶å‘ˆç°å™¨æ ¹æ®å­å‘ˆç°å™¨çš„ç´¯åŠ é«˜åº¦ä»¥åŠè¾¹è·å’Œè¡¥ç™½çš„é«˜åº¦æ¥è®¾ç½®è‡ªèº«é«˜åº¦ï¼Œæ­¤å€¼ä¹Ÿå¯ä¾›çˆ¶å‘ˆç°å™¨çš„çˆ¶å‘ˆç°å™¨ä½¿ç”¨ã€‚</li>\n<li>å°†å…¶ dirty ä½è®¾ç½®ä¸º falseã€‚</li>\n</ol>\n<p>Firefox ä½¿ç”¨â€œstateâ€å¯¹è±¡ (nsHTMLReflowState) ä½œä¸ºå¸ƒå±€çš„å‚æ•°ï¼ˆç§°ä¸ºâ€œreflowâ€ï¼‰ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬äº†çˆ¶å‘ˆç°å™¨çš„å®½åº¦ã€‚<br>Firefox å¸ƒå±€çš„è¾“å‡ºä¸ºâ€œmetricsâ€å¯¹è±¡ (nsHTMLReflowMetrics)ï¼Œå…¶åŒ…å«è®¡ç®—å¾—å‡ºçš„å‘ˆç°å™¨é«˜åº¦ã€‚</p>\n<h4 id=\"å®½åº¦è®¡ç®—\"><a href=\"#å®½åº¦è®¡ç®—\" class=\"headerlink\" title=\"å®½åº¦è®¡ç®—\"></a>å®½åº¦è®¡ç®—</h4><p>å‘ˆç°å™¨å®½åº¦æ˜¯æ ¹æ®å®¹å™¨å—çš„å®½åº¦ã€å‘ˆç°å™¨æ ·å¼ä¸­çš„â€œwidthâ€å±æ€§ä»¥åŠè¾¹è·å’Œè¾¹æ¡†è®¡ç®—å¾—å‡ºçš„ã€‚<br>ä¾‹å¦‚ä»¥ä¸‹ div çš„å®½åº¦ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div style&#x3D;&quot;width:30%&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>\n\n<p>å°†ç”± WebKit è®¡ç®—å¦‚ä¸‹ï¼ˆBenderBox ç±»ï¼ŒcalcWidth æ–¹æ³•ï¼‰ï¼š</p>\n<ul>\n<li><p>å®¹å™¨çš„å®½åº¦å–å®¹å™¨çš„ availableWidth å’Œ 0 ä¸­çš„è¾ƒå¤§å€¼ã€‚availableWidth åœ¨æœ¬ä¾‹ä¸­ç›¸å½“äº contentWidthï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">clientWidth() - paddingLeft() - paddingRight()</span><br></pre></td></tr></table></figure>\n\n<p>clientWidth å’Œ clientHeight è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨ï¼ˆé™¤å»è¾¹æ¡†å’Œæ»šåŠ¨æ¡ï¼‰ã€‚</p>\n</li>\n<li><p>å…ƒç´ çš„å®½åº¦æ˜¯â€œwidthâ€æ ·å¼å±æ€§ã€‚å®ƒä¼šæ ¹æ®å®¹å™¨å®½åº¦çš„ç™¾åˆ†æ¯”è®¡ç®—å¾—å‡ºä¸€ä¸ªç»å¯¹å€¼ã€‚</p>\n</li>\n<li><p>ç„¶ååŠ ä¸Šæ°´å¹³æ–¹å‘çš„è¾¹æ¡†å’Œè¡¥ç™½ã€‚</p>\n</li>\n</ul>\n<p>ç°åœ¨è®¡ç®—å¾—å‡ºçš„æ˜¯â€œpreferred widthâ€ã€‚ç„¶åéœ€è¦è®¡ç®—æœ€å°å®½åº¦å’Œæœ€å¤§å®½åº¦ã€‚<br>å¦‚æœé¦–é€‰å®½åº¦å¤§äºæœ€å¤§å®½åº¦ï¼Œé‚£ä¹ˆåº”ä½¿ç”¨æœ€å¤§å®½åº¦ã€‚å¦‚æœé¦–é€‰å®½åº¦å°äºæœ€å°å®½åº¦ï¼ˆæœ€å°çš„ä¸å¯ç ´å¼€å•ä½ï¼‰ï¼Œé‚£ä¹ˆåº”ä½¿ç”¨æœ€å°å®½åº¦ã€‚</p>\n<p>è¿™äº›å€¼ä¼šç¼“å­˜èµ·æ¥ï¼Œä»¥ç”¨äºéœ€è¦å¸ƒå±€è€Œå®½åº¦ä¸å˜çš„æƒ…å†µã€‚</p>\n<h4 id=\"æ¢è¡Œ\"><a href=\"#æ¢è¡Œ\" class=\"headerlink\" title=\"æ¢è¡Œ\"></a>æ¢è¡Œ</h4><p>å¦‚æœå‘ˆç°å™¨åœ¨å¸ƒå±€è¿‡ç¨‹ä¸­éœ€è¦æ¢è¡Œï¼Œä¼šç«‹å³åœæ­¢å¸ƒå±€ï¼Œå¹¶å‘ŠçŸ¥å…¶çˆ¶ä»£éœ€è¦æ¢è¡Œã€‚çˆ¶ä»£ä¼šåˆ›å»ºé¢å¤–çš„å‘ˆç°å™¨ï¼Œå¹¶å¯¹å…¶è°ƒç”¨å¸ƒå±€ã€‚</p>\n<h3 id=\"ç»˜åˆ¶\"><a href=\"#ç»˜åˆ¶\" class=\"headerlink\" title=\"ç»˜åˆ¶\"></a>ç»˜åˆ¶</h3><p>åœ¨ç»˜åˆ¶é˜¶æ®µï¼Œç³»ç»Ÿä¼šéå†å‘ˆç°æ ‘ï¼Œå¹¶è°ƒç”¨å‘ˆç°å™¨çš„â€œpaintâ€æ–¹æ³•ï¼Œå°†å‘ˆç°å™¨çš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ç»˜åˆ¶å·¥ä½œæ˜¯ä½¿ç”¨ç”¨æˆ·ç•Œé¢åŸºç¡€ç»„ä»¶å®Œæˆçš„ã€‚</p>\n<h4 id=\"å…¨å±€ç»˜åˆ¶å’Œå¢é‡ç»˜åˆ¶\"><a href=\"#å…¨å±€ç»˜åˆ¶å’Œå¢é‡ç»˜åˆ¶\" class=\"headerlink\" title=\"å…¨å±€ç»˜åˆ¶å’Œå¢é‡ç»˜åˆ¶\"></a>å…¨å±€ç»˜åˆ¶å’Œå¢é‡ç»˜åˆ¶</h4><p>å’Œå¸ƒå±€ä¸€æ ·ï¼Œç»˜åˆ¶ä¹Ÿåˆ†ä¸ºå…¨å±€ï¼ˆç»˜åˆ¶æ•´ä¸ªå‘ˆç°æ ‘ï¼‰å’Œå¢é‡ä¸¤ç§ã€‚åœ¨å¢é‡ç»˜åˆ¶ä¸­ï¼Œéƒ¨åˆ†å‘ˆç°å™¨å‘ç”Ÿäº†æ›´æ”¹ï¼Œä½†æ˜¯ä¸ä¼šå½±å“æ•´ä¸ªæ ‘ã€‚æ›´æ”¹åçš„å‘ˆç°å™¨å°†å…¶åœ¨å±å¹•ä¸Šå¯¹åº”çš„çŸ©å½¢åŒºåŸŸè®¾ä¸ºæ— æ•ˆï¼Œè¿™å¯¼è‡´ OS å°†å…¶è§†ä¸ºä¸€å—â€œdirty åŒºåŸŸâ€ï¼Œå¹¶ç”Ÿæˆâ€œpaintâ€äº‹ä»¶ã€‚OS ä¼šå¾ˆå·§å¦™åœ°å°†å¤šä¸ªåŒºåŸŸåˆå¹¶æˆä¸€ä¸ªã€‚åœ¨ Chrome æµè§ˆå™¨ä¸­ï¼Œæƒ…å†µè¦æ›´å¤æ‚ä¸€äº›ï¼Œå› ä¸º Chrome æµè§ˆå™¨çš„å‘ˆç°å™¨ä¸åœ¨ä¸»è¿›ç¨‹ä¸Šã€‚Chrome æµè§ˆå™¨ä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šæ¨¡æ‹Ÿ OS çš„è¡Œä¸ºã€‚å±•ç¤ºå±‚ä¼šä¾¦å¬è¿™äº›äº‹ä»¶ï¼Œå¹¶å°†æ¶ˆæ¯å§”æ‰˜ç»™å‘ˆç°æ ¹èŠ‚ç‚¹ã€‚ç„¶åéå†å‘ˆç°æ ‘ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸å…³çš„å‘ˆç°å™¨ï¼Œè¯¥å‘ˆç°å™¨ä¼šé‡æ–°ç»˜åˆ¶è‡ªå·±ï¼ˆé€šå¸¸ä¹ŸåŒ…æ‹¬å…¶å­ä»£ï¼‰ã€‚</p>\n<h4 id=\"ç»˜åˆ¶é¡ºåº\"><a href=\"#ç»˜åˆ¶é¡ºåº\" class=\"headerlink\" title=\"ç»˜åˆ¶é¡ºåº\"></a>ç»˜åˆ¶é¡ºåº</h4><p><a href=\"http://www.w3.org/TR/CSS21/zindex.html\">CSS2 è§„èŒƒå®šä¹‰äº†ç»˜åˆ¶æµç¨‹çš„é¡ºåº</a>ã€‚ç»˜åˆ¶çš„é¡ºåºå…¶å®å°±æ˜¯å…ƒç´ è¿›å…¥<a href=\"https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#stackingcontext\">å †æ ˆæ ·å¼ä¸Šä¸‹æ–‡</a>çš„é¡ºåºã€‚è¿™äº›å †æ ˆä¼šä»åå¾€å‰ç»˜åˆ¶ï¼Œå› æ­¤è¿™æ ·çš„é¡ºåºä¼šå½±å“ç»˜åˆ¶ã€‚å—å‘ˆç°å™¨çš„å †æ ˆé¡ºåºå¦‚ä¸‹ï¼š</p>\n<ol>\n<li>èƒŒæ™¯é¢œè‰²</li>\n<li>èƒŒæ™¯å›¾ç‰‡</li>\n<li>è¾¹æ¡†</li>\n<li>å­ä»£</li>\n<li>è½®å»“</li>\n</ol>\n<h4 id=\"Firefox-æ˜¾ç¤ºåˆ—è¡¨\"><a href=\"#Firefox-æ˜¾ç¤ºåˆ—è¡¨\" class=\"headerlink\" title=\"Firefox æ˜¾ç¤ºåˆ—è¡¨\"></a>Firefox æ˜¾ç¤ºåˆ—è¡¨</h4><p>Firefox éå†æ•´ä¸ªå‘ˆç°æ ‘ï¼Œä¸ºç»˜åˆ¶çš„çŸ©å½¢å»ºç«‹ä¸€ä¸ªæ˜¾ç¤ºåˆ—è¡¨ã€‚åˆ—è¡¨ä¸­æŒ‰ç…§æ­£ç¡®çš„ç»˜åˆ¶é¡ºåºï¼ˆå…ˆæ˜¯å‘ˆç°å™¨çš„èƒŒæ™¯ï¼Œç„¶åæ˜¯è¾¹æ¡†ç­‰ç­‰ï¼‰åŒ…å«äº†ä¸çŸ©å½¢ç›¸å…³çš„å‘ˆç°å™¨ã€‚è¿™æ ·ç­‰åˆ°é‡æ–°ç»˜åˆ¶çš„æ—¶å€™ï¼Œåªéœ€éå†ä¸€æ¬¡å‘ˆç°æ ‘ï¼Œè€Œä¸ç”¨å¤šæ¬¡éå†ï¼ˆç»˜åˆ¶æ‰€æœ‰èƒŒæ™¯ï¼Œç„¶åç»˜åˆ¶æ‰€æœ‰å›¾ç‰‡ï¼Œå†ç»˜åˆ¶æ‰€æœ‰è¾¹æ¡†ç­‰ç­‰ï¼‰ã€‚</p>\n<p>Firefox å¯¹æ­¤è¿‡ç¨‹è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯ä¸æ·»åŠ éšè—çš„å…ƒç´ ï¼Œä¾‹å¦‚è¢«ä¸é€æ˜å…ƒç´ å®Œå…¨é®æŒ¡ä½çš„å…ƒç´ ã€‚</p>\n<h4 id=\"WebKit-çŸ©å½¢å­˜å‚¨\"><a href=\"#WebKit-çŸ©å½¢å­˜å‚¨\" class=\"headerlink\" title=\"WebKit çŸ©å½¢å­˜å‚¨\"></a>WebKit çŸ©å½¢å­˜å‚¨</h4><p>åœ¨é‡æ–°ç»˜åˆ¶ä¹‹å‰ï¼ŒWebKit ä¼šå°†åŸæ¥çš„çŸ©å½¢å¦å­˜ä¸ºä¸€å¼ ä½å›¾ï¼Œç„¶ååªç»˜åˆ¶æ–°æ—§çŸ©å½¢ä¹‹é—´çš„å·®å¼‚éƒ¨åˆ†ã€‚</p>\n<h3 id=\"åŠ¨æ€å˜åŒ–\"><a href=\"#åŠ¨æ€å˜åŒ–\" class=\"headerlink\" title=\"åŠ¨æ€å˜åŒ–\"></a>åŠ¨æ€å˜åŒ–</h3><p>åœ¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šå°½å¯èƒ½åšå‡ºæœ€å°çš„å“åº”ã€‚å› æ­¤ï¼Œå…ƒç´ çš„é¢œè‰²æ”¹å˜åï¼Œåªä¼šå¯¹è¯¥å…ƒç´ è¿›è¡Œé‡ç»˜ã€‚å…ƒç´ çš„ä½ç½®æ”¹å˜åï¼Œåªä¼šå¯¹è¯¥å…ƒç´ åŠå…¶å­å…ƒç´ ï¼ˆå¯èƒ½è¿˜æœ‰åŒçº§å…ƒç´ ï¼‰è¿›è¡Œå¸ƒå±€å’Œé‡ç»˜ã€‚æ·»åŠ  DOM èŠ‚ç‚¹åï¼Œä¼šå¯¹è¯¥èŠ‚ç‚¹è¿›è¡Œå¸ƒå±€å’Œé‡ç»˜ã€‚ä¸€äº›é‡å¤§å˜åŒ–ï¼ˆä¾‹å¦‚å¢å¤§â€œhtmlâ€å…ƒç´ çš„å­—ä½“ï¼‰ä¼šå¯¼è‡´ç¼“å­˜æ— æ•ˆï¼Œä½¿å¾—æ•´ä¸ªå‘ˆç°æ ‘éƒ½ä¼šè¿›è¡Œé‡æ–°å¸ƒå±€å’Œç»˜åˆ¶ã€‚</p>\n<h3 id=\"å‘ˆç°å¼•æ“çš„çº¿ç¨‹\"><a href=\"#å‘ˆç°å¼•æ“çš„çº¿ç¨‹\" class=\"headerlink\" title=\"å‘ˆç°å¼•æ“çš„çº¿ç¨‹\"></a>å‘ˆç°å¼•æ“çš„çº¿ç¨‹</h3><p>å‘ˆç°å¼•æ“é‡‡ç”¨äº†å•çº¿ç¨‹ã€‚å‡ ä¹æ‰€æœ‰æ“ä½œï¼ˆé™¤äº†ç½‘ç»œæ“ä½œï¼‰éƒ½æ˜¯åœ¨å•çº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚åœ¨ Firefox å’Œ Safari ä¸­ï¼Œè¯¥çº¿ç¨‹å°±æ˜¯æµè§ˆå™¨çš„ä¸»çº¿ç¨‹ã€‚è€Œåœ¨ Chrome æµè§ˆå™¨ä¸­ï¼Œè¯¥çº¿ç¨‹æ˜¯æ ‡ç­¾è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚<br>ç½‘ç»œæ“ä½œå¯ç”±å¤šä¸ªå¹¶è¡Œçº¿ç¨‹æ‰§è¡Œã€‚å¹¶è¡Œè¿æ¥æ•°æ˜¯æœ‰é™çš„ï¼ˆé€šå¸¸ä¸º 2 è‡³ 6 ä¸ªï¼Œä»¥ Firefox 3 ä¸ºä¾‹æ˜¯ 6 ä¸ªï¼‰ã€‚</p>\n<h4 id=\"äº‹ä»¶å¾ªç¯\"><a href=\"#äº‹ä»¶å¾ªç¯\" class=\"headerlink\" title=\"äº‹ä»¶å¾ªç¯\"></a>äº‹ä»¶å¾ªç¯</h4><p>æµè§ˆå™¨çš„ä¸»çº¿ç¨‹æ˜¯äº‹ä»¶å¾ªç¯ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œæ°¸è¿œå¤„äºæ¥å—å¤„ç†çŠ¶æ€ï¼Œå¹¶ç­‰å¾…äº‹ä»¶ï¼ˆå¦‚å¸ƒå±€å’Œç»˜åˆ¶äº‹ä»¶ï¼‰å‘ç”Ÿï¼Œå¹¶è¿›è¡Œå¤„ç†ã€‚è¿™æ˜¯ Firefox ä¸­å…³äºä¸»äº‹ä»¶å¾ªç¯çš„ä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">while (!mExiting)</span><br><span class=\"line\">    NS_ProcessNextEvent(thread);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"9-å†…å­˜æ³„éœ²\"><a href=\"#9-å†…å­˜æ³„éœ²\" class=\"headerlink\" title=\"9.å†…å­˜æ³„éœ²\"></a>9.<a href=\"https://segmentfault.com/a/1190000020231307\">å†…å­˜æ³„éœ²</a></h1><p>ç”¨æˆ·ä¸€èˆ¬ä¸ä¼šåœ¨ä¸€ä¸ª Web é¡µé¢åœç•™æ¯”è¾ƒä¹…ï¼Œå³ä½¿æœ‰ä¸€ç‚¹å†…å­˜æ³„æ¼ï¼Œé‡è½½é¡µé¢å†…å­˜ä¹Ÿä¼šè·Ÿç€é‡Šæ”¾ã€‚è€Œä¸”æµè§ˆå™¨ä¹Ÿæœ‰è‡ªåŠ¨å›æ”¶å†…å­˜çš„æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å‰ç«¯å…¶å®å¹¶æ²¡æœ‰åƒ Cã€C++ è¿™ç±»è¯­è¨€ä¸€æ ·ï¼Œç‰¹åˆ«å…³æ³¨å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚</p>\n<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¯¹å†…å­˜æ³„æ¼æ²¡æœ‰ä»€ä¹ˆæ¦‚å¿µï¼Œæœ‰æ—¶å€™è¿˜æ˜¯æœ‰å¯èƒ½å› ä¸ºå†…å­˜æ³„æ¼ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚äº†è§£å†…å­˜æ³„æ¼ï¼Œå¦‚ä½•é¿å…å†…å­˜æ³„æ¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æå‡å‰ç«¯æŠ€èƒ½çš„å¿…ç»ä¹‹è·¯ã€‚</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯å†…å­˜ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å†…å­˜ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å†…å­˜ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å†…å­˜ï¼Ÿ</h2><blockquote>\n<p>åœ¨ç¡¬ä»¶çº§åˆ«ä¸Šï¼Œè®¡ç®—æœºå†…å­˜ç”±å¤§é‡è§¦å‘å™¨ç»„æˆã€‚æ¯ä¸ªè§¦å‘å™¨åŒ…å«å‡ ä¸ªæ™¶ä½“ç®¡ï¼Œèƒ½å¤Ÿå­˜å‚¨ä¸€ä¸ªä½ã€‚å•ä¸ªè§¦å‘å™¨å¯ä»¥é€šè¿‡å”¯ä¸€æ ‡è¯†ç¬¦å¯»å€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¯»å–å’Œè¦†ç›–å®ƒä»¬ã€‚å› æ­¤ï¼Œä»æ¦‚å¿µä¸Šè®²ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„æ•´ä¸ªè®¡ç®—æœºå†…å­˜çœ‹ä½œæ˜¯ä¸€ä¸ªå·¨å¤§çš„ä½æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å’Œå†™ã€‚</p>\n</blockquote>\n<p>è¿™ä¹ˆåº•å±‚çš„æ¦‚å¿µï¼Œäº†è§£ä¸‹å°±å¥½ï¼Œç»å¤§å¤šæ•°æ•°æƒ…å†µä¸‹ï¼ŒJavaScript è¯­è¨€ä½œä¸ºä½ ä»¬é«˜çº§è¯­è¨€ï¼Œæ— éœ€æˆ‘ä»¬ä½¿ç”¨äºŒè¿›åˆ¶è¿›ç›´æ¥è¿›è¡Œè¯»å’Œå†™ã€‚</p>\n<h2 id=\"å†…å­˜ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#å†…å­˜ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"å†…å­˜ç”Ÿå‘½å‘¨æœŸ\"></a>å†…å­˜ç”Ÿå‘½å‘¨æœŸ</h2><p>å†…å­˜ä¹Ÿæ˜¯æœ‰<strong>ç”Ÿå‘½å‘¨æœŸ</strong>çš„ï¼Œä¸ç®¡ä»€ä¹ˆç¨‹åºè¯­è¨€ï¼Œä¸€èˆ¬å¯ä»¥æŒ‰é¡ºåºåˆ†ä¸ºä¸‰ä¸ªå‘¨æœŸï¼š</p>\n<ul>\n<li><p>åˆ†é…æœŸ</p>\n<p>åˆ†é…æ‰€éœ€è¦çš„å†…å­˜</p>\n</li>\n<li><p>ä½¿ç”¨æœŸ</p>\n<p>ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ï¼ˆè¯»ã€å†™ï¼‰</p>\n</li>\n<li><p>é‡Šæ”¾æœŸ</p>\n<p>ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾å’Œå½’è¿˜</p>\n</li>\n</ul>\n<p>å†…å­˜åˆ†é… -&gt; å†…å­˜ä½¿ç”¨ -&gt; å†…å­˜é‡Šæ”¾ã€‚</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ</h2><blockquote>\n<p>åœ¨<a href=\"https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6\">è®¡ç®—æœºç§‘å­¦</a>ä¸­ï¼Œ<strong>å†…å­˜æ³„æ¼</strong>æŒ‡ç”±äºç–å¿½æˆ–é”™è¯¯é€ æˆç¨‹åºæœªèƒ½é‡Šæ”¾å·²ç»ä¸å†ä½¿ç”¨çš„<a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98\">å†…å­˜</a>ã€‚å†…å­˜æ³„æ¼å¹¶éæŒ‡å†…å­˜åœ¨ç‰©ç†ä¸Šçš„æ¶ˆå¤±ï¼Œè€Œæ˜¯åº”ç”¨ç¨‹åºåˆ†é…æŸæ®µå†…å­˜åï¼Œç”±äºè®¾è®¡é”™è¯¯ï¼Œå¯¼è‡´åœ¨é‡Šæ”¾è¯¥æ®µå†…å­˜ä¹‹å‰å°±å¤±å»äº†å¯¹è¯¥æ®µå†…å­˜çš„æ§åˆ¶ï¼Œä»è€Œé€ æˆäº†å†…å­˜çš„æµªè´¹ã€‚</p>\n</blockquote>\n<p>å¦‚æœå†…å­˜ä¸éœ€è¦æ—¶ï¼Œæ²¡æœ‰ç»è¿‡ç”Ÿå‘½å‘¨æœŸçš„<strong>é‡Šæ”¾æœŸ</strong>ï¼Œé‚£ä¹ˆå°±å­˜åœ¨<strong>å†…å­˜æ³„æ¼</strong>ã€‚</p>\n<p>å†…å­˜æ³„æ¼ç®€å•ç†è§£ï¼šæ— ç”¨çš„å†…å­˜è¿˜åœ¨å ç”¨ï¼Œå¾—ä¸åˆ°é‡Šæ”¾å’Œå½’è¿˜ã€‚æ¯”è¾ƒä¸¥é‡æ—¶ï¼Œæ— ç”¨çš„å†…å­˜ä¼šæŒç»­é€’å¢ï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå¡é¡¿ï¼Œç”šè‡³å´©æºƒã€‚</p>\n<h2 id=\"JavaScript-å†…å­˜ç®¡ç†æœºåˆ¶\"><a href=\"#JavaScript-å†…å­˜ç®¡ç†æœºåˆ¶\" class=\"headerlink\" title=\"JavaScript å†…å­˜ç®¡ç†æœºåˆ¶\"></a>JavaScript å†…å­˜ç®¡ç†æœºåˆ¶</h2><blockquote>\n<p>åƒ C è¯­è¨€è¿™æ ·çš„åº•å±‚è¯­è¨€ä¸€èˆ¬éƒ½æœ‰åº•å±‚çš„å†…å­˜ç®¡ç†æ¥å£ï¼Œæ¯”å¦‚ <code>malloc()</code>å’Œ<code>free()</code>ã€‚ç›¸åï¼ŒJavaScriptæ˜¯åœ¨åˆ›å»ºå˜é‡ï¼ˆå¯¹è±¡ï¼Œå­—ç¬¦ä¸²ç­‰ï¼‰æ—¶è‡ªåŠ¨è¿›è¡Œäº†åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”åœ¨ä¸ä½¿ç”¨å®ƒä»¬æ—¶â€œè‡ªåŠ¨â€é‡Šæ”¾ã€‚ é‡Šæ”¾çš„è¿‡ç¨‹ç§°ä¸ºåƒåœ¾å›æ”¶ã€‚è¿™ä¸ªâ€œè‡ªåŠ¨â€æ˜¯æ··ä¹±çš„æ ¹æºï¼Œå¹¶è®©JavaScriptï¼ˆå’Œå…¶ä»–é«˜çº§è¯­è¨€ï¼‰å¼€å‘è€…é”™è¯¯çš„æ„Ÿè§‰ä»–ä»¬å¯ä»¥ä¸å…³å¿ƒå†…å­˜ç®¡ç†ã€‚</p>\n</blockquote>\n<p>JavaScript å†…å­˜ç®¡ç†æœºåˆ¶å’Œå†…å­˜çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong>æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚é¦–å…ˆéœ€è¦<strong>åˆ†é…å†…å­˜</strong>ï¼Œç„¶å<strong>ä½¿ç”¨å†…å­˜</strong>ï¼Œæœ€å<strong>é‡Šæ”¾å†…å­˜</strong>ã€‚</p>\n<p>å…¶ä¸­ JavaScript è¯­è¨€<strong>ä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨</strong>åˆ†é…å†…å­˜ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå¯¹ JavaScript ç¨‹åºå‘˜æ¥è¯´é€šå¸¸å°±æ˜¯ä½¿ç”¨å†…å­˜ï¼ˆå³ä½¿ç”¨å˜é‡ã€å‡½æ•°ã€å¯¹è±¡ç­‰ï¼‰ã€‚</p>\n<h3 id=\"å†…å­˜åˆ†é…\"><a href=\"#å†…å­˜åˆ†é…\" class=\"headerlink\" title=\"å†…å­˜åˆ†é…\"></a>å†…å­˜åˆ†é…</h3><p>JavaScript å®šä¹‰å˜é‡å°±ä¼šè‡ªåŠ¨åˆ†é…å†…å­˜çš„ã€‚<strong>æˆ‘ä»¬åªéœ€äº†è§£ JavaScript çš„å†…å­˜æ˜¯è‡ªåŠ¨åˆ†é…çš„å°±è¶³å¤Ÿäº†</strong>ã€‚</p>\n<p>çœ‹ä¸‹å†…å­˜è‡ªåŠ¨åˆ†é…çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; ç»™æ•°å€¼å˜é‡åˆ†é…å†…å­˜</span><br><span class=\"line\">let number &#x3D; 123; </span><br><span class=\"line\">&#x2F;&#x2F; ç»™å­—ç¬¦ä¸²åˆ†é…å†…å­˜</span><br><span class=\"line\">const string &#x3D; &quot;xianshannan&quot;; </span><br><span class=\"line\">&#x2F;&#x2F; ç»™å¯¹è±¡åŠå…¶åŒ…å«çš„å€¼åˆ†é…å†…å­˜</span><br><span class=\"line\">const object &#x3D; &#123;</span><br><span class=\"line\">  a: 1,</span><br><span class=\"line\">  b: null</span><br><span class=\"line\">&#125;; </span><br><span class=\"line\">&#x2F;&#x2F; ç»™æ•°ç»„åŠå…¶åŒ…å«çš„å€¼åˆ†é…å†…å­˜ï¼ˆå°±åƒå¯¹è±¡ä¸€æ ·ï¼‰</span><br><span class=\"line\">const array &#x3D; [1, null, &quot;abra&quot;]; </span><br><span class=\"line\">&#x2F;&#x2F; ç»™å‡½æ•°ï¼ˆå¯è°ƒç”¨çš„å¯¹è±¡ï¼‰åˆ†é…å†…å­˜</span><br><span class=\"line\">function func(a)&#123;</span><br><span class=\"line\">  return a;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å†…å­˜ä½¿ç”¨\"><a href=\"#å†…å­˜ä½¿ç”¨\" class=\"headerlink\" title=\"å†…å­˜ä½¿ç”¨\"></a>å†…å­˜ä½¿ç”¨</h3><blockquote>\n<p>ä½¿ç”¨å€¼çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯å¯¹åˆ†é…å†…å­˜è¿›è¡Œ<strong>è¯»å–ä¸å†™å…¥</strong>çš„æ“ä½œã€‚è¯»å–ä¸å†™å…¥å¯èƒ½æ˜¯å†™å…¥ä¸€ä¸ªå˜é‡æˆ–è€…ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼ï¼Œç”šè‡³ä¼ é€’å‡½æ•°çš„å‚æ•°ã€‚</p>\n</blockquote>\n<p>æ ¹æ®ä¸Šé¢çš„å†…å­˜è‡ªåŠ¨åˆ†é…ä¾‹å­ï¼Œæˆ‘ä»¬ç»§ç»­å†…å­˜ä½¿ç”¨çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å†™å…¥å†…å­˜</span><br><span class=\"line\">number &#x3D; 234;</span><br><span class=\"line\">&#x2F;&#x2F; è¯»å– number å’Œ func çš„å†…å­˜ï¼Œå†™å…¥ func å‚æ•°å†…å­˜</span><br><span class=\"line\">func(number);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å†…å­˜å›æ”¶\"><a href=\"#å†…å­˜å›æ”¶\" class=\"headerlink\" title=\"å†…å­˜å›æ”¶\"></a>å†…å­˜å›æ”¶</h3><p>å‰ç«¯ç•Œä¸€èˆ¬ç§°<strong>åƒåœ¾å†…å­˜å›æ”¶</strong>ä¸º <code>GC</code>ï¼ˆGarbage Collectionï¼Œå³åƒåœ¾å›æ”¶ï¼‰ã€‚</p>\n<p><strong>å†…å­˜æ³„æ¼ä¸€èˆ¬éƒ½æ˜¯å‘ç”Ÿåœ¨è¿™ä¸€æ­¥ï¼ŒJavaScript çš„å†…å­˜å›æ”¶æœºåˆ¶è™½ç„¶èƒ½å›æ”¶ç»å¤§éƒ¨åˆ†çš„åƒåœ¾å†…å­˜ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨å›æ”¶ä¸äº†çš„æƒ…å†µï¼Œå¦‚æœå­˜åœ¨è¿™äº›æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¸…ç†å†…å­˜ã€‚</strong></p>\n<p>ä»¥å‰ä¸€äº›è€ç‰ˆæœ¬çš„æµè§ˆå™¨çš„ JavaScript å›æ”¶æœºåˆ¶æ²¡é‚£ä¹ˆå®Œå–„ï¼Œç»å¸¸å‡ºç°ä¸€äº› bug çš„å†…å­˜æ³„æ¼ï¼Œä¸è¿‡ç°åœ¨çš„æµè§ˆå™¨åŸºæœ¬éƒ½æ²¡è¿™äº›é—®é¢˜äº†ï¼Œå·²è¿‡æ—¶çš„çŸ¥è¯†è¿™é‡Œå°±ä¸åšæ·±ç©¶äº†ã€‚</p>\n<p>è¿™é‡Œäº†è§£ä¸‹ç°åœ¨çš„ JavaScript çš„åƒåœ¾å†…å­˜çš„ä¸¤ç§å›æ”¶æ–¹å¼ï¼Œç†Ÿæ‚‰ä¸‹è¿™ä¸¤ç§ç®—æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£ä¸€äº›å†…å­˜æ³„æ¼çš„åœºæ™¯ã€‚</p>\n<h4 id=\"å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†\"><a href=\"#å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†\" class=\"headerlink\" title=\"å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†\"></a>å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†</h4><blockquote>\n<p>è¿™æ˜¯æœ€åˆçº§çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚æ­¤ç®—æ³•æŠŠâ€œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦â€ç®€åŒ–å®šä¹‰ä¸ºâ€œå¯¹è±¡æœ‰æ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨åˆ°å®ƒâ€ã€‚å¦‚æœæ²¡æœ‰å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡ï¼ˆé›¶å¼•ç”¨ï¼‰ï¼Œå¯¹è±¡å°†è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</p>\n</blockquote>\n<p>çœ‹ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€çš„å†…å­˜è¢«å›æ”¶äº†å—ï¼Ÿ</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; â€œè¿™ä¸ªå¯¹è±¡â€åˆ†é…ç»™ a å˜é‡</span><br><span class=\"line\">var a &#x3D; &#123;</span><br><span class=\"line\">  a: 1,</span><br><span class=\"line\">  b: 2,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; b å¼•ç”¨â€œè¿™ä¸ªå¯¹è±¡â€</span><br><span class=\"line\">var b &#x3D; a; </span><br><span class=\"line\">&#x2F;&#x2F; ç°åœ¨ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€çš„åŸå§‹å¼•ç”¨ a è¢« b æ›¿æ¢äº†</span><br><span class=\"line\">a &#x3D; 1;</span><br></pre></td></tr></table></figure>\n\n<p>å½“å‰æ‰§è¡Œç¯å¢ƒä¸­ï¼Œâ€œè¿™ä¸ªå¯¹è±¡â€å†…å­˜è¿˜æ²¡æœ‰è¢«å›æ”¶çš„ï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾â€œè¿™ä¸ªå¯¹è±¡â€çš„å†…å­˜ï¼ˆå½“ç„¶æ˜¯è¿˜æ²¡ç¦»å¼€æ‰§è¡Œç¯å¢ƒçš„æƒ…å†µä¸‹ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">b &#x3D; null;</span><br><span class=\"line\">&#x2F;&#x2F; æˆ–è€… b &#x3D; 1ï¼Œåæ­£æ›¿æ¢â€œè¿™ä¸ªå¯¹è±¡â€å°±è¡Œäº†</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·å¼•ç”¨çš„â€è¿™ä¸ªå¯¹è±¡â€çš„å†…å­˜å°±è¢«å›æ”¶äº†ã€‚</p>\n<p>ES6 æŠŠ<strong>å¼•ç”¨</strong>æœ‰åŒºåˆ†ä¸º<strong>å¼ºå¼•ç”¨</strong>å’Œ<strong>å¼±å¼•ç”¨</strong>ï¼Œè¿™ä¸ªç›®å‰åªæœ‰å† Set å’Œ Map ä¸­æ‰æœ‰ã€‚</p>\n<p><strong>å¼ºå¼•ç”¨</strong>æ‰ä¼šæœ‰<strong>å¼•ç”¨è®¡æ•°</strong>å åŠ ï¼Œåªæœ‰å¼•ç”¨è®¡æ•°ä¸º 0 çš„å¯¹è±¡çš„å†…å­˜æ‰ä¼šè¢«å›æ”¶ï¼Œæ‰€ä»¥ä¸€èˆ¬éœ€è¦æ‰‹åŠ¨å›æ”¶å†…å­˜ï¼ˆæ‰‹åŠ¨å›æ”¶çš„å‰æåœ¨äº<strong>æ ‡è®°æ¸…é™¤æ³•</strong>è¿˜æ²¡æ‰§è¡Œï¼Œè¿˜å¤„äºå½“å‰æ‰§è¡Œç¯å¢ƒï¼‰ã€‚</p>\n<p>è€Œ<strong>å¼±å¼•ç”¨</strong>æ²¡æœ‰è§¦å‘<strong>å¼•ç”¨è®¡æ•°</strong>å åŠ ï¼Œåªè¦å¼•ç”¨è®¡æ•°ä¸º 0ï¼Œå¼±å¼•ç”¨å°±ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œæ— éœ€æ‰‹åŠ¨å›æ”¶å†…å­˜ã€‚</p>\n<h4 id=\"æ ‡è®°æ¸…é™¤æ³•\"><a href=\"#æ ‡è®°æ¸…é™¤æ³•\" class=\"headerlink\" title=\"æ ‡è®°æ¸…é™¤æ³•\"></a>æ ‡è®°æ¸…é™¤æ³•</h4><blockquote>\n<p>å½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“å˜é‡ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶åˆ™æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ï¼Œè¢«æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€çš„å˜é‡æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ï¼Œå› ä¸ºå®ƒä»¬æ­£åœ¨è¢«ä½¿ç”¨ï¼Œè€Œæ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€çš„å˜é‡åˆ™å¯ä»¥è¢«å›æ”¶</p>\n</blockquote>\n<p>ç¯å¢ƒå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬çš„ä½œç”¨åŸŸï¼Œä½†æ˜¯å…¨å±€ä½œç”¨åŸŸçš„å˜é‡åªä¼šåœ¨é¡µé¢å…³é—­æ‰ä¼šé”€æ¯ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; å‡è®¾è¿™é‡Œæ˜¯å…¨å±€å˜é‡</span><br><span class=\"line\">&#x2F;&#x2F; b è¢«æ ‡è®°è¿›å…¥ç¯å¢ƒ</span><br><span class=\"line\">var b &#x3D; 2;</span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">  var a &#x3D; 1;</span><br><span class=\"line\">  &#x2F;&#x2F; å‡½æ•°æ‰§è¡Œæ—¶ï¼Œa è¢«æ ‡è®°è¿›å…¥ç¯å¢ƒ</span><br><span class=\"line\">  return a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#x2F;&#x2F; å‡½æ•°æ‰§è¡Œç»“æŸï¼Œa è¢«æ ‡è®°ç¦»å¼€ç¯å¢ƒï¼Œè¢«å›æ”¶</span><br><span class=\"line\">&#x2F;&#x2F; ä½†æ˜¯ b å°±æ²¡æœ‰è¢«æ ‡è®°ç¦»å¼€ç¯å¢ƒ</span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"JavaScript-å†…å­˜æ³„æ¼çš„ä¸€äº›åœºæ™¯\"><a href=\"#JavaScript-å†…å­˜æ³„æ¼çš„ä¸€äº›åœºæ™¯\" class=\"headerlink\" title=\"JavaScript å†…å­˜æ³„æ¼çš„ä¸€äº›åœºæ™¯\"></a>JavaScript å†…å­˜æ³„æ¼çš„ä¸€äº›åœºæ™¯</h2><p>JavaScript çš„å†…å­˜å›æ”¶æœºåˆ¶è™½ç„¶èƒ½å›æ”¶ç»å¤§éƒ¨åˆ†çš„åƒåœ¾å†…å­˜ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨å›æ”¶ä¸äº†çš„æƒ…å†µã€‚ç¨‹åºå‘˜è¦è®©æµè§ˆå™¨å†…å­˜æ³„æ¼ï¼Œæµè§ˆå™¨ä¹Ÿæ˜¯ç®¡ä¸äº†çš„ã€‚</p>\n<p><strong>ä¸‹é¢æœ‰äº›ä¾‹å­æ˜¯åœ¨æ‰§è¡Œç¯å¢ƒä¸­ï¼Œæ²¡ç¦»å¼€å½“å‰æ‰§è¡Œç¯å¢ƒï¼Œè¿˜æ²¡è§¦å‘æ ‡è®°æ¸…é™¤æ³•ã€‚æ‰€ä»¥ä½ éœ€è¦è¯»æ‡‚ä¸Šé¢ JavaScript çš„å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ‰èƒ½æ›´å¥½ç†è§£ä¸‹é¢çš„åœºæ™¯ã€‚</strong></p>\n<h3 id=\"æ„å¤–çš„å…¨å±€å˜é‡\"><a href=\"#æ„å¤–çš„å…¨å±€å˜é‡\" class=\"headerlink\" title=\"æ„å¤–çš„å…¨å±€å˜é‡\"></a>æ„å¤–çš„å…¨å±€å˜é‡</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å®šä¹‰</span><br><span class=\"line\">function count(number) &#123;</span><br><span class=\"line\">  &#x2F;&#x2F; basicCount ç›¸å½“äº window.basicCount &#x3D; 2;</span><br><span class=\"line\">  basicCount &#x3D; 2;</span><br><span class=\"line\">  return basicCount + number;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸è¿‡åœ¨ eslint å¸®åŠ©ä¸‹ï¼Œè¿™ç§åœºæ™¯ç°åœ¨åŸºæœ¬æ²¡äººä¼šçŠ¯äº†ï¼Œeslint ä¼šç›´æ¥æŠ¥é”™ï¼Œäº†è§£ä¸‹å°±å¥½ã€‚</p>\n<h3 id=\"è¢«é—å¿˜çš„è®¡æ—¶å™¨\"><a href=\"#è¢«é—å¿˜çš„è®¡æ—¶å™¨\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„è®¡æ—¶å™¨\"></a>è¢«é—å¿˜çš„è®¡æ—¶å™¨</h3><p>æ— ç”¨çš„è®¡æ—¶å™¨å¿˜è®°æ¸…ç†æ˜¯æ–°æ‰‹æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ä¹‹ä¸€ã€‚</p>\n<p>å°±æ‹¿ä¸€ä¸ª vue ç»„ä»¶æ¥åšä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    refresh() &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è·å–ä¸€äº›æ•°æ®</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    setInterval(function() &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è½®è¯¢è·å–æ•°æ®</span><br><span class=\"line\">      this.refresh()</span><br><span class=\"line\">    &#125;, 2000)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ç»„ä»¶é”€æ¯çš„æ—¶å€™ï¼Œ<code>setInterval</code> è¿˜æ˜¯åœ¨è¿è¡Œçš„ï¼Œé‡Œé¢æ¶‰åŠåˆ°çš„å†…å­˜éƒ½æ˜¯æ²¡æ³•å›æ”¶çš„ï¼ˆæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯å¿…é¡»çš„å†…å­˜ï¼Œä¸æ˜¯åƒåœ¾å†…å­˜ï¼‰ï¼Œéœ€è¦åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™æ¸…é™¤è®¡æ—¶å™¨ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    refresh() &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è·å–ä¸€äº›æ•°æ®</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.refreshInterval &#x3D; setInterval(function() &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è½®è¯¢è·å–æ•°æ®</span><br><span class=\"line\">      this.refresh()</span><br><span class=\"line\">    &#125;, 2000)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  beforeDestroy() &#123;</span><br><span class=\"line\">    clearInterval(this.refreshInterval)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¢«é—å¿˜çš„äº‹ä»¶ç›‘å¬å™¨\"><a href=\"#è¢«é—å¿˜çš„äº‹ä»¶ç›‘å¬å™¨\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„äº‹ä»¶ç›‘å¬å™¨\"></a>è¢«é—å¿˜çš„äº‹ä»¶ç›‘å¬å™¨</h3><p>æ— ç”¨çš„äº‹ä»¶ç›‘å¬å™¨å¿˜è®°æ¸…ç†æ˜¯æ–°æ‰‹æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ä¹‹ä¸€ã€‚</p>\n<p>è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ vue ç»„ä»¶åšä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    window.addEventListener(&#39;resize&#39;, () &#x3D;&gt; &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è¿™é‡Œåšä¸€äº›æ“ä½œ</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ç»„ä»¶é”€æ¯çš„æ—¶å€™ï¼Œresize äº‹ä»¶è¿˜æ˜¯åœ¨ç›‘å¬ä¸­ï¼Œé‡Œé¢æ¶‰åŠåˆ°çš„å†…å­˜éƒ½æ˜¯æ²¡æ³•å›æ”¶çš„ï¼ˆæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯å¿…é¡»çš„å†…å­˜ï¼Œä¸æ˜¯åƒåœ¾å†…å­˜ï¼‰ï¼Œéœ€è¦åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™ç§»é™¤ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    this.resizeEventCallback &#x3D; () &#x3D;&gt; &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; è¿™é‡Œåšä¸€äº›æ“ä½œ</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    window.addEventListener(&#39;resize&#39;, this.resizeEventCallback)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  beforeDestroy() &#123;</span><br><span class=\"line\">    window.removeEventListener(&#39;resize&#39;, this.resizeEventCallback)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¢«é—å¿˜çš„-ES6-Set-æˆå‘˜\"><a href=\"#è¢«é—å¿˜çš„-ES6-Set-æˆå‘˜\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„ ES6 Set æˆå‘˜\"></a>è¢«é—å¿˜çš„ ES6 Set æˆå‘˜</h3><p>å¦‚æœå¯¹ Set ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹<a href=\"http://es6.ruanyifeng.com/#docs/set-map#Set\">è¿™é‡Œ</a>ã€‚</p>\n<p>å¦‚ä¸‹æ˜¯æœ‰å†…å­˜æ³„æ¼çš„ï¼ˆæˆå‘˜æ˜¯å¼•ç”¨ç±»å‹çš„ï¼Œå³å¯¹è±¡ï¼‰:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new Set();</span><br><span class=\"line\">let value &#x3D; &#123; test: 22&#125;;</span><br><span class=\"line\">map.add(value);</span><br><span class=\"line\"></span><br><span class=\"line\">value&#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦æ”¹æˆè¿™æ ·ï¼Œæ‰æ²¡å†…å­˜æ³„æ¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new Set();</span><br><span class=\"line\">let value &#x3D; &#123; test: 22&#125;;</span><br><span class=\"line\">map.add(value);</span><br><span class=\"line\"></span><br><span class=\"line\">map.delete(value);</span><br><span class=\"line\">value &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<p>æœ‰ä¸ªæ›´ä¾¿æ·çš„æ–¹å¼ï¼Œä½¿ç”¨ WeakSetï¼ŒWeakSet çš„æˆå‘˜æ˜¯<strong>å¼±å¼•ç”¨</strong>ï¼Œå†…å­˜å›æ”¶ä¸ä¼šè€ƒè™‘åˆ°è¿™ä¸ªå¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new WeakSet();</span><br><span class=\"line\">let value &#x3D; &#123; test: 22&#125;;</span><br><span class=\"line\">map.add(value);</span><br><span class=\"line\"></span><br><span class=\"line\">value &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¢«é—å¿˜çš„-ES6-Map-é”®å\"><a href=\"#è¢«é—å¿˜çš„-ES6-Map-é”®å\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„ ES6 Map é”®å\"></a>è¢«é—å¿˜çš„ ES6 Map é”®å</h3><p>å¦‚æœå¯¹ Map ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹<a href=\"http://es6.ruanyifeng.com/#docs/set-map#Map\">è¿™é‡Œ</a>ã€‚</p>\n<p>å¦‚ä¸‹æ˜¯æœ‰å†…å­˜æ³„æ¼çš„ï¼ˆé”®å€¼æ˜¯å¼•ç”¨ç±»å‹çš„ï¼Œå³å¯¹è±¡ï¼‰:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new Map();</span><br><span class=\"line\">let key &#x3D; new Array(5 * 1024 * 1024);</span><br><span class=\"line\">map.set(key, 1);</span><br><span class=\"line\">key &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦æ”¹æˆè¿™æ ·ï¼Œæ‰æ²¡å†…å­˜æ³„æ¼ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new Map();</span><br><span class=\"line\">let key &#x3D; new Array(5 * 1024 * 1024);</span><br><span class=\"line\">map.set(key, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">map.delete(key);</span><br><span class=\"line\">key &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<p>æœ‰ä¸ªæ›´ä¾¿æ·çš„æ–¹å¼ï¼Œä½¿ç”¨ WeakMapï¼ŒWeakMap çš„é”®åæ˜¯<strong>å¼±å¼•ç”¨</strong>ï¼Œå†…å­˜å›æ”¶ä¸ä¼šè€ƒè™‘åˆ°è¿™ä¸ªå¼•ç”¨æ˜¯å¦å­˜åœ¨ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">let map &#x3D; new WeakMap();</span><br><span class=\"line\">let key &#x3D; new Array(5 * 1024 * 1024);</span><br><span class=\"line\">map.set(key, 1);</span><br><span class=\"line\"></span><br><span class=\"line\">key &#x3D; null;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¢«é—å¿˜çš„è®¢é˜…å‘å¸ƒäº‹ä»¶ç›‘å¬å™¨\"><a href=\"#è¢«é—å¿˜çš„è®¢é˜…å‘å¸ƒäº‹ä»¶ç›‘å¬å™¨\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„è®¢é˜…å‘å¸ƒäº‹ä»¶ç›‘å¬å™¨\"></a>è¢«é—å¿˜çš„è®¢é˜…å‘å¸ƒäº‹ä»¶ç›‘å¬å™¨</h3><p>è¿™ä¸ªè·Ÿä¸Šé¢çš„<strong>è¢«é—å¿˜çš„äº‹ä»¶ç›‘å¬å™¨</strong>çš„é“ç†æ˜¯ä¸€æ ·çš„ã€‚</p>\n<p>å‡è®¾è®¢é˜…å‘å¸ƒäº‹ä»¶æœ‰ä¸‰ä¸ªæ–¹æ³• <code>emit</code> ã€<code>on</code> ã€<code>off</code> ä¸‰ä¸ªæ–¹æ³•ã€‚</p>\n<p>è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ vue ç»„ä»¶åšä¾‹å­ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div @click&#x3D;&quot;onClick&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">import customEvent from &#39;event&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    onClick() &#123;</span><br><span class=\"line\">      customEvent.emit(&#39;test&#39;, &#123; type: &#39;click&#39; &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    customEvent.on(&#39;test&#39;, data &#x3D;&gt; &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; ä¸€äº›é€»è¾‘</span><br><span class=\"line\">      console.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ç»„ä»¶é”€æ¯çš„æ—¶å€™ï¼Œè‡ªå®šä¹‰ test äº‹ä»¶è¿˜æ˜¯åœ¨ç›‘å¬ä¸­ï¼Œé‡Œé¢æ¶‰åŠåˆ°çš„å†…å­˜éƒ½æ˜¯æ²¡æ³•å›æ”¶çš„ï¼ˆæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯å¿…é¡»çš„å†…å­˜ï¼Œä¸æ˜¯åƒåœ¾å†…å­˜ï¼‰ï¼Œéœ€è¦åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™ç§»é™¤ç›¸å…³çš„äº‹ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div @click&#x3D;&quot;onClick&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">import customEvent from &#39;event&#39;</span><br><span class=\"line\"></span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    onClick() &#123;</span><br><span class=\"line\">      customEvent.emit(&#39;test&#39;, &#123; type: &#39;click&#39; &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  mounted() &#123;</span><br><span class=\"line\">    customEvent.on(&#39;test&#39;, data &#x3D;&gt; &#123;</span><br><span class=\"line\">      &#x2F;&#x2F; ä¸€äº›é€»è¾‘</span><br><span class=\"line\">      console.log(data)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  beforeDestroy() &#123;</span><br><span class=\"line\">    customEvent.off(&#39;test&#39;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è¢«é—å¿˜çš„é—­åŒ…\"><a href=\"#è¢«é—å¿˜çš„é—­åŒ…\" class=\"headerlink\" title=\"è¢«é—å¿˜çš„é—­åŒ…\"></a>è¢«é—å¿˜çš„é—­åŒ…</h3><p>é—­åŒ…æ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œé—­åŒ…èƒ½ç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤šä¾¿åˆ©ã€‚</p>\n<p>é¦–å…ˆçœ‹ä¸‹è¿™ä¸ªä»£ç ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function closure() &#123;</span><br><span class=\"line\">  const name &#x3D; &#39;xianshannan&#39;</span><br><span class=\"line\">  return () &#x3D;&gt; &#123;</span><br><span class=\"line\">    return name</span><br><span class=\"line\">      .split(&#39;&#39;)</span><br><span class=\"line\">      .reverse()</span><br><span class=\"line\">      .join(&#39;&#39;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const reverseName &#x3D; closure()</span><br><span class=\"line\">&#x2F;&#x2F; è¿™é‡Œè°ƒç”¨äº† reverseName</span><br><span class=\"line\">reverseName();</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢æœ‰æ²¡æœ‰å†…å­˜æ³„æ¼ï¼Ÿ</p>\n<p>ä¸Šé¢æ˜¯æ²¡æœ‰å†…å­˜æ³„æ¼çš„ï¼Œå› ä¸º<code>name</code> å˜é‡æ˜¯è¦ç”¨åˆ°çš„ï¼ˆéåƒåœ¾ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä»ä¾§é¢åæ˜ äº†é—­åŒ…çš„ç¼ºç‚¹ï¼Œå†…å­˜å ç”¨ç›¸å¯¹é«˜ï¼Œé‡å¤šäº†ä¼šæœ‰æ€§èƒ½å½±å“ã€‚</p>\n<p>ä½†æ˜¯æ”¹æˆè¿™æ ·å°±æ˜¯æœ‰å†…å­˜æ³„æ¼çš„ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">function closure() &#123;</span><br><span class=\"line\">  const name &#x3D; &#39;xianshannan&#39;</span><br><span class=\"line\">  return () &#x3D;&gt; &#123;</span><br><span class=\"line\">    return name</span><br><span class=\"line\">      .split(&#39;&#39;)</span><br><span class=\"line\">      .reverse()</span><br><span class=\"line\">      .join(&#39;&#39;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const reverseName &#x3D; closure()</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å½“å‰æ‰§è¡Œç¯å¢ƒæœªç»“æŸçš„æƒ…å†µä¸‹ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ ·æ˜¯æœ‰å†…å­˜æ³„æ¼çš„ï¼Œ<code>name</code> å˜é‡æ˜¯è¢« <code>closure</code> è¿”å›çš„å‡½æ•°è°ƒç”¨äº†ï¼Œä½†æ˜¯è¿”å›çš„å‡½æ•°æ²¡è¢«ä½¿ç”¨ï¼Œè¿™ä¸ªåœºæ™¯ä¸‹ <code>name</code> å°±å±äºåƒåœ¾å†…å­˜ã€‚<code>name</code> ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯è¿˜æ˜¯å ç”¨äº†å†…å­˜ï¼Œä¹Ÿä¸å¯è¢«å›æ”¶ã€‚</p>\n<p>å½“ç„¶è¿™ç§ä¹Ÿæ˜¯æç«¯æƒ…å†µï¼Œå¾ˆå°‘äººä¼šçŠ¯è¿™ç§ä½çº§é”™è¯¯ã€‚è¿™ä¸ªä¾‹å­å¯ä»¥è®©æˆ‘ä»¬æ›´æ¸…æ¥šçš„è®¤è¯†å†…å­˜æ³„æ¼ã€‚</p>\n<h3 id=\"è„±ç¦»-DOM-çš„å¼•ç”¨\"><a href=\"#è„±ç¦»-DOM-çš„å¼•ç”¨\" class=\"headerlink\" title=\"è„±ç¦» DOM çš„å¼•ç”¨\"></a>è„±ç¦» DOM çš„å¼•ç”¨</h3><p>æ¯ä¸ªé¡µé¢ä¸Šçš„ DOM éƒ½æ˜¯å ç”¨å†…å­˜çš„ï¼Œå‡è®¾æœ‰ä¸€ä¸ªé¡µé¢ A å…ƒç´ ï¼Œæˆ‘ä»¬è·å–åˆ°äº† A å…ƒç´  DOM å¯¹è±¡ï¼Œç„¶åèµ‹å€¼åˆ°äº†ä¸€ä¸ªå˜é‡ï¼ˆå†…å­˜æŒ‡å‘æ˜¯ä¸€æ ·çš„ï¼‰ï¼Œç„¶åç§»é™¤äº†é¡µé¢çš„ A å…ƒç´ ï¼Œå¦‚æœè¿™ä¸ªå˜é‡ç”±äºå…¶ä»–åŸå› æ²¡æœ‰è¢«å›æ”¶ï¼Œé‚£ä¹ˆå°±å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">class Test &#123;</span><br><span class=\"line\">  constructor() &#123;</span><br><span class=\"line\">    this.elements &#x3D; &#123;</span><br><span class=\"line\">      button: document.querySelector(&#39;#button&#39;),</span><br><span class=\"line\">      div: document.querySelector(&#39;#div&#39;),</span><br><span class=\"line\">      span: document.querySelector(&#39;#span&#39;),</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  removeButton() &#123;</span><br><span class=\"line\">    document.body.removeChild(this.elements.button)</span><br><span class=\"line\">    &#x2F;&#x2F; this.elements.button &#x3D; null</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">const a &#x3D; new Test()</span><br><span class=\"line\">a.removeButton()</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä¾‹å­ button å…ƒç´  è™½ç„¶åœ¨é¡µé¢ä¸Šç§»é™¤äº†ï¼Œä½†æ˜¯å†…å­˜æŒ‡å‘æ¢ä¸ºäº† <code>this.elements.button</code>ï¼Œå†…å­˜å ç”¨è¿˜æ˜¯å­˜åœ¨çš„ã€‚æ‰€ä»¥ä¸Šé¢çš„ä»£ç è¿˜éœ€è¦è¿™æ ·å†™ï¼š <code>this.elements.button = null</code>ï¼Œæ‰‹åŠ¨é‡Šæ”¾è¿™ä¸ªå†…å­˜ã€‚</p>\n<h2 id=\"å¦‚ä½•å‘ç°å†…å­˜æ³„æ¼ï¼Ÿ\"><a href=\"#å¦‚ä½•å‘ç°å†…å­˜æ³„æ¼ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å‘ç°å†…å­˜æ³„æ¼ï¼Ÿ\"></a>å¦‚ä½•å‘ç°å†…å­˜æ³„æ¼ï¼Ÿ</h2><p>å†…å­˜æ³„æ¼æ—¶ï¼Œå†…å­˜ä¸€èˆ¬éƒ½æ˜¯ä¼šå‘¨æœŸæ€§çš„å¢é•¿ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è°·æ­Œæµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·è¿›è¡Œåˆ¤åˆ«ã€‚</p>\n<p>è¿™é‡Œä¸è¿›è¡Œè¯¦ç»†çš„å¼€å‘è€…å·¥å…·ä½¿ç”¨è¯´æ˜ï¼Œè¯¦ç»†çœ‹<a href=\"https://developers.google.com/web/tools/chrome-devtools/?hl=zh-cn\">è°·æ­Œå¼€å‘è€…å·¥å…·</a>ï¼Œä¸è¿‡è°·æ­Œæµè§ˆå™¨æ˜¯ä¸æ–­è¿­ä»£æ›´æ–°çš„ï¼Œæœ‰äº›æ–‡æ¡£è½åäº†ï¼Œç•Œé¢é•¿å¾—ä¸ä¸€æ ·ã€‚</p>\n<p>æœ¬äººæµ‹è¯•çš„è°·æ­Œç‰ˆæœ¬ä¸ºï¼š<strong>ç‰ˆæœ¬ 76.0.3809.100ï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰ ï¼ˆ64 ä½ï¼‰</strong>ã€‚</p>\n<p>è¿™é‡Œé’ˆå¯¹ä¸‹é¢ä¾‹å­è¿›è¡Œä¸€æ­¥ä¸€æ­¥çš„æ’æŸ¥å’Œæ‰¾åˆ°é—®é¢˜å‡ºç°åœ¨å“ªé‡Œï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">  &lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset&#x3D;&quot;utf-8&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;&#x2F;head&gt;</span><br><span class=\"line\">  &lt;body&gt;</span><br><span class=\"line\">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class=\"line\">      &lt;button id&#x3D;&quot;run&quot;&gt;è¿è¡Œ&lt;&#x2F;button&gt;</span><br><span class=\"line\">      &lt;button id&#x3D;&quot;stop&quot;&gt;åœæ­¢&lt;&#x2F;button&gt;</span><br><span class=\"line\">    &lt;&#x2F;div&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">      const arr &#x3D; []</span><br><span class=\"line\">      for (let i &#x3D; 0; i &lt; 200000; i++) &#123;</span><br><span class=\"line\">        arr.push(i)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      let newArr &#x3D; []</span><br><span class=\"line\"></span><br><span class=\"line\">      function run() &#123;</span><br><span class=\"line\">        newArr &#x3D; newArr.concat(arr)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      let clearRun</span><br><span class=\"line\"></span><br><span class=\"line\">      document.querySelector(&#39;#run&#39;).onclick &#x3D; function() &#123;</span><br><span class=\"line\">        clearRun &#x3D; setInterval(() &#x3D;&gt; &#123;</span><br><span class=\"line\">          run()</span><br><span class=\"line\">        &#125;, 1000)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      document.querySelector(&#39;#stop&#39;).onclick &#x3D; function() &#123;</span><br><span class=\"line\">        clearInterval(clearRun)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &lt;&#x2F;script&gt;</span><br><span class=\"line\">  &lt;&#x2F;body&gt;</span><br><span class=\"line\">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä¾‹å­çš„ä»£ç å¯ä»¥ç›´æ¥è¿è¡Œçš„ï¼Œæ€ä¹ˆè¿è¡Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚</p>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ˜¯å¦æ˜¯å†…å­˜æ³„æ¼é—®é¢˜\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ˜¯å¦æ˜¯å†…å­˜æ³„æ¼é—®é¢˜\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ˜¯å¦æ˜¯å†…å­˜æ³„æ¼é—®é¢˜\"></a>ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ˜¯å¦æ˜¯å†…å­˜æ³„æ¼é—®é¢˜</h3><p>è®¿é—®ä¸Šé¢çš„ä»£ç é¡µé¢ï¼Œæ‰“å¼€è°·æ­Œå¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢è‡³ <strong>Performance</strong> é€‰é¡¹ï¼Œå‹¾é€‰ <code>Memory</code> é€‰é¡¹ã€‚</p>\n<p>åœ¨é¡µé¢ä¸Šç‚¹å‡»<strong>è¿è¡ŒæŒ‰é’®</strong>ï¼Œç„¶ååœ¨å¼€å‘è€…å·¥å…·ä¸Šé¢ç‚¹å‡»å·¦ä¸Šè§’çš„å½•åˆ¶æŒ‰é’®ï¼Œ10 ç§’ååœ¨é¡µé¢ä¸Šç‚¹å‡»<strong>åœæ­¢æŒ‰é’®</strong>ï¼Œ5 ç§’ååœæ­¢å†…å­˜å½•åˆ¶ã€‚å¾—åˆ°çš„å†…å­˜èµ°åŠ¿å¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://segmentfault.com/img/bVbxaaT\" alt=\"clipboard.png\"></p>\n<p>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œ10 ç§’ä¹‹å‰å†…å­˜å‘¨æœŸæ€§å¢é•¿ï¼Œ10 åç‚¹å‡»äº†åœæ­¢æŒ‰é’®ï¼Œå†…å­˜å¹³ç¨³ï¼Œä¸å†é€’å¢ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…å­˜èµ°åŠ¿å›¾åˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦æœ‰å†…å­˜æ³„æ¼ã€‚ç»è¿‡æµ‹è¯•ä¸Šé¢çš„ä»£ç  <code>20000</code> ä¸ªæ•°ç»„é¡¹æ”¹ä¸º <code>20</code> ä¸ªæ•°ç»„é¡¹ï¼Œå†…å­˜èµ°åŠ¿ä¹Ÿä¸€æ ·èƒ½çœ‹å‡ºæ¥ã€‚</p>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾å†…å­˜æ³„æ¼å‡ºç°çš„ä½ç½®\"><a href=\"#ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾å†…å­˜æ³„æ¼å‡ºç°çš„ä½ç½®\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾å†…å­˜æ³„æ¼å‡ºç°çš„ä½ç½®\"></a>ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾å†…å­˜æ³„æ¼å‡ºç°çš„ä½ç½®</h3><p>ä¸Šä¸€æ­¥ç¡®è®¤æ˜¯å†…å­˜æ³„æ¼é—®é¢˜åï¼Œæˆ‘ä»¬ç»§ç»­åˆ©ç”¨è°·æ­Œå¼€å‘è€…å·¥å…·è¿›è¡Œé—®é¢˜æŸ¥æ‰¾ã€‚</p>\n<p>è®¿é—®ä¸Šé¢çš„ä»£ç é¡µé¢ï¼Œæ‰“å¼€è°·æ­Œå¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢è‡³ <strong>Memory</strong> é€‰é¡¹ã€‚é¡µé¢ä¸Šç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼Œç„¶åç‚¹å‡»å¼€å‘è€…å·¥å…·å·¦ä¸Šè§’å½•åˆ¶æŒ‰é’®ï¼Œå½•åˆ¶å®Œæˆåç»§ç»­ç‚¹å‡»å½•åˆ¶ï¼ŒçŸ¥é“å½•åˆ¶å®Œä¸‰ä¸ªä¸ºæ­¢ã€‚ç„¶åç‚¹å‡»é¡µé¢çš„åœæ­¢æŒ‰é’®ï¼Œå†è¿ç»­å½•åˆ¶ 3 æ¬¡å†…å­˜ï¼ˆä¸è¦æ¸…ç†ä¹‹å‰çš„å½•åˆ¶ï¼‰ã€‚ä¸‹å›¾å°±æ˜¯è¿›è¡Œè¿™äº›æ­¥éª¤åçš„æˆªå›¾ï¼š</p>\n<p><img data-src=\"https://segmentfault.com/img/bVbxaaO\" alt=\"clipboard.png\"></p>\n<p>ä»è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œç‚¹å‡»è¿è¡ŒæŒ‰é’®åï¼Œå†…å­˜åœ¨ä¸æ–­é€’å¢ã€‚ç‚¹å‡»åœæ­¢æŒ‰é’®åï¼Œå†…å­˜å°±å¹³ç¨³äº†ã€‚è™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼æ¥åˆ¤åˆ«æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯ä¸å¤Ÿç¬¬ä¸€æ­¥çš„æ–¹æ³•ä¾¿æ·ï¼Œèµ°åŠ¿å›¾ä¹Ÿæ›´ç›´è§‚ã€‚</p>\n<p>ç„¶åç¬¬äºŒæ­¥çš„ä¸»è¦ç›®çš„æ¥äº†ï¼Œè®°å½• JavaScript å †å†…å­˜æ‰æ˜¯å†…å­˜å½•åˆ¶çš„ä¸»è¦ç›®çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å“ªä¸ªå †å ç”¨çš„å†…å­˜æ›´é«˜ã€‚</p>\n<p>åœ¨åˆšæ‰çš„å½•åˆ¶ä¸­é€‰æ‹© Snapshot 3 ï¼Œç„¶åæŒ‰ç…§ <strong>Shallow Size</strong> è¿›è¡Œé€†åºæ’åºï¼ˆä¸äº†è§£çš„å¯ä»¥çœ‹<a href=\"https://developers.google.com/web/tools/chrome-devtools/memory-problems/memory-101?hl=zh-cn\">å†…å­˜æœ¯è¯­</a>ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p>\n<p><img data-src=\"https://segmentfault.com/img/bVbxaaL\" alt=\"clipboard.png\"></p>\n<p>ä»å†…å­˜è®°å½•ä¸­ï¼Œå‘ç° array å¯¹è±¡å ç”¨æœ€å¤§ï¼Œå±•å¼€åå‘ç°ï¼Œç¬¬ä¸€ä¸ª <code>object elements</code> å ç”¨æœ€å¤§ï¼Œé€‰æ‹©è¿™ä¸ª <code>object elements</code> åå¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ° <code>newArr</code> å˜é‡ï¼Œç„¶åç‚¹å‡» <code>test:23</code>ï¼Œåªè¦æ˜¯é«˜äº®ä¸‹åˆ’çº¿çš„åœ°æ–¹éƒ½å¯ä»¥è¿›å»çœ‹çœ‹ ï¼ˆæµ‹è¯•é¡µé¢æ˜¯ test.htmlï¼‰ï¼Œå¯ä»¥è·³è½¬åˆ° <code>newArr</code> é™„è¿‘ã€‚</p>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://zh.wikipedia.org/zh-hans/%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F\">ç»´åŸºç™¾ç§‘-å†…å­˜æ³„æ¼</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management\">å†…å­˜ç®¡ç†</a></li>\n<li><a href=\"https://auth0.com/blog/four-types-of-leaks-in-your-javascript-code-and-how-to-get-rid-of-them/\">4 Types of Memory Leaks in JavaScript and How to Get Rid Of Them</a></li>\n<li><a href=\"https://juejin.im/post/5b684f30f265da0f9f4e87cf\">javascript åƒåœ¾å›æ”¶æœºåˆ¶</a></li>\n<li><a href=\"https://blog.sessionstack.com/how-javascript-works-memory-management-how-to-handle-4-common-memory-leaks-3f28b94cfbec\">How JavaScript works: memory management + how to handle 4 common memory leaks</a></li>\n</ul>\n","categories":["webå‰ç«¯"],"tags":["é¢è¯•","HTML","æµè§ˆå™¨"]}]